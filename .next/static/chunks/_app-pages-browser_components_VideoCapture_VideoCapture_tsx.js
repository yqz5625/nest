/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_components_VideoCapture_VideoCapture_tsx"],{

/***/ "(app-pages-browser)/./node_modules/next/dist/compiled/buffer/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/next/dist/compiled/buffer/index.js ***!
  \*********************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval(__webpack_require__.ts("var __dirname = \"/\";\n(function(){var e={675:function(e,r){\"use strict\";r.byteLength=byteLength;r.toByteArray=toByteArray;r.fromByteArray=fromByteArray;var t=[];var f=[];var n=typeof Uint8Array!==\"undefined\"?Uint8Array:Array;var i=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";for(var o=0,u=i.length;o<u;++o){t[o]=i[o];f[i.charCodeAt(o)]=o}f[\"-\".charCodeAt(0)]=62;f[\"_\".charCodeAt(0)]=63;function getLens(e){var r=e.length;if(r%4>0){throw new Error(\"Invalid string. Length must be a multiple of 4\")}var t=e.indexOf(\"=\");if(t===-1)t=r;var f=t===r?0:4-t%4;return[t,f]}function byteLength(e){var r=getLens(e);var t=r[0];var f=r[1];return(t+f)*3/4-f}function _byteLength(e,r,t){return(r+t)*3/4-t}function toByteArray(e){var r;var t=getLens(e);var i=t[0];var o=t[1];var u=new n(_byteLength(e,i,o));var a=0;var s=o>0?i-4:i;var h;for(h=0;h<s;h+=4){r=f[e.charCodeAt(h)]<<18|f[e.charCodeAt(h+1)]<<12|f[e.charCodeAt(h+2)]<<6|f[e.charCodeAt(h+3)];u[a++]=r>>16&255;u[a++]=r>>8&255;u[a++]=r&255}if(o===2){r=f[e.charCodeAt(h)]<<2|f[e.charCodeAt(h+1)]>>4;u[a++]=r&255}if(o===1){r=f[e.charCodeAt(h)]<<10|f[e.charCodeAt(h+1)]<<4|f[e.charCodeAt(h+2)]>>2;u[a++]=r>>8&255;u[a++]=r&255}return u}function tripletToBase64(e){return t[e>>18&63]+t[e>>12&63]+t[e>>6&63]+t[e&63]}function encodeChunk(e,r,t){var f;var n=[];for(var i=r;i<t;i+=3){f=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255);n.push(tripletToBase64(f))}return n.join(\"\")}function fromByteArray(e){var r;var f=e.length;var n=f%3;var i=[];var o=16383;for(var u=0,a=f-n;u<a;u+=o){i.push(encodeChunk(e,u,u+o>a?a:u+o))}if(n===1){r=e[f-1];i.push(t[r>>2]+t[r<<4&63]+\"==\")}else if(n===2){r=(e[f-2]<<8)+e[f-1];i.push(t[r>>10]+t[r>>4&63]+t[r<<2&63]+\"=\")}return i.join(\"\")}},72:function(e,r,t){\"use strict\";\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */var f=t(675);var n=t(783);var i=typeof Symbol===\"function\"&&typeof Symbol.for===\"function\"?Symbol.for(\"nodejs.util.inspect.custom\"):null;r.Buffer=Buffer;r.SlowBuffer=SlowBuffer;r.INSPECT_MAX_BYTES=50;var o=2147483647;r.kMaxLength=o;Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport();if(!Buffer.TYPED_ARRAY_SUPPORT&&typeof console!==\"undefined\"&&typeof console.error===\"function\"){console.error(\"This browser lacks typed array (Uint8Array) support which is required by \"+\"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.\")}function typedArraySupport(){try{var e=new Uint8Array(1);var r={foo:function(){return 42}};Object.setPrototypeOf(r,Uint8Array.prototype);Object.setPrototypeOf(e,r);return e.foo()===42}catch(e){return false}}Object.defineProperty(Buffer.prototype,\"parent\",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(Buffer.prototype,\"offset\",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.byteOffset}});function createBuffer(e){if(e>o){throw new RangeError('The value \"'+e+'\" is invalid for option \"size\"')}var r=new Uint8Array(e);Object.setPrototypeOf(r,Buffer.prototype);return r}function Buffer(e,r,t){if(typeof e===\"number\"){if(typeof r===\"string\"){throw new TypeError('The \"string\" argument must be of type string. Received type number')}return allocUnsafe(e)}return from(e,r,t)}Buffer.poolSize=8192;function from(e,r,t){if(typeof e===\"string\"){return fromString(e,r)}if(ArrayBuffer.isView(e)){return fromArrayLike(e)}if(e==null){throw new TypeError(\"The first argument must be one of type string, Buffer, ArrayBuffer, Array, \"+\"or Array-like Object. Received type \"+typeof e)}if(isInstance(e,ArrayBuffer)||e&&isInstance(e.buffer,ArrayBuffer)){return fromArrayBuffer(e,r,t)}if(typeof SharedArrayBuffer!==\"undefined\"&&(isInstance(e,SharedArrayBuffer)||e&&isInstance(e.buffer,SharedArrayBuffer))){return fromArrayBuffer(e,r,t)}if(typeof e===\"number\"){throw new TypeError('The \"value\" argument must not be of type number. Received type number')}var f=e.valueOf&&e.valueOf();if(f!=null&&f!==e){return Buffer.from(f,r,t)}var n=fromObject(e);if(n)return n;if(typeof Symbol!==\"undefined\"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]===\"function\"){return Buffer.from(e[Symbol.toPrimitive](\"string\"),r,t)}throw new TypeError(\"The first argument must be one of type string, Buffer, ArrayBuffer, Array, \"+\"or Array-like Object. Received type \"+typeof e)}Buffer.from=function(e,r,t){return from(e,r,t)};Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype);Object.setPrototypeOf(Buffer,Uint8Array);function assertSize(e){if(typeof e!==\"number\"){throw new TypeError('\"size\" argument must be of type number')}else if(e<0){throw new RangeError('The value \"'+e+'\" is invalid for option \"size\"')}}function alloc(e,r,t){assertSize(e);if(e<=0){return createBuffer(e)}if(r!==undefined){return typeof t===\"string\"?createBuffer(e).fill(r,t):createBuffer(e).fill(r)}return createBuffer(e)}Buffer.alloc=function(e,r,t){return alloc(e,r,t)};function allocUnsafe(e){assertSize(e);return createBuffer(e<0?0:checked(e)|0)}Buffer.allocUnsafe=function(e){return allocUnsafe(e)};Buffer.allocUnsafeSlow=function(e){return allocUnsafe(e)};function fromString(e,r){if(typeof r!==\"string\"||r===\"\"){r=\"utf8\"}if(!Buffer.isEncoding(r)){throw new TypeError(\"Unknown encoding: \"+r)}var t=byteLength(e,r)|0;var f=createBuffer(t);var n=f.write(e,r);if(n!==t){f=f.slice(0,n)}return f}function fromArrayLike(e){var r=e.length<0?0:checked(e.length)|0;var t=createBuffer(r);for(var f=0;f<r;f+=1){t[f]=e[f]&255}return t}function fromArrayBuffer(e,r,t){if(r<0||e.byteLength<r){throw new RangeError('\"offset\" is outside of buffer bounds')}if(e.byteLength<r+(t||0)){throw new RangeError('\"length\" is outside of buffer bounds')}var f;if(r===undefined&&t===undefined){f=new Uint8Array(e)}else if(t===undefined){f=new Uint8Array(e,r)}else{f=new Uint8Array(e,r,t)}Object.setPrototypeOf(f,Buffer.prototype);return f}function fromObject(e){if(Buffer.isBuffer(e)){var r=checked(e.length)|0;var t=createBuffer(r);if(t.length===0){return t}e.copy(t,0,0,r);return t}if(e.length!==undefined){if(typeof e.length!==\"number\"||numberIsNaN(e.length)){return createBuffer(0)}return fromArrayLike(e)}if(e.type===\"Buffer\"&&Array.isArray(e.data)){return fromArrayLike(e.data)}}function checked(e){if(e>=o){throw new RangeError(\"Attempt to allocate Buffer larger than maximum \"+\"size: 0x\"+o.toString(16)+\" bytes\")}return e|0}function SlowBuffer(e){if(+e!=e){e=0}return Buffer.alloc(+e)}Buffer.isBuffer=function isBuffer(e){return e!=null&&e._isBuffer===true&&e!==Buffer.prototype};Buffer.compare=function compare(e,r){if(isInstance(e,Uint8Array))e=Buffer.from(e,e.offset,e.byteLength);if(isInstance(r,Uint8Array))r=Buffer.from(r,r.offset,r.byteLength);if(!Buffer.isBuffer(e)||!Buffer.isBuffer(r)){throw new TypeError('The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array')}if(e===r)return 0;var t=e.length;var f=r.length;for(var n=0,i=Math.min(t,f);n<i;++n){if(e[n]!==r[n]){t=e[n];f=r[n];break}}if(t<f)return-1;if(f<t)return 1;return 0};Buffer.isEncoding=function isEncoding(e){switch(String(e).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return true;default:return false}};Buffer.concat=function concat(e,r){if(!Array.isArray(e)){throw new TypeError('\"list\" argument must be an Array of Buffers')}if(e.length===0){return Buffer.alloc(0)}var t;if(r===undefined){r=0;for(t=0;t<e.length;++t){r+=e[t].length}}var f=Buffer.allocUnsafe(r);var n=0;for(t=0;t<e.length;++t){var i=e[t];if(isInstance(i,Uint8Array)){i=Buffer.from(i)}if(!Buffer.isBuffer(i)){throw new TypeError('\"list\" argument must be an Array of Buffers')}i.copy(f,n);n+=i.length}return f};function byteLength(e,r){if(Buffer.isBuffer(e)){return e.length}if(ArrayBuffer.isView(e)||isInstance(e,ArrayBuffer)){return e.byteLength}if(typeof e!==\"string\"){throw new TypeError('The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. '+\"Received type \"+typeof e)}var t=e.length;var f=arguments.length>2&&arguments[2]===true;if(!f&&t===0)return 0;var n=false;for(;;){switch(r){case\"ascii\":case\"latin1\":case\"binary\":return t;case\"utf8\":case\"utf-8\":return utf8ToBytes(e).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return t*2;case\"hex\":return t>>>1;case\"base64\":return base64ToBytes(e).length;default:if(n){return f?-1:utf8ToBytes(e).length}r=(\"\"+r).toLowerCase();n=true}}}Buffer.byteLength=byteLength;function slowToString(e,r,t){var f=false;if(r===undefined||r<0){r=0}if(r>this.length){return\"\"}if(t===undefined||t>this.length){t=this.length}if(t<=0){return\"\"}t>>>=0;r>>>=0;if(t<=r){return\"\"}if(!e)e=\"utf8\";while(true){switch(e){case\"hex\":return hexSlice(this,r,t);case\"utf8\":case\"utf-8\":return utf8Slice(this,r,t);case\"ascii\":return asciiSlice(this,r,t);case\"latin1\":case\"binary\":return latin1Slice(this,r,t);case\"base64\":return base64Slice(this,r,t);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return utf16leSlice(this,r,t);default:if(f)throw new TypeError(\"Unknown encoding: \"+e);e=(e+\"\").toLowerCase();f=true}}}Buffer.prototype._isBuffer=true;function swap(e,r,t){var f=e[r];e[r]=e[t];e[t]=f}Buffer.prototype.swap16=function swap16(){var e=this.length;if(e%2!==0){throw new RangeError(\"Buffer size must be a multiple of 16-bits\")}for(var r=0;r<e;r+=2){swap(this,r,r+1)}return this};Buffer.prototype.swap32=function swap32(){var e=this.length;if(e%4!==0){throw new RangeError(\"Buffer size must be a multiple of 32-bits\")}for(var r=0;r<e;r+=4){swap(this,r,r+3);swap(this,r+1,r+2)}return this};Buffer.prototype.swap64=function swap64(){var e=this.length;if(e%8!==0){throw new RangeError(\"Buffer size must be a multiple of 64-bits\")}for(var r=0;r<e;r+=8){swap(this,r,r+7);swap(this,r+1,r+6);swap(this,r+2,r+5);swap(this,r+3,r+4)}return this};Buffer.prototype.toString=function toString(){var e=this.length;if(e===0)return\"\";if(arguments.length===0)return utf8Slice(this,0,e);return slowToString.apply(this,arguments)};Buffer.prototype.toLocaleString=Buffer.prototype.toString;Buffer.prototype.equals=function equals(e){if(!Buffer.isBuffer(e))throw new TypeError(\"Argument must be a Buffer\");if(this===e)return true;return Buffer.compare(this,e)===0};Buffer.prototype.inspect=function inspect(){var e=\"\";var t=r.INSPECT_MAX_BYTES;e=this.toString(\"hex\",0,t).replace(/(.{2})/g,\"$1 \").trim();if(this.length>t)e+=\" ... \";return\"<Buffer \"+e+\">\"};if(i){Buffer.prototype[i]=Buffer.prototype.inspect}Buffer.prototype.compare=function compare(e,r,t,f,n){if(isInstance(e,Uint8Array)){e=Buffer.from(e,e.offset,e.byteLength)}if(!Buffer.isBuffer(e)){throw new TypeError('The \"target\" argument must be one of type Buffer or Uint8Array. '+\"Received type \"+typeof e)}if(r===undefined){r=0}if(t===undefined){t=e?e.length:0}if(f===undefined){f=0}if(n===undefined){n=this.length}if(r<0||t>e.length||f<0||n>this.length){throw new RangeError(\"out of range index\")}if(f>=n&&r>=t){return 0}if(f>=n){return-1}if(r>=t){return 1}r>>>=0;t>>>=0;f>>>=0;n>>>=0;if(this===e)return 0;var i=n-f;var o=t-r;var u=Math.min(i,o);var a=this.slice(f,n);var s=e.slice(r,t);for(var h=0;h<u;++h){if(a[h]!==s[h]){i=a[h];o=s[h];break}}if(i<o)return-1;if(o<i)return 1;return 0};function bidirectionalIndexOf(e,r,t,f,n){if(e.length===0)return-1;if(typeof t===\"string\"){f=t;t=0}else if(t>2147483647){t=2147483647}else if(t<-2147483648){t=-2147483648}t=+t;if(numberIsNaN(t)){t=n?0:e.length-1}if(t<0)t=e.length+t;if(t>=e.length){if(n)return-1;else t=e.length-1}else if(t<0){if(n)t=0;else return-1}if(typeof r===\"string\"){r=Buffer.from(r,f)}if(Buffer.isBuffer(r)){if(r.length===0){return-1}return arrayIndexOf(e,r,t,f,n)}else if(typeof r===\"number\"){r=r&255;if(typeof Uint8Array.prototype.indexOf===\"function\"){if(n){return Uint8Array.prototype.indexOf.call(e,r,t)}else{return Uint8Array.prototype.lastIndexOf.call(e,r,t)}}return arrayIndexOf(e,[r],t,f,n)}throw new TypeError(\"val must be string, number or Buffer\")}function arrayIndexOf(e,r,t,f,n){var i=1;var o=e.length;var u=r.length;if(f!==undefined){f=String(f).toLowerCase();if(f===\"ucs2\"||f===\"ucs-2\"||f===\"utf16le\"||f===\"utf-16le\"){if(e.length<2||r.length<2){return-1}i=2;o/=2;u/=2;t/=2}}function read(e,r){if(i===1){return e[r]}else{return e.readUInt16BE(r*i)}}var a;if(n){var s=-1;for(a=t;a<o;a++){if(read(e,a)===read(r,s===-1?0:a-s)){if(s===-1)s=a;if(a-s+1===u)return s*i}else{if(s!==-1)a-=a-s;s=-1}}}else{if(t+u>o)t=o-u;for(a=t;a>=0;a--){var h=true;for(var c=0;c<u;c++){if(read(e,a+c)!==read(r,c)){h=false;break}}if(h)return a}}return-1}Buffer.prototype.includes=function includes(e,r,t){return this.indexOf(e,r,t)!==-1};Buffer.prototype.indexOf=function indexOf(e,r,t){return bidirectionalIndexOf(this,e,r,t,true)};Buffer.prototype.lastIndexOf=function lastIndexOf(e,r,t){return bidirectionalIndexOf(this,e,r,t,false)};function hexWrite(e,r,t,f){t=Number(t)||0;var n=e.length-t;if(!f){f=n}else{f=Number(f);if(f>n){f=n}}var i=r.length;if(f>i/2){f=i/2}for(var o=0;o<f;++o){var u=parseInt(r.substr(o*2,2),16);if(numberIsNaN(u))return o;e[t+o]=u}return o}function utf8Write(e,r,t,f){return blitBuffer(utf8ToBytes(r,e.length-t),e,t,f)}function asciiWrite(e,r,t,f){return blitBuffer(asciiToBytes(r),e,t,f)}function latin1Write(e,r,t,f){return asciiWrite(e,r,t,f)}function base64Write(e,r,t,f){return blitBuffer(base64ToBytes(r),e,t,f)}function ucs2Write(e,r,t,f){return blitBuffer(utf16leToBytes(r,e.length-t),e,t,f)}Buffer.prototype.write=function write(e,r,t,f){if(r===undefined){f=\"utf8\";t=this.length;r=0}else if(t===undefined&&typeof r===\"string\"){f=r;t=this.length;r=0}else if(isFinite(r)){r=r>>>0;if(isFinite(t)){t=t>>>0;if(f===undefined)f=\"utf8\"}else{f=t;t=undefined}}else{throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\")}var n=this.length-r;if(t===undefined||t>n)t=n;if(e.length>0&&(t<0||r<0)||r>this.length){throw new RangeError(\"Attempt to write outside buffer bounds\")}if(!f)f=\"utf8\";var i=false;for(;;){switch(f){case\"hex\":return hexWrite(this,e,r,t);case\"utf8\":case\"utf-8\":return utf8Write(this,e,r,t);case\"ascii\":return asciiWrite(this,e,r,t);case\"latin1\":case\"binary\":return latin1Write(this,e,r,t);case\"base64\":return base64Write(this,e,r,t);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return ucs2Write(this,e,r,t);default:if(i)throw new TypeError(\"Unknown encoding: \"+f);f=(\"\"+f).toLowerCase();i=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(e,r,t){if(r===0&&t===e.length){return f.fromByteArray(e)}else{return f.fromByteArray(e.slice(r,t))}}function utf8Slice(e,r,t){t=Math.min(e.length,t);var f=[];var n=r;while(n<t){var i=e[n];var o=null;var u=i>239?4:i>223?3:i>191?2:1;if(n+u<=t){var a,s,h,c;switch(u){case 1:if(i<128){o=i}break;case 2:a=e[n+1];if((a&192)===128){c=(i&31)<<6|a&63;if(c>127){o=c}}break;case 3:a=e[n+1];s=e[n+2];if((a&192)===128&&(s&192)===128){c=(i&15)<<12|(a&63)<<6|s&63;if(c>2047&&(c<55296||c>57343)){o=c}}break;case 4:a=e[n+1];s=e[n+2];h=e[n+3];if((a&192)===128&&(s&192)===128&&(h&192)===128){c=(i&15)<<18|(a&63)<<12|(s&63)<<6|h&63;if(c>65535&&c<1114112){o=c}}}}if(o===null){o=65533;u=1}else if(o>65535){o-=65536;f.push(o>>>10&1023|55296);o=56320|o&1023}f.push(o);n+=u}return decodeCodePointsArray(f)}var u=4096;function decodeCodePointsArray(e){var r=e.length;if(r<=u){return String.fromCharCode.apply(String,e)}var t=\"\";var f=0;while(f<r){t+=String.fromCharCode.apply(String,e.slice(f,f+=u))}return t}function asciiSlice(e,r,t){var f=\"\";t=Math.min(e.length,t);for(var n=r;n<t;++n){f+=String.fromCharCode(e[n]&127)}return f}function latin1Slice(e,r,t){var f=\"\";t=Math.min(e.length,t);for(var n=r;n<t;++n){f+=String.fromCharCode(e[n])}return f}function hexSlice(e,r,t){var f=e.length;if(!r||r<0)r=0;if(!t||t<0||t>f)t=f;var n=\"\";for(var i=r;i<t;++i){n+=s[e[i]]}return n}function utf16leSlice(e,r,t){var f=e.slice(r,t);var n=\"\";for(var i=0;i<f.length;i+=2){n+=String.fromCharCode(f[i]+f[i+1]*256)}return n}Buffer.prototype.slice=function slice(e,r){var t=this.length;e=~~e;r=r===undefined?t:~~r;if(e<0){e+=t;if(e<0)e=0}else if(e>t){e=t}if(r<0){r+=t;if(r<0)r=0}else if(r>t){r=t}if(r<e)r=e;var f=this.subarray(e,r);Object.setPrototypeOf(f,Buffer.prototype);return f};function checkOffset(e,r,t){if(e%1!==0||e<0)throw new RangeError(\"offset is not uint\");if(e+r>t)throw new RangeError(\"Trying to access beyond buffer length\")}Buffer.prototype.readUIntLE=function readUIntLE(e,r,t){e=e>>>0;r=r>>>0;if(!t)checkOffset(e,r,this.length);var f=this[e];var n=1;var i=0;while(++i<r&&(n*=256)){f+=this[e+i]*n}return f};Buffer.prototype.readUIntBE=function readUIntBE(e,r,t){e=e>>>0;r=r>>>0;if(!t){checkOffset(e,r,this.length)}var f=this[e+--r];var n=1;while(r>0&&(n*=256)){f+=this[e+--r]*n}return f};Buffer.prototype.readUInt8=function readUInt8(e,r){e=e>>>0;if(!r)checkOffset(e,1,this.length);return this[e]};Buffer.prototype.readUInt16LE=function readUInt16LE(e,r){e=e>>>0;if(!r)checkOffset(e,2,this.length);return this[e]|this[e+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(e,r){e=e>>>0;if(!r)checkOffset(e,2,this.length);return this[e]<<8|this[e+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Buffer.prototype.readIntLE=function readIntLE(e,r,t){e=e>>>0;r=r>>>0;if(!t)checkOffset(e,r,this.length);var f=this[e];var n=1;var i=0;while(++i<r&&(n*=256)){f+=this[e+i]*n}n*=128;if(f>=n)f-=Math.pow(2,8*r);return f};Buffer.prototype.readIntBE=function readIntBE(e,r,t){e=e>>>0;r=r>>>0;if(!t)checkOffset(e,r,this.length);var f=r;var n=1;var i=this[e+--f];while(f>0&&(n*=256)){i+=this[e+--f]*n}n*=128;if(i>=n)i-=Math.pow(2,8*r);return i};Buffer.prototype.readInt8=function readInt8(e,r){e=e>>>0;if(!r)checkOffset(e,1,this.length);if(!(this[e]&128))return this[e];return(255-this[e]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(e,r){e=e>>>0;if(!r)checkOffset(e,2,this.length);var t=this[e]|this[e+1]<<8;return t&32768?t|4294901760:t};Buffer.prototype.readInt16BE=function readInt16BE(e,r){e=e>>>0;if(!r)checkOffset(e,2,this.length);var t=this[e+1]|this[e]<<8;return t&32768?t|4294901760:t};Buffer.prototype.readInt32LE=function readInt32LE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Buffer.prototype.readFloatLE=function readFloatLE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return n.read(this,e,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(e,r){e=e>>>0;if(!r)checkOffset(e,4,this.length);return n.read(this,e,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(e,r){e=e>>>0;if(!r)checkOffset(e,8,this.length);return n.read(this,e,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(e,r){e=e>>>0;if(!r)checkOffset(e,8,this.length);return n.read(this,e,false,52,8)};function checkInt(e,r,t,f,n,i){if(!Buffer.isBuffer(e))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(r>n||r<i)throw new RangeError('\"value\" argument is out of bounds');if(t+f>e.length)throw new RangeError(\"Index out of range\")}Buffer.prototype.writeUIntLE=function writeUIntLE(e,r,t,f){e=+e;r=r>>>0;t=t>>>0;if(!f){var n=Math.pow(2,8*t)-1;checkInt(this,e,r,t,n,0)}var i=1;var o=0;this[r]=e&255;while(++o<t&&(i*=256)){this[r+o]=e/i&255}return r+t};Buffer.prototype.writeUIntBE=function writeUIntBE(e,r,t,f){e=+e;r=r>>>0;t=t>>>0;if(!f){var n=Math.pow(2,8*t)-1;checkInt(this,e,r,t,n,0)}var i=t-1;var o=1;this[r+i]=e&255;while(--i>=0&&(o*=256)){this[r+i]=e/o&255}return r+t};Buffer.prototype.writeUInt8=function writeUInt8(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,1,255,0);this[r]=e&255;return r+1};Buffer.prototype.writeUInt16LE=function writeUInt16LE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,2,65535,0);this[r]=e&255;this[r+1]=e>>>8;return r+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,2,65535,0);this[r]=e>>>8;this[r+1]=e&255;return r+2};Buffer.prototype.writeUInt32LE=function writeUInt32LE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,4,4294967295,0);this[r+3]=e>>>24;this[r+2]=e>>>16;this[r+1]=e>>>8;this[r]=e&255;return r+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,4,4294967295,0);this[r]=e>>>24;this[r+1]=e>>>16;this[r+2]=e>>>8;this[r+3]=e&255;return r+4};Buffer.prototype.writeIntLE=function writeIntLE(e,r,t,f){e=+e;r=r>>>0;if(!f){var n=Math.pow(2,8*t-1);checkInt(this,e,r,t,n-1,-n)}var i=0;var o=1;var u=0;this[r]=e&255;while(++i<t&&(o*=256)){if(e<0&&u===0&&this[r+i-1]!==0){u=1}this[r+i]=(e/o>>0)-u&255}return r+t};Buffer.prototype.writeIntBE=function writeIntBE(e,r,t,f){e=+e;r=r>>>0;if(!f){var n=Math.pow(2,8*t-1);checkInt(this,e,r,t,n-1,-n)}var i=t-1;var o=1;var u=0;this[r+i]=e&255;while(--i>=0&&(o*=256)){if(e<0&&u===0&&this[r+i+1]!==0){u=1}this[r+i]=(e/o>>0)-u&255}return r+t};Buffer.prototype.writeInt8=function writeInt8(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,1,127,-128);if(e<0)e=255+e+1;this[r]=e&255;return r+1};Buffer.prototype.writeInt16LE=function writeInt16LE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,2,32767,-32768);this[r]=e&255;this[r+1]=e>>>8;return r+2};Buffer.prototype.writeInt16BE=function writeInt16BE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,2,32767,-32768);this[r]=e>>>8;this[r+1]=e&255;return r+2};Buffer.prototype.writeInt32LE=function writeInt32LE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,4,2147483647,-2147483648);this[r]=e&255;this[r+1]=e>>>8;this[r+2]=e>>>16;this[r+3]=e>>>24;return r+4};Buffer.prototype.writeInt32BE=function writeInt32BE(e,r,t){e=+e;r=r>>>0;if(!t)checkInt(this,e,r,4,2147483647,-2147483648);if(e<0)e=4294967295+e+1;this[r]=e>>>24;this[r+1]=e>>>16;this[r+2]=e>>>8;this[r+3]=e&255;return r+4};function checkIEEE754(e,r,t,f,n,i){if(t+f>e.length)throw new RangeError(\"Index out of range\");if(t<0)throw new RangeError(\"Index out of range\")}function writeFloat(e,r,t,f,i){r=+r;t=t>>>0;if(!i){checkIEEE754(e,r,t,4,34028234663852886e22,-34028234663852886e22)}n.write(e,r,t,f,23,4);return t+4}Buffer.prototype.writeFloatLE=function writeFloatLE(e,r,t){return writeFloat(this,e,r,true,t)};Buffer.prototype.writeFloatBE=function writeFloatBE(e,r,t){return writeFloat(this,e,r,false,t)};function writeDouble(e,r,t,f,i){r=+r;t=t>>>0;if(!i){checkIEEE754(e,r,t,8,17976931348623157e292,-17976931348623157e292)}n.write(e,r,t,f,52,8);return t+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(e,r,t){return writeDouble(this,e,r,true,t)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(e,r,t){return writeDouble(this,e,r,false,t)};Buffer.prototype.copy=function copy(e,r,t,f){if(!Buffer.isBuffer(e))throw new TypeError(\"argument should be a Buffer\");if(!t)t=0;if(!f&&f!==0)f=this.length;if(r>=e.length)r=e.length;if(!r)r=0;if(f>0&&f<t)f=t;if(f===t)return 0;if(e.length===0||this.length===0)return 0;if(r<0){throw new RangeError(\"targetStart out of bounds\")}if(t<0||t>=this.length)throw new RangeError(\"Index out of range\");if(f<0)throw new RangeError(\"sourceEnd out of bounds\");if(f>this.length)f=this.length;if(e.length-r<f-t){f=e.length-r+t}var n=f-t;if(this===e&&typeof Uint8Array.prototype.copyWithin===\"function\"){this.copyWithin(r,t,f)}else if(this===e&&t<r&&r<f){for(var i=n-1;i>=0;--i){e[i+r]=this[i+t]}}else{Uint8Array.prototype.set.call(e,this.subarray(t,f),r)}return n};Buffer.prototype.fill=function fill(e,r,t,f){if(typeof e===\"string\"){if(typeof r===\"string\"){f=r;r=0;t=this.length}else if(typeof t===\"string\"){f=t;t=this.length}if(f!==undefined&&typeof f!==\"string\"){throw new TypeError(\"encoding must be a string\")}if(typeof f===\"string\"&&!Buffer.isEncoding(f)){throw new TypeError(\"Unknown encoding: \"+f)}if(e.length===1){var n=e.charCodeAt(0);if(f===\"utf8\"&&n<128||f===\"latin1\"){e=n}}}else if(typeof e===\"number\"){e=e&255}else if(typeof e===\"boolean\"){e=Number(e)}if(r<0||this.length<r||this.length<t){throw new RangeError(\"Out of range index\")}if(t<=r){return this}r=r>>>0;t=t===undefined?this.length:t>>>0;if(!e)e=0;var i;if(typeof e===\"number\"){for(i=r;i<t;++i){this[i]=e}}else{var o=Buffer.isBuffer(e)?e:Buffer.from(e,f);var u=o.length;if(u===0){throw new TypeError('The value \"'+e+'\" is invalid for argument \"value\"')}for(i=0;i<t-r;++i){this[i+r]=o[i%u]}}return this};var a=/[^+/0-9A-Za-z-_]/g;function base64clean(e){e=e.split(\"=\")[0];e=e.trim().replace(a,\"\");if(e.length<2)return\"\";while(e.length%4!==0){e=e+\"=\"}return e}function utf8ToBytes(e,r){r=r||Infinity;var t;var f=e.length;var n=null;var i=[];for(var o=0;o<f;++o){t=e.charCodeAt(o);if(t>55295&&t<57344){if(!n){if(t>56319){if((r-=3)>-1)i.push(239,191,189);continue}else if(o+1===f){if((r-=3)>-1)i.push(239,191,189);continue}n=t;continue}if(t<56320){if((r-=3)>-1)i.push(239,191,189);n=t;continue}t=(n-55296<<10|t-56320)+65536}else if(n){if((r-=3)>-1)i.push(239,191,189)}n=null;if(t<128){if((r-=1)<0)break;i.push(t)}else if(t<2048){if((r-=2)<0)break;i.push(t>>6|192,t&63|128)}else if(t<65536){if((r-=3)<0)break;i.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((r-=4)<0)break;i.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else{throw new Error(\"Invalid code point\")}}return i}function asciiToBytes(e){var r=[];for(var t=0;t<e.length;++t){r.push(e.charCodeAt(t)&255)}return r}function utf16leToBytes(e,r){var t,f,n;var i=[];for(var o=0;o<e.length;++o){if((r-=2)<0)break;t=e.charCodeAt(o);f=t>>8;n=t%256;i.push(n);i.push(f)}return i}function base64ToBytes(e){return f.toByteArray(base64clean(e))}function blitBuffer(e,r,t,f){for(var n=0;n<f;++n){if(n+t>=r.length||n>=e.length)break;r[n+t]=e[n]}return n}function isInstance(e,r){return e instanceof r||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===r.name}function numberIsNaN(e){return e!==e}var s=function(){var e=\"0123456789abcdef\";var r=new Array(256);for(var t=0;t<16;++t){var f=t*16;for(var n=0;n<16;++n){r[f+n]=e[t]+e[n]}}return r}()},783:function(e,r){\n/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nr.read=function(e,r,t,f,n){var i,o;var u=n*8-f-1;var a=(1<<u)-1;var s=a>>1;var h=-7;var c=t?n-1:0;var l=t?-1:1;var p=e[r+c];c+=l;i=p&(1<<-h)-1;p>>=-h;h+=u;for(;h>0;i=i*256+e[r+c],c+=l,h-=8){}o=i&(1<<-h)-1;i>>=-h;h+=f;for(;h>0;o=o*256+e[r+c],c+=l,h-=8){}if(i===0){i=1-s}else if(i===a){return o?NaN:(p?-1:1)*Infinity}else{o=o+Math.pow(2,f);i=i-s}return(p?-1:1)*o*Math.pow(2,i-f)};r.write=function(e,r,t,f,n,i){var o,u,a;var s=i*8-n-1;var h=(1<<s)-1;var c=h>>1;var l=n===23?Math.pow(2,-24)-Math.pow(2,-77):0;var p=f?0:i-1;var y=f?1:-1;var g=r<0||r===0&&1/r<0?1:0;r=Math.abs(r);if(isNaN(r)||r===Infinity){u=isNaN(r)?1:0;o=h}else{o=Math.floor(Math.log(r)/Math.LN2);if(r*(a=Math.pow(2,-o))<1){o--;a*=2}if(o+c>=1){r+=l/a}else{r+=l*Math.pow(2,1-c)}if(r*a>=2){o++;a/=2}if(o+c>=h){u=0;o=h}else if(o+c>=1){u=(r*a-1)*Math.pow(2,n);o=o+c}else{u=r*Math.pow(2,c-1)*Math.pow(2,n);o=0}}for(;n>=8;e[t+p]=u&255,p+=y,u/=256,n-=8){}o=o<<n|u;s+=n;for(;s>0;e[t+p]=o&255,p+=y,o/=256,s-=8){}e[t+p-y]|=g*128}}};var r={};function __nccwpck_require__(t){var f=r[t];if(f!==undefined){return f.exports}var n=r[t]={exports:{}};var i=true;try{e[t](n,n.exports,__nccwpck_require__);i=false}finally{if(i)delete r[t]}return n.exports}if(typeof __nccwpck_require__!==\"undefined\")__nccwpck_require__.ab=__dirname+\"/\";var t=__nccwpck_require__(72);module.exports=t})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvY29tcGlsZWQvYnVmZmVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7QUFBQSxZQUFZLE9BQU8sa0JBQWtCLGFBQWEsd0JBQXdCLDBCQUEwQiw4QkFBOEIsU0FBUyxTQUFTLHVEQUF1RCx5RUFBeUUsdUJBQXVCLElBQUksS0FBSyxVQUFVLHFCQUFxQix3QkFBd0Isd0JBQXdCLG9CQUFvQixlQUFlLFVBQVUsa0VBQWtFLHFCQUFxQixjQUFjLG9CQUFvQixZQUFZLHVCQUF1QixpQkFBaUIsV0FBVyxXQUFXLGtCQUFrQiw0QkFBNEIsa0JBQWtCLHdCQUF3QixNQUFNLGlCQUFpQixXQUFXLFdBQVcsZ0NBQWdDLFFBQVEsZ0JBQWdCLE1BQU0sUUFBUSxJQUFJLE1BQU0sK0ZBQStGLGlCQUFpQixnQkFBZ0IsYUFBYSxVQUFVLGdEQUFnRCxhQUFhLFVBQVUseUVBQXlFLGdCQUFnQixhQUFhLFNBQVMsNEJBQTRCLGtEQUFrRCw0QkFBNEIsTUFBTSxTQUFTLFlBQVksSUFBSSxNQUFNLHFEQUFxRCwyQkFBMkIsa0JBQWtCLDBCQUEwQixNQUFNLGVBQWUsVUFBVSxTQUFTLFlBQVksa0JBQWtCLElBQUksTUFBTSxxQ0FBcUMsVUFBVSxTQUFTLGdDQUFnQyxlQUFlLHFCQUFxQiwyQ0FBMkMsbUJBQW1CLG9CQUFvQjtBQUM5ckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixhQUFhLCtHQUErRyxnQkFBZ0Isd0JBQXdCLHVCQUF1QixpQkFBaUIsZUFBZSwrQ0FBK0MsaUdBQWlHLGtLQUFrSyw2QkFBNkIsSUFBSSx3QkFBd0IsT0FBTyxlQUFlLFlBQVksOENBQThDLDJCQUEyQixvQkFBb0IsU0FBUyxjQUFjLGlEQUFpRCwrQkFBK0IsMkNBQTJDLG9CQUFvQixFQUFFLGlEQUFpRCwrQkFBK0IsMkNBQTJDLHdCQUF3QixFQUFFLHlCQUF5QixRQUFRLHVFQUF1RSx3QkFBd0IsMENBQTBDLFNBQVMsdUJBQXVCLHdCQUF3Qix3QkFBd0IsMEZBQTBGLHNCQUFzQixtQkFBbUIscUJBQXFCLHFCQUFxQix3QkFBd0IsdUJBQXVCLDBCQUEwQix3QkFBd0IsWUFBWSxtSkFBbUosbUVBQW1FLDhCQUE4Qix5SEFBeUgsOEJBQThCLHdCQUF3Qiw2RkFBNkYsNkJBQTZCLG1CQUFtQiwwQkFBMEIsb0JBQW9CLGNBQWMscUdBQXFHLHdEQUF3RCxtSkFBbUosNEJBQTRCLG9CQUFvQiw2REFBNkQseUNBQXlDLHVCQUF1Qix3QkFBd0IsOERBQThELGFBQWEsd0VBQXdFLHNCQUFzQixjQUFjLFNBQVMsdUJBQXVCLGtCQUFrQiw2RUFBNkUsdUJBQXVCLDZCQUE2QixxQkFBcUIsd0JBQXdCLGNBQWMsd0NBQXdDLCtCQUErQix1QkFBdUIsbUNBQW1DLHVCQUF1Qix5QkFBeUIsZ0NBQWdDLFNBQVMsMEJBQTBCLDRDQUE0Qyx3QkFBd0Isc0JBQXNCLG1CQUFtQixVQUFVLGVBQWUsU0FBUywwQkFBMEIsdUNBQXVDLHNCQUFzQixZQUFZLElBQUksTUFBTSxjQUFjLFNBQVMsZ0NBQWdDLHdCQUF3Qiw2REFBNkQsMEJBQTBCLDZEQUE2RCxNQUFNLGlDQUFpQyxvQkFBb0IsdUJBQXVCLHNCQUFzQixLQUFLLHdCQUF3QiwwQ0FBMEMsU0FBUyx1QkFBdUIsdUJBQXVCLDBCQUEwQixzQkFBc0IsaUJBQWlCLFNBQVMsZ0JBQWdCLFNBQVMseUJBQXlCLHNEQUFzRCx1QkFBdUIsd0JBQXdCLDZDQUE2Qyw4QkFBOEIsb0JBQW9CLFNBQVMsMkdBQTJHLFdBQVcsdUJBQXVCLFVBQVUsSUFBSSx3QkFBd0IscUNBQXFDLDBEQUEwRCxxQ0FBcUMsbUVBQW1FLG1FQUFtRSw2Q0FBNkMsNkZBQTZGLGtCQUFrQixlQUFlLGVBQWUsNEJBQTRCLElBQUksS0FBSyxnQkFBZ0IsT0FBTyxPQUFPLE9BQU8sZ0JBQWdCLGdCQUFnQixVQUFVLHlDQUF5QyxnQ0FBZ0Msb0pBQW9KLHVCQUF1QixtQ0FBbUMsc0JBQXNCLG1FQUFtRSxpQkFBaUIsdUJBQXVCLE1BQU0sa0JBQWtCLElBQUksUUFBUSxXQUFXLEtBQUssZ0JBQWdCLDRCQUE0QixRQUFRLFFBQVEsV0FBVyxLQUFLLFdBQVcsNkJBQTZCLGlCQUFpQix3QkFBd0IsbUVBQW1FLFlBQVksWUFBWSxVQUFVLHlCQUF5Qix1QkFBdUIsZ0JBQWdCLHFEQUFxRCxvQkFBb0Isd0JBQXdCLDRIQUE0SCxlQUFlLDhDQUE4QyxzQkFBc0IsWUFBWSxNQUFNLEVBQUUsVUFBVSwrQ0FBK0Msb0RBQW9ELCtEQUErRCx1QkFBdUIsNENBQTRDLGNBQWMsa0NBQWtDLHVCQUF1QixTQUFTLDZCQUE2Qiw2QkFBNkIsWUFBWSx1QkFBdUIsSUFBSSxrQkFBa0IsU0FBUyxpQ0FBaUMsY0FBYyxTQUFTLFNBQVMsT0FBTyxPQUFPLFNBQVMsU0FBUyxlQUFlLFlBQVksVUFBVSxvQ0FBb0Msa0RBQWtELHdDQUF3Qyx1REFBdUQsMENBQTBDLGtGQUFrRix5REFBeUQsdUJBQXVCLFNBQVMsZ0NBQWdDLHFCQUFxQixXQUFXLFVBQVUsT0FBTywwQ0FBMEMsa0JBQWtCLFlBQVksa0VBQWtFLFlBQVksSUFBSSxNQUFNLGlCQUFpQixhQUFhLDBDQUEwQyxrQkFBa0IsWUFBWSxrRUFBa0UsWUFBWSxJQUFJLE1BQU0saUJBQWlCLG1CQUFtQixhQUFhLDBDQUEwQyxrQkFBa0IsWUFBWSxrRUFBa0UsWUFBWSxJQUFJLE1BQU0saUJBQWlCLG1CQUFtQixtQkFBbUIsbUJBQW1CLGFBQWEsOENBQThDLGtCQUFrQixrQkFBa0IsbURBQW1ELDJDQUEyQywwREFBMEQsMkNBQTJDLHdFQUF3RSx3QkFBd0IsbUNBQW1DLDRDQUE0QyxTQUFTLDBCQUEwQix1Q0FBdUMsRUFBRSxrQkFBa0IsNEJBQTRCLHdCQUF3QixNQUFNLDZDQUE2QyxxREFBcUQsNkJBQTZCLHVDQUF1Qyx3QkFBd0Isa0hBQWtILGtCQUFrQixJQUFJLGtCQUFrQixlQUFlLGtCQUFrQixJQUFJLGtCQUFrQixjQUFjLHdDQUF3QywyQ0FBMkMsZUFBZSxTQUFTLFNBQVMsU0FBUyxTQUFTLFNBQVMsT0FBTyxPQUFPLE9BQU8sT0FBTyxxQkFBcUIsVUFBVSxVQUFVLG9CQUFvQixzQkFBc0IsbUJBQW1CLFlBQVksSUFBSSxLQUFLLGdCQUFnQixPQUFPLE9BQU8sT0FBTyxnQkFBZ0IsZ0JBQWdCLFVBQVUseUNBQXlDLHlCQUF5Qix3QkFBd0IsSUFBSSxJQUFJLHNCQUFzQixhQUFhLHVCQUF1QixjQUFjLEtBQUssbUJBQW1CLGlCQUFpQixvQkFBb0IsZ0JBQWdCLGNBQWMsa0JBQWtCLGFBQWEsU0FBUyxjQUFjLHdCQUF3QixtQkFBbUIsdUJBQXVCLGlCQUFpQixTQUFTLCtCQUErQiw2QkFBNkIsUUFBUSxxREFBcUQsTUFBTSxnREFBZ0QsS0FBSyxxREFBcUQsaUNBQWlDLDREQUE0RCxpQ0FBaUMsUUFBUSxlQUFlLGVBQWUsa0JBQWtCLDBCQUEwQiwyREFBMkQsMkJBQTJCLFNBQVMsSUFBSSxLQUFLLEtBQUssTUFBTSxtQkFBbUIsVUFBVSxZQUFZLEtBQUssNEJBQTRCLE1BQU0sTUFBTSxTQUFTLFFBQVEsSUFBSSxLQUFLLHFDQUFxQyxjQUFjLHdCQUF3QixLQUFLLGlCQUFpQixPQUFPLEtBQUssZUFBZSxRQUFRLEtBQUssS0FBSyxXQUFXLFlBQVksSUFBSSxLQUFLLDRCQUE0QixRQUFRLE9BQU8sZUFBZSxTQUFTLG1EQUFtRCxpQ0FBaUMsaURBQWlELDhDQUE4Qyx5REFBeUQsK0NBQStDLDJCQUEyQixlQUFlLGlCQUFpQixPQUFPLElBQUksS0FBSyxZQUFZLFFBQVEsS0FBSyxlQUFlLFVBQVUsTUFBTSxZQUFZLElBQUksS0FBSyxtQ0FBbUMsMkJBQTJCLFNBQVMsU0FBUyw0QkFBNEIsbURBQW1ELDZCQUE2Qix5Q0FBeUMsOEJBQThCLDJCQUEyQiw4QkFBOEIsMENBQTBDLDRCQUE0QixzREFBc0QsK0NBQStDLGtCQUFrQixTQUFTLGNBQWMsSUFBSSw0Q0FBNEMsSUFBSSxjQUFjLElBQUkscUJBQXFCLFFBQVEsZ0JBQWdCLFFBQVEsMEJBQTBCLEtBQUssSUFBSSxhQUFhLEtBQUssMkZBQTJGLG9CQUFvQiwwQkFBMEIsMENBQTBDLCtEQUErRCxlQUFlLFlBQVksTUFBTSxFQUFFLFVBQVUsc0NBQXNDLG9EQUFvRCwwQ0FBMEMseURBQXlELDRDQUE0QyxpRkFBaUYseURBQXlELHVCQUF1QixVQUFVLDBDQUEwQyxPQUFPLG1FQUFtRSw0QkFBNEIsd0JBQXdCLDBCQUEwQixLQUFLLHNDQUFzQywwQkFBMEIsdUJBQXVCLFNBQVMsUUFBUSxXQUFXLFdBQVcsV0FBVyxnQ0FBZ0MsV0FBVyxZQUFZLFVBQVUsaUJBQWlCLElBQUksTUFBTSxnQkFBZ0Isa0JBQWtCLGlCQUFpQixVQUFVLEtBQUssTUFBTSxnQkFBZ0IsU0FBUyxpQ0FBaUMsNEJBQTRCLCtCQUErQixLQUFLLE1BQU0sZ0JBQWdCLFNBQVMsU0FBUyxnREFBZ0QsdUNBQXVDLHVCQUF1QixPQUFPLGFBQWEsUUFBUSxJQUFJLGlCQUFpQixTQUFTLDBCQUEwQixlQUFlLFVBQVUsS0FBSyxnQ0FBZ0MsV0FBVyxrQ0FBa0MsZUFBZSxTQUFTLDJDQUEyQyxTQUFTLFFBQVEsV0FBVyxxREFBcUQsU0FBUywyQkFBMkIsU0FBUyx1QkFBdUIsWUFBWSxJQUFJLEtBQUssaUNBQWlDLFNBQVMsNEJBQTRCLFNBQVMsdUJBQXVCLFlBQVksSUFBSSxLQUFLLDZCQUE2QixTQUFTLHlCQUF5QixlQUFlLGVBQWUsb0JBQW9CLFNBQVMsWUFBWSxJQUFJLEtBQUssV0FBVyxTQUFTLDZCQUE2QixtQkFBbUIsU0FBUyxZQUFZLFdBQVcsTUFBTSx3Q0FBd0MsU0FBUywyQ0FBMkMsa0JBQWtCLE1BQU0sc0JBQXNCLFFBQVEsS0FBSyxXQUFXLGFBQWEsSUFBSSxRQUFRLEtBQUssV0FBVyxhQUFhLElBQUksV0FBVyx5QkFBeUIsMENBQTBDLFVBQVUsNEJBQTRCLDJEQUEyRCx1RUFBdUUsdURBQXVELFFBQVEsUUFBUSxtQ0FBbUMsY0FBYyxRQUFRLFFBQVEsdUJBQXVCLGVBQWUsVUFBVSx1REFBdUQsUUFBUSxRQUFRLE9BQU8sNkJBQTZCLGtCQUFrQixRQUFRLHFCQUFxQixpQkFBaUIsVUFBVSxtREFBbUQsUUFBUSxtQ0FBbUMsZ0JBQWdCLHlEQUF5RCxRQUFRLG1DQUFtQyw2QkFBNkIseURBQXlELFFBQVEsbUNBQW1DLDZCQUE2Qix5REFBeUQsUUFBUSxtQ0FBbUMsK0RBQStELHlEQUF5RCxRQUFRLG1DQUFtQyxnRUFBZ0UscURBQXFELFFBQVEsUUFBUSxtQ0FBbUMsY0FBYyxRQUFRLFFBQVEsdUJBQXVCLGVBQWUsT0FBTywyQkFBMkIsVUFBVSxxREFBcUQsUUFBUSxRQUFRLG1DQUFtQyxRQUFRLFFBQVEsa0JBQWtCLHFCQUFxQixpQkFBaUIsT0FBTywyQkFBMkIsVUFBVSxpREFBaUQsUUFBUSxtQ0FBbUMsaUNBQWlDLDBCQUEwQix1REFBdUQsUUFBUSxtQ0FBbUMsMkJBQTJCLCtCQUErQix1REFBdUQsUUFBUSxtQ0FBbUMsMkJBQTJCLCtCQUErQix1REFBdUQsUUFBUSxtQ0FBbUMseURBQXlELHVEQUF1RCxRQUFRLG1DQUFtQyx5REFBeUQsdURBQXVELFFBQVEsbUNBQW1DLGlDQUFpQyx1REFBdUQsUUFBUSxtQ0FBbUMsa0NBQWtDLHlEQUF5RCxRQUFRLG1DQUFtQyxpQ0FBaUMseURBQXlELFFBQVEsbUNBQW1DLGtDQUFrQywrQkFBK0IsMEZBQTBGLHNFQUFzRSwyREFBMkQsMkRBQTJELEtBQUssUUFBUSxRQUFRLE9BQU8sd0JBQXdCLHlCQUF5QixRQUFRLFFBQVEsY0FBYyx1QkFBdUIsa0JBQWtCLFlBQVksMkRBQTJELEtBQUssUUFBUSxRQUFRLE9BQU8sd0JBQXdCLHlCQUF5QixVQUFVLFFBQVEsZ0JBQWdCLHdCQUF3QixrQkFBa0IsWUFBWSx1REFBdUQsS0FBSyxRQUFRLGlDQUFpQyxjQUFjLFlBQVksNkRBQTZELEtBQUssUUFBUSxtQ0FBbUMsY0FBYyxnQkFBZ0IsWUFBWSw2REFBNkQsS0FBSyxRQUFRLG1DQUFtQyxjQUFjLGdCQUFnQixZQUFZLDZEQUE2RCxLQUFLLFFBQVEsd0NBQXdDLGlCQUFpQixpQkFBaUIsZ0JBQWdCLGNBQWMsWUFBWSw2REFBNkQsS0FBSyxRQUFRLHdDQUF3QyxlQUFlLGlCQUFpQixnQkFBZ0IsZ0JBQWdCLFlBQVkseURBQXlELEtBQUssUUFBUSxPQUFPLHdCQUF3Qiw0QkFBNEIsUUFBUSxRQUFRLFFBQVEsY0FBYyx1QkFBdUIsZ0NBQWdDLElBQUkseUJBQXlCLFlBQVkseURBQXlELEtBQUssUUFBUSxPQUFPLHdCQUF3Qiw0QkFBNEIsVUFBVSxRQUFRLFFBQVEsZ0JBQWdCLHdCQUF3QixnQ0FBZ0MsSUFBSSx5QkFBeUIsWUFBWSxxREFBcUQsS0FBSyxRQUFRLG9DQUFvQyxpQkFBaUIsY0FBYyxZQUFZLDJEQUEyRCxLQUFLLFFBQVEsd0NBQXdDLGNBQWMsZ0JBQWdCLFlBQVksMkRBQTJELEtBQUssUUFBUSx3Q0FBd0MsY0FBYyxnQkFBZ0IsWUFBWSwyREFBMkQsS0FBSyxRQUFRLGtEQUFrRCxjQUFjLGdCQUFnQixpQkFBaUIsaUJBQWlCLFlBQVksMkRBQTJELEtBQUssUUFBUSxrREFBa0Qsd0JBQXdCLGVBQWUsaUJBQWlCLGdCQUFnQixnQkFBZ0IsWUFBWSxtQ0FBbUMsMkRBQTJELGtEQUFrRCwrQkFBK0IsS0FBSyxRQUFRLE9BQU8saUVBQWlFLHNCQUFzQixXQUFXLDJEQUEyRCxvQ0FBb0MsMkRBQTJELHFDQUFxQyxnQ0FBZ0MsS0FBSyxRQUFRLE9BQU8sbUVBQW1FLHNCQUFzQixXQUFXLDZEQUE2RCxxQ0FBcUMsNkRBQTZELHNDQUFzQyw2Q0FBNkMsMEVBQTBFLFVBQVUsMkJBQTJCLDBCQUEwQixVQUFVLGdCQUFnQixrQkFBa0IsMENBQTBDLFFBQVEsa0RBQWtELGtFQUFrRSx1REFBdUQsK0JBQStCLG1CQUFtQixlQUFlLFVBQVUsa0VBQWtFLHVCQUF1Qiw0QkFBNEIsY0FBYyxLQUFLLEtBQUssa0JBQWtCLEtBQUssc0RBQXNELFVBQVUsNkNBQTZDLHdCQUF3Qix3QkFBd0IsSUFBSSxJQUFJLGNBQWMsNkJBQTZCLElBQUksY0FBYyx1Q0FBdUMsaURBQWlELCtDQUErQyw0Q0FBNEMsaUJBQWlCLHNCQUFzQixvQ0FBb0MsTUFBTSw2QkFBNkIsUUFBUSw4QkFBOEIsWUFBWSxzQ0FBc0MsMkNBQTJDLFNBQVMsWUFBWSxRQUFRLGtDQUFrQyxVQUFVLE1BQU0sd0JBQXdCLFFBQVEsSUFBSSxLQUFLLFdBQVcsS0FBSyw0Q0FBNEMsZUFBZSxVQUFVLHlFQUF5RSxRQUFRLE1BQU0sS0FBSyxrQkFBa0IsYUFBYSwwQkFBMEIsd0JBQXdCLGtCQUFrQix5QkFBeUIsdUJBQXVCLHNCQUFzQixRQUFRLFNBQVMsMEJBQTBCLGNBQWMsTUFBTSxlQUFlLFdBQVcsU0FBUyxZQUFZLElBQUksS0FBSyxrQkFBa0IscUJBQXFCLE9BQU8sWUFBWSxpQ0FBaUMsU0FBUyxpQkFBaUIsaUNBQWlDLFNBQVMsSUFBSSxTQUFTLFlBQVksaUNBQWlDLElBQUksU0FBUyw4QkFBOEIsV0FBVyxpQ0FBaUMsT0FBTyxVQUFVLGtCQUFrQixVQUFVLGdCQUFnQixrQkFBa0IsMEJBQTBCLGlCQUFpQixrQkFBa0IsdUNBQXVDLG1CQUFtQixrQkFBa0Isb0RBQW9ELEtBQUssdUNBQXVDLFNBQVMseUJBQXlCLFNBQVMsWUFBWSxXQUFXLEtBQUssNEJBQTRCLFNBQVMsNkJBQTZCLFVBQVUsU0FBUyxZQUFZLFdBQVcsS0FBSyxrQkFBa0Isa0JBQWtCLE9BQU8sUUFBUSxVQUFVLFVBQVUsU0FBUywwQkFBMEIscUNBQXFDLDZCQUE2QixZQUFZLElBQUksS0FBSyxvQ0FBb0MsWUFBWSxTQUFTLHlCQUF5QiwyR0FBMkcsd0JBQXdCLGFBQWEsaUJBQWlCLHlCQUF5QixxQkFBcUIsWUFBWSxLQUFLLEtBQUssV0FBVyxZQUFZLEtBQUssS0FBSyxrQkFBa0IsU0FBUyxHQUFHO0FBQ3p4dkI7QUFDQSwyQkFBMkIsUUFBUSxjQUFjLGVBQWUsV0FBVyxTQUFTLGNBQWMsYUFBYSxhQUFhLEtBQUssY0FBYyxPQUFPLEtBQUssS0FBSyxJQUFJLDJCQUEyQixjQUFjLE9BQU8sS0FBSyxLQUFLLElBQUksMkJBQTJCLFVBQVUsTUFBTSxlQUFlLCtCQUErQixLQUFLLGtCQUFrQixNQUFNLGtDQUFrQyw4QkFBOEIsVUFBVSxjQUFjLGVBQWUsV0FBVywrQ0FBK0MsY0FBYyxhQUFhLDRCQUE0QixjQUFjLDJCQUEyQixlQUFlLElBQUksS0FBSyxtQ0FBbUMsMkJBQTJCLElBQUksS0FBSyxXQUFXLE9BQU8sS0FBSyxxQkFBcUIsV0FBVyxJQUFJLEtBQUssV0FBVyxJQUFJLElBQUksZ0JBQWdCLHdCQUF3QixNQUFNLEtBQUssa0NBQWtDLEtBQUssS0FBSyxLQUFLLGdDQUFnQyxTQUFTLEtBQUssS0FBSyxJQUFJLGdDQUFnQyxtQkFBbUIsU0FBUyxnQ0FBZ0MsV0FBVyxrQkFBa0IsaUJBQWlCLFlBQVksWUFBWSxXQUFXLElBQUksc0NBQXNDLFFBQVEsUUFBUSxpQkFBaUIsaUJBQWlCLG1FQUFtRSxTQUFTLEtBQUssOEJBQThCLGlCQUFpQiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NvbXBpbGVkL2J1ZmZlci9pbmRleC5qcz84ZjVjIl0sInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe3ZhciBlPXs2NzU6ZnVuY3Rpb24oZSxyKXtcInVzZSBzdHJpY3RcIjtyLmJ5dGVMZW5ndGg9Ynl0ZUxlbmd0aDtyLnRvQnl0ZUFycmF5PXRvQnl0ZUFycmF5O3IuZnJvbUJ5dGVBcnJheT1mcm9tQnl0ZUFycmF5O3ZhciB0PVtdO3ZhciBmPVtdO3ZhciBuPXR5cGVvZiBVaW50OEFycmF5IT09XCJ1bmRlZmluZWRcIj9VaW50OEFycmF5OkFycmF5O3ZhciBpPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiO2Zvcih2YXIgbz0wLHU9aS5sZW5ndGg7bzx1Oysrbyl7dFtvXT1pW29dO2ZbaS5jaGFyQ29kZUF0KG8pXT1vfWZbXCItXCIuY2hhckNvZGVBdCgwKV09NjI7ZltcIl9cIi5jaGFyQ29kZUF0KDApXT02MztmdW5jdGlvbiBnZXRMZW5zKGUpe3ZhciByPWUubGVuZ3RoO2lmKHIlND4wKXt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0XCIpfXZhciB0PWUuaW5kZXhPZihcIj1cIik7aWYodD09PS0xKXQ9cjt2YXIgZj10PT09cj8wOjQtdCU0O3JldHVyblt0LGZdfWZ1bmN0aW9uIGJ5dGVMZW5ndGgoZSl7dmFyIHI9Z2V0TGVucyhlKTt2YXIgdD1yWzBdO3ZhciBmPXJbMV07cmV0dXJuKHQrZikqMy80LWZ9ZnVuY3Rpb24gX2J5dGVMZW5ndGgoZSxyLHQpe3JldHVybihyK3QpKjMvNC10fWZ1bmN0aW9uIHRvQnl0ZUFycmF5KGUpe3ZhciByO3ZhciB0PWdldExlbnMoZSk7dmFyIGk9dFswXTt2YXIgbz10WzFdO3ZhciB1PW5ldyBuKF9ieXRlTGVuZ3RoKGUsaSxvKSk7dmFyIGE9MDt2YXIgcz1vPjA/aS00Omk7dmFyIGg7Zm9yKGg9MDtoPHM7aCs9NCl7cj1mW2UuY2hhckNvZGVBdChoKV08PDE4fGZbZS5jaGFyQ29kZUF0KGgrMSldPDwxMnxmW2UuY2hhckNvZGVBdChoKzIpXTw8NnxmW2UuY2hhckNvZGVBdChoKzMpXTt1W2ErK109cj4+MTYmMjU1O3VbYSsrXT1yPj44JjI1NTt1W2ErK109ciYyNTV9aWYobz09PTIpe3I9ZltlLmNoYXJDb2RlQXQoaCldPDwyfGZbZS5jaGFyQ29kZUF0KGgrMSldPj40O3VbYSsrXT1yJjI1NX1pZihvPT09MSl7cj1mW2UuY2hhckNvZGVBdChoKV08PDEwfGZbZS5jaGFyQ29kZUF0KGgrMSldPDw0fGZbZS5jaGFyQ29kZUF0KGgrMildPj4yO3VbYSsrXT1yPj44JjI1NTt1W2ErK109ciYyNTV9cmV0dXJuIHV9ZnVuY3Rpb24gdHJpcGxldFRvQmFzZTY0KGUpe3JldHVybiB0W2U+PjE4JjYzXSt0W2U+PjEyJjYzXSt0W2U+PjYmNjNdK3RbZSY2M119ZnVuY3Rpb24gZW5jb2RlQ2h1bmsoZSxyLHQpe3ZhciBmO3ZhciBuPVtdO2Zvcih2YXIgaT1yO2k8dDtpKz0zKXtmPShlW2ldPDwxNiYxNjcxMTY4MCkrKGVbaSsxXTw8OCY2NTI4MCkrKGVbaSsyXSYyNTUpO24ucHVzaCh0cmlwbGV0VG9CYXNlNjQoZikpfXJldHVybiBuLmpvaW4oXCJcIil9ZnVuY3Rpb24gZnJvbUJ5dGVBcnJheShlKXt2YXIgcjt2YXIgZj1lLmxlbmd0aDt2YXIgbj1mJTM7dmFyIGk9W107dmFyIG89MTYzODM7Zm9yKHZhciB1PTAsYT1mLW47dTxhO3UrPW8pe2kucHVzaChlbmNvZGVDaHVuayhlLHUsdStvPmE/YTp1K28pKX1pZihuPT09MSl7cj1lW2YtMV07aS5wdXNoKHRbcj4+Ml0rdFtyPDw0JjYzXStcIj09XCIpfWVsc2UgaWYobj09PTIpe3I9KGVbZi0yXTw8OCkrZVtmLTFdO2kucHVzaCh0W3I+PjEwXSt0W3I+PjQmNjNdK3Rbcjw8MiY2M10rXCI9XCIpfXJldHVybiBpLmpvaW4oXCJcIil9fSw3MjpmdW5jdGlvbihlLHIsdCl7XCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi92YXIgZj10KDY3NSk7dmFyIG49dCg3ODMpO3ZhciBpPXR5cGVvZiBTeW1ib2w9PT1cImZ1bmN0aW9uXCImJnR5cGVvZiBTeW1ib2wuZm9yPT09XCJmdW5jdGlvblwiP1N5bWJvbC5mb3IoXCJub2RlanMudXRpbC5pbnNwZWN0LmN1c3RvbVwiKTpudWxsO3IuQnVmZmVyPUJ1ZmZlcjtyLlNsb3dCdWZmZXI9U2xvd0J1ZmZlcjtyLklOU1BFQ1RfTUFYX0JZVEVTPTUwO3ZhciBvPTIxNDc0ODM2NDc7ci5rTWF4TGVuZ3RoPW87QnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQ9dHlwZWRBcnJheVN1cHBvcnQoKTtpZighQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQmJnR5cGVvZiBjb25zb2xlIT09XCJ1bmRlZmluZWRcIiYmdHlwZW9mIGNvbnNvbGUuZXJyb3I9PT1cImZ1bmN0aW9uXCIpe2NvbnNvbGUuZXJyb3IoXCJUaGlzIGJyb3dzZXIgbGFja3MgdHlwZWQgYXJyYXkgKFVpbnQ4QXJyYXkpIHN1cHBvcnQgd2hpY2ggaXMgcmVxdWlyZWQgYnkgXCIrXCJgYnVmZmVyYCB2NS54LiBVc2UgYGJ1ZmZlcmAgdjQueCBpZiB5b3UgcmVxdWlyZSBvbGQgYnJvd3NlciBzdXBwb3J0LlwiKX1mdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCgpe3RyeXt2YXIgZT1uZXcgVWludDhBcnJheSgxKTt2YXIgcj17Zm9vOmZ1bmN0aW9uKCl7cmV0dXJuIDQyfX07T2JqZWN0LnNldFByb3RvdHlwZU9mKHIsVWludDhBcnJheS5wcm90b3R5cGUpO09iamVjdC5zZXRQcm90b3R5cGVPZihlLHIpO3JldHVybiBlLmZvbygpPT09NDJ9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfX1PYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLnByb3RvdHlwZSxcInBhcmVudFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7aWYoIUJ1ZmZlci5pc0J1ZmZlcih0aGlzKSlyZXR1cm4gdW5kZWZpbmVkO3JldHVybiB0aGlzLmJ1ZmZlcn19KTtPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLnByb3RvdHlwZSxcIm9mZnNldFwiLHtlbnVtZXJhYmxlOnRydWUsZ2V0OmZ1bmN0aW9uKCl7aWYoIUJ1ZmZlci5pc0J1ZmZlcih0aGlzKSlyZXR1cm4gdW5kZWZpbmVkO3JldHVybiB0aGlzLmJ5dGVPZmZzZXR9fSk7ZnVuY3Rpb24gY3JlYXRlQnVmZmVyKGUpe2lmKGU+byl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBcIicrZSsnXCIgaXMgaW52YWxpZCBmb3Igb3B0aW9uIFwic2l6ZVwiJyl9dmFyIHI9bmV3IFVpbnQ4QXJyYXkoZSk7T2JqZWN0LnNldFByb3RvdHlwZU9mKHIsQnVmZmVyLnByb3RvdHlwZSk7cmV0dXJuIHJ9ZnVuY3Rpb24gQnVmZmVyKGUscix0KXtpZih0eXBlb2YgZT09PVwibnVtYmVyXCIpe2lmKHR5cGVvZiByPT09XCJzdHJpbmdcIil7dGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwic3RyaW5nXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIHN0cmluZy4gUmVjZWl2ZWQgdHlwZSBudW1iZXInKX1yZXR1cm4gYWxsb2NVbnNhZmUoZSl9cmV0dXJuIGZyb20oZSxyLHQpfUJ1ZmZlci5wb29sU2l6ZT04MTkyO2Z1bmN0aW9uIGZyb20oZSxyLHQpe2lmKHR5cGVvZiBlPT09XCJzdHJpbmdcIil7cmV0dXJuIGZyb21TdHJpbmcoZSxyKX1pZihBcnJheUJ1ZmZlci5pc1ZpZXcoZSkpe3JldHVybiBmcm9tQXJyYXlMaWtlKGUpfWlmKGU9PW51bGwpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCBcIitcIm9yIEFycmF5LWxpa2UgT2JqZWN0LiBSZWNlaXZlZCB0eXBlIFwiK3R5cGVvZiBlKX1pZihpc0luc3RhbmNlKGUsQXJyYXlCdWZmZXIpfHxlJiZpc0luc3RhbmNlKGUuYnVmZmVyLEFycmF5QnVmZmVyKSl7cmV0dXJuIGZyb21BcnJheUJ1ZmZlcihlLHIsdCl9aWYodHlwZW9mIFNoYXJlZEFycmF5QnVmZmVyIT09XCJ1bmRlZmluZWRcIiYmKGlzSW5zdGFuY2UoZSxTaGFyZWRBcnJheUJ1ZmZlcil8fGUmJmlzSW5zdGFuY2UoZS5idWZmZXIsU2hhcmVkQXJyYXlCdWZmZXIpKSl7cmV0dXJuIGZyb21BcnJheUJ1ZmZlcihlLHIsdCl9aWYodHlwZW9mIGU9PT1cIm51bWJlclwiKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJ2YWx1ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIG9mIHR5cGUgbnVtYmVyLiBSZWNlaXZlZCB0eXBlIG51bWJlcicpfXZhciBmPWUudmFsdWVPZiYmZS52YWx1ZU9mKCk7aWYoZiE9bnVsbCYmZiE9PWUpe3JldHVybiBCdWZmZXIuZnJvbShmLHIsdCl9dmFyIG49ZnJvbU9iamVjdChlKTtpZihuKXJldHVybiBuO2lmKHR5cGVvZiBTeW1ib2whPT1cInVuZGVmaW5lZFwiJiZTeW1ib2wudG9QcmltaXRpdmUhPW51bGwmJnR5cGVvZiBlW1N5bWJvbC50b1ByaW1pdGl2ZV09PT1cImZ1bmN0aW9uXCIpe3JldHVybiBCdWZmZXIuZnJvbShlW1N5bWJvbC50b1ByaW1pdGl2ZV0oXCJzdHJpbmdcIikscix0KX10aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIGZpcnN0IGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgXCIrXCJvciBBcnJheS1saWtlIE9iamVjdC4gUmVjZWl2ZWQgdHlwZSBcIit0eXBlb2YgZSl9QnVmZmVyLmZyb209ZnVuY3Rpb24oZSxyLHQpe3JldHVybiBmcm9tKGUscix0KX07T2JqZWN0LnNldFByb3RvdHlwZU9mKEJ1ZmZlci5wcm90b3R5cGUsVWludDhBcnJheS5wcm90b3R5cGUpO09iamVjdC5zZXRQcm90b3R5cGVPZihCdWZmZXIsVWludDhBcnJheSk7ZnVuY3Rpb24gYXNzZXJ0U2l6ZShlKXtpZih0eXBlb2YgZSE9PVwibnVtYmVyXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBudW1iZXInKX1lbHNlIGlmKGU8MCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBcIicrZSsnXCIgaXMgaW52YWxpZCBmb3Igb3B0aW9uIFwic2l6ZVwiJyl9fWZ1bmN0aW9uIGFsbG9jKGUscix0KXthc3NlcnRTaXplKGUpO2lmKGU8PTApe3JldHVybiBjcmVhdGVCdWZmZXIoZSl9aWYociE9PXVuZGVmaW5lZCl7cmV0dXJuIHR5cGVvZiB0PT09XCJzdHJpbmdcIj9jcmVhdGVCdWZmZXIoZSkuZmlsbChyLHQpOmNyZWF0ZUJ1ZmZlcihlKS5maWxsKHIpfXJldHVybiBjcmVhdGVCdWZmZXIoZSl9QnVmZmVyLmFsbG9jPWZ1bmN0aW9uKGUscix0KXtyZXR1cm4gYWxsb2MoZSxyLHQpfTtmdW5jdGlvbiBhbGxvY1Vuc2FmZShlKXthc3NlcnRTaXplKGUpO3JldHVybiBjcmVhdGVCdWZmZXIoZTwwPzA6Y2hlY2tlZChlKXwwKX1CdWZmZXIuYWxsb2NVbnNhZmU9ZnVuY3Rpb24oZSl7cmV0dXJuIGFsbG9jVW5zYWZlKGUpfTtCdWZmZXIuYWxsb2NVbnNhZmVTbG93PWZ1bmN0aW9uKGUpe3JldHVybiBhbGxvY1Vuc2FmZShlKX07ZnVuY3Rpb24gZnJvbVN0cmluZyhlLHIpe2lmKHR5cGVvZiByIT09XCJzdHJpbmdcInx8cj09PVwiXCIpe3I9XCJ1dGY4XCJ9aWYoIUJ1ZmZlci5pc0VuY29kaW5nKHIpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrcil9dmFyIHQ9Ynl0ZUxlbmd0aChlLHIpfDA7dmFyIGY9Y3JlYXRlQnVmZmVyKHQpO3ZhciBuPWYud3JpdGUoZSxyKTtpZihuIT09dCl7Zj1mLnNsaWNlKDAsbil9cmV0dXJuIGZ9ZnVuY3Rpb24gZnJvbUFycmF5TGlrZShlKXt2YXIgcj1lLmxlbmd0aDwwPzA6Y2hlY2tlZChlLmxlbmd0aCl8MDt2YXIgdD1jcmVhdGVCdWZmZXIocik7Zm9yKHZhciBmPTA7ZjxyO2YrPTEpe3RbZl09ZVtmXSYyNTV9cmV0dXJuIHR9ZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyKGUscix0KXtpZihyPDB8fGUuYnl0ZUxlbmd0aDxyKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJvZmZzZXRcIiBpcyBvdXRzaWRlIG9mIGJ1ZmZlciBib3VuZHMnKX1pZihlLmJ5dGVMZW5ndGg8cisodHx8MCkpe3Rocm93IG5ldyBSYW5nZUVycm9yKCdcImxlbmd0aFwiIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcycpfXZhciBmO2lmKHI9PT11bmRlZmluZWQmJnQ9PT11bmRlZmluZWQpe2Y9bmV3IFVpbnQ4QXJyYXkoZSl9ZWxzZSBpZih0PT09dW5kZWZpbmVkKXtmPW5ldyBVaW50OEFycmF5KGUscil9ZWxzZXtmPW5ldyBVaW50OEFycmF5KGUscix0KX1PYmplY3Quc2V0UHJvdG90eXBlT2YoZixCdWZmZXIucHJvdG90eXBlKTtyZXR1cm4gZn1mdW5jdGlvbiBmcm9tT2JqZWN0KGUpe2lmKEJ1ZmZlci5pc0J1ZmZlcihlKSl7dmFyIHI9Y2hlY2tlZChlLmxlbmd0aCl8MDt2YXIgdD1jcmVhdGVCdWZmZXIocik7aWYodC5sZW5ndGg9PT0wKXtyZXR1cm4gdH1lLmNvcHkodCwwLDAscik7cmV0dXJuIHR9aWYoZS5sZW5ndGghPT11bmRlZmluZWQpe2lmKHR5cGVvZiBlLmxlbmd0aCE9PVwibnVtYmVyXCJ8fG51bWJlcklzTmFOKGUubGVuZ3RoKSl7cmV0dXJuIGNyZWF0ZUJ1ZmZlcigwKX1yZXR1cm4gZnJvbUFycmF5TGlrZShlKX1pZihlLnR5cGU9PT1cIkJ1ZmZlclwiJiZBcnJheS5pc0FycmF5KGUuZGF0YSkpe3JldHVybiBmcm9tQXJyYXlMaWtlKGUuZGF0YSl9fWZ1bmN0aW9uIGNoZWNrZWQoZSl7aWYoZT49byl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJBdHRlbXB0IHRvIGFsbG9jYXRlIEJ1ZmZlciBsYXJnZXIgdGhhbiBtYXhpbXVtIFwiK1wic2l6ZTogMHhcIitvLnRvU3RyaW5nKDE2KStcIiBieXRlc1wiKX1yZXR1cm4gZXwwfWZ1bmN0aW9uIFNsb3dCdWZmZXIoZSl7aWYoK2UhPWUpe2U9MH1yZXR1cm4gQnVmZmVyLmFsbG9jKCtlKX1CdWZmZXIuaXNCdWZmZXI9ZnVuY3Rpb24gaXNCdWZmZXIoZSl7cmV0dXJuIGUhPW51bGwmJmUuX2lzQnVmZmVyPT09dHJ1ZSYmZSE9PUJ1ZmZlci5wcm90b3R5cGV9O0J1ZmZlci5jb21wYXJlPWZ1bmN0aW9uIGNvbXBhcmUoZSxyKXtpZihpc0luc3RhbmNlKGUsVWludDhBcnJheSkpZT1CdWZmZXIuZnJvbShlLGUub2Zmc2V0LGUuYnl0ZUxlbmd0aCk7aWYoaXNJbnN0YW5jZShyLFVpbnQ4QXJyYXkpKXI9QnVmZmVyLmZyb20ocixyLm9mZnNldCxyLmJ5dGVMZW5ndGgpO2lmKCFCdWZmZXIuaXNCdWZmZXIoZSl8fCFCdWZmZXIuaXNCdWZmZXIocikpe3Rocm93IG5ldyBUeXBlRXJyb3IoJ1RoZSBcImJ1ZjFcIiwgXCJidWYyXCIgYXJndW1lbnRzIG11c3QgYmUgb25lIG9mIHR5cGUgQnVmZmVyIG9yIFVpbnQ4QXJyYXknKX1pZihlPT09cilyZXR1cm4gMDt2YXIgdD1lLmxlbmd0aDt2YXIgZj1yLmxlbmd0aDtmb3IodmFyIG49MCxpPU1hdGgubWluKHQsZik7bjxpOysrbil7aWYoZVtuXSE9PXJbbl0pe3Q9ZVtuXTtmPXJbbl07YnJlYWt9fWlmKHQ8ZilyZXR1cm4tMTtpZihmPHQpcmV0dXJuIDE7cmV0dXJuIDB9O0J1ZmZlci5pc0VuY29kaW5nPWZ1bmN0aW9uIGlzRW5jb2RpbmcoZSl7c3dpdGNoKFN0cmluZyhlKS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJoZXhcIjpjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpjYXNlXCJhc2NpaVwiOmNhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOmNhc2VcImJhc2U2NFwiOmNhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiB0cnVlO2RlZmF1bHQ6cmV0dXJuIGZhbHNlfX07QnVmZmVyLmNvbmNhdD1mdW5jdGlvbiBjb25jYXQoZSxyKXtpZighQXJyYXkuaXNBcnJheShlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyl9aWYoZS5sZW5ndGg9PT0wKXtyZXR1cm4gQnVmZmVyLmFsbG9jKDApfXZhciB0O2lmKHI9PT11bmRlZmluZWQpe3I9MDtmb3IodD0wO3Q8ZS5sZW5ndGg7Kyt0KXtyKz1lW3RdLmxlbmd0aH19dmFyIGY9QnVmZmVyLmFsbG9jVW5zYWZlKHIpO3ZhciBuPTA7Zm9yKHQ9MDt0PGUubGVuZ3RoOysrdCl7dmFyIGk9ZVt0XTtpZihpc0luc3RhbmNlKGksVWludDhBcnJheSkpe2k9QnVmZmVyLmZyb20oaSl9aWYoIUJ1ZmZlci5pc0J1ZmZlcihpKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJyl9aS5jb3B5KGYsbik7bis9aS5sZW5ndGh9cmV0dXJuIGZ9O2Z1bmN0aW9uIGJ5dGVMZW5ndGgoZSxyKXtpZihCdWZmZXIuaXNCdWZmZXIoZSkpe3JldHVybiBlLmxlbmd0aH1pZihBcnJheUJ1ZmZlci5pc1ZpZXcoZSl8fGlzSW5zdGFuY2UoZSxBcnJheUJ1ZmZlcikpe3JldHVybiBlLmJ5dGVMZW5ndGh9aWYodHlwZW9mIGUhPT1cInN0cmluZ1wiKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJzdHJpbmdcIiBhcmd1bWVudCBtdXN0IGJlIG9uZSBvZiB0eXBlIHN0cmluZywgQnVmZmVyLCBvciBBcnJheUJ1ZmZlci4gJytcIlJlY2VpdmVkIHR5cGUgXCIrdHlwZW9mIGUpfXZhciB0PWUubGVuZ3RoO3ZhciBmPWFyZ3VtZW50cy5sZW5ndGg+MiYmYXJndW1lbnRzWzJdPT09dHJ1ZTtpZighZiYmdD09PTApcmV0dXJuIDA7dmFyIG49ZmFsc2U7Zm9yKDs7KXtzd2l0Y2gocil7Y2FzZVwiYXNjaWlcIjpjYXNlXCJsYXRpbjFcIjpjYXNlXCJiaW5hcnlcIjpyZXR1cm4gdDtjYXNlXCJ1dGY4XCI6Y2FzZVwidXRmLThcIjpyZXR1cm4gdXRmOFRvQnl0ZXMoZSkubGVuZ3RoO2Nhc2VcInVjczJcIjpjYXNlXCJ1Y3MtMlwiOmNhc2VcInV0ZjE2bGVcIjpjYXNlXCJ1dGYtMTZsZVwiOnJldHVybiB0KjI7Y2FzZVwiaGV4XCI6cmV0dXJuIHQ+Pj4xO2Nhc2VcImJhc2U2NFwiOnJldHVybiBiYXNlNjRUb0J5dGVzKGUpLmxlbmd0aDtkZWZhdWx0OmlmKG4pe3JldHVybiBmPy0xOnV0ZjhUb0J5dGVzKGUpLmxlbmd0aH1yPShcIlwiK3IpLnRvTG93ZXJDYXNlKCk7bj10cnVlfX19QnVmZmVyLmJ5dGVMZW5ndGg9Ynl0ZUxlbmd0aDtmdW5jdGlvbiBzbG93VG9TdHJpbmcoZSxyLHQpe3ZhciBmPWZhbHNlO2lmKHI9PT11bmRlZmluZWR8fHI8MCl7cj0wfWlmKHI+dGhpcy5sZW5ndGgpe3JldHVyblwiXCJ9aWYodD09PXVuZGVmaW5lZHx8dD50aGlzLmxlbmd0aCl7dD10aGlzLmxlbmd0aH1pZih0PD0wKXtyZXR1cm5cIlwifXQ+Pj49MDtyPj4+PTA7aWYodDw9cil7cmV0dXJuXCJcIn1pZighZSllPVwidXRmOFwiO3doaWxlKHRydWUpe3N3aXRjaChlKXtjYXNlXCJoZXhcIjpyZXR1cm4gaGV4U2xpY2UodGhpcyxyLHQpO2Nhc2VcInV0ZjhcIjpjYXNlXCJ1dGYtOFwiOnJldHVybiB1dGY4U2xpY2UodGhpcyxyLHQpO2Nhc2VcImFzY2lpXCI6cmV0dXJuIGFzY2lpU2xpY2UodGhpcyxyLHQpO2Nhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOnJldHVybiBsYXRpbjFTbGljZSh0aGlzLHIsdCk7Y2FzZVwiYmFzZTY0XCI6cmV0dXJuIGJhc2U2NFNsaWNlKHRoaXMscix0KTtjYXNlXCJ1Y3MyXCI6Y2FzZVwidWNzLTJcIjpjYXNlXCJ1dGYxNmxlXCI6Y2FzZVwidXRmLTE2bGVcIjpyZXR1cm4gdXRmMTZsZVNsaWNlKHRoaXMscix0KTtkZWZhdWx0OmlmKGYpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK2UpO2U9KGUrXCJcIikudG9Mb3dlckNhc2UoKTtmPXRydWV9fX1CdWZmZXIucHJvdG90eXBlLl9pc0J1ZmZlcj10cnVlO2Z1bmN0aW9uIHN3YXAoZSxyLHQpe3ZhciBmPWVbcl07ZVtyXT1lW3RdO2VbdF09Zn1CdWZmZXIucHJvdG90eXBlLnN3YXAxNj1mdW5jdGlvbiBzd2FwMTYoKXt2YXIgZT10aGlzLmxlbmd0aDtpZihlJTIhPT0wKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzXCIpfWZvcih2YXIgcj0wO3I8ZTtyKz0yKXtzd2FwKHRoaXMscixyKzEpfXJldHVybiB0aGlzfTtCdWZmZXIucHJvdG90eXBlLnN3YXAzMj1mdW5jdGlvbiBzd2FwMzIoKXt2YXIgZT10aGlzLmxlbmd0aDtpZihlJTQhPT0wKXt0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzXCIpfWZvcih2YXIgcj0wO3I8ZTtyKz00KXtzd2FwKHRoaXMscixyKzMpO3N3YXAodGhpcyxyKzEscisyKX1yZXR1cm4gdGhpc307QnVmZmVyLnByb3RvdHlwZS5zd2FwNjQ9ZnVuY3Rpb24gc3dhcDY0KCl7dmFyIGU9dGhpcy5sZW5ndGg7aWYoZSU4IT09MCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0c1wiKX1mb3IodmFyIHI9MDtyPGU7cis9OCl7c3dhcCh0aGlzLHIscis3KTtzd2FwKHRoaXMscisxLHIrNik7c3dhcCh0aGlzLHIrMixyKzUpO3N3YXAodGhpcyxyKzMscis0KX1yZXR1cm4gdGhpc307QnVmZmVyLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbiB0b1N0cmluZygpe3ZhciBlPXRoaXMubGVuZ3RoO2lmKGU9PT0wKXJldHVyblwiXCI7aWYoYXJndW1lbnRzLmxlbmd0aD09PTApcmV0dXJuIHV0ZjhTbGljZSh0aGlzLDAsZSk7cmV0dXJuIHNsb3dUb1N0cmluZy5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O0J1ZmZlci5wcm90b3R5cGUudG9Mb2NhbGVTdHJpbmc9QnVmZmVyLnByb3RvdHlwZS50b1N0cmluZztCdWZmZXIucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbiBlcXVhbHMoZSl7aWYoIUJ1ZmZlci5pc0J1ZmZlcihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQXJndW1lbnQgbXVzdCBiZSBhIEJ1ZmZlclwiKTtpZih0aGlzPT09ZSlyZXR1cm4gdHJ1ZTtyZXR1cm4gQnVmZmVyLmNvbXBhcmUodGhpcyxlKT09PTB9O0J1ZmZlci5wcm90b3R5cGUuaW5zcGVjdD1mdW5jdGlvbiBpbnNwZWN0KCl7dmFyIGU9XCJcIjt2YXIgdD1yLklOU1BFQ1RfTUFYX0JZVEVTO2U9dGhpcy50b1N0cmluZyhcImhleFwiLDAsdCkucmVwbGFjZSgvKC57Mn0pL2csXCIkMSBcIikudHJpbSgpO2lmKHRoaXMubGVuZ3RoPnQpZSs9XCIgLi4uIFwiO3JldHVyblwiPEJ1ZmZlciBcIitlK1wiPlwifTtpZihpKXtCdWZmZXIucHJvdG90eXBlW2ldPUJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdH1CdWZmZXIucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24gY29tcGFyZShlLHIsdCxmLG4pe2lmKGlzSW5zdGFuY2UoZSxVaW50OEFycmF5KSl7ZT1CdWZmZXIuZnJvbShlLGUub2Zmc2V0LGUuYnl0ZUxlbmd0aCl9aWYoIUJ1ZmZlci5pc0J1ZmZlcihlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwidGFyZ2V0XCIgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBCdWZmZXIgb3IgVWludDhBcnJheS4gJytcIlJlY2VpdmVkIHR5cGUgXCIrdHlwZW9mIGUpfWlmKHI9PT11bmRlZmluZWQpe3I9MH1pZih0PT09dW5kZWZpbmVkKXt0PWU/ZS5sZW5ndGg6MH1pZihmPT09dW5kZWZpbmVkKXtmPTB9aWYobj09PXVuZGVmaW5lZCl7bj10aGlzLmxlbmd0aH1pZihyPDB8fHQ+ZS5sZW5ndGh8fGY8MHx8bj50aGlzLmxlbmd0aCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJvdXQgb2YgcmFuZ2UgaW5kZXhcIil9aWYoZj49biYmcj49dCl7cmV0dXJuIDB9aWYoZj49bil7cmV0dXJuLTF9aWYocj49dCl7cmV0dXJuIDF9cj4+Pj0wO3Q+Pj49MDtmPj4+PTA7bj4+Pj0wO2lmKHRoaXM9PT1lKXJldHVybiAwO3ZhciBpPW4tZjt2YXIgbz10LXI7dmFyIHU9TWF0aC5taW4oaSxvKTt2YXIgYT10aGlzLnNsaWNlKGYsbik7dmFyIHM9ZS5zbGljZShyLHQpO2Zvcih2YXIgaD0wO2g8dTsrK2gpe2lmKGFbaF0hPT1zW2hdKXtpPWFbaF07bz1zW2hdO2JyZWFrfX1pZihpPG8pcmV0dXJuLTE7aWYobzxpKXJldHVybiAxO3JldHVybiAwfTtmdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZihlLHIsdCxmLG4pe2lmKGUubGVuZ3RoPT09MClyZXR1cm4tMTtpZih0eXBlb2YgdD09PVwic3RyaW5nXCIpe2Y9dDt0PTB9ZWxzZSBpZih0PjIxNDc0ODM2NDcpe3Q9MjE0NzQ4MzY0N31lbHNlIGlmKHQ8LTIxNDc0ODM2NDgpe3Q9LTIxNDc0ODM2NDh9dD0rdDtpZihudW1iZXJJc05hTih0KSl7dD1uPzA6ZS5sZW5ndGgtMX1pZih0PDApdD1lLmxlbmd0aCt0O2lmKHQ+PWUubGVuZ3RoKXtpZihuKXJldHVybi0xO2Vsc2UgdD1lLmxlbmd0aC0xfWVsc2UgaWYodDwwKXtpZihuKXQ9MDtlbHNlIHJldHVybi0xfWlmKHR5cGVvZiByPT09XCJzdHJpbmdcIil7cj1CdWZmZXIuZnJvbShyLGYpfWlmKEJ1ZmZlci5pc0J1ZmZlcihyKSl7aWYoci5sZW5ndGg9PT0wKXtyZXR1cm4tMX1yZXR1cm4gYXJyYXlJbmRleE9mKGUscix0LGYsbil9ZWxzZSBpZih0eXBlb2Ygcj09PVwibnVtYmVyXCIpe3I9ciYyNTU7aWYodHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2Y9PT1cImZ1bmN0aW9uXCIpe2lmKG4pe3JldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoZSxyLHQpfWVsc2V7cmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmxhc3RJbmRleE9mLmNhbGwoZSxyLHQpfX1yZXR1cm4gYXJyYXlJbmRleE9mKGUsW3JdLHQsZixuKX10aHJvdyBuZXcgVHlwZUVycm9yKFwidmFsIG11c3QgYmUgc3RyaW5nLCBudW1iZXIgb3IgQnVmZmVyXCIpfWZ1bmN0aW9uIGFycmF5SW5kZXhPZihlLHIsdCxmLG4pe3ZhciBpPTE7dmFyIG89ZS5sZW5ndGg7dmFyIHU9ci5sZW5ndGg7aWYoZiE9PXVuZGVmaW5lZCl7Zj1TdHJpbmcoZikudG9Mb3dlckNhc2UoKTtpZihmPT09XCJ1Y3MyXCJ8fGY9PT1cInVjcy0yXCJ8fGY9PT1cInV0ZjE2bGVcInx8Zj09PVwidXRmLTE2bGVcIil7aWYoZS5sZW5ndGg8Mnx8ci5sZW5ndGg8Mil7cmV0dXJuLTF9aT0yO28vPTI7dS89Mjt0Lz0yfX1mdW5jdGlvbiByZWFkKGUscil7aWYoaT09PTEpe3JldHVybiBlW3JdfWVsc2V7cmV0dXJuIGUucmVhZFVJbnQxNkJFKHIqaSl9fXZhciBhO2lmKG4pe3ZhciBzPS0xO2ZvcihhPXQ7YTxvO2ErKyl7aWYocmVhZChlLGEpPT09cmVhZChyLHM9PT0tMT8wOmEtcykpe2lmKHM9PT0tMSlzPWE7aWYoYS1zKzE9PT11KXJldHVybiBzKml9ZWxzZXtpZihzIT09LTEpYS09YS1zO3M9LTF9fX1lbHNle2lmKHQrdT5vKXQ9by11O2ZvcihhPXQ7YT49MDthLS0pe3ZhciBoPXRydWU7Zm9yKHZhciBjPTA7Yzx1O2MrKyl7aWYocmVhZChlLGErYykhPT1yZWFkKHIsYykpe2g9ZmFsc2U7YnJlYWt9fWlmKGgpcmV0dXJuIGF9fXJldHVybi0xfUJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXM9ZnVuY3Rpb24gaW5jbHVkZXMoZSxyLHQpe3JldHVybiB0aGlzLmluZGV4T2YoZSxyLHQpIT09LTF9O0J1ZmZlci5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbiBpbmRleE9mKGUscix0KXtyZXR1cm4gYmlkaXJlY3Rpb25hbEluZGV4T2YodGhpcyxlLHIsdCx0cnVlKX07QnVmZmVyLnByb3RvdHlwZS5sYXN0SW5kZXhPZj1mdW5jdGlvbiBsYXN0SW5kZXhPZihlLHIsdCl7cmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsZSxyLHQsZmFsc2UpfTtmdW5jdGlvbiBoZXhXcml0ZShlLHIsdCxmKXt0PU51bWJlcih0KXx8MDt2YXIgbj1lLmxlbmd0aC10O2lmKCFmKXtmPW59ZWxzZXtmPU51bWJlcihmKTtpZihmPm4pe2Y9bn19dmFyIGk9ci5sZW5ndGg7aWYoZj5pLzIpe2Y9aS8yfWZvcih2YXIgbz0wO288ZjsrK28pe3ZhciB1PXBhcnNlSW50KHIuc3Vic3RyKG8qMiwyKSwxNik7aWYobnVtYmVySXNOYU4odSkpcmV0dXJuIG87ZVt0K29dPXV9cmV0dXJuIG99ZnVuY3Rpb24gdXRmOFdyaXRlKGUscix0LGYpe3JldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHIsZS5sZW5ndGgtdCksZSx0LGYpfWZ1bmN0aW9uIGFzY2lpV3JpdGUoZSxyLHQsZil7cmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHIpLGUsdCxmKX1mdW5jdGlvbiBsYXRpbjFXcml0ZShlLHIsdCxmKXtyZXR1cm4gYXNjaWlXcml0ZShlLHIsdCxmKX1mdW5jdGlvbiBiYXNlNjRXcml0ZShlLHIsdCxmKXtyZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHIpLGUsdCxmKX1mdW5jdGlvbiB1Y3MyV3JpdGUoZSxyLHQsZil7cmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMocixlLmxlbmd0aC10KSxlLHQsZil9QnVmZmVyLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbiB3cml0ZShlLHIsdCxmKXtpZihyPT09dW5kZWZpbmVkKXtmPVwidXRmOFwiO3Q9dGhpcy5sZW5ndGg7cj0wfWVsc2UgaWYodD09PXVuZGVmaW5lZCYmdHlwZW9mIHI9PT1cInN0cmluZ1wiKXtmPXI7dD10aGlzLmxlbmd0aDtyPTB9ZWxzZSBpZihpc0Zpbml0ZShyKSl7cj1yPj4+MDtpZihpc0Zpbml0ZSh0KSl7dD10Pj4+MDtpZihmPT09dW5kZWZpbmVkKWY9XCJ1dGY4XCJ9ZWxzZXtmPXQ7dD11bmRlZmluZWR9fWVsc2V7dGhyb3cgbmV3IEVycm9yKFwiQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWRcIil9dmFyIG49dGhpcy5sZW5ndGgtcjtpZih0PT09dW5kZWZpbmVkfHx0Pm4pdD1uO2lmKGUubGVuZ3RoPjAmJih0PDB8fHI8MCl8fHI+dGhpcy5sZW5ndGgpe3Rocm93IG5ldyBSYW5nZUVycm9yKFwiQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHNcIil9aWYoIWYpZj1cInV0ZjhcIjt2YXIgaT1mYWxzZTtmb3IoOzspe3N3aXRjaChmKXtjYXNlXCJoZXhcIjpyZXR1cm4gaGV4V3JpdGUodGhpcyxlLHIsdCk7Y2FzZVwidXRmOFwiOmNhc2VcInV0Zi04XCI6cmV0dXJuIHV0ZjhXcml0ZSh0aGlzLGUscix0KTtjYXNlXCJhc2NpaVwiOnJldHVybiBhc2NpaVdyaXRlKHRoaXMsZSxyLHQpO2Nhc2VcImxhdGluMVwiOmNhc2VcImJpbmFyeVwiOnJldHVybiBsYXRpbjFXcml0ZSh0aGlzLGUscix0KTtjYXNlXCJiYXNlNjRcIjpyZXR1cm4gYmFzZTY0V3JpdGUodGhpcyxlLHIsdCk7Y2FzZVwidWNzMlwiOmNhc2VcInVjcy0yXCI6Y2FzZVwidXRmMTZsZVwiOmNhc2VcInV0Zi0xNmxlXCI6cmV0dXJuIHVjczJXcml0ZSh0aGlzLGUscix0KTtkZWZhdWx0OmlmKGkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVua25vd24gZW5jb2Rpbmc6IFwiK2YpO2Y9KFwiXCIrZikudG9Mb3dlckNhc2UoKTtpPXRydWV9fX07QnVmZmVyLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24gdG9KU09OKCl7cmV0dXJue3R5cGU6XCJCdWZmZXJcIixkYXRhOkFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX2Fycnx8dGhpcywwKX19O2Z1bmN0aW9uIGJhc2U2NFNsaWNlKGUscix0KXtpZihyPT09MCYmdD09PWUubGVuZ3RoKXtyZXR1cm4gZi5mcm9tQnl0ZUFycmF5KGUpfWVsc2V7cmV0dXJuIGYuZnJvbUJ5dGVBcnJheShlLnNsaWNlKHIsdCkpfX1mdW5jdGlvbiB1dGY4U2xpY2UoZSxyLHQpe3Q9TWF0aC5taW4oZS5sZW5ndGgsdCk7dmFyIGY9W107dmFyIG49cjt3aGlsZShuPHQpe3ZhciBpPWVbbl07dmFyIG89bnVsbDt2YXIgdT1pPjIzOT80Omk+MjIzPzM6aT4xOTE/MjoxO2lmKG4rdTw9dCl7dmFyIGEscyxoLGM7c3dpdGNoKHUpe2Nhc2UgMTppZihpPDEyOCl7bz1pfWJyZWFrO2Nhc2UgMjphPWVbbisxXTtpZigoYSYxOTIpPT09MTI4KXtjPShpJjMxKTw8NnxhJjYzO2lmKGM+MTI3KXtvPWN9fWJyZWFrO2Nhc2UgMzphPWVbbisxXTtzPWVbbisyXTtpZigoYSYxOTIpPT09MTI4JiYocyYxOTIpPT09MTI4KXtjPShpJjE1KTw8MTJ8KGEmNjMpPDw2fHMmNjM7aWYoYz4yMDQ3JiYoYzw1NTI5Nnx8Yz41NzM0Mykpe289Y319YnJlYWs7Y2FzZSA0OmE9ZVtuKzFdO3M9ZVtuKzJdO2g9ZVtuKzNdO2lmKChhJjE5Mik9PT0xMjgmJihzJjE5Mik9PT0xMjgmJihoJjE5Mik9PT0xMjgpe2M9KGkmMTUpPDwxOHwoYSY2Myk8PDEyfChzJjYzKTw8NnxoJjYzO2lmKGM+NjU1MzUmJmM8MTExNDExMil7bz1jfX19fWlmKG89PT1udWxsKXtvPTY1NTMzO3U9MX1lbHNlIGlmKG8+NjU1MzUpe28tPTY1NTM2O2YucHVzaChvPj4+MTAmMTAyM3w1NTI5Nik7bz01NjMyMHxvJjEwMjN9Zi5wdXNoKG8pO24rPXV9cmV0dXJuIGRlY29kZUNvZGVQb2ludHNBcnJheShmKX12YXIgdT00MDk2O2Z1bmN0aW9uIGRlY29kZUNvZGVQb2ludHNBcnJheShlKXt2YXIgcj1lLmxlbmd0aDtpZihyPD11KXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsZSl9dmFyIHQ9XCJcIjt2YXIgZj0wO3doaWxlKGY8cil7dCs9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsZS5zbGljZShmLGYrPXUpKX1yZXR1cm4gdH1mdW5jdGlvbiBhc2NpaVNsaWNlKGUscix0KXt2YXIgZj1cIlwiO3Q9TWF0aC5taW4oZS5sZW5ndGgsdCk7Zm9yKHZhciBuPXI7bjx0Oysrbil7Zis9U3RyaW5nLmZyb21DaGFyQ29kZShlW25dJjEyNyl9cmV0dXJuIGZ9ZnVuY3Rpb24gbGF0aW4xU2xpY2UoZSxyLHQpe3ZhciBmPVwiXCI7dD1NYXRoLm1pbihlLmxlbmd0aCx0KTtmb3IodmFyIG49cjtuPHQ7KytuKXtmKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGVbbl0pfXJldHVybiBmfWZ1bmN0aW9uIGhleFNsaWNlKGUscix0KXt2YXIgZj1lLmxlbmd0aDtpZighcnx8cjwwKXI9MDtpZighdHx8dDwwfHx0PmYpdD1mO3ZhciBuPVwiXCI7Zm9yKHZhciBpPXI7aTx0OysraSl7bis9c1tlW2ldXX1yZXR1cm4gbn1mdW5jdGlvbiB1dGYxNmxlU2xpY2UoZSxyLHQpe3ZhciBmPWUuc2xpY2Uocix0KTt2YXIgbj1cIlwiO2Zvcih2YXIgaT0wO2k8Zi5sZW5ndGg7aSs9Mil7bis9U3RyaW5nLmZyb21DaGFyQ29kZShmW2ldK2ZbaSsxXSoyNTYpfXJldHVybiBufUJ1ZmZlci5wcm90b3R5cGUuc2xpY2U9ZnVuY3Rpb24gc2xpY2UoZSxyKXt2YXIgdD10aGlzLmxlbmd0aDtlPX5+ZTtyPXI9PT11bmRlZmluZWQ/dDp+fnI7aWYoZTwwKXtlKz10O2lmKGU8MCllPTB9ZWxzZSBpZihlPnQpe2U9dH1pZihyPDApe3IrPXQ7aWYocjwwKXI9MH1lbHNlIGlmKHI+dCl7cj10fWlmKHI8ZSlyPWU7dmFyIGY9dGhpcy5zdWJhcnJheShlLHIpO09iamVjdC5zZXRQcm90b3R5cGVPZihmLEJ1ZmZlci5wcm90b3R5cGUpO3JldHVybiBmfTtmdW5jdGlvbiBjaGVja09mZnNldChlLHIsdCl7aWYoZSUxIT09MHx8ZTwwKXRocm93IG5ldyBSYW5nZUVycm9yKFwib2Zmc2V0IGlzIG5vdCB1aW50XCIpO2lmKGUrcj50KXRocm93IG5ldyBSYW5nZUVycm9yKFwiVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aFwiKX1CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEU9ZnVuY3Rpb24gcmVhZFVJbnRMRShlLHIsdCl7ZT1lPj4+MDtyPXI+Pj4wO2lmKCF0KWNoZWNrT2Zmc2V0KGUscix0aGlzLmxlbmd0aCk7dmFyIGY9dGhpc1tlXTt2YXIgbj0xO3ZhciBpPTA7d2hpbGUoKytpPHImJihuKj0yNTYpKXtmKz10aGlzW2UraV0qbn1yZXR1cm4gZn07QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludEJFPWZ1bmN0aW9uIHJlYWRVSW50QkUoZSxyLHQpe2U9ZT4+PjA7cj1yPj4+MDtpZighdCl7Y2hlY2tPZmZzZXQoZSxyLHRoaXMubGVuZ3RoKX12YXIgZj10aGlzW2UrLS1yXTt2YXIgbj0xO3doaWxlKHI+MCYmKG4qPTI1Nikpe2YrPXRoaXNbZSstLXJdKm59cmV0dXJuIGZ9O0J1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4PWZ1bmN0aW9uIHJlYWRVSW50OChlLHIpe2U9ZT4+PjA7aWYoIXIpY2hlY2tPZmZzZXQoZSwxLHRoaXMubGVuZ3RoKTtyZXR1cm4gdGhpc1tlXX07QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEU9ZnVuY3Rpb24gcmVhZFVJbnQxNkxFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDIsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2VdfHRoaXNbZSsxXTw8OH07QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24gcmVhZFVJbnQxNkJFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDIsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2VdPDw4fHRoaXNbZSsxXX07QnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyTEU9ZnVuY3Rpb24gcmVhZFVJbnQzMkxFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDQsdGhpcy5sZW5ndGgpO3JldHVybih0aGlzW2VdfHRoaXNbZSsxXTw8OHx0aGlzW2UrMl08PDE2KSt0aGlzW2UrM10qMTY3NzcyMTZ9O0J1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkJFPWZ1bmN0aW9uIHJlYWRVSW50MzJCRShlLHIpe2U9ZT4+PjA7aWYoIXIpY2hlY2tPZmZzZXQoZSw0LHRoaXMubGVuZ3RoKTtyZXR1cm4gdGhpc1tlXSoxNjc3NzIxNisodGhpc1tlKzFdPDwxNnx0aGlzW2UrMl08PDh8dGhpc1tlKzNdKX07QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEU9ZnVuY3Rpb24gcmVhZEludExFKGUscix0KXtlPWU+Pj4wO3I9cj4+PjA7aWYoIXQpY2hlY2tPZmZzZXQoZSxyLHRoaXMubGVuZ3RoKTt2YXIgZj10aGlzW2VdO3ZhciBuPTE7dmFyIGk9MDt3aGlsZSgrK2k8ciYmKG4qPTI1Nikpe2YrPXRoaXNbZStpXSpufW4qPTEyODtpZihmPj1uKWYtPU1hdGgucG93KDIsOCpyKTtyZXR1cm4gZn07QnVmZmVyLnByb3RvdHlwZS5yZWFkSW50QkU9ZnVuY3Rpb24gcmVhZEludEJFKGUscix0KXtlPWU+Pj4wO3I9cj4+PjA7aWYoIXQpY2hlY2tPZmZzZXQoZSxyLHRoaXMubGVuZ3RoKTt2YXIgZj1yO3ZhciBuPTE7dmFyIGk9dGhpc1tlKy0tZl07d2hpbGUoZj4wJiYobio9MjU2KSl7aSs9dGhpc1tlKy0tZl0qbn1uKj0xMjg7aWYoaT49bilpLT1NYXRoLnBvdygyLDgqcik7cmV0dXJuIGl9O0J1ZmZlci5wcm90b3R5cGUucmVhZEludDg9ZnVuY3Rpb24gcmVhZEludDgoZSxyKXtlPWU+Pj4wO2lmKCFyKWNoZWNrT2Zmc2V0KGUsMSx0aGlzLmxlbmd0aCk7aWYoISh0aGlzW2VdJjEyOCkpcmV0dXJuIHRoaXNbZV07cmV0dXJuKDI1NS10aGlzW2VdKzEpKi0xfTtCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFPWZ1bmN0aW9uIHJlYWRJbnQxNkxFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDIsdGhpcy5sZW5ndGgpO3ZhciB0PXRoaXNbZV18dGhpc1tlKzFdPDw4O3JldHVybiB0JjMyNzY4P3R8NDI5NDkwMTc2MDp0fTtCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkJFPWZ1bmN0aW9uIHJlYWRJbnQxNkJFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDIsdGhpcy5sZW5ndGgpO3ZhciB0PXRoaXNbZSsxXXx0aGlzW2VdPDw4O3JldHVybiB0JjMyNzY4P3R8NDI5NDkwMTc2MDp0fTtCdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFPWZ1bmN0aW9uIHJlYWRJbnQzMkxFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDQsdGhpcy5sZW5ndGgpO3JldHVybiB0aGlzW2VdfHRoaXNbZSsxXTw8OHx0aGlzW2UrMl08PDE2fHRoaXNbZSszXTw8MjR9O0J1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkU9ZnVuY3Rpb24gcmVhZEludDMyQkUoZSxyKXtlPWU+Pj4wO2lmKCFyKWNoZWNrT2Zmc2V0KGUsNCx0aGlzLmxlbmd0aCk7cmV0dXJuIHRoaXNbZV08PDI0fHRoaXNbZSsxXTw8MTZ8dGhpc1tlKzJdPDw4fHRoaXNbZSszXX07QnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRMRT1mdW5jdGlvbiByZWFkRmxvYXRMRShlLHIpe2U9ZT4+PjA7aWYoIXIpY2hlY2tPZmZzZXQoZSw0LHRoaXMubGVuZ3RoKTtyZXR1cm4gbi5yZWFkKHRoaXMsZSx0cnVlLDIzLDQpfTtCdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFPWZ1bmN0aW9uIHJlYWRGbG9hdEJFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDQsdGhpcy5sZW5ndGgpO3JldHVybiBuLnJlYWQodGhpcyxlLGZhbHNlLDIzLDQpfTtCdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRT1mdW5jdGlvbiByZWFkRG91YmxlTEUoZSxyKXtlPWU+Pj4wO2lmKCFyKWNoZWNrT2Zmc2V0KGUsOCx0aGlzLmxlbmd0aCk7cmV0dXJuIG4ucmVhZCh0aGlzLGUsdHJ1ZSw1Miw4KX07QnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkU9ZnVuY3Rpb24gcmVhZERvdWJsZUJFKGUscil7ZT1lPj4+MDtpZighciljaGVja09mZnNldChlLDgsdGhpcy5sZW5ndGgpO3JldHVybiBuLnJlYWQodGhpcyxlLGZhbHNlLDUyLDgpfTtmdW5jdGlvbiBjaGVja0ludChlLHIsdCxmLG4saSl7aWYoIUJ1ZmZlci5pc0J1ZmZlcihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJ1ZmZlclwiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKTtpZihyPm58fHI8aSl0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IGlzIG91dCBvZiBib3VuZHMnKTtpZih0K2Y+ZS5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbmRleCBvdXQgb2YgcmFuZ2VcIil9QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRT1mdW5jdGlvbiB3cml0ZVVJbnRMRShlLHIsdCxmKXtlPStlO3I9cj4+PjA7dD10Pj4+MDtpZighZil7dmFyIG49TWF0aC5wb3coMiw4KnQpLTE7Y2hlY2tJbnQodGhpcyxlLHIsdCxuLDApfXZhciBpPTE7dmFyIG89MDt0aGlzW3JdPWUmMjU1O3doaWxlKCsrbzx0JiYoaSo9MjU2KSl7dGhpc1tyK29dPWUvaSYyNTV9cmV0dXJuIHIrdH07QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRT1mdW5jdGlvbiB3cml0ZVVJbnRCRShlLHIsdCxmKXtlPStlO3I9cj4+PjA7dD10Pj4+MDtpZighZil7dmFyIG49TWF0aC5wb3coMiw4KnQpLTE7Y2hlY2tJbnQodGhpcyxlLHIsdCxuLDApfXZhciBpPXQtMTt2YXIgbz0xO3RoaXNbcitpXT1lJjI1NTt3aGlsZSgtLWk+PTAmJihvKj0yNTYpKXt0aGlzW3IraV09ZS9vJjI1NX1yZXR1cm4gcit0fTtCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDg9ZnVuY3Rpb24gd3JpdGVVSW50OChlLHIsdCl7ZT0rZTtyPXI+Pj4wO2lmKCF0KWNoZWNrSW50KHRoaXMsZSxyLDEsMjU1LDApO3RoaXNbcl09ZSYyNTU7cmV0dXJuIHIrMX07QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFPWZ1bmN0aW9uIHdyaXRlVUludDE2TEUoZSxyLHQpe2U9K2U7cj1yPj4+MDtpZighdCljaGVja0ludCh0aGlzLGUsciwyLDY1NTM1LDApO3RoaXNbcl09ZSYyNTU7dGhpc1tyKzFdPWU+Pj44O3JldHVybiByKzJ9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZCRT1mdW5jdGlvbiB3cml0ZVVJbnQxNkJFKGUscix0KXtlPStlO3I9cj4+PjA7aWYoIXQpY2hlY2tJbnQodGhpcyxlLHIsMiw2NTUzNSwwKTt0aGlzW3JdPWU+Pj44O3RoaXNbcisxXT1lJjI1NTtyZXR1cm4gcisyfTtCdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEU9ZnVuY3Rpb24gd3JpdGVVSW50MzJMRShlLHIsdCl7ZT0rZTtyPXI+Pj4wO2lmKCF0KWNoZWNrSW50KHRoaXMsZSxyLDQsNDI5NDk2NzI5NSwwKTt0aGlzW3IrM109ZT4+PjI0O3RoaXNbcisyXT1lPj4+MTY7dGhpc1tyKzFdPWU+Pj44O3RoaXNbcl09ZSYyNTU7cmV0dXJuIHIrNH07QnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFPWZ1bmN0aW9uIHdyaXRlVUludDMyQkUoZSxyLHQpe2U9K2U7cj1yPj4+MDtpZighdCljaGVja0ludCh0aGlzLGUsciw0LDQyOTQ5NjcyOTUsMCk7dGhpc1tyXT1lPj4+MjQ7dGhpc1tyKzFdPWU+Pj4xNjt0aGlzW3IrMl09ZT4+Pjg7dGhpc1tyKzNdPWUmMjU1O3JldHVybiByKzR9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRT1mdW5jdGlvbiB3cml0ZUludExFKGUscix0LGYpe2U9K2U7cj1yPj4+MDtpZighZil7dmFyIG49TWF0aC5wb3coMiw4KnQtMSk7Y2hlY2tJbnQodGhpcyxlLHIsdCxuLTEsLW4pfXZhciBpPTA7dmFyIG89MTt2YXIgdT0wO3RoaXNbcl09ZSYyNTU7d2hpbGUoKytpPHQmJihvKj0yNTYpKXtpZihlPDAmJnU9PT0wJiZ0aGlzW3IraS0xXSE9PTApe3U9MX10aGlzW3IraV09KGUvbz4+MCktdSYyNTV9cmV0dXJuIHIrdH07QnVmZmVyLnByb3RvdHlwZS53cml0ZUludEJFPWZ1bmN0aW9uIHdyaXRlSW50QkUoZSxyLHQsZil7ZT0rZTtyPXI+Pj4wO2lmKCFmKXt2YXIgbj1NYXRoLnBvdygyLDgqdC0xKTtjaGVja0ludCh0aGlzLGUscix0LG4tMSwtbil9dmFyIGk9dC0xO3ZhciBvPTE7dmFyIHU9MDt0aGlzW3IraV09ZSYyNTU7d2hpbGUoLS1pPj0wJiYobyo9MjU2KSl7aWYoZTwwJiZ1PT09MCYmdGhpc1tyK2krMV0hPT0wKXt1PTF9dGhpc1tyK2ldPShlL28+PjApLXUmMjU1fXJldHVybiByK3R9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQ4PWZ1bmN0aW9uIHdyaXRlSW50OChlLHIsdCl7ZT0rZTtyPXI+Pj4wO2lmKCF0KWNoZWNrSW50KHRoaXMsZSxyLDEsMTI3LC0xMjgpO2lmKGU8MCllPTI1NStlKzE7dGhpc1tyXT1lJjI1NTtyZXR1cm4gcisxfTtCdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRT1mdW5jdGlvbiB3cml0ZUludDE2TEUoZSxyLHQpe2U9K2U7cj1yPj4+MDtpZighdCljaGVja0ludCh0aGlzLGUsciwyLDMyNzY3LC0zMjc2OCk7dGhpc1tyXT1lJjI1NTt0aGlzW3IrMV09ZT4+Pjg7cmV0dXJuIHIrMn07QnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkU9ZnVuY3Rpb24gd3JpdGVJbnQxNkJFKGUscix0KXtlPStlO3I9cj4+PjA7aWYoIXQpY2hlY2tJbnQodGhpcyxlLHIsMiwzMjc2NywtMzI3NjgpO3RoaXNbcl09ZT4+Pjg7dGhpc1tyKzFdPWUmMjU1O3JldHVybiByKzJ9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkxFPWZ1bmN0aW9uIHdyaXRlSW50MzJMRShlLHIsdCl7ZT0rZTtyPXI+Pj4wO2lmKCF0KWNoZWNrSW50KHRoaXMsZSxyLDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCk7dGhpc1tyXT1lJjI1NTt0aGlzW3IrMV09ZT4+Pjg7dGhpc1tyKzJdPWU+Pj4xNjt0aGlzW3IrM109ZT4+PjI0O3JldHVybiByKzR9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFPWZ1bmN0aW9uIHdyaXRlSW50MzJCRShlLHIsdCl7ZT0rZTtyPXI+Pj4wO2lmKCF0KWNoZWNrSW50KHRoaXMsZSxyLDQsMjE0NzQ4MzY0NywtMjE0NzQ4MzY0OCk7aWYoZTwwKWU9NDI5NDk2NzI5NStlKzE7dGhpc1tyXT1lPj4+MjQ7dGhpc1tyKzFdPWU+Pj4xNjt0aGlzW3IrMl09ZT4+Pjg7dGhpc1tyKzNdPWUmMjU1O3JldHVybiByKzR9O2Z1bmN0aW9uIGNoZWNrSUVFRTc1NChlLHIsdCxmLG4saSl7aWYodCtmPmUubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKFwiSW5kZXggb3V0IG9mIHJhbmdlXCIpO2lmKHQ8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkluZGV4IG91dCBvZiByYW5nZVwiKX1mdW5jdGlvbiB3cml0ZUZsb2F0KGUscix0LGYsaSl7cj0rcjt0PXQ+Pj4wO2lmKCFpKXtjaGVja0lFRUU3NTQoZSxyLHQsNCwzNDAyODIzNDY2Mzg1Mjg4NmUyMiwtMzQwMjgyMzQ2NjM4NTI4ODZlMjIpfW4ud3JpdGUoZSxyLHQsZiwyMyw0KTtyZXR1cm4gdCs0fUJ1ZmZlci5wcm90b3R5cGUud3JpdGVGbG9hdExFPWZ1bmN0aW9uIHdyaXRlRmxvYXRMRShlLHIsdCl7cmV0dXJuIHdyaXRlRmxvYXQodGhpcyxlLHIsdHJ1ZSx0KX07QnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0QkU9ZnVuY3Rpb24gd3JpdGVGbG9hdEJFKGUscix0KXtyZXR1cm4gd3JpdGVGbG9hdCh0aGlzLGUscixmYWxzZSx0KX07ZnVuY3Rpb24gd3JpdGVEb3VibGUoZSxyLHQsZixpKXtyPStyO3Q9dD4+PjA7aWYoIWkpe2NoZWNrSUVFRTc1NChlLHIsdCw4LDE3OTc2OTMxMzQ4NjIzMTU3ZTI5MiwtMTc5NzY5MzEzNDg2MjMxNTdlMjkyKX1uLndyaXRlKGUscix0LGYsNTIsOCk7cmV0dXJuIHQrOH1CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEU9ZnVuY3Rpb24gd3JpdGVEb3VibGVMRShlLHIsdCl7cmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsZSxyLHRydWUsdCl9O0J1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRT1mdW5jdGlvbiB3cml0ZURvdWJsZUJFKGUscix0KXtyZXR1cm4gd3JpdGVEb3VibGUodGhpcyxlLHIsZmFsc2UsdCl9O0J1ZmZlci5wcm90b3R5cGUuY29weT1mdW5jdGlvbiBjb3B5KGUscix0LGYpe2lmKCFCdWZmZXIuaXNCdWZmZXIoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcImFyZ3VtZW50IHNob3VsZCBiZSBhIEJ1ZmZlclwiKTtpZighdCl0PTA7aWYoIWYmJmYhPT0wKWY9dGhpcy5sZW5ndGg7aWYocj49ZS5sZW5ndGgpcj1lLmxlbmd0aDtpZighcilyPTA7aWYoZj4wJiZmPHQpZj10O2lmKGY9PT10KXJldHVybiAwO2lmKGUubGVuZ3RoPT09MHx8dGhpcy5sZW5ndGg9PT0wKXJldHVybiAwO2lmKHI8MCl7dGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJ0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzXCIpfWlmKHQ8MHx8dD49dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbmRleCBvdXQgb2YgcmFuZ2VcIik7aWYoZjwwKXRocm93IG5ldyBSYW5nZUVycm9yKFwic291cmNlRW5kIG91dCBvZiBib3VuZHNcIik7aWYoZj50aGlzLmxlbmd0aClmPXRoaXMubGVuZ3RoO2lmKGUubGVuZ3RoLXI8Zi10KXtmPWUubGVuZ3RoLXIrdH12YXIgbj1mLXQ7aWYodGhpcz09PWUmJnR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5jb3B5V2l0aGluPT09XCJmdW5jdGlvblwiKXt0aGlzLmNvcHlXaXRoaW4ocix0LGYpfWVsc2UgaWYodGhpcz09PWUmJnQ8ciYmcjxmKXtmb3IodmFyIGk9bi0xO2k+PTA7LS1pKXtlW2krcl09dGhpc1tpK3RdfX1lbHNle1VpbnQ4QXJyYXkucHJvdG90eXBlLnNldC5jYWxsKGUsdGhpcy5zdWJhcnJheSh0LGYpLHIpfXJldHVybiBufTtCdWZmZXIucHJvdG90eXBlLmZpbGw9ZnVuY3Rpb24gZmlsbChlLHIsdCxmKXtpZih0eXBlb2YgZT09PVwic3RyaW5nXCIpe2lmKHR5cGVvZiByPT09XCJzdHJpbmdcIil7Zj1yO3I9MDt0PXRoaXMubGVuZ3RofWVsc2UgaWYodHlwZW9mIHQ9PT1cInN0cmluZ1wiKXtmPXQ7dD10aGlzLmxlbmd0aH1pZihmIT09dW5kZWZpbmVkJiZ0eXBlb2YgZiE9PVwic3RyaW5nXCIpe3Rocm93IG5ldyBUeXBlRXJyb3IoXCJlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nXCIpfWlmKHR5cGVvZiBmPT09XCJzdHJpbmdcIiYmIUJ1ZmZlci5pc0VuY29kaW5nKGYpKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5rbm93biBlbmNvZGluZzogXCIrZil9aWYoZS5sZW5ndGg9PT0xKXt2YXIgbj1lLmNoYXJDb2RlQXQoMCk7aWYoZj09PVwidXRmOFwiJiZuPDEyOHx8Zj09PVwibGF0aW4xXCIpe2U9bn19fWVsc2UgaWYodHlwZW9mIGU9PT1cIm51bWJlclwiKXtlPWUmMjU1fWVsc2UgaWYodHlwZW9mIGU9PT1cImJvb2xlYW5cIil7ZT1OdW1iZXIoZSl9aWYocjwwfHx0aGlzLmxlbmd0aDxyfHx0aGlzLmxlbmd0aDx0KXt0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIk91dCBvZiByYW5nZSBpbmRleFwiKX1pZih0PD1yKXtyZXR1cm4gdGhpc31yPXI+Pj4wO3Q9dD09PXVuZGVmaW5lZD90aGlzLmxlbmd0aDp0Pj4+MDtpZighZSllPTA7dmFyIGk7aWYodHlwZW9mIGU9PT1cIm51bWJlclwiKXtmb3IoaT1yO2k8dDsrK2kpe3RoaXNbaV09ZX19ZWxzZXt2YXIgbz1CdWZmZXIuaXNCdWZmZXIoZSk/ZTpCdWZmZXIuZnJvbShlLGYpO3ZhciB1PW8ubGVuZ3RoO2lmKHU9PT0wKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgdmFsdWUgXCInK2UrJ1wiIGlzIGludmFsaWQgZm9yIGFyZ3VtZW50IFwidmFsdWVcIicpfWZvcihpPTA7aTx0LXI7KytpKXt0aGlzW2krcl09b1tpJXVdfX1yZXR1cm4gdGhpc307dmFyIGE9L1teKy8wLTlBLVphLXotX10vZztmdW5jdGlvbiBiYXNlNjRjbGVhbihlKXtlPWUuc3BsaXQoXCI9XCIpWzBdO2U9ZS50cmltKCkucmVwbGFjZShhLFwiXCIpO2lmKGUubGVuZ3RoPDIpcmV0dXJuXCJcIjt3aGlsZShlLmxlbmd0aCU0IT09MCl7ZT1lK1wiPVwifXJldHVybiBlfWZ1bmN0aW9uIHV0ZjhUb0J5dGVzKGUscil7cj1yfHxJbmZpbml0eTt2YXIgdDt2YXIgZj1lLmxlbmd0aDt2YXIgbj1udWxsO3ZhciBpPVtdO2Zvcih2YXIgbz0wO288ZjsrK28pe3Q9ZS5jaGFyQ29kZUF0KG8pO2lmKHQ+NTUyOTUmJnQ8NTczNDQpe2lmKCFuKXtpZih0PjU2MzE5KXtpZigoci09Myk+LTEpaS5wdXNoKDIzOSwxOTEsMTg5KTtjb250aW51ZX1lbHNlIGlmKG8rMT09PWYpe2lmKChyLT0zKT4tMSlpLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfW49dDtjb250aW51ZX1pZih0PDU2MzIwKXtpZigoci09Myk+LTEpaS5wdXNoKDIzOSwxOTEsMTg5KTtuPXQ7Y29udGludWV9dD0obi01NTI5Njw8MTB8dC01NjMyMCkrNjU1MzZ9ZWxzZSBpZihuKXtpZigoci09Myk+LTEpaS5wdXNoKDIzOSwxOTEsMTg5KX1uPW51bGw7aWYodDwxMjgpe2lmKChyLT0xKTwwKWJyZWFrO2kucHVzaCh0KX1lbHNlIGlmKHQ8MjA0OCl7aWYoKHItPTIpPDApYnJlYWs7aS5wdXNoKHQ+PjZ8MTkyLHQmNjN8MTI4KX1lbHNlIGlmKHQ8NjU1MzYpe2lmKChyLT0zKTwwKWJyZWFrO2kucHVzaCh0Pj4xMnwyMjQsdD4+NiY2M3wxMjgsdCY2M3wxMjgpfWVsc2UgaWYodDwxMTE0MTEyKXtpZigoci09NCk8MClicmVhaztpLnB1c2godD4+MTh8MjQwLHQ+PjEyJjYzfDEyOCx0Pj42JjYzfDEyOCx0JjYzfDEyOCl9ZWxzZXt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNvZGUgcG9pbnRcIil9fXJldHVybiBpfWZ1bmN0aW9uIGFzY2lpVG9CeXRlcyhlKXt2YXIgcj1bXTtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoOysrdCl7ci5wdXNoKGUuY2hhckNvZGVBdCh0KSYyNTUpfXJldHVybiByfWZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzKGUscil7dmFyIHQsZixuO3ZhciBpPVtdO2Zvcih2YXIgbz0wO288ZS5sZW5ndGg7KytvKXtpZigoci09Mik8MClicmVhazt0PWUuY2hhckNvZGVBdChvKTtmPXQ+Pjg7bj10JTI1NjtpLnB1c2gobik7aS5wdXNoKGYpfXJldHVybiBpfWZ1bmN0aW9uIGJhc2U2NFRvQnl0ZXMoZSl7cmV0dXJuIGYudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oZSkpfWZ1bmN0aW9uIGJsaXRCdWZmZXIoZSxyLHQsZil7Zm9yKHZhciBuPTA7bjxmOysrbil7aWYobit0Pj1yLmxlbmd0aHx8bj49ZS5sZW5ndGgpYnJlYWs7cltuK3RdPWVbbl19cmV0dXJuIG59ZnVuY3Rpb24gaXNJbnN0YW5jZShlLHIpe3JldHVybiBlIGluc3RhbmNlb2Ygcnx8ZSE9bnVsbCYmZS5jb25zdHJ1Y3RvciE9bnVsbCYmZS5jb25zdHJ1Y3Rvci5uYW1lIT1udWxsJiZlLmNvbnN0cnVjdG9yLm5hbWU9PT1yLm5hbWV9ZnVuY3Rpb24gbnVtYmVySXNOYU4oZSl7cmV0dXJuIGUhPT1lfXZhciBzPWZ1bmN0aW9uKCl7dmFyIGU9XCIwMTIzNDU2Nzg5YWJjZGVmXCI7dmFyIHI9bmV3IEFycmF5KDI1Nik7Zm9yKHZhciB0PTA7dDwxNjsrK3Qpe3ZhciBmPXQqMTY7Zm9yKHZhciBuPTA7bjwxNjsrK24pe3JbZituXT1lW3RdK2Vbbl19fXJldHVybiByfSgpfSw3ODM6ZnVuY3Rpb24oZSxyKXtcbi8qISBpZWVlNzU0LiBCU0QtMy1DbGF1c2UgTGljZW5zZS4gRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnL29wZW5zb3VyY2U+ICovXG5yLnJlYWQ9ZnVuY3Rpb24oZSxyLHQsZixuKXt2YXIgaSxvO3ZhciB1PW4qOC1mLTE7dmFyIGE9KDE8PHUpLTE7dmFyIHM9YT4+MTt2YXIgaD0tNzt2YXIgYz10P24tMTowO3ZhciBsPXQ/LTE6MTt2YXIgcD1lW3IrY107Yys9bDtpPXAmKDE8PC1oKS0xO3A+Pj0taDtoKz11O2Zvcig7aD4wO2k9aSoyNTYrZVtyK2NdLGMrPWwsaC09OCl7fW89aSYoMTw8LWgpLTE7aT4+PS1oO2grPWY7Zm9yKDtoPjA7bz1vKjI1NitlW3IrY10sYys9bCxoLT04KXt9aWYoaT09PTApe2k9MS1zfWVsc2UgaWYoaT09PWEpe3JldHVybiBvP05hTjoocD8tMToxKSpJbmZpbml0eX1lbHNle289bytNYXRoLnBvdygyLGYpO2k9aS1zfXJldHVybihwPy0xOjEpKm8qTWF0aC5wb3coMixpLWYpfTtyLndyaXRlPWZ1bmN0aW9uKGUscix0LGYsbixpKXt2YXIgbyx1LGE7dmFyIHM9aSo4LW4tMTt2YXIgaD0oMTw8cyktMTt2YXIgYz1oPj4xO3ZhciBsPW49PT0yMz9NYXRoLnBvdygyLC0yNCktTWF0aC5wb3coMiwtNzcpOjA7dmFyIHA9Zj8wOmktMTt2YXIgeT1mPzE6LTE7dmFyIGc9cjwwfHxyPT09MCYmMS9yPDA/MTowO3I9TWF0aC5hYnMocik7aWYoaXNOYU4ocil8fHI9PT1JbmZpbml0eSl7dT1pc05hTihyKT8xOjA7bz1ofWVsc2V7bz1NYXRoLmZsb29yKE1hdGgubG9nKHIpL01hdGguTE4yKTtpZihyKihhPU1hdGgucG93KDIsLW8pKTwxKXtvLS07YSo9Mn1pZihvK2M+PTEpe3IrPWwvYX1lbHNle3IrPWwqTWF0aC5wb3coMiwxLWMpfWlmKHIqYT49Mil7bysrO2EvPTJ9aWYobytjPj1oKXt1PTA7bz1ofWVsc2UgaWYobytjPj0xKXt1PShyKmEtMSkqTWF0aC5wb3coMixuKTtvPW8rY31lbHNle3U9cipNYXRoLnBvdygyLGMtMSkqTWF0aC5wb3coMixuKTtvPTB9fWZvcig7bj49ODtlW3QrcF09dSYyNTUscCs9eSx1Lz0yNTYsbi09OCl7fW89bzw8bnx1O3MrPW47Zm9yKDtzPjA7ZVt0K3BdPW8mMjU1LHArPXksby89MjU2LHMtPTgpe31lW3QrcC15XXw9ZyoxMjh9fX07dmFyIHI9e307ZnVuY3Rpb24gX19uY2N3cGNrX3JlcXVpcmVfXyh0KXt2YXIgZj1yW3RdO2lmKGYhPT11bmRlZmluZWQpe3JldHVybiBmLmV4cG9ydHN9dmFyIG49clt0XT17ZXhwb3J0czp7fX07dmFyIGk9dHJ1ZTt0cnl7ZVt0XShuLG4uZXhwb3J0cyxfX25jY3dwY2tfcmVxdWlyZV9fKTtpPWZhbHNlfWZpbmFsbHl7aWYoaSlkZWxldGUgclt0XX1yZXR1cm4gbi5leHBvcnRzfWlmKHR5cGVvZiBfX25jY3dwY2tfcmVxdWlyZV9fIT09XCJ1bmRlZmluZWRcIilfX25jY3dwY2tfcmVxdWlyZV9fLmFiPV9fZGlybmFtZStcIi9cIjt2YXIgdD1fX25jY3dwY2tfcmVxdWlyZV9fKDcyKTttb2R1bGUuZXhwb3J0cz10fSkoKTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/buffer/index.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/VideoCapture/VideoCapture.css":
/*!**************************************************!*\
  !*** ./components/VideoCapture/VideoCapture.css ***!
  \**************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"acd3cc415d38\");\nif (true) { module.hot.accept() }\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvVmlkZW9DYXB0dXJlL1ZpZGVvQ2FwdHVyZS5jc3MiLCJtYXBwaW5ncyI6IjtBQUFBLCtEQUFlLGNBQWM7QUFDN0IsSUFBSSxJQUFVLElBQUksaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvVmlkZW9DYXB0dXJlL1ZpZGVvQ2FwdHVyZS5jc3M/ZDJlZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcImFjZDNjYzQxNWQzOFwiXG5pZiAobW9kdWxlLmhvdCkgeyBtb2R1bGUuaG90LmFjY2VwdCgpIH1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/VideoCapture/VideoCapture.css\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/VideoCapture/VideoCapture.tsx":
/*!**************************************************!*\
  !*** ./components/VideoCapture/VideoCapture.tsx ***!
  \**************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _VideoCapture_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./VideoCapture.css */ \"(app-pages-browser)/./components/VideoCapture/VideoCapture.css\");\n/* harmony import */ var _dynamsoft_config__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../dynamsoft.config */ \"(app-pages-browser)/./dynamsoft.config.ts\");\n/* harmony import */ var dynamsoft_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! dynamsoft-core */ \"(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js\");\n/* harmony import */ var dynamsoft_camera_enhancer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! dynamsoft-camera-enhancer */ \"(app-pages-browser)/./node_modules/dynamsoft-camera-enhancer/dist/dce.esm.js\");\n/* harmony import */ var dynamsoft_capture_vision_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! dynamsoft-capture-vision-router */ \"(app-pages-browser)/./node_modules/dynamsoft-capture-vision-router/dist/cvr.esm.js\");\n\nvar _s = $RefreshSig$();\n\n\n\n\n\n\nfunction VideoNormalizer() {\n    _s();\n    let cvRouter;\n    let imageEditorViewContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    let cameraViewContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    let normalizedImageContainer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    let cameraEnhancer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    let router = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    let [bShowUiContainer, setShowUiContainer] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    let [bShowImageContainer, setShowImageContainer] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    let [bDisabledBtnEdit, setDisabledBtnEdit] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    let [bDisabledBtnNor, setDisabledBtnNor] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    let [bShowLoading, setShowLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    let normalizer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    let dce = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    let imageEditorView = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    let layer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    let view = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    let items = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)([]);\n    let image = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    let quads = [];\n    let scanRegion = {};\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const init = async ()=>{\n            try {\n                view.current = await dynamsoft_camera_enhancer__WEBPACK_IMPORTED_MODULE_5__.CameraView.createInstance(\"@engineResourcePath/dce.mobile-native.ui.html\");\n                dce.current = await (cameraEnhancer.current = dynamsoft_camera_enhancer__WEBPACK_IMPORTED_MODULE_5__.CameraEnhancer.createInstance(view.current));\n                dce.current.on(\"cameraOpen\", ()=>{\n                    var _dce_current, _dce_current1, _dce_current2;\n                    let width = (_dce_current = dce.current) === null || _dce_current === void 0 ? void 0 : _dce_current.video.videoWidth;\n                    let height = (_dce_current1 = dce.current) === null || _dce_current1 === void 0 ? void 0 : _dce_current1.video.videoHeight;\n                    let sideLen = Math.min(height) * 0.6;\n                    let precentW = Math.round(sideLen / width * 100);\n                    let precentH = Math.round(sideLen / height * 100);\n                    scanRegion = {\n                        x: precentW,\n                        y: precentW,\n                        width: precentW,\n                        height: precentH,\n                        isMeasuredInPercentage: true\n                    };\n                    (_dce_current2 = dce.current) === null || _dce_current2 === void 0 ? void 0 : _dce_current2.setScanRegion(scanRegion);\n                });\n                //...\n                imageEditorView.current = await dynamsoft_camera_enhancer__WEBPACK_IMPORTED_MODULE_5__.ImageEditorView.createInstance(imageEditorViewContainerRef.current);\n                /* Creates an image editing layer for drawing found document boundaries. */ layer.current = imageEditorView.current.createDrawingLayer();\n                /**\n                 * Creates a CaptureVisionRouter instance and configure the task to detect document boundaries.\n                 * Also, make sure the original image is returned after it has been processed.\n                 */ normalizer.current = await (router.current = dynamsoft_capture_vision_router__WEBPACK_IMPORTED_MODULE_4__.CaptureVisionRouter.createInstance());\n                normalizer.current.setInput(dce.current);\n                /**\n                 * Sets the result types to be returned.\n                 * Because we need to normalize the original image later, here we set the return result type to\n                 * include both the quadrilateral and original image data.\n                 */ let newSettings = await normalizer.current.getSimplifiedSettings(\"DetectDocumentBoundaries_Default\");\n                newSettings.capturedResultItemTypes |= dynamsoft_core__WEBPACK_IMPORTED_MODULE_6__.EnumCapturedResultItemType.CRIT_ORIGINAL_IMAGE;\n                await normalizer.current.updateSettings(\"DetectDocumentBoundaries_Default\", newSettings);\n                cameraViewContainerRef.current.append(view.current.getUIElement());\n                /* Defines the result receiver for the task.*/ const resultReceiver = new dynamsoft_capture_vision_router__WEBPACK_IMPORTED_MODULE_4__.CapturedResultReceiver();\n                resultReceiver.onCapturedResultReceived = (result)=>{\n                    const originalImage = result.items.filter((item)=>{\n                        return item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_6__.EnumCapturedResultItemType.CRIT_ORIGINAL_IMAGE;\n                    });\n                    if (originalImage.length) {\n                        image.current = originalImage[0].imageData;\n                    }\n                    items.current = result.items.filter((item)=>{\n                        return item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_6__.EnumCapturedResultItemType.CRIT_DETECTED_QUAD;\n                    });\n                };\n                normalizer.current.addResultReceiver(resultReceiver);\n                await dce.current.open();\n                /* Uses the built-in template \"DetectDocumentBoundaries_Default\" to start a continuous boundary detection task. */ await normalizer.current.startCapturing(\"DetectDocumentBoundaries_Default\");\n                setShowLoading(false);\n            } catch (ex) {\n                let errMsg = ex.message || ex;\n                console.error(errMsg);\n                alert(errMsg);\n            }\n        };\n        init();\n        return async ()=>{\n            var _this, _this1;\n            (_this = await router.current) === null || _this === void 0 ? void 0 : _this.dispose();\n            (_this1 = await cameraEnhancer.current) === null || _this1 === void 0 ? void 0 : _this1.dispose();\n            console.log(\"VideoNormalizer Component Unmount\");\n        };\n    }, []);\n    const confirmTheBoundary = ()=>{\n        if (!dce.current.isOpen() || !items.current.length) return;\n        /* Hides the cameraView and shows the imageEditorView. */ setShowUiContainer(false);\n        setShowImageContainer(true);\n        /* Draws the image on the imageEditorView first. */ imageEditorView.current.setOriginalImage(image.current);\n        quads = [];\n        /* Draws the document boundary (quad) over the image. */ for(let i = 0; i < items.current.length; i++){\n            if (items.current[i].type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_6__.EnumCapturedResultItemType.CRIT_ORIGINAL_IMAGE) continue;\n            const points = items.current[i].location.points;\n            const quad = new dynamsoft_camera_enhancer__WEBPACK_IMPORTED_MODULE_5__.QuadDrawingItem({\n                points\n            });\n            quads.push(quad);\n            layer.current.addDrawingItems(quads);\n        }\n        setDisabledBtnEdit(true);\n        setDisabledBtnNor(false);\n        normalizer.current.stopCapturing();\n    };\n    const normalize = async ()=>{\n        /* Get the selected quadrilateral */ let seletedItems = imageEditorView.current.getSelectedDrawingItems();\n        let quad;\n        if (seletedItems.length) {\n            quad = seletedItems[0].getQuad();\n        } else {\n            quad = items.current[0].location;\n        }\n        const isPointOverBoundary = (point)=>{\n            if (point.x < 0 || point.x > image.current.width || point.y < 0 || point.y > image.current.height) {\n                return true;\n            } else {\n                return false;\n            }\n        };\n        /* Check if the points beyond the boundaries of the image. */ if (quad.points.some((point)=>isPointOverBoundary(point))) {\n            alert(\"The document boundaries extend beyond the boundaries of the image and cannot be used to normalize the document.\");\n            return;\n        }\n        /* Hides the imageEditorView. */ setShowImageContainer(false);\n        /* Removes the old normalized image if any. */ normalizedImageContainer.current.innerHTML = \"\";\n        /**\n         * Sets the coordinates of the ROI (region of interest)\n         * in the built-in template \"normalize-document\".\n         */ let newSettings = await normalizer.current.getSimplifiedSettings(\"normalize-document\");\n        newSettings.roiMeasuredInPercentage = false;\n        newSettings.roi.points = quad.points;\n        await normalizer.current.updateSettings(\"normalize-document\", newSettings);\n        /* Executes the normalization and shows the result on the page */ let norRes = await normalizer.current.capture(image.current, \"normalize-document\");\n        if (norRes.items[0]) {\n            normalizedImageContainer.current.append(norRes.items[0].toCanvas());\n        }\n        layer.current.clearDrawingItems();\n        setDisabledBtnEdit(false);\n        setDisabledBtnNor(true);\n        /* show video view */ setShowUiContainer(true);\n        view.current.getUIElement().style.display = \"\";\n        await normalizer.current.startCapturing(\"DetectDocumentBoundaries_Default\");\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"container\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                id: \"div-loading\",\n                style: {\n                    display: bShowLoading ? \"block\" : \"none\"\n                },\n                children: \"Loading...\"\n            }, void 0, false, {\n                fileName: \"/Users/yujianzhu/Downloads/Archive/components/VideoCapture/VideoCapture.tsx\",\n                lineNumber: 180,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                id: \"div-video-btns\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        id: \"confirm-quad-for-normalization\",\n                        onClick: confirmTheBoundary,\n                        disabled: bDisabledBtnEdit,\n                        children: \"Confirm the Boundary\"\n                    }, void 0, false, {\n                        fileName: \"/Users/yujianzhu/Downloads/Archive/components/VideoCapture/VideoCapture.tsx\",\n                        lineNumber: 182,\n                        columnNumber: 17\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        id: \"normalize-with-confirmed-quad\",\n                        onClick: normalize,\n                        disabled: bDisabledBtnNor,\n                        children: \"Normalize\"\n                    }, void 0, false, {\n                        fileName: \"/Users/yujianzhu/Downloads/Archive/components/VideoCapture/VideoCapture.tsx\",\n                        lineNumber: 183,\n                        columnNumber: 17\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/yujianzhu/Downloads/Archive/components/VideoCapture/VideoCapture.tsx\",\n                lineNumber: 181,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                id: \"div-ui-container\",\n                style: {\n                    display: bShowUiContainer ? \"block\" : \"none\",\n                    marginTop: \"10px\",\n                    height: \"500px\"\n                },\n                ref: cameraViewContainerRef\n            }, void 0, false, {\n                fileName: \"/Users/yujianzhu/Downloads/Archive/components/VideoCapture/VideoCapture.tsx\",\n                lineNumber: 185,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                id: \"div-image-container\",\n                style: {\n                    display: bShowImageContainer ? \"block\" : \"none\",\n                    width: \"100vw\",\n                    height: \"70vh\"\n                },\n                ref: imageEditorViewContainerRef,\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"dce-image-container\",\n                    style: {\n                        width: \"100%\",\n                        height: \"100%\"\n                    }\n                }, void 0, false, {\n                    fileName: \"/Users/yujianzhu/Downloads/Archive/components/VideoCapture/VideoCapture.tsx\",\n                    lineNumber: 187,\n                    columnNumber: 17\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/yujianzhu/Downloads/Archive/components/VideoCapture/VideoCapture.tsx\",\n                lineNumber: 186,\n                columnNumber: 13\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                id: \"normalized-result\",\n                ref: normalizedImageContainer\n            }, void 0, false, {\n                fileName: \"/Users/yujianzhu/Downloads/Archive/components/VideoCapture/VideoCapture.tsx\",\n                lineNumber: 189,\n                columnNumber: 13\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/yujianzhu/Downloads/Archive/components/VideoCapture/VideoCapture.tsx\",\n        lineNumber: 179,\n        columnNumber: 9\n    }, this);\n}\n_s(VideoNormalizer, \"BAA/gwPay4eZ8iq60J0onUzw3R4=\");\n_c = VideoNormalizer;\n/* harmony default export */ __webpack_exports__[\"default\"] = (VideoNormalizer);\nvar _c;\n$RefreshReg$(_c, \"VideoNormalizer\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvVmlkZW9DYXB0dXJlL1ZpZGVvQ2FwdHVyZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0U7QUFDMUM7QUFDSTtBQUM2RjtBQUNwQjtBQUMyQjtBQUdwSSxTQUFTVTs7SUFDTCxJQUFJQztJQUNKLElBQUlDLDhCQUF1RVgsNkNBQU1BLENBQUM7SUFDbEYsSUFBSVkseUJBQWtFWiw2Q0FBTUEsQ0FBQztJQUM3RSxJQUFJYSwyQkFBb0ViLDZDQUFNQSxDQUFDO0lBQy9FLElBQUljLGlCQUFtRWQsNkNBQU1BLENBQUM7SUFDOUUsSUFBSWUsU0FBZ0VmLDZDQUFNQSxDQUFDO0lBQzNFLElBQUksQ0FBQ2dCLGtCQUFrQkMsbUJBQW1CLEdBQUdoQiwrQ0FBUUEsQ0FBQztJQUN0RCxJQUFJLENBQUNpQixxQkFBcUJDLHNCQUFzQixHQUFHbEIsK0NBQVFBLENBQUM7SUFDNUQsSUFBSSxDQUFDbUIsa0JBQWtCQyxtQkFBbUIsR0FBR3BCLCtDQUFRQSxDQUFDO0lBQ3RELElBQUksQ0FBQ3FCLGlCQUFpQkMsa0JBQWtCLEdBQUd0QiwrQ0FBUUEsQ0FBQztJQUNwRCxJQUFJLENBQUN1QixjQUFjQyxlQUFlLEdBQUd4QiwrQ0FBUUEsQ0FBQztJQUU5QyxJQUFJeUIsYUFBMkQxQiw2Q0FBTUEsQ0FBQztJQUN0RSxJQUFJMkIsTUFBK0MzQiw2Q0FBTUEsQ0FBQztJQUMxRCxJQUFJNEIsa0JBQTRENUIsNkNBQU1BLENBQUM7SUFDdkUsSUFBSTZCLFFBQStCN0IsNkNBQU1BLENBQUM7SUFDMUMsSUFBSThCLE9BQTRDOUIsNkNBQU1BLENBQUM7SUFDdkQsSUFBSStCLFFBQXNDL0IsNkNBQU1BLENBQUMsRUFBRTtJQUNuRCxJQUFJZ0MsUUFBOENoQyw2Q0FBTUEsQ0FBQztJQUN6RCxJQUFJaUMsUUFBb0IsRUFBRTtJQUMxQixJQUFJQyxhQUFpQixDQUFDO0lBQ3RCbkMsZ0RBQVNBLENBQUM7UUFDTixNQUFNb0MsT0FB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TFNKO0tBQUFBO0FBeUxULCtEQUFlQSxlQUFlQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvVmlkZW9DYXB0dXJlL1ZpZGVvQ2FwdHVyZS50c3g/ZmJiZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgTXV0YWJsZVJlZk9iamVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgXCIuL1ZpZGVvQ2FwdHVyZS5jc3NcIjtcbmltcG9ydCBcIi4uLy4uL2R5bmFtc29mdC5jb25maWdcIjsgXG5pbXBvcnQgeyBFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZSwgRFNJbWFnZURhdGEsIE9yaWdpbmFsSW1hZ2VSZXN1bHRJdGVtLCBDYXB0dXJlZFJlc3VsdEl0ZW0sIFBvaW50IH0gZnJvbSBcImR5bmFtc29mdC1jb3JlXCI7XG5pbXBvcnQgeyBDYW1lcmFFbmhhbmNlciwgQ2FtZXJhVmlldywgUXVhZERyYXdpbmdJdGVtLCBJbWFnZUVkaXRvclZpZXcgfSBmcm9tIFwiZHluYW1zb2Z0LWNhbWVyYS1lbmhhbmNlclwiO1xuaW1wb3J0IHsgQ2FwdHVyZWRSZXN1bHRSZWNlaXZlciwgQ2FwdHVyZVZpc2lvblJvdXRlciwgdHlwZSBTaW1wbGlmaWVkQ2FwdHVyZVZpc2lvblNldHRpbmdzIH0gZnJvbSBcImR5bmFtc29mdC1jYXB0dXJlLXZpc2lvbi1yb3V0ZXJcIjtcbmltcG9ydCB7IE5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW0gfSBmcm9tIFwiZHluYW1zb2Z0LWRvY3VtZW50LW5vcm1hbGl6ZXJcIjtcblxuZnVuY3Rpb24gVmlkZW9Ob3JtYWxpemVyKCkge1xuICAgIGxldCBjdlJvdXRlcjogQ2FwdHVyZVZpc2lvblJvdXRlcjtcbiAgICBsZXQgaW1hZ2VFZGl0b3JWaWV3Q29udGFpbmVyUmVmOiBNdXRhYmxlUmVmT2JqZWN0PEhUTUxEaXZFbGVtZW50IHwgbnVsbD4gPSB1c2VSZWYobnVsbCk7XG4gICAgbGV0IGNhbWVyYVZpZXdDb250YWluZXJSZWY6IE11dGFibGVSZWZPYmplY3Q8SFRNTERpdkVsZW1lbnQgfCBudWxsPiA9IHVzZVJlZihudWxsKTtcbiAgICBsZXQgbm9ybWFsaXplZEltYWdlQ29udGFpbmVyOiBNdXRhYmxlUmVmT2JqZWN0PEhUTUxEaXZFbGVtZW50IHwgbnVsbD4gPSB1c2VSZWYobnVsbCk7XG4gICAgbGV0IGNhbWVyYUVuaGFuY2VyOiBNdXRhYmxlUmVmT2JqZWN0PFByb21pc2U8Q2FtZXJhRW5oYW5jZXI+IHwgbnVsbD4gPSB1c2VSZWYobnVsbCk7XG4gICAgbGV0IHJvdXRlcjogTXV0YWJsZVJlZk9iamVjdDxQcm9taXNlPENhcHR1cmVWaXNpb25Sb3V0ZXI+IHwgbnVsbD4gPSB1c2VSZWYobnVsbCk7XG4gICAgbGV0IFtiU2hvd1VpQ29udGFpbmVyLCBzZXRTaG93VWlDb250YWluZXJdID0gdXNlU3RhdGUodHJ1ZSk7XG4gICAgbGV0IFtiU2hvd0ltYWdlQ29udGFpbmVyLCBzZXRTaG93SW1hZ2VDb250YWluZXJdID0gdXNlU3RhdGUoZmFsc2UpO1xuICAgIGxldCBbYkRpc2FibGVkQnRuRWRpdCwgc2V0RGlzYWJsZWRCdG5FZGl0XSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBsZXQgW2JEaXNhYmxlZEJ0bk5vciwgc2V0RGlzYWJsZWRCdG5Ob3JdID0gdXNlU3RhdGUodHJ1ZSk7XG4gICAgbGV0IFtiU2hvd0xvYWRpbmcsIHNldFNob3dMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuXG4gICAgbGV0IG5vcm1hbGl6ZXI6IE11dGFibGVSZWZPYmplY3Q8Q2FwdHVyZVZpc2lvblJvdXRlciB8IG51bGw+ID0gdXNlUmVmKG51bGwpO1xuICAgIGxldCBkY2U6IE11dGFibGVSZWZPYmplY3Q8Q2FtZXJhRW5oYW5jZXIgfCBudWxsPiA9IHVzZVJlZihudWxsKTtcbiAgICBsZXQgaW1hZ2VFZGl0b3JWaWV3OiBNdXRhYmxlUmVmT2JqZWN0PEltYWdlRWRpdG9yVmlldyB8IG51bGw+ID0gdXNlUmVmKG51bGwpO1xuICAgIGxldCBsYXllcjogTXV0YWJsZVJlZk9iamVjdDxhbnk+ID0gdXNlUmVmKG51bGwpO1xuICAgIGxldCB2aWV3OiBNdXRhYmxlUmVmT2JqZWN0PENhbWVyYVZpZXcgfCBudWxsPiA9IHVzZVJlZihudWxsKTtcbiAgICBsZXQgaXRlbXM6IE11dGFibGVSZWZPYmplY3Q8QXJyYXk8YW55Pj4gPSB1c2VSZWYoW10pO1xuICAgIGxldCBpbWFnZTogTXV0YWJsZVJlZk9iamVjdDxEU0ltYWdlRGF0YSB8IG51bGw+ID0gdXNlUmVmKG51bGwpO1xuICAgIGxldCBxdWFkczogQXJyYXk8YW55PiA9IFtdO1xuICAgIGxldCBzY2FuUmVnaW9uOmFueSA9IHt9XG4gICAgdXNlRWZmZWN0KCgpOiBhbnkgPT4ge1xuICAgICAgICBjb25zdCBpbml0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2aWV3LmN1cnJlbnQgPSBhd2FpdCBDYW1lcmFWaWV3LmNyZWF0ZUluc3RhbmNlKCdAZW5naW5lUmVzb3VyY2VQYXRoL2RjZS5tb2JpbGUtbmF0aXZlLnVpLmh0bWwnKTtcblxuICAgICAgICAgICAgICAgIGRjZS5jdXJyZW50ID0gYXdhaXQgKGNhbWVyYUVuaGFuY2VyLmN1cnJlbnQgPSBDYW1lcmFFbmhhbmNlci5jcmVhdGVJbnN0YW5jZSh2aWV3LmN1cnJlbnQpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBkY2UuY3VycmVudC5vbihcImNhbWVyYU9wZW5cIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgd2lkdGg6YW55ID0gZGNlLmN1cnJlbnQ/LnZpZGVvLnZpZGVvV2lkdGhcbiAgICAgICAgICAgICAgICAgICAgbGV0IGhlaWdodDogYW55ID0gZGNlLmN1cnJlbnQ/LnZpZGVvLnZpZGVvSGVpZ2h0XG4gICAgICAgICAgICAgICAgICAgIGxldCBzaWRlTGVuOiBhbnkgPSBNYXRoLm1pbihoZWlnaHQpKjAuNlxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJlY2VudFcgPSBNYXRoLnJvdW5kKHNpZGVMZW4vd2lkdGgqMTAwKVxuICAgICAgICAgICAgICAgICAgICBsZXQgcHJlY2VudEggPSBNYXRoLnJvdW5kKHNpZGVMZW4vaGVpZ2h0KjEwMCk7XG4gICAgICAgICAgICAgICAgICAgIHNjYW5SZWdpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBwcmVjZW50VyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHByZWNlbnRXLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHByZWNlbnRXLFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBwcmVjZW50SCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTWVhc3VyZWRJblBlcmNlbnRhZ2U6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgZGNlLmN1cnJlbnQ/LnNldFNjYW5SZWdpb24oc2NhblJlZ2lvbik7IFxuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLy4uLlxuICAgICAgICAgICAgICAgIGltYWdlRWRpdG9yVmlldy5jdXJyZW50ID0gYXdhaXQgSW1hZ2VFZGl0b3JWaWV3LmNyZWF0ZUluc3RhbmNlKGltYWdlRWRpdG9yVmlld0NvbnRhaW5lclJlZi5jdXJyZW50IGFzIEhUTUxEaXZFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAvKiBDcmVhdGVzIGFuIGltYWdlIGVkaXRpbmcgbGF5ZXIgZm9yIGRyYXdpbmcgZm91bmQgZG9jdW1lbnQgYm91bmRhcmllcy4gKi9cbiAgICAgICAgICAgICAgICBsYXllci5jdXJyZW50ID0gaW1hZ2VFZGl0b3JWaWV3LmN1cnJlbnQuY3JlYXRlRHJhd2luZ0xheWVyKCk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBDcmVhdGVzIGEgQ2FwdHVyZVZpc2lvblJvdXRlciBpbnN0YW5jZSBhbmQgY29uZmlndXJlIHRoZSB0YXNrIHRvIGRldGVjdCBkb2N1bWVudCBib3VuZGFyaWVzLlxuICAgICAgICAgICAgICAgICAqIEFsc28sIG1ha2Ugc3VyZSB0aGUgb3JpZ2luYWwgaW1hZ2UgaXMgcmV0dXJuZWQgYWZ0ZXIgaXQgaGFzIGJlZW4gcHJvY2Vzc2VkLlxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZXIuY3VycmVudCA9IGF3YWl0IChyb3V0ZXIuY3VycmVudCA9IENhcHR1cmVWaXNpb25Sb3V0ZXIuY3JlYXRlSW5zdGFuY2UoKSk7XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplci5jdXJyZW50LnNldElucHV0KGRjZS5jdXJyZW50KTtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZXRzIHRoZSByZXN1bHQgdHlwZXMgdG8gYmUgcmV0dXJuZWQuXG4gICAgICAgICAgICAgICAgICogQmVjYXVzZSB3ZSBuZWVkIHRvIG5vcm1hbGl6ZSB0aGUgb3JpZ2luYWwgaW1hZ2UgbGF0ZXIsIGhlcmUgd2Ugc2V0IHRoZSByZXR1cm4gcmVzdWx0IHR5cGUgdG9cbiAgICAgICAgICAgICAgICAgKiBpbmNsdWRlIGJvdGggdGhlIHF1YWRyaWxhdGVyYWwgYW5kIG9yaWdpbmFsIGltYWdlIGRhdGEuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgbGV0IG5ld1NldHRpbmdzID0gYXdhaXQgbm9ybWFsaXplci5jdXJyZW50LmdldFNpbXBsaWZpZWRTZXR0aW5ncyhcIkRldGVjdERvY3VtZW50Qm91bmRhcmllc19EZWZhdWx0XCIpO1xuICAgICAgICAgICAgICAgIG5ld1NldHRpbmdzLmNhcHR1cmVkUmVzdWx0SXRlbVR5cGVzIHw9IEVudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfT1JJR0lOQUxfSU1BR0U7XG4gICAgICAgICAgICAgICAgYXdhaXQgbm9ybWFsaXplci5jdXJyZW50LnVwZGF0ZVNldHRpbmdzKFwiRGV0ZWN0RG9jdW1lbnRCb3VuZGFyaWVzX0RlZmF1bHRcIiwgbmV3U2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgIGNhbWVyYVZpZXdDb250YWluZXJSZWYuY3VycmVudCEuYXBwZW5kKHZpZXcuY3VycmVudC5nZXRVSUVsZW1lbnQoKSk7XG5cbiAgICAgICAgICAgICAgICAvKiBEZWZpbmVzIHRoZSByZXN1bHQgcmVjZWl2ZXIgZm9yIHRoZSB0YXNrLiovXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0UmVjZWl2ZXIgPSBuZXcgQ2FwdHVyZWRSZXN1bHRSZWNlaXZlcigpO1xuICAgICAgICAgICAgICAgIHJlc3VsdFJlY2VpdmVyLm9uQ2FwdHVyZWRSZXN1bHRSZWNlaXZlZCA9IChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxJbWFnZSA9IHJlc3VsdC5pdGVtcy5maWx0ZXIoKGl0ZW06IENhcHR1cmVkUmVzdWx0SXRlbSkgPT4geyByZXR1cm4gaXRlbS50eXBlID09PSBFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX09SSUdJTkFMX0lNQUdFIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3JpZ2luYWxJbWFnZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLmN1cnJlbnQgPSAob3JpZ2luYWxJbWFnZVswXSBhcyBPcmlnaW5hbEltYWdlUmVzdWx0SXRlbSkuaW1hZ2VEYXRhO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLmN1cnJlbnQgPSByZXN1bHQuaXRlbXMuZmlsdGVyKChpdGVtOiBDYXB0dXJlZFJlc3VsdEl0ZW0pID0+IHsgcmV0dXJuIGl0ZW0udHlwZSA9PT0gRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUuQ1JJVF9ERVRFQ1RFRF9RVUFEIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBub3JtYWxpemVyLmN1cnJlbnQuYWRkUmVzdWx0UmVjZWl2ZXIocmVzdWx0UmVjZWl2ZXIpO1xuXG4gICAgICAgICAgICAgICAgYXdhaXQgZGNlLmN1cnJlbnQub3BlbigpO1xuICAgICAgICAgICAgICAgIC8qIFVzZXMgdGhlIGJ1aWx0LWluIHRlbXBsYXRlIFwiRGV0ZWN0RG9jdW1lbnRCb3VuZGFyaWVzX0RlZmF1bHRcIiB0byBzdGFydCBhIGNvbnRpbnVvdXMgYm91bmRhcnkgZGV0ZWN0aW9uIHRhc2suICovXG4gICAgICAgICAgICAgICAgYXdhaXQgbm9ybWFsaXplci5jdXJyZW50LnN0YXJ0Q2FwdHVyaW5nKFwiRGV0ZWN0RG9jdW1lbnRCb3VuZGFyaWVzX0RlZmF1bHRcIik7XG4gICAgICAgICAgICAgICAgc2V0U2hvd0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXg6IGFueSkge1xuICAgICAgICAgICAgICAgIGxldCBlcnJNc2cgPSBleC5tZXNzYWdlIHx8IGV4O1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyTXNnKTtcbiAgICAgICAgICAgICAgICBhbGVydChlcnJNc2cpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGluaXQoKTtcblxuICAgICAgICByZXR1cm4gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgKGF3YWl0IHJvdXRlci5jdXJyZW50KT8uZGlzcG9zZSgpO1xuICAgICAgICAgICAgKGF3YWl0IGNhbWVyYUVuaGFuY2VyLmN1cnJlbnQpPy5kaXNwb3NlKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVmlkZW9Ob3JtYWxpemVyIENvbXBvbmVudCBVbm1vdW50Jyk7XG4gICAgICAgIH1cbiAgICB9LCBbXSk7XG5cbiAgICBjb25zdCBjb25maXJtVGhlQm91bmRhcnkgPSAoKSA9PiB7XG4gICAgICAgIGlmICghZGNlLmN1cnJlbnQhLmlzT3BlbigpIHx8ICFpdGVtcy5jdXJyZW50Lmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICAvKiBIaWRlcyB0aGUgY2FtZXJhVmlldyBhbmQgc2hvd3MgdGhlIGltYWdlRWRpdG9yVmlldy4gKi9cbiAgICAgICAgc2V0U2hvd1VpQ29udGFpbmVyKGZhbHNlKTtcbiAgICAgICAgc2V0U2hvd0ltYWdlQ29udGFpbmVyKHRydWUpO1xuICAgICAgICAvKiBEcmF3cyB0aGUgaW1hZ2Ugb24gdGhlIGltYWdlRWRpdG9yVmlldyBmaXJzdC4gKi9cbiAgICAgICAgaW1hZ2VFZGl0b3JWaWV3LmN1cnJlbnQhLnNldE9yaWdpbmFsSW1hZ2UoaW1hZ2UuY3VycmVudCEpO1xuICAgICAgICBxdWFkcyA9IFtdO1xuICAgICAgICAvKiBEcmF3cyB0aGUgZG9jdW1lbnQgYm91bmRhcnkgKHF1YWQpIG92ZXIgdGhlIGltYWdlLiAqL1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmN1cnJlbnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpdGVtcy5jdXJyZW50W2ldLnR5cGUgPT09IEVudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfT1JJR0lOQUxfSU1BR0UpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgcG9pbnRzID0gaXRlbXMuY3VycmVudFtpXS5sb2NhdGlvbi5wb2ludHM7XG4gICAgICAgICAgICBjb25zdCBxdWFkID0gbmV3IFF1YWREcmF3aW5nSXRlbSh7IHBvaW50cyB9KTtcbiAgICAgICAgICAgIHF1YWRzLnB1c2gocXVhZCk7XG4gICAgICAgICAgICBsYXllci5jdXJyZW50IS5hZGREcmF3aW5nSXRlbXMocXVhZHMpO1xuICAgICAgICB9XG4gICAgICAgIHNldERpc2FibGVkQnRuRWRpdCh0cnVlKTtcbiAgICAgICAgc2V0RGlzYWJsZWRCdG5Ob3IoZmFsc2UpO1xuICAgICAgICBub3JtYWxpemVyLmN1cnJlbnQhLnN0b3BDYXB0dXJpbmcoKTtcbiAgICB9XG5cbiAgICBjb25zdCBub3JtYWxpemUgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIC8qIEdldCB0aGUgc2VsZWN0ZWQgcXVhZHJpbGF0ZXJhbCAqL1xuICAgICAgICBsZXQgc2VsZXRlZEl0ZW1zID0gaW1hZ2VFZGl0b3JWaWV3LmN1cnJlbnQhLmdldFNlbGVjdGVkRHJhd2luZ0l0ZW1zKCk7XG4gICAgICAgIGxldCBxdWFkO1xuICAgICAgICBpZiAoc2VsZXRlZEl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgcXVhZCA9IChzZWxldGVkSXRlbXNbMF0gYXMgUXVhZERyYXdpbmdJdGVtKS5nZXRRdWFkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBxdWFkID0gaXRlbXMuY3VycmVudFswXS5sb2NhdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc1BvaW50T3ZlckJvdW5kYXJ5ID0gKHBvaW50OiBQb2ludCkgPT4ge1xuICAgICAgICAgICAgaWYocG9pbnQueCA8IDAgfHwgXG4gICAgICAgICAgICBwb2ludC54ID4gaW1hZ2UuY3VycmVudCEud2lkdGggfHwgXG4gICAgICAgICAgICBwb2ludC55IDwgMCB8fFxuICAgICAgICAgICAgcG9pbnQueSA+IGltYWdlLmN1cnJlbnQhLmhlaWdodCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8qIENoZWNrIGlmIHRoZSBwb2ludHMgYmV5b25kIHRoZSBib3VuZGFyaWVzIG9mIHRoZSBpbWFnZS4gKi9cbiAgICAgICAgaWYgKHF1YWQucG9pbnRzLnNvbWUoKHBvaW50OiBQb2ludCkgPT4gaXNQb2ludE92ZXJCb3VuZGFyeShwb2ludCkpKSB7XG4gICAgICAgICAgICBhbGVydChcIlRoZSBkb2N1bWVudCBib3VuZGFyaWVzIGV4dGVuZCBiZXlvbmQgdGhlIGJvdW5kYXJpZXMgb2YgdGhlIGltYWdlIGFuZCBjYW5ub3QgYmUgdXNlZCB0byBub3JtYWxpemUgdGhlIGRvY3VtZW50LlwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qIEhpZGVzIHRoZSBpbWFnZUVkaXRvclZpZXcuICovXG4gICAgICAgIHNldFNob3dJbWFnZUNvbnRhaW5lcihmYWxzZSk7XG4gICAgICAgIC8qIFJlbW92ZXMgdGhlIG9sZCBub3JtYWxpemVkIGltYWdlIGlmIGFueS4gKi9cbiAgICAgICAgbm9ybWFsaXplZEltYWdlQ29udGFpbmVyLmN1cnJlbnQhLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBjb29yZGluYXRlcyBvZiB0aGUgUk9JIChyZWdpb24gb2YgaW50ZXJlc3QpXG4gICAgICAgICAqIGluIHRoZSBidWlsdC1pbiB0ZW1wbGF0ZSBcIm5vcm1hbGl6ZS1kb2N1bWVudFwiLlxuICAgICAgICAgKi9cbiAgICAgICAgbGV0IG5ld1NldHRpbmdzID0gYXdhaXQgbm9ybWFsaXplci5jdXJyZW50IS5nZXRTaW1wbGlmaWVkU2V0dGluZ3MoXCJub3JtYWxpemUtZG9jdW1lbnRcIikgYXMgU2ltcGxpZmllZENhcHR1cmVWaXNpb25TZXR0aW5ncztcbiAgICAgICAgbmV3U2V0dGluZ3Mucm9pTWVhc3VyZWRJblBlcmNlbnRhZ2UgPSBmYWxzZTtcbiAgICAgICAgbmV3U2V0dGluZ3Mucm9pLnBvaW50cyA9IHF1YWQucG9pbnRzO1xuICAgICAgICBhd2FpdCBub3JtYWxpemVyLmN1cnJlbnQhLnVwZGF0ZVNldHRpbmdzKFwibm9ybWFsaXplLWRvY3VtZW50XCIsIG5ld1NldHRpbmdzKTtcbiAgICAgICAgLyogRXhlY3V0ZXMgdGhlIG5vcm1hbGl6YXRpb24gYW5kIHNob3dzIHRoZSByZXN1bHQgb24gdGhlIHBhZ2UgKi9cbiAgICAgICAgbGV0IG5vclJlcyA9IGF3YWl0IG5vcm1hbGl6ZXIuY3VycmVudCEuY2FwdHVyZShpbWFnZS5jdXJyZW50ISwgXCJub3JtYWxpemUtZG9jdW1lbnRcIik7XG4gICAgICAgIGlmIChub3JSZXMuaXRlbXNbMF0pIHtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRJbWFnZUNvbnRhaW5lci5jdXJyZW50IS5hcHBlbmQoKG5vclJlcy5pdGVtc1swXSBhcyBOb3JtYWxpemVkSW1hZ2VSZXN1bHRJdGVtKS50b0NhbnZhcygpKTtcbiAgICAgICAgfVxuICAgICAgICBsYXllci5jdXJyZW50IS5jbGVhckRyYXdpbmdJdGVtcygpO1xuICAgICAgICBzZXREaXNhYmxlZEJ0bkVkaXQoZmFsc2UpO1xuICAgICAgICBzZXREaXNhYmxlZEJ0bk5vcih0cnVlKTtcbiAgICAgICAgLyogc2hvdyB2aWRlbyB2aWV3ICovXG4gICAgICAgIHNldFNob3dVaUNvbnRhaW5lcih0cnVlKTtcbiAgICAgICAgdmlldy5jdXJyZW50IS5nZXRVSUVsZW1lbnQoKS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcbiAgICAgICAgYXdhaXQgbm9ybWFsaXplci5jdXJyZW50IS5zdGFydENhcHR1cmluZyhcIkRldGVjdERvY3VtZW50Qm91bmRhcmllc19EZWZhdWx0XCIpO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8ZGl2IGlkPVwiZGl2LWxvYWRpbmdcIiBzdHlsZT17eyBkaXNwbGF5OiBiU2hvd0xvYWRpbmcgPyBcImJsb2NrXCIgOiBcIm5vbmVcIiB9fT5Mb2FkaW5nLi4uPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGlkPVwiZGl2LXZpZGVvLWJ0bnNcIj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwiY29uZmlybS1xdWFkLWZvci1ub3JtYWxpemF0aW9uXCIgb25DbGljaz17Y29uZmlybVRoZUJvdW5kYXJ5fSBkaXNhYmxlZD17YkRpc2FibGVkQnRuRWRpdH0+Q29uZmlybSB0aGUgQm91bmRhcnk8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwibm9ybWFsaXplLXdpdGgtY29uZmlybWVkLXF1YWRcIiBvbkNsaWNrPXtub3JtYWxpemV9IGRpc2FibGVkPXtiRGlzYWJsZWRCdG5Ob3J9Pk5vcm1hbGl6ZTwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXYgPlxuICAgICAgICAgICAgPGRpdiBpZD1cImRpdi11aS1jb250YWluZXJcIiBzdHlsZT17eyBkaXNwbGF5OiBiU2hvd1VpQ29udGFpbmVyID8gXCJibG9ja1wiIDogXCJub25lXCIsIG1hcmdpblRvcDogXCIxMHB4XCIsIGhlaWdodDogXCI1MDBweFwiIH19IHJlZj17Y2FtZXJhVmlld0NvbnRhaW5lclJlZn0+PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGlkPVwiZGl2LWltYWdlLWNvbnRhaW5lclwiIHN0eWxlPXt7IGRpc3BsYXk6IGJTaG93SW1hZ2VDb250YWluZXIgPyBcImJsb2NrXCIgOiBcIm5vbmVcIiwgd2lkdGg6IFwiMTAwdndcIiwgaGVpZ2h0OiBcIjcwdmhcIiB9fSByZWY9e2ltYWdlRWRpdG9yVmlld0NvbnRhaW5lclJlZn0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkY2UtaW1hZ2UtY29udGFpbmVyXCIgc3R5bGU9e3sgd2lkdGg6IFwiMTAwJVwiLCBoZWlnaHQ6IFwiMTAwJVwiIH19PjwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGlkPVwibm9ybWFsaXplZC1yZXN1bHRcIiByZWY9e25vcm1hbGl6ZWRJbWFnZUNvbnRhaW5lcn0+PC9kaXY+XG4gICAgICAgIDwvZGl2ID5cbiAgICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBWaWRlb05vcm1hbGl6ZXI7Il0sIm5hbWVzIjpbInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwiRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUiLCJDYW1lcmFFbmhhbmNlciIsIkNhbWVyYVZpZXciLCJRdWFkRHJhd2luZ0l0ZW0iLCJJbWFnZUVkaXRvclZpZXciLCJDYXB0dXJlZFJlc3VsdFJlY2VpdmVyIiwiQ2FwdHVyZVZpc2lvblJvdXRlciIsIlZpZGVvTm9ybWFsaXplciIsImN2Um91dGVyIiwiaW1hZ2VFZGl0b3JWaWV3Q29udGFpbmVyUmVmIiwiY2FtZXJhVmlld0NvbnRhaW5lclJlZiIsIm5vcm1hbGl6ZWRJbWFnZUNvbnRhaW5lciIsImNhbWVyYUVuaGFuY2VyIiwicm91dGVyIiwiYlNob3dVaUNvbnRhaW5lciIsInNldFNob3dVaUNvbnRhaW5lciIsImJTaG93SW1hZ2VDb250YWluZXIiLCJzZXRTaG93SW1hZ2VDb250YWluZXIiLCJiRGlzYWJsZWRCdG5FZGl0Iiwic2V0RGlzYWJsZWRCdG5FZGl0IiwiYkRpc2FibGVkQnRuTm9yIiwic2V0RGlzYWJsZWRCdG5Ob3IiLCJiU2hvd0xvYWRpbmciLCJzZXRTaG93TG9hZGluZyIsIm5vcm1hbGl6ZXIiLCJkY2UiLCJpbWFnZUVkaXRvclZpZXciLCJsYXllciIsInZpZXciLCJpdGVtcyIsImltYWdlIiwicXVhZHMiLCJzY2FuUmVnaW9uIiwiaW5pdCIsImN1cnJlbnQiLCJjcmVhdGVJbnN0YW5jZSIsIm9uIiwid2lkdGgiLCJ2aWRlbyIsInZpZGVvV2lkdGgiLCJoZWlnaHQiLCJ2aWRlb0hlaWdodCIsInNpZGVMZW4iLCJNYXRoIiwibWluIiwicHJlY2VudFciLCJyb3VuZCIsInByZWNlbnRIIiwieCIsInkiLCJpc01lYXN1cmVkSW5QZXJjZW50YWdlIiwic2V0U2NhblJlZ2lvbiIsImNyZWF0ZURyYXdpbmdMYXllciIsInNldElucHV0IiwibmV3U2V0dGluZ3MiLCJnZXRTaW1wbGlmaWVkU2V0dGluZ3MiLCJjYXB0dXJlZFJlc3VsdEl0ZW1UeXBlcyIsIkNSSVRfT1JJR0lOQUxfSU1BR0UiLCJ1cGRhdGVTZXR0aW5ncyIsImFwcGVuZCIsImdldFVJRWxlbWVudCIsInJlc3VsdFJlY2VpdmVyIiwib25DYXB0dXJlZFJlc3VsdFJlY2VpdmVkIiwicmVzdWx0Iiwib3JpZ2luYWxJbWFnZSIsImZpbHRlciIsIml0ZW0iLCJ0eXBlIiwibGVuZ3RoIiwiaW1hZ2VEYXRhIiwiQ1JJVF9ERVRFQ1RFRF9RVUFEIiwiYWRkUmVzdWx0UmVjZWl2ZXIiLCJvcGVuIiwic3RhcnRDYXB0dXJpbmciLCJleCIsImVyck1zZyIsIm1lc3NhZ2UiLCJjb25zb2xlIiwiZXJyb3IiLCJhbGVydCIsImRpc3Bvc2UiLCJsb2ciLCJjb25maXJtVGhlQm91bmRhcnkiLCJpc09wZW4iLCJzZXRPcmlnaW5hbEltYWdlIiwiaSIsInBvaW50cyIsImxvY2F0aW9uIiwicXVhZCIsInB1c2giLCJhZGREcmF3aW5nSXRlbXMiLCJzdG9wQ2FwdHVyaW5nIiwibm9ybWFsaXplIiwic2VsZXRlZEl0ZW1zIiwiZ2V0U2VsZWN0ZWREcmF3aW5nSXRlbXMiLCJnZXRRdWFkIiwiaXNQb2ludE92ZXJCb3VuZGFyeSIsInBvaW50Iiwic29tZSIsImlubmVySFRNTCIsInJvaU1lYXN1cmVkSW5QZXJjZW50YWdlIiwicm9pIiwibm9yUmVzIiwiY2FwdHVyZSIsInRvQ2FudmFzIiwiY2xlYXJEcmF3aW5nSXRlbXMiLCJzdHlsZSIsImRpc3BsYXkiLCJkaXYiLCJjbGFzc05hbWUiLCJpZCIsImJ1dHRvbiIsIm9uQ2xpY2siLCJkaXNhYmxlZCIsIm1hcmdpblRvcCIsInJlZiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/VideoCapture/VideoCapture.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./dynamsoft.config.ts":
/*!*****************************!*\
  !*** ./dynamsoft.config.ts ***!
  \*****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var dynamsoft_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! dynamsoft-core */ \"(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js\");\n/* harmony import */ var dynamsoft_license__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dynamsoft-license */ \"(app-pages-browser)/./node_modules/dynamsoft-license/dist/license.esm.js\");\n/* harmony import */ var dynamsoft_barcode_reader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dynamsoft-barcode-reader */ \"(app-pages-browser)/./node_modules/dynamsoft-barcode-reader/dist/dbr.esm.js\");\n/* harmony import */ var dynamsoft_document_normalizer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dynamsoft-document-normalizer */ \"(app-pages-browser)/./node_modules/dynamsoft-document-normalizer/dist/ddn.esm.js\");\n/* harmony import */ var dynamsoft_capture_vision_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! dynamsoft-capture-vision-router */ \"(app-pages-browser)/./node_modules/dynamsoft-capture-vision-router/dist/cvr.esm.js\");\n\n\n\n\n\n\n// Configures the paths where the .wasm files and other necessary resources for modules are located.\ndynamsoft_core__WEBPACK_IMPORTED_MODULE_4__.CoreModule.engineResourcePaths.rootDirectory = \"https://cdn.jsdelivr.net/npm/\";\n/** LICENSE ALERT - README\n * To use the library, you need to first specify a license key using the API \"initLicense()\" as shown below.\n */ dynamsoft_license__WEBPACK_IMPORTED_MODULE_0__.LicenseManager.initLicense(\"DLS2eyJvcmdhbml6YXRpb25JRCI6IjIwMDAwMSJ9\");\n/**\n * You can visit https://www.dynamsoft.com/customer/license/trialLicense?utm_source=samples&product=dbr&package=js to get your own trial license good for 30 days.\n * Note that if you downloaded this sample from Dynamsoft while logged in, the above license key may already be your own 30-day trial license.\n * For more information, see https://www.dynamsoft.com/barcode-reader/docs/web/programming/javascript/user-guide/index.html?ver=10.4.2001&cVer=true#specify-the-license&utm_source=samples or contact support@dynamsoft.com.\n * LICENSE ALERT - THE END\n */ // Optional. Preload \"BarcodeReader\" module for reading barcodes. It will save time on the initial decoding by skipping the module loading.\ndynamsoft_core__WEBPACK_IMPORTED_MODULE_4__.CoreModule.loadWasm([\n    \"DDN\"\n]);\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2R5bmFtc29mdC5jb25maWcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRDO0FBQ087QUFDakI7QUFDUDtBQUNZO0FBQ0U7QUFFekMsb0dBQW9HO0FBQ3BHQSxzREFBVUEsQ0FBQ0UsbUJBQW1CLENBQUNDLGFBQWEsR0FBRztBQUUvQzs7Q0FFQyxHQUVERiw2REFBY0EsQ0FBQ0csV0FBVyxDQUFDO0FBRTNCOzs7OztDQUtDLEdBRUQsMklBQTJJO0FBQzNJSixzREFBVUEsQ0FBQ0ssUUFBUSxDQUFDO0lBQUM7Q0FBTSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9keW5hbXNvZnQuY29uZmlnLnRzP2ViODEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29yZU1vZHVsZSB9IGZyb20gXCJkeW5hbXNvZnQtY29yZVwiO1xuaW1wb3J0IHsgTGljZW5zZU1hbmFnZXIgfSBmcm9tIFwiZHluYW1zb2Z0LWxpY2Vuc2VcIjtcbmltcG9ydCBcImR5bmFtc29mdC1iYXJjb2RlLXJlYWRlclwiO1xuaW1wb3J0IFwiZHluYW1zb2Z0LWxpY2Vuc2VcIjtcbmltcG9ydCBcImR5bmFtc29mdC1kb2N1bWVudC1ub3JtYWxpemVyXCI7XG5pbXBvcnQgXCJkeW5hbXNvZnQtY2FwdHVyZS12aXNpb24tcm91dGVyXCI7XG5cbi8vIENvbmZpZ3VyZXMgdGhlIHBhdGhzIHdoZXJlIHRoZSAud2FzbSBmaWxlcyBhbmQgb3RoZXIgbmVjZXNzYXJ5IHJlc291cmNlcyBmb3IgbW9kdWxlcyBhcmUgbG9jYXRlZC5cbkNvcmVNb2R1bGUuZW5naW5lUmVzb3VyY2VQYXRocy5yb290RGlyZWN0b3J5ID0gXCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL1wiO1xuXG4vKiogTElDRU5TRSBBTEVSVCAtIFJFQURNRVxuICogVG8gdXNlIHRoZSBsaWJyYXJ5LCB5b3UgbmVlZCB0byBmaXJzdCBzcGVjaWZ5IGEgbGljZW5zZSBrZXkgdXNpbmcgdGhlIEFQSSBcImluaXRMaWNlbnNlKClcIiBhcyBzaG93biBiZWxvdy5cbiAqL1xuXG5MaWNlbnNlTWFuYWdlci5pbml0TGljZW5zZShcIkRMUzJleUp2Y21kaGJtbDZZWFJwYjI1SlJDSTZJakl3TURBd01TSjlcIik7XG5cbi8qKlxuICogWW91IGNhbiB2aXNpdCBodHRwczovL3d3dy5keW5hbXNvZnQuY29tL2N1c3RvbWVyL2xpY2Vuc2UvdHJpYWxMaWNlbnNlP3V0bV9zb3VyY2U9c2FtcGxlcyZwcm9kdWN0PWRiciZwYWNrYWdlPWpzIHRvIGdldCB5b3VyIG93biB0cmlhbCBsaWNlbnNlIGdvb2QgZm9yIDMwIGRheXMuXG4gKiBOb3RlIHRoYXQgaWYgeW91IGRvd25sb2FkZWQgdGhpcyBzYW1wbGUgZnJvbSBEeW5hbXNvZnQgd2hpbGUgbG9nZ2VkIGluLCB0aGUgYWJvdmUgbGljZW5zZSBrZXkgbWF5IGFscmVhZHkgYmUgeW91ciBvd24gMzAtZGF5IHRyaWFsIGxpY2Vuc2UuXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIGh0dHBzOi8vd3d3LmR5bmFtc29mdC5jb20vYmFyY29kZS1yZWFkZXIvZG9jcy93ZWIvcHJvZ3JhbW1pbmcvamF2YXNjcmlwdC91c2VyLWd1aWRlL2luZGV4Lmh0bWw/dmVyPTEwLjQuMjAwMSZjVmVyPXRydWUjc3BlY2lmeS10aGUtbGljZW5zZSZ1dG1fc291cmNlPXNhbXBsZXMgb3IgY29udGFjdCBzdXBwb3J0QGR5bmFtc29mdC5jb20uXG4gKiBMSUNFTlNFIEFMRVJUIC0gVEhFIEVORFxuICovXG5cbi8vIE9wdGlvbmFsLiBQcmVsb2FkIFwiQmFyY29kZVJlYWRlclwiIG1vZHVsZSBmb3IgcmVhZGluZyBiYXJjb2Rlcy4gSXQgd2lsbCBzYXZlIHRpbWUgb24gdGhlIGluaXRpYWwgZGVjb2RpbmcgYnkgc2tpcHBpbmcgdGhlIG1vZHVsZSBsb2FkaW5nLlxuQ29yZU1vZHVsZS5sb2FkV2FzbShbXCJERE5cIl0pO1xuIl0sIm5hbWVzIjpbIkNvcmVNb2R1bGUiLCJMaWNlbnNlTWFuYWdlciIsImVuZ2luZVJlc291cmNlUGF0aHMiLCJyb290RGlyZWN0b3J5IiwiaW5pdExpY2Vuc2UiLCJsb2FkV2FzbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./dynamsoft.config.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/dynamsoft-barcode-reader/dist/dbr.esm.js":
/*!***************************************************************!*\
  !*** ./node_modules/dynamsoft-barcode-reader/dist/dbr.esm.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BarcodeReaderModule: function() { return /* binding */ O; },\n/* harmony export */   EnumBarcodeFormat: function() { return /* binding */ i; },\n/* harmony export */   EnumDeblurMode: function() { return /* binding */ L; },\n/* harmony export */   EnumExtendedBarcodeResultType: function() { return /* binding */ C; },\n/* harmony export */   EnumLocalizationMode: function() { return /* binding */ N; },\n/* harmony export */   EnumQRCodeErrorCorrectionLevel: function() { return /* binding */ S; }\n/* harmony export */ });\n/* harmony import */ var dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dynamsoft-core */ \"(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js\");\n/*!\n* Dynamsoft JavaScript Library\n* @product Dynamsoft Barcode Reader JS Edition\n* @website http://www.dynamsoft.com\n* @copyright Copyright 2024, Dynamsoft Corporation\n* @author Dynamsoft\n* @version 10.4.20\n* @fileoverview Dynamsoft JavaScript Library for Barcode Reader\n* More info on dbr JS: https://www.dynamsoft.com/barcode-reader/docs/web/programming/javascript/\n*/\nconst R=\"undefined\"==typeof self,T=(()=>{if(!R&&document.currentScript){let _=document.currentScript.src,I=_.indexOf(\"?\");if(-1!=I)_=_.substring(0,I);else{let I=_.indexOf(\"#\");-1!=I&&(_=_.substring(0,I))}return _.substring(0,_.lastIndexOf(\"/\")+1)}return\"./\"})(),t=_=>{if(null==_&&(_=\"./\"),R);else{let I=document.createElement(\"a\");I.href=_,_=I.href}return _.endsWith(\"/\")||(_+=\"/\"),_};dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dbr={version:\"10.4.20\",path:T},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.workerAutoResources.dbr={js:!1,wasm:!0,deps:[\"license\",\"dip\"]},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.dbr={};const D=\"1.4.10\";\"string\"!=typeof dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std&&(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.compareVersion)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std.version,D)<0&&(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std={version:D,path:t(T+`../../dynamsoft-capture-vision-std@${D}/dist/`)});const n=\"2.4.20\";(!dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip||\"string\"!=typeof dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip&&(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.compareVersion)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip.version,n)<0)&&(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip={version:n,path:t(T+`../../dynamsoft-image-processing@${n}/dist/`)});class O{static getVersion(){const _=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.dbr&&dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.dbr.wasm,I=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.dbr&&dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.dbr.worker;return`10.4.20(Worker: ${I||\"Not Loaded\"}, Wasm: ${_||\"Not Loaded\"})`}}const i={BF_NULL:BigInt(0),BF_ALL:BigInt(\"0xFFFFFFFEFFFFFFFF\"),BF_DEFAULT:BigInt(4265345023),BF_ONED:BigInt(3147775),BF_GS1_DATABAR:BigInt(260096),BF_CODE_39:BigInt(1),BF_CODE_128:BigInt(2),BF_CODE_93:BigInt(4),BF_CODABAR:BigInt(8),BF_ITF:BigInt(16),BF_EAN_13:BigInt(32),BF_EAN_8:BigInt(64),BF_UPC_A:BigInt(128),BF_UPC_E:BigInt(256),BF_INDUSTRIAL_25:BigInt(512),BF_CODE_39_EXTENDED:BigInt(1024),BF_GS1_DATABAR_OMNIDIRECTIONAL:BigInt(2048),BF_GS1_DATABAR_TRUNCATED:BigInt(4096),BF_GS1_DATABAR_STACKED:BigInt(8192),BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL:BigInt(16384),BF_GS1_DATABAR_EXPANDED:BigInt(32768),BF_GS1_DATABAR_EXPANDED_STACKED:BigInt(65536),BF_GS1_DATABAR_LIMITED:BigInt(131072),BF_PATCHCODE:BigInt(262144),BF_CODE_32:BigInt(16777216),BF_PDF417:BigInt(33554432),BF_QR_CODE:BigInt(67108864),BF_DATAMATRIX:BigInt(134217728),BF_AZTEC:BigInt(268435456),BF_MAXICODE:BigInt(536870912),BF_MICRO_QR:BigInt(1073741824),BF_MICRO_PDF417:BigInt(524288),BF_GS1_COMPOSITE:BigInt(2147483648),BF_MSI_CODE:BigInt(1048576),BF_CODE_11:BigInt(2097152),BF_TWO_DIGIT_ADD_ON:BigInt(4194304),BF_FIVE_DIGIT_ADD_ON:BigInt(8388608),BF_MATRIX_25:BigInt(68719476736),BF_POSTALCODE:BigInt(0x3f0000000000000),BF_NONSTANDARD_BARCODE:BigInt(4294967296),BF_USPSINTELLIGENTMAIL:BigInt(4503599627370496),BF_POSTNET:BigInt(9007199254740992),BF_PLANET:BigInt(0x40000000000000),BF_AUSTRALIANPOST:BigInt(0x80000000000000),BF_RM4SCC:BigInt(72057594037927940),BF_KIX:BigInt(0x200000000000000),BF_DOTCODE:BigInt(8589934592),BF_PHARMACODE_ONE_TRACK:BigInt(17179869184),BF_PHARMACODE_TWO_TRACK:BigInt(34359738368),BF_PHARMACODE:BigInt(51539607552)};var C,S,N,L;!function(_){_[_.EBRT_STANDARD_RESULT=0]=\"EBRT_STANDARD_RESULT\",_[_.EBRT_CANDIDATE_RESULT=1]=\"EBRT_CANDIDATE_RESULT\",_[_.EBRT_PARTIAL_RESULT=2]=\"EBRT_PARTIAL_RESULT\"}(C||(C={})),function(_){_[_.QRECL_ERROR_CORRECTION_H=0]=\"QRECL_ERROR_CORRECTION_H\",_[_.QRECL_ERROR_CORRECTION_L=1]=\"QRECL_ERROR_CORRECTION_L\",_[_.QRECL_ERROR_CORRECTION_M=2]=\"QRECL_ERROR_CORRECTION_M\",_[_.QRECL_ERROR_CORRECTION_Q=3]=\"QRECL_ERROR_CORRECTION_Q\"}(S||(S={})),function(_){_[_.LM_AUTO=1]=\"LM_AUTO\",_[_.LM_CONNECTED_BLOCKS=2]=\"LM_CONNECTED_BLOCKS\",_[_.LM_STATISTICS=4]=\"LM_STATISTICS\",_[_.LM_LINES=8]=\"LM_LINES\",_[_.LM_SCAN_DIRECTLY=16]=\"LM_SCAN_DIRECTLY\",_[_.LM_STATISTICS_MARKS=32]=\"LM_STATISTICS_MARKS\",_[_.LM_STATISTICS_POSTAL_CODE=64]=\"LM_STATISTICS_POSTAL_CODE\",_[_.LM_CENTRE=128]=\"LM_CENTRE\",_[_.LM_ONED_FAST_SCAN=256]=\"LM_ONED_FAST_SCAN\",_[_.LM_REV=-2147483648]=\"LM_REV\",_[_.LM_SKIP=0]=\"LM_SKIP\"}(N||(N={})),function(_){_[_.DM_DIRECT_BINARIZATION=1]=\"DM_DIRECT_BINARIZATION\",_[_.DM_THRESHOLD_BINARIZATION=2]=\"DM_THRESHOLD_BINARIZATION\",_[_.DM_GRAY_EQUALIZATION=4]=\"DM_GRAY_EQUALIZATION\",_[_.DM_SMOOTHING=8]=\"DM_SMOOTHING\",_[_.DM_MORPHING=16]=\"DM_MORPHING\",_[_.DM_DEEP_ANALYSIS=32]=\"DM_DEEP_ANALYSIS\",_[_.DM_SHARPENING=64]=\"DM_SHARPENING\",_[_.DM_BASED_ON_LOC_BIN=128]=\"DM_BASED_ON_LOC_BIN\",_[_.DM_SHARPENING_SMOOTHING=256]=\"DM_SHARPENING_SMOOTHING\",_[_.DM_REV=-2147483648]=\"DM_REV\",_[_.DM_SKIP=0]=\"DM_SKIP\"}(L||(L={}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9keW5hbXNvZnQtYmFyY29kZS1yZWFkZXIvZGlzdC9kYnIuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUM0SSx5Q0FBeUMsK0JBQStCLGtEQUFrRCw0QkFBNEIsS0FBSyxxQkFBcUIsNEJBQTRCLDJDQUEyQyxXQUFXLFVBQVUsd0JBQXdCLEtBQUssa0NBQWtDLGtCQUFrQixvQ0FBb0MsOERBQUMsTUFBTSx5QkFBeUIsQ0FBQywrREFBQyxNQUFNLHFDQUFxQyxDQUFDLDhEQUFDLFFBQVEsaUJBQWlCLGlCQUFpQiw4REFBQyxNQUFNLDhEQUFDLENBQUMsOERBQUMsb0JBQW9CLDhEQUFDLE1BQU0seURBQXlELEVBQUUsU0FBUyxFQUFFLGlCQUFpQixFQUFFLDhEQUFDLHVCQUF1Qiw4REFBQyxNQUFNLDhEQUFDLENBQUMsOERBQUMscUJBQXFCLDhEQUFDLE1BQU0sdURBQXVELEVBQUUsU0FBUyxFQUFFLFFBQVEsb0JBQW9CLFFBQVEseURBQUMsTUFBTSx5REFBQyxZQUFZLHlEQUFDLE1BQU0seURBQUMsWUFBWSx5QkFBeUIsZ0JBQWdCLFVBQVUsZ0JBQWdCLElBQUksU0FBUyxva0RBQW9rRCxZQUFZLGFBQWEseUpBQXlKLFNBQVMsZUFBZSw0T0FBNE8sU0FBUyxlQUFlLDhhQUE4YSxTQUFTLGVBQWUsc2VBQXNlLFNBQVMsR0FBZ0wiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2R5bmFtc29mdC1iYXJjb2RlLXJlYWRlci9kaXN0L2Rici5lc20uanM/YzdjZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiogRHluYW1zb2Z0IEphdmFTY3JpcHQgTGlicmFyeVxuKiBAcHJvZHVjdCBEeW5hbXNvZnQgQmFyY29kZSBSZWFkZXIgSlMgRWRpdGlvblxuKiBAd2Vic2l0ZSBodHRwOi8vd3d3LmR5bmFtc29mdC5jb21cbiogQGNvcHlyaWdodCBDb3B5cmlnaHQgMjAyNCwgRHluYW1zb2Z0IENvcnBvcmF0aW9uXG4qIEBhdXRob3IgRHluYW1zb2Z0XG4qIEB2ZXJzaW9uIDEwLjQuMjBcbiogQGZpbGVvdmVydmlldyBEeW5hbXNvZnQgSmF2YVNjcmlwdCBMaWJyYXJ5IGZvciBCYXJjb2RlIFJlYWRlclxuKiBNb3JlIGluZm8gb24gZGJyIEpTOiBodHRwczovL3d3dy5keW5hbXNvZnQuY29tL2JhcmNvZGUtcmVhZGVyL2RvY3Mvd2ViL3Byb2dyYW1taW5nL2phdmFzY3JpcHQvXG4qL1xuaW1wb3J0e2F1dG9EaXNjb3ZlcnlQYXRocyBhcyBfLHdvcmtlckF1dG9SZXNvdXJjZXMgYXMgSSxtYXBQYWNrYWdlUmVnaXN0ZXIgYXMgQixjb21wYXJlVmVyc2lvbiBhcyBBLGlubmVyVmVyc2lvbnMgYXMgRX1mcm9tXCJkeW5hbXNvZnQtY29yZVwiO2NvbnN0IFI9XCJ1bmRlZmluZWRcIj09dHlwZW9mIHNlbGYsVD0oKCk9PntpZighUiYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCl7bGV0IF89ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMsST1fLmluZGV4T2YoXCI/XCIpO2lmKC0xIT1JKV89Xy5zdWJzdHJpbmcoMCxJKTtlbHNle2xldCBJPV8uaW5kZXhPZihcIiNcIik7LTEhPUkmJihfPV8uc3Vic3RyaW5nKDAsSSkpfXJldHVybiBfLnN1YnN0cmluZygwLF8ubGFzdEluZGV4T2YoXCIvXCIpKzEpfXJldHVyblwiLi9cIn0pKCksdD1fPT57aWYobnVsbD09XyYmKF89XCIuL1wiKSxSKTtlbHNle2xldCBJPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO0kuaHJlZj1fLF89SS5ocmVmfXJldHVybiBfLmVuZHNXaXRoKFwiL1wiKXx8KF8rPVwiL1wiKSxffTtfLmRicj17dmVyc2lvbjpcIjEwLjQuMjBcIixwYXRoOlR9LEkuZGJyPXtqczohMSx3YXNtOiEwLGRlcHM6W1wibGljZW5zZVwiLFwiZGlwXCJdfSxCLmRicj17fTtjb25zdCBEPVwiMS40LjEwXCI7XCJzdHJpbmdcIiE9dHlwZW9mIF8uc3RkJiZBKF8uc3RkLnZlcnNpb24sRCk8MCYmKF8uc3RkPXt2ZXJzaW9uOkQscGF0aDp0KFQrYC4uLy4uL2R5bmFtc29mdC1jYXB0dXJlLXZpc2lvbi1zdGRAJHtEfS9kaXN0L2ApfSk7Y29uc3Qgbj1cIjIuNC4yMFwiOyghXy5kaXB8fFwic3RyaW5nXCIhPXR5cGVvZiBfLmRpcCYmQShfLmRpcC52ZXJzaW9uLG4pPDApJiYoXy5kaXA9e3ZlcnNpb246bixwYXRoOnQoVCtgLi4vLi4vZHluYW1zb2Z0LWltYWdlLXByb2Nlc3NpbmdAJHtufS9kaXN0L2ApfSk7Y2xhc3MgT3tzdGF0aWMgZ2V0VmVyc2lvbigpe2NvbnN0IF89RS5kYnImJkUuZGJyLndhc20sST1FLmRiciYmRS5kYnIud29ya2VyO3JldHVybmAxMC40LjIwKFdvcmtlcjogJHtJfHxcIk5vdCBMb2FkZWRcIn0sIFdhc206ICR7X3x8XCJOb3QgTG9hZGVkXCJ9KWB9fWNvbnN0IGk9e0JGX05VTEw6QmlnSW50KDApLEJGX0FMTDpCaWdJbnQoXCIweEZGRkZGRkZFRkZGRkZGRkZcIiksQkZfREVGQVVMVDpCaWdJbnQoNDI2NTM0NTAyMyksQkZfT05FRDpCaWdJbnQoMzE0Nzc3NSksQkZfR1MxX0RBVEFCQVI6QmlnSW50KDI2MDA5NiksQkZfQ09ERV8zOTpCaWdJbnQoMSksQkZfQ09ERV8xMjg6QmlnSW50KDIpLEJGX0NPREVfOTM6QmlnSW50KDQpLEJGX0NPREFCQVI6QmlnSW50KDgpLEJGX0lURjpCaWdJbnQoMTYpLEJGX0VBTl8xMzpCaWdJbnQoMzIpLEJGX0VBTl84OkJpZ0ludCg2NCksQkZfVVBDX0E6QmlnSW50KDEyOCksQkZfVVBDX0U6QmlnSW50KDI1NiksQkZfSU5EVVNUUklBTF8yNTpCaWdJbnQoNTEyKSxCRl9DT0RFXzM5X0VYVEVOREVEOkJpZ0ludCgxMDI0KSxCRl9HUzFfREFUQUJBUl9PTU5JRElSRUNUSU9OQUw6QmlnSW50KDIwNDgpLEJGX0dTMV9EQVRBQkFSX1RSVU5DQVRFRDpCaWdJbnQoNDA5NiksQkZfR1MxX0RBVEFCQVJfU1RBQ0tFRDpCaWdJbnQoODE5MiksQkZfR1MxX0RBVEFCQVJfU1RBQ0tFRF9PTU5JRElSRUNUSU9OQUw6QmlnSW50KDE2Mzg0KSxCRl9HUzFfREFUQUJBUl9FWFBBTkRFRDpCaWdJbnQoMzI3NjgpLEJGX0dTMV9EQVRBQkFSX0VYUEFOREVEX1NUQUNLRUQ6QmlnSW50KDY1NTM2KSxCRl9HUzFfREFUQUJBUl9MSU1JVEVEOkJpZ0ludCgxMzEwNzIpLEJGX1BBVENIQ09ERTpCaWdJbnQoMjYyMTQ0KSxCRl9DT0RFXzMyOkJpZ0ludCgxNjc3NzIxNiksQkZfUERGNDE3OkJpZ0ludCgzMzU1NDQzMiksQkZfUVJfQ09ERTpCaWdJbnQoNjcxMDg4NjQpLEJGX0RBVEFNQVRSSVg6QmlnSW50KDEzNDIxNzcyOCksQkZfQVpURUM6QmlnSW50KDI2ODQzNTQ1NiksQkZfTUFYSUNPREU6QmlnSW50KDUzNjg3MDkxMiksQkZfTUlDUk9fUVI6QmlnSW50KDEwNzM3NDE4MjQpLEJGX01JQ1JPX1BERjQxNzpCaWdJbnQoNTI0Mjg4KSxCRl9HUzFfQ09NUE9TSVRFOkJpZ0ludCgyMTQ3NDgzNjQ4KSxCRl9NU0lfQ09ERTpCaWdJbnQoMTA0ODU3NiksQkZfQ09ERV8xMTpCaWdJbnQoMjA5NzE1MiksQkZfVFdPX0RJR0lUX0FERF9PTjpCaWdJbnQoNDE5NDMwNCksQkZfRklWRV9ESUdJVF9BRERfT046QmlnSW50KDgzODg2MDgpLEJGX01BVFJJWF8yNTpCaWdJbnQoNjg3MTk0NzY3MzYpLEJGX1BPU1RBTENPREU6QmlnSW50KDB4M2YwMDAwMDAwMDAwMDAwKSxCRl9OT05TVEFOREFSRF9CQVJDT0RFOkJpZ0ludCg0Mjk0OTY3Mjk2KSxCRl9VU1BTSU5URUxMSUdFTlRNQUlMOkJpZ0ludCg0NTAzNTk5NjI3MzcwNDk2KSxCRl9QT1NUTkVUOkJpZ0ludCg5MDA3MTk5MjU0NzQwOTkyKSxCRl9QTEFORVQ6QmlnSW50KDB4NDAwMDAwMDAwMDAwMDApLEJGX0FVU1RSQUxJQU5QT1NUOkJpZ0ludCgweDgwMDAwMDAwMDAwMDAwKSxCRl9STTRTQ0M6QmlnSW50KDcyMDU3NTk0MDM3OTI3OTQwKSxCRl9LSVg6QmlnSW50KDB4MjAwMDAwMDAwMDAwMDAwKSxCRl9ET1RDT0RFOkJpZ0ludCg4NTg5OTM0NTkyKSxCRl9QSEFSTUFDT0RFX09ORV9UUkFDSzpCaWdJbnQoMTcxNzk4NjkxODQpLEJGX1BIQVJNQUNPREVfVFdPX1RSQUNLOkJpZ0ludCgzNDM1OTczODM2OCksQkZfUEhBUk1BQ09ERTpCaWdJbnQoNTE1Mzk2MDc1NTIpfTt2YXIgQyxTLE4sTDshZnVuY3Rpb24oXyl7X1tfLkVCUlRfU1RBTkRBUkRfUkVTVUxUPTBdPVwiRUJSVF9TVEFOREFSRF9SRVNVTFRcIixfW18uRUJSVF9DQU5ESURBVEVfUkVTVUxUPTFdPVwiRUJSVF9DQU5ESURBVEVfUkVTVUxUXCIsX1tfLkVCUlRfUEFSVElBTF9SRVNVTFQ9Ml09XCJFQlJUX1BBUlRJQUxfUkVTVUxUXCJ9KEN8fChDPXt9KSksZnVuY3Rpb24oXyl7X1tfLlFSRUNMX0VSUk9SX0NPUlJFQ1RJT05fSD0wXT1cIlFSRUNMX0VSUk9SX0NPUlJFQ1RJT05fSFwiLF9bXy5RUkVDTF9FUlJPUl9DT1JSRUNUSU9OX0w9MV09XCJRUkVDTF9FUlJPUl9DT1JSRUNUSU9OX0xcIixfW18uUVJFQ0xfRVJST1JfQ09SUkVDVElPTl9NPTJdPVwiUVJFQ0xfRVJST1JfQ09SUkVDVElPTl9NXCIsX1tfLlFSRUNMX0VSUk9SX0NPUlJFQ1RJT05fUT0zXT1cIlFSRUNMX0VSUk9SX0NPUlJFQ1RJT05fUVwifShTfHwoUz17fSkpLGZ1bmN0aW9uKF8pe19bXy5MTV9BVVRPPTFdPVwiTE1fQVVUT1wiLF9bXy5MTV9DT05ORUNURURfQkxPQ0tTPTJdPVwiTE1fQ09OTkVDVEVEX0JMT0NLU1wiLF9bXy5MTV9TVEFUSVNUSUNTPTRdPVwiTE1fU1RBVElTVElDU1wiLF9bXy5MTV9MSU5FUz04XT1cIkxNX0xJTkVTXCIsX1tfLkxNX1NDQU5fRElSRUNUTFk9MTZdPVwiTE1fU0NBTl9ESVJFQ1RMWVwiLF9bXy5MTV9TVEFUSVNUSUNTX01BUktTPTMyXT1cIkxNX1NUQVRJU1RJQ1NfTUFSS1NcIixfW18uTE1fU1RBVElTVElDU19QT1NUQUxfQ09ERT02NF09XCJMTV9TVEFUSVNUSUNTX1BPU1RBTF9DT0RFXCIsX1tfLkxNX0NFTlRSRT0xMjhdPVwiTE1fQ0VOVFJFXCIsX1tfLkxNX09ORURfRkFTVF9TQ0FOPTI1Nl09XCJMTV9PTkVEX0ZBU1RfU0NBTlwiLF9bXy5MTV9SRVY9LTIxNDc0ODM2NDhdPVwiTE1fUkVWXCIsX1tfLkxNX1NLSVA9MF09XCJMTV9TS0lQXCJ9KE58fChOPXt9KSksZnVuY3Rpb24oXyl7X1tfLkRNX0RJUkVDVF9CSU5BUklaQVRJT049MV09XCJETV9ESVJFQ1RfQklOQVJJWkFUSU9OXCIsX1tfLkRNX1RIUkVTSE9MRF9CSU5BUklaQVRJT049Ml09XCJETV9USFJFU0hPTERfQklOQVJJWkFUSU9OXCIsX1tfLkRNX0dSQVlfRVFVQUxJWkFUSU9OPTRdPVwiRE1fR1JBWV9FUVVBTElaQVRJT05cIixfW18uRE1fU01PT1RISU5HPThdPVwiRE1fU01PT1RISU5HXCIsX1tfLkRNX01PUlBISU5HPTE2XT1cIkRNX01PUlBISU5HXCIsX1tfLkRNX0RFRVBfQU5BTFlTSVM9MzJdPVwiRE1fREVFUF9BTkFMWVNJU1wiLF9bXy5ETV9TSEFSUEVOSU5HPTY0XT1cIkRNX1NIQVJQRU5JTkdcIixfW18uRE1fQkFTRURfT05fTE9DX0JJTj0xMjhdPVwiRE1fQkFTRURfT05fTE9DX0JJTlwiLF9bXy5ETV9TSEFSUEVOSU5HX1NNT09USElORz0yNTZdPVwiRE1fU0hBUlBFTklOR19TTU9PVEhJTkdcIixfW18uRE1fUkVWPS0yMTQ3NDgzNjQ4XT1cIkRNX1JFVlwiLF9bXy5ETV9TS0lQPTBdPVwiRE1fU0tJUFwifShMfHwoTD17fSkpO2V4cG9ydHtPIGFzIEJhcmNvZGVSZWFkZXJNb2R1bGUsaSBhcyBFbnVtQmFyY29kZUZvcm1hdCxMIGFzIEVudW1EZWJsdXJNb2RlLEMgYXMgRW51bUV4dGVuZGVkQmFyY29kZVJlc3VsdFR5cGUsTiBhcyBFbnVtTG9jYWxpemF0aW9uTW9kZSxTIGFzIEVudW1RUkNvZGVFcnJvckNvcnJlY3Rpb25MZXZlbH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/dynamsoft-barcode-reader/dist/dbr.esm.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/dynamsoft-camera-enhancer/dist/dce.esm.js":
/*!****************************************************************!*\
  !*** ./node_modules/dynamsoft-camera-enhancer/dist/dce.esm.js ***!
  \****************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CameraEnhancer: function() { return /* binding */ wr; },\n/* harmony export */   CameraEnhancerModule: function() { return /* binding */ b; },\n/* harmony export */   CameraView: function() { return /* binding */ we; },\n/* harmony export */   DrawingItem: function() { return /* binding */ Z; },\n/* harmony export */   DrawingStyleManager: function() { return /* binding */ ge; },\n/* harmony export */   EnumDrawingItemMediaType: function() { return /* binding */ B; },\n/* harmony export */   EnumDrawingItemState: function() { return /* binding */ j; },\n/* harmony export */   EnumEnhancedFeatures: function() { return /* binding */ W; },\n/* harmony export */   Feedback: function() { return /* binding */ pr; },\n/* harmony export */   GroupDrawingItem: function() { return /* binding */ fe; },\n/* harmony export */   ImageDrawingItem: function() { return /* binding */ Et; },\n/* harmony export */   ImageEditorView: function() { return /* binding */ Yr; },\n/* harmony export */   LineDrawingItem: function() { return /* binding */ ue; },\n/* harmony export */   QuadDrawingItem: function() { return /* binding */ de; },\n/* harmony export */   RectDrawingItem: function() { return /* binding */ wt; },\n/* harmony export */   TextDrawingItem: function() { return /* binding */ At; }\n/* harmony export */ });\n/* harmony import */ var dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dynamsoft-core */ \"(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js\");\n/* provided dependency */ var Buffer = __webpack_require__(/*! buffer */ \"(app-pages-browser)/./node_modules/next/dist/compiled/buffer/index.js\")[\"Buffer\"];\n/*!\n * Dynamsoft JavaScript Library\n * @product Dynamsoft Camera Enhancer JS Edition\n * @website https://www.dynamsoft.com\n * @copyright Copyright 2024, Dynamsoft Corporation\n * @author Dynamsoft\n * @version 4.1.0\n * @fileoverview Dynamsoft JavaScript Library for Camera Enhancer\n * More info on DCE JS: https://www.dynamsoft.com/camera-enhancer/docs/programming/javascript/?ver=latest\n */\nconst y=\"undefined\"==typeof self,w=(()=>{if(!y&&document.currentScript){let t=document.currentScript.src,e=t.indexOf(\"?\");if(-1!=e)t=t.substring(0,e);else{let e=t.indexOf(\"#\");-1!=e&&(t=t.substring(0,e))}return t.substring(0,t.lastIndexOf(\"/\")+1)}return\"./\"})();dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dce={version:\"4.1.0\",path:w},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.workerAutoResources.dce={wasm:!1,js:!1},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.dce={};class b{static getVersion(){return\"4.1.0\"}}function x(t,e,i,r){if(\"a\"===i&&!r)throw new TypeError(\"Private accessor was defined without a getter\");if(\"function\"==typeof e?t!==e||!r:!e.has(t))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return\"m\"===i?r:\"a\"===i?r.call(t):r?r.value:e.get(t)}function C(t,e,i,r,n){if(\"m\"===r)throw new TypeError(\"Private method is not writable\");if(\"a\"===r&&!n)throw new TypeError(\"Private accessor was defined without a setter\");if(\"function\"==typeof e?t!==e||!n:!e.has(t))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return\"a\"===r?n.call(t,i):n?n.value=i:e.set(t,i),i}let S,T,E,O,A;\"function\"==typeof SuppressedError&&SuppressedError,\"undefined\"!=typeof navigator&&(S=navigator,T=S.userAgent,E=S.platform,O=S.mediaDevices),function(){if(!y){const t={Edge:{search:\"Edg\",verSearch:\"Edg\"},OPR:null,Chrome:null,Safari:{str:S.vendor,search:\"Apple\",verSearch:[\"Version\",\"iPhone OS\",\"CPU OS\"]},Firefox:null,Explorer:{search:\"MSIE\",verSearch:\"MSIE\"}},e={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:E,search:\"Win\"},Mac:{str:E},Linux:{str:E}};let i=\"unknownBrowser\",r=0,n=\"unknownOS\";for(let e in t){const n=t[e]||{};let s=n.str||T,o=n.search||e,a=n.verStr||T,h=n.verSearch||e;if(h instanceof Array||(h=[h]),-1!=s.indexOf(o)){i=e;for(let t of h){let e=a.indexOf(t);if(-1!=e){r=parseFloat(a.substring(e+t.length+1));break}}break}}for(let t in e){const i=e[t]||{};let r=i.str||T,s=i.search||t;if(-1!=r.indexOf(s)){n=t;break}}\"Linux\"==n&&-1!=T.indexOf(\"Windows NT\")&&(n=\"HarmonyOS\"),A={browser:i,version:r,OS:n}}y&&(A={browser:\"ssr\",version:0,OS:\"ssr\"})}();const I=\"undefined\"!=typeof WebAssembly&&T&&!(/Safari/.test(T)&&!/Chrome/.test(T)&&/\\(.+\\s11_2_([2-6]).*\\)/.test(T)),L=!(\"undefined\"==typeof Worker),D=!(!O||!O.getUserMedia),M=async()=>{let t=!1;if(D)try{(await O.getUserMedia({video:!0})).getTracks().forEach((t=>{t.stop()})),t=!0}catch(t){}return t};\"Chrome\"===A.browser&&A.version>66||\"Safari\"===A.browser&&A.version>13||\"OPR\"===A.browser&&A.version>43||\"Edge\"===A.browser&&A.version;var F={653:(t,e,i)=>{var r,n,s,o,a,h,l,c,u,d,f,g,m,p,v,_,y,w,b,x,C,S=S||{version:\"5.2.1\"};if(e.fabric=S,\"undefined\"!=typeof document&&\"undefined\"!=typeof window)document instanceof(\"undefined\"!=typeof HTMLDocument?HTMLDocument:Document)?S.document=document:S.document=document.implementation.createHTMLDocument(\"\"),S.window=window;else{var T=new(i(192).JSDOM)(decodeURIComponent(\"%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E\"),{features:{FetchExternalResources:[\"img\"]},resources:\"usable\"}).window;S.document=T.document,S.jsdomImplForWrapper=i(898).implForWrapper,S.nodeCanvas=i(245).Canvas,S.window=T,DOMParser=S.window.DOMParser}function E(t,e){var i=t.canvas,r=e.targetCanvas,n=r.getContext(\"2d\");n.translate(0,r.height),n.scale(1,-1);var s=i.height-r.height;n.drawImage(i,0,s,r.width,r.height,0,0,r.width,r.height)}function O(t,e){var i=e.targetCanvas.getContext(\"2d\"),r=e.destinationWidth,n=e.destinationHeight,s=r*n*4,o=new Uint8Array(this.imageBuffer,0,s),a=new Uint8ClampedArray(this.imageBuffer,0,s);t.readPixels(0,0,r,n,t.RGBA,t.UNSIGNED_BYTE,o);var h=new ImageData(a,r,n);i.putImageData(h,0,0)}S.isTouchSupported=\"ontouchstart\"in S.window||\"ontouchstart\"in S.document||S.window&&S.window.navigator&&S.window.navigator.maxTouchPoints>0,S.isLikelyNode=\"undefined\"!=typeof Buffer&&\"undefined\"==typeof window,S.SHARED_ATTRIBUTES=[\"display\",\"transform\",\"fill\",\"fill-opacity\",\"fill-rule\",\"opacity\",\"stroke\",\"stroke-dasharray\",\"stroke-linecap\",\"stroke-dashoffset\",\"stroke-linejoin\",\"stroke-miterlimit\",\"stroke-opacity\",\"stroke-width\",\"id\",\"paint-order\",\"vector-effect\",\"instantiated_by_use\",\"clip-path\"],S.DPI=96,S.reNum=\"(?:[-+]?(?:\\\\d+|\\\\d*\\\\.\\\\d+)(?:[eE][-+]?\\\\d+)?)\",S.commaWsp=\"(?:\\\\s+,?\\\\s*|,\\\\s*)\",S.rePathCommand=/([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:[eE][-+]?\\d+)?)/gi,S.reNonWord=/[ \\n\\.,;!\\?\\-]/,S.fontPaths={},S.iMatrix=[1,0,0,1,0,0],S.svgNS=\"http://www.w3.org/2000/svg\",S.perfLimitSizeTotal=2097152,S.maxCacheSideLimit=4096,S.minCacheSideLimit=256,S.charWidthsCache={},S.textureSize=2048,S.disableStyleCopyPaste=!1,S.enableGLFiltering=!0,S.devicePixelRatio=S.window.devicePixelRatio||S.window.webkitDevicePixelRatio||S.window.mozDevicePixelRatio||1,S.browserShadowBlurConstant=1,S.arcToSegmentsCache={},S.boundsOfCurveCache={},S.cachesBoundsOfCurve=!0,S.forceGLPutImageData=!1,S.initFilterBackend=function(){return S.enableGLFiltering&&S.isWebglSupported&&S.isWebglSupported(S.textureSize)?(console.log(\"max texture size: \"+S.maxTextureSize),new S.WebglFilterBackend({tileSize:S.textureSize})):S.Canvas2dFilterBackend?new S.Canvas2dFilterBackend:void 0},\"undefined\"!=typeof document&&\"undefined\"!=typeof window&&(window.fabric=S),function(){function t(t,e){if(this.__eventListeners[t]){var i=this.__eventListeners[t];e?i[i.indexOf(e)]=!1:S.util.array.fill(i,!1)}}function e(t,e){var i=function(){e.apply(this,arguments),this.off(t,i)}.bind(this);this.on(t,i)}S.Observable={fire:function(t,e){if(!this.__eventListeners)return this;var i=this.__eventListeners[t];if(!i)return this;for(var r=0,n=i.length;r<n;r++)i[r]&&i[r].call(this,e||{});return this.__eventListeners[t]=i.filter((function(t){return!1!==t})),this},on:function(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this},once:function(t,i){if(1===arguments.length)for(var r in t)e.call(this,r,t[r]);else e.call(this,t,i);return this},off:function(e,i){if(!this.__eventListeners)return this;if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&\"object\"==typeof arguments[0])for(var r in e)t.call(this,r,e[r]);else t.call(this,e,i);return this}}}(),S.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,i){var r=this._objects;return i?r[e]=t:r.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t,e=this._objects,i=!1,r=0,n=arguments.length;r<n;r++)-1!==(t=e.indexOf(arguments[r]))&&(i=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[r]));return this.renderOnAddRemove&&i&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),r=0,n=i.length;r<n;r++)t.call(e,i[r],r,i);return this},getObjects:function(t){return void 0===t?this._objects.concat():this._objects.filter((function(e){return e.type===t}))},item:function(t){return this._objects[t]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(t,e){return this._objects.indexOf(t)>-1||!!e&&this._objects.some((function(e){return\"function\"==typeof e.contains&&e.contains(t,!0)}))},complexity:function(){return this._objects.reduce((function(t,e){return t+(e.complexity?e.complexity():0)}),0)}},S.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof S.Gradient||this.set(e,new S.Gradient(t))},_initPattern:function(t,e,i){!t||!t.source||t instanceof S.Pattern?i&&i():this.set(e,new S.Pattern(t,i))},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return\"object\"==typeof t?this._setObject(t):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return\"boolean\"==typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},r=e,n=Math.sqrt,s=Math.atan2,o=Math.pow,a=Math.PI/180,h=Math.PI/2,S.util={cos:function(t){if(0===t)return 1;switch(t<0&&(t=-t),t/h){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(0===t)return 0;var e=1;switch(t<0&&(e=-1),t/h){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(t)},removeFromArray:function(t,e){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*a},radiansToDegrees:function(t){return t/a},rotatePoint:function(t,e,i){var r=new S.Point(t.x-e.x,t.y-e.y),n=S.util.rotateVector(r,i);return new S.Point(n.x,n.y).addEquals(e)},rotateVector:function(t,e){var i=S.util.sin(e),r=S.util.cos(e);return{x:t.x*r-t.y*i,y:t.x*i+t.y*r}},createVector:function(t,e){return new S.Point(e.x-t.x,e.y-t.y)},calcAngleBetweenVectors:function(t,e){return Math.acos((t.x*e.x+t.y*e.y)/(Math.hypot(t.x,t.y)*Math.hypot(e.x,e.y)))},getHatVector:function(t){return new S.Point(t.x,t.y).multiply(1/Math.hypot(t.x,t.y))},getBisector:function(t,e,i){var r=S.util.createVector(t,e),n=S.util.createVector(t,i),s=S.util.calcAngleBetweenVectors(r,n),o=s*(0===S.util.calcAngleBetweenVectors(S.util.rotateVector(r,s),n)?1:-1)/2;return{vector:S.util.getHatVector(S.util.rotateVector(r,o)),angle:s}},projectStrokeOnPoints:function(t,e,i){var r=[],n=e.strokeWidth/2,s=e.strokeUniform?new S.Point(1/e.scaleX,1/e.scaleY):new S.Point(1,1),o=function(t){var e=n/Math.hypot(t.x,t.y);return new S.Point(t.x*e*s.x,t.y*e*s.y)};return t.length<=1||t.forEach((function(a,h){var l,c,u=new S.Point(a.x,a.y);0===h?(c=t[h+1],l=i?o(S.util.createVector(c,u)).addEquals(u):t[t.length-1]):h===t.length-1?(l=t[h-1],c=i?o(S.util.createVector(l,u)).addEquals(u):t[0]):(l=t[h-1],c=t[h+1]);var d,f,g=S.util.getBisector(u,l,c),m=g.vector,p=g.angle;if(\"miter\"===e.strokeLineJoin&&(d=-n/Math.sin(p/2),f=new S.Point(m.x*d*s.x,m.y*d*s.y),Math.hypot(f.x,f.y)/n<=e.strokeMiterLimit))return r.push(u.add(f)),void r.push(u.subtract(f));d=-n*Math.SQRT2,f=new S.Point(m.x*d*s.x,m.y*d*s.y),r.push(u.add(f)),r.push(u.subtract(f))})),r},transformPoint:function(t,e,i){return i?new S.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new S.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t,e){if(e)for(var i=0;i<t.length;i++)t[i]=S.util.transformPoint(t[i],e);var r=[t[0].x,t[1].x,t[2].x,t[3].x],n=S.util.array.min(r),s=S.util.array.max(r)-n,o=[t[0].y,t[1].y,t[2].y,t[3].y],a=S.util.array.min(o);return{left:n,top:a,width:s,height:S.util.array.max(o)-a}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),i=[e*t[3],-e*t[1],-e*t[2],e*t[0]],r=S.util.transformPoint({x:t[4],y:t[5]},i,!0);return i[4]=-r.x,i[5]=-r.y,i},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var i=/\\D{0,2}$/.exec(t),r=parseFloat(t);switch(e||(e=S.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case\"mm\":return r*S.DPI/25.4;case\"cm\":return r*S.DPI/2.54;case\"in\":return r*S.DPI;case\"pt\":return r*S.DPI/72;case\"pc\":return r*S.DPI/72*12;case\"em\":return r*e;default:return r}},falseFunction:function(){return!1},getKlass:function(t,e){return t=S.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),S.util.resolveNamespace(e)[t]},getSvgAttributes:function(t){var e=[\"instantiated_by_use\",\"style\",\"id\",\"class\"];switch(t){case\"linearGradient\":e=e.concat([\"x1\",\"y1\",\"x2\",\"y2\",\"gradientUnits\",\"gradientTransform\"]);break;case\"radialGradient\":e=e.concat([\"gradientUnits\",\"gradientTransform\",\"cx\",\"cy\",\"r\",\"fx\",\"fy\",\"fr\"]);break;case\"stop\":e=e.concat([\"offset\",\"stop-color\",\"stop-opacity\"])}return e},resolveNamespace:function(t){if(!t)return S;var e,i=t.split(\".\"),n=i.length,s=r||S.window;for(e=0;e<n;++e)s=s[i[e]];return s},loadImage:function(t,e,i,r){if(t){var n=S.util.createImage(),s=function(){e&&e.call(i,n,!1),n=n.onload=n.onerror=null};n.onload=s,n.onerror=function(){S.log(\"Error loading \"+n.src),e&&e.call(i,null,!0),n=n.onload=n.onerror=null},0!==t.indexOf(\"data\")&&null!=r&&(n.crossOrigin=r),\"data:image/svg\"===t.substring(0,14)&&(n.onload=null,S.util.loadImageInDom(n,s)),n.src=t}else e&&e.call(i,t)},loadImageInDom:function(t,e){var i=S.document.createElement(\"div\");i.style.width=i.style.height=\"1px\",i.style.left=i.style.top=\"-100%\",i.style.position=\"absolute\",i.appendChild(t),S.document.querySelector(\"body\").appendChild(i),t.onload=function(){e(),i.parentNode.removeChild(i),i=null}},enlivenObjects:function(t,e,i,r){var n=[],s=0,o=(t=t||[]).length;function a(){++s===o&&e&&e(n.filter((function(t){return t})))}o?t.forEach((function(t,e){t&&t.type?S.util.getKlass(t.type,i).fromObject(t,(function(i,s){s||(n[e]=i),r&&r(t,i,s),a()})):a()})):e&&e(n)},enlivenObjectEnlivables:function(t,e,i){var r=S.Object.ENLIVEN_PROPS.filter((function(e){return!!t[e]}));S.util.enlivenObjects(r.map((function(e){return t[e]})),(function(t){var n={};r.forEach((function(i,r){n[i]=t[r],e&&(e[i]=t[r])})),i&&i(n)}))},enlivenPatterns:function(t,e){function i(){++n===s&&e&&e(r)}var r=[],n=0,s=(t=t||[]).length;s?t.forEach((function(t,e){t&&t.source?new S.Pattern(t,(function(t){r[e]=t,i()})):(r[e]=t,i())})):e&&e(r)},groupSVGElements:function(t,e,i){var r;return t&&1===t.length?t[0]:(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),r=new S.Group(t,e),void 0!==i&&(r.sourcePath=i),r)},populateWithProperties:function(t,e,i){if(i&&Array.isArray(i))for(var r=0,n=i.length;r<n;r++)i[r]in t&&(e[i[r]]=t[i[r]])},createCanvasElement:function(){return S.document.createElement(\"canvas\")},copyCanvasElement:function(t){var e=S.util.createCanvasElement();return e.width=t.width,e.height=t.height,e.getContext(\"2d\").drawImage(t,0,0),e},toDataURL:function(t,e,i){return t.toDataURL(\"image/\"+e,i)},createImage:function(){return S.document.createElement(\"img\")},multiplyTransformMatrices:function(t,e,i){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var e=s(t[1],t[0]),i=o(t[0],2)+o(t[1],2),r=n(i),h=(t[0]*t[3]-t[2]*t[1])/r,l=s(t[0]*t[2]+t[1]*t[3],i);return{angle:e/a,scaleX:r,scaleY:h,skewX:l/a,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return S.iMatrix.concat();var e=S.util.degreesToRadians(t.angle),i=S.util.cos(e),r=S.util.sin(e);return[i,r,-r,i,0,0]},calcDimensionsMatrix:function(t){var e=void 0===t.scaleX?1:t.scaleX,i=void 0===t.scaleY?1:t.scaleY,r=[t.flipX?-e:e,0,0,t.flipY?-i:i,0,0],n=S.util.multiplyTransformMatrices,s=S.util.degreesToRadians;return t.skewX&&(r=n(r,[1,0,Math.tan(s(t.skewX)),1],!0)),t.skewY&&(r=n(r,[1,Math.tan(s(t.skewY)),0,1],!0)),r},composeMatrix:function(t){var e=[1,0,0,1,t.translateX||0,t.translateY||0],i=S.util.multiplyTransformMatrices;return t.angle&&(e=i(e,S.util.calcRotateMatrix(t))),(1!==t.scaleX||1!==t.scaleY||t.skewX||t.skewY||t.flipX||t.flipY)&&(e=i(e,S.util.calcDimensionsMatrix(t))),e},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},isTransparent:function(t,e,i,r){r>0&&(e>r?e-=r:e=0,i>r?i-=r:i=0);var n,s=!0,o=t.getImageData(e,i,2*r||1,2*r||1),a=o.data.length;for(n=3;n<a&&0!=(s=o.data[n]<=0);n+=4);return o=null,s},parsePreserveAspectRatioAttribute:function(t){var e,i=\"meet\",r=t.split(\" \");return r&&r.length&&(\"meet\"!==(i=r.pop())&&\"slice\"!==i?(e=i,i=\"meet\"):r.length&&(e=r.pop())),{meetOrSlice:i,alignX:\"none\"!==e?e.slice(1,4):\"none\",alignY:\"none\"!==e?e.slice(5,8):\"none\"}},clearFabricFontCache:function(t){(t=(t||\"\").toLowerCase())?S.charWidthsCache[t]&&delete S.charWidthsCache[t]:S.charWidthsCache={}},limitDimsByArea:function(t,e){var i=Math.sqrt(e*t),r=Math.floor(e/i);return{x:Math.floor(i),y:r}},capValue:function(t,e,i){return Math.max(t,Math.min(e,i))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)},matrixToSVG:function(t){return\"matrix(\"+t.map((function(t){return S.util.toFixed(t,S.Object.NUM_FRACTION_DIGITS)})).join(\" \")+\")\"},removeTransformFromObject:function(t,e){var i=S.util.invertTransform(e),r=S.util.multiplyTransformMatrices(i,t.calcOwnMatrix());S.util.applyTransformToObject(t,r)},addTransformToObject:function(t,e){S.util.applyTransformToObject(t,S.util.multiplyTransformMatrices(e,t.calcOwnMatrix()))},applyTransformToObject:function(t,e){var i=S.util.qrDecompose(e),r=new S.Point(i.translateX,i.translateY);t.flipX=!1,t.flipY=!1,t.set(\"scaleX\",i.scaleX),t.set(\"scaleY\",i.scaleY),t.skewX=i.skewX,t.skewY=i.skewY,t.angle=i.angle,t.setPositionByOrigin(r,\"center\",\"center\")},sizeAfterTransform:function(t,e,i){var r=t/2,n=e/2,s=[{x:-r,y:-n},{x:r,y:-n},{x:-r,y:n},{x:r,y:n}],o=S.util.calcDimensionsMatrix(i),a=S.util.makeBoundingBoxFromPoints(s,o);return{x:a.width,y:a.height}},mergeClipPaths:function(t,e){var i=t,r=e;i.inverted&&!r.inverted&&(i=e,r=t),S.util.applyTransformToObject(r,S.util.multiplyTransformMatrices(S.util.invertTransform(i.calcTransformMatrix()),r.calcTransformMatrix()));var n=i.inverted&&r.inverted;return n&&(i.inverted=r.inverted=!1),new S.Group([i],{clipPath:r,inverted:n})}},function(){var t=Array.prototype.join,e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},i={m:\"l\",M:\"L\"};function r(t,e,i,r,n,s,o,a,h,l,c){var u=S.util.cos(t),d=S.util.sin(t),f=S.util.cos(e),g=S.util.sin(e),m=i*n*f-r*s*g+o,p=r*n*f+i*s*g+a;return[\"C\",l+h*(-i*n*d-r*s*u),c+h*(-r*n*d+i*s*u),m+h*(i*n*g+r*s*f),p+h*(r*n*g-i*s*f),m,p]}function n(t,e,i,r){var n=Math.atan2(e,t),s=Math.atan2(r,i);return s>=n?s-n:2*Math.PI-(n-s)}function s(t,e,i){for(var s=i[1],o=i[2],a=i[3],h=i[4],l=i[5],c=function(t,e,i,s,o,a,h){var l=Math.PI,c=h*l/180,u=S.util.sin(c),d=S.util.cos(c),f=0,g=0,m=-d*t*.5-u*e*.5,p=-d*e*.5+u*t*.5,v=(i=Math.abs(i))*i,_=(s=Math.abs(s))*s,y=p*p,w=m*m,b=v*_-v*y-_*w,x=0;if(b<0){var C=Math.sqrt(1-b/(v*_));i*=C,s*=C}else x=(o===a?-1:1)*Math.sqrt(b/(v*y+_*w));var T=x*i*p/s,E=-x*s*m/i,O=d*T-u*E+.5*t,A=u*T+d*E+.5*e,I=n(1,0,(m-T)/i,(p-E)/s),L=n((m-T)/i,(p-E)/s,(-m-T)/i,(-p-E)/s);0===a&&L>0?L-=2*l:1===a&&L<0&&(L+=2*l);for(var D=Math.ceil(Math.abs(L/l*2)),M=[],F=L/D,P=8/3*Math.sin(F/4)*Math.sin(F/4)/Math.sin(F/2),k=I+F,R=0;R<D;R++)M[R]=r(I,k,d,u,i,s,O,A,P,f,g),f=M[R][5],g=M[R][6],I=k,k+=F;return M}(i[6]-t,i[7]-e,s,o,h,l,a),u=0,d=c.length;u<d;u++)c[u][1]+=t,c[u][2]+=e,c[u][3]+=t,c[u][4]+=e,c[u][5]+=t,c[u][6]+=e;return c}function o(t,e,i,r){return Math.sqrt((i-t)*(i-t)+(r-e)*(r-e))}function a(t,e,i,r,n,s,o,a){return function(h){var l,c=(l=h)*l*l,u=function(t){return 3*t*t*(1-t)}(h),d=function(t){return 3*t*(1-t)*(1-t)}(h),f=function(t){return(1-t)*(1-t)*(1-t)}(h);return{x:o*c+n*u+i*d+t*f,y:a*c+s*u+r*d+e*f}}}function h(t,e,i,r,n,s,o,a){return function(h){var l=1-h,c=3*l*l*(i-t)+6*l*h*(n-i)+3*h*h*(o-n),u=3*l*l*(r-e)+6*l*h*(s-r)+3*h*h*(a-s);return Math.atan2(u,c)}}function l(t,e,i,r,n,s){return function(o){var a,h=(a=o)*a,l=function(t){return 2*t*(1-t)}(o),c=function(t){return(1-t)*(1-t)}(o);return{x:n*h+i*l+t*c,y:s*h+r*l+e*c}}}function c(t,e,i,r,n,s){return function(o){var a=1-o,h=2*a*(i-t)+2*o*(n-i),l=2*a*(r-e)+2*o*(s-r);return Math.atan2(l,h)}}function u(t,e,i){var r,n,s={x:e,y:i},a=0;for(n=1;n<=100;n+=1)r=t(n/100),a+=o(s.x,s.y,r.x,r.y),s=r;return a}function d(t){for(var e,i,r,n,s=0,d=t.length,f=0,g=0,m=0,p=0,v=[],_=0;_<d;_++){switch(r={x:f,y:g,command:(e=t[_])[0]},e[0]){case\"M\":r.length=0,m=f=e[1],p=g=e[2];break;case\"L\":r.length=o(f,g,e[1],e[2]),f=e[1],g=e[2];break;case\"C\":i=a(f,g,e[1],e[2],e[3],e[4],e[5],e[6]),n=h(f,g,e[1],e[2],e[3],e[4],e[5],e[6]),r.iterator=i,r.angleFinder=n,r.length=u(i,f,g),f=e[5],g=e[6];break;case\"Q\":i=l(f,g,e[1],e[2],e[3],e[4]),n=c(f,g,e[1],e[2],e[3],e[4]),r.iterator=i,r.angleFinder=n,r.length=u(i,f,g),f=e[3],g=e[4];break;case\"Z\":case\"z\":r.destX=m,r.destY=p,r.length=o(f,g,m,p),f=m,g=p}s+=r.length,v.push(r)}return v.push({length:s,x:f,y:g}),v}S.util.joinPath=function(t){return t.map((function(t){return t.join(\" \")})).join(\" \")},S.util.parsePath=function(t){var r,n,s,o,a,h=[],l=[],c=S.rePathCommand,u=\"[-+]?(?:\\\\d*\\\\.\\\\d+|\\\\d+\\\\.?)(?:[eE][-+]?\\\\d+)?\\\\s*\",d=\"(\"+u+\")\"+S.commaWsp,f=\"([01])\"+S.commaWsp+\"?\",g=new RegExp(d+\"?\"+d+\"?\"+d+f+f+d+\"?(\"+u+\")\",\"g\");if(!t||!t.match)return h;for(var m,p=0,v=(a=t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;p<v;p++){o=(r=a[p]).slice(1).trim(),l.length=0;var _=r.charAt(0);if(m=[_],\"a\"===_.toLowerCase())for(var y;y=g.exec(o);)for(var w=1;w<y.length;w++)l.push(y[w]);else for(;s=c.exec(o);)l.push(s[0]);w=0;for(var b=l.length;w<b;w++)n=parseFloat(l[w]),isNaN(n)||m.push(n);var x=e[_.toLowerCase()],C=i[_]||_;if(m.length-1>x)for(var T=1,E=m.length;T<E;T+=x)h.push([_].concat(m.slice(T,T+x))),_=C;else h.push(m)}return h},S.util.makePathSimpler=function(t){var e,i,r,n,o,a,h=0,l=0,c=t.length,u=0,d=0,f=[];for(i=0;i<c;++i){switch(r=!1,(e=t[i].slice(0))[0]){case\"l\":e[0]=\"L\",e[1]+=h,e[2]+=l;case\"L\":h=e[1],l=e[2];break;case\"h\":e[1]+=h;case\"H\":e[0]=\"L\",e[2]=l,h=e[1];break;case\"v\":e[1]+=l;case\"V\":e[0]=\"L\",l=e[1],e[1]=h,e[2]=l;break;case\"m\":e[0]=\"M\",e[1]+=h,e[2]+=l;case\"M\":h=e[1],l=e[2],u=e[1],d=e[2];break;case\"c\":e[0]=\"C\",e[1]+=h,e[2]+=l,e[3]+=h,e[4]+=l,e[5]+=h,e[6]+=l;case\"C\":o=e[3],a=e[4],h=e[5],l=e[6];break;case\"s\":e[0]=\"S\",e[1]+=h,e[2]+=l,e[3]+=h,e[4]+=l;case\"S\":\"C\"===n?(o=2*h-o,a=2*l-a):(o=h,a=l),h=e[3],l=e[4],e[0]=\"C\",e[5]=e[3],e[6]=e[4],e[3]=e[1],e[4]=e[2],e[1]=o,e[2]=a,o=e[3],a=e[4];break;case\"q\":e[0]=\"Q\",e[1]+=h,e[2]+=l,e[3]+=h,e[4]+=l;case\"Q\":o=e[1],a=e[2],h=e[3],l=e[4];break;case\"t\":e[0]=\"T\",e[1]+=h,e[2]+=l;case\"T\":\"Q\"===n?(o=2*h-o,a=2*l-a):(o=h,a=l),e[0]=\"Q\",h=e[1],l=e[2],e[1]=o,e[2]=a,e[3]=h,e[4]=l;break;case\"a\":e[0]=\"A\",e[6]+=h,e[7]+=l;case\"A\":r=!0,f=f.concat(s(h,l,e)),h=e[6],l=e[7];break;case\"z\":case\"Z\":h=u,l=d}r||f.push(e),n=e[0]}return f},S.util.getSmoothPathFromPoints=function(t,e){var i,r=[],n=new S.Point(t[0].x,t[0].y),s=new S.Point(t[1].x,t[1].y),o=t.length,a=1,h=0,l=o>2;for(e=e||0,l&&(a=t[2].x<s.x?-1:t[2].x===s.x?0:1,h=t[2].y<s.y?-1:t[2].y===s.y?0:1),r.push([\"M\",n.x-a*e,n.y-h*e]),i=1;i<o;i++){if(!n.eq(s)){var c=n.midPointFrom(s);r.push([\"Q\",n.x,n.y,c.x,c.y])}n=t[i],i+1<t.length&&(s=t[i+1])}return l&&(a=n.x>t[i-2].x?1:n.x===t[i-2].x?0:-1,h=n.y>t[i-2].y?1:n.y===t[i-2].y?0:-1),r.push([\"L\",n.x+a*e,n.y+h*e]),r},S.util.getPathSegmentsInfo=d,S.util.getBoundsOfCurve=function(e,i,r,n,s,o,a,h){var l;if(S.cachesBoundsOfCurve&&(l=t.call(arguments),S.boundsOfCurveCache[l]))return S.boundsOfCurveCache[l];var c,u,d,f,g,m,p,v,_=Math.sqrt,y=Math.min,w=Math.max,b=Math.abs,x=[],C=[[],[]];u=6*e-12*r+6*s,c=-3*e+9*r-9*s+3*a,d=3*r-3*e;for(var T=0;T<2;++T)if(T>0&&(u=6*i-12*n+6*o,c=-3*i+9*n-9*o+3*h,d=3*n-3*i),b(c)<1e-12){if(b(u)<1e-12)continue;0<(f=-d/u)&&f<1&&x.push(f)}else(p=u*u-4*d*c)<0||(0<(g=(-u+(v=_(p)))/(2*c))&&g<1&&x.push(g),0<(m=(-u-v)/(2*c))&&m<1&&x.push(m));for(var E,O,A,I=x.length,L=I;I--;)E=(A=1-(f=x[I]))*A*A*e+3*A*A*f*r+3*A*f*f*s+f*f*f*a,C[0][I]=E,O=A*A*A*i+3*A*A*f*n+3*A*f*f*o+f*f*f*h,C[1][I]=O;C[0][L]=e,C[1][L]=i,C[0][L+1]=a,C[1][L+1]=h;var D=[{x:y.apply(null,C[0]),y:y.apply(null,C[1])},{x:w.apply(null,C[0]),y:w.apply(null,C[1])}];return S.cachesBoundsOfCurve&&(S.boundsOfCurveCache[l]=D),D},S.util.getPointOnPath=function(t,e,i){i||(i=d(t));for(var r=0;e-i[r].length>0&&r<i.length-2;)e-=i[r].length,r++;var n,s=i[r],a=e/s.length,h=s.command,l=t[r];switch(h){case\"M\":return{x:s.x,y:s.y,angle:0};case\"Z\":case\"z\":return(n=new S.Point(s.x,s.y).lerp(new S.Point(s.destX,s.destY),a)).angle=Math.atan2(s.destY-s.y,s.destX-s.x),n;case\"L\":return(n=new S.Point(s.x,s.y).lerp(new S.Point(l[1],l[2]),a)).angle=Math.atan2(l[2]-s.y,l[1]-s.x),n;case\"C\":case\"Q\":return function(t,e){for(var i,r,n,s=0,a=0,h=t.iterator,l={x:t.x,y:t.y},c=.01,u=t.angleFinder;a<e&&c>1e-4;)i=h(s),n=s,(r=o(l.x,l.y,i.x,i.y))+a>e?(s-=c,c/=2):(l=i,s+=c,a+=r);return i.angle=u(n),i}(s,e)}},S.util.transformPath=function(t,e,i){return i&&(e=S.util.multiplyTransformMatrices(e,[1,0,0,1,-i.x,-i.y])),t.map((function(t){for(var i=t.slice(0),r={},n=1;n<t.length-1;n+=2)r.x=t[n],r.y=t[n+1],r=S.util.transformPoint(r,e),i[n]=r.x,i[n+1]=r.y;return i}))}}(),function(){var t=Array.prototype.slice;function e(t,e,i){if(t&&0!==t.length){var r=t.length-1,n=e?t[r][e]:t[r];if(e)for(;r--;)i(t[r][e],n)&&(n=t[r][e]);else for(;r--;)i(t[r],n)&&(n=t[r]);return n}}S.util.array={fill:function(t,e){for(var i=t.length;i--;)t[i]=e;return t},invoke:function(e,i){for(var r=t.call(arguments,2),n=[],s=0,o=e.length;s<o;s++)n[s]=r.length?e[s][i].apply(e[s],r):e[s][i].call(e[s]);return n},min:function(t,i){return e(t,i,(function(t,e){return t<e}))},max:function(t,i){return e(t,i,(function(t,e){return t>=e}))}}}(),function(){function t(e,i,r){if(r)if(!S.isLikelyNode&&i instanceof Element)e=i;else if(i instanceof Array){e=[];for(var n=0,s=i.length;n<s;n++)e[n]=t({},i[n],r)}else if(i&&\"object\"==typeof i)for(var o in i)\"canvas\"===o||\"group\"===o?e[o]=null:i.hasOwnProperty(o)&&(e[o]=t({},i[o],r));else e=i;else for(var o in i)e[o]=i[o];return e}S.util.object={extend:t,clone:function(e,i){return t({},e,i)}},S.util.object.extend(S.util,S.Observable)}(),function(){function t(t,e){var i=t.charCodeAt(e);if(isNaN(i))return\"\";if(i<55296||i>57343)return t.charAt(e);if(55296<=i&&i<=56319){if(t.length<=e+1)throw\"High surrogate without following low surrogate\";var r=t.charCodeAt(e+1);if(56320>r||r>57343)throw\"High surrogate without following low surrogate\";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw\"Low surrogate without preceding high surrogate\";var n=t.charCodeAt(e-1);if(55296>n||n>56319)throw\"Low surrogate without preceding high surrogate\";return!1}S.util.string={camelize:function(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():\"\"}))},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:function(t){return t.replace(/&/g,\"&amp;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&apos;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")},graphemeSplit:function(e){var i,r=0,n=[];for(r=0;r<e.length;r++)!1!==(i=t(e,r))&&n.push(i);return n}}}(),function(){var t=Array.prototype.slice,e=function(){},i=function(){for(var t in{toString:1})if(\"toString\"===t)return!1;return!0}(),r=function(t,e,r){for(var n in e)n in t.prototype&&\"function\"==typeof t.prototype[n]&&(e[n]+\"\").indexOf(\"callSuper\")>-1?t.prototype[n]=function(t){return function(){var i=this.constructor.superclass;this.constructor.superclass=r;var n=e[t].apply(this,arguments);if(this.constructor.superclass=i,\"initialize\"!==t)return n}}(n):t.prototype[n]=e[n],i&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};function n(){}function s(e){for(var i=null,r=this;r.constructor.superclass;){var n=r.constructor.superclass.prototype[e];if(r[e]!==n){i=n;break}r=r.constructor.superclass.prototype}return i?arguments.length>1?i.apply(this,t.call(arguments,1)):i.call(this):console.log(\"tried to callSuper \"+e+\", method not found in prototype chain\",this)}S.util.createClass=function(){var i=null,o=t.call(arguments,0);function a(){this.initialize.apply(this,arguments)}\"function\"==typeof o[0]&&(i=o.shift()),a.superclass=i,a.subclasses=[],i&&(n.prototype=i.prototype,a.prototype=new n,i.subclasses.push(a));for(var h=0,l=o.length;h<l;h++)r(a,o[h],i);return a.prototype.initialize||(a.prototype.initialize=e),a.prototype.constructor=a,a.prototype.callSuper=s,a}}(),l=!!S.document.createElement(\"div\").attachEvent,c=[\"touchstart\",\"touchmove\",\"touchend\"],S.util.addListener=function(t,e,i,r){t&&t.addEventListener(e,i,!l&&r)},S.util.removeListener=function(t,e,i,r){t&&t.removeEventListener(e,i,!l&&r)},S.util.getPointer=function(t){var e=t.target,i=S.util.getScrollLeftTop(e),r=function(t){var e=t.changedTouches;return e&&e[0]?e[0]:t}(t);return{x:r.clientX+i.left,y:r.clientY+i.top}},S.util.isTouchEvent=function(t){return c.indexOf(t.type)>-1||\"touch\"===t.pointerType},d=\"string\"==typeof(u=S.document.createElement(\"div\")).style.opacity,f=\"string\"==typeof u.style.filter,g=/alpha\\s*\\(\\s*opacity\\s*=\\s*([^\\)]+)\\)/,m=function(t){return t},d?m=function(t,e){return t.style.opacity=e,t}:f&&(m=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),g.test(i.filter)?(e=e>=.9999?\"\":\"alpha(opacity=\"+100*e+\")\",i.filter=i.filter.replace(g,e)):i.filter+=\" alpha(opacity=\"+100*e+\")\",t}),S.util.setStyle=function(t,e){var i=t.style;if(!i)return t;if(\"string\"==typeof e)return t.style.cssText+=\";\"+e,e.indexOf(\"opacity\")>-1?m(t,e.match(/opacity:\\s*(\\d?\\.?\\d*)/)[1]):t;for(var r in e)\"opacity\"===r?m(t,e[r]):i[\"float\"===r||\"cssFloat\"===r?void 0===i.styleFloat?\"cssFloat\":\"styleFloat\":r]=e[r];return t},function(){var t,e,i,r,n=Array.prototype.slice,s=function(t){return n.call(t,0)};try{t=s(S.document.childNodes)instanceof Array}catch(t){}function o(t,e){var i=S.document.createElement(t);for(var r in e)\"class\"===r?i.className=e[r]:\"for\"===r?i.htmlFor=e[r]:i.setAttribute(r,e[r]);return i}function a(t){for(var e=0,i=0,r=S.document.documentElement,n=S.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&((t=t.parentNode||t.host)===S.document?(e=n.scrollLeft||r.scrollLeft||0,i=n.scrollTop||r.scrollTop||0):(e+=t.scrollLeft||0,i+=t.scrollTop||0),1!==t.nodeType||\"fixed\"!==t.style.position););return{left:e,top:i}}t||(s=function(t){for(var e=new Array(t.length),i=t.length;i--;)e[i]=t[i];return e}),e=S.document.defaultView&&S.document.defaultView.getComputedStyle?function(t,e){var i=S.document.defaultView.getComputedStyle(t,null);return i?i[e]:void 0}:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i},i=S.document.documentElement.style,r=\"userSelect\"in i?\"userSelect\":\"MozUserSelect\"in i?\"MozUserSelect\":\"WebkitUserSelect\"in i?\"WebkitUserSelect\":\"KhtmlUserSelect\"in i?\"KhtmlUserSelect\":\"\",S.util.makeElementUnselectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=S.util.falseFunction),r?t.style[r]=\"none\":\"string\"==typeof t.unselectable&&(t.unselectable=\"on\"),t},S.util.makeElementSelectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=null),r?t.style[r]=\"\":\"string\"==typeof t.unselectable&&(t.unselectable=\"\"),t},S.util.setImageSmoothing=function(t,e){t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=e},S.util.getById=function(t){return\"string\"==typeof t?S.document.getElementById(t):t},S.util.toArray=s,S.util.addClass=function(t,e){t&&-1===(\" \"+t.className+\" \").indexOf(\" \"+e+\" \")&&(t.className+=(t.className?\" \":\"\")+e)},S.util.makeElement=o,S.util.wrapElement=function(t,e,i){return\"string\"==typeof e&&(e=o(e,i)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e},S.util.getScrollLeftTop=a,S.util.getElementOffset=function(t){var i,r,n=t&&t.ownerDocument,s={left:0,top:0},o={left:0,top:0},h={borderLeftWidth:\"left\",borderTopWidth:\"top\",paddingLeft:\"left\",paddingTop:\"top\"};if(!n)return o;for(var l in h)o[h[l]]+=parseInt(e(t,l),10)||0;return i=n.documentElement,void 0!==t.getBoundingClientRect&&(s=t.getBoundingClientRect()),r=a(t),{left:s.left+r.left-(i.clientLeft||0)+o.left,top:s.top+r.top-(i.clientTop||0)+o.top}},S.util.getNodeCanvas=function(t){var e=S.jsdomImplForWrapper(t);return e._canvas||e._image},S.util.cleanUpJsdomNode=function(t){if(S.isLikelyNode){var e=S.jsdomImplForWrapper(t);e&&(e._image=null,e._canvas=null,e._currentSrc=null,e._attributes=null,e._classList=null)}}}(),function(){function t(){}S.util.request=function(e,i){i||(i={});var r=i.method?i.method.toUpperCase():\"GET\",n=i.onComplete||function(){},s=new S.window.XMLHttpRequest,o=i.body||i.parameters;return s.onreadystatechange=function(){4===s.readyState&&(n(s),s.onreadystatechange=t)},\"GET\"===r&&(o=null,\"string\"==typeof i.parameters&&(e=function(t,e){return t+(/\\?/.test(t)?\"&\":\"?\")+e}(e,i.parameters))),s.open(r,e,!0),\"POST\"!==r&&\"PUT\"!==r||s.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\"),s.send(o),s}}(),S.log=console.log,S.warn=console.warn,function(){var t=S.util.object.extend,e=S.util.object.clone,i=[];function r(){return!1}function n(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e}S.util.object.extend(i,{cancelAll:function(){var t=this.splice(0);return t.forEach((function(t){t.cancel()})),t},cancelByCanvas:function(t){if(!t)return[];var e=this.filter((function(e){return\"object\"==typeof e.target&&e.target.canvas===t}));return e.forEach((function(t){t.cancel()})),e},cancelByTarget:function(t){var e=this.findAnimationsByTarget(t);return e.forEach((function(t){t.cancel()})),e},findAnimationIndex:function(t){return this.indexOf(this.findAnimation(t))},findAnimation:function(t){return this.find((function(e){return e.cancel===t}))},findAnimationsByTarget:function(t){return t?this.filter((function(e){return e.target===t})):[]}});var s=S.window.requestAnimationFrame||S.window.webkitRequestAnimationFrame||S.window.mozRequestAnimationFrame||S.window.oRequestAnimationFrame||S.window.msRequestAnimationFrame||function(t){return S.window.setTimeout(t,1e3/60)},o=S.window.cancelAnimationFrame||S.window.clearTimeout;function a(){return s.apply(S.window,arguments)}S.util.animate=function(i){i||(i={});var s,o=!1,h=function(){var t=S.runningAnimations.indexOf(s);return t>-1&&S.runningAnimations.splice(t,1)[0]};return s=t(e(i),{cancel:function(){return o=!0,h()},currentValue:\"startValue\"in i?i.startValue:0,completionRate:0,durationRate:0}),S.runningAnimations.push(s),a((function(t){var e,l=t||+new Date,c=i.duration||500,u=l+c,d=i.onChange||r,f=i.abort||r,g=i.onComplete||r,m=i.easing||n,p=\"startValue\"in i&&i.startValue.length>0,v=\"startValue\"in i?i.startValue:0,_=\"endValue\"in i?i.endValue:100,y=i.byValue||(p?v.map((function(t,e){return _[e]-v[e]})):_-v);i.onStart&&i.onStart(),function t(i){var r=(e=i||+new Date)>u?c:e-l,n=r/c,w=p?v.map((function(t,e){return m(r,v[e],y[e],c)})):m(r,v,y,c),b=p?Math.abs((w[0]-v[0])/y[0]):Math.abs((w-v)/y);if(s.currentValue=p?w.slice():w,s.completionRate=b,s.durationRate=n,!o){if(!f(w,b,n))return e>u?(s.currentValue=p?_.slice():_,s.completionRate=1,s.durationRate=1,d(p?_.slice():_,1,1),g(_,1,1),void h()):(d(w,b,n),void a(t));h()}}(l)})),s.cancel},S.util.requestAnimFrame=a,S.util.cancelAnimFrame=function(){return o.apply(S.window,arguments)},S.runningAnimations=i}(),function(){function t(t,e,i){var r=\"rgba(\"+parseInt(t[0]+i*(e[0]-t[0]),10)+\",\"+parseInt(t[1]+i*(e[1]-t[1]),10)+\",\"+parseInt(t[2]+i*(e[2]-t[2]),10);return(r+=\",\"+(t&&e?parseFloat(t[3]+i*(e[3]-t[3])):1))+\")\"}S.util.animateColor=function(e,i,r,n){var s=new S.Color(e).getSource(),o=new S.Color(i).getSource(),a=n.onComplete,h=n.onChange;return n=n||{},S.util.animate(S.util.object.extend(n,{duration:r||500,startValue:s,endValue:o,byValue:o,easing:function(e,i,r,s){return t(i,r,n.colorEasing?n.colorEasing(e,s):1-Math.cos(e/s*(Math.PI/2)))},onComplete:function(e,i,r){if(a)return a(t(o,o,0),i,r)},onChange:function(e,i,r){if(h){if(Array.isArray(e))return h(t(e,e,0),i,r);h(e,i,r)}}}))}}(),function(){function t(t,e,i,r){return t<Math.abs(e)?(t=e,r=i/4):r=0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:r}}function e(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function i(t,e,i,n){return i-r(n-t,0,i,n)+e}function r(t,e,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}S.util.ease={easeInQuad:function(t,e,i,r){return i*(t/=r)*t+e},easeOutQuad:function(t,e,i,r){return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,r){return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,i,r){return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,r){return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,i,r){return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,r){return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,i,r){return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,r){return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,i,r){return 0===t?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,i,r){return t===r?e+i:i*(1-Math.pow(2,-10*t/r))+e},easeInOutExpo:function(t,e,i,r){return 0===t?e:t===r?e+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(i,r,n,s){var o=0;return 0===i?r:1==(i/=s)?r+n:(o||(o=.3*s),-e(t(n,n,o,1.70158),i,s)+r)},easeOutElastic:function(e,i,r,n){var s=0;if(0===e)return i;if(1==(e/=n))return i+r;s||(s=.3*n);var o=t(r,r,s,1.70158);return o.a*Math.pow(2,-10*e)*Math.sin((e*n-o.s)*(2*Math.PI)/o.p)+o.c+i},easeInOutElastic:function(i,r,n,s){var o=0;if(0===i)return r;if(2==(i/=s/2))return r+n;o||(o=s*(.3*1.5));var a=t(n,n,o,1.70158);return i<1?-.5*e(a,i,s)+r:a.a*Math.pow(2,-10*(i-=1))*Math.sin((i*s-a.s)*(2*Math.PI)/a.p)*.5+a.c+r},easeInBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),i*(t/=r)*t*((n+1)*t-n)+e},easeOutBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),i*((t=t/r-1)*t*((n+1)*t+n)+1)+e},easeInOutBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),(t/=r/2)<1?i/2*(t*t*((1+(n*=1.525))*t-n))+e:i/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},easeInBounce:i,easeOutBounce:r,easeInOutBounce:function(t,e,n,s){return t<s/2?.5*i(2*t,0,n,s)+e:.5*r(2*t-s,0,n,s)+.5*n+e}}}(),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.object.clone,n=e.util.toFixed,s=e.util.parseUnit,o=e.util.multiplyTransformMatrices,a={cx:\"left\",x:\"left\",r:\"radius\",cy:\"top\",y:\"top\",display:\"visible\",visibility:\"visible\",transform:\"transformMatrix\",\"fill-opacity\":\"fillOpacity\",\"fill-rule\":\"fillRule\",\"font-family\":\"fontFamily\",\"font-size\":\"fontSize\",\"font-style\":\"fontStyle\",\"font-weight\":\"fontWeight\",\"letter-spacing\":\"charSpacing\",\"paint-order\":\"paintFirst\",\"stroke-dasharray\":\"strokeDashArray\",\"stroke-dashoffset\":\"strokeDashOffset\",\"stroke-linecap\":\"strokeLineCap\",\"stroke-linejoin\":\"strokeLineJoin\",\"stroke-miterlimit\":\"strokeMiterLimit\",\"stroke-opacity\":\"strokeOpacity\",\"stroke-width\":\"strokeWidth\",\"text-decoration\":\"textDecoration\",\"text-anchor\":\"textAnchor\",opacity:\"opacity\",\"clip-path\":\"clipPath\",\"clip-rule\":\"clipRule\",\"vector-effect\":\"strokeUniform\",\"image-rendering\":\"imageSmoothing\"},h={stroke:\"strokeOpacity\",fill:\"fillOpacity\"},l=\"font-size\",c=\"clip-path\";function u(t){return t in a?a[t]:t}function d(t,i,r,n){var a,h=Array.isArray(i);if(\"fill\"!==t&&\"stroke\"!==t||\"none\"!==i){if(\"strokeUniform\"===t)return\"non-scaling-stroke\"===i;if(\"strokeDashArray\"===t)i=\"none\"===i?null:i.replace(/,/g,\" \").split(/\\s+/).map(parseFloat);else if(\"transformMatrix\"===t)i=r&&r.transformMatrix?o(r.transformMatrix,e.parseTransformAttribute(i)):e.parseTransformAttribute(i);else if(\"visible\"===t)i=\"none\"!==i&&\"hidden\"!==i,r&&!1===r.visible&&(i=!1);else if(\"opacity\"===t)i=parseFloat(i),r&&void 0!==r.opacity&&(i*=r.opacity);else if(\"textAnchor\"===t)i=\"start\"===i?\"left\":\"end\"===i?\"right\":\"center\";else if(\"charSpacing\"===t)a=s(i,n)/n*1e3;else if(\"paintFirst\"===t){var l=i.indexOf(\"fill\"),c=i.indexOf(\"stroke\");i=\"fill\",(l>-1&&c>-1&&c<l||-1===l&&c>-1)&&(i=\"stroke\")}else{if(\"href\"===t||\"xlink:href\"===t||\"font\"===t)return i;if(\"imageSmoothing\"===t)return\"optimizeQuality\"===i;a=h?i.map(s):s(i,n)}}else i=\"\";return!h&&isNaN(a)?i:a}function f(t){return new RegExp(\"^(\"+t.join(\"|\")+\")\\\\b\",\"i\")}function g(t,e){var i,r,n,s,o=[];for(n=0,s=e.length;n<s;n++)i=e[n],r=t.getElementsByTagName(i),o=o.concat(Array.prototype.slice.call(r));return o}function m(t,e){var i,r=!0;return(i=p(t,e.pop()))&&e.length&&(r=function(t,e){for(var i,r=!0;t.parentNode&&1===t.parentNode.nodeType&&e.length;)r&&(i=e.pop()),r=p(t=t.parentNode,i);return 0===e.length}(t,e)),i&&r&&0===e.length}function p(t,e){var i,r,n=t.nodeName,s=t.getAttribute(\"class\"),o=t.getAttribute(\"id\");if(i=new RegExp(\"^\"+n,\"i\"),e=e.replace(i,\"\"),o&&e.length&&(i=new RegExp(\"#\"+o+\"(?![a-zA-Z\\\\-]+)\",\"i\"),e=e.replace(i,\"\")),s&&e.length)for(r=(s=s.split(\" \")).length;r--;)i=new RegExp(\"\\\\.\"+s[r]+\"(?![a-zA-Z\\\\-]+)\",\"i\"),e=e.replace(i,\"\");return 0===e.length}function v(t,e){var i;if(t.getElementById&&(i=t.getElementById(e)),i)return i;var r,n,s,o=t.getElementsByTagName(\"*\");for(n=0,s=o.length;n<s;n++)if(e===(r=o[n]).getAttribute(\"id\"))return r}e.svgValidTagNamesRegEx=f([\"path\",\"circle\",\"polygon\",\"polyline\",\"ellipse\",\"rect\",\"line\",\"image\",\"text\"]),e.svgViewBoxElementsRegEx=f([\"symbol\",\"image\",\"marker\",\"pattern\",\"view\",\"svg\"]),e.svgInvalidAncestorsRegEx=f([\"pattern\",\"defs\",\"symbol\",\"metadata\",\"clipPath\",\"mask\",\"desc\"]),e.svgValidParentsRegEx=f([\"symbol\",\"g\",\"a\",\"svg\",\"clipPath\",\"defs\"]),e.cssRules={},e.gradientDefs={},e.clipPaths={},e.parseTransformAttribute=function(){function t(t,i,r){t[r]=Math.tan(e.util.degreesToRadians(i[0]))}var i=e.iMatrix,r=e.reNum,n=e.commaWsp,s=\"(?:(?:(matrix)\\\\s*\\\\(\\\\s*(\"+r+\")\"+n+\"(\"+r+\")\"+n+\"(\"+r+\")\"+n+\"(\"+r+\")\"+n+\"(\"+r+\")\"+n+\"(\"+r+\")\\\\s*\\\\))|(?:(translate)\\\\s*\\\\(\\\\s*(\"+r+\")(?:\"+n+\"(\"+r+\"))?\\\\s*\\\\))|(?:(scale)\\\\s*\\\\(\\\\s*(\"+r+\")(?:\"+n+\"(\"+r+\"))?\\\\s*\\\\))|(?:(rotate)\\\\s*\\\\(\\\\s*(\"+r+\")(?:\"+n+\"(\"+r+\")\"+n+\"(\"+r+\"))?\\\\s*\\\\))|(?:(skewX)\\\\s*\\\\(\\\\s*(\"+r+\")\\\\s*\\\\))|(?:(skewY)\\\\s*\\\\(\\\\s*(\"+r+\")\\\\s*\\\\)))\",o=new RegExp(\"^\\\\s*(?:(?:\"+s+\"(?:\"+n+\"*\"+s+\")*)?)\\\\s*$\"),a=new RegExp(s,\"g\");return function(r){var n=i.concat(),h=[];if(!r||r&&!o.test(r))return n;r.replace(a,(function(r){var o=new RegExp(s).exec(r).filter((function(t){return!!t})),a=o[1],l=o.slice(2).map(parseFloat);switch(a){case\"translate\":!function(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}(n,l);break;case\"rotate\":l[0]=e.util.degreesToRadians(l[0]),function(t,i){var r=e.util.cos(i[0]),n=e.util.sin(i[0]),s=0,o=0;3===i.length&&(s=i[1],o=i[2]),t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=s-(r*s-n*o),t[5]=o-(n*s+r*o)}(n,l);break;case\"scale\":!function(t,e){var i=e[0],r=2===e.length?e[1]:e[0];t[0]=i,t[3]=r}(n,l);break;case\"skewX\":t(n,l,2);break;case\"skewY\":t(n,l,1);break;case\"matrix\":n=l}h.push(n.concat()),n=i.concat()}));for(var l=h[0];h.length>1;)h.shift(),l=e.util.multiplyTransformMatrices(l,h[0]);return l}}();var _=new RegExp(\"^\\\\s*(\"+e.reNum+\"+)\\\\s*,?\\\\s*(\"+e.reNum+\"+)\\\\s*,?\\\\s*(\"+e.reNum+\"+)\\\\s*,?\\\\s*(\"+e.reNum+\"+)\\\\s*$\");function y(t){if(!e.svgViewBoxElementsRegEx.test(t.nodeName))return{};var i,r,n,o,a,h,l=t.getAttribute(\"viewBox\"),c=1,u=1,d=t.getAttribute(\"width\"),f=t.getAttribute(\"height\"),g=t.getAttribute(\"x\")||0,m=t.getAttribute(\"y\")||0,p=t.getAttribute(\"preserveAspectRatio\")||\"\",v=!l||!(l=l.match(_)),y=!d||!f||\"100%\"===d||\"100%\"===f,w=v&&y,b={},x=\"\",C=0,S=0;if(b.width=0,b.height=0,b.toBeParsed=w,v&&(g||m)&&t.parentNode&&\"#document\"!==t.parentNode.nodeName&&(x=\" translate(\"+s(g)+\" \"+s(m)+\") \",a=(t.getAttribute(\"transform\")||\"\")+x,t.setAttribute(\"transform\",a),t.removeAttribute(\"x\"),t.removeAttribute(\"y\")),w)return b;if(v)return b.width=s(d),b.height=s(f),b;if(i=-parseFloat(l[1]),r=-parseFloat(l[2]),n=parseFloat(l[3]),o=parseFloat(l[4]),b.minX=i,b.minY=r,b.viewBoxWidth=n,b.viewBoxHeight=o,y?(b.width=n,b.height=o):(b.width=s(d),b.height=s(f),c=b.width/n,u=b.height/o),\"none\"!==(p=e.util.parsePreserveAspectRatioAttribute(p)).alignX&&(\"meet\"===p.meetOrSlice&&(u=c=c>u?u:c),\"slice\"===p.meetOrSlice&&(u=c=c>u?c:u),C=b.width-n*c,S=b.height-o*c,\"Mid\"===p.alignX&&(C/=2),\"Mid\"===p.alignY&&(S/=2),\"Min\"===p.alignX&&(C=0),\"Min\"===p.alignY&&(S=0)),1===c&&1===u&&0===i&&0===r&&0===g&&0===m)return b;if((g||m)&&\"#document\"!==t.parentNode.nodeName&&(x=\" translate(\"+s(g)+\" \"+s(m)+\") \"),a=x+\" matrix(\"+c+\" 0 0 \"+u+\" \"+(i*c+C)+\" \"+(r*u+S)+\") \",\"svg\"===t.nodeName){for(h=t.ownerDocument.createElementNS(e.svgNS,\"g\");t.firstChild;)h.appendChild(t.firstChild);t.appendChild(h)}else(h=t).removeAttribute(\"x\"),h.removeAttribute(\"y\"),a=h.getAttribute(\"transform\")+a;return h.setAttribute(\"transform\",a),b}function w(t,e){var i=\"xlink:href\",r=v(t,e.getAttribute(i).slice(1));if(r&&r.getAttribute(i)&&w(t,r),[\"gradientTransform\",\"x1\",\"x2\",\"y1\",\"y2\",\"gradientUnits\",\"cx\",\"cy\",\"r\",\"fx\",\"fy\"].forEach((function(t){r&&!e.hasAttribute(t)&&r.hasAttribute(t)&&e.setAttribute(t,r.getAttribute(t))})),!e.children.length)for(var n=r.cloneNode(!0);n.firstChild;)e.appendChild(n.firstChild);e.removeAttribute(i)}e.parseSVGDocument=function(t,i,n,s){if(t){!function(t){for(var i=g(t,[\"use\",\"svg:use\"]),r=0;i.length&&r<i.length;){var n=i[r],s=n.getAttribute(\"xlink:href\")||n.getAttribute(\"href\");if(null===s)return;var o,a,h,l,c=s.slice(1),u=n.getAttribute(\"x\")||0,d=n.getAttribute(\"y\")||0,f=v(t,c).cloneNode(!0),m=(f.getAttribute(\"transform\")||\"\")+\" translate(\"+u+\", \"+d+\")\",p=i.length,_=e.svgNS;if(y(f),/^svg$/i.test(f.nodeName)){var w=f.ownerDocument.createElementNS(_,\"g\");for(a=0,l=(h=f.attributes).length;a<l;a++)o=h.item(a),w.setAttributeNS(_,o.nodeName,o.nodeValue);for(;f.firstChild;)w.appendChild(f.firstChild);f=w}for(a=0,l=(h=n.attributes).length;a<l;a++)\"x\"!==(o=h.item(a)).nodeName&&\"y\"!==o.nodeName&&\"xlink:href\"!==o.nodeName&&\"href\"!==o.nodeName&&(\"transform\"===o.nodeName?m=o.nodeValue+\" \"+m:f.setAttribute(o.nodeName,o.nodeValue));f.setAttribute(\"transform\",m),f.setAttribute(\"instantiated_by_use\",\"1\"),f.removeAttribute(\"id\"),n.parentNode.replaceChild(f,n),i.length===p&&r++}}(t);var o,a,h=e.Object.__uid++,l=y(t),c=e.util.toArray(t.getElementsByTagName(\"*\"));if(l.crossOrigin=s&&s.crossOrigin,l.svgUid=h,0===c.length&&e.isLikelyNode){var u=[];for(o=0,a=(c=t.selectNodes('//*[name(.)!=\"svg\"]')).length;o<a;o++)u[o]=c[o];c=u}var d=c.filter((function(t){return y(t),e.svgValidTagNamesRegEx.test(t.nodeName.replace(\"svg:\",\"\"))&&!function(t,e){for(;t&&(t=t.parentNode);)if(t.nodeName&&e.test(t.nodeName.replace(\"svg:\",\"\"))&&!t.getAttribute(\"instantiated_by_use\"))return!0;return!1}(t,e.svgInvalidAncestorsRegEx)}));if(!d||d&&!d.length)i&&i([],{});else{var f={};c.filter((function(t){return\"clipPath\"===t.nodeName.replace(\"svg:\",\"\")})).forEach((function(t){var i=t.getAttribute(\"id\");f[i]=e.util.toArray(t.getElementsByTagName(\"*\")).filter((function(t){return e.svgValidTagNamesRegEx.test(t.nodeName.replace(\"svg:\",\"\"))}))})),e.gradientDefs[h]=e.getGradientDefs(t),e.cssRules[h]=e.getCSSRules(t),e.clipPaths[h]=f,e.parseElements(d,(function(t,r){i&&(i(t,l,r,c),delete e.gradientDefs[h],delete e.cssRules[h],delete e.clipPaths[h])}),r(l),n,s)}}};var b=new RegExp(\"(normal|italic)?\\\\s*(normal|small-caps)?\\\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\\\s*(\"+e.reNum+\"(?:px|cm|mm|em|pt|pc|in)*)(?:\\\\/(normal|\"+e.reNum+\"))?\\\\s+(.*)\");i(e,{parseFontDeclaration:function(t,e){var i=t.match(b);if(i){var r=i[1],n=i[3],o=i[4],a=i[5],h=i[6];r&&(e.fontStyle=r),n&&(e.fontWeight=isNaN(parseFloat(n))?n:parseFloat(n)),o&&(e.fontSize=s(o)),h&&(e.fontFamily=h),a&&(e.lineHeight=\"normal\"===a?1:a)}},getGradientDefs:function(t){var e,i=g(t,[\"linearGradient\",\"radialGradient\",\"svg:linearGradient\",\"svg:radialGradient\"]),r=0,n={};for(r=i.length;r--;)(e=i[r]).getAttribute(\"xlink:href\")&&w(t,e),n[e.getAttribute(\"id\")]=e;return n},parseAttributes:function(t,r,o){if(t){var a,f,g,p={};void 0===o&&(o=t.getAttribute(\"svgUid\")),t.parentNode&&e.svgValidParentsRegEx.test(t.parentNode.nodeName)&&(p=e.parseAttributes(t.parentNode,r,o));var v=r.reduce((function(e,i){return(a=t.getAttribute(i))&&(e[i]=a),e}),{}),_=i(function(t,i){var r={};for(var n in e.cssRules[i])if(m(t,n.split(\" \")))for(var s in e.cssRules[i][n])r[s]=e.cssRules[i][n][s];return r}(t,o),e.parseStyleAttribute(t));v=i(v,_),_[c]&&t.setAttribute(c,_[c]),f=g=p.fontSize||e.Text.DEFAULT_SVG_FONT_SIZE,v[l]&&(v[l]=f=s(v[l],g));var y,w,b={};for(var x in v)w=d(y=u(x),v[x],p,f),b[y]=w;b&&b.font&&e.parseFontDeclaration(b.font,b);var C=i(p,b);return e.svgValidParentsRegEx.test(t.nodeName)?C:function(t){for(var i in h)if(void 0!==t[h[i]]&&\"\"!==t[i]){if(void 0===t[i]){if(!e.Object.prototype[i])continue;t[i]=e.Object.prototype[i]}if(0!==t[i].indexOf(\"url(\")){var r=new e.Color(t[i]);t[i]=r.setAlpha(n(r.getAlpha()*t[h[i]],2)).toRgba()}}return t}(C)}},parseElements:function(t,i,r,n,s){new e.ElementsParser(t,i,r,n,s).parse()},parseStyleAttribute:function(t){var e={},i=t.getAttribute(\"style\");return i?(\"string\"==typeof i?function(t,e){var i,r;t.replace(/;\\s*$/,\"\").split(\";\").forEach((function(t){var n=t.split(\":\");i=n[0].trim().toLowerCase(),r=n[1].trim(),e[i]=r}))}(i,e):function(t,e){var i,r;for(var n in t)void 0!==t[n]&&(i=n.toLowerCase(),r=t[n],e[i]=r)}(i,e),e):e},parsePointsAttribute:function(t){if(!t)return null;var e,i,r=[];for(e=0,i=(t=(t=t.replace(/,/g,\" \").trim()).split(/\\s+/)).length;e<i;e+=2)r.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return r},getCSSRules:function(t){var i,r,n=t.getElementsByTagName(\"style\"),s={};for(i=0,r=n.length;i<r;i++){var o=n[i].textContent;\"\"!==(o=o.replace(/\\/\\*[\\s\\S]*?\\*\\//g,\"\")).trim()&&o.split(\"}\").filter((function(t){return t.trim()})).forEach((function(t){var n=t.split(\"{\"),o={},a=n[1].trim().split(\";\").filter((function(t){return t.trim()}));for(i=0,r=a.length;i<r;i++){var h=a[i].split(\":\"),l=h[0].trim(),c=h[1].trim();o[l]=c}(t=n[0].trim()).split(\",\").forEach((function(t){\"\"!==(t=t.replace(/^svg/i,\"\").trim())&&(s[t]?e.util.object.extend(s[t],o):s[t]=e.util.object.clone(o))}))}))}return s},loadSVGFromURL:function(t,i,r,n){t=t.replace(/^\\n\\s*/,\"\").trim(),new e.util.request(t,{method:\"get\",onComplete:function(t){var s=t.responseXML;if(!s||!s.documentElement)return i&&i(null),!1;e.parseSVGDocument(s.documentElement,(function(t,e,r,n){i&&i(t,e,r,n)}),r,n)}})},loadSVGFromString:function(t,i,r,n){var s=(new e.window.DOMParser).parseFromString(t.trim(),\"text/xml\");e.parseSVGDocument(s.documentElement,(function(t,e,r,n){i(t,e,r,n)}),r,n)}})}(e),S.ElementsParser=function(t,e,i,r,n,s){this.elements=t,this.callback=e,this.options=i,this.reviver=r,this.svgUid=i&&i.svgUid||0,this.parsingOptions=n,this.regexUrl=/^url\\(['\"]?#([^'\"]+)['\"]?\\)/g,this.doc=s},(p=S.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},p.createObjects=function(){var t=this;this.elements.forEach((function(e,i){e.setAttribute(\"svgUid\",t.svgUid),t.createObject(e,i)}))},p.findTag=function(t){return S[S.util.string.capitalize(t.tagName.replace(\"svg:\",\"\"))]},p.createObject=function(t,e){var i=this.findTag(t);if(i&&i.fromElement)try{i.fromElement(t,this.createCallback(e,t),this.options)}catch(t){S.log(t)}else this.checkIfDone()},p.createCallback=function(t,e){var i=this;return function(r){var n;i.resolveGradient(r,e,\"fill\"),i.resolveGradient(r,e,\"stroke\"),r instanceof S.Image&&r._originalElement&&(n=r.parsePreserveAspectRatioAttribute(e)),r._removeTransformMatrix(n),i.resolveClipPath(r,e),i.reviver&&i.reviver(e,r),i.instances[t]=r,i.checkIfDone()}},p.extractPropertyDefinition=function(t,e,i){var r=t[e],n=this.regexUrl;if(n.test(r)){n.lastIndex=0;var s=n.exec(r)[1];return n.lastIndex=0,S[i][this.svgUid][s]}},p.resolveGradient=function(t,e,i){var r=this.extractPropertyDefinition(t,i,\"gradientDefs\");if(r){var n=e.getAttribute(i+\"-opacity\"),s=S.Gradient.fromElement(r,t,n,this.options);t.set(i,s)}},p.createClipPathCallback=function(t,e){return function(t){t._removeTransformMatrix(),t.fillRule=t.clipRule,e.push(t)}},p.resolveClipPath=function(t,e){var i,r,n,s,o=this.extractPropertyDefinition(t,\"clipPath\",\"clipPaths\");if(o){n=[],r=S.util.invertTransform(t.calcTransformMatrix());for(var a=o[0].parentNode,h=e;h.parentNode&&h.getAttribute(\"clip-path\")!==t.clipPath;)h=h.parentNode;h.parentNode.appendChild(a);for(var l=0;l<o.length;l++)i=o[l],this.findTag(i).fromElement(i,this.createClipPathCallback(t,n),this.options);o=1===n.length?n[0]:new S.Group(n),s=S.util.multiplyTransformMatrices(r,o.calcTransformMatrix()),o.clipPath&&this.resolveClipPath(o,h);var c=S.util.qrDecompose(s);o.flipX=!1,o.flipY=!1,o.set(\"scaleX\",c.scaleX),o.set(\"scaleY\",c.scaleY),o.angle=c.angle,o.skewX=c.skewX,o.skewY=0,o.setPositionByOrigin({x:c.translateX,y:c.translateY},\"center\",\"center\"),t.clipPath=o}else delete t.clipPath},p.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter((function(t){return null!=t})),this.callback(this.instances,this.elements))},function(t){var e=t.fabric||(t.fabric={});function i(t,e){this.x=t,this.y=e}e.Point?e.warn(\"fabric.Point is already defined\"):(e.Point=i,i.prototype={type:\"point\",constructor:i,add:function(t){return new i(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new i(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new i(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new i(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new i(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new i(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return void 0===e&&(e=.5),e=Math.max(Math.min(1,e),0),new i(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new i(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new i(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+\",\"+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i},clone:function(){return new i(this.x,this.y)}})}(e),function(t){var e=t.fabric||(t.fabric={});function i(t){this.status=t,this.points=[]}e.Intersection?e.warn(\"fabric.Intersection is already defined\"):(e.Intersection=i,e.Intersection.prototype={constructor:i,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},e.Intersection.intersectLineLine=function(t,r,n,s){var o,a=(s.x-n.x)*(t.y-n.y)-(s.y-n.y)*(t.x-n.x),h=(r.x-t.x)*(t.y-n.y)-(r.y-t.y)*(t.x-n.x),l=(s.y-n.y)*(r.x-t.x)-(s.x-n.x)*(r.y-t.y);if(0!==l){var c=a/l,u=h/l;0<=c&&c<=1&&0<=u&&u<=1?(o=new i(\"Intersection\")).appendPoint(new e.Point(t.x+c*(r.x-t.x),t.y+c*(r.y-t.y))):o=new i}else o=new i(0===a||0===h?\"Coincident\":\"Parallel\");return o},e.Intersection.intersectLinePolygon=function(t,e,r){var n,s,o,a,h=new i,l=r.length;for(a=0;a<l;a++)n=r[a],s=r[(a+1)%l],o=i.intersectLineLine(t,e,n,s),h.appendPoints(o.points);return h.points.length>0&&(h.status=\"Intersection\"),h},e.Intersection.intersectPolygonPolygon=function(t,e){var r,n=new i,s=t.length;for(r=0;r<s;r++){var o=t[r],a=t[(r+1)%s],h=i.intersectLinePolygon(o,a,e);n.appendPoints(h.points)}return n.points.length>0&&(n.status=\"Intersection\"),n},e.Intersection.intersectPolygonRectangle=function(t,r,n){var s=r.min(n),o=r.max(n),a=new e.Point(o.x,s.y),h=new e.Point(s.x,o.y),l=i.intersectLinePolygon(s,a,t),c=i.intersectLinePolygon(a,o,t),u=i.intersectLinePolygon(o,h,t),d=i.intersectLinePolygon(h,s,t),f=new i;return f.appendPoints(l.points),f.appendPoints(c.points),f.appendPoints(u.points),f.appendPoints(d.points),f.points.length>0&&(f.status=\"Intersection\"),f})}(e),function(t){var e=t.fabric||(t.fabric={});function i(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function r(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}e.Color?e.warn(\"fabric.Color is already defined.\"):(e.Color=i,e.Color.prototype={_tryParsingColor:function(t){var e;t in i.colorNameMap&&(t=i.colorNameMap[t]),\"transparent\"===t&&(e=[255,255,255,0]),e||(e=i.sourceFromHex(t)),e||(e=i.sourceFromRgb(t)),e||(e=i.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,i,r){t/=255,i/=255,r/=255;var n,s,o,a=e.util.array.max([t,i,r]),h=e.util.array.min([t,i,r]);if(o=(a+h)/2,a===h)n=s=0;else{var l=a-h;switch(s=o>.5?l/(2-a-h):l/(a+h),a){case t:n=(i-r)/l+(i<r?6:0);break;case i:n=(r-t)/l+2;break;case r:n=(t-i)/l+4}n/=6}return[Math.round(360*n),Math.round(100*s),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return\"rgb(\"+t[0]+\",\"+t[1]+\",\"+t[2]+\")\"},toRgba:function(){var t=this.getSource();return\"rgba(\"+t[0]+\",\"+t[1]+\",\"+t[2]+\",\"+t[3]+\")\"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return\"hsl(\"+e[0]+\",\"+e[1]+\"%,\"+e[2]+\"%)\"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return\"hsla(\"+e[0]+\",\"+e[1]+\"%,\"+e[2]+\"%,\"+t[3]+\")\"},toHex:function(){var t,e,i,r=this.getSource();return t=1===(t=r[0].toString(16)).length?\"0\"+t:t,e=1===(e=r[1].toString(16)).length?\"0\"+e:e,i=1===(i=r[2].toString(16)).length?\"0\"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=1===(t=(t=Math.round(255*e[3])).toString(16)).length?\"0\"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),r=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,r]),this},overlayWith:function(t){t instanceof i||(t=new i(t));var e,r=[],n=this.getAlpha(),s=this.getSource(),o=t.getSource();for(e=0;e<3;e++)r.push(Math.round(.5*s[e]+.5*o[e]));return r[3]=n,this.setSource(r),this}},e.Color.reRGBa=/^rgba?\\(\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*(?:\\s*,\\s*((?:\\d*\\.?\\d+)?)\\s*)?\\)$/i,e.Color.reHSLa=/^hsla?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3}\\%)\\s*,\\s*(\\d{1,3}\\%)\\s*(?:\\s*,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)$/i,e.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,e.Color.colorNameMap={aliceblue:\"#F0F8FF\",antiquewhite:\"#FAEBD7\",aqua:\"#00FFFF\",aquamarine:\"#7FFFD4\",azure:\"#F0FFFF\",beige:\"#F5F5DC\",bisque:\"#FFE4C4\",black:\"#000000\",blanchedalmond:\"#FFEBCD\",blue:\"#0000FF\",blueviolet:\"#8A2BE2\",brown:\"#A52A2A\",burlywood:\"#DEB887\",cadetblue:\"#5F9EA0\",chartreuse:\"#7FFF00\",chocolate:\"#D2691E\",coral:\"#FF7F50\",cornflowerblue:\"#6495ED\",cornsilk:\"#FFF8DC\",crimson:\"#DC143C\",cyan:\"#00FFFF\",darkblue:\"#00008B\",darkcyan:\"#008B8B\",darkgoldenrod:\"#B8860B\",darkgray:\"#A9A9A9\",darkgrey:\"#A9A9A9\",darkgreen:\"#006400\",darkkhaki:\"#BDB76B\",darkmagenta:\"#8B008B\",darkolivegreen:\"#556B2F\",darkorange:\"#FF8C00\",darkorchid:\"#9932CC\",darkred:\"#8B0000\",darksalmon:\"#E9967A\",darkseagreen:\"#8FBC8F\",darkslateblue:\"#483D8B\",darkslategray:\"#2F4F4F\",darkslategrey:\"#2F4F4F\",darkturquoise:\"#00CED1\",darkviolet:\"#9400D3\",deeppink:\"#FF1493\",deepskyblue:\"#00BFFF\",dimgray:\"#696969\",dimgrey:\"#696969\",dodgerblue:\"#1E90FF\",firebrick:\"#B22222\",floralwhite:\"#FFFAF0\",forestgreen:\"#228B22\",fuchsia:\"#FF00FF\",gainsboro:\"#DCDCDC\",ghostwhite:\"#F8F8FF\",gold:\"#FFD700\",goldenrod:\"#DAA520\",gray:\"#808080\",grey:\"#808080\",green:\"#008000\",greenyellow:\"#ADFF2F\",honeydew:\"#F0FFF0\",hotpink:\"#FF69B4\",indianred:\"#CD5C5C\",indigo:\"#4B0082\",ivory:\"#FFFFF0\",khaki:\"#F0E68C\",lavender:\"#E6E6FA\",lavenderblush:\"#FFF0F5\",lawngreen:\"#7CFC00\",lemonchiffon:\"#FFFACD\",lightblue:\"#ADD8E6\",lightcoral:\"#F08080\",lightcyan:\"#E0FFFF\",lightgoldenrodyellow:\"#FAFAD2\",lightgray:\"#D3D3D3\",lightgrey:\"#D3D3D3\",lightgreen:\"#90EE90\",lightpink:\"#FFB6C1\",lightsalmon:\"#FFA07A\",lightseagreen:\"#20B2AA\",lightskyblue:\"#87CEFA\",lightslategray:\"#778899\",lightslategrey:\"#778899\",lightsteelblue:\"#B0C4DE\",lightyellow:\"#FFFFE0\",lime:\"#00FF00\",limegreen:\"#32CD32\",linen:\"#FAF0E6\",magenta:\"#FF00FF\",maroon:\"#800000\",mediumaquamarine:\"#66CDAA\",mediumblue:\"#0000CD\",mediumorchid:\"#BA55D3\",mediumpurple:\"#9370DB\",mediumseagreen:\"#3CB371\",mediumslateblue:\"#7B68EE\",mediumspringgreen:\"#00FA9A\",mediumturquoise:\"#48D1CC\",mediumvioletred:\"#C71585\",midnightblue:\"#191970\",mintcream:\"#F5FFFA\",mistyrose:\"#FFE4E1\",moccasin:\"#FFE4B5\",navajowhite:\"#FFDEAD\",navy:\"#000080\",oldlace:\"#FDF5E6\",olive:\"#808000\",olivedrab:\"#6B8E23\",orange:\"#FFA500\",orangered:\"#FF4500\",orchid:\"#DA70D6\",palegoldenrod:\"#EEE8AA\",palegreen:\"#98FB98\",paleturquoise:\"#AFEEEE\",palevioletred:\"#DB7093\",papayawhip:\"#FFEFD5\",peachpuff:\"#FFDAB9\",peru:\"#CD853F\",pink:\"#FFC0CB\",plum:\"#DDA0DD\",powderblue:\"#B0E0E6\",purple:\"#800080\",rebeccapurple:\"#663399\",red:\"#FF0000\",rosybrown:\"#BC8F8F\",royalblue:\"#4169E1\",saddlebrown:\"#8B4513\",salmon:\"#FA8072\",sandybrown:\"#F4A460\",seagreen:\"#2E8B57\",seashell:\"#FFF5EE\",sienna:\"#A0522D\",silver:\"#C0C0C0\",skyblue:\"#87CEEB\",slateblue:\"#6A5ACD\",slategray:\"#708090\",slategrey:\"#708090\",snow:\"#FFFAFA\",springgreen:\"#00FF7F\",steelblue:\"#4682B4\",tan:\"#D2B48C\",teal:\"#008080\",thistle:\"#D8BFD8\",tomato:\"#FF6347\",turquoise:\"#40E0D0\",violet:\"#EE82EE\",wheat:\"#F5DEB3\",white:\"#FFFFFF\",whitesmoke:\"#F5F5F5\",yellow:\"#FFFF00\",yellowgreen:\"#9ACD32\"},e.Color.fromRgb=function(t){return i.fromSource(i.sourceFromRgb(t))},e.Color.sourceFromRgb=function(t){var e=t.match(i.reRGBa);if(e){var r=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),n=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),s=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(r,10),parseInt(n,10),parseInt(s,10),e[4]?parseFloat(e[4]):1]}},e.Color.fromRgba=i.fromRgb,e.Color.fromHsl=function(t){return i.fromSource(i.sourceFromHsl(t))},e.Color.sourceFromHsl=function(t){var e=t.match(i.reHSLa);if(e){var n,s,o,a=(parseFloat(e[1])%360+360)%360/360,h=parseFloat(e[2])/(/%$/.test(e[2])?100:1),l=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===h)n=s=o=l;else{var c=l<=.5?l*(h+1):l+h-l*h,u=2*l-c;n=r(u,c,a+1/3),s=r(u,c,a),o=r(u,c,a-1/3)}return[Math.round(255*n),Math.round(255*s),Math.round(255*o),e[4]?parseFloat(e[4]):1]}},e.Color.fromHsla=i.fromHsl,e.Color.fromHex=function(t){return i.fromSource(i.sourceFromHex(t))},e.Color.sourceFromHex=function(t){if(t.match(i.reHex)){var e=t.slice(t.indexOf(\"#\")+1),r=3===e.length||4===e.length,n=8===e.length||4===e.length,s=r?e.charAt(0)+e.charAt(0):e.substring(0,2),o=r?e.charAt(1)+e.charAt(1):e.substring(2,4),a=r?e.charAt(2)+e.charAt(2):e.substring(4,6),h=n?r?e.charAt(3)+e.charAt(3):e.substring(6,8):\"FF\";return[parseInt(s,16),parseInt(o,16),parseInt(a,16),parseFloat((parseInt(h,16)/255).toFixed(2))]}},e.Color.fromSource=function(t){var e=new i;return e.setSource(t),e})}(e),function(t){var e=t.fabric||(t.fabric={}),i=[\"e\",\"se\",\"s\",\"sw\",\"w\",\"nw\",\"n\",\"ne\",\"e\"],r=[\"ns\",\"nesw\",\"ew\",\"nwse\"],n={},s=\"left\",o=\"top\",a=\"right\",h=\"bottom\",l=\"center\",c={top:h,bottom:o,left:a,right:s,center:l},u=e.util.radiansToDegrees,d=Math.sign||function(t){return(t>0)-(t<0)||+t};function f(t,e){var i=t.angle+u(Math.atan2(e.y,e.x))+360;return Math.round(i%360/45)}function g(t,i){var r=i.transform.target,n=r.canvas,s=e.util.object.clone(i);s.target=r,n&&n.fire(\"object:\"+t,s),r.fire(t,i)}function m(t,e){var i=e.canvas,r=t[i.uniScaleKey];return i.uniformScaling&&!r||!i.uniformScaling&&r}function p(t){return t.originX===l&&t.originY===l}function v(t,e,i){var r=t.lockScalingX,n=t.lockScalingY;return!((!r||!n)&&(e||!r&&!n||!i)&&(!r||\"x\"!==e)&&(!n||\"y\"!==e))}function _(t,e,i,r){return{e:t,transform:e,pointer:{x:i,y:r}}}function y(t){return function(e,i,r,n){var s=i.target,o=s.getCenterPoint(),a=s.translateToOriginPoint(o,i.originX,i.originY),h=t(e,i,r,n);return s.setPositionByOrigin(a,i.originX,i.originY),h}}function w(t,e){return function(i,r,n,s){var o=e(i,r,n,s);return o&&g(t,_(i,r,n,s)),o}}function b(t,i,r,n,s){var o=t.target,a=o.controls[t.corner],h=o.canvas.getZoom(),l=o.padding/h,c=o.toLocalPoint(new e.Point(n,s),i,r);return c.x>=l&&(c.x-=l),c.x<=-l&&(c.x+=l),c.y>=l&&(c.y-=l),c.y<=l&&(c.y+=l),c.x-=a.offsetX,c.y-=a.offsetY,c}function x(t){return t.flipX!==t.flipY}function C(t,e,i,r,n){if(0!==t[e]){var s=n/t._getTransformedDimensions()[r]*t[i];t.set(i,s)}}function S(t,e,i,r){var n,l=e.target,c=l._getTransformedDimensions(0,l.skewY),d=b(e,e.originX,e.originY,i,r),f=Math.abs(2*d.x)-c.x,g=l.skewX;f<2?n=0:(n=u(Math.atan2(f/l.scaleX,c.y/l.scaleY)),e.originX===s&&e.originY===h&&(n=-n),e.originX===a&&e.originY===o&&(n=-n),x(l)&&(n=-n));var m=g!==n;if(m){var p=l._getTransformedDimensions().y;l.set(\"skewX\",n),C(l,\"skewY\",\"scaleY\",\"y\",p)}return m}function T(t,e,i,r){var n,l=e.target,c=l._getTransformedDimensions(l.skewX,0),d=b(e,e.originX,e.originY,i,r),f=Math.abs(2*d.y)-c.y,g=l.skewY;f<2?n=0:(n=u(Math.atan2(f/l.scaleY,c.x/l.scaleX)),e.originX===s&&e.originY===h&&(n=-n),e.originX===a&&e.originY===o&&(n=-n),x(l)&&(n=-n));var m=g!==n;if(m){var p=l._getTransformedDimensions().x;l.set(\"skewY\",n),C(l,\"skewX\",\"scaleX\",\"x\",p)}return m}function E(t,e,i,r,n){n=n||{};var s,o,a,h,l,u,f=e.target,g=f.lockScalingX,_=f.lockScalingY,y=n.by,w=m(t,f),x=v(f,y,w),C=e.gestureScale;if(x)return!1;if(C)o=e.scaleX*C,a=e.scaleY*C;else{if(s=b(e,e.originX,e.originY,i,r),l=\"y\"!==y?d(s.x):1,u=\"x\"!==y?d(s.y):1,e.signX||(e.signX=l),e.signY||(e.signY=u),f.lockScalingFlip&&(e.signX!==l||e.signY!==u))return!1;if(h=f._getTransformedDimensions(),w&&!y){var S=Math.abs(s.x)+Math.abs(s.y),T=e.original,E=S/(Math.abs(h.x*T.scaleX/f.scaleX)+Math.abs(h.y*T.scaleY/f.scaleY));o=T.scaleX*E,a=T.scaleY*E}else o=Math.abs(s.x*f.scaleX/h.x),a=Math.abs(s.y*f.scaleY/h.y);p(e)&&(o*=2,a*=2),e.signX!==l&&\"y\"!==y&&(e.originX=c[e.originX],o*=-1,e.signX=l),e.signY!==u&&\"x\"!==y&&(e.originY=c[e.originY],a*=-1,e.signY=u)}var O=f.scaleX,A=f.scaleY;return y?(\"x\"===y&&f.set(\"scaleX\",o),\"y\"===y&&f.set(\"scaleY\",a)):(!g&&f.set(\"scaleX\",o),!_&&f.set(\"scaleY\",a)),O!==f.scaleX||A!==f.scaleY}n.scaleCursorStyleHandler=function(t,e,r){var n=m(t,r),s=\"\";if(0!==e.x&&0===e.y?s=\"x\":0===e.x&&0!==e.y&&(s=\"y\"),v(r,s,n))return\"not-allowed\";var o=f(r,e);return i[o]+\"-resize\"},n.skewCursorStyleHandler=function(t,e,i){var n=\"not-allowed\";if(0!==e.x&&i.lockSkewingY)return n;if(0!==e.y&&i.lockSkewingX)return n;var s=f(i,e)%4;return r[s]+\"-resize\"},n.scaleSkewCursorStyleHandler=function(t,e,i){return t[i.canvas.altActionKey]?n.skewCursorStyleHandler(t,e,i):n.scaleCursorStyleHandler(t,e,i)},n.rotationWithSnapping=w(\"rotating\",y((function(t,e,i,r){var n=e,s=n.target,o=s.translateToOriginPoint(s.getCenterPoint(),n.originX,n.originY);if(s.lockRotation)return!1;var a,h=Math.atan2(n.ey-o.y,n.ex-o.x),l=Math.atan2(r-o.y,i-o.x),c=u(l-h+n.theta);if(s.snapAngle>0){var d=s.snapAngle,f=s.snapThreshold||d,g=Math.ceil(c/d)*d,m=Math.floor(c/d)*d;Math.abs(c-m)<f?c=m:Math.abs(c-g)<f&&(c=g)}return c<0&&(c=360+c),c%=360,a=s.angle!==c,s.angle=c,a}))),n.scalingEqually=w(\"scaling\",y((function(t,e,i,r){return E(t,e,i,r)}))),n.scalingX=w(\"scaling\",y((function(t,e,i,r){return E(t,e,i,r,{by:\"x\"})}))),n.scalingY=w(\"scaling\",y((function(t,e,i,r){return E(t,e,i,r,{by:\"y\"})}))),n.scalingYOrSkewingX=function(t,e,i,r){return t[e.target.canvas.altActionKey]?n.skewHandlerX(t,e,i,r):n.scalingY(t,e,i,r)},n.scalingXOrSkewingY=function(t,e,i,r){return t[e.target.canvas.altActionKey]?n.skewHandlerY(t,e,i,r):n.scalingX(t,e,i,r)},n.changeWidth=w(\"resizing\",y((function(t,e,i,r){var n=e.target,s=b(e,e.originX,e.originY,i,r),o=n.strokeWidth/(n.strokeUniform?n.scaleX:1),a=p(e)?2:1,h=n.width,l=Math.abs(s.x*a/n.scaleX)-o;return n.set(\"width\",Math.max(l,0)),h!==l}))),n.skewHandlerX=function(t,e,i,r){var n,h=e.target,c=h.skewX,u=e.originY;return!h.lockSkewingX&&(0===c?n=b(e,l,l,i,r).x>0?s:a:(c>0&&(n=u===o?s:a),c<0&&(n=u===o?a:s),x(h)&&(n=n===s?a:s)),e.originX=n,w(\"skewing\",y(S))(t,e,i,r))},n.skewHandlerY=function(t,e,i,r){var n,a=e.target,c=a.skewY,u=e.originX;return!a.lockSkewingY&&(0===c?n=b(e,l,l,i,r).y>0?o:h:(c>0&&(n=u===s?o:h),c<0&&(n=u===s?h:o),x(a)&&(n=n===o?h:o)),e.originY=n,w(\"skewing\",y(T))(t,e,i,r))},n.dragHandler=function(t,e,i,r){var n=e.target,s=i-e.offsetX,o=r-e.offsetY,a=!n.get(\"lockMovementX\")&&n.left!==s,h=!n.get(\"lockMovementY\")&&n.top!==o;return a&&n.set(\"left\",s),h&&n.set(\"top\",o),(a||h)&&g(\"moving\",_(t,e,i,r)),a||h},n.scaleOrSkewActionName=function(t,e,i){var r=t[i.canvas.altActionKey];return 0===e.x?r?\"skewX\":\"scaleY\":0===e.y?r?\"skewY\":\"scaleX\":void 0},n.rotationStyleHandler=function(t,e,i){return i.lockRotation?\"not-allowed\":e.cursorStyle},n.fireEvent=g,n.wrapWithFixedAnchor=y,n.wrapWithFireEvent=w,n.getLocalPoint=b,e.controlsUtils=n}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.util.degreesToRadians,r=e.controlsUtils;r.renderCircleControl=function(t,e,i,r,n){r=r||{};var s,o=this.sizeX||r.cornerSize||n.cornerSize,a=this.sizeY||r.cornerSize||n.cornerSize,h=void 0!==r.transparentCorners?r.transparentCorners:n.transparentCorners,l=h?\"stroke\":\"fill\",c=!h&&(r.cornerStrokeColor||n.cornerStrokeColor),u=e,d=i;t.save(),t.fillStyle=r.cornerColor||n.cornerColor,t.strokeStyle=r.cornerStrokeColor||n.cornerStrokeColor,o>a?(s=o,t.scale(1,a/o),d=i*o/a):a>o?(s=a,t.scale(o/a,1),u=e*a/o):s=o,t.lineWidth=1,t.beginPath(),t.arc(u,d,s/2,0,2*Math.PI,!1),t[l](),c&&t.stroke(),t.restore()},r.renderSquareControl=function(t,e,r,n,s){n=n||{};var o=this.sizeX||n.cornerSize||s.cornerSize,a=this.sizeY||n.cornerSize||s.cornerSize,h=void 0!==n.transparentCorners?n.transparentCorners:s.transparentCorners,l=h?\"stroke\":\"fill\",c=!h&&(n.cornerStrokeColor||s.cornerStrokeColor),u=o/2,d=a/2;t.save(),t.fillStyle=n.cornerColor||s.cornerColor,t.strokeStyle=n.cornerStrokeColor||s.cornerStrokeColor,t.lineWidth=1,t.translate(e,r),t.rotate(i(s.angle)),t[l+\"Rect\"](-u,-d,o,a),c&&t.strokeRect(-u,-d,o,a),t.restore()}}(e),function(t){var e=t.fabric||(t.fabric={});e.Control=function(t){for(var e in t)this[e]=t[e]},e.Control.prototype={visible:!0,actionName:\"scale\",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:\"crosshair\",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(t,e){return e.cursorStyle},getActionName:function(t,e){return e.actionName},getVisibility:function(t,e){var i=t._controlsVisibility;return i&&void 0!==i[e]?i[e]:this.visible},setVisibility:function(t){this.visible=t},positionHandler:function(t,i){return e.util.transformPoint({x:this.x*t.x+this.offsetX,y:this.y*t.y+this.offsetY},i)},calcCornerCoords:function(t,i,r,n,s){var o,a,h,l,c=s?this.touchSizeX:this.sizeX,u=s?this.touchSizeY:this.sizeY;if(c&&u&&c!==u){var d=Math.atan2(u,c),f=Math.sqrt(c*c+u*u)/2,g=d-e.util.degreesToRadians(t),m=Math.PI/2-d-e.util.degreesToRadians(t);o=f*e.util.cos(g),a=f*e.util.sin(g),h=f*e.util.cos(m),l=f*e.util.sin(m)}else f=.7071067812*(c&&u?c:i),g=e.util.degreesToRadians(45-t),o=h=f*e.util.cos(g),a=l=f*e.util.sin(g);return{tl:{x:r-l,y:n-h},tr:{x:r+o,y:n-a},bl:{x:r-o,y:n+a},br:{x:r+l,y:n+h}}},render:function(t,i,r,n,s){\"circle\"===((n=n||{}).cornerStyle||s.cornerStyle)?e.controlsUtils.renderCircleControl.call(this,t,i,r,n,s):e.controlsUtils.renderSquareControl.call(this,t,i,r,n,s)}}}(e),function(){function t(t,e){var i,r,n,s,o=t.getAttribute(\"style\"),a=t.getAttribute(\"offset\")||0;if(a=(a=parseFloat(a)/(/%$/.test(a)?100:1))<0?0:a>1?1:a,o){var h=o.split(/\\s*;\\s*/);for(\"\"===h[h.length-1]&&h.pop(),s=h.length;s--;){var l=h[s].split(/\\s*:\\s*/),c=l[0].trim(),u=l[1].trim();\"stop-color\"===c?i=u:\"stop-opacity\"===c&&(n=u)}}return i||(i=t.getAttribute(\"stop-color\")||\"rgb(0,0,0)\"),n||(n=t.getAttribute(\"stop-opacity\")),r=(i=new S.Color(i)).getAlpha(),n=isNaN(parseFloat(n))?1:parseFloat(n),n*=r*e,{offset:a,color:i.toRgb(),opacity:n}}var e=S.util.object.clone;S.Gradient=S.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:\"pixels\",type:\"linear\",initialize:function(t){t||(t={}),t.coords||(t.coords={});var e,i=this;Object.keys(t).forEach((function(e){i[e]=t[e]})),this.id?this.id+=\"_\"+S.Object.__uid++:this.id=S.Object.__uid++,e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},\"radial\"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice()},addColorStop:function(t){for(var e in t){var i=new S.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return S.util.populateWithProperties(this,e,t),e},toSVG:function(t,i){var r,n,s,o,a=e(this.coords,!0),h=(i=i||{},e(this.colorStops,!0)),l=a.r1>a.r2,c=this.gradientTransform?this.gradientTransform.concat():S.iMatrix.concat(),u=-this.offsetX,d=-this.offsetY,f=!!i.additionalTransform,g=\"pixels\"===this.gradientUnits?\"userSpaceOnUse\":\"objectBoundingBox\";if(h.sort((function(t,e){return t.offset-e.offset})),\"objectBoundingBox\"===g?(u/=t.width,d/=t.height):(u+=t.width/2,d+=t.height/2),\"path\"===t.type&&\"percentage\"!==this.gradientUnits&&(u-=t.pathOffset.x,d-=t.pathOffset.y),c[4]-=u,c[5]-=d,o='id=\"SVGID_'+this.id+'\" gradientUnits=\"'+g+'\"',o+=' gradientTransform=\"'+(f?i.additionalTransform+\" \":\"\")+S.util.matrixToSVG(c)+'\" ',\"linear\"===this.type?s=[\"<linearGradient \",o,' x1=\"',a.x1,'\" y1=\"',a.y1,'\" x2=\"',a.x2,'\" y2=\"',a.y2,'\">\\n']:\"radial\"===this.type&&(s=[\"<radialGradient \",o,' cx=\"',l?a.x1:a.x2,'\" cy=\"',l?a.y1:a.y2,'\" r=\"',l?a.r1:a.r2,'\" fx=\"',l?a.x2:a.x1,'\" fy=\"',l?a.y2:a.y1,'\">\\n']),\"radial\"===this.type){if(l)for((h=h.concat()).reverse(),r=0,n=h.length;r<n;r++)h[r].offset=1-h[r].offset;var m=Math.min(a.r1,a.r2);if(m>0){var p=m/Math.max(a.r1,a.r2);for(r=0,n=h.length;r<n;r++)h[r].offset+=p*(1-h[r].offset)}}for(r=0,n=h.length;r<n;r++){var v=h[r];s.push(\"<stop \",'offset=\"',100*v.offset+\"%\",'\" style=\"stop-color:',v.color,void 0!==v.opacity?\";stop-opacity: \"+v.opacity:\";\",'\"/>\\n')}return s.push(\"linear\"===this.type?\"</linearGradient>\\n\":\"</radialGradient>\\n\"),s.join(\"\")},toLive:function(t){var e,i,r,n=S.util.object.clone(this.coords);if(this.type){for(\"linear\"===this.type?e=t.createLinearGradient(n.x1,n.y1,n.x2,n.y2):\"radial\"===this.type&&(e=t.createRadialGradient(n.x1,n.y1,n.r1,n.x2,n.y2,n.r2)),i=0,r=this.colorStops.length;i<r;i++){var s=this.colorStops[i].color,o=this.colorStops[i].opacity,a=this.colorStops[i].offset;void 0!==o&&(s=new S.Color(s).setAlpha(o).toRgba()),e.addColorStop(a,s)}return e}}}),S.util.object.extend(S.Gradient,{fromElement:function(e,i,r,n){var s=parseFloat(r)/(/%$/.test(r)?100:1);s=s<0?0:s>1?1:s,isNaN(s)&&(s=1);var o,a,h,l,c=e.getElementsByTagName(\"stop\"),u=\"userSpaceOnUse\"===e.getAttribute(\"gradientUnits\")?\"pixels\":\"percentage\",d=e.getAttribute(\"gradientTransform\")||\"\",f=[],g=0,m=0;for(\"linearGradient\"===e.nodeName||\"LINEARGRADIENT\"===e.nodeName?(o=\"linear\",a=function(t){return{x1:t.getAttribute(\"x1\")||0,y1:t.getAttribute(\"y1\")||0,x2:t.getAttribute(\"x2\")||\"100%\",y2:t.getAttribute(\"y2\")||0}}(e)):(o=\"radial\",a=function(t){return{x1:t.getAttribute(\"fx\")||t.getAttribute(\"cx\")||\"50%\",y1:t.getAttribute(\"fy\")||t.getAttribute(\"cy\")||\"50%\",r1:0,x2:t.getAttribute(\"cx\")||\"50%\",y2:t.getAttribute(\"cy\")||\"50%\",r2:t.getAttribute(\"r\")||\"50%\"}}(e)),h=c.length;h--;)f.push(t(c[h],s));return l=S.parseTransformAttribute(d),function(t,e,i,r){var n,s;Object.keys(e).forEach((function(t){\"Infinity\"===(n=e[t])?s=1:\"-Infinity\"===n?s=0:(s=parseFloat(e[t],10),\"string\"==typeof n&&/^(\\d+\\.\\d+)%|(\\d+)%$/.test(n)&&(s*=.01,\"pixels\"===r&&(\"x1\"!==t&&\"x2\"!==t&&\"r2\"!==t||(s*=i.viewBoxWidth||i.width),\"y1\"!==t&&\"y2\"!==t||(s*=i.viewBoxHeight||i.height)))),e[t]=s}))}(0,a,n,u),\"pixels\"===u&&(g=-i.left,m=-i.top),new S.Gradient({id:e.getAttribute(\"id\"),type:o,coords:a,colorStops:f,gradientUnits:u,gradientTransform:l,offsetX:g,offsetY:m})}})}(),v=S.util.toFixed,S.Pattern=S.util.createClass({repeat:\"repeat\",offsetX:0,offsetY:0,crossOrigin:\"\",patternTransform:null,initialize:function(t,e){if(t||(t={}),this.id=S.Object.__uid++,this.setOptions(t),!t.source||t.source&&\"string\"!=typeof t.source)e&&e(this);else{var i=this;this.source=S.util.createImage(),S.util.loadImage(t.source,(function(t,r){i.source=t,e&&e(i,r)}),null,this.crossOrigin)}},toObject:function(t){var e,i,r=S.Object.NUM_FRACTION_DIGITS;return\"string\"==typeof this.source.src?e=this.source.src:\"object\"==typeof this.source&&this.source.toDataURL&&(e=this.source.toDataURL()),i={type:\"pattern\",source:e,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:v(this.offsetX,r),offsetY:v(this.offsetY,r),patternTransform:this.patternTransform?this.patternTransform.concat():null},S.util.populateWithProperties(this,i,t),i},toSVG:function(t){var e=\"function\"==typeof this.source?this.source():this.source,i=e.width/t.width,r=e.height/t.height,n=this.offsetX/t.width,s=this.offsetY/t.height,o=\"\";return\"repeat-x\"!==this.repeat&&\"no-repeat\"!==this.repeat||(r=1,s&&(r+=Math.abs(s))),\"repeat-y\"!==this.repeat&&\"no-repeat\"!==this.repeat||(i=1,n&&(i+=Math.abs(n))),e.src?o=e.src:e.toDataURL&&(o=e.toDataURL()),'<pattern id=\"SVGID_'+this.id+'\" x=\"'+n+'\" y=\"'+s+'\" width=\"'+i+'\" height=\"'+r+'\">\\n<image x=\"0\" y=\"0\" width=\"'+e.width+'\" height=\"'+e.height+'\" xlink:href=\"'+o+'\"></image>\\n</pattern>\\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e=this.source;if(!e)return\"\";if(void 0!==e.src){if(!e.complete)return\"\";if(0===e.naturalWidth||0===e.naturalHeight)return\"\"}return t.createPattern(e,this.repeat)}}),function(t){var e=t.fabric||(t.fabric={}),i=e.util.toFixed;e.Shadow?e.warn(\"fabric.Shadow is already defined.\"):(e.Shadow=e.util.createClass({color:\"rgb(0,0,0)\",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(t){for(var i in\"string\"==typeof t&&(t=this._parseShadow(t)),t)this[i]=t[i];this.id=e.Object.__uid++},_parseShadow:function(t){var i=t.trim(),r=e.Shadow.reOffsetsAndBlur.exec(i)||[];return{color:(i.replace(e.Shadow.reOffsetsAndBlur,\"\")||\"rgb(0,0,0)\").trim(),offsetX:parseFloat(r[1],10)||0,offsetY:parseFloat(r[2],10)||0,blur:parseFloat(r[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join(\"px \")},toSVG:function(t){var r=40,n=40,s=e.Object.NUM_FRACTION_DIGITS,o=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),a=new e.Color(this.color);return t.width&&t.height&&(r=100*i((Math.abs(o.x)+this.blur)/t.width,s)+20,n=100*i((Math.abs(o.y)+this.blur)/t.height,s)+20),t.flipX&&(o.x*=-1),t.flipY&&(o.y*=-1),'<filter id=\"SVGID_'+this.id+'\" y=\"-'+n+'%\" height=\"'+(100+2*n)+'%\" x=\"-'+r+'%\" width=\"'+(100+2*r)+'%\" >\\n\\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"'+i(this.blur?this.blur/2:0,s)+'\"></feGaussianBlur>\\n\\t<feOffset dx=\"'+i(o.x,s)+'\" dy=\"'+i(o.y,s)+'\" result=\"oBlur\" ></feOffset>\\n\\t<feFlood flood-color=\"'+a.toRgb()+'\" flood-opacity=\"'+a.getAlpha()+'\"/>\\n\\t<feComposite in2=\"oBlur\" operator=\"in\" />\\n\\t<feMerge>\\n\\t\\t<feMergeNode></feMergeNode>\\n\\t\\t<feMergeNode in=\"SourceGraphic\"></feMergeNode>\\n\\t</feMerge>\\n</filter>\\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var t={},i=e.Shadow.prototype;return[\"color\",\"blur\",\"offsetX\",\"offsetY\",\"affectStroke\",\"nonScaling\"].forEach((function(e){this[e]!==i[e]&&(t[e]=this[e])}),this),t}}),e.Shadow.reOffsetsAndBlur=/(?:\\s|^)(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?(\\d+(?:\\.\\d*)?(?:px)?)?(?:\\s?|$)(?:$|\\s)/)}(e),function(){if(S.StaticCanvas)S.warn(\"fabric.StaticCanvas is already defined.\");else{var t=S.util.object.extend,e=S.util.getElementOffset,i=S.util.removeFromArray,r=S.util.toFixed,n=S.util.transformPoint,s=S.util.invertTransform,o=S.util.getNodeCanvas,a=S.util.createCanvasElement,h=new Error(\"Could not initialize `canvas` element\");S.StaticCanvas=S.util.createClass(S.CommonMethods,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:\"\",backgroundImage:null,overlayColor:\"\",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:S.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(t,e){var i=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,i),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,i),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,i),e.overlayColor&&this.setOverlayColor(e.overlayColor,i),this.calcOffset()},_isRetinaScaling:function(){return S.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,S.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var t=S.devicePixelRatio;this.__initRetinaScaling(t,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(t,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(t,e,i){e.setAttribute(\"width\",this.width*t),e.setAttribute(\"height\",this.height*t),i.scale(t,t)},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage(\"overlayImage\",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage(\"backgroundImage\",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor(\"overlayColor\",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor(\"backgroundColor\",t,e)},__setBgOverlayImage:function(t,e,i,r){return\"string\"==typeof e?S.util.loadImage(e,(function(e,n){if(e){var s=new S.Image(e,r);this[t]=s,s.canvas=this}i&&i(e,n)}),this,r&&r.crossOrigin):(r&&e.setOptions(r),this[t]=e,e&&(e.canvas=this),i&&i(e,!1)),this},__setBgOverlayColor:function(t,e,i){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,i),this},_createCanvasElement:function(){var t=a();if(!t)throw h;if(t.style||(t.style={}),void 0===t.getContext)throw h;return t},_initOptions:function(t){var e=this.lowerCanvasEl;this._setOptions(t),this.width=this.width||parseInt(e.width,10)||0,this.height=this.height||parseInt(e.height,10)||0,this.lowerCanvasEl.style&&(e.width=this.width,e.height=this.height,e.style.width=this.width+\"px\",e.style.height=this.height+\"px\",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){t&&t.getContext?this.lowerCanvasEl=t:this.lowerCanvasEl=S.util.getById(t)||this._createCanvasElement(),S.util.addClass(this.lowerCanvasEl,\"lower-canvas\"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext(\"2d\")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i;for(var r in e=e||{},t)i=t[r],e.cssOnly||(this._setBackstoreDimension(r,t[r]),i+=\"px\",this.hasLostContext=!0),e.backstoreOnly||this._setCssDimension(r,i);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,i,r,n=this._activeObject,s=this.backgroundImage,o=this.overlayImage;for(this.viewportTransform=t,i=0,r=this._objects.length;i<r;i++)(e=this._objects[i]).group||e.setCoords(!0);return n&&n.setCoords(),s&&s.setCoords(!0),o&&o.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var i=t,r=this.viewportTransform.slice(0);t=n(t,s(this.viewportTransform)),r[0]=e,r[3]=e;var o=n(t,r);return r[4]+=i.x-o.x,r[5]+=i.y-o.y,this.setViewportTransform(r)},setZoom:function(t){return this.zoomToPoint(new S.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new S.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set(\"canvas\",this),t.setCoords(),this.fire(\"object:added\",{target:t}),t.fire(\"added\")},_onObjectRemoved:function(t){this.fire(\"object:removed\",{target:t}),t.fire(\"removed\"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor=\"\",this.overlayColor=\"\",this._hasITextHandlers&&(this.off(\"mouse:up\",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire(\"canvas:cleared\"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=S.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,i=this.height,r=s(this.viewportTransform);return t.tl=n({x:0,y:0},r),t.br=n({x:e,y:i},r),t.tr=new S.Point(t.br.x,t.tl.y),t.bl=new S.Point(t.tl.x,t.br.y),this.vptCoords=t,t},cancelRequestedRender:function(){this.isRendering&&(S.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(t,e){var i=this.viewportTransform,r=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(t),S.util.setImageSmoothing(t,this.imageSmoothingEnabled),this.fire(\"before:render\",{ctx:t}),this._renderBackground(t),t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),r&&(r.canvas=this,r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t)),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire(\"after:render\",{ctx:t})},drawClipPathOnCanvas:function(t){var e=this.viewportTransform,i=this.clipPath;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.globalCompositeOperation=\"destination-in\",i.transform(t),t.scale(1/i.zoomX,1/i.zoomY),t.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),t.restore()},_renderObjects:function(t,e){var i,r;for(i=0,r=e.length;i<r;++i)e[i]&&e[i].render(t)},_renderBackgroundOrOverlay:function(t,e){var i=this[e+\"Color\"],r=this[e+\"Image\"],n=this.viewportTransform,s=this[e+\"Vpt\"];if(i||r){if(i){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=i.toLive?i.toLive(t,this):i,s&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t.transform(1,0,0,1,i.offsetX||0,i.offsetY||0);var o=i.gradientTransform||i.patternTransform;o&&t.transform(o[0],o[1],o[2],o[3],o[4],o[5]),t.fill(),t.restore()}r&&(t.save(),s&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),r.render(t),t.restore())}},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,\"background\")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,\"overlay\")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new S.Point(this.width/2,this.height/2)},centerObjectH:function(t){return this._centerObject(t,new S.Point(this.getCenterPoint().x,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new S.Point(t.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(t){var e=this.getCenterPoint();return this._centerObject(t,e)},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new S.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new S.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenterPoint(),e=s(this.viewportTransform);return n(t,e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,\"center\",\"center\"),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod(\"toObject\",t)},toDatalessObject:function(t){return this._toObjectMethod(\"toDatalessObject\",t)},_toObjectMethod:function(e,i){var r=this.clipPath,n={version:S.version,objects:this._toObjects(e,i)};return r&&!r.excludeFromExport&&(n.clipPath=this._toObject(this.clipPath,e,i)),t(n,this.__serializeBgOverlay(e,i)),S.util.populateWithProperties(this,n,i),n},_toObjects:function(t,e){return this._objects.filter((function(t){return!t.excludeFromExport})).map((function(i){return this._toObject(i,t,e)}),this)},_toObject:function(t,e,i){var r;this.includeDefaultValues||(r=t.includeDefaultValues,t.includeDefaultValues=!1);var n=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=r),n},__serializeBgOverlay:function(t,e){var i={},r=this.backgroundImage,n=this.overlayImage,s=this.backgroundColor,o=this.overlayColor;return s&&s.toObject?s.excludeFromExport||(i.background=s.toObject(e)):s&&(i.background=s),o&&o.toObject?o.excludeFromExport||(i.overlay=o.toObject(e)):o&&(i.overlay=o),r&&!r.excludeFromExport&&(i.backgroundImage=this._toObject(r,t,e)),n&&!n.excludeFromExport&&(i.overlayImage=this._toObject(n,t,e)),i},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={}),t.reviver=e;var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this.clipPath&&i.push('<g clip-path=\"url(#'+this.clipPath.clipPathId+')\" >\\n'),this._setSVGBgOverlayColor(i,\"background\"),this._setSVGBgOverlayImage(i,\"backgroundImage\",e),this._setSVGObjects(i,e),this.clipPath&&i.push(\"</g>\\n\"),this._setSVGBgOverlayColor(i,\"overlay\"),this._setSVGBgOverlayImage(i,\"overlayImage\",e),i.push(\"</svg>\"),i.join(\"\")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version=\"1.0\" encoding=\"',e.encoding||\"UTF-8\",'\" standalone=\"no\" ?>\\n','<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" ','\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n')},_setSVGHeader:function(t,e){var i,n=e.width||this.width,s=e.height||this.height,o='viewBox=\"0 0 '+this.width+\" \"+this.height+'\" ',a=S.Object.NUM_FRACTION_DIGITS;e.viewBox?o='viewBox=\"'+e.viewBox.x+\" \"+e.viewBox.y+\" \"+e.viewBox.width+\" \"+e.viewBox.height+'\" ':this.svgViewportTransformation&&(i=this.viewportTransform,o='viewBox=\"'+r(-i[4]/i[0],a)+\" \"+r(-i[5]/i[3],a)+\" \"+r(this.width/i[0],a)+\" \"+r(this.height/i[3],a)+'\" '),t.push(\"<svg \",'xmlns=\"http://www.w3.org/2000/svg\" ','xmlns:xlink=\"http://www.w3.org/1999/xlink\" ','version=\"1.1\" ','width=\"',n,'\" ','height=\"',s,'\" ',o,'xml:space=\"preserve\">\\n',\"<desc>Created with Fabric.js \",S.version,\"</desc>\\n\",\"<defs>\\n\",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),\"</defs>\\n\")},createSVGClipPathMarkup:function(t){var e=this.clipPath;return e?(e.clipPathId=\"CLIPPATH_\"+S.Object.__uid++,'<clipPath id=\"'+e.clipPathId+'\" >\\n'+this.clipPath.toClipPathSVG(t.reviver)+\"</clipPath>\\n\"):\"\"},createSVGRefElementsMarkup:function(){var t=this;return[\"background\",\"overlay\"].map((function(e){var i=t[e+\"Color\"];if(i&&i.toLive){var r=t[e+\"Vpt\"],n=t.viewportTransform,s={width:t.width/(r?n[0]:1),height:t.height/(r?n[3]:1)};return i.toSVG(s,{additionalTransform:r?S.util.matrixToSVG(n):\"\"})}})).join(\"\")},createSVGFontFacesMarkup:function(){var t,e,i,r,n,s,o,a,h=\"\",l={},c=S.fontPaths,u=[];for(this._objects.forEach((function t(e){u.push(e),e._objects&&e._objects.forEach(t)})),o=0,a=u.length;o<a;o++)if(e=(t=u[o]).fontFamily,-1!==t.type.indexOf(\"text\")&&!l[e]&&c[e]&&(l[e]=!0,t.styles))for(n in i=t.styles)for(s in r=i[n])!l[e=r[s].fontFamily]&&c[e]&&(l[e]=!0);for(var d in l)h+=[\"\\t\\t@font-face {\\n\",\"\\t\\t\\tfont-family: '\",d,\"';\\n\",\"\\t\\t\\tsrc: url('\",c[d],\"');\\n\",\"\\t\\t}\\n\"].join(\"\");return h&&(h=['\\t<style type=\"text/css\">',\"<![CDATA[\\n\",h,\"]]>\",\"</style>\\n\"].join(\"\")),h},_setSVGObjects:function(t,e){var i,r,n,s=this._objects;for(r=0,n=s.length;r<n;r++)(i=s[r]).excludeFromExport||this._setSVGObject(t,i,e)},_setSVGObject:function(t,e,i){t.push(e.toSVG(i))},_setSVGBgOverlayImage:function(t,e,i){this[e]&&!this[e].excludeFromExport&&this[e].toSVG&&t.push(this[e].toSVG(i))},_setSVGBgOverlayColor:function(t,e){var i=this[e+\"Color\"],r=this.viewportTransform,n=this.width,s=this.height;if(i)if(i.toLive){var o=i.repeat,a=S.util.invertTransform(r),h=this[e+\"Vpt\"]?S.util.matrixToSVG(a):\"\";t.push('<rect transform=\"'+h+\" translate(\",n/2,\",\",s/2,')\"',' x=\"',i.offsetX-n/2,'\" y=\"',i.offsetY-s/2,'\" ','width=\"',\"repeat-y\"===o||\"no-repeat\"===o?i.source.width:n,'\" height=\"',\"repeat-x\"===o||\"no-repeat\"===o?i.source.height:s,'\" fill=\"url(#SVGID_'+i.id+')\"',\"></rect>\\n\")}else t.push('<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" ','fill=\"',i,'\"',\"></rect>\\n\")},sendToBack:function(t){if(!t)return this;var e,r,n,s=this._activeObject;if(t===s&&\"activeSelection\"===t.type)for(e=(n=s._objects).length;e--;)r=n[e],i(this._objects,r),this._objects.unshift(r);else i(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,r,n,s=this._activeObject;if(t===s&&\"activeSelection\"===t.type)for(n=s._objects,e=0;e<n.length;e++)r=n[e],i(this._objects,r),this._objects.push(r);else i(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var r,n,s,o,a,h=this._activeObject,l=0;if(t===h&&\"activeSelection\"===t.type)for(a=h._objects,r=0;r<a.length;r++)n=a[r],(s=this._objects.indexOf(n))>0+l&&(o=s-1,i(this._objects,n),this._objects.splice(o,0,n)),l++;else 0!==(s=this._objects.indexOf(t))&&(o=this._findNewLowerIndex(t,s,e),i(this._objects,t),this._objects.splice(o,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,i){var r,n;if(i){for(r=e,n=e-1;n>=0;--n)if(t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t)){r=n;break}}else r=e-1;return r},bringForward:function(t,e){if(!t)return this;var r,n,s,o,a,h=this._activeObject,l=0;if(t===h&&\"activeSelection\"===t.type)for(r=(a=h._objects).length;r--;)n=a[r],(s=this._objects.indexOf(n))<this._objects.length-1-l&&(o=s+1,i(this._objects,n),this._objects.splice(o,0,n)),l++;else(s=this._objects.indexOf(t))!==this._objects.length-1&&(o=this._findNewUpperIndex(t,s,e),i(this._objects,t),this._objects.splice(o,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,i){var r,n,s;if(i){for(r=e,n=e+1,s=this._objects.length;n<s;++n)if(t.intersectsWithObject(this._objects[n])||t.isContainedWithinObject(this._objects[n])||this._objects[n].isContainedWithinObject(t)){r=n;break}}else r=e+1;return r},moveTo:function(t,e){return i(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(S.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(t){t.dispose&&t.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove(\"lower-canvas\"),S.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute(\"width\",this.width),this.lowerCanvasEl.setAttribute(\"height\",this.height),S.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return\"#<fabric.Canvas (\"+this.complexity()+\"): { objects: \"+this._objects.length+\" }>\"}}),t(S.StaticCanvas.prototype,S.Observable),t(S.StaticCanvas.prototype,S.Collection),t(S.StaticCanvas.prototype,S.DataURLExporter),t(S.StaticCanvas,{EMPTY_JSON:'{\"objects\": [], \"background\": \"white\"}',supports:function(t){var e=a();if(!e||!e.getContext)return null;var i=e.getContext(\"2d\");return i&&\"setLineDash\"===t?void 0!==i.setLineDash:null}}),S.StaticCanvas.prototype.toJSON=S.StaticCanvas.prototype.toObject,S.isLikelyNode&&(S.StaticCanvas.prototype.createPNGStream=function(){var t=o(this.lowerCanvasEl);return t&&t.createPNGStream()},S.StaticCanvas.prototype.createJPEGStream=function(t){var e=o(this.lowerCanvasEl);return e&&e.createJPEGStream(t)})}}(),S.BaseBrush=S.util.createClass({color:\"rgb(0, 0, 0)\",width:1,shadow:null,strokeLineCap:\"round\",strokeLineJoin:\"round\",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(t){t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(t){var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_setShadow:function(){if(this.shadow){var t=this.canvas,e=this.shadow,i=t.contextTop,r=t.getZoom();t&&t._isRetinaScaling()&&(r*=S.devicePixelRatio),i.shadowColor=e.color,i.shadowBlur=e.blur*r,i.shadowOffsetX=e.offsetX*r,i.shadowOffsetY=e.offsetY*r}},needsFullRender:function(){return new S.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor=\"\",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0},_isOutSideCanvas:function(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}),S.PencilBrush=S.util.createClass(S.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:\"shiftKey\",initialize:function(t){this.canvas=t,this._points=[]},needsFullRender:function(){return this.callSuper(\"needsFullRender\")||this._hasStraightLine},_drawSegment:function(t,e,i){var r=e.midPointFrom(i);return t.quadraticCurveTo(e.x,e.y,r.x,r.y),r},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this.drawStraightLine=e.e[this.straightLineKey],this._prepareForDrawing(t),this._captureDrawingPath(t),this._render())},onMouseMove:function(t,e){if(this.canvas._isMainEvent(e.e)&&(this.drawStraightLine=e.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(t))&&this._captureDrawingPath(t)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var i=this._points,r=i.length,n=this.canvas.contextTop;this._saveAndTransform(n),this.oldEnd&&(n.beginPath(),n.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(n,i[r-2],i[r-1],!0),n.stroke(),n.restore()}},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(t){var e=new S.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1])||(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(t),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(t){var e=new S.Point(t.x,t.y);return this._addPoint(e)},_render:function(t){var e,i,r=this._points[0],n=this._points[1];if(t=t||this.canvas.contextTop,this._saveAndTransform(t),t.beginPath(),2===this._points.length&&r.x===n.x&&r.y===n.y){var s=this.width/1e3;r=new S.Point(r.x,r.y),n=new S.Point(n.x,n.y),r.x-=s,n.x+=s}for(t.moveTo(r.x,r.y),e=1,i=this._points.length;e<i;e++)this._drawSegment(t,r,n),r=this._points[e],n=this._points[e+1];t.lineTo(r.x,r.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=this.width/1e3;return S.util.getSmoothPathFromPoints(t,e)},_isEmptySVGPath:function(t){return\"M 0 0 Q 0 0 0 0 L 0 0\"===S.util.joinPath(t)},createPath:function(t){var e=new S.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.shadow=new S.Shadow(this.shadow)),e},decimatePoints:function(t,e){if(t.length<=2)return t;var i,r=this.canvas.getZoom(),n=Math.pow(e/r,2),s=t.length-1,o=t[0],a=[o];for(i=1;i<s-1;i++)Math.pow(o.x-t[i].x,2)+Math.pow(o.y-t[i].y,2)>=n&&(o=t[i],a.push(o));return a.push(t[s]),a},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var t=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(t))this.canvas.requestRenderAll();else{var e=this.createPath(t);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire(\"before:path:created\",{path:e}),this.canvas.add(e),this.canvas.requestRenderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire(\"path:created\",{path:e})}}}),S.CircleBrush=S.util.createClass(S.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop;this._saveAndTransform(i),this.dot(i,e),i.restore()},dot:function(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},_render:function(){var t,e,i=this.canvas.contextTop,r=this.points;for(this._saveAndTransform(i),t=0,e=r.length;t<e;t++)this.dot(i,r[t]);i.restore()},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t))},onMouseUp:function(){var t,e,i=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var r=[];for(t=0,e=this.points.length;t<e;t++){var n=this.points[t],s=new S.Circle({radius:n.radius,left:n.x,top:n.y,originX:\"center\",originY:\"center\",fill:n.fill});this.shadow&&(s.shadow=new S.Shadow(this.shadow)),r.push(s)}var o=new S.Group(r);o.canvas=this.canvas,this.canvas.fire(\"before:path:created\",{path:o}),this.canvas.add(o),this.canvas.fire(\"path:created\",{path:o}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=i,this.canvas.requestRenderAll()},addPoint:function(t){var e=new S.Point(t.x,t.y),i=S.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,r=new S.Color(this.color).setAlpha(S.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=r,this.points.push(e),e}}),S.SprayBrush=S.util.createClass(S.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.addSprayChunk(t),this.render(this.sprayChunkPoints))},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,r=this.sprayChunks.length;i<r;i++)for(var n=this.sprayChunks[i],s=0,o=n.length;s<o;s++){var a=new S.Rect({width:n[s].width,height:n[s].width,left:n[s].x+1,top:n[s].y+1,originX:\"center\",originY:\"center\",fill:this.color});e.push(a)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var h=new S.Group(e);this.shadow&&h.set(\"shadow\",new S.Shadow(this.shadow)),this.canvas.fire(\"before:path:created\",{path:h}),this.canvas.add(h),this.canvas.fire(\"path:created\",{path:h}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){var e,i,r,n={};for(i=0,r=t.length;i<r;i++)n[e=t[i].left+\"\"+t[i].top]||(n[e]=t[i]);var s=[];for(e in n)s.push(n[e]);return s},render:function(t){var e,i,r=this.canvas.contextTop;for(r.fillStyle=this.color,this._saveAndTransform(r),e=0,i=t.length;e<i;e++){var n=t[e];void 0!==n.opacity&&(r.globalAlpha=n.opacity),r.fillRect(n.x,n.y,n.width,n.width)}r.restore()},_render:function(){var t,e,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),t=0,e=this.sprayChunks.length;t<e;t++)this.render(this.sprayChunks[t]);i.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];var e,i,r,n,s=this.width/2;for(n=0;n<this.density;n++){e=S.util.getRandomInt(t.x-s,t.x+s),i=S.util.getRandomInt(t.y-s,t.y+s),r=this.dotWidthVariance?S.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var o=new S.Point(e,i);o.width=r,this.randomOpacity&&(o.opacity=S.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(o)}this.sprayChunks.push(this.sprayChunkPoints)}}),S.PatternBrush=S.util.createClass(S.PencilBrush,{getPatternSrc:function(){var t=S.util.createCanvasElement(),e=t.getContext(\"2d\");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace(\"this.color\",'\"'+this.color+'\"')},getPattern:function(t){return t.createPattern(this.source||this.getPatternSrc(),\"repeat\")},_setBrushStyles:function(t){this.callSuper(\"_setBrushStyles\",t),t.strokeStyle=this.getPattern(t)},createPath:function(t){var e=this.callSuper(\"createPath\",t),i=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new S.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-i.x,offsetY:-i.y}),e}}),function(){var t=S.util.getPointer,e=S.util.degreesToRadians,i=S.util.isTouchEvent;for(var r in S.Canvas=S.util.createClass(S.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:\"shiftKey\",centeredScaling:!1,centeredRotation:!1,centeredKey:\"altKey\",altActionKey:\"shiftKey\",interactive:!0,selection:!0,selectionKey:\"shiftKey\",altSelectionKey:null,selectionColor:\"rgba(100, 100, 255, 0.3)\",selectionDashArray:[],selectionBorderColor:\"rgba(255, 255, 255, 0.3)\",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:\"move\",moveCursor:\"move\",defaultCursor:\"default\",freeDrawingCursor:\"crosshair\",notAllowedCursor:\"not-allowed\",containerClass:\"canvas-container\",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=S.PencilBrush&&new S.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,i,r=this.getActiveObjects();if(r.length>0&&!this.preserveObjectStacking){e=[],i=[];for(var n=0,s=this._objects.length;n<s;n++)t=this._objects[n],-1===r.indexOf(t)?e.push(t):i.push(t);r.length>1&&(this._activeObject._objects=i),e.push.apply(e,i)}else e=this._objects;return e},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire(\"after:render\"),this},_normalizePointer:function(t,e){var i=t.calcTransformMatrix(),r=S.util.invertTransform(i),n=this.restorePointerVpt(e);return S.util.transformPoint(n,r)},isTargetTransparent:function(t,e,i){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var r=this._normalizePointer(t,{x:e,y:i}),n=Math.max(t.cacheTranslationX+r.x*t.zoomX,0),s=Math.max(t.cacheTranslationY+r.y*t.zoomY,0);return S.util.isTransparent(t._cacheContext,Math.round(n),Math.round(s),this.targetFindTolerance)}var o=this.contextCache,a=t.selectionBackgroundColor,h=this.viewportTransform;return t.selectionBackgroundColor=\"\",this.clearContext(o),o.save(),o.transform(h[0],h[1],h[2],h[3],h[4],h[5]),t.render(o),o.restore(),t.selectionBackgroundColor=a,S.util.isTransparent(o,e,i,this.targetFindTolerance)},_isSelectionKeyPressed:function(t){return Array.isArray(this.selectionKey)?!!this.selectionKey.find((function(e){return!0===t[e]})):t[this.selectionKey]},_shouldClearSelection:function(t,e){var i=this.getActiveObjects(),r=this._activeObject;return!e||e&&r&&i.length>1&&-1===i.indexOf(e)&&r!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&r&&r!==e},_shouldCenterTransform:function(t,e,i){var r;if(t)return\"scale\"===e||\"scaleX\"===e||\"scaleY\"===e||\"resizing\"===e?r=this.centeredScaling||t.centeredScaling:\"rotate\"===e&&(r=this.centeredRotation||t.centeredRotation),r?!i:i},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return\"ml\"===e||\"tl\"===e||\"bl\"===e?i.x=\"right\":\"mr\"!==e&&\"tr\"!==e&&\"br\"!==e||(i.x=\"left\"),\"tl\"===e||\"mt\"===e||\"tr\"===e?i.y=\"bottom\":\"bl\"!==e&&\"mb\"!==e&&\"br\"!==e||(i.y=\"top\"),i},_getActionFromCorner:function(t,e,i,r){if(!e||!t)return\"drag\";var n=r.controls[e];return n.getActionName(i,n,r)},_setupCurrentTransform:function(t,i,r){if(i){var n=this.getPointer(t),s=i.__corner,o=i.controls[s],a=r&&s?o.getActionHandler(t,i,o):S.controlsUtils.dragHandler,h=this._getActionFromCorner(r,s,t,i),l=this._getOriginFromCorner(i,s),c=t[this.centeredKey],u={target:i,action:h,actionHandler:a,corner:s,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,offsetX:n.x-i.left,offsetY:n.y-i.top,originX:l.x,originY:l.y,ex:n.x,ey:n.y,lastX:n.x,lastY:n.y,theta:e(i.angle),width:i.width*i.scaleX,shiftKey:t.shiftKey,altKey:c,original:S.util.saveObjectTransform(i)};this._shouldCenterTransform(i,h,c)&&(u.originX=\"center\",u.originY=\"center\"),u.original.originX=l.x,u.original.originY=l.y,this._currentTransform=u,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,i=new S.Point(e.ex,e.ey),r=S.util.transformPoint(i,this.viewportTransform),n=new S.Point(e.ex+e.left,e.ey+e.top),s=S.util.transformPoint(n,this.viewportTransform),o=Math.min(r.x,s.x),a=Math.min(r.y,s.y),h=Math.max(r.x,s.x),l=Math.max(r.y,s.y),c=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(o,a,h-o,l-a)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,o+=c,a+=c,h-=c,l-=c,S.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(o,a,h-o,l-a))},findTarget:function(t,e){if(!this.skipTargetFind){var r,n,s=this.getPointer(t,!0),o=this._activeObject,a=this.getActiveObjects(),h=i(t),l=a.length>1&&!e||1===a.length;if(this.targets=[],l&&o._findTargetCorner(s,h))return o;if(a.length>1&&!e&&o===this._searchPossibleTargets([o],s))return o;if(1===a.length&&o===this._searchPossibleTargets([o],s)){if(!this.preserveObjectStacking)return o;r=o,n=this.targets,this.targets=[]}var c=this._searchPossibleTargets(this._objects,s);return t[this.altSelectionKey]&&c&&r&&c!==r&&(c=r,this.targets=n),c}},_checkTarget:function(t,e,i){if(e&&e.visible&&e.evented&&e.containsPoint(t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,i.x,i.y))return!0}},_searchPossibleTargets:function(t,e){for(var i,r,n=t.length;n--;){var s=t[n],o=s.group?this._normalizePointer(s.group,e):e;if(this._checkTarget(o,s,e)){(i=t[n]).subTargetCheck&&i instanceof S.Group&&(r=this._searchPossibleTargets(i._objects,e))&&this.targets.push(r);break}}return i},restorePointerVpt:function(t){return S.util.transformPoint(t,S.util.invertTransform(this.viewportTransform))},getPointer:function(e,i){if(this._absolutePointer&&!i)return this._absolutePointer;if(this._pointer&&i)return this._pointer;var r,n=t(e),s=this.upperCanvasEl,o=s.getBoundingClientRect(),a=o.width||0,h=o.height||0;a&&h||(\"top\"in o&&\"bottom\"in o&&(h=Math.abs(o.top-o.bottom)),\"right\"in o&&\"left\"in o&&(a=Math.abs(o.right-o.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,i||(n=this.restorePointerVpt(n));var l=this.getRetinaScaling();return 1!==l&&(n.x/=l,n.y/=l),r=0===a||0===h?{width:1,height:1}:{width:s.width/a,height:s.height/h},{x:n.x*r.width,y:n.y*r.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\\s*lower-canvas\\s*/,\"\"),e=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className=\"\":(i=this._createCanvasElement(),this.upperCanvasEl=i),S.util.addClass(i,\"upper-canvas \"+t),this.wrapperEl.appendChild(i),this._copyCanvasStyle(e,i),this._applyCanvasStyle(i),this.contextTop=i.getContext(\"2d\")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute(\"width\",this.width),this.cacheCanvasEl.setAttribute(\"height\",this.height),this.contextCache=this.cacheCanvasEl.getContext(\"2d\")},_initWrapperElement:function(){this.wrapperEl=S.util.wrapElement(this.lowerCanvasEl,\"div\",{class:this.containerClass}),S.util.setStyle(this.wrapperEl,{width:this.width+\"px\",height:this.height+\"px\",position:\"relative\"}),S.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,i=this.height||t.height;S.util.setStyle(t,{position:\"absolute\",width:e+\"px\",height:i+\"px\",left:0,top:0,\"touch-action\":this.allowTouchScrolling?\"manipulation\":\"none\",\"-ms-touch-action\":this.allowTouchScrolling?\"manipulation\":\"none\"}),t.width=e,t.height=i,S.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?\"activeSelection\"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire(\"before:selection:cleared\",{target:t}),this._discardActiveObject(),this.fire(\"selection:cleared\",{target:t}),t.fire(\"deselected\")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper(\"_onObjectRemoved\",t)},_fireSelectionEvents:function(t,e){var i=!1,r=this.getActiveObjects(),n=[],s=[];t.forEach((function(t){-1===r.indexOf(t)&&(i=!0,t.fire(\"deselected\",{e,target:t}),s.push(t))})),r.forEach((function(r){-1===t.indexOf(r)&&(i=!0,r.fire(\"selected\",{e,target:r}),n.push(r))})),t.length>0&&r.length>0?i&&this.fire(\"selection:updated\",{e,selected:n,deselected:s}):r.length>0?this.fire(\"selection:created\",{e,selected:n}):t.length>0&&this.fire(\"selection:cleared\",{e,deselected:s})},setActiveObject:function(t,e){var i=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(i,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&!!this._discardActiveObject(e,t)&&!t.onSelect({e})&&(this._activeObject=t,!0)},_discardActiveObject:function(t,e){var i=this._activeObject;if(i){if(i.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),i=this.getActiveObject();return e.length&&this.fire(\"before:selection:cleared\",{target:i,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,[\"upperCanvasEl\",\"cacheCanvasEl\"].forEach(function(t){S.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,S.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper(\"clear\")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,i){var r=this._realizeGroupTransformOnObject(t),n=this.callSuper(\"_toObject\",t,e,i);return this._unwindGroupTransformOnObject(t,r),n},_realizeGroupTransformOnObject:function(t){if(t.group&&\"activeSelection\"===t.group.type&&this._activeObject===t.group){var e={};return[\"angle\",\"flipX\",\"flipY\",\"left\",\"scaleX\",\"scaleY\",\"skewX\",\"skewY\",\"top\"].forEach((function(i){e[i]=t[i]})),S.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),e}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var r=this._realizeGroupTransformOnObject(e);this.callSuper(\"_setSVGObject\",t,e,i),this._unwindGroupTransformOnObject(e,r)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),S.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),S.StaticCanvas)\"prototype\"!==r&&(S.Canvas[r]=S.StaticCanvas[r])}(),function(){var t=S.util.addListener,e=S.util.removeListener,i={passive:!1};function r(t,e){return t.button&&t.button===e-1}S.util.object.extend(S.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(t,\"add\")},_getEventPrefix:function(){return this.enablePointerEvents?\"pointer\":\"mouse\"},addOrRemove:function(t,e){var r=this.upperCanvasEl,n=this._getEventPrefix();t(S.window,\"resize\",this._onResize),t(r,n+\"down\",this._onMouseDown),t(r,n+\"move\",this._onMouseMove,i),t(r,n+\"out\",this._onMouseOut),t(r,n+\"enter\",this._onMouseEnter),t(r,\"wheel\",this._onMouseWheel),t(r,\"contextmenu\",this._onContextMenu),t(r,\"dblclick\",this._onDoubleClick),t(r,\"dragover\",this._onDragOver),t(r,\"dragenter\",this._onDragEnter),t(r,\"dragleave\",this._onDragLeave),t(r,\"drop\",this._onDrop),this.enablePointerEvents||t(r,\"touchstart\",this._onTouchStart,i),\"undefined\"!=typeof eventjs&&e in eventjs&&(eventjs[e](r,\"gesture\",this._onGesture),eventjs[e](r,\"drag\",this._onDrag),eventjs[e](r,\"orientation\",this._onOrientationChange),eventjs[e](r,\"shake\",this._onShake),eventjs[e](r,\"longpress\",this._onLongPress))},removeListeners:function(){this.addOrRemove(e,\"remove\");var t=this._getEventPrefix();e(S.document,t+\"up\",this._onMouseUp),e(S.document,\"touchend\",this._onTouchEnd,i),e(S.document,t+\"move\",this._onMouseMove,i),e(S.document,\"touchmove\",this._onMouseMove,i)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,\"dragenter\"),this._onDragLeave=this._simpleEventHandler.bind(this,\"dragleave\"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire(\"mouse:out\",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire(\"mouseout\",{e:t});var i=this;this._hoveredTargets.forEach((function(r){i.fire(\"mouse:out\",{target:e,e:t}),r&&e.fire(\"mouseout\",{e:t})})),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach((function(t){t.isEditing&&t.hiddenTextarea.focus()}))},_onMouseEnter:function(t){this._currentTransform||this.findTarget(t)||(this.fire(\"mouse:over\",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler(\"dragover\",t);this._fireEnterLeaveEvents(e,t)},_onDrop:function(t){return this._simpleEventHandler(\"drop:before\",t),this._simpleEventHandler(\"drop\",t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,\"dblclick\"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&(\"touchend\"===t.type&&0===t.touches.length||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(r){r.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(r)),this.__onMouseDown(r),this._resetTransformEventData();var n=this.upperCanvasEl,s=this._getEventPrefix();t(S.document,\"touchend\",this._onTouchEnd,i),t(S.document,\"touchmove\",this._onMouseMove,i),e(n,s+\"down\",this._onMouseDown)},_onMouseDown:function(r){this.__onMouseDown(r),this._resetTransformEventData();var n=this.upperCanvasEl,s=this._getEventPrefix();e(n,s+\"move\",this._onMouseMove,i),t(S.document,s+\"up\",this._onMouseUp),t(S.document,s+\"move\",this._onMouseMove,i)},_onTouchEnd:function(r){if(!(r.touches.length>0)){this.__onMouseUp(r),this._resetTransformEventData(),this.mainTouchId=null;var n=this._getEventPrefix();e(S.document,\"touchend\",this._onTouchEnd,i),e(S.document,\"touchmove\",this._onMouseMove,i);var s=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){t(s.upperCanvasEl,n+\"down\",s._onMouseDown),s._willAddMouseDown=0}),400)}},_onMouseUp:function(r){this.__onMouseUp(r),this._resetTransformEventData();var n=this.upperCanvasEl,s=this._getEventPrefix();this._isMainEvent(r)&&(e(S.document,s+\"up\",this._onMouseUp),e(S.document,s+\"move\",this._onMouseMove,i),t(n,s+\"move\",this._onMouseMove,i))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!=!!t||e&&t&&e!==t)||(e&&e.isEditing,!1)},__onMouseUp:function(t){var e,i=this._currentTransform,n=this._groupSelector,s=!1,o=!n||0===n.left&&0===n.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,\"up:before\"),r(t,3))this.fireRightClick&&this._handleEvent(t,\"up\",3,o);else{if(r(t,2))return this.fireMiddleClick&&this._handleEvent(t,\"up\",2,o),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else if(this._isMainEvent(t)){if(i&&(this._finalizeCurrentTransform(t),s=i.actionPerformed),!o){var a=e===this._activeObject;this._maybeGroupObjects(t),s||(s=this._shouldRender(e)||!a&&e===this._activeObject)}var h,l;if(e){if(h=e._findTargetCorner(this.getPointer(t,!0),S.util.isTouchEvent(t)),e.selectable&&e!==this._activeObject&&\"up\"===e.activeOn)this.setActiveObject(e,t),s=!0;else{var c=e.controls[h],u=c&&c.getMouseUpHandler(t,e,c);u&&u(t,i,(l=this.getPointer(t)).x,l.y)}e.isMoving=!1}if(i&&(i.target!==e||i.corner!==h)){var d=i.target&&i.target.controls[i.corner],f=d&&d.getMouseUpHandler(t,e,c);l=l||this.getPointer(t),f&&f(t,i,l.x,l.y)}this._setCursorFromEvent(t,e),this._handleEvent(t,\"up\",1,o),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),s?this.requestRenderAll():o||this.renderTop()}}},_simpleEventHandler:function(t,e){var i=this.findTarget(e),r=this.targets,n={e,target:i,subTargets:r};if(this.fire(t,n),i&&i.fire(t,n),!r)return i;for(var s=0;s<r.length;s++)r[s].fire(t,n);return i},_handleEvent:function(t,e,i,r){var n=this._target,s=this.targets||[],o={e:t,target:n,subTargets:s,button:i||1,isClick:r||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};\"up\"===e&&(o.currentTarget=this.findTarget(t),o.currentSubTargets=this.targets),this.fire(\"mouse:\"+e,o),n&&n.fire(\"mouse\"+e,o);for(var a=0;a<s.length;a++)s[a].fire(\"mouse\"+e,o)},_finalizeCurrentTransform:function(t){var e=this._currentTransform,i=e.target,r={e:t,target:i,transform:e,action:e.action};i._scaling&&(i._scaling=!1),i.setCoords(),(e.actionPerformed||this.stateful&&i.hasStateChanged())&&this._fire(\"modified\",r)},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll();var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,\"down\")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,\"move\")},_onMouseUpInDrawingMode:function(t){var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,\"up\")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,\"down:before\");var e=this._target;if(r(t,3))this.fireRightClick&&this._handleEvent(t,\"down\",3);else if(r(t,2))this.fireMiddleClick&&this._handleEvent(t,\"down\",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){var i=this._pointer;this._previousPointer=i;var n=this._shouldRender(e),s=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):s&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),e){var o=e===this._activeObject;e.selectable&&\"down\"===e.activeOn&&this.setActiveObject(e,t);var a=e._findTargetCorner(this.getPointer(t,!0),S.util.isTouchEvent(t));if(e.__corner=a,e===this._activeObject&&(a||!s)){this._setupCurrentTransform(t,e,o);var h=e.controls[a],l=(i=this.getPointer(t),h&&h.getMouseDownHandler(t,e,h));l&&l(t,this._currentTransform,i.x,i.y)}}this._handleEvent(t,\"down\"),(n||s)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire(\"before:transform\",{e:t,transform:e})},__onMouseMove:function(t){var e,i;if(this._handleEvent(t,\"move:before\"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var r=this._groupSelector;r?(i=this._absolutePointer,r.left=i.x-r.ex,r.top=i.y-r.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,\"move\"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){var i=this._hoveredTarget,r=this._hoveredTargets,n=this.targets,s=Math.max(r.length,n.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:\"mouseout\",canvasEvtOut:\"mouse:out\",evtIn:\"mouseover\",canvasEvtIn:\"mouse:over\"});for(var o=0;o<s;o++)this.fireSyntheticInOutEvents(n[o],e,{oldTarget:r[o],evtOut:\"mouseout\",evtIn:\"mouseover\"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var i=this._draggedoverTarget,r=this._hoveredTargets,n=this.targets,s=Math.max(r.length,n.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:\"dragleave\",evtIn:\"dragenter\"});for(var o=0;o<s;o++)this.fireSyntheticInOutEvents(n[o],e,{oldTarget:r[o],evtOut:\"dragleave\",evtIn:\"dragenter\"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,i){var r,n,s,o=i.oldTarget,a=o!==t,h=i.canvasEvtIn,l=i.canvasEvtOut;a&&(r={e,target:t,previousTarget:o},n={e,target:o,nextTarget:t}),s=t&&a,o&&a&&(l&&this.fire(l,n),o.fire(i.evtOut,n)),s&&(h&&this.fire(h,r),t.fire(i.evtIn,r))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,\"wheel\"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.shiftKey=t.shiftKey,i.altKey=t[this.centeredKey],this._performTransformAction(t,i,e),i.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,i){var r=i.x,n=i.y,s=e.action,o=!1,a=e.actionHandler;a&&(o=a(t,e,r,n)),\"drag\"===s&&o&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||o},_fire:S.controlsUtils.fireEvent,_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor,r=this._activeObject&&\"activeSelection\"===this._activeObject.type?this._activeObject:null,n=(!r||!r.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));n?this.setCursor(this.getCornerCursor(n,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map((function(t){i=t.hoverCursor||i})),this.setCursor(i))},getCornerCursor:function(t,e,i){var r=e.controls[t];return r.cursorStyleHandler(i,r,e)}})}(),_=Math.min,y=Math.max,S.util.object.extend(S.Canvas.prototype,{_shouldGroup:function(t,e){var i=this._activeObject;return i&&this._isSelectionKeyPressed(t)&&e&&e.selectable&&this.selection&&(i!==e||\"activeSelection\"===i.type)&&!e.onSelect({e:t})},_handleGrouping:function(t,e){var i=this._activeObject;i.__corner||(e!==i||(e=this.findTarget(t,!0))&&e.selectable)&&(i&&\"activeSelection\"===i.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var i=this._activeObject,r=i._objects.slice(0);i.contains(t)?(i.removeWithUpdate(t),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat(),1===i.size()&&this._setActiveObject(i.item(0),e)):(i.addWithUpdate(t),this._hoveredTarget=i,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(r,e)},_createActiveSelection:function(t,e){var i=this.getActiveObjects(),r=this._createGroup(t);this._hoveredTarget=r,this._setActiveObject(r,e),this._fireSelectionEvents(i,e)},_createGroup:function(t){var e=this._objects,i=e.indexOf(this._activeObject)<e.indexOf(t)?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new S.ActiveSelection(i,{canvas:this})},_groupSelectedObjects:function(t){var e,i=this._collectObjects(t);1===i.length?this.setActiveObject(i[0],t):i.length>1&&(e=new S.ActiveSelection(i.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(t){for(var e,i=[],r=this._groupSelector.ex,n=this._groupSelector.ey,s=r+this._groupSelector.left,o=n+this._groupSelector.top,a=new S.Point(_(r,s),_(n,o)),h=new S.Point(y(r,s),y(n,o)),l=!this.selectionFullyContained,c=r===s&&n===o,u=this._objects.length;u--&&!((e=this._objects[u])&&e.selectable&&e.visible&&(l&&e.intersectsWithRect(a,h,!0)||e.isContainedWithinRect(a,h,!0)||l&&e.containsPoint(a,null,!0)||l&&e.containsPoint(h,null,!0))&&(i.push(e),c)););return i.length>1&&(i=i.filter((function(e){return!e.onSelect({e:t})}))),i},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}}),S.util.object.extend(S.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||\"png\",i=t.quality||1,r=(t.multiplier||1)*(t.enableRetinaScaling?this.getRetinaScaling():1),n=this.toCanvasElement(r,t);return S.util.toDataURL(n,e,i)},toCanvasElement:function(t,e){t=t||1;var i=((e=e||{}).width||this.width)*t,r=(e.height||this.height)*t,n=this.getZoom(),s=this.width,o=this.height,a=n*t,h=this.viewportTransform,l=(h[4]-(e.left||0))*t,c=(h[5]-(e.top||0))*t,u=this.interactive,d=[a,0,0,a,l,c],f=this.enableRetinaScaling,g=S.util.createCanvasElement(),m=this.contextTop;return g.width=i,g.height=r,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=d,this.width=i,this.height=r,this.calcViewportBoundaries(),this.renderCanvas(g.getContext(\"2d\"),this._objects),this.viewportTransform=h,this.width=s,this.height=o,this.calcViewportBoundaries(),this.interactive=u,this.enableRetinaScaling=f,this.contextTop=m,g}}),S.util.object.extend(S.StaticCanvas.prototype,{loadFromJSON:function(t,e,i){if(t){var r=\"string\"==typeof t?JSON.parse(t):S.util.object.clone(t),n=this,s=r.clipPath,o=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete r.clipPath,this._enlivenObjects(r.objects,(function(t){n.clear(),n._setBgOverlay(r,(function(){s?n._enlivenObjects([s],(function(i){n.clipPath=i[0],n.__setupCanvas.call(n,r,t,o,e)})):n.__setupCanvas.call(n,r,t,o,e)}))}),i),this}},__setupCanvas:function(t,e,i,r){var n=this;e.forEach((function(t,e){n.insertAt(t,e)})),this.renderOnAddRemove=i,delete t.objects,delete t.backgroundImage,delete t.overlayImage,delete t.background,delete t.overlay,this._setOptions(t),this.renderAll(),r&&r()},_setBgOverlay:function(t,e){var i={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var r=function(){i.backgroundImage&&i.overlayImage&&i.backgroundColor&&i.overlayColor&&e&&e()};this.__setBgOverlay(\"backgroundImage\",t.backgroundImage,i,r),this.__setBgOverlay(\"overlayImage\",t.overlayImage,i,r),this.__setBgOverlay(\"backgroundColor\",t.background,i,r),this.__setBgOverlay(\"overlayColor\",t.overlay,i,r)}else e&&e()},__setBgOverlay:function(t,e,i,r){var n=this;if(!e)return i[t]=!0,void(r&&r());\"backgroundImage\"===t||\"overlayImage\"===t?S.util.enlivenObjects([e],(function(e){n[t]=e[0],i[t]=!0,r&&r()})):this[\"set\"+S.util.string.capitalize(t,!0)](e,(function(){i[t]=!0,r&&r()}))},_enlivenObjects:function(t,e,i){t&&0!==t.length?S.util.enlivenObjects(t,(function(t){e&&e(t)}),null,i):e&&e([])},_toDataURL:function(t,e){this.clone((function(i){e(i.toDataURL(t))}))},_toDataURLWithMultiplier:function(t,e,i){this.clone((function(r){i(r.toDataURLWithMultiplier(t,e))}))},clone:function(t,e){var i=JSON.stringify(this.toJSON(e));this.cloneWithoutData((function(e){e.loadFromJSON(i,(function(){t&&t(e)}))}))},cloneWithoutData:function(t){var e=S.util.createCanvasElement();e.width=this.width,e.height=this.height;var i=new S.Canvas(e);this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,(function(){i.renderAll(),t&&t(i)})),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.object.clone,n=e.util.toFixed,s=e.util.string.capitalize,o=e.util.degreesToRadians,a=!e.isLikelyNode;e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:\"object\",originX:\"left\",originY:\"top\",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:\"rgb(178,204,255)\",borderDashArray:null,cornerColor:\"rgb(178,204,255)\",cornerStrokeColor:null,cornerStyle:\"rect\",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:\"rgb(0,0,0)\",fillRule:\"nonzero\",globalCompositeOperation:\"source-over\",backgroundColor:\"\",selectionBackgroundColor:\"\",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:\"butt\",strokeLineJoin:\"miter\",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:a,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:\"fill\",activeOn:\"down\",stateProperties:\"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform\".split(\" \"),cacheProperties:\"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath\".split(\" \"),colorProperties:\"fill stroke backgroundColor\".split(\" \"),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=e.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext(\"2d\"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(t){var i=e.perfLimitSizeTotal,r=t.width,n=t.height,s=e.maxCacheSideLimit,o=e.minCacheSideLimit;if(r<=s&&n<=s&&r*n<=i)return r<o&&(t.width=o),n<o&&(t.height=o),t;var a=r/n,h=e.util.limitDimsByArea(a,i),l=e.util.capValue,c=l(o,h.x,s),u=l(o,h.y,s);return r>c&&(t.zoomX/=r/c,t.width=c,t.capped=!0),n>u&&(t.zoomY/=n/u,t.height=u,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.getTotalObjectScaling(),e=this._getTransformedDimensions(0,0),i=e.x*t.scaleX/this.scaleX,r=e.y*t.scaleY/this.scaleY;return{width:i+2,height:r+2,zoomX:t.scaleX,zoomY:t.scaleY,x:i,y:r}},_updateCacheCanvas:function(){var t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){var i=t._currentTransform.target,r=t._currentTransform.action;if(this===i&&r.slice&&\"scale\"===r.slice(0,5))return!1}var n,s,o=this._cacheCanvas,a=this._limitCacheSize(this._getCacheCanvasDimensions()),h=e.minCacheSideLimit,l=a.width,c=a.height,u=a.zoomX,d=a.zoomY,f=l!==this.cacheWidth||c!==this.cacheHeight,g=this.zoomX!==u||this.zoomY!==d,m=f||g,p=0,v=0,_=!1;if(f){var y=this._cacheCanvas.width,w=this._cacheCanvas.height,b=l>y||c>w;_=b||(l<.9*y||c<.9*w)&&y>h&&w>h,b&&!a.capped&&(l>h||c>h)&&(p=.1*l,v=.1*c)}return this instanceof e.Text&&this.path&&(m=!0,_=!0,p+=this.getHeightOfLine(0)*this.zoomX,v+=this.getHeightOfLine(0)*this.zoomY),!!m&&(_?(o.width=Math.ceil(l+p),o.height=Math.ceil(c+v)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,o.width,o.height)),n=a.x/2,s=a.y/2,this.cacheTranslationX=Math.round(o.width/2-n)+n,this.cacheTranslationY=Math.round(o.height/2-s)+s,this.cacheWidth=l,this.cacheHeight=c,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(u,d),this.zoomX=u,this.zoomY=d,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,\"fill\"),this._initGradient(t.stroke,\"stroke\"),this._initPattern(t.fill,\"fill\"),this._initPattern(t.stroke,\"stroke\")},transform:function(t){var e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,i=this.calcTransformMatrix(!e);t.transform(i[0],i[1],i[2],i[3],i[4],i[5])},toObject:function(t){var i=e.Object.NUM_FRACTION_DIGITS,r={type:this.type,version:e.version,originX:this.originX,originY:this.originY,left:n(this.left,i),top:n(this.top,i),width:n(this.width,i),height:n(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:n(this.strokeWidth,i),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:n(this.strokeMiterLimit,i),scaleX:n(this.scaleX,i),scaleY:n(this.scaleY,i),angle:n(this.angle,i),flipX:this.flipX,flipY:this.flipY,opacity:n(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:n(this.skewX,i),skewY:n(this.skewY,i)};return this.clipPath&&!this.clipPath.excludeFromExport&&(r.clipPath=this.clipPath.toObject(t),r.clipPath.inverted=this.clipPath.inverted,r.clipPath.absolutePositioned=this.clipPath.absolutePositioned),e.util.populateWithProperties(this,r,t),this.includeDefaultValues||(r=this._removeDefaultValues(r)),r},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var i=e.util.getKlass(t.type).prototype;return i.stateProperties.forEach((function(e){\"left\"!==e&&\"top\"!==e&&(t[e]===i[e]&&delete t[e],Array.isArray(t[e])&&Array.isArray(i[e])&&0===t[e].length&&0===i[e].length&&delete t[e])})),t},toString:function(){return\"#<fabric.\"+s(this.type)+\">\"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var t=e.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(t.scaleX),scaleY:Math.abs(t.scaleY)}},getTotalObjectScaling:function(){var t=this.getObjectScaling(),e=t.scaleX,i=t.scaleY;if(this.canvas){var r=this.canvas.getZoom(),n=this.canvas.getRetinaScaling();e*=r*n,i*=r*n}return{scaleX:e,scaleY:i}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,i){var r=\"scaleX\"===t||\"scaleY\"===t,n=this[t]!==i,s=!1;return r&&(i=this._constrainScale(i)),\"scaleX\"===t&&i<0?(this.flipX=!this.flipX,i*=-1):\"scaleY\"===t&&i<0?(this.flipY=!this.flipY,i*=-1):\"shadow\"!==t||!i||i instanceof e.Shadow?\"dirty\"===t&&this.group&&this.group.set(\"dirty\",i):i=new e.Shadow(i),this[t]=i,n&&(s=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(t)>-1?(this.dirty=!0,s&&this.group.set(\"dirty\",!0)):s&&this.stateProperties.indexOf(t)>-1&&this.group.set(\"dirty\",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:\"cacheProperties\"})),t.restore())},renderCache:function(t){t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:\"cacheProperties\"}),this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&\"transparent\"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&\"transparent\"!==this.fill},needsItsOwnCache:function(){return!(\"stroke\"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||\"object\"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(t,i){if(t.save(),i.inverted?t.globalCompositeOperation=\"destination-out\":t.globalCompositeOperation=\"destination-in\",i.absolutePositioned){var r=e.util.invertTransform(this.calcTransformMatrix());t.transform(r[0],r[1],r[2],r[3],r[4],r[5])}i.transform(t),t.scale(1/i.zoomX,1/i.zoomY),t.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),t.restore()},drawObject:function(t,e){var i=this.fill,r=this.stroke;e?(this.fill=\"black\",this.stroke=\"\",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath),this.fill=i,this.stroke=r},_drawClipPath:function(t,e){e&&(e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t,e))},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged(\"cacheProperties\")){if(this._cacheCanvas&&this._cacheContext&&!t){var e=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-i/2,e,i)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){var i=e.stroke;i&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,i.toLive?\"percentage\"===i.gradientUnits||i.gradientTransform||i.patternTransform?this._applyPatternForTransformedGradient(t,i):(t.strokeStyle=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):t.strokeStyle=e.stroke)},_setFillStyles:function(t,e){var i=e.fill;i&&(i.toLive?(t.fillStyle=i.toLive(t,this),this._applyPatternGradientTransform(t,e.fill)):t.fillStyle=i)},_setClippingProperties:function(t){t.globalAlpha=1,t.strokeStyle=\"transparent\",t.fillStyle=\"#000000\"},_setLineDash:function(t,e){e&&0!==e.length&&(1&e.length&&e.push.apply(e,e),t.setLineDash(e))},_renderControls:function(t,i){var r,n,s,a=this.getViewportTransform(),h=this.calcTransformMatrix();n=void 0!==(i=i||{}).hasBorders?i.hasBorders:this.hasBorders,s=void 0!==i.hasControls?i.hasControls:this.hasControls,h=e.util.multiplyTransformMatrices(a,h),r=e.util.qrDecompose(h),t.save(),t.translate(r.translateX,r.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(r.angle-=180),t.rotate(o(this.group?r.angle:this.angle)),i.forActiveSelection||this.group?n&&this.drawBordersInGroup(t,r,i):n&&this.drawBorders(t,i),s&&this.drawControls(t,i),t.restore()},_setShadow:function(t){if(this.shadow){var i,r=this.shadow,n=this.canvas,s=n&&n.viewportTransform[0]||1,o=n&&n.viewportTransform[3]||1;i=r.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),n&&n._isRetinaScaling()&&(s*=e.devicePixelRatio,o*=e.devicePixelRatio),t.shadowColor=r.color,t.shadowBlur=r.blur*e.browserShadowBlurConstant*(s+o)*(i.scaleX+i.scaleY)/4,t.shadowOffsetX=r.offsetX*s*i.scaleX,t.shadowOffsetY=r.offsetY*o*i.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor=\"\",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var i=e.gradientTransform||e.patternTransform,r=-this.width/2+e.offsetX||0,n=-this.height/2+e.offsetY||0;return\"percentage\"===e.gradientUnits?t.transform(this.width,0,0,this.height,r,n):t.transform(1,0,0,1,r,n),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:r,offsetY:n}},_renderPaintInOrder:function(t){\"stroke\"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_render:function(){},_renderFill:function(t){this.fill&&(t.save(),this._setFillStyles(t,this),\"evenodd\"===this.fillRule?t.fill(\"evenodd\"):t.fill(),t.restore())},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform&&this.group){var e=this.getObjectScaling();t.scale(1/e.scaleX,1/e.scaleY)}else this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}},_applyPatternForTransformedGradient:function(t,i){var r,n=this._limitCacheSize(this._getCacheCanvasDimensions()),s=e.util.createCanvasElement(),o=this.canvas.getRetinaScaling(),a=n.x/this.scaleX/o,h=n.y/this.scaleY/o;s.width=a,s.height=h,(r=s.getContext(\"2d\")).beginPath(),r.moveTo(0,0),r.lineTo(a,0),r.lineTo(a,h),r.lineTo(0,h),r.closePath(),r.translate(a/2,h/2),r.scale(n.zoomX/this.scaleX/o,n.zoomY/this.scaleY/o),this._applyPatternGradientTransform(r,i),r.fillStyle=i.toLive(t),r.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(o*this.scaleX/n.zoomX,o*this.scaleY/n.zoomY),t.strokeStyle=r.createPattern(s,\"no-repeat\")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var t=e.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set(\"scaleX\",t.scaleX),this.set(\"scaleY\",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0}},_removeTransformMatrix:function(t){var i=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),i=e.util.transformPoint(i,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,i.x+=t.offsetLeft,i.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(i,\"center\",\"center\")},clone:function(t,i){var r=this.toObject(i);this.constructor.fromObject?this.constructor.fromObject(r,t):e.Object._fromObject(\"Object\",r,t)},cloneAsImage:function(t,i){var r=this.toCanvasElement(i);return t&&t(new e.Image(r)),this},toCanvasElement:function(t){t||(t={});var i=e.util,r=i.saveObjectTransform(this),n=this.group,s=this.shadow,o=Math.abs,a=(t.multiplier||1)*(t.enableRetinaScaling?e.devicePixelRatio:1);delete this.group,t.withoutTransform&&i.resetObjectTransform(this),t.withoutShadow&&(this.shadow=null);var h,l,c,u,d=e.util.createCanvasElement(),f=this.getBoundingRect(!0,!0),g=this.shadow,m={x:0,y:0};g&&(l=g.blur,h=g.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),m.x=2*Math.round(o(g.offsetX)+l)*o(h.scaleX),m.y=2*Math.round(o(g.offsetY)+l)*o(h.scaleY)),c=f.width+m.x,u=f.height+m.y,d.width=Math.ceil(c),d.height=Math.ceil(u);var p=new e.StaticCanvas(d,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});\"jpeg\"===t.format&&(p.backgroundColor=\"#fff\"),this.setPositionByOrigin(new e.Point(p.width/2,p.height/2),\"center\",\"center\");var v=this.canvas;p.add(this);var _=p.toCanvasElement(a||1,t);return this.shadow=s,this.set(\"canvas\",v),n&&(this.group=n),this.set(r).setCoords(),p._objects=[],p.dispose(),p=null,_},toDataURL:function(t){return t||(t={}),e.util.toDataURL(this.toCanvasElement(t),t.format||\"png\",t.quality||1)},isType:function(t){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},rotate:function(t){var e=(\"center\"!==this.originX||\"center\"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set(\"angle\",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,i){i=i||this.canvas.getPointer(t);var r=new e.Point(i.x,i.y),n=this._getLeftTopCoords();return this.angle&&(r=e.util.rotatePoint(r,n,o(-this.angle))),{x:r.x-n.x,y:r.y-n.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){e.runningAnimations&&e.runningAnimations.cancelByTarget(this)}}),e.util.createAccessors&&e.util.createAccessors(e.Object),i(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object.ENLIVEN_PROPS=[\"clipPath\"],e.Object._fromObject=function(t,i,n,s){var o=e[t];i=r(i,!0),e.util.enlivenPatterns([i.fill,i.stroke],(function(t){void 0!==t[0]&&(i.fill=t[0]),void 0!==t[1]&&(i.stroke=t[1]),e.util.enlivenObjectEnlivables(i,i,(function(){var t=s?new o(i[s],i):new o(i);n&&n(t)}))}))},e.Object.__uid=0)}(e),w=S.util.degreesToRadians,b={left:-.5,center:0,right:.5},x={top:-.5,center:0,bottom:.5},S.util.object.extend(S.Object.prototype,{translateToGivenOrigin:function(t,e,i,r,n){var s,o,a,h=t.x,l=t.y;return\"string\"==typeof e?e=b[e]:e-=.5,\"string\"==typeof r?r=b[r]:r-=.5,\"string\"==typeof i?i=x[i]:i-=.5,\"string\"==typeof n?n=x[n]:n-=.5,o=n-i,((s=r-e)||o)&&(a=this._getTransformedDimensions(),h=t.x+s*a.x,l=t.y+o*a.y),new S.Point(h,l)},translateToCenterPoint:function(t,e,i){var r=this.translateToGivenOrigin(t,e,i,\"center\",\"center\");return this.angle?S.util.rotatePoint(r,t,w(this.angle)):r},translateToOriginPoint:function(t,e,i){var r=this.translateToGivenOrigin(t,\"center\",\"center\",e,i);return this.angle?S.util.rotatePoint(r,t,w(this.angle)):r},getCenterPoint:function(){var t=new S.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(t,e,i){var r,n,s=this.getCenterPoint();return r=void 0!==e&&void 0!==i?this.translateToGivenOrigin(s,\"center\",\"center\",e,i):new S.Point(this.left,this.top),n=new S.Point(t.x,t.y),this.angle&&(n=S.util.rotatePoint(n,s,-w(this.angle))),n.subtractEquals(r)},setPositionByOrigin:function(t,e,i){var r=this.translateToCenterPoint(t,e,i),n=this.translateToOriginPoint(r,this.originX,this.originY);this.set(\"left\",n.x),this.set(\"top\",n.y)},adjustPosition:function(t){var e,i,r=w(this.angle),n=this.getScaledWidth(),s=S.util.cos(r)*n,o=S.util.sin(r)*n;e=\"string\"==typeof this.originX?b[this.originX]:this.originX-.5,i=\"string\"==typeof t?b[t]:t-.5,this.left+=s*(i-e),this.top+=o*(i-e),this.setCoords(),this.originX=t},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX=\"center\",this.originY=\"center\",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),\"left\",\"top\")}}),function(){var t=S.util,e=t.degreesToRadians,i=t.multiplyTransformMatrices,r=t.transformPoint;t.object.extend(S.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(t,e){return e?t?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),t?this.aCoords:this.lineCoords)},getCoords:function(t,e){return i=this._getCoords(t,e),[new S.Point(i.tl.x,i.tl.y),new S.Point(i.tr.x,i.tr.y),new S.Point(i.br.x,i.br.y),new S.Point(i.bl.x,i.bl.y)];var i},intersectsWithRect:function(t,e,i,r){var n=this.getCoords(i,r);return\"Intersection\"===S.Intersection.intersectPolygonRectangle(n,t,e).status},intersectsWithObject:function(t,e,i){return\"Intersection\"===S.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i)).status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var r=this.getCoords(e,i),n=e?t.aCoords:t.lineCoords,s=0,o=t._getImageLines(n);s<4;s++)if(!t.containsPoint(r[s],o))return!1;return!0},isContainedWithinRect:function(t,e,i,r){var n=this.getBoundingRect(i,r);return n.left>=t.x&&n.left+n.width<=e.x&&n.top>=t.y&&n.top+n.height<=e.y},containsPoint:function(t,e,i,r){var n=this._getCoords(i,r),s=(e=e||this._getImageLines(n),this._findCrossPoints(t,e));return 0!==s&&s%2==1},isOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.getCoords(!0,t).some((function(t){return t.x<=i.x&&t.x>=e.x&&t.y<=i.y&&t.y>=e.y}))||!!this.intersectsWithRect(e,i,!0,t)||this._containsCenterOfCanvas(e,i,t)},_containsCenterOfCanvas:function(t,e,i){var r={x:(t.x+e.x)/2,y:(t.y+e.y)/2};return!!this.containsPoint(r,null,!0,i)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,i,!0,t)||this.getCoords(!0,t).every((function(t){return(t.x>=i.x||t.x<=e.x)&&(t.y>=i.y||t.y<=e.y)}))&&this._containsCenterOfCanvas(e,i,t)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var i,r,n,s=0;for(var o in e)if(!((n=e[o]).o.y<t.y&&n.d.y<t.y||n.o.y>=t.y&&n.d.y>=t.y||(n.o.x===n.d.x&&n.o.x>=t.x?r=n.o.x:(i=(n.d.y-n.o.y)/(n.d.x-n.o.x),r=-(t.y-0*t.x-(n.o.y-i*n.o.x))/(0-i)),r>=t.x&&(s+=1),2!==s)))break;return s},getBoundingRect:function(e,i){var r=this.getCoords(e,i);return t.makeBoundingBoxFromPoints(r)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set(\"scaleX\",t),this._set(\"scaleY\",t),this.setCoords()},scaleToWidth:function(t,e){var i=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/i)},scaleToHeight:function(t,e){var i=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/i)},calcLineCoords:function(){var i=this.getViewportTransform(),n=this.padding,s=e(this.angle),o=t.cos(s)*n,a=t.sin(s)*n,h=o+a,l=o-a,c=this.calcACoords(),u={tl:r(c.tl,i),tr:r(c.tr,i),bl:r(c.bl,i),br:r(c.br,i)};return n&&(u.tl.x-=l,u.tl.y-=h,u.tr.x+=h,u.tr.y-=l,u.bl.x-=h,u.bl.y+=l,u.br.x+=l,u.br.y+=h),u},calcOCoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),r=this.getViewportTransform(),n=i(r,e),s=i(n,t),o=(s=i(s,[1/r[0],0,0,1/r[3],0,0]),this._calculateCurrentDimensions()),a={};return this.forEachControl((function(t,e,i){a[e]=t.positionHandler(o,s,i)})),a},calcACoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),n=i(e,t),s=this._getTransformedDimensions(),o=s.x/2,a=s.y/2;return{tl:r({x:-o,y:-a},n),tr:r({x:o,y:-a},n),bl:r({x:-o,y:a},n),br:r({x:o,y:a},n)}},setCoords:function(t){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),t||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return t.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e=\"_\",i=\"\";return!t&&this.group&&(i=this.group.transformMatrixKey(t)+e),i+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){var e=this.calcOwnMatrix();if(t||!this.group)return e;var r=this.transformMatrixKey(t),n=this.matrixCache||(this.matrixCache={});return n.key===r?n.value:(this.group&&(e=i(this.group.calcTransformMatrix(!1),e)),n.key=r,n.value=e,e)},calcOwnMatrix:function(){var e=this.transformMatrixKey(!0),i=this.ownMatrixCache||(this.ownMatrixCache={});if(i.key===e)return i.value;var r=this._calcTranslateMatrix(),n={angle:this.angle,translateX:r[4],translateY:r[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return i.key=e,i.value=t.composeMatrix(n),i.value},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(e,i){void 0===e&&(e=this.skewX),void 0===i&&(i=this.skewY);var r,n,s,o=0===e&&0===i;if(this.strokeUniform?(n=this.width,s=this.height):(n=(r=this._getNonTransformedDimensions()).x,s=r.y),o)return this._finalizeDimensions(n*this.scaleX,s*this.scaleY);var a=t.sizeAfterTransform(n,s,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:e,skewY:i});return this._finalizeDimensions(a.x,a.y)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return r(e,t,!0).scalarAdd(2*this.padding)}})}(),S.util.object.extend(S.Object.prototype,{sendToBack:function(){return this.group?S.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?S.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?S.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas&&this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?S.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas&&this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group&&\"activeSelection\"!==this.group.type?S.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas&&this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+\": url(#SVGID_\"+e.id+\"); \";var i=new S.Color(e),r=t+\": \"+i.toRgb()+\"; \",n=i.getAlpha();return 1!==n&&(r+=t+\"-opacity: \"+n.toString()+\"; \"),r}return t+\": none; \"}var e=S.util.toFixed;S.util.object.extend(S.Object.prototype,{getSvgStyles:function(e){var i=this.fillRule?this.fillRule:\"nonzero\",r=this.strokeWidth?this.strokeWidth:\"0\",n=this.strokeDashArray?this.strokeDashArray.join(\" \"):\"none\",s=this.strokeDashOffset?this.strokeDashOffset:\"0\",o=this.strokeLineCap?this.strokeLineCap:\"butt\",a=this.strokeLineJoin?this.strokeLineJoin:\"miter\",h=this.strokeMiterLimit?this.strokeMiterLimit:\"4\",l=void 0!==this.opacity?this.opacity:\"1\",c=this.visible?\"\":\" visibility: hidden;\",u=e?\"\":this.getSvgFilter(),d=t(\"fill\",this.fill);return[t(\"stroke\",this.stroke),\"stroke-width: \",r,\"; \",\"stroke-dasharray: \",n,\"; \",\"stroke-linecap: \",o,\"; \",\"stroke-dashoffset: \",s,\"; \",\"stroke-linejoin: \",a,\"; \",\"stroke-miterlimit: \",h,\"; \",d,\"fill-rule: \",i,\"; \",\"opacity: \",l,\";\",u,c].join(\"\")},getSvgSpanStyles:function(e,i){var r=\"; \",n=e.fontFamily?\"font-family: \"+(-1===e.fontFamily.indexOf(\"'\")&&-1===e.fontFamily.indexOf('\"')?\"'\"+e.fontFamily+\"'\":e.fontFamily)+r:\"\",s=e.strokeWidth?\"stroke-width: \"+e.strokeWidth+r:\"\",o=e.fontSize?\"font-size: \"+e.fontSize+\"px\"+r:\"\",a=e.fontStyle?\"font-style: \"+e.fontStyle+r:\"\",h=e.fontWeight?\"font-weight: \"+e.fontWeight+r:\"\",l=e.fill?t(\"fill\",e.fill):\"\",c=e.stroke?t(\"stroke\",e.stroke):\"\",u=this.getSvgTextDecoration(e);return u&&(u=\"text-decoration: \"+u+r),[c,s,n,o,a,h,u,l,e.deltaY?\"baseline-shift: \"+-e.deltaY+\"; \":\"\",i?\"white-space: pre; \":\"\"].join(\"\")},getSvgTextDecoration:function(t){return[\"overline\",\"underline\",\"line-through\"].filter((function(e){return t[e.replace(\"-\",\"\")]})).join(\" \")},getSvgFilter:function(){return this.shadow?\"filter: url(#SVGID_\"+this.shadow.id+\");\":\"\"},getSvgCommons:function(){return[this.id?'id=\"'+this.id+'\" ':\"\",this.clipPath?'clip-path=\"url(#'+this.clipPath.clipPathId+')\" ':\"\"].join(\"\")},getSvgTransform:function(t,e){var i=t?this.calcTransformMatrix():this.calcOwnMatrix();return'transform=\"'+S.util.matrixToSVG(i)+(e||\"\")+'\" '},_setSVGBg:function(t){if(this.backgroundColor){var i=S.Object.NUM_FRACTION_DIGITS;t.push(\"\\t\\t<rect \",this._getFillAttributes(this.backgroundColor),' x=\"',e(-this.width/2,i),'\" y=\"',e(-this.height/2,i),'\" width=\"',e(this.width,i),'\" height=\"',e(this.height,i),'\"></rect>\\n')}},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return\"\\t\"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,e){var i=(e=e||{}).reviver,r=e.additionalTransform||\"\",n=[this.getSvgTransform(!0,r),this.getSvgCommons()].join(\"\"),s=t.indexOf(\"COMMON_PARTS\");return t[s]=n,i?i(t.join(\"\")):t.join(\"\")},_createBaseSVGMarkup:function(t,e){var i,r,n=(e=e||{}).noStyle,s=e.reviver,o=n?\"\":'style=\"'+this.getSvgStyles()+'\" ',a=e.withShadow?'style=\"'+this.getSvgFilter()+'\" ':\"\",h=this.clipPath,l=this.strokeUniform?'vector-effect=\"non-scaling-stroke\" ':\"\",c=h&&h.absolutePositioned,u=this.stroke,d=this.fill,f=this.shadow,g=[],m=t.indexOf(\"COMMON_PARTS\"),p=e.additionalTransform;return h&&(h.clipPathId=\"CLIPPATH_\"+S.Object.__uid++,r='<clipPath id=\"'+h.clipPathId+'\" >\\n'+h.toClipPathSVG(s)+\"</clipPath>\\n\"),c&&g.push(\"<g \",a,this.getSvgCommons(),\" >\\n\"),g.push(\"<g \",this.getSvgTransform(!1),c?\"\":a+this.getSvgCommons(),\" >\\n\"),i=[o,l,n?\"\":this.addPaintOrder(),\" \",p?'transform=\"'+p+'\" ':\"\"].join(\"\"),t[m]=i,d&&d.toLive&&g.push(d.toSVG(this)),u&&u.toLive&&g.push(u.toSVG(this)),f&&g.push(f.toSVG(this)),h&&g.push(r),g.push(t.join(\"\")),g.push(\"</g>\\n\"),c&&g.push(\"</g>\\n\"),s?s(g.join(\"\")):g.join(\"\")},addPaintOrder:function(){return\"fill\"!==this.paintFirst?' paint-order=\"'+this.paintFirst+'\" ':\"\"}})}(),function(){var t=S.util.object.extend,e=\"stateProperties\";function i(e,i,r){var n={};r.forEach((function(t){n[t]=e[t]})),t(e[i],n,!0)}function r(t,e,i){if(t===e)return!0;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0,s=t.length;n<s;n++)if(!r(t[n],e[n]))return!1;return!0}if(t&&\"object\"==typeof t){var o,a=Object.keys(t);if(!e||\"object\"!=typeof e||!i&&a.length!==Object.keys(e).length)return!1;for(n=0,s=a.length;n<s;n++)if(\"canvas\"!==(o=a[n])&&\"group\"!==o&&!r(t[o],e[o]))return!1;return!0}}S.util.object.extend(S.Object.prototype,{hasStateChanged:function(t){var i=\"_\"+(t=t||e);return Object.keys(this[i]).length<this[t].length||!r(this[i],this,!0)},saveState:function(t){var r=t&&t.propertySet||e,n=\"_\"+r;return this[n]?(i(this,n,this[r]),t&&t.stateProperties&&i(this,n,t.stateProperties),this):this.setupState(t)},setupState:function(t){var i=(t=t||{}).propertySet||e;return t.propertySet=i,this[\"_\"+i]={},this.saveState(t),this}})}(),function(){var t=S.util.degreesToRadians;S.util.object.extend(S.Object.prototype,{_findTargetCorner:function(t,e){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var i,r,n,s=t.x,o=t.y,a=Object.keys(this.oCoords),h=a.length-1;for(this.__corner=0;h>=0;h--)if(n=a[h],this.isControlVisible(n)&&(r=this._getImageLines(e?this.oCoords[n].touchCorner:this.oCoords[n].corner),0!==(i=this._findCrossPoints({x:s,y:o},r))&&i%2==1))return this.__corner=n,n;return!1},forEachControl:function(t){for(var e in this.controls)t(this.controls[e],e,this)},_setCornerCoords:function(){var t=this.oCoords;for(var e in t){var i=this.controls[e];t[e].corner=i.calcCornerCoords(this.angle,this.cornerSize,t[e].x,t[e].y,!1),t[e].touchCorner=i.calcCornerCoords(this.angle,this.touchCornerSize,t[e].x,t[e].y,!0)}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;e.save();var i=this.getCenterPoint(),r=this._calculateCurrentDimensions(),n=this.canvas.viewportTransform;return e.translate(i.x,i.y),e.scale(1/n[0],1/n[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-r.x/2,-r.y/2,r.x,r.y),e.restore(),this},drawBorders:function(t,e){e=e||{};var i=this._calculateCurrentDimensions(),r=this.borderScaleFactor,n=i.x+r,s=i.y+r,o=void 0!==e.hasControls?e.hasControls:this.hasControls,a=!1;return t.save(),t.strokeStyle=e.borderColor||this.borderColor,this._setLineDash(t,e.borderDashArray||this.borderDashArray),t.strokeRect(-n/2,-s/2,n,s),o&&(t.beginPath(),this.forEachControl((function(e,i,r){e.withConnection&&e.getVisibility(r,i)&&(a=!0,t.moveTo(e.x*n,e.y*s),t.lineTo(e.x*n+e.offsetX,e.y*s+e.offsetY))})),a&&t.stroke()),t.restore(),this},drawBordersInGroup:function(t,e,i){i=i||{};var r=S.util.sizeAfterTransform(this.width,this.height,e),n=this.strokeWidth,s=this.strokeUniform,o=this.borderScaleFactor,a=r.x+n*(s?this.canvas.getZoom():e.scaleX)+o,h=r.y+n*(s?this.canvas.getZoom():e.scaleY)+o;return t.save(),this._setLineDash(t,i.borderDashArray||this.borderDashArray),t.strokeStyle=i.borderColor||this.borderColor,t.strokeRect(-a/2,-h/2,a,h),t.restore(),this},drawControls:function(t,e){e=e||{},t.save();var i,r,n=this.canvas.getRetinaScaling();return t.setTransform(n,0,0,n,0,0),t.strokeStyle=t.fillStyle=e.cornerColor||this.cornerColor,this.transparentCorners||(t.strokeStyle=e.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(t,e.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(i=this.group.calcTransformMatrix()),this.forEachControl((function(n,s,o){r=o.oCoords[s],n.getVisibility(o,s)&&(i&&(r=S.util.transformPoint(r,i)),n.render(t,r.x,r.y,e,o))})),t.restore(),this},isControlVisible:function(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)},setControlVisible:function(t,e){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},onDeselect:function(){},onSelect:function(){}})}(),S.util.object.extend(S.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){var i=function(){},r=(e=e||{}).onComplete||i,n=e.onChange||i,s=this;return S.util.animate({target:this,startValue:t.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(e){t.set(\"left\",e),s.requestRenderAll(),n()},onComplete:function(){t.setCoords(),r()}})},fxCenterObjectV:function(t,e){var i=function(){},r=(e=e||{}).onComplete||i,n=e.onChange||i,s=this;return S.util.animate({target:this,startValue:t.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(e){t.set(\"top\",e),s.requestRenderAll(),n()},onComplete:function(){t.setCoords(),r()}})},fxRemove:function(t,e){var i=function(){},r=(e=e||{}).onComplete||i,n=e.onChange||i,s=this;return S.util.animate({target:this,startValue:t.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){t.set(\"opacity\",e),s.requestRenderAll(),n()},onComplete:function(){s.remove(t),r()}})}}),S.util.object.extend(S.Object.prototype,{animate:function(){if(arguments[0]&&\"object\"==typeof arguments[0]){var t,e,i=[],r=[];for(t in arguments[0])i.push(t);for(var n=0,s=i.length;n<s;n++)t=i[n],e=n!==s-1,r.push(this._animate(t,arguments[0][t],arguments[1],e));return r}return this._animate.apply(this,arguments)},_animate:function(t,e,i,r){var n,s=this;e=e.toString(),i=i?S.util.object.clone(i):{},~t.indexOf(\".\")&&(n=t.split(\".\"));var o=s.colorProperties.indexOf(t)>-1||n&&s.colorProperties.indexOf(n[1])>-1,a=n?this.get(n[0])[n[1]]:this.get(t);\"from\"in i||(i.from=a),o||(e=~e.indexOf(\"=\")?a+parseFloat(e.replace(\"=\",\"\")):parseFloat(e));var h={target:this,startValue:i.from,endValue:e,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(t,e,r){return i.abort.call(s,t,e,r)},onChange:function(e,o,a){n?s[n[0]][n[1]]=e:s.set(t,e),r||i.onChange&&i.onChange(e,o,a)},onComplete:function(t,e,n){r||(s.setCoords(),i.onComplete&&i.onComplete(t,e,n))}};return o?S.util.animateColor(h.startValue,h.endValue,h.duration,h):S.util.animate(h)}}),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.object.clone,n={x1:1,x2:1,y1:1,y2:1};function s(t,e){var i=t.origin,r=t.axis1,n=t.axis2,s=t.dimension,o=e.nearest,a=e.center,h=e.farthest;return function(){switch(this.get(i)){case o:return Math.min(this.get(r),this.get(n));case a:return Math.min(this.get(r),this.get(n))+.5*this.get(s);case h:return Math.max(this.get(r),this.get(n))}}}e.Line?e.warn(\"fabric.Line is already defined\"):(e.Line=e.util.createClass(e.Object,{type:\"line\",x1:0,y1:0,x2:0,y2:0,cacheProperties:e.Object.prototype.cacheProperties.concat(\"x1\",\"x2\",\"y1\",\"y2\"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper(\"initialize\",e),this.set(\"x1\",t[0]),this.set(\"y1\",t[1]),this.set(\"x2\",t[2]),this.set(\"y2\",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left=\"left\"in t?t.left:this._getLeftToOriginX(),this.top=\"top\"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper(\"_set\",t,e),void 0!==n[t]&&this._setWidthHeight(),this},_getLeftToOriginX:s({origin:\"originX\",axis1:\"x1\",axis2:\"x2\",dimension:\"width\"},{nearest:\"left\",center:\"center\",farthest:\"right\"}),_getTopToOriginY:s({origin:\"originY\",axis1:\"y1\",axis2:\"y2\",dimension:\"height\"},{nearest:\"top\",center:\"center\",farthest:\"bottom\"}),_render:function(t){t.beginPath();var e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;var i=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=i},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return i(this.callSuper(\"toObject\",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper(\"_getNonTransformedDimensions\");return\"butt\"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,i=t*this.width*.5,r=e*this.height*.5;return{x1:i,x2:t*this.width*-.5,y1:r,y2:e*this.height*-.5}},_toSVG:function(){var t=this.calcLinePoints();return[\"<line \",\"COMMON_PARTS\",'x1=\"',t.x1,'\" y1=\"',t.y1,'\" x2=\"',t.x2,'\" y2=\"',t.y2,'\" />\\n']}}),e.Line.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(\"x1 y1 x2 y2\".split(\" \")),e.Line.fromElement=function(t,r,n){n=n||{};var s=e.parseAttributes(t,e.Line.ATTRIBUTE_NAMES),o=[s.x1||0,s.y1||0,s.x2||0,s.y2||0];r(new e.Line(o,i(s,n)))},e.Line.fromObject=function(t,i){var n=r(t,!0);n.points=[t.x1,t.y1,t.x2,t.y2],e.Object._fromObject(\"Line\",n,(function(t){delete t.points,i&&i(t)}),\"points\")})}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.util.degreesToRadians;e.Circle?e.warn(\"fabric.Circle is already defined.\"):(e.Circle=e.util.createClass(e.Object,{type:\"circle\",radius:0,startAngle:0,endAngle:360,cacheProperties:e.Object.prototype.cacheProperties.concat(\"radius\",\"startAngle\",\"endAngle\"),_set:function(t,e){return this.callSuper(\"_set\",t,e),\"radius\"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper(\"toObject\",[\"radius\",\"startAngle\",\"endAngle\"].concat(t))},_toSVG:function(){var t,r=(this.endAngle-this.startAngle)%360;if(0===r)t=[\"<circle \",\"COMMON_PARTS\",'cx=\"0\" cy=\"0\" ','r=\"',this.radius,'\" />\\n'];else{var n=i(this.startAngle),s=i(this.endAngle),o=this.radius;t=['<path d=\"M '+e.util.cos(n)*o+\" \"+e.util.sin(n)*o,\" A \"+o+\" \"+o,\" 0 \",+(r>180?\"1\":\"0\")+\" 1\",\" \"+e.util.cos(s)*o+\" \"+e.util.sin(s)*o,'\" ',\"COMMON_PARTS\",\" />\\n\"]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,i(this.startAngle),i(this.endAngle),!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get(\"radius\")*this.get(\"scaleX\")},getRadiusY:function(){return this.get(\"radius\")*this.get(\"scaleY\")},setRadius:function(t){return this.radius=t,this.set(\"width\",2*t).set(\"height\",2*t)}}),e.Circle.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(\"cx cy r\".split(\" \")),e.Circle.fromElement=function(t,i){var r,n=e.parseAttributes(t,e.Circle.ATTRIBUTE_NAMES);if(!(\"radius\"in(r=n)&&r.radius>=0))throw new Error(\"value of `r` attribute is required and can not be negative\");n.left=(n.left||0)-n.radius,n.top=(n.top||0)-n.radius,i(new e.Circle(n))},e.Circle.fromObject=function(t,i){e.Object._fromObject(\"Circle\",t,i)})}(e),function(t){var e=t.fabric||(t.fabric={});e.Triangle?e.warn(\"fabric.Triangle is already defined\"):(e.Triangle=e.util.createClass(e.Object,{type:\"triangle\",width:100,height:100,_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderPaintInOrder(t)},_toSVG:function(){var t=this.width/2,e=this.height/2;return[\"<polygon \",\"COMMON_PARTS\",'points=\"',[-t+\" \"+e,\"0 \"+-e,t+\" \"+e].join(\",\"),'\" />']}}),e.Triangle.fromObject=function(t,i){return e.Object._fromObject(\"Triangle\",t,i)})}(e),function(t){var e=t.fabric||(t.fabric={}),i=2*Math.PI;e.Ellipse?e.warn(\"fabric.Ellipse is already defined.\"):(e.Ellipse=e.util.createClass(e.Object,{type:\"ellipse\",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat(\"rx\",\"ry\"),initialize:function(t){this.callSuper(\"initialize\",t),this.set(\"rx\",t&&t.rx||0),this.set(\"ry\",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper(\"_set\",t,e),t){case\"rx\":this.rx=e,this.set(\"width\",2*e);break;case\"ry\":this.ry=e,this.set(\"height\",2*e)}return this},getRx:function(){return this.get(\"rx\")*this.get(\"scaleX\")},getRy:function(){return this.get(\"ry\")*this.get(\"scaleY\")},toObject:function(t){return this.callSuper(\"toObject\",[\"rx\",\"ry\"].concat(t))},_toSVG:function(){return[\"<ellipse \",\"COMMON_PARTS\",'cx=\"0\" cy=\"0\" ','rx=\"',this.rx,'\" ry=\"',this.ry,'\" />\\n']},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,i,!1),t.restore(),this._renderPaintInOrder(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(\"cx cy rx ry\".split(\" \")),e.Ellipse.fromElement=function(t,i){var r=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,i(new e.Ellipse(r))},e.Ellipse.fromObject=function(t,i){e.Object._fromObject(\"Ellipse\",t,i)})}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Rect?e.warn(\"fabric.Rect is already defined\"):(e.Rect=e.util.createClass(e.Object,{stateProperties:e.Object.prototype.stateProperties.concat(\"rx\",\"ry\"),type:\"rect\",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat(\"rx\",\"ry\"),initialize:function(t){this.callSuper(\"initialize\",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx?Math.min(this.rx,this.width/2):0,i=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,n=this.height,s=-this.width/2,o=-this.height/2,a=0!==e||0!==i,h=.4477152502;t.beginPath(),t.moveTo(s+e,o),t.lineTo(s+r-e,o),a&&t.bezierCurveTo(s+r-h*e,o,s+r,o+h*i,s+r,o+i),t.lineTo(s+r,o+n-i),a&&t.bezierCurveTo(s+r,o+n-h*i,s+r-h*e,o+n,s+r-e,o+n),t.lineTo(s+e,o+n),a&&t.bezierCurveTo(s+h*e,o+n,s,o+n-h*i,s,o+n-i),t.lineTo(s,o+i),a&&t.bezierCurveTo(s,o+h*i,s+h*e,o,s+e,o),t.closePath(),this._renderPaintInOrder(t)},toObject:function(t){return this.callSuper(\"toObject\",[\"rx\",\"ry\"].concat(t))},_toSVG:function(){return[\"<rect \",\"COMMON_PARTS\",'x=\"',-this.width/2,'\" y=\"',-this.height/2,'\" rx=\"',this.rx,'\" ry=\"',this.ry,'\" width=\"',this.width,'\" height=\"',this.height,'\" />\\n']}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(\"x y rx ry width height\".split(\" \")),e.Rect.fromElement=function(t,r,n){if(!t)return r(null);n=n||{};var s=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0,s.height=s.height||0,s.width=s.width||0;var o=new e.Rect(i(n?e.util.object.clone(n):{},s));o.visible=o.visible&&o.width>0&&o.height>0,r(o)},e.Rect.fromObject=function(t,i){return e.Object._fromObject(\"Rect\",t,i)})}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.util.array.min,n=e.util.array.max,s=e.util.toFixed,o=e.util.projectStrokeOnPoints;e.Polyline?e.warn(\"fabric.Polyline is already defined\"):(e.Polyline=e.util.createClass(e.Object,{type:\"polyline\",points:null,exactBoundingBox:!1,cacheProperties:e.Object.prototype.cacheProperties.concat(\"points\"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper(\"initialize\",e),this._setPositionDimensions(e)},_projectStrokeOnPoints:function(){return o(this.points,this,!0)},_setPositionDimensions:function(t){var e,i=this._calcDimensions(t),r=this.exactBoundingBox?this.strokeWidth:0;this.width=i.width-r,this.height=i.height-r,t.fromSVG||(e=this.translateToGivenOrigin({x:i.left-this.strokeWidth/2+r/2,y:i.top-this.strokeWidth/2+r/2},\"left\",\"top\",this.originX,this.originY)),void 0===t.left&&(this.left=t.fromSVG?i.left:e.x),void 0===t.top&&(this.top=t.fromSVG?i.top:e.y),this.pathOffset={x:i.left+this.width/2+r/2,y:i.top+this.height/2+r/2}},_calcDimensions:function(){var t=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,e=r(t,\"x\")||0,i=r(t,\"y\")||0;return{left:e,top:i,width:(n(t,\"x\")||0)-e,height:(n(t,\"y\")||0)-i}},toObject:function(t){return i(this.callSuper(\"toObject\",t),{points:this.points.concat()})},_toSVG:function(){for(var t=[],i=this.pathOffset.x,r=this.pathOffset.y,n=e.Object.NUM_FRACTION_DIGITS,o=0,a=this.points.length;o<a;o++)t.push(s(this.points[o].x-i,n),\",\",s(this.points[o].y-r,n),\" \");return[\"<\"+this.type+\" \",\"COMMON_PARTS\",'points=\"',t.join(\"\"),'\" />\\n']},commonRender:function(t){var e,i=this.points.length,r=this.pathOffset.x,n=this.pathOffset.y;if(!i||isNaN(this.points[i-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-r,this.points[0].y-n);for(var s=0;s<i;s++)e=this.points[s],t.lineTo(e.x-r,e.y-n);return!0},_render:function(t){this.commonRender(t)&&this._renderPaintInOrder(t)},complexity:function(){return this.get(\"points\").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElementGenerator=function(t){return function(r,n,s){if(!r)return n(null);s||(s={});var o=e.parsePointsAttribute(r.getAttribute(\"points\")),a=e.parseAttributes(r,e[t].ATTRIBUTE_NAMES);a.fromSVG=!0,n(new e[t](o,i(a,s)))}},e.Polyline.fromElement=e.Polyline.fromElementGenerator(\"Polyline\"),e.Polyline.fromObject=function(t,i){return e.Object._fromObject(\"Polyline\",t,i,\"points\")})}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.util.projectStrokeOnPoints;e.Polygon?e.warn(\"fabric.Polygon is already defined\"):(e.Polygon=e.util.createClass(e.Polyline,{type:\"polygon\",_projectStrokeOnPoints:function(){return i(this.points,this)},_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=e.Polyline.fromElementGenerator(\"Polygon\"),e.Polygon.fromObject=function(t,i){e.Object._fromObject(\"Polygon\",t,i,\"points\")})}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.util.array.min,r=e.util.array.max,n=e.util.object.extend,s=e.util.object.clone,o=e.util.toFixed;e.Path?e.warn(\"fabric.Path is already defined\"):(e.Path=e.util.createClass(e.Object,{type:\"path\",path:null,cacheProperties:e.Object.prototype.cacheProperties.concat(\"path\",\"fillRule\"),stateProperties:e.Object.prototype.stateProperties.concat(\"path\"),initialize:function(t,e){delete(e=s(e||{})).path,this.callSuper(\"initialize\",e),this._setPath(t||[],e)},_setPath:function(t,i){this.path=e.util.makePathSimpler(Array.isArray(t)?t:e.util.parsePath(t)),e.Polyline.prototype._setPositionDimensions.call(this,i||{})},_renderPathCommands:function(t){var e,i=0,r=0,n=0,s=0,o=0,a=0,h=-this.pathOffset.x,l=-this.pathOffset.y;t.beginPath();for(var c=0,u=this.path.length;c<u;++c)switch((e=this.path[c])[0]){case\"L\":n=e[1],s=e[2],t.lineTo(n+h,s+l);break;case\"M\":i=n=e[1],r=s=e[2],t.moveTo(n+h,s+l);break;case\"C\":n=e[5],s=e[6],o=e[3],a=e[4],t.bezierCurveTo(e[1]+h,e[2]+l,o+h,a+l,n+h,s+l);break;case\"Q\":t.quadraticCurveTo(e[1]+h,e[2]+l,e[3]+h,e[4]+l),n=e[3],s=e[4],o=e[1],a=e[2];break;case\"z\":case\"Z\":n=i,s=r,t.closePath()}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return\"#<fabric.Path (\"+this.complexity()+'): { \"top\": '+this.top+', \"left\": '+this.left+\" }>\"},toObject:function(t){return n(this.callSuper(\"toObject\",t),{path:this.path.map((function(t){return t.slice()}))})},toDatalessObject:function(t){var e=this.toObject([\"sourcePath\"].concat(t));return e.sourcePath&&delete e.path,e},_toSVG:function(){return[\"<path \",\"COMMON_PARTS\",'d=\"',e.util.joinPath(this.path),'\" stroke-linecap=\"round\" ',\"/>\\n\"]},_getOffsetTransform:function(){var t=e.Object.NUM_FRACTION_DIGITS;return\" translate(\"+o(-this.pathOffset.x,t)+\", \"+o(-this.pathOffset.y,t)+\")\"},toClipPathSVG:function(t){var e=this._getOffsetTransform();return\"\\t\"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},toSVG:function(t){var e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var t,n,s=[],o=[],a=0,h=0,l=0,c=0,u=0,d=this.path.length;u<d;++u){switch((t=this.path[u])[0]){case\"L\":l=t[1],c=t[2],n=[];break;case\"M\":a=l=t[1],h=c=t[2],n=[];break;case\"C\":n=e.util.getBoundsOfCurve(l,c,t[1],t[2],t[3],t[4],t[5],t[6]),l=t[5],c=t[6];break;case\"Q\":n=e.util.getBoundsOfCurve(l,c,t[1],t[2],t[1],t[2],t[3],t[4]),l=t[3],c=t[4];break;case\"z\":case\"Z\":l=a,c=h}n.forEach((function(t){s.push(t.x),o.push(t.y)})),s.push(l),o.push(c)}var f=i(s)||0,g=i(o)||0;return{left:f,top:g,width:(r(s)||0)-f,height:(r(o)||0)-g}}}),e.Path.fromObject=function(t,i){if(\"string\"==typeof t.sourcePath){var r=t.sourcePath;e.loadSVGFromURL(r,(function(e){var r=e[0];r.setOptions(t),i&&i(r)}))}else e.Object._fromObject(\"Path\",t,i,\"path\")},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat([\"d\"]),e.Path.fromElement=function(t,i,r){var s=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);s.fromSVG=!0,i(new e.Path(s.d,n(s,r)))})}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.util.array.min,r=e.util.array.max;e.Group||(e.Group=e.util.createClass(e.Object,e.Collection,{type:\"group\",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper(\"initialize\",e),this._objects=t||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;if(i)this._updateObjectsACoords();else{var n=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),n||this._calcBounds(),this._updateObjectsCoords(n),delete e.centerPoint,this.callSuper(\"initialize\",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(!0)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){var i=t.left,r=t.top;t.set({left:i-e.x,top:r-e.y}),t.group=this,t.setCoords(!0)},toString:function(){return\"#<fabric.Group: (\"+this.complexity()+\")>\"},addWithUpdate:function(t){var i=!!this.group;return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(i&&e.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set(\"canvas\",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,i?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set(\"canvas\",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,i){var r=this._objects.length;if(this.useSetOnGroup)for(;r--;)this._objects[r].setOnGroup(t,i);if(\"canvas\"===t)for(;r--;)this._objects[r]._set(t,i);e.Object.prototype._set.call(this,t,i)},toObject:function(t){var i=this.includeDefaultValues,r=this._objects.filter((function(t){return!t.excludeFromExport})).map((function(e){var r=e.includeDefaultValues;e.includeDefaultValues=i;var n=e.toObject(t);return e.includeDefaultValues=r,n})),n=e.Object.prototype.toObject.call(this,t);return n.objects=r,n},toDatalessObject:function(t){var i,r=this.sourcePath;if(r)i=r;else{var n=this.includeDefaultValues;i=this._objects.map((function(e){var i=e.includeDefaultValues;e.includeDefaultValues=n;var r=e.toDatalessObject(t);return e.includeDefaultValues=i,r}))}var s=e.Object.prototype.toDatalessObject.call(this,t);return s.objects=i,s},render:function(t){this._transformDone=!0,this.callSuper(\"render\",t),this._transformDone=!1},shouldCache:function(){var t=e.Object.prototype.shouldCache.call(this);if(t)for(var i=0,r=this._objects.length;i<r;i++)if(this._objects[i].willDrawShadow())return this.ownCaching=!1,!1;return t},willDrawShadow:function(){if(e.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,i=this._objects.length;t<i;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,i=this._objects.length;e<i;e++)this._objects[e].render(t);this._drawClipPath(t,this.clipPath)},isCacheDirty:function(t){if(this.callSuper(\"isCacheDirty\",t))return!0;if(!this.statefullCache)return!1;for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var r=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-r/2,-n/2,r,n)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach((function(i){e.util.addTransformToObject(i,t),delete i.group,i.setCoords()})),this},destroy:function(){return this._objects.forEach((function(t){t.set(\"dirty\",!0)})),this._restoreObjectsState()},dispose:function(){this.callSuper(\"dispose\"),this.forEachObject((function(t){t.dispose&&t.dispose()})),this._objects=[]},toActiveSelection:function(){if(this.canvas){var t=this._objects,i=this.canvas;this._objects=[];var r=this.toObject();delete r.objects;var n=new e.ActiveSelection([]);return n.set(r),n.type=\"activeSelection\",i.remove(this),t.forEach((function(t){t.group=n,t.dirty=!0,i.add(t)})),n.canvas=i,n._objects=t,i._activeObject=n,n.setCoords(),n}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject((function(t){t.setCoords(!0)})),this},_calcBounds:function(t){for(var e,i,r,n,s=[],o=[],a=[\"tr\",\"br\",\"bl\",\"tl\"],h=0,l=this._objects.length,c=a.length;h<l;++h){for(r=(e=this._objects[h]).calcACoords(),n=0;n<c;n++)i=a[n],s.push(r[i].x),o.push(r[i].y);e.aCoords=r}this._getBounds(s,o,t)},_getBounds:function(t,n,s){var o=new e.Point(i(t),i(n)),a=new e.Point(r(t),r(n)),h=o.y||0,l=o.x||0,c=a.x-o.x||0,u=a.y-o.y||0;this.width=c,this.height=u,s||this.setPositionByOrigin({x:l,y:h},\"left\",\"top\")},_toSVG:function(t){for(var e=[\"<g \",\"COMMON_PARTS\",\" >\\n\"],i=0,r=this._objects.length;i<r;i++)e.push(\"\\t\\t\",this._objects[i].toSVG(t));return e.push(\"</g>\\n\"),e},getSvgStyles:function(){var t=void 0!==this.opacity&&1!==this.opacity?\"opacity: \"+this.opacity+\";\":\"\",e=this.visible?\"\":\" visibility: hidden;\";return[t,this.getSvgFilter(),e].join(\"\")},toClipPathSVG:function(t){for(var e=[],i=0,r=this._objects.length;i<r;i++)e.push(\"\\t\",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),e.Group.fromObject=function(t,i){var r=t.objects,n=e.util.object.clone(t,!0);delete n.objects,\"string\"!=typeof r?e.util.enlivenObjects(r,(function(r){var n=e.util.object.clone(t,!0);delete n.objects,e.util.enlivenObjectEnlivables(t,n,(function(){i&&i(new e.Group(r,n,!0))}))})):e.loadSVGFromURL(r,(function(s){var o=e.util.groupSVGElements(s,t,r);o.set(n),i&&i(o)}))})}(e),function(t){var e=t.fabric||(t.fabric={});e.ActiveSelection||(e.ActiveSelection=e.util.createClass(e.Group,{type:\"activeSelection\",initialize:function(t,i){i=i||{},this._objects=t||[];for(var r=this._objects.length;r--;)this._objects[r].group=this;i.originX&&(this.originX=i.originX),i.originY&&(this.originY=i.originY),this._calcBounds(),this._updateObjectsCoords(),e.Object.prototype.initialize.call(this,i),this.setCoords()},toGroup:function(){var t=this._objects.concat();this._objects=[];var i=e.Object.prototype.toObject.call(this),r=new e.Group([]);if(delete i.type,r.set(i),t.forEach((function(t){t.canvas.remove(t),t.group=r})),r._objects=t,!this.canvas)return r;var n=this.canvas;return n.add(r),n._activeObject=r,r.setCoords(),r},onDeselect:function(){return this.destroy(),!1},toString:function(){return\"#<fabric.ActiveSelection: (\"+this.complexity()+\")>\"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,e,i){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper(\"_renderControls\",t,e),void 0===(i=i||{}).hasControls&&(i.hasControls=!1),i.forActiveSelection=!0;for(var r=0,n=this._objects.length;r<n;r++)this._objects[r]._renderControls(t,i);t.restore()}}),e.ActiveSelection.fromObject=function(t,i){e.util.enlivenObjects(t.objects,(function(r){delete t.objects,i&&i(new e.ActiveSelection(r,t,!0))}))})}(e),function(t){var e=S.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?S.warn(\"fabric.Image is already defined.\"):(S.Image=S.util.createClass(S.Object,{type:\"image\",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:S.Object.prototype.stateProperties.concat(\"cropX\",\"cropY\"),cacheProperties:S.Object.prototype.cacheProperties.concat(\"cropX\",\"cropY\"),cacheKey:\"\",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(t,e){e||(e={}),this.filters=[],this.cacheKey=\"texture\"+S.Object.__uid++,this.callSuper(\"initialize\",e),this._initElement(t,e)},getElement:function(){return this._element||{}},setElement:function(t,e){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+\"_filtered\"),this._element=t,this._originalElement=t,this._initConfig(e),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var e=S.filterBackend;e&&e.evictCachesForKey&&e.evictCachesForKey(t)},dispose:function(){this.callSuper(\"dispose\"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+\"_filtered\"),this._cacheContext=void 0,[\"_originalElement\",\"_element\",\"_filteredEl\",\"_cacheCanvas\"].forEach(function(t){S.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var t=this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}},toObject:function(t){var i=[];this.filters.forEach((function(t){t&&i.push(t.toObject())}));var r=e(this.callSuper(\"toObject\",[\"cropX\",\"cropY\"].concat(t)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:i});return this.resizeFilter&&(r.resizeFilter=this.resizeFilter.toObject()),r},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var t,e=[],i=[],r=this._element,n=-this.width/2,s=-this.height/2,o=\"\",a=\"\";if(!r)return[];if(this.hasCrop()){var h=S.Object.__uid++;e.push('<clipPath id=\"imageCrop_'+h+'\">\\n','\\t<rect x=\"'+n+'\" y=\"'+s+'\" width=\"'+this.width+'\" height=\"'+this.height+'\" />\\n',\"</clipPath>\\n\"),o=' clip-path=\"url(#imageCrop_'+h+')\" '}if(this.imageSmoothing||(a='\" image-rendering=\"optimizeSpeed'),i.push(\"\\t<image \",\"COMMON_PARTS\",'xlink:href=\"',this.getSvgSrc(!0),'\" x=\"',n-this.cropX,'\" y=\"',s-this.cropY,'\" width=\"',r.width||r.naturalWidth,'\" height=\"',r.height||r.height,a,'\"',o,\"></image>\\n\"),this.stroke||this.strokeDashArray){var l=this.fill;this.fill=null,t=[\"\\t<rect \",'x=\"',n,'\" y=\"',s,'\" width=\"',this.width,'\" height=\"',this.height,'\" style=\"',this.getSvgStyles(),'\"/>\\n'],this.fill=l}return\"fill\"!==this.paintFirst?e.concat(t,i):e.concat(i,t)},getSrc:function(t){var e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute(\"src\"):e.src:this.src||\"\"},setSrc:function(t,e,i){return S.util.loadImage(t,(function(t,r){this.setElement(t,i),this._setWidthHeight(),e&&e(this,r)}),this,i&&i.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: \"'+this.getSrc()+'\" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),r=i.scaleX,n=i.scaleY,s=this._filteredEl||this._originalElement;if(this.group&&this.set(\"dirty\",!0),!t||r>e&&n>e)return this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,void(this._lastScaleY=n);S.filterBackend||(S.filterBackend=S.initFilterBackend());var o=S.util.createCanvasElement(),a=this._filteredEl?this.cacheKey+\"_filtered\":this.cacheKey,h=s.width,l=s.height;o.width=h,o.height=l,this._element=o,this._lastScaleX=t.scaleX=r,this._lastScaleY=t.scaleY=n,S.filterBackend.applyFilters([t],s,h,l,this._element,a),this._filterScalingX=o.width/this._originalElement.width,this._filterScalingY=o.height/this._originalElement.height},applyFilters:function(t){if(t=(t=t||this.filters||[]).filter((function(t){return t&&!t.isNeutralState()})),this.set(\"dirty\",!0),this.removeTexture(this.cacheKey+\"_filtered\"),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e=this._originalElement,i=e.naturalWidth||e.width,r=e.naturalHeight||e.height;if(this._element===this._originalElement){var n=S.util.createCanvasElement();n.width=i,n.height=r,this._element=n,this._filteredEl=n}else this._element=this._filteredEl,this._filteredEl.getContext(\"2d\").clearRect(0,0,i,r),this._lastScaleX=1,this._lastScaleY=1;return S.filterBackend||(S.filterBackend=S.initFilterBackend()),S.filterBackend.applyFilters(t,this._originalElement,i,r,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){S.util.setImageSmoothing(t,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},drawCacheOnCanvas:function(t){S.util.setImageSmoothing(t,this.imageSmoothing),S.Object.prototype.drawCacheOnCanvas.call(this,t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var e=this._element;if(e){var i=this._filterScalingX,r=this._filterScalingY,n=this.width,s=this.height,o=Math.min,a=Math.max,h=a(this.cropX,0),l=a(this.cropY,0),c=e.naturalWidth||e.width,u=e.naturalHeight||e.height,d=h*i,f=l*r,g=o(n*i,c-d),m=o(s*r,u-f),p=-n/2,v=-s/2,_=o(n,c/i-h),y=o(s,u/r-l);e&&t.drawImage(e,d,f,g,m,p,v,_,y)}},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,e){this.setElement(S.util.getById(t),e),S.util.addClass(this.getElement(),S.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t)},_initFilters:function(t,e){t&&t.length?S.util.enlivenObjects(t,(function(t){e&&e(t)}),\"fabric.Image.filters\"):e&&e()},_setWidthHeight:function(t){t||(t={});var e=this.getElement();this.width=t.width||e.naturalWidth||e.width||0,this.height=t.height||e.naturalHeight||e.height||0},parsePreserveAspectRatioAttribute:function(){var t,e=S.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||\"\"),i=this._element.width,r=this._element.height,n=1,s=1,o=0,a=0,h=0,l=0,c=this.width,u=this.height,d={width:c,height:u};return!e||\"none\"===e.alignX&&\"none\"===e.alignY?(n=c/i,s=u/r):(\"meet\"===e.meetOrSlice&&(t=(c-i*(n=s=S.util.findScaleToFit(this._element,d)))/2,\"Min\"===e.alignX&&(o=-t),\"Max\"===e.alignX&&(o=t),t=(u-r*s)/2,\"Min\"===e.alignY&&(a=-t),\"Max\"===e.alignY&&(a=t)),\"slice\"===e.meetOrSlice&&(t=i-c/(n=s=S.util.findScaleToCover(this._element,d)),\"Mid\"===e.alignX&&(h=t/2),\"Max\"===e.alignX&&(h=t),t=r-u/s,\"Mid\"===e.alignY&&(l=t/2),\"Max\"===e.alignY&&(l=t),i=c/n,r=u/s)),{width:i,height:r,scaleX:n,scaleY:s,offsetLeft:o,offsetTop:a,cropX:h,cropY:l}}}),S.Image.CSS_CANVAS=\"canvas-img\",S.Image.prototype.getSvgSrc=S.Image.prototype.getSrc,S.Image.fromObject=function(t,e){var i=S.util.object.clone(t);S.util.loadImage(i.src,(function(t,r){r?e&&e(null,!0):S.Image.prototype._initFilters.call(i,i.filters,(function(r){i.filters=r||[],S.Image.prototype._initFilters.call(i,[i.resizeFilter],(function(r){i.resizeFilter=r[0],S.util.enlivenObjectEnlivables(i,i,(function(){var r=new S.Image(t,i);e(r,!1)}))}))}))}),null,i.crossOrigin)},S.Image.fromURL=function(t,e,i){S.util.loadImage(t,(function(t,r){e&&e(new S.Image(t,i),r)}),null,i&&i.crossOrigin)},S.Image.ATTRIBUTE_NAMES=S.SHARED_ATTRIBUTES.concat(\"x y width height preserveAspectRatio xlink:href crossOrigin image-rendering\".split(\" \")),S.Image.fromElement=function(t,i,r){var n=S.parseAttributes(t,S.Image.ATTRIBUTE_NAMES);S.Image.fromURL(n[\"xlink:href\"],i,e(r?S.util.object.clone(r):{},n))})}(e),S.util.object.extend(S.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(t){var e=function(){},i=(t=t||{}).onComplete||e,r=t.onChange||e,n=this;return S.util.animate({target:this,startValue:this.get(\"angle\"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){n.rotate(t),r()},onComplete:function(){n.setCoords(),i()}})}}),S.util.object.extend(S.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function t(t,e){var i=\"precision \"+e+\" float;\\nvoid main(){}\",r=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(r,i),t.compileShader(r),!!t.getShaderParameter(r,t.COMPILE_STATUS)}function e(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}S.isWebglSupported=function(e){if(S.isLikelyNode)return!1;e=e||S.WebglFilterBackend.prototype.tileSize;var i=document.createElement(\"canvas\"),r=i.getContext(\"webgl\")||i.getContext(\"experimental-webgl\"),n=!1;if(r){S.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),n=S.maxTextureSize>=e;for(var s=[\"highp\",\"mediump\",\"lowp\"],o=0;o<3;o++)if(t(r,s[o])){S.webGlPrecision=s[o];break}}return this.isSupported=n,n},S.WebglFilterBackend=e,e.prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var i,r=void 0!==window.performance;try{new ImageData(1,1),i=!0}catch(t){i=!1}var n=\"undefined\"!=typeof ArrayBuffer,s=\"undefined\"!=typeof Uint8ClampedArray;if(r&&i&&n&&s){var o=S.util.createCanvasElement(),a=new ArrayBuffer(t*e*4);if(S.forceGLPutImageData)return this.imageBuffer=a,void(this.copyGLTo2D=O);var h,l,c={imageBuffer:a,destinationWidth:t,destinationHeight:e,targetCanvas:o};o.width=t,o.height=e,h=window.performance.now(),E.call(c,this.gl,c),l=window.performance.now()-h,h=window.performance.now(),O.call(c,this.gl,c),l>window.performance.now()-h?(this.imageBuffer=a,this.copyGLTo2D=O):this.copyGLTo2D=E}},createWebGLCanvas:function(t,e){var i=S.util.createCanvasElement();i.width=t,i.height=e;var r={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},n=i.getContext(\"webgl\",r);n||(n=i.getContext(\"experimental-webgl\",r)),n&&(n.clearColor(0,0,0,0),this.canvas=i,this.gl=n)},applyFilters:function(t,e,i,r,n,s){var o,a=this.gl;s&&(o=this.getCachedTexture(s,e));var h={originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:i,sourceHeight:r,destinationWidth:i,destinationHeight:r,context:a,sourceTexture:this.createTexture(a,i,r,!o&&e),targetTexture:this.createTexture(a,i,r),originalTexture:o||this.createTexture(a,i,r,!o&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:n},l=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,l),t.forEach((function(t){t&&t.applyTo(h)})),function(t){var e=t.targetCanvas,i=e.width,r=e.height,n=t.destinationWidth,s=t.destinationHeight;i===n&&r===s||(e.width=n,e.height=s)}(h),this.copyGLTo2D(a,h),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(h.sourceTexture),a.deleteTexture(h.targetTexture),a.deleteFramebuffer(l),n.getContext(\"2d\").setTransform(1,0,0,1,0,0),h},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,i,r){var n=t.createTexture();return t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),n},getCachedTexture:function(t,e){if(this.textureCache[t])return this.textureCache[t];var i=this.createTexture(this.gl,e.width,e.height,e);return this.textureCache[t]=i,i},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:E,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e={renderer:\"\",vendor:\"\"};if(!t)return e;var i=t.getExtension(\"WEBGL_debug_renderer_info\");if(i){var r=t.getParameter(i.UNMASKED_RENDERER_WEBGL),n=t.getParameter(i.UNMASKED_VENDOR_WEBGL);r&&(e.renderer=r.toLowerCase()),n&&(e.vendor=n.toLowerCase())}return this.gpuInfo=e,e}}}(),function(){var t=function(){};function e(){}S.Canvas2dFilterBackend=e,e.prototype={evictCachesForKey:t,dispose:t,clearWebGLCaches:t,resources:{},applyFilters:function(t,e,i,r,n){var s=n.getContext(\"2d\");s.drawImage(e,0,0,i,r);var o={sourceWidth:i,sourceHeight:r,imageData:s.getImageData(0,0,i,r),originalEl:e,originalImageData:s.getImageData(0,0,i,r),canvasEl:n,ctx:s,filterBackend:this};return t.forEach((function(t){t.applyTo(o)})),o.imageData.width===i&&o.imageData.height===r||(n.width=o.imageData.width,n.height=o.imageData.height),s.putImageData(o.imageData,0,0),o}}}(),S.Image=S.Image||{},S.Image.filters=S.Image.filters||{},S.Image.filters.BaseFilter=S.util.createClass({type:\"BaseFilter\",vertexSource:\"attribute vec2 aPosition;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvTexCoord = aPosition;\\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\\n}\",fragmentSource:\"precision highp float;\\nvarying vec2 vTexCoord;\\nuniform sampler2D uTexture;\\nvoid main() {\\ngl_FragColor = texture2D(uTexture, vTexCoord);\\n}\",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,i){e=e||this.fragmentSource,i=i||this.vertexSource,\"highp\"!==S.webGlPrecision&&(e=e.replace(/precision highp float/g,\"precision \"+S.webGlPrecision+\" float\"));var r=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(\"Vertex shader compile error for \"+this.type+\": \"+t.getShaderInfoLog(r));var n=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw new Error(\"Fragment shader compile error for \"+this.type+\": \"+t.getShaderInfoLog(n));var s=t.createProgram();if(t.attachShader(s,r),t.attachShader(s,n),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS))throw new Error('Shader link error for \"${this.type}\" '+t.getProgramInfoLog(s));var o=this.getAttributeLocations(t,s),a=this.getUniformLocations(t,s)||{};return a.uStepW=t.getUniformLocation(s,\"uStepW\"),a.uStepH=t.getUniformLocation(s,\"uStepH\"),{program:s,attributeLocations:o,uniformLocations:a}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,\"aPosition\")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,i){var r=e.aPosition,n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.enableVertexAttribArray(r),t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,i,r=t.context;t.passes>1?(e=t.destinationWidth,i=t.destinationHeight,t.sourceWidth===e&&t.sourceHeight===i||(r.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(r,e,i)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){var t=this.mainParameter,e=S.Image.filters[this.type].prototype;if(t){if(Array.isArray(e[t])){for(var i=e[t].length;i--;)if(this[t][i]!==e[t][i])return!1;return!0}return e[t]===this[t]}return!1},applyTo:function(t){t.webgl?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,i=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(i.program),this.sendAttributeData(e,i.attributeLocations,t.aPosition),e.uniform1f(i.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(i.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,i.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,i){t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){if(!t.helpLayer){var e=document.createElement(\"canvas\");e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),S.Image.filters.BaseFilter.fromObject=function(t,e){var i=new S.Image.filters[t.type](t);return e&&e(i),i},function(t){var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.ColorMatrix=r(i.BaseFilter,{type:\"ColorMatrix\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nvarying vec2 vTexCoord;\\nuniform mat4 uColorMatrix;\\nuniform vec4 uConstants;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ncolor *= uColorMatrix;\\ncolor += uConstants;\\ngl_FragColor = color;\\n}\",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:\"matrix\",colorsOnly:!0,initialize:function(t){this.callSuper(\"initialize\",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,i,r,n,s,o=t.imageData.data,a=o.length,h=this.matrix,l=this.colorsOnly;for(s=0;s<a;s+=4)e=o[s],i=o[s+1],r=o[s+2],l?(o[s]=e*h[0]+i*h[1]+r*h[2]+255*h[4],o[s+1]=e*h[5]+i*h[6]+r*h[7]+255*h[9],o[s+2]=e*h[10]+i*h[11]+r*h[12]+255*h[14]):(n=o[s+3],o[s]=e*h[0]+i*h[1]+r*h[2]+n*h[3]+255*h[4],o[s+1]=e*h[5]+i*h[6]+r*h[7]+n*h[8]+255*h[9],o[s+2]=e*h[10]+i*h[11]+r*h[12]+n*h[13]+255*h[14],o[s+3]=e*h[15]+i*h[16]+r*h[17]+n*h[18]+255*h[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,\"uColorMatrix\"),uConstants:t.getUniformLocation(e,\"uConstants\")}},sendUniformData:function(t,e){var i=this.matrix,r=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],n=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,r),t.uniform4fv(e.uConstants,n)}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Brightness=r(i.BaseFilter,{type:\"Brightness\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uBrightness;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ncolor.rgb += uBrightness;\\ngl_FragColor = color;\\n}\",brightness:0,mainParameter:\"brightness\",applyTo2d:function(t){if(0!==this.brightness){var e,i=t.imageData.data,r=i.length,n=Math.round(255*this.brightness);for(e=0;e<r;e+=4)i[e]=i[e]+n,i[e+1]=i[e+1]+n,i[e+2]=i[e+2]+n}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,\"uBrightness\")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.Image.filters,n=e.util.createClass;r.Convolute=n(r.BaseFilter,{type:\"Convolute\",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[9];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 3.0; h+=1.0) {\\nfor (float w = 0.0; w < 3.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_3_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[9];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 3.0; h+=1.0) {\\nfor (float w = 0.0; w < 3.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\",Convolute_5_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[25];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 5.0; h+=1.0) {\\nfor (float w = 0.0; w < 5.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_5_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[25];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 5.0; h+=1.0) {\\nfor (float w = 0.0; w < 5.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\",Convolute_7_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[49];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 7.0; h+=1.0) {\\nfor (float w = 0.0; w < 7.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_7_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[49];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 7.0; h+=1.0) {\\nfor (float w = 0.0; w < 7.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\",Convolute_9_1:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[81];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 0);\\nfor (float h = 0.0; h < 9.0; h+=1.0) {\\nfor (float w = 0.0; w < 9.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\\n}\\n}\\ngl_FragColor = color;\\n}\",Convolute_9_0:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uMatrix[81];\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = vec4(0, 0, 0, 1);\\nfor (float h = 0.0; h < 9.0; h+=1.0) {\\nfor (float w = 0.0; w < 9.0; w+=1.0) {\\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\\n}\\n}\\nfloat alpha = texture2D(uTexture, vTexCoord).a;\\ngl_FragColor = color;\\ngl_FragColor.a = alpha;\\n}\"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),i=this.type+\"_\"+e+\"_\"+(this.opaque?1:0),r=this.fragmentSource[i];return t.programCache.hasOwnProperty(i)||(t.programCache[i]=this.createProgram(t.context,r)),t.programCache[i]},applyTo2d:function(t){var e,i,r,n,s,o,a,h,l,c,u,d,f,g=t.imageData,m=g.data,p=this.matrix,v=Math.round(Math.sqrt(p.length)),_=Math.floor(v/2),y=g.width,w=g.height,b=t.ctx.createImageData(y,w),x=b.data,C=this.opaque?1:0;for(u=0;u<w;u++)for(c=0;c<y;c++){for(s=4*(u*y+c),e=0,i=0,r=0,n=0,f=0;f<v;f++)for(d=0;d<v;d++)o=c+d-_,(a=u+f-_)<0||a>=w||o<0||o>=y||(h=4*(a*y+o),l=p[f*v+d],e+=m[h]*l,i+=m[h+1]*l,r+=m[h+2]*l,C||(n+=m[h+3]*l));x[s]=e,x[s+1]=i,x[s+2]=r,x[s+3]=C?m[s+3]:n}t.imageData=b},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,\"uMatrix\"),uOpaque:t.getUniformLocation(e,\"uOpaque\"),uHalfSize:t.getUniformLocation(e,\"uHalfSize\"),uSize:t.getUniformLocation(e,\"uSize\")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return i(this.callSuper(\"toObject\"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Grayscale=r(i.BaseFilter,{type:\"Grayscale\",fragmentSource:{average:\"precision highp float;\\nuniform sampler2D uTexture;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nfloat average = (color.r + color.b + color.g) / 3.0;\\ngl_FragColor = vec4(average, average, average, color.a);\\n}\",lightness:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform int uMode;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 col = texture2D(uTexture, vTexCoord);\\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\\ngl_FragColor = vec4(average, average, average, col.a);\\n}\",luminosity:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform int uMode;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 col = texture2D(uTexture, vTexCoord);\\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\\ngl_FragColor = vec4(average, average, average, col.a);\\n}\"},mode:\"average\",mainParameter:\"mode\",applyTo2d:function(t){var e,i,r=t.imageData.data,n=r.length,s=this.mode;for(e=0;e<n;e+=4)\"average\"===s?i=(r[e]+r[e+1]+r[e+2])/3:\"lightness\"===s?i=(Math.min(r[e],r[e+1],r[e+2])+Math.max(r[e],r[e+1],r[e+2]))/2:\"luminosity\"===s&&(i=.21*r[e]+.72*r[e+1]+.07*r[e+2]),r[e]=i,r[e+1]=i,r[e+2]=i},retrieveShader:function(t){var e=this.type+\"_\"+this.mode;if(!t.programCache.hasOwnProperty(e)){var i=this.fragmentSource[this.mode];t.programCache[e]=this.createProgram(t.context,i)}return t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,\"uMode\")}},sendUniformData:function(t,e){t.uniform1i(e.uMode,1)},isNeutralState:function(){return!1}}),e.Image.filters.Grayscale.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Invert=r(i.BaseFilter,{type:\"Invert\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform int uInvert;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nif (uInvert == 1) {\\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\\n} else {\\ngl_FragColor = color;\\n}\\n}\",invert:!0,mainParameter:\"invert\",applyTo2d:function(t){var e,i=t.imageData.data,r=i.length;for(e=0;e<r;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,\"uInvert\")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),e.Image.filters.Invert.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.Image.filters,n=e.util.createClass;r.Noise=n(r.BaseFilter,{type:\"Noise\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uStepH;\\nuniform float uNoise;\\nuniform float uSeed;\\nvarying vec2 vTexCoord;\\nfloat rand(vec2 co, float seed, float vScale) {\\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\\n}\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\\ngl_FragColor = color;\\n}\",mainParameter:\"noise\",noise:0,applyTo2d:function(t){if(0!==this.noise){var e,i,r=t.imageData.data,n=r.length,s=this.noise;for(e=0,n=r.length;e<n;e+=4)i=(.5-Math.random())*s,r[e]+=i,r[e+1]+=i,r[e+2]+=i}},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,\"uNoise\"),uSeed:t.getUniformLocation(e,\"uSeed\")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return i(this.callSuper(\"toObject\"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Pixelate=r(i.BaseFilter,{type:\"Pixelate\",blocksize:4,mainParameter:\"blocksize\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uBlocksize;\\nuniform float uStepW;\\nuniform float uStepH;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nfloat blockW = uBlocksize * uStepW;\\nfloat blockH = uBlocksize * uStepW;\\nint posX = int(vTexCoord.x / blockW);\\nint posY = int(vTexCoord.y / blockH);\\nfloat fposX = float(posX);\\nfloat fposY = float(posY);\\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\\nvec4 color = texture2D(uTexture, squareCoords);\\ngl_FragColor = color;\\n}\",applyTo2d:function(t){var e,i,r,n,s,o,a,h,l,c,u,d=t.imageData,f=d.data,g=d.height,m=d.width;for(i=0;i<g;i+=this.blocksize)for(r=0;r<m;r+=this.blocksize)for(n=f[e=4*i*m+4*r],s=f[e+1],o=f[e+2],a=f[e+3],c=Math.min(i+this.blocksize,g),u=Math.min(r+this.blocksize,m),h=i;h<c;h++)for(l=r;l<u;l++)f[e=4*h*m+4*l]=n,f[e+1]=s,f[e+2]=o,f[e+3]=a},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,\"uBlocksize\"),uStepW:t.getUniformLocation(e,\"uStepW\"),uStepH:t.getUniformLocation(e,\"uStepH\")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.extend,r=e.Image.filters,n=e.util.createClass;r.RemoveColor=n(r.BaseFilter,{type:\"RemoveColor\",color:\"#FFFFFF\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec4 uLow;\\nuniform vec4 uHigh;\\nvarying vec2 vTexCoord;\\nvoid main() {\\ngl_FragColor = texture2D(uTexture, vTexCoord);\\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\\ngl_FragColor.a = 0.0;\\n}\\n}\",distance:.02,useAlpha:!1,applyTo2d:function(t){var i,r,n,s,o=t.imageData.data,a=255*this.distance,h=new e.Color(this.color).getSource(),l=[h[0]-a,h[1]-a,h[2]-a],c=[h[0]+a,h[1]+a,h[2]+a];for(i=0;i<o.length;i+=4)r=o[i],n=o[i+1],s=o[i+2],r>l[0]&&n>l[1]&&s>l[2]&&r<c[0]&&n<c[1]&&s<c[2]&&(o[i+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,\"uLow\"),uHigh:t.getUniformLocation(e,\"uHigh\")}},sendUniformData:function(t,i){var r=new e.Color(this.color).getSource(),n=parseFloat(this.distance),s=[0+r[0]/255-n,0+r[1]/255-n,0+r[2]/255-n,1],o=[r[0]/255+n,r[1]/255+n,r[2]/255+n,1];t.uniform4fv(i.uLow,s),t.uniform4fv(i.uHigh,o)},toObject:function(){return i(this.callSuper(\"toObject\"),{color:this.color,distance:this.distance})}}),e.Image.filters.RemoveColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass,n={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var s in n)i[s]=r(i.ColorMatrix,{type:s,matrix:n[s],mainParameter:!1,colorsOnly:!0}),e.Image.filters[s].fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric,i=e.Image.filters,r=e.util.createClass;i.BlendColor=r(i.BaseFilter,{type:\"BlendColor\",color:\"#F95C63\",mode:\"multiply\",alpha:1,fragmentSource:{multiply:\"gl_FragColor.rgb *= uColor.rgb;\\n\",screen:\"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\\n\",add:\"gl_FragColor.rgb += uColor.rgb;\\n\",diff:\"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\\n\",subtract:\"gl_FragColor.rgb -= uColor.rgb;\\n\",lighten:\"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\\n\",darken:\"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\\n\",exclusion:\"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\\n\",overlay:\"if (uColor.r < 0.5) {\\ngl_FragColor.r *= 2.0 * uColor.r;\\n} else {\\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\\n}\\nif (uColor.g < 0.5) {\\ngl_FragColor.g *= 2.0 * uColor.g;\\n} else {\\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\\n}\\nif (uColor.b < 0.5) {\\ngl_FragColor.b *= 2.0 * uColor.b;\\n} else {\\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\\n}\\n\",tint:\"gl_FragColor.rgb *= (1.0 - uColor.a);\\ngl_FragColor.rgb += uColor.rgb;\\n\"},buildSource:function(t){return\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec4 uColor;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\ngl_FragColor = color;\\nif (color.a > 0.0) {\\n\"+this.fragmentSource[t]+\"}\\n}\"},retrieveShader:function(t){var e,i=this.type+\"_\"+this.mode;return t.programCache.hasOwnProperty(i)||(e=this.buildSource(this.mode),t.programCache[i]=this.createProgram(t.context,e)),t.programCache[i]},applyTo2d:function(t){var i,r,n,s,o,a,h,l=t.imageData.data,c=l.length,u=1-this.alpha;i=(h=new e.Color(this.color).getSource())[0]*this.alpha,r=h[1]*this.alpha,n=h[2]*this.alpha;for(var d=0;d<c;d+=4)switch(s=l[d],o=l[d+1],a=l[d+2],this.mode){case\"multiply\":l[d]=s*i/255,l[d+1]=o*r/255,l[d+2]=a*n/255;break;case\"screen\":l[d]=255-(255-s)*(255-i)/255,l[d+1]=255-(255-o)*(255-r)/255,l[d+2]=255-(255-a)*(255-n)/255;break;case\"add\":l[d]=s+i,l[d+1]=o+r,l[d+2]=a+n;break;case\"diff\":case\"difference\":l[d]=Math.abs(s-i),l[d+1]=Math.abs(o-r),l[d+2]=Math.abs(a-n);break;case\"subtract\":l[d]=s-i,l[d+1]=o-r,l[d+2]=a-n;break;case\"darken\":l[d]=Math.min(s,i),l[d+1]=Math.min(o,r),l[d+2]=Math.min(a,n);break;case\"lighten\":l[d]=Math.max(s,i),l[d+1]=Math.max(o,r),l[d+2]=Math.max(a,n);break;case\"overlay\":l[d]=i<128?2*s*i/255:255-2*(255-s)*(255-i)/255,l[d+1]=r<128?2*o*r/255:255-2*(255-o)*(255-r)/255,l[d+2]=n<128?2*a*n/255:255-2*(255-a)*(255-n)/255;break;case\"exclusion\":l[d]=i+s-2*i*s/255,l[d+1]=r+o-2*r*o/255,l[d+2]=n+a-2*n*a/255;break;case\"tint\":l[d]=i+s*u,l[d+1]=r+o*u,l[d+2]=n+a*u}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,\"uColor\")}},sendUniformData:function(t,i){var r=new e.Color(this.color).getSource();r[0]=this.alpha*r[0]/255,r[1]=this.alpha*r[1]/255,r[2]=this.alpha*r[2]/255,r[3]=this.alpha,t.uniform4fv(i.uColor,r)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric,i=e.Image.filters,r=e.util.createClass;i.BlendImage=r(i.BaseFilter,{type:\"BlendImage\",image:null,mode:\"multiply\",alpha:1,vertexSource:\"attribute vec2 aPosition;\\nvarying vec2 vTexCoord;\\nvarying vec2 vTexCoord2;\\nuniform mat3 uTransformMatrix;\\nvoid main() {\\nvTexCoord = aPosition;\\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\\n}\",fragmentSource:{multiply:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform sampler2D uImage;\\nuniform vec4 uColor;\\nvarying vec2 vTexCoord;\\nvarying vec2 vTexCoord2;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nvec4 color2 = texture2D(uImage, vTexCoord2);\\ncolor.rgba *= color2.rgba;\\ngl_FragColor = color;\\n}\",mask:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform sampler2D uImage;\\nuniform vec4 uColor;\\nvarying vec2 vTexCoord;\\nvarying vec2 vTexCoord2;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nvec4 color2 = texture2D(uImage, vTexCoord2);\\ncolor.a = color2.a;\\ngl_FragColor = color;\\n}\"},retrieveShader:function(t){var e=this.type+\"_\"+this.mode,i=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,i)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),this.callSuper(\"applyToWebGL\",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image,e=t._element.width,i=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/i,1]},applyTo2d:function(t){var i,r,n,s,o,a,h,l,c,u,d,f=t.imageData,g=t.filterBackend.resources,m=f.data,p=m.length,v=f.width,_=f.height,y=this.image;g.blendImage||(g.blendImage=e.util.createCanvasElement()),u=(c=g.blendImage).getContext(\"2d\"),c.width!==v||c.height!==_?(c.width=v,c.height=_):u.clearRect(0,0,v,_),u.setTransform(y.scaleX,0,0,y.scaleY,y.left,y.top),u.drawImage(y._element,0,0,v,_),d=u.getImageData(0,0,v,_).data;for(var w=0;w<p;w+=4)switch(o=m[w],a=m[w+1],h=m[w+2],l=m[w+3],i=d[w],r=d[w+1],n=d[w+2],s=d[w+3],this.mode){case\"multiply\":m[w]=o*i/255,m[w+1]=a*r/255,m[w+2]=h*n/255,m[w+3]=l*s/255;break;case\"mask\":m[w+3]=s}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,\"uTransformMatrix\"),uImage:t.getUniformLocation(e,\"uImage\")}},sendUniformData:function(t,e){var i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendImage.fromObject=function(t,i){e.Image.fromObject(t.image,(function(r){var n=e.util.object.clone(t);n.image=r,i(new e.Image.filters.BlendImage(n))}))}}(e),function(t){var e=t.fabric||(t.fabric={}),i=Math.pow,r=Math.floor,n=Math.sqrt,s=Math.abs,o=Math.round,a=Math.sin,h=Math.ceil,l=e.Image.filters,c=e.util.createClass;l.Resize=c(l.BaseFilter,{type:\"Resize\",resizeType:\"hermite\",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(t,e){return{uDelta:t.getUniformLocation(e,\"uDelta\"),uTaps:t.getUniformLocation(e,\"uTaps\")}},sendUniformData:function(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)},retrieveShader:function(t){var e=this.getFilterWindow(),i=this.type+\"_\"+e;if(!t.programCache.hasOwnProperty(i)){var r=this.generateShader(e);t.programCache[i]=this.createProgram(t.context,r)}return t.programCache[i]},getFilterWindow:function(){var t=this.tempScale;return Math.ceil(this.lanczosLobes/t)},getTaps:function(){for(var t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,i=this.getFilterWindow(),r=new Array(i),n=1;n<=i;n++)r[n-1]=t(n*e);return r},generateShader:function(t){for(var e=new Array(t),i=this.fragmentSourceTOP,r=1;r<=t;r++)e[r-1]=r+\".0 * uDelta\";return i+=\"uniform float uTaps[\"+t+\"];\\n\",i+=\"void main() {\\n\",i+=\"  vec4 color = texture2D(uTexture, vTexCoord);\\n\",i+=\"  float sum = 1.0;\\n\",e.forEach((function(t,e){i+=\"  color += texture2D(uTexture, vTexCoord + \"+t+\") * uTaps[\"+e+\"];\\n\",i+=\"  color += texture2D(uTexture, vTexCoord - \"+t+\") * uTaps[\"+e+\"];\\n\",i+=\"  sum += 2.0 * uTaps[\"+e+\"];\\n\"})),i+=\"  gl_FragColor = color / sum;\\n\",i+=\"}\"},fragmentSourceTOP:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec2 uDelta;\\nvarying vec2 vTexCoord;\\n\",applyTo:function(t){t.webgl?(t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(t){return function(e){if(e>=t||e<=-t)return 0;if(e<1.1920929e-7&&e>-1.1920929e-7)return 1;var i=(e*=Math.PI)/t;return a(e)/e*a(i)/i}},applyTo2d:function(t){var e=t.imageData,i=this.scaleX,r=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/r;var n,s=e.width,a=e.height,h=o(s*i),l=o(a*r);\"sliceHack\"===this.resizeType?n=this.sliceByTwo(t,s,a,h,l):\"hermite\"===this.resizeType?n=this.hermiteFastResize(t,s,a,h,l):\"bilinear\"===this.resizeType?n=this.bilinearFiltering(t,s,a,h,l):\"lanczos\"===this.resizeType&&(n=this.lanczosResize(t,s,a,h,l)),t.imageData=n},sliceByTwo:function(t,i,n,s,o){var a,h,l=t.imageData,c=.5,u=!1,d=!1,f=i*c,g=n*c,m=e.filterBackend.resources,p=0,v=0,_=i,y=0;for(m.sliceByTwo||(m.sliceByTwo=document.createElement(\"canvas\")),((a=m.sliceByTwo).width<1.5*i||a.height<n)&&(a.width=1.5*i,a.height=n),(h=a.getContext(\"2d\")).clearRect(0,0,1.5*i,n),h.putImageData(l,0,0),s=r(s),o=r(o);!u||!d;)i=f,n=g,s<r(f*c)?f=r(f*c):(f=s,u=!0),o<r(g*c)?g=r(g*c):(g=o,d=!0),h.drawImage(a,p,v,i,n,_,y,f,g),p=_,v=y,y+=g;return h.getImageData(p,v,s,o)},lanczosResize:function(t,e,o,a,l){var c=t.imageData.data,u=t.ctx.createImageData(a,l),d=u.data,f=this.lanczosCreate(this.lanczosLobes),g=this.rcpScaleX,m=this.rcpScaleY,p=2/this.rcpScaleX,v=2/this.rcpScaleY,_=h(g*this.lanczosLobes/2),y=h(m*this.lanczosLobes/2),w={},b={},x={};return function t(h){var C,S,T,E,O,A,I,L,D,M,F;for(b.x=(h+.5)*g,x.x=r(b.x),C=0;C<l;C++){for(b.y=(C+.5)*m,x.y=r(b.y),O=0,A=0,I=0,L=0,D=0,S=x.x-_;S<=x.x+_;S++)if(!(S<0||S>=e)){M=r(1e3*s(S-b.x)),w[M]||(w[M]={});for(var P=x.y-y;P<=x.y+y;P++)P<0||P>=o||(F=r(1e3*s(P-b.y)),w[M][F]||(w[M][F]=f(n(i(M*p,2)+i(F*v,2))/1e3)),(T=w[M][F])>0&&(O+=T,A+=T*c[E=4*(P*e+S)],I+=T*c[E+1],L+=T*c[E+2],D+=T*c[E+3]))}d[E=4*(C*a+h)]=A/O,d[E+1]=I/O,d[E+2]=L/O,d[E+3]=D/O}return++h<a?t(h):u}(0)},bilinearFiltering:function(t,e,i,n,s){var o,a,h,l,c,u,d,f,g,m=0,p=this.rcpScaleX,v=this.rcpScaleY,_=4*(e-1),y=t.imageData.data,w=t.ctx.createImageData(n,s),b=w.data;for(h=0;h<s;h++)for(l=0;l<n;l++)for(c=p*l-(o=r(p*l)),u=v*h-(a=r(v*h)),g=4*(a*e+o),d=0;d<4;d++)f=y[g+d]*(1-c)*(1-u)+y[g+4+d]*c*(1-u)+y[g+_+d]*u*(1-c)+y[g+_+4+d]*c*u,b[m++]=f;return w},hermiteFastResize:function(t,e,i,o,a){for(var l=this.rcpScaleX,c=this.rcpScaleY,u=h(l/2),d=h(c/2),f=t.imageData.data,g=t.ctx.createImageData(o,a),m=g.data,p=0;p<a;p++)for(var v=0;v<o;v++){for(var _=4*(v+p*o),y=0,w=0,b=0,x=0,C=0,S=0,T=0,E=(p+.5)*c,O=r(p*c);O<(p+1)*c;O++)for(var A=s(E-(O+.5))/d,I=(v+.5)*l,L=A*A,D=r(v*l);D<(v+1)*l;D++){var M=s(I-(D+.5))/u,F=n(L+M*M);F>1&&F<-1||(y=2*F*F*F-3*F*F+1)>0&&(T+=y*f[3+(M=4*(D+O*e))],b+=y,f[M+3]<255&&(y=y*f[M+3]/250),x+=y*f[M],C+=y*f[M+1],S+=y*f[M+2],w+=y)}m[_]=x/w,m[_+1]=C/w,m[_+2]=S/w,m[_+3]=T/b}return g},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Contrast=r(i.BaseFilter,{type:\"Contrast\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uContrast;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\\ngl_FragColor = color;\\n}\",contrast:0,mainParameter:\"contrast\",applyTo2d:function(t){if(0!==this.contrast){var e,i=t.imageData.data,r=i.length,n=Math.floor(255*this.contrast),s=259*(n+255)/(255*(259-n));for(e=0;e<r;e+=4)i[e]=s*(i[e]-128)+128,i[e+1]=s*(i[e+1]-128)+128,i[e+2]=s*(i[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,\"uContrast\")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Saturation=r(i.BaseFilter,{type:\"Saturation\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uSaturation;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nfloat rgMax = max(color.r, color.g);\\nfloat rgbMax = max(rgMax, color.b);\\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\\ngl_FragColor = color;\\n}\",saturation:0,mainParameter:\"saturation\",applyTo2d:function(t){if(0!==this.saturation){var e,i,r=t.imageData.data,n=r.length,s=-this.saturation;for(e=0;e<n;e+=4)i=Math.max(r[e],r[e+1],r[e+2]),r[e]+=i!==r[e]?(i-r[e])*s:0,r[e+1]+=i!==r[e+1]?(i-r[e+1])*s:0,r[e+2]+=i!==r[e+2]?(i-r[e+2])*s:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,\"uSaturation\")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),e.Image.filters.Saturation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Vibrance=r(i.BaseFilter,{type:\"Vibrance\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform float uVibrance;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nfloat max = max(color.r, max(color.g, color.b));\\nfloat avg = (color.r + color.g + color.b) / 3.0;\\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\\ngl_FragColor = color;\\n}\",vibrance:0,mainParameter:\"vibrance\",applyTo2d:function(t){if(0!==this.vibrance){var e,i,r,n,s=t.imageData.data,o=s.length,a=-this.vibrance;for(e=0;e<o;e+=4)i=Math.max(s[e],s[e+1],s[e+2]),r=(s[e]+s[e+1]+s[e+2])/3,n=2*Math.abs(i-r)/255*a,s[e]+=i!==s[e]?(i-s[e])*n:0,s[e+1]+=i!==s[e+1]?(i-s[e+1])*n:0,s[e+2]+=i!==s[e+2]?(i-s[e+2])*n:0}},getUniformLocations:function(t,e){return{uVibrance:t.getUniformLocation(e,\"uVibrance\")}},sendUniformData:function(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}),e.Image.filters.Vibrance.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Blur=r(i.BaseFilter,{type:\"Blur\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec2 uDelta;\\nvarying vec2 vTexCoord;\\nconst float nSamples = 15.0;\\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\\nfloat random(vec3 scale) {\\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\\n}\\nvoid main() {\\nvec4 color = vec4(0.0);\\nfloat total = 0.0;\\nfloat offset = random(v3offset);\\nfor (float t = -nSamples; t <= nSamples; t++) {\\nfloat percent = (t + offset - 0.5) / nSamples;\\nfloat weight = 1.0 - abs(percent);\\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\\ntotal += weight;\\n}\\ngl_FragColor = color / total;\\n}\",blur:0,mainParameter:\"blur\",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var i,r,n=t.filterBackend.resources,s=t.imageData.width,o=t.imageData.height;n.blurLayer1||(n.blurLayer1=e.util.createCanvasElement(),n.blurLayer2=e.util.createCanvasElement()),i=n.blurLayer1,r=n.blurLayer2,i.width===s&&i.height===o||(r.width=i.width=s,r.height=i.height=o);var a,h,l,c,u=i.getContext(\"2d\"),d=r.getContext(\"2d\"),f=.06*this.blur*.5;for(u.putImageData(t.imageData,0,0),d.clearRect(0,0,s,o),c=-15;c<=15;c++)l=f*(h=c/15)*s+(a=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(h),d.drawImage(i,l,a),u.drawImage(r,0,0),d.globalAlpha=1,d.clearRect(0,0,r.width,r.height);for(c=-15;c<=15;c++)l=f*(h=c/15)*o+(a=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(h),d.drawImage(i,a,l),u.drawImage(r,0,0),d.globalAlpha=1,d.clearRect(0,0,r.width,r.height);t.ctx.drawImage(i,0,0);var g=t.ctx.getImageData(0,0,i.width,i.height);return u.globalAlpha=1,u.clearRect(0,0,i.width,i.height),g},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,\"uDelta\")}},sendUniformData:function(t,e){var i=this.chooseRightDelta();t.uniform2fv(e.delta,i)},chooseRightDelta:function(){var t,e=1,i=[0,0];return this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?i[0]=t:i[1]=t,i}}),i.Blur.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Gamma=r(i.BaseFilter,{type:\"Gamma\",fragmentSource:\"precision highp float;\\nuniform sampler2D uTexture;\\nuniform vec3 uGamma;\\nvarying vec2 vTexCoord;\\nvoid main() {\\nvec4 color = texture2D(uTexture, vTexCoord);\\nvec3 correction = (1.0 / uGamma);\\ncolor.r = pow(color.r, correction.r);\\ncolor.g = pow(color.g, correction.g);\\ncolor.b = pow(color.b, correction.b);\\ngl_FragColor = color;\\ngl_FragColor.rgb *= color.a;\\n}\",gamma:[1,1,1],mainParameter:\"gamma\",initialize:function(t){this.gamma=[1,1,1],i.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,i=t.imageData.data,r=this.gamma,n=i.length,s=1/r[0],o=1/r[1],a=1/r[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,n=256;e<n;e++)this.rVals[e]=255*Math.pow(e/255,s),this.gVals[e]=255*Math.pow(e/255,o),this.bVals[e]=255*Math.pow(e/255,a);for(e=0,n=i.length;e<n;e+=4)i[e]=this.rVals[i[e]],i[e+1]=this.gVals[i[e+1]],i[e+2]=this.bVals[i[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,\"uGamma\")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),e.Image.filters.Gamma.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.Composed=r(i.BaseFilter,{type:\"Composed\",subFilters:[],initialize:function(t){this.callSuper(\"initialize\",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach((function(e){e.applyTo(t)}))},toObject:function(){return e.util.object.extend(this.callSuper(\"toObject\"),{subFilters:this.subFilters.map((function(t){return t.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(t){return!t.isNeutralState()}))}}),e.Image.filters.Composed.fromObject=function(t,i){var r=(t.subFilters||[]).map((function(t){return new e.Image.filters[t.type](t)})),n=new e.Image.filters.Composed({subFilters:r});return i&&i(n),n}}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.Image.filters,r=e.util.createClass;i.HueRotation=r(i.ColorMatrix,{type:\"HueRotation\",rotation:0,mainParameter:\"rotation\",calculateMatrix:function(){var t=this.rotation*Math.PI,i=e.util.cos(t),r=e.util.sin(t),n=1/3,s=Math.sqrt(n)*r,o=1-i;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=i+o/3,this.matrix[1]=n*o-s,this.matrix[2]=n*o+s,this.matrix[5]=n*o+s,this.matrix[6]=i+n*o,this.matrix[7]=n*o-s,this.matrix[10]=n*o-s,this.matrix[11]=n*o+s,this.matrix[12]=i+n*o},isNeutralState:function(t){return this.calculateMatrix(),i.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),i.BaseFilter.prototype.applyTo.call(this,t)}}),e.Image.filters.HueRotation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){var e=t.fabric||(t.fabric={}),i=e.util.object.clone;if(e.Text)e.warn(\"fabric.Text is already defined\");else{var r=\"fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign\".split(\" \");e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:[\"fontSize\",\"fontWeight\",\"fontFamily\",\"fontStyle\",\"lineHeight\",\"text\",\"charSpacing\",\"textAlign\",\"styles\",\"path\",\"pathStartOffset\",\"pathSide\",\"pathAlign\"],_reNewline:/\\r?\\n/,_reSpacesAndTabs:/[ \\t\\r]/g,_reSpaceAndTab:/[ \\t\\r]/,_reWords:/\\S+/g,type:\"text\",fontSize:40,fontWeight:\"normal\",fontFamily:\"Times New Roman\",underline:!1,overline:!1,linethrough:!1,textAlign:\"left\",fontStyle:\"normal\",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:\"\",stateProperties:e.Object.prototype.stateProperties.concat(r),cacheProperties:e.Object.prototype.cacheProperties.concat(r),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:\"left\",pathAlign:\"baseline\",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:\"ltr\",_styleProperties:[\"stroke\",\"strokeWidth\",\"fill\",\"fontFamily\",\"fontSize\",\"fontWeight\",\"fontStyle\",\"underline\",\"overline\",\"linethrough\",\"deltaY\",\"textBackgroundColor\"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper(\"initialize\",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:\"_dimensionAffectingProps\"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=e.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return e._measuringContext||(e._measuringContext=this.canvas&&this.canvas.contextCache||e.util.createCanvasElement().getContext(\"2d\")),e._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf(\"justify\")&&this.enlargeSpaces(),this.saveState({propertySet:\"_dimensionAffectingProps\"}))},enlargeSpaces:function(){for(var t,e,i,r,n,s,o,a=0,h=this._textLines.length;a<h;a++)if((\"justify\"===this.textAlign||a!==h-1&&!this.isEndOfWrapping(a))&&(r=0,n=this._textLines[a],(e=this.getLineWidth(a))<this.width&&(o=this.textLines[a].match(this._reSpacesAndTabs)))){i=o.length,t=(this.width-e)/i;for(var l=0,c=n.length;l<=c;l++)s=this.__charBounds[a][l],this._reSpaceAndTab.test(n[l])?(s.width+=t,s.kernedWidth+=t,s.left+=r,r+=t):s.left+=r}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return\"#<fabric.Text (\"+this.complexity()+'): { \"text\": \"'+this.text+'\", \"fontFamily\": \"'+this.fontFamily+'\" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper(\"_getCacheCanvasDimensions\"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){var e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,\"underline\"),this._renderText(t),this._renderTextDecoration(t,\"overline\"),this._renderTextDecoration(t,\"linethrough\")},_renderText:function(t){\"stroke\"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,i){if(t.textBaseline=\"alphabetical\",this.path)switch(this.pathAlign){case\"center\":t.textBaseline=\"middle\";break;case\"ascender\":t.textBaseline=\"top\";break;case\"descender\":t.textBaseline=\"bottom\"}t.font=this._getFontDeclaration(e,i)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,i=this._textLines.length;e<i;e++){var r=this.getLineWidth(e);r>t&&(t=r)}return t},_renderTextLine:function(t,e,i,r,n,s){this._renderChars(t,e,i,r,n,s)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas(\"textBackgroundColor\")){for(var e,i,r,n,s,o,a,h=t.fillStyle,l=this._getLeftOffset(),c=this._getTopOffset(),u=0,d=0,f=this.path,g=0,m=this._textLines.length;g<m;g++)if(e=this.getHeightOfLine(g),this.textBackgroundColor||this.styleHas(\"textBackgroundColor\",g)){r=this._textLines[g],i=this._getLineLeftOffset(g),d=0,u=0,n=this.getValueOfPropertyAt(g,0,\"textBackgroundColor\");for(var p=0,v=r.length;p<v;p++)s=this.__charBounds[g][p],o=this.getValueOfPropertyAt(g,p,\"textBackgroundColor\"),f?(t.save(),t.translate(s.renderLeft,s.renderTop),t.rotate(s.angle),t.fillStyle=o,o&&t.fillRect(-s.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),s.width,e/this.lineHeight),t.restore()):o!==n?(a=l+i+u,\"rtl\"===this.direction&&(a=this.width-a-d),t.fillStyle=n,n&&t.fillRect(a,c,d,e/this.lineHeight),u=s.left,d=s.width,n=o):d+=s.kernedWidth;o&&!f&&(a=l+i+u,\"rtl\"===this.direction&&(a=this.width-a-d),t.fillStyle=o,t.fillRect(a,c,d,e/this.lineHeight)),c+=e}else c+=e;t.fillStyle=h,this._removeShadow(t)}},getFontCache:function(t){var i=t.fontFamily.toLowerCase();e.charWidthsCache[i]||(e.charWidthsCache[i]={});var r=e.charWidthsCache[i],n=t.fontStyle.toLowerCase()+\"_\"+(t.fontWeight+\"\").toLowerCase();return r[n]||(r[n]={}),r[n]},_measureChar:function(t,e,i,r){var n,s,o,a,h=this.getFontCache(e),l=i+t,c=this._getFontDeclaration(e)===this._getFontDeclaration(r),u=e.fontSize/this.CACHE_FONT_SIZE;if(i&&void 0!==h[i]&&(o=h[i]),void 0!==h[t]&&(a=n=h[t]),c&&void 0!==h[l]&&(a=(s=h[l])-o),void 0===n||void 0===o||void 0===s){var d=this.getMeasuringContext();this._setTextStyles(d,e,!0)}return void 0===n&&(a=n=d.measureText(t).width,h[t]=n),void 0===o&&c&&i&&(o=d.measureText(i).width,h[i]=o),c&&void 0===s&&(s=d.measureText(l).width,h[l]=s,a=s-o),{width:n*u,kernedWidth:a*u}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,\"fontSize\")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var i,r,n,s,o,a,h=0,l=this._textLines[t],c=new Array(l.length),u=0,d=this.path,f=\"right\"===this.pathSide;for(this.__charBounds[t]=c,i=0;i<l.length;i++)r=l[i],s=this._getGraphemeBox(r,t,i,n),c[i]=s,h+=s.kernedWidth,n=r;if(c[i]={left:s?s.left+s.width:0,width:0,kernedWidth:0,height:this.fontSize},d){switch(a=d.segmentsInfo[d.segmentsInfo.length-1].length,(o=e.util.getPointOnPath(d.path,0,d.segmentsInfo)).x+=d.pathOffset.x,o.y+=d.pathOffset.y,this.textAlign){case\"left\":u=f?a-h:0;break;case\"center\":u=(a-h)/2;break;case\"right\":u=f?0:a-h}for(u+=this.pathStartOffset*(f?-1:1),i=f?l.length-1:0;f?i>=0:i<l.length;f?i--:i++)s=c[i],u>a?u%=a:u<0&&(u+=a),this._setGraphemeOnPath(u,s,o),u+=s.kernedWidth}return{width:h,numOfSpaces:0}},_setGraphemeOnPath:function(t,i,r){var n=t+i.kernedWidth/2,s=this.path,o=e.util.getPointOnPath(s.path,n,s.segmentsInfo);i.renderLeft=o.x-r.x,i.renderTop=o.y-r.y,i.angle=o.angle+(\"right\"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(t,e,i,r,n){var s,o=this.getCompleteStyleDeclaration(e,i),a=r?this.getCompleteStyleDeclaration(e,i-1):{},h=this._measureChar(t,o,r,a),l=h.kernedWidth,c=h.width;0!==this.charSpacing&&(c+=s=this._getWidthOfCharSpacing(),l+=s);var u={width:c,left:0,height:o.fontSize,kernedWidth:l,deltaY:o.deltaY};if(i>0&&!n){var d=this.__charBounds[e][i-1];u.left=d.left+d.width+h.kernedWidth-h.width}return u},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],i=this.getHeightOfChar(t,0),r=1,n=e.length;r<n;r++)i=Math.max(this.getHeightOfChar(t,r),i);return this.__lineHeights[t]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,i=0,r=this._textLines.length;i<r;i++)t=this.getHeightOfLine(i),e+=i===r-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return\"ltr\"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var i=0,r=this._getLeftOffset(),n=this._getTopOffset(),s=0,o=this._textLines.length;s<o;s++){var a=this.getHeightOfLine(s),h=a/this.lineHeight,l=this._getLineLeftOffset(s);this._renderTextLine(e,t,this._textLines[s],r+l,n+i+h,s),i+=a}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas(\"fill\"))&&this._renderTextCommon(t,\"fillText\")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,\"strokeText\"),t.closePath(),t.restore())},_renderChars:function(t,e,i,r,n,s){var o,a,h,l,c,u=this.getHeightOfLine(s),d=-1!==this.textAlign.indexOf(\"justify\"),f=\"\",g=0,m=this.path,p=!d&&0===this.charSpacing&&this.isEmptyStyles(s)&&!m,v=\"ltr\"===this.direction,_=\"ltr\"===this.direction?1:-1,y=e.canvas.getAttribute(\"dir\");if(e.save(),y!==this.direction&&(e.canvas.setAttribute(\"dir\",v?\"ltr\":\"rtl\"),e.direction=v?\"ltr\":\"rtl\",e.textAlign=v?\"left\":\"right\"),n-=u*this._fontSizeFraction/this.lineHeight,p)return this._renderChar(t,e,s,0,i.join(\"\"),r,n,u),void e.restore();for(var w=0,b=i.length-1;w<=b;w++)l=w===b||this.charSpacing||m,f+=i[w],h=this.__charBounds[s][w],0===g?(r+=_*(h.kernedWidth-h.width),g+=h.width):g+=h.kernedWidth,d&&!l&&this._reSpaceAndTab.test(i[w])&&(l=!0),l||(o=o||this.getCompleteStyleDeclaration(s,w),a=this.getCompleteStyleDeclaration(s,w+1),l=this._hasStyleChanged(o,a)),l&&(m?(e.save(),e.translate(h.renderLeft,h.renderTop),e.rotate(h.angle),this._renderChar(t,e,s,w,f,-g/2,0,u),e.restore()):(c=r,this._renderChar(t,e,s,w,f,c,n,u)),f=\"\",o=a,r+=_*g,g=0);e.restore()},_applyPatternGradientTransformText:function(t){var i,r=e.util.createCanvasElement(),n=this.width+this.strokeWidth,s=this.height+this.strokeWidth;return r.width=n,r.height=s,(i=r.getContext(\"2d\")).beginPath(),i.moveTo(0,0),i.lineTo(n,0),i.lineTo(n,s),i.lineTo(0,s),i.closePath(),i.translate(n/2,s/2),i.fillStyle=t.toLive(i),this._applyPatternGradientTransform(i,t),i.fill(),i.createPattern(r,\"no-repeat\")},handleFiller:function(t,e,i){var r,n;return i.toLive?\"percentage\"===i.gradientUnits||i.gradientTransform||i.patternTransform?(r=-this.width/2,n=-this.height/2,t.translate(r,n),t[e]=this._applyPatternGradientTransformText(i),{offsetX:r,offsetY:n}):(t[e]=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,\"strokeStyle\",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,\"fillStyle\",e.fill)},_renderChar:function(t,e,i,r,n,s,o){var a,h,l=this._getStyleDeclaration(i,r),c=this.getCompleteStyleDeclaration(i,r),u=\"fillText\"===t&&c.fill,d=\"strokeText\"===t&&c.stroke&&c.strokeWidth;(d||u)&&(e.save(),u&&(a=this._setFillStyles(e,c)),d&&(h=this._setStrokeStyles(e,c)),e.font=this._getFontDeclaration(c),l&&l.textBackgroundColor&&this._removeShadow(e),l&&l.deltaY&&(o+=l.deltaY),u&&e.fillText(n,s-a.offsetX,o-a.offsetY),d&&e.strokeText(n,s-h.offsetX,o-h.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,i){var r=this.get2DCursorLocation(t,!0),n=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,\"fontSize\"),s=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,\"deltaY\"),o={fontSize:n*i.size,deltaY:s+n*i.baseline};return this.setSelectionStyles(o,t,e),this},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),i=this.width-e,r=this.textAlign,n=this.direction,s=0,o=this.isEndOfWrapping(t);return\"justify\"===r||\"justify-center\"===r&&!o||\"justify-right\"===r&&!o||\"justify-left\"===r&&!o?0:(\"center\"===r&&(s=i/2),\"right\"===r&&(s=i),\"justify-center\"===r&&(s=i/2),\"justify-right\"===r&&(s=i),\"rtl\"===n&&(s-=i),s)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged(\"_dimensionAffectingProps\")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(void 0!==this.__lineWidths[t])return this.__lineWidths[t];var e=this.measureLine(t).width;return this.__lineWidths[t]=e,e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,i){var r=this._getStyleDeclaration(t,e);return r&&void 0!==r[i]?r[i]:this[i]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var i,r,n,s,o,a,h,l,c,u,d,f,g,m,p,v,_=this._getLeftOffset(),y=this._getTopOffset(),w=this.path,b=this._getWidthOfCharSpacing(),x=this.offsets[e],C=0,S=this._textLines.length;C<S;C++)if(i=this.getHeightOfLine(C),this[e]||this.styleHas(e,C)){h=this._textLines[C],m=i/this.lineHeight,s=this._getLineLeftOffset(C),u=0,d=0,l=this.getValueOfPropertyAt(C,0,e),v=this.getValueOfPropertyAt(C,0,\"fill\"),c=y+m*(1-this._fontSizeFraction),r=this.getHeightOfChar(C,0),o=this.getValueOfPropertyAt(C,0,\"deltaY\");for(var T=0,E=h.length;T<E;T++)if(f=this.__charBounds[C][T],g=this.getValueOfPropertyAt(C,T,e),p=this.getValueOfPropertyAt(C,T,\"fill\"),n=this.getHeightOfChar(C,T),a=this.getValueOfPropertyAt(C,T,\"deltaY\"),w&&g&&p)t.save(),t.fillStyle=v,t.translate(f.renderLeft,f.renderTop),t.rotate(f.angle),t.fillRect(-f.kernedWidth/2,x*n+a,f.kernedWidth,this.fontSize/15),t.restore();else if((g!==l||p!==v||n!==r||a!==o)&&d>0){var O=_+s+u;\"rtl\"===this.direction&&(O=this.width-O-d),l&&v&&(t.fillStyle=v,t.fillRect(O,c+x*r+o,d,this.fontSize/15)),u=f.left,d=f.width,l=g,v=p,r=n,o=a}else d+=f.kernedWidth;O=_+s+u,\"rtl\"===this.direction&&(O=this.width-O-d),t.fillStyle=p,g&&p&&t.fillRect(O,c+x*r+o,d-b,this.fontSize/15),y+=i}else y+=i;this._removeShadow(t)}},_getFontDeclaration:function(t,i){var r=t||this,n=this.fontFamily,s=e.Text.genericFonts.indexOf(n.toLowerCase())>-1,o=void 0===n||n.indexOf(\"'\")>-1||n.indexOf(\",\")>-1||n.indexOf('\"')>-1||s?r.fontFamily:'\"'+r.fontFamily+'\"';return[e.isLikelyNode?r.fontWeight:r.fontStyle,e.isLikelyNode?r.fontStyle:r.fontWeight,i?this.CACHE_FONT_SIZE+\"px\":r.fontSize+\"px\",o].join(\" \")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper(\"render\",t)))},_splitTextIntoLines:function(t){for(var i=t.split(this._reNewline),r=new Array(i.length),n=[\"\\n\"],s=[],o=0;o<i.length;o++)r[o]=e.util.string.graphemeSplit(i[o]),s=s.concat(r[o],n);return s.pop(),{_unwrappedLines:r,lines:i,graphemeText:s,graphemeLines:r}},toObject:function(t){var e=r.concat(t),n=this.callSuper(\"toObject\",e);return n.styles=i(this.styles,!0),n.path&&(n.path=this.path.toObject()),n},set:function(t,e){this.callSuper(\"set\",t,e);var i=!1,r=!1;if(\"object\"==typeof t)for(var n in t)\"path\"===n&&this.setPathInfo(),i=i||-1!==this._dimensionAffectingProps.indexOf(n),r=r||\"path\"===n;else i=-1!==this._dimensionAffectingProps.indexOf(t),r=\"path\"===t;return r&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(\"x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor\".split(\" \")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,r,n){if(!t)return r(null);var s=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES),o=s.textAnchor||\"left\";if((n=e.util.object.extend(n?i(n):{},s)).top=n.top||0,n.left=n.left||0,s.textDecoration){var a=s.textDecoration;-1!==a.indexOf(\"underline\")&&(n.underline=!0),-1!==a.indexOf(\"overline\")&&(n.overline=!0),-1!==a.indexOf(\"line-through\")&&(n.linethrough=!0),delete n.textDecoration}\"dx\"in s&&(n.left+=s.dx),\"dy\"in s&&(n.top+=s.dy),\"fontSize\"in n||(n.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE);var h=\"\";\"textContent\"in t?h=t.textContent:\"firstChild\"in t&&null!==t.firstChild&&\"data\"in t.firstChild&&null!==t.firstChild.data&&(h=t.firstChild.data),h=h.replace(/^\\s+|\\s+$|\\n+/g,\"\").replace(/\\s+/g,\" \");var l=n.strokeWidth;n.strokeWidth=0;var c=new e.Text(h,n),u=c.getScaledHeight()/c.height,d=((c.height+c.strokeWidth)*c.lineHeight-c.height)*u,f=c.getScaledHeight()+d,g=0;\"center\"===o&&(g=c.getScaledWidth()/2),\"right\"===o&&(g=c.getScaledWidth()),c.set({left:c.left-g,top:c.top-(f-c.fontSize*(.07+c._fontSizeFraction))/c.lineHeight,strokeWidth:void 0!==l?l:1}),r(c)},e.Text.fromObject=function(t,r){var n=i(t),s=t.path;return delete n.path,e.Object._fromObject(\"Text\",n,(function(t){s?e.Object._fromObject(\"Path\",s,(function(e){t.set(\"path\",e),r(t)}),\"path\"):r(t)}),\"text\")},e.Text.genericFonts=[\"sans-serif\",\"serif\",\"cursive\",\"fantasy\",\"monospace\"],e.util.createAccessors&&e.util.createAccessors(e.Text)}}(e),S.util.object.extend(S.Text.prototype,{isEmptyStyles:function(t){if(!this.styles)return!0;if(void 0!==t&&!this.styles[t])return!0;var e=void 0===t?this.styles:{line:this.styles[t]};for(var i in e)for(var r in e[i])for(var n in e[i][r])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||\"\"===t)return!1;if(void 0!==e&&!this.styles[e])return!1;var i=void 0===e?this.styles:{0:this.styles[e]};for(var r in i)for(var n in i[r])if(void 0!==i[r][n][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||\"\"===t)return!1;var e,i,r=this.styles,n=0,s=!0,o=0;for(var a in r){for(var h in e=0,r[a]){var l;n++,(l=r[a][h]).hasOwnProperty(t)?(i?l[t]!==i&&(s=!1):i=l[t],l[t]===this[t]&&delete l[t]):s=!1,0!==Object.keys(l).length?e++:delete r[a][h]}0===e&&delete r[a]}for(var c=0;c<this._textLines.length;c++)o+=this._textLines[c].length;s&&n===o&&(this[t]=i,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&\"\"!==t){var e,i,r,n=this.styles;for(i in n){for(r in e=n[i])delete e[r][t],0===Object.keys(e[r]).length&&delete e[r];0===Object.keys(e).length&&delete n[i]}}},_extendStyles:function(t,e){var i=this.get2DCursorLocation(t);this._getLineStyle(i.lineIndex)||this._setLineStyle(i.lineIndex),this._getStyleDeclaration(i.lineIndex,i.charIndex)||this._setStyleDeclaration(i.lineIndex,i.charIndex,{}),S.util.object.extend(this._getStyleDeclaration(i.lineIndex,i.charIndex),e)},get2DCursorLocation:function(t,e){void 0===t&&(t=this.selectionStart);for(var i=e?this._unwrappedTextLines:this._textLines,r=i.length,n=0;n<r;n++){if(t<=i[n].length)return{lineIndex:n,charIndex:t};t-=i[n].length+this.missingNewlineOffset(n)}return{lineIndex:n-1,charIndex:i[n-1].length<t?i[n-1].length:t}},getSelectionStyles:function(t,e,i){void 0===t&&(t=this.selectionStart||0),void 0===e&&(e=this.selectionEnd||t);for(var r=[],n=t;n<e;n++)r.push(this.getStyleAtPosition(n,i));return r},getStyleAtPosition:function(t,e){var i=this.get2DCursorLocation(t);return(e?this.getCompleteStyleDeclaration(i.lineIndex,i.charIndex):this._getStyleDeclaration(i.lineIndex,i.charIndex))||{}},setSelectionStyles:function(t,e,i){void 0===e&&(e=this.selectionStart||0),void 0===i&&(i=this.selectionEnd||e);for(var r=e;r<i;r++)this._extendStyles(r,t);return this._forceClearCache=!0,this},_getStyleDeclaration:function(t,e){var i=this.styles&&this.styles[t];return i?i[e]:null},getCompleteStyleDeclaration:function(t,e){for(var i,r=this._getStyleDeclaration(t,e)||{},n={},s=0;s<this._styleProperties.length;s++)n[i=this._styleProperties[s]]=void 0===r[i]?this[i]:r[i];return n},_setStyleDeclaration:function(t,e,i){this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return!!this.styles[t]},_setLineStyle:function(t){this.styles[t]={}},_deleteLineStyle:function(t){delete this.styles[t]}}),function(){function t(t){t.textDecoration&&(t.textDecoration.indexOf(\"underline\")>-1&&(t.underline=!0),t.textDecoration.indexOf(\"line-through\")>-1&&(t.linethrough=!0),t.textDecoration.indexOf(\"overline\")>-1&&(t.overline=!0),delete t.textDecoration)}S.IText=S.util.createClass(S.Text,S.Observable,{type:\"i-text\",selectionStart:0,selectionEnd:0,selectionColor:\"rgba(17,119,255,0.3)\",isEditing:!1,editable:!0,editingBorderColor:\"rgba(102,153,255,0.25)\",cursorWidth:2,cursorColor:\"\",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\\s|\\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper(\"initialize\",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire(\"selectionStart\",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire(\"selectionEnd\",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire(\"selection:changed\"),this.canvas&&this.canvas.fire(\"text:selection:changed\",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper(\"initDimensions\")},render:function(t){this.clearContextTop(),this.callSuper(\"render\",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper(\"_render\",t)},clearContextTop:function(t){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this.canvas.contextTop,i=this.canvas.viewportTransform;e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(e),this._clearTextArea(e),t||e.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this._getCursorBoundaries(),e=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore()}},_clearTextArea:function(t){var e=this.width+4,i=this.height+4;t.clearRect(-e/2,-i/2,e,i)},_getCursorBoundaries:function(t){void 0===t&&(t=this.selectionStart);var e=this._getLeftOffset(),i=this._getTopOffset(),r=this._getCursorBoundariesOffsets(t);return{left:e,top:i,leftOffset:r.left,topOffset:r.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&\"top\"in this.cursorOffsetCache)return this.cursorOffsetCache;var e,i,r,n,s=0,o=0,a=this.get2DCursorLocation(t);r=a.charIndex,i=a.lineIndex;for(var h=0;h<i;h++)s+=this.getHeightOfLine(h);e=this._getLineLeftOffset(i);var l=this.__charBounds[i][r];return l&&(o=l.left),0!==this.charSpacing&&r===this._textLines[i].length&&(o-=this._getWidthOfCharSpacing()),n={top:s,left:e+(o>0?o:0)},\"rtl\"===this.direction&&(n.left*=-1),this.cursorOffsetCache=n,this.cursorOffsetCache},renderCursor:function(t,e){var i=this.get2DCursorLocation(),r=i.lineIndex,n=i.charIndex>0?i.charIndex-1:0,s=this.getValueOfPropertyAt(r,n,\"fontSize\"),o=this.scaleX*this.canvas.getZoom(),a=this.cursorWidth/o,h=t.topOffset,l=this.getValueOfPropertyAt(r,n,\"deltaY\");h+=(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-s*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.cursorColor||this.getValueOfPropertyAt(r,n,\"fill\"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-a/2,h+t.top+l,a,s)},renderSelection:function(t,e){for(var i=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,r=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,n=-1!==this.textAlign.indexOf(\"justify\"),s=this.get2DCursorLocation(i),o=this.get2DCursorLocation(r),a=s.lineIndex,h=o.lineIndex,l=s.charIndex<0?0:s.charIndex,c=o.charIndex<0?0:o.charIndex,u=a;u<=h;u++){var d,f=this._getLineLeftOffset(u)||0,g=this.getHeightOfLine(u),m=0,p=0;if(u===a&&(m=this.__charBounds[a][l].left),u>=a&&u<h)p=n&&!this.isEndOfWrapping(u)?this.width:this.getLineWidth(u)||5;else if(u===h)if(0===c)p=this.__charBounds[h][c].left;else{var v=this._getWidthOfCharSpacing();p=this.__charBounds[h][c-1].left+this.__charBounds[h][c-1].width-v}d=g,(this.lineHeight<1||u===h&&this.lineHeight>1)&&(g/=this.lineHeight);var _=t.left+f+m,y=p-m,w=g,b=0;this.inCompositionMode?(e.fillStyle=this.compositionColor||\"black\",w=1,b=g):e.fillStyle=this.selectionColor,\"rtl\"===this.direction&&(_=this.width-_-y),e.fillRect(_,t.top+t.topOffset+b,y,w),t.topOffset+=d}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,\"fontSize\")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,\"fill\")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}}),S.IText.fromObject=function(e,i){if(t(e),e.styles)for(var r in e.styles)for(var n in e.styles[r])t(e.styles[r][n]);S.Object._fromObject(\"IText\",e,i,\"text\")}}(),C=S.util.object.clone,S.util.object.extend(S.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var t=this;this.on(\"added\",(function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))}))},initRemovedHandler:function(){var t=this;this.on(\"removed\",(function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],S.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))}))},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.__isMousedown=!1}))},t.on(\"mouse:up\",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off(\"mouse:up\",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,\"_onTickComplete\")},_animateCursor:function(t,e,i,r){var n;return n={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate(\"_currentCursorOpacity\",e,{duration:i,onComplete:function(){n.isAborted||t[r]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return n.isAborted}}),n},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,\"_tick\")}),100)},initDelayedCursor:function(t){var e=this,i=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){e._tick()}),i)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join(\"\")},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i--;for(;/\\S/.test(this._text[i])&&i>-1;)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i++;for(;/\\S/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,i=t-1;!/\\n/.test(this._text[i])&&i>-1;)e++,i--;return t-e},findLineBoundaryRight:function(t){for(var e=0,i=t;!/\\n/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e},searchWordBoundary:function(t,e){for(var i=this._text,r=this._reSpace.test(i[t])?t-1:t,n=i[r],s=S.reNonWord;!s.test(n)&&r>0&&r<i.length;)n=i[r+=e];return s.test(n)&&(r+=1===e?0:1),r},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),i=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire(\"editing:entered\"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire(\"text:editing:entered\",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.selected=!1,t.isEditing&&t.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on(\"mouse:move\",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),i=this.selectionStart,r=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&i!==r||i!==e&&r!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===r||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor=\"text\",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor=\"text\"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,i){var r=i.slice(0,t),n=S.util.string.graphemeSplit(r).length;if(t===e)return{selectionStart:n,selectionEnd:n};var s=i.slice(t,e);return{selectionStart:n,selectionEnd:n+S.util.string.graphemeSplit(s).length}},fromGraphemeToStringSelection:function(t,e,i){var r=i.slice(0,t).join(\"\").length;return t===e?{selectionStart:r,selectionEnd:r}:{selectionStart:r,selectionEnd:r+i.slice(t,e).join(\"\").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),i=this.get2DCursorLocation(t),r=i.lineIndex,n=i.charIndex,s=this.getValueOfPropertyAt(r,n,\"fontSize\")*this.lineHeight,o=e.leftOffset,a=this.calcTransformMatrix(),h={x:e.left+o,y:e.top+e.topOffset+s},l=this.canvas.getRetinaScaling(),c=this.canvas.upperCanvasEl,u=c.width/l,d=c.height/l,f=u-s,g=d-s,m=c.clientWidth/u,p=c.clientHeight/d;return h=S.util.transformPoint(h,a),(h=S.util.transformPoint(h,this.canvas.viewportTransform)).x*=m,h.y*=p,h.x<0&&(h.x=0),h.x>f&&(h.x=f),h.y<0&&(h.y=0),h.y>g&&(h.y=g),h.x+=this.canvas._offset.left,h.y+=this.canvas._offset.top,{left:h.x+\"px\",top:h.y+\"px\",fontSize:s+\"px\",charHeight:s}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text,e=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire(\"editing:exited\"),t&&this.fire(\"modified\"),this.canvas&&(this.canvas.off(\"mouse:move\",this.mouseMoveHandler),this.canvas.fire(\"text:editing:exited\",{target:this}),t&&this.canvas.fire(\"object:modified\",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var i,r,n=this.get2DCursorLocation(t,!0),s=this.get2DCursorLocation(e,!0),o=n.lineIndex,a=n.charIndex,h=s.lineIndex,l=s.charIndex;if(o!==h){if(this.styles[o])for(i=a;i<this._unwrappedTextLines[o].length;i++)delete this.styles[o][i];if(this.styles[h])for(i=l;i<this._unwrappedTextLines[h].length;i++)(r=this.styles[h][i])&&(this.styles[o]||(this.styles[o]={}),this.styles[o][a+i-l]=r);for(i=o+1;i<=h;i++)delete this.styles[i];this.shiftLineStyles(h,o-h)}else if(this.styles[o]){r=this.styles[o];var c,u,d=l-a;for(i=a;i<l;i++)delete r[i];for(u in this.styles[o])(c=parseInt(u,10))>=l&&(r[c-d]=r[u],delete r[u])}},shiftLineStyles:function(t,e){var i=C(this.styles);for(var r in this.styles){var n=parseInt(r,10);n>t&&(this.styles[n+e]=i[n],i[n-e]||delete this.styles[n])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(t,e,i,r){var n,s={},o=!1,a=this._unwrappedTextLines[t].length===e;for(var h in i||(i=1),this.shiftLineStyles(t,i),this.styles[t]&&(n=this.styles[t][0===e?e:e-1]),this.styles[t]){var l=parseInt(h,10);l>=e&&(o=!0,s[l-e]=this.styles[t][h],a&&0===e||delete this.styles[t][h])}var c=!1;for(o&&!a&&(this.styles[t+i]=s,c=!0),c&&i--;i>0;)r&&r[i-1]?this.styles[t+i]={0:C(r[i-1])}:n?this.styles[t+i]={0:C(n)}:delete this.styles[t+i],i--;this._forceClearCache=!0},insertCharStyleObject:function(t,e,i,r){this.styles||(this.styles={});var n=this.styles[t],s=n?C(n):{};for(var o in i||(i=1),s){var a=parseInt(o,10);a>=e&&(n[a+i]=s[a],s[a-i]||delete n[a])}if(this._forceClearCache=!0,r)for(;i--;)Object.keys(r[i]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+i]=C(r[i]));else if(n)for(var h=n[e?e-1:1];h&&i--;)this.styles[t][e+i]=C(h)},insertNewStyleBlock:function(t,e,i){for(var r=this.get2DCursorLocation(e,!0),n=[0],s=0,o=0;o<t.length;o++)\"\\n\"===t[o]?n[++s]=0:n[s]++;for(n[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,n[0],i),i=i&&i.slice(n[0]+1)),s&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+n[0],s),o=1;o<s;o++)n[o]>0?this.insertCharStyleObject(r.lineIndex+o,0,n[o],i):i&&this.styles[r.lineIndex+o]&&i[0]&&(this.styles[r.lineIndex+o][0]=i[0]),i=i&&i.slice(n[o]+1);n[o]>0&&this.insertCharStyleObject(r.lineIndex+o,0,n[o],i)},setSelectionStartEndWithShift:function(t,e,i){i<=t?(e===t?this._selectionDirection=\"left\":\"right\"===this._selectionDirection&&(this._selectionDirection=\"left\",this.selectionEnd=t),this.selectionStart=i):i>t&&i<e?\"right\"===this._selectionDirection?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection=\"right\":\"left\"===this._selectionDirection&&(this._selectionDirection=\"right\",this.selectionStart=e),this.selectionEnd=i)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}}),S.util.object.extend(S.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on(\"mousedown\",this.onMouseDown)},onMouseDown:function(t){if(this.canvas){this.__newClickTime=+new Date;var e=t.pointer;this.isTripleClick(e)&&(this.fire(\"tripleclick\",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))},tripleClickHandler:function(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))},initClicks:function(){this.on(\"mousedblclick\",this.doubleClickHandler),this.on(\"tripleclick\",this.tripleClickHandler)},_mouseDownHandler:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on(\"mousedown\",this._mouseDownHandler),this.on(\"mousedown:before\",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on(\"mouseup\",this.mouseUpHandler)},mouseUpHandler:function(t){if(this.__isMousedown=!1,!(!this.editable||this.group||t.transform&&t.transform.actionPerformed||t.e.button&&1!==t.e.button)){if(this.canvas){var e=this.canvas._activeObject;if(e&&e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),i=this.selectionStart,r=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,r,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e,i=this.getLocalPointer(t),r=0,n=0,s=0,o=0,a=0,h=0,l=this._textLines.length;h<l&&s<=i.y;h++)s+=this.getHeightOfLine(h)*this.scaleY,a=h,h>0&&(o+=this._textLines[h-1].length+this.missingNewlineOffset(h-1));n=this._getLineLeftOffset(a)*this.scaleX,e=this._textLines[a],\"rtl\"===this.direction&&(i.x=this.width*this.scaleX-i.x+n);for(var c=0,u=e.length;c<u&&(r=n,(n+=this.__charBounds[a][c].kernedWidth*this.scaleX)<=i.x);c++)o++;return this._getNewSelectionStartFromOffset(i,r,n,o,u)},_getNewSelectionStartFromOffset:function(t,e,i,r,n){var s=t.x-e,o=i-t.x,a=r+(o>s||o<0?0:1);return this.flipX&&(a=n-a),a>this._text.length&&(a=this._text.length),a}}),S.util.object.extend(S.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=S.document.createElement(\"textarea\"),this.hiddenTextarea.setAttribute(\"autocapitalize\",\"off\"),this.hiddenTextarea.setAttribute(\"autocorrect\",\"off\"),this.hiddenTextarea.setAttribute(\"autocomplete\",\"off\"),this.hiddenTextarea.setAttribute(\"spellcheck\",\"false\"),this.hiddenTextarea.setAttribute(\"data-fabric-hiddentextarea\",\"\"),this.hiddenTextarea.setAttribute(\"wrap\",\"off\");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText=\"position: absolute; top: \"+t.top+\"; left: \"+t.left+\"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingｰtop: \"+t.fontSize+\";\",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):S.document.body.appendChild(this.hiddenTextarea),S.util.addListener(this.hiddenTextarea,\"keydown\",this.onKeyDown.bind(this)),S.util.addListener(this.hiddenTextarea,\"keyup\",this.onKeyUp.bind(this)),S.util.addListener(this.hiddenTextarea,\"input\",this.onInput.bind(this)),S.util.addListener(this.hiddenTextarea,\"copy\",this.copy.bind(this)),S.util.addListener(this.hiddenTextarea,\"cut\",this.copy.bind(this)),S.util.addListener(this.hiddenTextarea,\"paste\",this.paste.bind(this)),S.util.addListener(this.hiddenTextarea,\"compositionstart\",this.onCompositionStart.bind(this)),S.util.addListener(this.hiddenTextarea,\"compositionupdate\",this.onCompositionUpdate.bind(this)),S.util.addListener(this.hiddenTextarea,\"compositionend\",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(S.util.addListener(this.canvas.upperCanvasEl,\"click\",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:\"exitEditing\",27:\"exitEditing\",33:\"moveCursorUp\",34:\"moveCursorDown\",35:\"moveCursorRight\",36:\"moveCursorLeft\",37:\"moveCursorLeft\",38:\"moveCursorUp\",39:\"moveCursorRight\",40:\"moveCursorDown\"},keysMapRtl:{9:\"exitEditing\",27:\"exitEditing\",33:\"moveCursorUp\",34:\"moveCursorDown\",35:\"moveCursorLeft\",36:\"moveCursorRight\",37:\"moveCursorRight\",38:\"moveCursorUp\",39:\"moveCursorLeft\",40:\"moveCursorDown\"},ctrlKeysMapUp:{67:\"copy\",88:\"cut\"},ctrlKeysMapDown:{65:\"selectAll\"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){var e=\"rtl\"===this.direction?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var i,r,n,s,o,a=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,h=this._text.length,l=a.length,c=l-h,u=this.selectionStart,d=this.selectionEnd,f=u!==d;if(\"\"===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire(\"changed\"),void(this.canvas&&(this.canvas.fire(\"text:changed\",{target:this}),this.canvas.requestRenderAll()));var g=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),m=u>g.selectionStart;f?(i=this._text.slice(u,d),c+=d-u):l<h&&(i=m?this._text.slice(d+c,d):this._text.slice(u,u-c)),r=a.slice(g.selectionEnd-c,g.selectionEnd),i&&i.length&&(r.length&&(n=this.getSelectionStyles(u,u+1,!1),n=r.map((function(){return n[0]}))),f?(s=u,o=d):m?(s=d-i.length,o=d):(s=d,o=d+i.length),this.removeStyleFromTo(s,o)),r.length&&(e&&r.join(\"\")===S.copiedText&&!S.disableStyleCopyPaste&&(n=S.copiedTextStyle),this.insertNewStyleBlock(r,u,n)),this.updateFromTextArea(),this.fire(\"changed\"),this.canvas&&(this.canvas.fire(\"text:changed\",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(S.copiedText=this.getSelectedText(),S.disableStyleCopyPaste?S.copiedTextStyle=null:S.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||S.window.clipboardData},_getWidthBeforeCursor:function(t,e){var i,r=this._getLineLeftOffset(t);return e>0&&(r+=(i=this.__charBounds[t][e-1]).left+i.width),r},getDownCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),r=this.get2DCursorLocation(i),n=r.lineIndex;if(n===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-i;var s=r.charIndex,o=this._getWidthBeforeCursor(n,s),a=this._getIndexOnLine(n+1,o);return this._textLines[n].slice(s).length+a+1+this.missingNewlineOffset(n)},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),r=this.get2DCursorLocation(i),n=r.lineIndex;if(0===n||t.metaKey||33===t.keyCode)return-i;var s=r.charIndex,o=this._getWidthBeforeCursor(n,s),a=this._getIndexOnLine(n-1,o),h=this._textLines[n].slice(0,s),l=this.missingNewlineOffset(n-1);return-this._textLines[n-1].length+a-h.length+(1-l)},_getIndexOnLine:function(t,e){for(var i,r,n=this._textLines[t],s=this._getLineLeftOffset(t),o=0,a=0,h=n.length;a<h;a++)if((s+=i=this.__charBounds[t][a].width)>e){r=!0;var l=s-i,c=s,u=Math.abs(l-e);o=Math.abs(c-e)<u?a:a-1;break}return r||(o=n.length-1),o},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown(\"Down\",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown(\"Up\",t)},_moveCursorUpOrDown:function(t,e){var i=this[\"get\"+t+\"CursorOffset\"](e,\"right\"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),0!==i&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e=\"left\"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight(\"Left\",t)},_move:function(t,e,i){var r;if(t.altKey)r=this[\"findWordBoundary\"+i](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+=\"Left\"===i?-1:1,!0;r=this[\"findLineBoundary\"+i](this[e])}if(void 0!==typeof r&&this[e]!==r)return this[e]=r,!0},_moveLeft:function(t,e){return this._move(t,e,\"Left\")},_moveRight:function(t,e){return this._move(t,e,\"Right\")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection=\"left\",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,\"selectionStart\")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return\"right\"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,\"selectionEnd\"):0!==this.selectionStart?(this._selectionDirection=\"left\",this._moveLeft(t,\"selectionStart\")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight(\"Right\",t)},_moveCursorLeftOrRight:function(t,e){var i=\"moveCursor\"+t+\"With\";this._currentCursorOpacity=1,e.shiftKey?i+=\"Shift\":i+=\"outShift\",this[i](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return\"left\"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,\"selectionStart\"):this.selectionEnd!==this._text.length?(this._selectionDirection=\"right\",this._moveRight(t,\"selectionEnd\")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection=\"right\",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,\"selectionStart\"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){void 0===e&&(e=t+1),this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(\"\"),this.set(\"dirty\",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(t,e,i,r){void 0===r&&(r=i),r>i&&this.removeStyleFromTo(i,r);var n=S.util.string.graphemeSplit(t);this.insertNewStyleBlock(n,i,e),this._text=[].concat(this._text.slice(0,i),n,this._text.slice(r)),this.text=this._text.join(\"\"),this.set(\"dirty\",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var t=S.util.toFixed,e=/  +/g;S.util.object.extend(S.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var e=this.getSvgTextDecoration(this);return[t.textBgRects.join(\"\"),'\\t\\t<text xml:space=\"preserve\" ',this.fontFamily?'font-family=\"'+this.fontFamily.replace(/\"/g,\"'\")+'\" ':\"\",this.fontSize?'font-size=\"'+this.fontSize+'\" ':\"\",this.fontStyle?'font-style=\"'+this.fontStyle+'\" ':\"\",this.fontWeight?'font-weight=\"'+this.fontWeight+'\" ':\"\",e?'text-decoration=\"'+e+'\" ':\"\",'style=\"',this.getSvgStyles(!0),'\"',this.addPaintOrder(),\" >\",t.textSpans.join(\"\"),\"</text>\\n\"]},_getSVGTextAndBg:function(t,e){var i,r=[],n=[],s=t;this._setSVGBg(n);for(var o=0,a=this._textLines.length;o<a;o++)i=this._getLineLeftOffset(o),(this.textBackgroundColor||this.styleHas(\"textBackgroundColor\",o))&&this._setSVGTextLineBg(n,o,e+i,s),this._setSVGTextLineText(r,o,e+i,s),s+=this.getHeightOfLine(o);return{textSpans:r,textBgRects:n}},_createTextCharSpan:function(i,r,n,s){var o=i!==i.trim()||i.match(e),a=this.getSvgSpanStyles(r,o),h=a?'style=\"'+a+'\"':\"\",l=r.deltaY,c=\"\",u=S.Object.NUM_FRACTION_DIGITS;return l&&(c=' dy=\"'+t(l,u)+'\" '),['<tspan x=\"',t(n,u),'\" y=\"',t(s,u),'\" ',c,h,\">\",S.util.string.escapeXml(i),\"</tspan>\"].join(\"\")},_setSVGTextLineText:function(t,e,i,r){var n,s,o,a,h,l=this.getHeightOfLine(e),c=-1!==this.textAlign.indexOf(\"justify\"),u=\"\",d=0,f=this._textLines[e];r+=l*(1-this._fontSizeFraction)/this.lineHeight;for(var g=0,m=f.length-1;g<=m;g++)h=g===m||this.charSpacing,u+=f[g],o=this.__charBounds[e][g],0===d?(i+=o.kernedWidth-o.width,d+=o.width):d+=o.kernedWidth,c&&!h&&this._reSpaceAndTab.test(f[g])&&(h=!0),h||(n=n||this.getCompleteStyleDeclaration(e,g),s=this.getCompleteStyleDeclaration(e,g+1),h=this._hasStyleChangedForSvg(n,s)),h&&(a=this._getStyleDeclaration(e,g)||{},t.push(this._createTextCharSpan(u,a,i,r)),u=\"\",n=s,i+=d,d=0)},_pushTextBgRect:function(e,i,r,n,s,o){var a=S.Object.NUM_FRACTION_DIGITS;e.push(\"\\t\\t<rect \",this._getFillAttributes(i),' x=\"',t(r,a),'\" y=\"',t(n,a),'\" width=\"',t(s,a),'\" height=\"',t(o,a),'\"></rect>\\n')},_setSVGTextLineBg:function(t,e,i,r){for(var n,s,o=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight,h=0,l=0,c=this.getValueOfPropertyAt(e,0,\"textBackgroundColor\"),u=0,d=o.length;u<d;u++)n=this.__charBounds[e][u],(s=this.getValueOfPropertyAt(e,u,\"textBackgroundColor\"))!==c?(c&&this._pushTextBgRect(t,c,i+l,r,h,a),l=n.left,h=n.width,c=s):h+=n.kernedWidth;s&&this._pushTextBgRect(t,s,i+l,r,h,a)},_getFillAttributes:function(t){var e=t&&\"string\"==typeof t?new S.Color(t):\"\";return e&&e.getSource()&&1!==e.getAlpha()?'opacity=\"'+e.getAlpha()+'\" fill=\"'+e.setAlpha(1).toRgb()+'\"':'fill=\"'+t+'\"'},_getSVGLineTopOffset:function(t){for(var e,i=0,r=0;r<t;r++)i+=this.getHeightOfLine(r);return e=this.getHeightOfLine(r),{lineTop:i,offset:(this._fontSizeMult-this._fontSizeFraction)*e/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){return S.Object.prototype.getSvgStyles.call(this,t)+\" white-space: pre;\"}})}(),function(t){var e=t.fabric||(t.fabric={});e.Textbox=e.util.createClass(e.IText,e.Observable,{type:\"textbox\",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:e.Text.prototype._dimensionAffectingProps.concat(\"width\"),_wordJoiners:/[ \\t\\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set(\"width\",this.dynamicMinWidth),-1!==this.textAlign.indexOf(\"justify\")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:\"_dimensionAffectingProps\"}))},_generateStyleMap:function(t){for(var e=0,i=0,r=0,n={},s=0;s<t.graphemeLines.length;s++)\"\\n\"===t.graphemeText[r]&&s>0?(i=0,r++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[r])&&s>0&&(i++,r++),n[s]={line:e,offset:i},r+=t.graphemeLines[s].length,i+=t.graphemeLines[s].length;return n},styleHas:function(t,i){if(this._styleMap&&!this.isWrapping){var r=this._styleMap[i];r&&(i=r.line)}return e.Text.prototype.styleHas.call(this,t,i)},isEmptyStyles:function(t){if(!this.styles)return!0;var e,i,r=0,n=!1,s=this._styleMap[t],o=this._styleMap[t+1];for(var a in s&&(t=s.line,r=s.offset),o&&(n=o.line===t,e=o.offset),i=void 0===t?this.styles:{line:this.styles[t]})for(var h in i[a])if(h>=r&&(!n||h<e))for(var l in i[a][h])return!1;return!0},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[t];if(!i)return null;t=i.line,e=i.offset+e}return this.callSuper(\"_getStyleDeclaration\",t,e)},_setStyleDeclaration:function(t,e,i){var r=this._styleMap[t];t=r.line,e=r.offset+e,this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){var i=this._styleMap[t];t=i.line,e=i.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return!!this.styles[e.line]},_setLineStyle:function(t){var e=this._styleMap[t];this.styles[e.line]={}},_wrapText:function(t,e){var i,r=[];for(this.isWrapping=!0,i=0;i<t.length;i++)r=r.concat(this._wrapLine(t[i],i,e));return this.isWrapping=!1,r},_measureWord:function(t,e,i){var r,n=0;i=i||0;for(var s=0,o=t.length;s<o;s++)n+=this._getGraphemeBox(t[s],e,s+i,r,!0).kernedWidth,r=t[s];return n},_wrapLine:function(t,i,r,n){var s=0,o=this.splitByGrapheme,a=[],h=[],l=o?e.util.string.graphemeSplit(t):t.split(this._wordJoiners),c=\"\",u=0,d=o?\"\":\" \",f=0,g=0,m=0,p=!0,v=this._getWidthOfCharSpacing();n=n||0,0===l.length&&l.push([]),r-=n;for(var _=0;_<l.length;_++)c=o?l[_]:e.util.string.graphemeSplit(l[_]),f=this._measureWord(c,i,u),u+=c.length,(s+=g+f-v)>r&&!p?(a.push(h),h=[],s=f,p=!0):s+=v,p||o||h.push(d),h=h.concat(c),g=o?0:this._measureWord([d],i,u),u++,p=!1,f>m&&(m=f);return _&&a.push(h),m+n>this.dynamicMinWidth&&(this.dynamicMinWidth=m-v+n),a},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return this.splitByGrapheme?this.isEndOfWrapping(t)?1:0:1},_splitTextIntoLines:function(t){for(var i=e.Text.prototype._splitTextIntoLines.call(this,t),r=this._wrapText(i.lines,this.width),n=new Array(r.length),s=0;s<r.length;s++)n[s]=r[s].join(\"\");return i.lines=n,i.graphemeLines=r,i},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var t={};for(var e in this._styleMap)this._textLines[e]&&(t[this._styleMap[e].line]=1);for(var e in this.styles)t[e]||delete this.styles[e]},toObject:function(t){return this.callSuper(\"toObject\",[\"minWidth\",\"splitByGrapheme\"].concat(t))}}),e.Textbox.fromObject=function(t,i){return e.Object._fromObject(\"Textbox\",t,i,\"text\")}}(e),function(){var t=S.controlsUtils,e=t.scaleSkewCursorStyleHandler,i=t.scaleCursorStyleHandler,r=t.scalingEqually,n=t.scalingYOrSkewingX,s=t.scalingXOrSkewingY,o=t.scaleOrSkewActionName,a=S.Object.prototype.controls;if(a.ml=new S.Control({x:-.5,y:0,cursorStyleHandler:e,actionHandler:s,getActionName:o}),a.mr=new S.Control({x:.5,y:0,cursorStyleHandler:e,actionHandler:s,getActionName:o}),a.mb=new S.Control({x:0,y:.5,cursorStyleHandler:e,actionHandler:n,getActionName:o}),a.mt=new S.Control({x:0,y:-.5,cursorStyleHandler:e,actionHandler:n,getActionName:o}),a.tl=new S.Control({x:-.5,y:-.5,cursorStyleHandler:i,actionHandler:r}),a.tr=new S.Control({x:.5,y:-.5,cursorStyleHandler:i,actionHandler:r}),a.bl=new S.Control({x:-.5,y:.5,cursorStyleHandler:i,actionHandler:r}),a.br=new S.Control({x:.5,y:.5,cursorStyleHandler:i,actionHandler:r}),a.mtr=new S.Control({x:0,y:-.5,actionHandler:t.rotationWithSnapping,cursorStyleHandler:t.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:\"rotate\"}),S.Textbox){var h=S.Textbox.prototype.controls={};h.mtr=a.mtr,h.tr=a.tr,h.br=a.br,h.tl=a.tl,h.bl=a.bl,h.mt=a.mt,h.mb=a.mb,h.mr=new S.Control({x:.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:\"resizing\"}),h.ml=new S.Control({x:-.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:\"resizing\"})}}()},192:()=>{},898:()=>{},245:()=>{}},P={};function k(t){var e=P[t];if(void 0!==e)return e.exports;var i=P[t]={exports:{}};return F[t](i,i.exports,k),i.exports}k.d=(t,e)=>{for(var i in e)k.o(e,i)&&!k.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},k.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var R={};(()=>{let t;k.d(R,{R:()=>t}),t=\"undefined\"!=typeof document&&\"undefined\"!=typeof window?k(653).fabric:{version:\"5.2.1\"}})();var B,j,W,U,V=R.R;!function(t){t[t.DIMT_RECTANGLE=1]=\"DIMT_RECTANGLE\",t[t.DIMT_QUADRILATERAL=2]=\"DIMT_QUADRILATERAL\",t[t.DIMT_TEXT=4]=\"DIMT_TEXT\",t[t.DIMT_ARC=8]=\"DIMT_ARC\",t[t.DIMT_IMAGE=16]=\"DIMT_IMAGE\",t[t.DIMT_POLYGON=32]=\"DIMT_POLYGON\",t[t.DIMT_LINE=64]=\"DIMT_LINE\",t[t.DIMT_GROUP=128]=\"DIMT_GROUP\"}(B||(B={})),function(t){t[t.DIS_DEFAULT=1]=\"DIS_DEFAULT\",t[t.DIS_SELECTED=2]=\"DIS_SELECTED\"}(j||(j={})),function(t){t[t.EF_ENHANCED_FOCUS=4]=\"EF_ENHANCED_FOCUS\",t[t.EF_AUTO_ZOOM=16]=\"EF_AUTO_ZOOM\",t[t.EF_TAP_TO_FOCUS=64]=\"EF_TAP_TO_FOCUS\"}(W||(W={})),function(t){t.GREY=\"grey\",t.GREY32=\"grey32\",t.RGBA=\"rgba\",t.RBGA=\"rbga\",t.GRBA=\"grba\",t.GBRA=\"gbra\",t.BRGA=\"brga\",t.BGRA=\"bgra\"}(U||(U={}));const G=t=>\"number\"==typeof t&&!Number.isNaN(t),N=t=>\"string\"==typeof t;var Y,H,X,z,q,K;!function(t){t[t.ARC=0]=\"ARC\",t[t.IMAGE=1]=\"IMAGE\",t[t.LINE=2]=\"LINE\",t[t.POLYGON=3]=\"POLYGON\",t[t.QUAD=4]=\"QUAD\",t[t.RECT=5]=\"RECT\",t[t.TEXT=6]=\"TEXT\",t[t.GROUP=7]=\"GROUP\"}(q||(q={})),function(t){t[t.DEFAULT=0]=\"DEFAULT\",t[t.SELECTED=1]=\"SELECTED\"}(K||(K={}));class Z{get mediaType(){return new Map([[\"rect\",B.DIMT_RECTANGLE],[\"quad\",B.DIMT_QUADRILATERAL],[\"text\",B.DIMT_TEXT],[\"arc\",B.DIMT_ARC],[\"image\",B.DIMT_IMAGE],[\"polygon\",B.DIMT_POLYGON],[\"line\",B.DIMT_LINE],[\"group\",B.DIMT_GROUP]]).get(this._mediaType)}get styleSelector(){switch(x(this,H,\"f\")){case j.DIS_DEFAULT:return\"default\";case j.DIS_SELECTED:return\"selected\"}}set drawingStyleId(t){this.styleId=t}get drawingStyleId(){return this.styleId}set coordinateBase(t){if(![\"view\",\"image\"].includes(t))throw new Error(\"Invalid 'coordinateBase'.\");this._drawingLayer&&(\"image\"===x(this,X,\"f\")&&\"view\"===t?this.updateCoordinateBaseFromImageToView():\"view\"===x(this,X,\"f\")&&\"image\"===t&&this.updateCoordinateBaseFromViewToImage()),C(this,X,t,\"f\")}get coordinateBase(){return x(this,X,\"f\")}get drawingLayerId(){return this._drawingLayerId}constructor(t,e){if(Y.add(this),H.set(this,void 0),X.set(this,\"image\"),this._zIndex=null,this._drawingLayer=null,this._drawingLayerId=null,this._mapState_StyleId=new Map,this.mapEvent_Callbacks=new Map([[\"selected\",new Map],[\"deselected\",new Map],[\"mousedown\",new Map],[\"mouseup\",new Map],[\"dblclick\",new Map],[\"mouseover\",new Map],[\"mouseout\",new Map]]),this.mapNoteName_Content=new Map([]),this.isDrawingItem=!0,null!=e&&!G(e))throw new TypeError(\"Invalid 'drawingStyleId'.\");t&&this._setFabricObject(t),this.setState(j.DIS_DEFAULT),this.styleId=e}_setFabricObject(t){this._fabricObject=t,this._fabricObject.on(\"selected\",(()=>{this.setState(j.DIS_SELECTED)})),this._fabricObject.on(\"deselected\",(()=>{this._fabricObject.canvas&&this._fabricObject.canvas.getActiveObjects().includes(this._fabricObject)?this.setState(j.DIS_SELECTED):this.setState(j.DIS_DEFAULT),\"textbox\"===this._fabricObject.type&&(this._fabricObject.isEditing&&this._fabricObject.exitEditing(),this._fabricObject.selected=!1)})),t.getDrawingItem=()=>this}_getFabricObject(){return this._fabricObject}setState(t){C(this,H,t,\"f\")}getState(){return x(this,H,\"f\")}_on(t,e){if(!e)return;const i=t.toLowerCase(),r=this.mapEvent_Callbacks.get(i);if(!r)throw new Error(`Event '${t}' does not exist.`);let n=r.get(e);n||(n=t=>{const i=t.e;if(!i)return void(e&&e.apply(this,[{targetItem:this,itemClientX:null,itemClientY:null,itemPageX:null,itemPageY:null}]));const r={targetItem:this,itemClientX:null,itemClientY:null,itemPageX:null,itemPageY:null};if(this._drawingLayer){let t,e,n,s;const o=i.target.getBoundingClientRect();t=o.left,e=o.top,n=t+window.scrollX,s=e+window.scrollY;const{width:a,height:h}=this._drawingLayer.fabricCanvas.lowerCanvasEl.getBoundingClientRect(),l=this._drawingLayer.width,c=this._drawingLayer.height,u=a/h,d=l/c,f=this._drawingLayer._getObjectFit();let g,m,p,v,_=1;if(\"contain\"===f)u<d?(_=a/l,g=t+this.get(\"x\")*_,m=e+this.get(\"y\")*_+(h-c*_)/2,p=n+this.get(\"x\")*_,v=s+this.get(\"y\")*_+(h-c*_)/2):(_=h/c,g=t+this.get(\"x\")*_+(a-l*_)/2,m=e+this.get(\"y\")*_,p=n+this.get(\"x\")*_+(a-l*_)/2,v=s+this.get(\"y\")*_);else if(\"cover\"===f)if(u<d){_=h/c;let i=this.get(\"x\")*_-(l*_-a)/2;i=Math.max(i,0),i=Math.min(i,a),g=t+i,m=e+this.get(\"y\")*_,p=n+i,v=s+this.get(\"y\")*_}else{_=a/l;let i=this.get(\"y\")*_-(c*_-h)/2;i=Math.max(i,0),i=Math.min(i,h),g=t+this.get(\"x\")*_,m=e+i,p=n+this.get(\"x\")*_,v=s+i}r.itemClientX=Math.round(g),r.itemClientY=Math.round(m),r.itemPageX=Math.round(p),r.itemPageY=Math.round(v)}for(let t of Object.getOwnPropertyNames(r))Object.defineProperty(i,t,{value:r[t],writable:!0});e&&e.apply(this,[i])},r.set(e,n),this._fabricObject.on(\"dblclick\"===i?\"mousedblclick\":i,n))}on(t,e){this._on(t,e)}_off(t,e){const i=t.toLowerCase(),r=this.mapEvent_Callbacks.get(i);if(!r)throw new Error(`Event '${t}' does not exist.`);let n=r.get(e);n&&(r.delete(e),this._fabricObject.off(\"dblclick\"===i?\"mousedblclick\":i,n))}off(t,e){this._off(t,e)}_setEditable(t){const e=this._fabricObject;t?(e.selectable=!0,e.hasControls=!0,e.hoverCursor=null):(e.selectable=!1,e.hasControls=!1,e.hoverCursor=\"default\")}hasNote(t){return this.mapNoteName_Content.has(t)}addNote(t,e){if(this.hasNote(t.name)&&!e)throw new Error(\"A note with the same name already exists, please use a different name.\");const i=t.content?JSON.parse(JSON.stringify(t.content)):t.content;this.mapNoteName_Content.set(t.name,[i])}getNote(t){const e=this.mapNoteName_Content.get(t);return e?1===e.length?{name:t,content:e[0]?JSON.parse(JSON.stringify(e[0])):e[0]}:{name:t,content:JSON.parse(JSON.stringify(e))}:null}getNotes(){const t=[];for(let e of this.mapNoteName_Content){let i=1===e[1].length?e[1][0]:e[1];i=i?JSON.parse(JSON.stringify(i)):i,t.push({name:e[0],content:i})}return t}updateNote(t,e,i){const r=this.mapNoteName_Content.get(t);if(!r)throw new Error(\"The note name does not exist.\");i||(r.length=0),e=e?JSON.parse(JSON.stringify(e)):e,r.push(e)}deleteNote(t){this.mapNoteName_Content.delete(t)}clearNotes(){this.mapNoteName_Content.clear()}set(t,e){if(!this.extendSet(t,e))if(\"x\"===t){const t=this._fabricObject.group;t?(this._fabricObject.set(\"left\",e-t.left-t.width/2),t.addWithUpdate()):this._fabricObject.set(\"left\",e)}else if(\"y\"===t){const t=this._fabricObject.group;t?(this._fabricObject.set(\"top\",e-t.top-t.height/2),t.addWithUpdate()):this._fabricObject.set(\"top\",e)}else\"styleId\"===t?this.styleId=e:this._fabricObject.set(t,e);[\"vertices\",\"startPoint\",\"endPoint\",\"x\",\"y\",\"left\",\"top\",\"width\",\"height\",\"scaleX\",\"scaleY\",\"skewX\",\"skewY\",\"padding\",\"angle\",\"strokeWidth\"].includes(t)&&this._fabricObject.setCoords()}get(t){let e=this.extendGet(t);if(void 0===e)if(\"x\"===t){const t=this._fabricObject.group;e=t?this._fabricObject.get(\"left\")+t.left+t.width/2:this._fabricObject.get(\"left\")}else if(\"y\"===t){const t=this._fabricObject.group;e=t?this._fabricObject.get(\"top\")+t.top+t.height/2:this._fabricObject.get(\"top\")}else e=\"scaledWidth\"===t?this._fabricObject.getScaledWidth():\"scaledHeight\"===t?this._fabricObject.getScaledHeight():[\"type\",\"mediaType\"].includes(t)?this.mediaType:\"state\"===t?this.getState():\"styleId\"===t?this.styleId:\"drawingLayerId\"===t?this.drawingLayerId:this._fabricObject.get(t);return e}remove(){this._drawingLayer&&this._drawingLayer.removeDrawingItems([this])}convertPropFromImageToView(t){if(\"number\"!=typeof t)throw new TypeError(\"Invalid value.\");return t*x(this,Y,\"m\",z).call(this)}convertPropFromViewToImage(t){if(\"number\"!=typeof t)throw new TypeError(\"Invalid value.\");return t/x(this,Y,\"m\",z).call(this)}_setLineWidth(t){if(this._drawingLayer)if(\"view\"===this.coordinateBase)this.set(\"strokeWidth\",this.convertPropFromViewToImage(t));else{if(\"image\"!==this.coordinateBase)throw new Error(\"Invalid 'coordinateBase'.\");this.set(\"strokeWidth\",t)}}_getLineWidth(){if(this._drawingLayer){if(\"view\"===this.coordinateBase)return this.convertPropFromImageToView(this.get(\"strokeWidth\"));if(\"image\"===this.coordinateBase)return this.get(\"strokeWidth\");throw new Error(\"Invalid 'coordinateBase'.\")}}_setFontSize(t){if(this._drawingLayer)if(\"view\"===this.coordinateBase)this.set(\"fontSize\",this.convertPropFromViewToImage(t));else{if(\"image\"!==this.coordinateBase)throw new Error(\"Invalid 'coordinateBase'.\");this.set(\"fontSize\",t)}}_getFontSize(){if(this._drawingLayer){if(\"view\"===this.coordinateBase)return this.convertPropFromImageToView(this.get(\"fontSize\"));if(\"image\"===this.coordinateBase)return this.get(\"fontSize\");throw new Error(\"Invalid 'coordinateBase'.\")}}}H=new WeakMap,X=new WeakMap,Y=new WeakSet,z=function(){const t=this._drawingLayer;if(!t)return 1;const e=t.width,i=t.height,{width:r,height:n}=t.fabricCanvas.wrapperEl.getBoundingClientRect();if(r<=0||n<=0)throw new Error(\"Unable to get drawing layer dimensions. Layer may not be rendered on the page.\");const s=r/e,o=n/i,a=t._getObjectFit();let h=1;if(\"contain\"===a)if(s<o){h=r/e}else{h=n/i}else if(\"cover\"===a)if(s<o){h=n/i}else{h=r/e}return h},Z.arrMediaTypes=[\"rect\",\"arc\",\"polygon\",\"image\",\"text\",\"line\",\"quad\"],Z.mapItemType=new Map([[q.ARC,\"arc\"],[q.IMAGE,\"image\"],[q.LINE,\"line\"],[q.POLYGON,\"polygon\"],[q.QUAD,\"quad\"],[q.RECT,\"rect\"],[q.TEXT,\"text\"],[q.GROUP,\"group\"]]),Z.arrStyleSelectors=[\"default\",\"selected\"],Z.mapItemState=new Map([[K.DEFAULT,\"default\"],[K.SELECTED,\"selected\"]]);const J=t=>null!==t&&\"object\"==typeof t&&!Array.isArray(t),Q=t=>!!N(t)&&\"\"!==t,$=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._isDSImageData,tt=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._isDSRect,et=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._isLineSegment,it=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._isPolygon,rt=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._isPoint,nt=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._isQuad,st=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._isRect,ot=t=>!!J(t)&&(!(\"id\"in t&&!G(t.id))&&(!(\"lineWidth\"in t&&!G(t.lineWidth))&&(!(\"fillStyle\"in t&&!Q(t.fillStyle))&&(!(\"strokeStyle\"in t&&!Q(t.strokeStyle))&&(!(\"paintMode\"in t&&![\"fill\",\"stroke\",\"strokeAndFill\"].includes(t.paintMode))&&(!(\"fontFamily\"in t&&!Q(t.fontFamily))&&!(\"fontSize\"in t&&!G(t.fontSize))))))));class at{static convert(t,e,i){const r={x:0,y:0,width:e,height:i};if(!t)return r;if(st(t))t.isMeasuredInPercentage?(r.x=t.x/100*e,r.y=t.y/100*i,r.width=t.width/100*e,r.height=t.height/100*i):(r.x=t.x,r.y=t.y,r.width=t.width,r.height=t.height);else{if(!tt(t))throw TypeError(\"Invalid region.\");t.isMeasuredInPercentage?(r.x=t.left/100*e,r.y=t.top/100*i,r.width=(t.right-t.left)/100*e,r.height=(t.bottom-t.top)/100*i):(r.x=t.left,r.y=t.top,r.width=t.right-t.left,r.height=t.bottom-t.top)}return r.x=Math.round(r.x),r.y=Math.round(r.y),r.width=Math.round(r.width),r.height=Math.round(r.height),r}}var ht,lt;class ct{constructor(){ht.set(this,new Map),lt.set(this,!1)}get disposed(){return x(this,lt,\"f\")}on(t,e){t=t.toLowerCase();const i=x(this,ht,\"f\").get(t);if(i){if(i.includes(e))return;i.push(e)}else x(this,ht,\"f\").set(t,[e])}off(t,e){t=t.toLowerCase();const i=x(this,ht,\"f\").get(t);if(!i)return;const r=i.indexOf(e);-1!==r&&i.splice(r,1)}offAll(t){t=t.toLowerCase();const e=x(this,ht,\"f\").get(t);e&&(e.length=0)}fire(t,e=[],i={async:!1,copy:!0}){e||(e=[]),t=t.toLowerCase();const r=x(this,ht,\"f\").get(t);if(r&&r.length){i=Object.assign({async:!1,copy:!0},i);for(let t of r){if(!t)continue;let n=[];if(i.copy)for(let t of e){try{t=JSON.parse(JSON.stringify(t))}catch(t){}n.push(t)}else n=e;let s=!1;if(i.async)setTimeout((()=>{this.disposed||r.includes(t)&&t.apply(i.target,n)}),0);else try{s=t.apply(i.target,n)}catch(t){}if(!0===s)break}}}dispose(){C(this,lt,!0,\"f\")}}function ut(t,e,i){return(i.x-t.x)*(e.y-t.y)==(e.x-t.x)*(i.y-t.y)&&Math.min(t.x,e.x)<=i.x&&i.x<=Math.max(t.x,e.x)&&Math.min(t.y,e.y)<=i.y&&i.y<=Math.max(t.y,e.y)}function dt(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function ft(t,e,i,r){let n=t[0]*(i[1]-e[1])+e[0]*(t[1]-i[1])+i[0]*(e[1]-t[1]),s=t[0]*(r[1]-e[1])+e[0]*(t[1]-r[1])+r[0]*(e[1]-t[1]);return!((n^s)>=0&&0!==n&&0!==s)&&(n=i[0]*(t[1]-r[1])+r[0]*(i[1]-t[1])+t[0]*(r[1]-i[1]),s=i[0]*(e[1]-r[1])+r[0]*(i[1]-e[1])+e[0]*(r[1]-i[1]),!((n^s)>=0&&0!==n&&0!==s))}ht=new WeakMap,lt=new WeakMap;const gt=async t=>{if(\"string\"!=typeof t)throw new TypeError(\"Invalid url.\");const e=await fetch(t);if(!e.ok)throw Error(\"Network Error: \"+e.statusText);const i=await e.text();if(!i.trim().startsWith(\"<\"))throw Error(\"Unable to get valid HTMLElement.\");const r=document.createElement(\"div\");if(r.insertAdjacentHTML(\"beforeend\",i),1===r.childElementCount&&r.firstChild instanceof HTMLTemplateElement)return r.firstChild.content;const n=new DocumentFragment;for(let t of r.children)n.append(t);return n};var mt,pt,vt,_t,yt;class wt extends Z{constructor(t,e){if(super(null,e),mt.set(this,void 0),!st(t))throw new TypeError(\"Invalid 'rect'.\");this._setFabricObject(new V.Rect({left:t.x,top:t.y,width:t.width,height:t.height})),C(this,mt,JSON.parse(JSON.stringify(t)),\"f\"),this._mediaType=\"rect\"}extendSet(t,e){return!1}extendGet(t){}updateCoordinateBaseFromImageToView(){this.set(\"left\",this.convertPropFromViewToImage(this.get(\"left\"))),this.set(\"top\",this.convertPropFromViewToImage(this.get(\"top\"))),this.set(\"width\",this.convertPropFromViewToImage(this.get(\"scaledWidth\"))),this.set(\"height\",this.convertPropFromViewToImage(this.get(\"scaledHeight\")))}updateCoordinateBaseFromViewToImage(){this.set(\"left\",this.convertPropFromImageToView(this.get(\"left\"))),this.set(\"top\",this.convertPropFromImageToView(this.get(\"top\"))),this.set(\"width\",this.convertPropFromImageToView(this.get(\"scaledWidth\"))),this.set(\"height\",this.convertPropFromImageToView(this.get(\"scaledHeight\")))}setPosition(t){this.setRect(t)}getPosition(){return this.getRect()}updatePosition(){x(this,mt,\"f\")&&this.setRect(x(this,mt,\"f\"))}setRect(t){if(!st(t))throw new TypeError(\"Invalid 'rect'.\");if(this._drawingLayer){if(\"view\"===this.coordinateBase)this.set(\"left\",this.convertPropFromViewToImage(t.x)),this.set(\"top\",this.convertPropFromViewToImage(t.y)),this.set(\"width\",this.convertPropFromViewToImage(t.width)),this.set(\"height\",this.convertPropFromViewToImage(t.height));else{if(\"image\"!==this.coordinateBase)throw new Error(\"Invalid 'coordinateBase'.\");this.set(\"left\",t.x),this.set(\"top\",t.y),this.set(\"width\",t.width),this.set(\"height\",t.height)}this._drawingLayer.renderAll()}else C(this,mt,JSON.parse(JSON.stringify(t)),\"f\")}getRect(){if(this._drawingLayer){if(\"view\"===this.coordinateBase)return{x:this.convertPropFromImageToView(this.get(\"left\")),y:this.convertPropFromImageToView(this.get(\"top\")),width:this.convertPropFromImageToView(this.get(\"scaledWidth\")),height:this.convertPropFromImageToView(this.get(\"scaledHeight\"))};if(\"image\"===this.coordinateBase)return{x:this.get(\"left\"),y:this.get(\"top\"),width:this.get(\"scaledWidth\"),height:this.get(\"scaledHeight\")};throw new Error(\"Invalid 'coordinateBase'.\")}return x(this,mt,\"f\")?JSON.parse(JSON.stringify(x(this,mt,\"f\"))):null}}function bt(t,e,i){let r=i.points[this.pointIndex].x-i.pathOffset.x,n=i.points[this.pointIndex].y-i.pathOffset.y;return V.util.transformPoint({x:r,y:n},i.calcTransformMatrix())}function xt(t){let e=new V.Point(t.strokeUniform?1/t.scaleX:1,t.strokeUniform?1/t.scaleY:1).multiply(t.strokeWidth);return new V.Point(t.width+e.x,t.height+e.y)}function Ct(t,e,i,r){let n=e.target,s=n.controls[n.__corner],o=n.toLocalPoint(new V.Point(i,r),\"center\",\"center\"),a=xt(n),h=n._getTransformedDimensions(0,0),l={x:o.x*a.x/h.x+n.pathOffset.x,y:o.y*a.y/h.y+n.pathOffset.y};return n.points[s.pointIndex]=l,V.controlsUtils.fireEvent(\"scaling\",{e:t,transform:e,pointer:{x:i,y:r}}),!0}function St(t,e){return function(i,r,n,s){let o=r.target,a=V.util.transformPoint({x:o.points[t].x-o.pathOffset.x,y:o.points[t].y-o.pathOffset.y},o.calcTransformMatrix()),h=e(i,r,n,s);o._setPositionDimensions({});let l=xt(o),c=(o.points[t].x-o.pathOffset.x)/l.x,u=(o.points[t].y-o.pathOffset.y)/l.y;return o.setPositionByOrigin(a,c+.5,u+.5),h}}mt=new WeakMap;class Tt extends Z{constructor(t,e){if(super(null,e),pt.set(this,void 0),!it(t))throw new TypeError(\"Invalid 'polygon'.\");this._setFabricObject(new V.Polygon(t.points,{objectCaching:!1}));const i=this._fabricObject;let r=i.points.length-1;i.controls=i.points.reduce((function(t,e,i){return t[\"p\"+i]=new V.Control({positionHandler:bt,actionHandler:St(i>0?i-1:r,Ct),actionName:\"modifyPolygon\",pointIndex:i}),t}),{}),C(this,pt,JSON.parse(JSON.stringify(t)),\"f\"),this._mediaType=\"polygon\"}extendSet(t,e){if(\"vertices\"===t){const t=this._fabricObject;if(t.group){const i=t.group;t.points=e.map((t=>({x:t.x-i.left-i.width/2,y:t.y-i.top-i.height/2}))),i.addWithUpdate()}else t.points=e;const i=t.points.length-1;return t.controls=t.points.reduce((function(t,e,r){return t[\"p\"+r]=new V.Control({positionHandler:bt,actionHandler:St(r>0?r-1:i,Ct),actionName:\"modifyPolygon\",pointIndex:r}),t}),{}),t._setPositionDimensions({}),!0}}extendGet(t){if(\"vertices\"===t){const t=[],e=this._fabricObject;if(e.selectable&&!e.group)for(let i in e.oCoords)t.push({x:e.oCoords[i].x,y:e.oCoords[i].y});else for(let i of e.points){let r=i.x-e.pathOffset.x,n=i.y-e.pathOffset.y;const s=V.util.transformPoint({x:r,y:n},e.calcTransformMatrix());t.push({x:s.x,y:s.y})}return t}}updateCoordinateBaseFromImageToView(){const t=this.get(\"vertices\").map((t=>({x:this.convertPropFromViewToImage(t.x),y:this.convertPropFromViewToImage(t.y)})));this.set(\"vertices\",t)}updateCoordinateBaseFromViewToImage(){const t=this.get(\"vertices\").map((t=>({x:this.convertPropFromImageToView(t.x),y:this.convertPropFromImageToView(t.y)})));this.set(\"vertices\",t)}setPosition(t){this.setPolygon(t)}getPosition(){return this.getPolygon()}updatePosition(){x(this,pt,\"f\")&&this.setPolygon(x(this,pt,\"f\"))}setPolygon(t){if(!it(t))throw new TypeError(\"Invalid 'polygon'.\");if(this._drawingLayer){if(\"view\"===this.coordinateBase){const e=t.points.map((t=>({x:this.convertPropFromViewToImage(t.x),y:this.convertPropFromViewToImage(t.y)})));this.set(\"vertices\",e)}else{if(\"image\"!==this.coordinateBase)throw new Error(\"Invalid 'coordinateBase'.\");this.set(\"vertices\",t.points)}this._drawingLayer.renderAll()}else C(this,pt,JSON.parse(JSON.stringify(t)),\"f\")}getPolygon(){if(this._drawingLayer){if(\"view\"===this.coordinateBase){return{points:this.get(\"vertices\").map((t=>({x:this.convertPropFromImageToView(t.x),y:this.convertPropFromImageToView(t.y)})))}}if(\"image\"===this.coordinateBase)return{points:this.get(\"vertices\")};throw new Error(\"Invalid 'coordinateBase'.\")}return x(this,pt,\"f\")?JSON.parse(JSON.stringify(x(this,pt,\"f\"))):null}}pt=new WeakMap;class Et extends Z{set maintainAspectRatio(t){t&&this.set(\"scaleY\",this.get(\"scaleX\"))}get maintainAspectRatio(){return x(this,_t,\"f\")}constructor(t,e,i,r){if(super(null,r),vt.set(this,void 0),_t.set(this,void 0),!st(e))throw new TypeError(\"Invalid 'rect'.\");if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement)this._setFabricObject(new V.Image(t,{left:e.x,top:e.y}));else{if(!$(t))throw new TypeError(\"Invalid 'image'.\");{const i=document.createElement(\"canvas\");let r;i.width=t.width,i.height=t.height;if(t.format===dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_GRAYSCALED){r=new Uint8ClampedArray(t.width*t.height*4);for(let e=0;e<r.length;e+=4)r[e]=t.bytes[e/4],r[e+1]=t.bytes[e/4],r[e+2]=t.bytes[e/4],r[e+3]=255}else r=new Uint8ClampedArray(t.bytes.buffer);i.getContext(\"2d\").putImageData(new ImageData(r,t.width,t.height),0,0),this._setFabricObject(new V.Image(i,{left:e.x,top:e.y}))}}if(i){const t=e.width/this.get(\"width\");this.set(\"scaleX\",t),this.set(\"scaleY\",t)}else this.set(\"scaleX\",e.width/this.get(\"width\")),this.set(\"scaleY\",e.height/this.get(\"height\"));this.image=t,C(this,vt,JSON.parse(JSON.stringify(e)),\"f\"),C(this,_t,i,\"f\"),this._mediaType=\"image\"}extendSet(t,e){if(\"image\"===t){if(e instanceof HTMLImageElement)return this._fabricObject.setElement(e),this.image=e,!0;if(e instanceof HTMLCanvasElement){const t=new Image;return t.src=e.toDataURL(),this._fabricObject.setElement(t),this.image=e,!0}throw new Error(\"Unsupported value.\")}}extendGet(t){if(\"image\"===t)return this.image}updateCoordinateBaseFromImageToView(){if(this.set(\"left\",this.convertPropFromViewToImage(this.get(\"left\"))),this.set(\"top\",this.convertPropFromViewToImage(this.get(\"top\"))),x(this,_t,\"f\")){const t=this.convertPropFromViewToImage(this.get(\"width\"))/this.get(\"width\");this.set(\"scaleX\",t),this.set(\"scaleY\",t)}else this.set(\"scaleX\",this.convertPropFromViewToImage(this.get(\"width\"))/this.get(\"width\")),this.set(\"scaleY\",this.convertPropFromViewToImage(this.get(\"height\"))/this.get(\"height\"))}updateCoordinateBaseFromViewToImage(){if(this.set(\"left\",this.convertPropFromImageToView(this.get(\"left\"))),this.set(\"top\",this.convertPropFromImageToView(this.get(\"top\"))),x(this,_t,\"f\")){const t=this.convertPropFromImageToView(this.get(\"width\"))/this.get(\"width\");this.set(\"scaleX\",t),this.set(\"scaleY\",t)}else this.set(\"scaleX\",this.convertPropFromImageToView(this.get(\"width\"))/this.get(\"width\")),this.set(\"scaleY\",this.convertPropFromImageToView(this.get(\"height\"))/this.get(\"height\"))}setPosition(t){this.setImageRect(t)}getPosition(){return this.getImageRect()}updatePosition(){x(this,vt,\"f\")&&this.setImageRect(x(this,vt,\"f\"))}setImage(t){const e=this.getImageRect();if(t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement)this.set(\"image\",t);else{if(!$(t))throw new TypeError(\"Invalid 'image'.\");{const e=document.createElement(\"canvas\");let i;e.width=t.width,e.height=t.height;if(t.format===dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_GRAYSCALED){i=new Uint8ClampedArray(t.width*t.height*4);for(let e=0;e<i.length;e+=4)i[e]=t.bytes[e/4],i[e+1]=t.bytes[e/4],i[e+2]=t.bytes[e/4],i[e+3]=255}else i=new Uint8ClampedArray(t.bytes.buffer);e.getContext(\"2d\").putImageData(new ImageData(i,t.width,t.height),0,0),this.set(\"image\",e)}}if(x(this,_t,\"f\")){const t=e.width/this.get(\"width\");this.set(\"scaleX\",t),this.set(\"scaleY\",t)}else this.set(\"scaleX\",e.width/this.get(\"width\")),this.set(\"scaleY\",e.height/this.get(\"height\"))}getImage(){return this.image}setImageRect(t){if(!st(t))throw new TypeError(\"Invalid 'rect'.\");if(this._drawingLayer){if(\"view\"===this.coordinateBase)if(this.set(\"left\",this.convertPropFromViewToImage(t.x)),this.set(\"top\",this.convertPropFromViewToImage(t.y)),x(this,_t,\"f\")){const e=this.convertPropFromViewToImage(t.width)/this.get(\"width\");this.set(\"scaleX\",e),this.set(\"scaleY\",e)}else this.set(\"scaleX\",this.convertPropFromViewToImage(t.width)/this.get(\"width\")),this.set(\"scaleY\",this.convertPropFromViewToImage(t.height)/this.get(\"height\"));else{if(\"image\"!==this.coordinateBase)throw new Error(\"Invalid 'coordinateBase'.\");if(this.set(\"left\",t.x),this.set(\"top\",t.y),x(this,_t,\"f\")){const e=t.width/this.get(\"width\");this.set(\"scaleX\",e),this.set(\"scaleY\",e)}else this.set(\"scaleX\",t.width/this.get(\"width\")),this.set(\"scaleY\",t.height/this.get(\"height\"))}this._drawingLayer.renderAll()}else C(this,vt,JSON.parse(JSON.stringify(t)),\"f\")}getImageRect(){if(this._drawingLayer){if(\"view\"===this.coordinateBase)return{x:this.convertPropFromImageToView(this.get(\"left\")),y:this.convertPropFromImageToView(this.get(\"top\")),width:this.convertPropFromImageToView(this.get(\"scaledWidth\")),height:this.convertPropFromImageToView(this.get(\"scaledHeight\"))};if(\"image\"===this.coordinateBase)return{x:this.get(\"left\"),y:this.get(\"top\"),width:this.get(\"scaledWidth\"),height:this.get(\"scaledHeight\")};throw new Error(\"Invalid 'coordinateBase'.\")}return x(this,vt,\"f\")?JSON.parse(JSON.stringify(x(this,vt,\"f\"))):null}}vt=new WeakMap,_t=new WeakMap;const Ot=t=>{let e=(t=>t.split(\"\\n\").map((t=>t.split(\"\\t\"))))(t);return(t=>{for(let e=0;;e++){let i=-1;for(let r=0;r<t.length;r++){let n=t[r][e];void 0!==n&&(n.length>i&&(i=n.length))}if(-1===i)break;for(let r=0;r<t.length;r++){if(e>=t[r].length-1)continue;let n=\" \".repeat(i+2-t[r][e].length);t[r][e]=t[r][e].concat(n)}}})(e),(t=>{let e=\"\";for(let i=0;i<t.length;i++)e=e.concat(...t[i],i===t.length-1?\"\":\"\\n\");return e})(e)};class At extends Z{constructor(t,e,i){if(super(null,i),yt.set(this,void 0),!N(t))throw new TypeError(\"Invalid 'text'.\");if(!st(e))throw new TypeError(\"Invalid 'rect'.\");this._setFabricObject(new V.Textbox(Ot(t),{left:e.x,top:e.y,width:e.width})),this._text=t,C(this,yt,JSON.parse(JSON.stringify(e)),\"f\"),this._mediaType=\"text\"}extendSet(t,e){if(\"text\"===t)return this._text=e,this._fabricObject.set(\"text\",Ot(e)),!0}extendGet(t){if(\"text\"===t)return this._text}updateCoordinateBaseFromImageToView(){this.set(\"left\",this.convertPropFromViewToImage(this.get(\"left\"))),this.set(\"top\",this.convertPropFromViewToImage(this.get(\"top\"))),this.set(\"width\",this.convertPropFromViewToImage(this.get(\"scaledWidth\")))}updateCoordinateBaseFromViewToImage(){this.set(\"left\",this.convertPropFromImageToView(this.get(\"left\"))),this.set(\"top\",this.convertPropFromImageToView(this.get(\"top\"))),this.set(\"width\",this.convertPropFromImageToView(this.get(\"scaledWidth\")))}setPosition(t){this.setTextRect(t)}getPosition(){return this.getTextRect()}updatePosition(){x(this,yt,\"f\")&&this.setTextRect(x(this,yt,\"f\"))}setText(t){if(!N(t))throw new TypeError(\"Invalid 'text'.\");this.set(\"text\",t)}getText(){return this.get(\"text\")}setTextRect(t){if(!st(t))throw new TypeError(\"Invalid 'rect'.\");if(this._drawingLayer){if(\"view\"===this.coordinateBase)this.set(\"left\",this.convertPropFromViewToImage(t.x)),this.set(\"top\",this.convertPropFromViewToImage(t.y)),this.set(\"width\",this.convertPropFromViewToImage(t.width));else{if(\"image\"!==this.coordinateBase)throw new Error(\"Invalid 'coordinateBase'.\");this.set(\"left\",t.x),this.set(\"top\",t.y),this.set(\"width\",t.width)}this._drawingLayer.renderAll()}else C(this,yt,JSON.parse(JSON.stringify(t)),\"f\")}getTextRect(){if(this._drawingLayer){if(\"view\"===this.coordinateBase)return{x:this.convertPropFromImageToView(this.get(\"left\")),y:this.convertPropFromImageToView(this.get(\"top\")),width:this.convertPropFromImageToView(this.get(\"scaledWidth\")),height:this.convertPropFromImageToView(this.get(\"scaledHeight\"))};if(\"image\"===this.coordinateBase)return{x:this.get(\"left\"),y:this.get(\"top\"),width:this.get(\"scaledWidth\"),height:this.get(\"scaledHeight\")};throw new Error(\"Invalid 'coordinateBase'.\")}return x(this,yt,\"f\")?JSON.parse(JSON.stringify(x(this,yt,\"f\"))):null}}var It,Lt,Dt,Mt,Ft,Pt,kt,Rt,Bt,jt,Wt,Ut,Vt,Gt,Nt,Yt,Ht,Xt,zt,qt,Kt,Zt,Jt,Qt,$t,te,ee,ie,re,ne,se,oe,ae,he,le,ce;yt=new WeakMap;class ue extends Tt{constructor(t,e){if(super({points:[null==t?void 0:t.startPoint,null==t?void 0:t.endPoint]},e),It.set(this,void 0),!et(t))throw new TypeError(\"Invalid 'line'.\");C(this,It,JSON.parse(JSON.stringify(t)),\"f\"),this._mediaType=\"line\"}extendSet(t,e){if(\"startPoint\"===t||\"endPoint\"===t){e=\"startPoint\"===t?[e,this.get(\"endPoint\")]:[this.get(\"startPoint\"),e];const i=this._fabricObject;if(i.group){const t=i.group;i.points=e.map((e=>({x:e.x-t.left-t.width/2,y:e.y-t.top-t.height/2}))),t.addWithUpdate()}else i.points=e;const r=i.points.length-1;return i.controls=i.points.reduce((function(t,e,i){return t[\"p\"+i]=new V.Control({positionHandler:bt,actionHandler:St(i>0?i-1:r,Ct),actionName:\"modifyPolygon\",pointIndex:i}),t}),{}),i._setPositionDimensions({}),!0}}extendGet(t){if(\"startPoint\"===t||\"endPoint\"===t){const e=[],i=this._fabricObject;if(i.selectable&&!i.group)for(let t in i.oCoords)e.push({x:i.oCoords[t].x,y:i.oCoords[t].y});else for(let t of i.points){let r=t.x-i.pathOffset.x,n=t.y-i.pathOffset.y;const s=V.util.transformPoint({x:r,y:n},i.calcTransformMatrix());e.push({x:s.x,y:s.y})}return\"startPoint\"===t?e[0]:e[1]}}updateCoordinateBaseFromImageToView(){const t=this.get(\"startPoint\"),e=this.get(\"endPoint\");this.set(\"startPoint\",{x:this.convertPropFromViewToImage(t.x),y:this.convertPropFromViewToImage(t.y)}),this.set(\"endPoint\",{x:this.convertPropFromViewToImage(e.x),y:this.convertPropFromViewToImage(e.y)})}updateCoordinateBaseFromViewToImage(){const t=this.get(\"startPoint\"),e=this.get(\"endPoint\");this.set(\"startPoint\",{x:this.convertPropFromImageToView(t.x),y:this.convertPropFromImageToView(t.y)}),this.set(\"endPoint\",{x:this.convertPropFromImageToView(e.x),y:this.convertPropFromImageToView(e.y)})}setPosition(t){this.setLine(t)}getPosition(){return this.getLine()}updatePosition(){x(this,It,\"f\")&&this.setLine(x(this,It,\"f\"))}setPolygon(){}getPolygon(){return null}setLine(t){if(!et(t))throw new TypeError(\"Invalid 'line'.\");if(this._drawingLayer){if(\"view\"===this.coordinateBase)this.set(\"startPoint\",{x:this.convertPropFromViewToImage(t.startPoint.x),y:this.convertPropFromViewToImage(t.startPoint.y)}),this.set(\"endPoint\",{x:this.convertPropFromViewToImage(t.endPoint.x),y:this.convertPropFromViewToImage(t.endPoint.y)});else{if(\"image\"!==this.coordinateBase)throw new Error(\"Invalid 'coordinateBase'.\");this.set(\"startPoint\",t.startPoint),this.set(\"endPoint\",t.endPoint)}this._drawingLayer.renderAll()}else C(this,It,JSON.parse(JSON.stringify(t)),\"f\")}getLine(){if(this._drawingLayer){if(\"view\"===this.coordinateBase)return{startPoint:{x:this.convertPropFromImageToView(this.get(\"startPoint\").x),y:this.convertPropFromImageToView(this.get(\"startPoint\").y)},endPoint:{x:this.convertPropFromImageToView(this.get(\"endPoint\").x),y:this.convertPropFromImageToView(this.get(\"endPoint\").y)}};if(\"image\"===this.coordinateBase)return{startPoint:this.get(\"startPoint\"),endPoint:this.get(\"endPoint\")};throw new Error(\"Invalid 'coordinateBase'.\")}return x(this,It,\"f\")?JSON.parse(JSON.stringify(x(this,It,\"f\"))):null}}It=new WeakMap;class de extends Tt{constructor(t,e){if(super({points:null==t?void 0:t.points},e),Lt.set(this,void 0),!nt(t))throw new TypeError(\"Invalid 'quad'.\");C(this,Lt,JSON.parse(JSON.stringify(t)),\"f\"),this._mediaType=\"quad\"}setPosition(t){this.setQuad(t)}getPosition(){return this.getQuad()}updatePosition(){x(this,Lt,\"f\")&&this.setQuad(x(this,Lt,\"f\"))}setPolygon(){}getPolygon(){return null}setQuad(t){if(!nt(t))throw new TypeError(\"Invalid 'quad'.\");if(this._drawingLayer){if(\"view\"===this.coordinateBase){const e=t.points.map((t=>({x:this.convertPropFromViewToImage(t.x),y:this.convertPropFromViewToImage(t.y)})));this.set(\"vertices\",e)}else{if(\"image\"!==this.coordinateBase)throw new Error(\"Invalid 'coordinateBase'.\");this.set(\"vertices\",t.points)}this._drawingLayer.renderAll()}else C(this,Lt,JSON.parse(JSON.stringify(t)),\"f\")}getQuad(){if(this._drawingLayer){if(\"view\"===this.coordinateBase){return{points:this.get(\"vertices\").map((t=>({x:this.convertPropFromImageToView(t.x),y:this.convertPropFromImageToView(t.y)})))}}if(\"image\"===this.coordinateBase)return{points:this.get(\"vertices\")};throw new Error(\"Invalid 'coordinateBase'.\")}return x(this,Lt,\"f\")?JSON.parse(JSON.stringify(x(this,Lt,\"f\"))):null}}Lt=new WeakMap;class fe extends Z{constructor(t){super(new V.Group(t.map((t=>t._getFabricObject())))),this._fabricObject.on(\"selected\",(()=>{this.setState(j.DIS_SELECTED);const t=this._fabricObject._objects;for(let e of t)setTimeout((()=>{e&&e.fire(\"selected\")}),0);setTimeout((()=>{this._fabricObject&&this._fabricObject.canvas&&(this._fabricObject.dirty=!0,this._fabricObject.canvas.renderAll())}),0)})),this._fabricObject.on(\"deselected\",(()=>{this.setState(j.DIS_DEFAULT);const t=this._fabricObject._objects;for(let e of t)setTimeout((()=>{e&&e.fire(\"deselected\")}),0);setTimeout((()=>{this._fabricObject&&this._fabricObject.canvas&&(this._fabricObject.dirty=!0,this._fabricObject.canvas.renderAll())}),0)})),this._mediaType=\"group\"}extendSet(t,e){return!1}extendGet(t){}updateCoordinateBaseFromImageToView(){}updateCoordinateBaseFromViewToImage(){}setPosition(){}getPosition(){}updatePosition(){}getChildDrawingItems(){return this._fabricObject._objects.map((t=>t.getDrawingItem()))}setChildDrawingItems(t){if(!t||!t.isDrawingItem)throw TypeError(\"Illegal drawing item.\");this._drawingLayer?this._drawingLayer._updateGroupItem(this,t,\"add\"):this._fabricObject.addWithUpdate(t._getFabricObject())}removeChildItem(t){t&&t.isDrawingItem&&(this._drawingLayer?this._drawingLayer._updateGroupItem(this,t,\"remove\"):this._fabricObject.removeWithUpdate(t._getFabricObject()))}}class ge{static createDrawingStyle(t){if(!ot(t))throw new Error(\"Invalid style definition.\");let e,i=ge.USER_START_STYLE_ID;for(;x(ge,Dt,\"f\",Mt).has(i);)i++;e=i;const r=JSON.parse(JSON.stringify(t));r.id=e;for(let t in x(ge,Dt,\"f\",Ft))r.hasOwnProperty(t)||(r[t]=x(ge,Dt,\"f\",Ft)[t]);return x(ge,Dt,\"f\",Mt).set(e,r),r.id}static _getDrawingStyle(t,e){if(\"number\"!=typeof t)throw new Error(\"Invalid style id.\");const i=x(ge,Dt,\"f\",Mt).get(t);return i?e?JSON.parse(JSON.stringify(i)):i:null}static getDrawingStyle(t){return this._getDrawingStyle(t,!0)}static getAllDrawingStyles(){return JSON.parse(JSON.stringify(Array.from(x(ge,Dt,\"f\",Mt).values())))}static _updateDrawingStyle(t,e){if(!ot(e))throw new Error(\"Invalid style definition.\");const i=x(ge,Dt,\"f\",Mt).get(t);if(i)for(let t in e)i.hasOwnProperty(t)&&(i[t]=e[t])}static updateDrawingStyle(t,e){this._updateDrawingStyle(t,e)}}Dt=ge,ge.STYLE_BLUE_STROKE=1,ge.STYLE_GREEN_STROKE=2,ge.STYLE_ORANGE_STROKE=3,ge.STYLE_YELLOW_STROKE=4,ge.STYLE_BLUE_STROKE_FILL=5,ge.STYLE_GREEN_STROKE_FILL=6,ge.STYLE_ORANGE_STROKE_FILL=7,ge.STYLE_YELLOW_STROKE_FILL=8,ge.STYLE_BLUE_STROKE_TRANSPARENT=9,ge.STYLE_GREEN_STROKE_TRANSPARENT=10,ge.STYLE_ORANGE_STROKE_TRANSPARENT=11,ge.USER_START_STYLE_ID=1024,Mt={value:new Map([[ge.STYLE_BLUE_STROKE,{id:ge.STYLE_BLUE_STROKE,lineWidth:4,fillStyle:\"rgba(73, 173, 245, 0.3)\",strokeStyle:\"rgba(73, 173, 245, 1)\",paintMode:\"stroke\",fontFamily:\"consolas\",fontSize:40}],[ge.STYLE_GREEN_STROKE,{id:ge.STYLE_GREEN_STROKE,lineWidth:2,fillStyle:\"rgba(73, 245, 73, 0.3)\",strokeStyle:\"rgba(73, 245, 73, 0.9)\",paintMode:\"strokeAndFill\",fontFamily:\"consolas\",fontSize:40}],[ge.STYLE_ORANGE_STROKE,{id:ge.STYLE_ORANGE_STROKE,lineWidth:2,fillStyle:\"rgba(254, 180, 32, 0.3)\",strokeStyle:\"rgba(254, 180, 32, 0.9)\",paintMode:\"strokeAndFill\",fontFamily:\"consolas\",fontSize:40}],[ge.STYLE_YELLOW_STROKE,{id:ge.STYLE_YELLOW_STROKE,lineWidth:2,fillStyle:\"rgba(245, 236, 73, 0.3)\",strokeStyle:\"rgba(245, 236, 73, 1)\",paintMode:\"stroke\",fontFamily:\"consolas\",fontSize:40}],[ge.STYLE_BLUE_STROKE_FILL,{id:ge.STYLE_BLUE_STROKE_FILL,lineWidth:4,fillStyle:\"rgba(73, 173, 245, 0.3)\",strokeStyle:\"rgba(73, 173, 245, 1)\",paintMode:\"strokeAndFill\",fontFamily:\"consolas\",fontSize:40}],[ge.STYLE_GREEN_STROKE_FILL,{id:ge.STYLE_GREEN_STROKE_FILL,lineWidth:2,fillStyle:\"rgba(73, 245, 73, 0.3)\",strokeStyle:\"rgba(73, 245, 73, 0.9)\",paintMode:\"strokeAndFill\",fontFamily:\"consolas\",fontSize:40}],[ge.STYLE_ORANGE_STROKE_FILL,{id:ge.STYLE_ORANGE_STROKE_FILL,lineWidth:2,fillStyle:\"rgba(254, 180, 32, 0.3)\",strokeStyle:\"rgba(254, 180, 32, 1)\",paintMode:\"strokeAndFill\",fontFamily:\"consolas\",fontSize:40}],[ge.STYLE_YELLOW_STROKE_FILL,{id:ge.STYLE_YELLOW_STROKE_FILL,lineWidth:2,fillStyle:\"rgba(245, 236, 73, 0.3)\",strokeStyle:\"rgba(245, 236, 73, 1)\",paintMode:\"strokeAndFill\",fontFamily:\"consolas\",fontSize:40}],[ge.STYLE_BLUE_STROKE_TRANSPARENT,{id:ge.STYLE_BLUE_STROKE_TRANSPARENT,lineWidth:4,fillStyle:\"rgba(73, 245, 73, 0.2)\",strokeStyle:\"transparent\",paintMode:\"strokeAndFill\",fontFamily:\"consolas\",fontSize:40}],[ge.STYLE_GREEN_STROKE_TRANSPARENT,{id:ge.STYLE_GREEN_STROKE_TRANSPARENT,lineWidth:2,fillStyle:\"rgba(73, 245, 73, 0.2)\",strokeStyle:\"transparent\",paintMode:\"strokeAndFill\",fontFamily:\"consolas\",fontSize:40}],[ge.STYLE_ORANGE_STROKE_TRANSPARENT,{id:ge.STYLE_ORANGE_STROKE_TRANSPARENT,lineWidth:2,fillStyle:\"rgba(254, 180, 32, 0.2)\",strokeStyle:\"transparent\",paintMode:\"strokeAndFill\",fontFamily:\"consolas\",fontSize:40}]])},Ft={value:{lineWidth:2,fillStyle:\"rgba(245, 236, 73, 0.3)\",strokeStyle:\"rgba(245, 236, 73, 1)\",paintMode:\"stroke\",fontFamily:\"consolas\",fontSize:40}},\"undefined\"!=typeof document&&\"undefined\"!=typeof window&&(V.StaticCanvas.prototype.dispose=function(){return this.isRendering&&(V.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(t){t.dispose&&t.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove(\"lower-canvas\"),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute(\"width\",this.width),this.lowerCanvasEl.setAttribute(\"height\",this.height),V.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},V.Object.prototype.transparentCorners=!1,V.Object.prototype.cornerSize=20,V.Object.prototype.touchCornerSize=100,V.Object.prototype.cornerColor=\"rgb(254,142,20)\",V.Object.prototype.cornerStyle=\"circle\",V.Object.prototype.strokeUniform=!0,V.Object.prototype.hasBorders=!1,V.Canvas.prototype.containerClass=\"\",V.Canvas.prototype.getPointer=function(t,e){if(this._absolutePointer&&!e)return this._absolutePointer;if(this._pointer&&e)return this._pointer;var i,r=this.upperCanvasEl,n=V.util.getPointer(t,r),s=r.getBoundingClientRect(),o=s.width||0,a=s.height||0;o&&a||(\"top\"in s&&\"bottom\"in s&&(a=Math.abs(s.top-s.bottom)),\"right\"in s&&\"left\"in s&&(o=Math.abs(s.right-s.left))),this.calcOffset(),n.x=n.x-this._offset.left,n.y=n.y-this._offset.top,e||(n=this.restorePointerVpt(n));var h=this.getRetinaScaling();if(1!==h&&(n.x/=h,n.y/=h),0!==o&&0!==a){var l=window.getComputedStyle(r).objectFit,c=r.width,u=r.height,d=o,f=a;i={width:c/d,height:u/f};var g,m,p=c/u,v=d/f;return\"contain\"===l?p>v?(g=d,m=d/p,{x:n.x*i.width,y:(n.y-(f-m)/2)*i.width}):(g=f*p,m=f,{x:(n.x-(d-g)/2)*i.height,y:n.y*i.height}):\"cover\"===l?p>v?{x:(c-i.height*d)/2+n.x*i.height,y:n.y*i.height}:{x:n.x*i.width,y:(u-i.width*f)/2+n.y*i.width}:{x:n.x*i.width,y:n.y*i.height}}return i={width:1,height:1},{x:n.x*i.width,y:n.y*i.height}},V.Canvas.prototype._onTouchStart=function(t){var e=this.findTarget(t);!this.allowTouchScrolling&&t.cancelable&&t.preventDefault&&t.preventDefault(),e&&t.cancelable&&t.preventDefault&&t.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();var i=this.upperCanvasEl,r=this._getEventPrefix();V.util.addListener(V.document,\"touchend\",this._onTouchEnd,{passive:!1}),V.util.addListener(V.document,\"touchmove\",this._onMouseMove,{passive:!1}),V.util.removeListener(i,r+\"down\",this._onMouseDown)},V.Textbox.prototype._wrapLine=function(t,e,i,r){const n=t.match(/[\\u3040-\\u30ff\\u3400-\\u4dbf\\u4e00-\\u9fff\\uf900-\\ufaff\\uff66-\\uff9f]/g),s=!(!n||!n.length);var o=0,a=this.splitByGrapheme||s,h=[],l=[],c=a?V.util.string.graphemeSplit(t):t.split(this._wordJoiners),u=\"\",d=0,f=a?\"\":\" \",g=0,m=0,p=0,v=!0,_=this._getWidthOfCharSpacing();r=r||0;0===c.length&&c.push([]),i-=r;for(var y=0;y<c.length;y++)u=a?c[y]:V.util.string.graphemeSplit(c[y]),g=this._measureWord(u,e,d),d+=u.length,(o+=m+g-_)>i&&!v?(h.push(l),l=[],o=g,v=!0):o+=_,v||a||l.push(f),l=l.concat(u),m=a?0:this._measureWord([f],e,d),d++,v=!1,g>p&&(p=g);return y&&h.push(l),p+r>this.dynamicMinWidth&&(this.dynamicMinWidth=p-_+r),h});class me{get width(){return this.fabricCanvas.width}get height(){return this.fabricCanvas.height}set _allowMultiSelect(t){this.fabricCanvas.selection=t,this.fabricCanvas.renderAll()}get _allowMultiSelect(){return this.fabricCanvas.selection}constructor(t,e,i){if(this.mapType_StateAndStyleId=new Map,this.mode=\"viewer\",this.onSelectionChanged=null,this._arrDrwaingItem=[],this._arrFabricObject=[],this._visible=!0,t.hasOwnProperty(\"getFabricCanvas\"))this.fabricCanvas=t.getFabricCanvas();else{let e=this.fabricCanvas=new V.Canvas(t,Object.assign(i,{allowTouchScrolling:!0,selection:!1}));e.setDimensions({width:\"100%\",height:\"100%\"},{cssOnly:!0}),e.lowerCanvasEl.className=\"\",e.upperCanvasEl.className=\"\",e.on(\"selection:created\",(function(t){const e=t.selected,i=[];for(let t of e){const e=t.getDrawingItem()._drawingLayer;e&&!i.includes(e)&&i.push(e)}for(let t of i){const i=[];for(let r of e){const e=r.getDrawingItem();e._drawingLayer===t&&i.push(e)}setTimeout((()=>{t.onSelectionChanged&&t.onSelectionChanged(i,[])}),0)}})),e.on(\"before:selection:cleared\",(function(t){const e=this.getActiveObjects(),i=[];for(let t of e){const e=t.getDrawingItem()._drawingLayer;e&&!i.includes(e)&&i.push(e)}for(let t of i){const i=[];for(let r of e){const e=r.getDrawingItem();e._drawingLayer===t&&i.push(e)}setTimeout((()=>{const e=[];for(let r of i)t.hasDrawingItem(r)&&e.push(r);e.length>0&&t.onSelectionChanged&&t.onSelectionChanged([],e)}),0)}})),e.on(\"selection:updated\",(function(t){const e=t.selected,i=t.deselected,r=[];for(let t of e){const e=t.getDrawingItem()._drawingLayer;e&&!r.includes(e)&&r.push(e)}for(let t of i){const e=t.getDrawingItem()._drawingLayer;e&&!r.includes(e)&&r.push(e)}for(let t of r){const r=[],n=[];for(let i of e){const e=i.getDrawingItem();e._drawingLayer===t&&r.push(e)}for(let e of i){const i=e.getDrawingItem();i._drawingLayer===t&&n.push(i)}setTimeout((()=>{t.onSelectionChanged&&t.onSelectionChanged(r,n)}),0)}})),e.wrapperEl.style.position=\"absolute\",t.getFabricCanvas=()=>this.fabricCanvas}let r,n;switch(this.id=e,e){case me.DDN_LAYER_ID:r=ge.getDrawingStyle(ge.STYLE_BLUE_STROKE),n=ge.getDrawingStyle(ge.STYLE_BLUE_STROKE_FILL);break;case me.DBR_LAYER_ID:r=ge.getDrawingStyle(ge.STYLE_ORANGE_STROKE),n=ge.getDrawingStyle(ge.STYLE_ORANGE_STROKE_FILL);break;case me.DLR_LAYER_ID:r=ge.getDrawingStyle(ge.STYLE_GREEN_STROKE),n=ge.getDrawingStyle(ge.STYLE_GREEN_STROKE_FILL);break;default:r=ge.getDrawingStyle(ge.STYLE_YELLOW_STROKE),n=ge.getDrawingStyle(ge.STYLE_YELLOW_STROKE_FILL)}for(let t of Z.arrMediaTypes)this.mapType_StateAndStyleId.set(t,{default:r.id,selected:n.id})}getId(){return this.id}setVisible(t){if(t){for(let t of this._arrFabricObject)t.visible=!0,t.hasControls=!0;this._visible=!0}else{for(let t of this._arrFabricObject)t.visible=!1,t.hasControls=!1;this._visible=!1}this.fabricCanvas.renderAll()}isVisible(){return this._visible}_getItemCurrentStyle(t){if(t.styleId)return ge.getDrawingStyle(t.styleId);const e=ge.getDrawingStyle(t._mapState_StyleId.get(t.styleSelector));return e||null}_changeMediaTypeCurStyleInStyleSelector(t,e,i,r){const n=this.getDrawingItems((e=>e._mediaType===t));for(let t of n)t.styleSelector===e&&this._changeItemStyle(t,i,!0);r||this.fabricCanvas.renderAll()}_changeItemStyle(t,e,i){if(!t||!e)return;const r=t._getFabricObject();\"number\"==typeof t.styleId&&(e=ge.getDrawingStyle(t.styleId)),r.strokeWidth=e.lineWidth,\"fill\"===e.paintMode?(r.fill=e.fillStyle,r.stroke=e.fillStyle):\"stroke\"===e.paintMode?(r.fill=\"transparent\",r.stroke=e.strokeStyle):\"strokeAndFill\"===e.paintMode&&(r.fill=e.fillStyle,r.stroke=e.strokeStyle),r.fontFamily&&(r.fontFamily=e.fontFamily),r.fontSize&&(r.fontSize=e.fontSize),r.group||(r.dirty=!0),i||this.fabricCanvas.renderAll()}_updateGroupItem(t,e,i){if(!t||!e)return;const r=t.getChildDrawingItems();if(\"add\"===i){if(r.includes(e))return;const i=e._getFabricObject();if(this.fabricCanvas.getObjects().includes(i)){if(!this._arrFabricObject.includes(i))throw new Error(\"Existed in other drawing layers.\");e._zIndex=null}else{let i;if(e.styleId)i=ge.getDrawingStyle(e.styleId);else{const r=this.mapType_StateAndStyleId.get(e._mediaType);i=ge.getDrawingStyle(r[t.styleSelector]);const n=()=>{this._changeItemStyle(e,ge.getDrawingStyle(this.mapType_StateAndStyleId.get(e._mediaType).selected),!0)},s=()=>{this._changeItemStyle(e,ge.getDrawingStyle(this.mapType_StateAndStyleId.get(e._mediaType).default),!0)};e._on(\"selected\",n),e._on(\"deselected\",s),e._funcChangeStyleToSelected=n,e._funcChangeStyleToDefault=s}e._drawingLayer=this,e._drawingLayerId=this.id,this._changeItemStyle(e,i,!0)}t._fabricObject.addWithUpdate(e._getFabricObject())}else{if(\"remove\"!==i)return;if(!r.includes(e))return;e._zIndex=null,e._drawingLayer=null,e._drawingLayerId=null,e._off(\"selected\",e._funcChangeStyleToSelected),e._off(\"deselected\",e._funcChangeStyleToDefault),e._funcChangeStyleToSelected=null,e._funcChangeStyleToDefault=null,t._fabricObject.removeWithUpdate(e._getFabricObject())}this.fabricCanvas.renderAll()}_addDrawingItem(t,e){if(!(t instanceof Z))throw new TypeError(\"Invalid 'drawingItem'.\");if(t._drawingLayer){if(t._drawingLayer==this)return;throw new Error(\"This drawing item has existed in other layer.\")}let i=t._getFabricObject();const r=this.fabricCanvas.getObjects();let n,s;if(r.includes(i)){if(this._arrFabricObject.includes(i))return;throw new Error(\"Existed in other drawing layers.\")}if(\"group\"===t._mediaType){n=t.getChildDrawingItems();for(let t of n)if(t._drawingLayer&&t._drawingLayer!==this)throw new Error(\"The childItems of DT_Group have existed in other drawing layers.\")}if(e&&\"object\"==typeof e&&!Array.isArray(e))for(let t in e)i.set(t,e[t]);if(n){for(let t of n){const e=this.mapType_StateAndStyleId.get(t._mediaType);for(let i of Z.arrStyleSelectors)t._mapState_StyleId.set(i,e[i]);if(t.styleId)s=ge.getDrawingStyle(t.styleId);else{s=ge.getDrawingStyle(e.default);const i=()=>{this._changeItemStyle(t,ge.getDrawingStyle(this.mapType_StateAndStyleId.get(t._mediaType).selected),!0)},r=()=>{this._changeItemStyle(t,ge.getDrawingStyle(this.mapType_StateAndStyleId.get(t._mediaType).default),!0)};t._on(\"selected\",i),t._on(\"deselected\",r),t._funcChangeStyleToSelected=i,t._funcChangeStyleToDefault=r}t._drawingLayer=this,t._drawingLayerId=this.id,this._changeItemStyle(t,s,!0)}i.dirty=!0,this.fabricCanvas.renderAll()}else{const e=this.mapType_StateAndStyleId.get(t._mediaType);for(let i of Z.arrStyleSelectors)t._mapState_StyleId.set(i,e[i]);if(t.styleId)s=ge.getDrawingStyle(t.styleId);else{s=ge.getDrawingStyle(e.default);const i=()=>{this._changeItemStyle(t,ge.getDrawingStyle(this.mapType_StateAndStyleId.get(t._mediaType).selected))},r=()=>{this._changeItemStyle(t,ge.getDrawingStyle(this.mapType_StateAndStyleId.get(t._mediaType).default))};t._on(\"selected\",i),t._on(\"deselected\",r),t._funcChangeStyleToSelected=i,t._funcChangeStyleToDefault=r}this._changeItemStyle(t,s)}t._zIndex=this.id,t._drawingLayer=this,t._drawingLayerId=this.id;const o=this._arrFabricObject.length;let a=r.length;if(o)a=r.indexOf(this._arrFabricObject[o-1])+1;else for(let e=0;e<r.length;e++)if(t._zIndex<r[e].getDrawingItem()._zIndex){a=e;break}this._arrDrwaingItem.push(t),this._arrFabricObject.push(i),this._visible?i.visible=!0:i.visible=!1,this.fabricCanvas.insertAt(i,a,!1)}addDrawingItem(t){if(!t||!t.isDrawingItem)throw TypeError(\"Illegal drawing item.\");if(\"viewer\"===this.mode)t._setEditable(!1);else{if(\"editor\"!==this.mode)throw new Error(\"Illegal 'mode'.\");t._setEditable(!0)}this._addDrawingItem(t),t.updatePosition()}addDrawingItems(t){for(let e of t)this.addDrawingItem(e)}removeDrawingItem(t){if(!t||!t.isDrawingItem)throw TypeError(\"Illegal drawing item.\");if(!this.hasDrawingItem(t))return;if(t._zIndex=null,t._drawingLayer=null,t._drawingLayerId=null,\"group\"===t._mediaType){const e=t.getChildDrawingItems();for(let t of e)t._zIndex=null,t._drawingLayer=null,t._drawingLayerId=null,t._off(\"selected\",t._funcChangeStyleToSelected),t._off(\"deselected\",t._funcChangeStyleToDefault),t._funcChangeStyleToSelected=null,t._funcChangeStyleToDefault=null,t._mapState_StyleId.clear()}else t._off(\"selected\",t._funcChangeStyleToSelected),t._off(\"deselected\",t._funcChangeStyleToDefault),t._funcChangeStyleToSelected=null,t._funcChangeStyleToDefault=null,t._mapState_StyleId.clear();const e=t._getFabricObject();\"selected\"===t.styleSelector&&(e.group?e.group.removeWithUpdate(e):this.fabricCanvas._activeObject=null,t.setState(j.DIS_DEFAULT)),this.fabricCanvas.remove(e),this._arrDrwaingItem.splice(this._arrDrwaingItem.indexOf(t),1),this._arrFabricObject.splice(this._arrFabricObject.indexOf(e),1)}removeDrawingItems(t){for(let e of t)this.removeDrawingItem(e)}setDrawingItems(t){this.clearDrawingItems(),this.addDrawingItems(t)}getDrawingItems(t){return t&&\"function\"==typeof t?this._arrDrwaingItem.filter(t):Array.from(this._arrDrwaingItem)}getSelectedDrawingItems(){const t=this.fabricCanvas.getActiveObjects(),e=[];for(let i of t)this._arrFabricObject.includes(i)&&e.push(i.getDrawingItem());return e}hasDrawingItem(t){if(!t||!t.isDrawingItem)throw TypeError(\"Illegal drawing item.\");return this._arrDrwaingItem.includes(t)}clearDrawingItems(){this.removeDrawingItems(Array.from(this._arrDrwaingItem))}_setDefaultStyle(t,e,i){e?e.forEach((t=>t.toLowerCase())):e=Z.arrMediaTypes,i?i.forEach((t=>t.toLowerCase())):i=Z.arrStyleSelectors;const r=ge.getDrawingStyle(t);if(!r)throw new Error(`The 'drawingStyle' with id '${t}' doesn't exist.`);let n;for(let s of e)if(n=this.mapType_StateAndStyleId.get(s),n)for(let e of i){this._changeMediaTypeCurStyleInStyleSelector(s,e,r,!0),n[e]=t;for(let i of this._arrDrwaingItem)i._mediaType===s&&i._mapState_StyleId.set(e,t)}this.fabricCanvas.renderAll()}setDefaultStyle(t,e,i){const r=[];i&B.DIMT_RECTANGLE&&r.push(\"rect\"),i&B.DIMT_QUADRILATERAL&&r.push(\"quad\"),i&B.DIMT_TEXT&&r.push(\"text\"),i&B.DIMT_ARC&&r.push(\"arc\"),i&B.DIMT_IMAGE&&r.push(\"image\"),i&B.DIMT_POLYGON&&r.push(\"polygon\"),i&B.DIMT_LINE&&r.push(\"line\");const n=[];e&j.DIS_DEFAULT&&n.push(\"default\"),e&j.DIS_SELECTED&&n.push(\"selected\"),this._setDefaultStyle(t,r.length?r:null,n.length?n:null)}setMode(t){if(\"viewer\"===(t=t.toLowerCase())){for(let t of this._arrDrwaingItem)t._setEditable(!1);this.fabricCanvas.discardActiveObject(),this.fabricCanvas.renderAll(),this.mode=\"viewer\"}else{if(\"editor\"!==t)throw new RangeError(\"Invalid value.\");for(let t of this._arrDrwaingItem)t._setEditable(!0);this.mode=\"editor\"}this._manager._switchPointerEvent()}getMode(){return this.mode}_setDimensions(t,e){this.fabricCanvas.setDimensions(t,e)}_setObjectFit(t){if(t=t.toLowerCase(),![\"contain\",\"cover\"].includes(t))throw new Error(`Unsupported value '${t}'.`);this.fabricCanvas.lowerCanvasEl.style.objectFit=t,this.fabricCanvas.upperCanvasEl.style.objectFit=t}_getObjectFit(){return this.fabricCanvas.lowerCanvasEl.style.objectFit}renderAll(){for(let t of this._arrDrwaingItem){const e=this._getItemCurrentStyle(t);this._changeItemStyle(t,e,!0)}this.fabricCanvas.renderAll()}dispose(){this.clearDrawingItems(),1===this._manager._arrDrawingLayer.length&&(this.fabricCanvas.wrapperEl.style.pointerEvents=\"none\",this.fabricCanvas.dispose(),this._arrDrwaingItem.length=0,this._arrFabricObject.length=0)}}me.DDN_LAYER_ID=1,me.DBR_LAYER_ID=2,me.DLR_LAYER_ID=3,me.USER_DEFINED_LAYER_BASE_ID=100,me.TIP_LAYER_ID=999;class pe{constructor(){this._arrDrawingLayer=[]}createDrawingLayer(t,e){if(this.getDrawingLayer(e))throw new Error(\"Existed drawing layer id.\");const i=new me(t,e,{enableRetinaScaling:!1});return i._manager=this,this._arrDrawingLayer.push(i),this._switchPointerEvent(),i}deleteDrawingLayer(t){const e=this.getDrawingLayer(t);if(!e)return;const i=this._arrDrawingLayer;e.dispose(),i.splice(i.indexOf(e),1),this._switchPointerEvent()}clearDrawingLayers(){for(let t of this._arrDrawingLayer)t.dispose();this._arrDrawingLayer.length=0}getDrawingLayer(t){for(let e of this._arrDrawingLayer)if(e.getId()===t)return e;return null}getAllDrawingLayers(){return Array.from(this._arrDrawingLayer)}getSelectedDrawingItems(){if(!this._arrDrawingLayer.length)return;const t=this._getFabricCanvas().getActiveObjects(),e=[];for(let i of t)e.push(i.getDrawingItem());return e}setDimensions(t,e){this._arrDrawingLayer.length&&this._arrDrawingLayer[0]._setDimensions(t,e)}setObjectFit(t){for(let e of this._arrDrawingLayer)e&&e._setObjectFit(t)}getObjectFit(){return this._arrDrawingLayer.length?this._arrDrawingLayer[0]._getObjectFit():null}setVisible(t){if(!this._arrDrawingLayer.length)return;const e=this._getFabricCanvas();e.wrapperEl.style.display=t?\"block\":\"none\"}_getFabricCanvas(){return this._arrDrawingLayer.length?this._arrDrawingLayer[0].fabricCanvas:null}_switchPointerEvent(){if(this._arrDrawingLayer.length)for(let t of this._arrDrawingLayer)t.getMode()}}class ve extends At{constructor(t,e,i,r,n){super(t,{x:e,y:i,width:r,height:0},n),Pt.set(this,void 0),kt.set(this,void 0),this._fabricObject.paddingTop=15,this._fabricObject.calcTextHeight=function(){for(var t=0,e=0,i=this._textLines.length;e<i;e++)t+=this.getHeightOfLine(e);return t+=2*this.paddingTop},this._fabricObject._getTopOffset=function(){return-this.height/2+this.getHeightOfLine(0)*(1-1/this.lineHeight)/2+this.paddingTop},this.set(\"backgroundColor\",\"rgba(50, 50, 52, .8)\"),this.set(\"lineHeight\",1.3),this.set(\"textAlign\",\"center\")}setDuration(t){C(this,Pt,t,\"f\"),x(this,kt,\"f\")&&clearTimeout(x(this,kt,\"f\")),x(this,Pt,\"f\")>=0&&C(this,kt,setTimeout((()=>{this.set(\"visible\",!1),this._drawingLayer&&this._drawingLayer.renderAll()}),x(this,Pt,\"f\")),\"f\")}getDuration(){return x(this,Pt,\"f\")}}Pt=new WeakMap,kt=new WeakMap;class _e{constructor(){Rt.add(this),Bt.set(this,void 0),jt.set(this,void 0),Wt.set(this,void 0),Ut.set(this,!0),this._drawingLayerManager=new pe}createDrawingLayerBaseCvs(t,e,i=\"contain\"){if(\"number\"!=typeof t||t<=1)throw new Error(\"Invalid 'width'.\");if(\"number\"!=typeof e||e<=1)throw new Error(\"Invalid 'height'.\");if(![\"contain\",\"cover\"].includes(i))throw new Error(\"Unsupported 'objectFit'.\");const r=document.createElement(\"canvas\");return r.width==t&&r.height==e||(r.width=t,r.height=e),r.style.objectFit=i,r}_createDrawingLayer(t,e,i,r){if(!this._layerBaseCvs){let t;try{t=this.getContentDimensions()}catch(t){if(\"Invalid content dimensions.\"!==(t.message||t))throw t}e||(e=(null==t?void 0:t.width)||1280),i||(i=(null==t?void 0:t.height)||720),r||(r=(null==t?void 0:t.objectFit)||\"contain\"),this._layerBaseCvs=this.createDrawingLayerBaseCvs(e,i,r)}const n=this._layerBaseCvs,s=this._drawingLayerManager.createDrawingLayer(n,t);return this._innerComponent.getElement(\"drawing-layer\")||this._innerComponent.setElement(\"drawing-layer\",n.parentElement),s}createDrawingLayer(){let t;for(let e=me.USER_DEFINED_LAYER_BASE_ID;;e++)if(!this._drawingLayerManager.getDrawingLayer(e)&&e!==me.TIP_LAYER_ID){t=e;break}return this._createDrawingLayer(t)}deleteDrawingLayer(t){var e;this._drawingLayerManager.deleteDrawingLayer(t),this._drawingLayerManager.getAllDrawingLayers().length||(null===(e=this._innerComponent)||void 0===e||e.removeElement(\"drawing-layer\"),this._layerBaseCvs=null)}deleteUserDefinedDrawingLayer(t){if(\"number\"!=typeof t)throw new TypeError(\"Invalid id.\");if(t<me.USER_DEFINED_LAYER_BASE_ID)throw new Error(`The drawing layer with id ${t} is not defined by users.`);this.deleteDrawingLayer(t)}_clearDrawingLayers(){const t=this.getAllDrawingLayers();for(let e of t)this.deleteDrawingLayer(e.getId())}clearUserDefinedDrawingLayers(){const t=this.getAllDrawingLayers();for(let e of t){const t=e.getId();t<me.USER_DEFINED_LAYER_BASE_ID||this.deleteUserDefinedDrawingLayer(t)}}getDrawingLayer(t){if(t==me.TIP_LAYER_ID)return null;const e=this._drawingLayerManager.getDrawingLayer(t);return e||([me.DDN_LAYER_ID,me.DBR_LAYER_ID,me.DLR_LAYER_ID].includes(t)?this._createDrawingLayer(t):null)}getAllDrawingLayers(){return this._drawingLayerManager.getAllDrawingLayers().filter((t=>t.getId()>=0&&t.getId()!==me.TIP_LAYER_ID))}updateDrawingLayers(t){((t,e,i)=>{if(!(t<=1||e<=1)){if(![\"contain\",\"cover\"].includes(i))throw new Error(\"Unsupported 'objectFit'.\");this._drawingLayerManager.setDimensions({width:t,height:e},{backstoreOnly:!0}),this._drawingLayerManager.setObjectFit(i)}})(t.width,t.height,t.objectFit)}getSelectedDrawingItems(){return this._drawingLayerManager.getSelectedDrawingItems()}setTipConfig(t){if(!(J(e=t)&&rt(e.topLeftPoint)&&G(e.width))||e.width<=0||!G(e.duration)||\"coordinateBase\"in e&&![\"view\",\"image\"].includes(e.coordinateBase))throw new Error(\"Invalid tip config.\");var e;C(this,Bt,JSON.parse(JSON.stringify(t)),\"f\"),x(this,Bt,\"f\").coordinateBase||(x(this,Bt,\"f\").coordinateBase=\"view\"),C(this,Wt,t.duration,\"f\"),x(this,Rt,\"m\",Yt).call(this)}getTipConfig(){return x(this,Bt,\"f\")?x(this,Bt,\"f\"):null}setTipVisible(t){if(\"boolean\"!=typeof t)throw new TypeError(\"Invalid value.\");this._tip&&(this._tip.set(\"visible\",t),this._drawingLayerOfTip&&this._drawingLayerOfTip.renderAll()),C(this,Ut,t,\"f\")}isTipVisible(){return x(this,Ut,\"f\")}updateTipMessage(t){if(!x(this,Bt,\"f\"))throw new Error(\"Tip config is not set.\");this._tipStyleId||(this._tipStyleId=ge.createDrawingStyle({fillStyle:\"#FFFFFF\",paintMode:\"fill\",fontFamily:\"Open Sans\",fontSize:40})),this._drawingLayerOfTip||(this._drawingLayerOfTip=this._drawingLayerManager.getDrawingLayer(me.TIP_LAYER_ID)||this._createDrawingLayer(me.TIP_LAYER_ID)),this._tip?this._tip.set(\"text\",t):this._tip=x(this,Rt,\"m\",Vt).call(this,t,x(this,Bt,\"f\").topLeftPoint.x,x(this,Bt,\"f\").topLeftPoint.y,x(this,Bt,\"f\").width,x(this,Bt,\"f\").coordinateBase,this._tipStyleId),x(this,Rt,\"m\",Gt).call(this,this._tip,this._drawingLayerOfTip),this._tip.set(\"visible\",x(this,Ut,\"f\")),this._drawingLayerOfTip&&this._drawingLayerOfTip.renderAll(),x(this,jt,\"f\")&&clearTimeout(x(this,jt,\"f\")),x(this,Wt,\"f\")>=0&&C(this,jt,setTimeout((()=>{x(this,Rt,\"m\",Nt).call(this)}),x(this,Wt,\"f\")),\"f\")}}Bt=new WeakMap,jt=new WeakMap,Wt=new WeakMap,Ut=new WeakMap,Rt=new WeakSet,Vt=function(t,e,i,r,n,s){const o=new ve(t,e,i,r,s);return o.coordinateBase=n,o},Gt=function(t,e){e.hasDrawingItem(t)||e.addDrawingItems([t])},Nt=function(){this._tip&&this._drawingLayerOfTip.removeDrawingItems([this._tip])},Yt=function(){if(!this._tip)return;const t=x(this,Bt,\"f\");this._tip.coordinateBase=t.coordinateBase,this._tip.setTextRect({x:t.topLeftPoint.x,y:t.topLeftPoint.y,width:t.width,height:0}),this._tip.set(\"width\",this._tip.get(\"width\")),this._tip._drawingLayer&&this._tip._drawingLayer.renderAll()};class ye extends HTMLElement{constructor(){super(),Ht.set(this,void 0);const t=new DocumentFragment,e=document.createElement(\"div\");e.setAttribute(\"class\",\"wrapper\"),t.appendChild(e),C(this,Ht,e,\"f\");const i=document.createElement(\"slot\");i.setAttribute(\"name\",\"single-frame-input-container\"),e.append(i);const r=document.createElement(\"slot\");r.setAttribute(\"name\",\"content\"),e.append(r);const n=document.createElement(\"slot\");n.setAttribute(\"name\",\"drawing-layer\"),e.append(n);const s=document.createElement(\"style\");s.textContent='\\n.wrapper {\\n  position: relative;\\n  width: 100%;\\n  height: 100%;\\n}\\n::slotted(canvas[slot=\"content\"]) {\\n  object-fit: contain;\\n  pointer-events: none;\\n}\\n::slotted(div[slot=\"single-frame-input-container\"]) {\\n  width: 1px;\\n  height: 1px;\\n  overflow: hidden;\\n  pointer-events: none;\\n}\\n::slotted(*) {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n  width: 100%;\\n  height: 100%;\\n}\\n    ',t.appendChild(s),this.attachShadow({mode:\"open\"}).appendChild(t)}getWrapper(){return x(this,Ht,\"f\")}setElement(t,e){if(!(e instanceof HTMLElement))throw new TypeError(\"Invalid 'el'.\");if(![\"content\",\"single-frame-input-container\",\"drawing-layer\"].includes(t))throw new TypeError(\"Invalid 'slot'.\");this.removeElement(t),e.setAttribute(\"slot\",t),this.appendChild(e)}getElement(t){if(![\"content\",\"single-frame-input-container\",\"drawing-layer\"].includes(t))throw new TypeError(\"Invalid 'slot'.\");return this.querySelector(`[slot=\"${t}\"]`)}removeElement(t){var e;if(![\"content\",\"single-frame-input-container\",\"drawing-layer\"].includes(t))throw new TypeError(\"Invalid 'slot'.\");null===(e=this.querySelectorAll(`[slot=\"${t}\"]`))||void 0===e||e.forEach((t=>t.remove()))}}Ht=new WeakMap,customElements.get(\"dce-component\")||customElements.define(\"dce-component\",ye);class we extends _e{static get engineResourcePath(){return (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.handleEngineResourcePaths)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule.engineResourcePaths,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths).dce}static set defaultUIElementURL(t){we._defaultUIElementURL=t}static get defaultUIElementURL(){var t;return null===(t=we._defaultUIElementURL)||void 0===t?void 0:t.replace(\"@engineResourcePath/\",we.engineResourcePath)}static async createInstance(t){const e=new we;return\"string\"==typeof t&&(t=t.replace(\"@engineResourcePath/\",we.engineResourcePath)),await e.setUIElement(t||we.defaultUIElementURL),e}static _transformCoordinates(t,e,i,r,n,s,o){const a=s/r,h=o/n;t.x=Math.round(t.x/a+e),t.y=Math.round(t.y/h+i)}set _singleFrameMode(t){if(![\"disabled\",\"image\",\"camera\"].includes(t))throw new Error(\"Invalid value.\");if(t!==x(this,ee,\"f\")){if(C(this,ee,t,\"f\"),x(this,Xt,\"m\",ne).call(this))C(this,Zt,null,\"f\"),this._videoContainer=null,this._innerComponent.removeElement(\"content\"),this._innerComponent&&(this._innerComponent.addEventListener(\"click\",this._clickIptSingleFrameMode),this._innerComponent.setAttribute(\"title\",\"Take a photo\")),this._bgCamera&&(this._bgCamera.style.display=\"block\");else if(this._innerComponent&&(this._innerComponent.removeEventListener(\"click\",this._clickIptSingleFrameMode),this._innerComponent.removeAttribute(\"title\")),this._bgCamera&&(this._bgCamera.style.display=\"none\"),!x(this,Zt,\"f\")){const t=document.createElement(\"video\");t.style.position=\"absolute\",t.style.left=\"0\",t.style.top=\"0\",t.style.width=\"100%\",t.style.height=\"100%\",t.style.objectFit=this.getVideoFit(),t.setAttribute(\"autoplay\",\"true\"),t.setAttribute(\"playsinline\",\"true\"),t.setAttribute(\"muted\",\"true\"),[\"iPhone\",\"iPad\",\"Mac\"].includes(A.OS)&&t.setAttribute(\"poster\",\"data:image/gif;base64,R0lGODlhAQABAIEAAAAAAAAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAgEAAEEBAA7\"),C(this,Zt,t,\"f\");const e=document.createElement(\"div\");e.append(t),e.style.overflow=\"hidden\",this._videoContainer=e,this._innerComponent.setElement(\"content\",e)}x(this,Xt,\"m\",ne).call(this)||this._hideDefaultSelection?(this._selCam&&(this._selCam.style.display=\"none\"),this._selRsl&&(this._selRsl.style.display=\"none\"),this._selMinLtr&&(this._selMinLtr.style.display=\"none\")):(this._selCam&&(this._selCam.style.display=\"block\"),this._selRsl&&(this._selRsl.style.display=\"block\"),this._selMinLtr&&(this._selMinLtr.style.display=\"block\"),this._stopLoading())}}get _singleFrameMode(){return x(this,ee,\"f\")}get disposed(){return x(this,re,\"f\")}constructor(){super(),Xt.add(this),zt.set(this,void 0),qt.set(this,void 0),Kt.set(this,void 0),this.containerClassName=\"dce-video-container\",Zt.set(this,void 0),this.videoFit=\"contain\",this._hideDefaultSelection=!1,this._divScanArea=null,this._divScanLight=null,this._bgLoading=null,this._selCam=null,this._bgCamera=null,this._selRsl=null,this._optGotRsl=null,this._btnClose=null,this._selMinLtr=null,this._optGotMinLtr=null,Jt.set(this,null),this.regionMaskFillStyle=\"rgba(0,0,0,0.5)\",this.regionMaskStrokeStyle=\"rgb(254,142,20)\",this.regionMaskLineWidth=6,Qt.set(this,!1),$t.set(this,!1),te.set(this,{width:0,height:0}),this._updateLayersTimeout=500,this._videoResizeListener=()=>{x(this,Xt,\"m\",le).call(this),this._updateLayersTimeoutId&&clearTimeout(this._updateLayersTimeoutId),this._updateLayersTimeoutId=setTimeout((()=>{this.disposed||(this.eventHandler.fire(\"videoEl:resized\",null,{async:!1}),this.eventHandler.fire(\"content:updated\",null,{async:!1}),this.isScanLaserVisible()&&x(this,Xt,\"m\",he).call(this))}),this._updateLayersTimeout)},this._windowResizeListener=()=>{we._onLog&&we._onLog(\"window resize event triggered.\"),x(this,te,\"f\").width===document.documentElement.clientWidth&&x(this,te,\"f\").height===document.documentElement.clientHeight||(x(this,te,\"f\").width=document.documentElement.clientWidth,x(this,te,\"f\").height=document.documentElement.clientHeight,this._videoResizeListener())},ee.set(this,\"disabled\"),this._clickIptSingleFrameMode=()=>{if(!x(this,Xt,\"m\",ne).call(this))return;let t;if(this._singleFrameInputContainer)t=this._singleFrameInputContainer.firstElementChild;else{t=document.createElement(\"input\"),t.setAttribute(\"type\",\"file\"),\"camera\"===this._singleFrameMode?(t.setAttribute(\"capture\",\"\"),t.setAttribute(\"accept\",\"image/*\")):\"image\"===this._singleFrameMode&&(t.removeAttribute(\"capture\"),t.setAttribute(\"accept\",\".jpg,.jpeg,.icon,.gif,.svg,.webp,.png,.bmp\")),t.addEventListener(\"change\",(async()=>{const e=t.files[0];t.value=\"\";{const t=async t=>{let e=null,i=null;if(\"undefined\"!=typeof createImageBitmap)try{if(e=await createImageBitmap(t),e)return e}catch(t){}var r;return e||(i=await(r=t,new Promise(((t,e)=>{let i=URL.createObjectURL(r),n=new Image;n.src=i,n.onload=()=>{URL.revokeObjectURL(n.src),t(n)},n.onerror=t=>{e(new Error(\"Can't convert blob to image : \"+(t instanceof Event?t.type:t)))}})))),i},i=(t,e,i,r)=>{t.width==i&&t.height==r||(t.width=i,t.height=r);const n=t.getContext(\"2d\");n.clearRect(0,0,t.width,t.height),n.drawImage(e,0,0)},r=await t(e),n=r instanceof HTMLImageElement?r.naturalWidth:r.width,s=r instanceof HTMLImageElement?r.naturalHeight:r.height;let o=this._cvsSingleFrameMode;const a=null==o?void 0:o.width,h=null==o?void 0:o.height;o||(o=document.createElement(\"canvas\"),this._cvsSingleFrameMode=o),i(o,r,n,s),this._innerComponent.setElement(\"content\",o),a===o.width&&h===o.height||this.eventHandler.fire(\"content:updated\",null,{async:!1})}this._onSingleFrameAcquired&&setTimeout((()=>{this._onSingleFrameAcquired(this._cvsSingleFrameMode)}),0)})),t.style.position=\"absolute\",t.style.top=\"-9999px\",t.style.backgroundColor=\"transparent\",t.style.color=\"transparent\";const e=document.createElement(\"div\");e.append(t),this._innerComponent.setElement(\"single-frame-input-container\",e),this._singleFrameInputContainer=e}null==t||t.click()},ie.set(this,[]),this._capturedResultReceiver={onCapturedResultReceived:(t,e)=>{var i,r,n,s;if(this.disposed)return;if(this.clearAllInnerDrawingItems(),!t)return;const o=t.originalImageTag;if(!o)return;const a=t.items;if(!(null==a?void 0:a.length))return;const h=(null===(i=o.cropRegion)||void 0===i?void 0:i.left)||0,l=(null===(r=o.cropRegion)||void 0===r?void 0:r.top)||0,c=(null===(n=o.cropRegion)||void 0===n?void 0:n.right)?o.cropRegion.right-h:o.originalWidth,u=(null===(s=o.cropRegion)||void 0===s?void 0:s.bottom)?o.cropRegion.bottom-l:o.originalHeight,d=o.currentWidth,g=o.currentHeight,m=(t,e,i,r,n,s,o,a,h=[],l)=>{e.forEach((t=>we._transformCoordinates(t,i,r,n,s,o,a)));const c=new de({points:[{x:e[0].x,y:e[0].y},{x:e[1].x,y:e[1].y},{x:e[2].x,y:e[2].y},{x:e[3].x,y:e[3].y}]},l);for(let t of h)c.addNote(t);t.addDrawingItems([c]),x(this,ie,\"f\").push(c)};let p,v;for(let t of a)switch(t.type){case dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_ORIGINAL_IMAGE:break;case dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_BARCODE:p=this.getDrawingLayer(me.DBR_LAYER_ID),v=[{name:\"format\",content:t.formatString},{name:\"text\",content:t.text}],(null==e?void 0:e.isBarcodeVerifyOpen)?t.verified?m(p,t.location.points,h,l,c,u,d,g,v):m(p,t.location.points,h,l,c,u,d,g,v,ge.STYLE_ORANGE_STROKE_TRANSPARENT):m(p,t.location.points,h,l,c,u,d,g,v);break;case dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_TEXT_LINE:p=this.getDrawingLayer(me.DLR_LAYER_ID),v=[{name:\"text\",content:t.text}],e.isLabelVerifyOpen?t.verified?m(p,t.location.points,h,l,c,u,d,g,v):m(p,t.location.points,h,l,c,u,d,g,v,ge.STYLE_GREEN_STROKE_TRANSPARENT):m(p,t.location.points,h,l,c,u,d,g,v);break;case dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_DETECTED_QUAD:p=this.getDrawingLayer(me.DDN_LAYER_ID),(null==e?void 0:e.isDetectVerifyOpen)?t.verified?m(p,t.location.points,h,l,c,u,d,g,[]):m(p,t.location.points,h,l,c,u,d,g,[],ge.STYLE_BLUE_STROKE_TRANSPARENT):m(p,t.location.points,h,l,c,u,d,g,[]);break;case dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_NORMALIZED_IMAGE:p=this.getDrawingLayer(me.DDN_LAYER_ID),(null==e?void 0:e.isNormalizeVerifyOpen)?t.verified?m(p,t.location.points,h,l,c,u,d,g,[]):m(p,t.location.points,h,l,c,u,d,g,[],ge.STYLE_BLUE_STROKE_TRANSPARENT):m(p,t.location.points,h,l,c,u,d,g,[]);break;case dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_PARSED_RESULT:break;default:throw new Error(\"Illegal item type.\")}}},re.set(this,!1),this.eventHandler=new ct,this.eventHandler.on(\"content:updated\",(()=>{x(this,zt,\"f\")&&clearTimeout(x(this,zt,\"f\")),C(this,zt,setTimeout((()=>{if(this.disposed)return;let t;this._updateVideoContainer();try{t=this.getContentDimensions()}catch(t){if(\"Invalid content dimensions.\"===(t.message||t))return;throw t}this.updateDrawingLayers(t),this.updateConvertedRegion(t)}),0),\"f\")})),this.eventHandler.on(\"videoEl:resized\",(()=>{x(this,qt,\"f\")&&clearTimeout(x(this,qt,\"f\")),C(this,qt,setTimeout((()=>{this.disposed||this._updateVideoContainer()}),0),\"f\")}))}_setUIElement(t){this.UIElement=t,this._unbindUI(),this._bindUI()}async setUIElement(t){let e;if(\"string\"==typeof t){let i=await gt(t);e=document.createElement(\"div\"),Object.assign(e.style,{width:\"100%\",height:\"100%\"}),e.attachShadow({mode:\"open\"}).appendChild(i.cloneNode(!0))}else e=t;this._setUIElement(e)}getUIElement(){return this.UIElement}_bindUI(){var t,e;if(!this.UIElement)throw new Error(\"Need to set 'UIElement'.\");if(this._innerComponent)return;let i=this.UIElement;i=i.shadowRoot||i;let r=(null===(t=i.classList)||void 0===t?void 0:t.contains(this.containerClassName))?i:i.querySelector(`.${this.containerClassName}`);if(!r)throw Error(`Can not find the element with class '${this.containerClassName}'.`);if(this._innerComponent=new ye,r.appendChild(this._innerComponent),x(this,Xt,\"m\",ne).call(this));else{const t=document.createElement(\"video\");Object.assign(t.style,{position:\"absolute\",left:\"0\",top:\"0\",width:\"100%\",height:\"100%\",objectFit:this.getVideoFit()}),t.setAttribute(\"autoplay\",\"true\"),t.setAttribute(\"playsinline\",\"true\"),t.setAttribute(\"muted\",\"true\"),[\"iPhone\",\"iPad\",\"Mac\"].includes(A.OS)&&t.setAttribute(\"poster\",\"data:image/gif;base64,R0lGODlhAQABAIEAAAAAAAAAAAAAAAAAACH5BAEAAAAALAAAAAABAAEAAAgEAAEEBAA7\"),C(this,Zt,t,\"f\");const e=document.createElement(\"div\");e.append(t),e.style.overflow=\"hidden\",this._videoContainer=e,this._innerComponent.setElement(\"content\",e)}if(this._selRsl=i.querySelector(\".dce-sel-resolution\"),this._selMinLtr=i.querySelector(\".dlr-sel-minletter\"),this._divScanArea=i.querySelector(\".dce-scanarea\"),this._divScanLight=i.querySelector(\".dce-scanlight\"),this._bgLoading=i.querySelector(\".dce-bg-loading\"),this._bgCamera=i.querySelector(\".dce-bg-camera\"),this._selCam=i.querySelector(\".dce-sel-camera\"),this._optGotRsl=i.querySelector(\".dce-opt-gotResolution\"),this._btnClose=i.querySelector(\".dce-btn-close\"),this._optGotMinLtr=i.querySelector(\".dlr-opt-gotMinLtr\"),this._selRsl&&(this._hideDefaultSelection||x(this,Xt,\"m\",ne).call(this)||this._selRsl.options.length||(this._selRsl.innerHTML=['<option class=\"dce-opt-gotResolution\" value=\"got\"></option>','<option data-width=\"1920\" data-height=\"1080\">ask 1920x1080</option>','<option data-width=\"1280\" data-height=\"720\">ask 1280x720</option>','<option data-width=\"640\" data-height=\"480\">ask 640x480</option>'].join(\"\"),this._optGotRsl=this._selRsl.options[0])),this._selMinLtr&&(this._hideDefaultSelection||x(this,Xt,\"m\",ne).call(this)||this._selMinLtr.options.length||(this._selMinLtr.innerHTML=['<option class=\"dlr-opt-gotMinLtr\" value=\"got\"></option>','<option value=\"0\" selected>any letter</option>','<option value=\"3\">3+ letters</option>','<option value=\"5\">5+ letters</option>','<option value=\"8\">8+ letters</option>','<option value=\"12\">12+ letters</option>','<option value=\"17\">17+ letters</option>','<option value=\"30\">30+ letters</option>','<option value=\"50\">50+ letters</option>','<option value=\"80\">80+ letters</option>','<option value=\"120\">120+ letters</option>'].join(\"\"),this._optGotMinLtr=this._selMinLtr.options[0])),this.isScanLaserVisible()||x(this,Xt,\"m\",le).call(this),x(this,Xt,\"m\",ne).call(this)&&(this._innerComponent&&(this._innerComponent.addEventListener(\"click\",this._clickIptSingleFrameMode),this._innerComponent.setAttribute(\"title\",\"Take a photo\")),this._bgCamera&&(this._bgCamera.style.display=\"block\")),x(this,Xt,\"m\",ne).call(this)||this._hideDefaultSelection?(this._selCam&&(this._selCam.style.display=\"none\"),this._selRsl&&(this._selRsl.style.display=\"none\"),this._selMinLtr&&(this._selMinLtr.style.display=\"none\")):(this._selCam&&(this._selCam.style.display=\"block\"),this._selRsl&&(this._selRsl.style.display=\"block\"),this._selMinLtr&&(this._selMinLtr.style.display=\"block\"),this._stopLoading()),window.ResizeObserver){this._resizeObserver||(this._resizeObserver=new ResizeObserver((t=>{var e;we._onLog&&we._onLog(\"resize observer triggered.\");for(let i of t)i.target===(null===(e=this._innerComponent)||void 0===e?void 0:e.getWrapper())&&this._videoResizeListener()})));const t=null===(e=this._innerComponent)||void 0===e?void 0:e.getWrapper();t&&this._resizeObserver.observe(t)}x(this,te,\"f\").width=document.documentElement.clientWidth,x(this,te,\"f\").height=document.documentElement.clientHeight,window.addEventListener(\"resize\",this._windowResizeListener)}_unbindUI(){var t,e,i,r;x(this,Xt,\"m\",ne).call(this)?(this._innerComponent&&(this._innerComponent.removeEventListener(\"click\",this._clickIptSingleFrameMode),this._innerComponent.removeAttribute(\"title\")),this._bgCamera&&(this._bgCamera.style.display=\"none\")):this._stopLoading(),x(this,Xt,\"m\",le).call(this),null===(t=this._drawingLayerManager)||void 0===t||t.clearDrawingLayers(),null===(e=this._innerComponent)||void 0===e||e.removeElement(\"drawing-layer\"),this._layerBaseCvs=null,this._drawingLayerOfMask=null,this._drawingLayerOfTip=null,null===(i=this._innerComponent)||void 0===i||i.remove(),this._innerComponent=null,C(this,Zt,null,\"f\"),null===(r=this._videoContainer)||void 0===r||r.remove(),this._videoContainer=null,this._selCam=null,this._selRsl=null,this._optGotRsl=null,this._btnClose=null,this._selMinLtr=null,this._optGotMinLtr=null,this._divScanArea=null,this._divScanLight=null,this._singleFrameInputContainer&&(this._singleFrameInputContainer.remove(),this._singleFrameInputContainer=null),window.ResizeObserver&&this._resizeObserver&&this._resizeObserver.disconnect(),window.removeEventListener(\"resize\",this._windowResizeListener)}_startLoading(){this._bgLoading&&(this._bgLoading.style.display=\"\",this._bgLoading.style.animationPlayState=\"\")}_stopLoading(){this._bgLoading&&(this._bgLoading.style.display=\"none\",this._bgLoading.style.animationPlayState=\"paused\")}_renderCamerasInfo(t,e){if(this._selCam){let i;this._selCam.textContent=\"\";for(let r of e){const e=document.createElement(\"option\");e.value=r.deviceId,e.innerText=r.label,this._selCam.append(e),r.deviceId&&t&&t.deviceId==r.deviceId&&(i=e)}this._selCam.value=i?i.value:\"\"}let i=this.UIElement;if(i=i.shadowRoot||i,i.querySelector(\".dce-macro-use-mobile-native-like-ui\")){let t=i.querySelector(\".dce-mn-cameras\");if(t){t.textContent=\"\";for(let i of e){const e=document.createElement(\"div\");e.classList.add(\"dce-mn-camera-option\"),e.setAttribute(\"data-davice-id\",i.deviceId),e.textContent=i.label,t.append(e)}}}}_renderResolutionInfo(t){this._optGotRsl&&(this._optGotRsl.setAttribute(\"data-width\",t.width),this._optGotRsl.setAttribute(\"data-height\",t.height),this._optGotRsl.innerText=\"got \"+t.width+\"x\"+t.height,this._selRsl&&this._optGotRsl.parentNode==this._selRsl&&(this._selRsl.value=\"got\"));{let e=this.UIElement;e=(null==e?void 0:e.shadowRoot)||e;let i=null==e?void 0:e.querySelector(\".dce-mn-resolution-box\");if(i){let e=\"\";if(t&&t.width&&t.height){let i=Math.max(t.width,t.height),r=Math.min(t.width,t.height);e=r<=1080?r+\"P\":i<3e3?\"2K\":Math.round(i/1e3)+\"K\"}i.textContent=e}}}getVideoElement(){return x(this,Zt,\"f\")}isVideoLoaded(){return!(!x(this,Zt,\"f\")||!this.cameraEnhancer)&&this.cameraEnhancer.isOpen()}setVideoFit(t){if(t=t.toLowerCase(),![\"contain\",\"cover\"].includes(t))throw new Error(`Unsupported value '${t}'.`);if(this.videoFit=t,!x(this,Zt,\"f\"))return;if(x(this,Zt,\"f\").style.objectFit=t,x(this,Xt,\"m\",ne).call(this))return;let e;this._updateVideoContainer();try{e=this.getContentDimensions()}catch(t){if(\"Invalid content dimensions.\"===(t.message||t))return;throw t}x(this,Xt,\"m\",ce).call(this,e,this.getConvertedRegion()),this.updateDrawingLayers(e)}getVideoFit(){return this.videoFit}getContentDimensions(){var t,e,i,r;let n,s,o;if(x(this,Xt,\"m\",ne).call(this)?(n=null===(i=this._cvsSingleFrameMode)||void 0===i?void 0:i.width,s=null===(r=this._cvsSingleFrameMode)||void 0===r?void 0:r.height,o=\"contain\"):(n=null===(t=x(this,Zt,\"f\"))||void 0===t?void 0:t.videoWidth,s=null===(e=x(this,Zt,\"f\"))||void 0===e?void 0:e.videoHeight,o=this.getVideoFit()),!n||!s)throw new Error(\"Invalid content dimensions.\");return{width:n,height:s,objectFit:o}}updateConvertedRegion(t){const e=at.convert(this.scanRegion,t.width,t.height);C(this,Jt,e,\"f\"),x(this,Kt,\"f\")&&clearTimeout(x(this,Kt,\"f\")),C(this,Kt,setTimeout((()=>{let t;try{t=this.getContentDimensions()}catch(t){if(\"Invalid content dimensions.\"===(t.message||t))return;throw t}x(this,Xt,\"m\",se).call(this,t,e),x(this,Xt,\"m\",ce).call(this,t,e)}),0),\"f\")}getConvertedRegion(){return x(this,Jt,\"f\")}setScanRegion(t){if(null!=t&&!tt(t)&&!st(t))throw TypeError(\"Invalid 'region'.\");let e;this.scanRegion=t?JSON.parse(JSON.stringify(t)):null;try{e=this.getContentDimensions()}catch(t){if(\"Invalid content dimensions.\"===(t.message||t))return;throw t}this.updateConvertedRegion(e)}getScanRegion(){return JSON.parse(JSON.stringify(this.scanRegion))}getVisibleRegionOfVideo(t){if(!this.isVideoLoaded())throw new Error(\"The video is not loaded.\");const e=x(this,Zt,\"f\").videoWidth,i=x(this,Zt,\"f\").videoHeight,r=this.getVideoFit(),{width:n,height:s}=this._innerComponent.getBoundingClientRect();if(n<=0||s<=0)throw new Error(\"Unable to get video dimensions. Video may not be rendered on the page.\");let o;const a={x:0,y:0,width:e,height:i,isMeasuredInPercentage:!1};if(\"cover\"===r&&(n/s<e/i?(o=s/i,a.x=Math.floor((e-n/o)/2),a.y=0,a.width=Math.ceil(n/o),a.height=i):(o=n/e,a.x=0,a.y=Math.floor((i-s/o)/2),a.width=e,a.height=Math.ceil(s/o))),null==t?void 0:t.inPixels)return a;const h=a;return h.x=Math.ceil(h.x/i*100),h.y=Math.ceil(h.y/e*100),h.width=Math.floor(h.width/e*100),h.height=Math.floor(h.height/i*100),h.isMeasuredInPercentage=!0,a}setScanRegionMask(t,e,i,r){this._drawingLayerOfMask||(this._drawingLayerOfMask=this._createDrawingLayer(-2),this.isScanRegionMaskVisible()||x(this,Xt,\"m\",ae).call(this)),this.clearScanRegionMask(),this._maskBackRectStyleId||(this._maskBackRectStyleId=ge.createDrawingStyle({paintMode:\"fill\",fillStyle:this.regionMaskFillStyle,lineWidth:0})),this._maskCenterRectStyleId||(this._maskCenterRectStyleId=ge.createDrawingStyle({paintMode:\"stroke\",strokeStyle:this.regionMaskStrokeStyle,lineWidth:this.regionMaskLineWidth}));const n=this._drawingLayerOfMask.width,s=this._drawingLayerOfMask.height,o=new wt({x:0,y:0,width:n,height:s},this._maskBackRectStyleId),a=new wt({x:-n/2,y:-s/2+e,width:t,height:r}),h=new wt({x:-n/2+t+i,y:-s/2+e,width:n-t-i<0?0:n-t-i,height:r}),l=new wt({x:-n/2,y:-s/2,width:n,height:e}),c=new wt({x:-n/2,y:-s/2+e+r,width:n,height:s-e-r<0?0:s-e-r});a.set(\"strokeWidth\",0),h.set(\"strokeWidth\",0),l.set(\"strokeWidth\",0),c.set(\"strokeWidth\",0);const u=new fe([a,h,l,c])._getFabricObject();o.set(\"clipPath\",u);const d=new wt({x:t,y:e,width:i,height:r},this._maskCenterRectStyleId);this._drawingLayerOfMask.addDrawingItems([o,d])}clearScanRegionMask(){this._drawingLayerOfMask&&this._drawingLayerOfMask.clearDrawingItems()}deleteScanRegionMask(){this._drawingLayerOfMask&&this.deleteDrawingLayer(this._drawingLayerOfMask.getId())}_setScanRegionMaskVisible(t){C(this,Qt,t,\"f\"),t?x(this,Xt,\"m\",oe).call(this):x(this,Xt,\"m\",ae).call(this)}setScanRegionMaskVisible(t){this._setScanRegionMaskVisible(t),this._userSetMaskVisible=t}isScanRegionMaskVisible(){return x(this,Qt,\"f\")}setScanRegionMaskStyle(t){if(!t)return;let e;t.fillStyle&&(this.regionMaskFillStyle=t.fillStyle),t.strokeStyle&&(this.regionMaskStrokeStyle=t.strokeStyle),t.lineWidth&&(this.regionMaskLineWidth=t.lineWidth),this._maskBackRectStyleId&&ge.updateDrawingStyle(this._maskBackRectStyleId,{fillStyle:this.regionMaskFillStyle}),this._maskCenterRectStyleId&&ge.updateDrawingStyle(this._maskCenterRectStyleId,{strokeStyle:this.regionMaskStrokeStyle,lineWidth:this.regionMaskLineWidth});try{e=this.getContentDimensions()}catch(t){if(\"Invalid content dimensions.\"===(t.message||t))return;throw t}x(this,Xt,\"m\",se).call(this,e,this.getConvertedRegion())}getScanRegionMaskStyle(){return{fillStyle:this.regionMaskFillStyle,strokeStyle:this.regionMaskStrokeStyle,lineWidth:this.regionMaskLineWidth}}_setScanLaserVisible(t){C(this,$t,t,\"f\"),t?x(this,Xt,\"m\",he).call(this):x(this,Xt,\"m\",le).call(this)}setScanLaserVisible(t){this._setScanLaserVisible(t),this._userSetLaserVisible=t}isScanLaserVisible(){return x(this,$t,\"f\")}_updateVideoContainer(){if(!x(this,Zt,\"f\"))return;if(x(this,Xt,\"m\",ne).call(this))return;let t=1;const e=x(this,Zt,\"f\").style.transform.match(/scale\\((.+)\\)/);e&&(t=parseFloat(e[1]));const i=this._videoContainer;if(\"contain\"===this.videoFit&&t>1){const t=x(this,Zt,\"f\").videoWidth,e=x(this,Zt,\"f\").videoHeight,{width:r,height:n}=this._innerComponent.getBoundingClientRect(),s=t/e;if(r/n<s){let t=r/s;i.style.left=\"0\",i.style.top=(n-t)/2/n*100+\"%\",i.style.width=\"100%\",i.style.height=t/n*100+\"%\"}else{let t=n*s;i.style.left=(r-t)/2/r*100+\"%\",i.style.top=\"0\",i.style.width=t/r*100+\"%\",i.style.height=\"100%\"}}else i.style.left=\"0\",i.style.top=\"0\",i.style.width=\"100%\",i.style.height=\"100%\"}updateLayers(){let t;this._updateVideoContainer();try{t=this.getContentDimensions()}catch(t){if(\"Invalid content dimensions.\"===(t.message||t))return;throw t}const e=this.getConvertedRegion();x(this,Xt,\"m\",ce).call(this,t,e),this.updateDrawingLayers(t),x(this,Xt,\"m\",se).call(this,t,e)}clearAllInnerDrawingItems(){x(this,ie,\"f\").forEach((t=>t.remove())),x(this,ie,\"f\").length=0}dispose(){this._unbindUI(),this.__proto__=null;for(let t in this)delete this[t];Object.defineProperty(this,\"disposed\",{value:!0})}}function be(t,e,i,r){if(\"a\"===i&&!r)throw new TypeError(\"Private accessor was defined without a getter\");if(\"function\"==typeof e?t!==e||!r:!e.has(t))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return\"m\"===i?r:\"a\"===i?r.call(t):r?r.value:e.get(t)}function xe(t,e,i,r,n){if(\"m\"===r)throw new TypeError(\"Private method is not writable\");if(\"a\"===r&&!n)throw new TypeError(\"Private accessor was defined without a setter\");if(\"function\"==typeof e?t!==e||!n:!e.has(t))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return\"a\"===r?n.call(t,i):n?n.value=i:e.set(t,i),i}zt=new WeakMap,qt=new WeakMap,Kt=new WeakMap,Zt=new WeakMap,Jt=new WeakMap,Qt=new WeakMap,$t=new WeakMap,te=new WeakMap,ee=new WeakMap,ie=new WeakMap,re=new WeakMap,Xt=new WeakSet,ne=function(){return\"disabled\"!==this._singleFrameMode},se=function(t,e){e&&(0!==e.x||0!==e.y||e.width!==t.width||e.height!==t.height)?this.setScanRegionMask(e.x,e.y,e.width,e.height):this.clearScanRegionMask()},oe=function(){this._drawingLayerOfMask&&this._drawingLayerOfMask.setVisible(!0)},ae=function(){this._drawingLayerOfMask&&this._drawingLayerOfMask.setVisible(!1)},he=function(){this._divScanLight&&\"none\"==this._divScanLight.style.display&&(this._divScanLight.style.display=\"block\")},le=function(){this._divScanLight&&(this._divScanLight.style.display=\"none\")},ce=function(t,e){if(!this._divScanArea)return;if(!this._innerComponent.getElement(\"content\"))return;const{width:i,height:r,objectFit:n}=t;e||(e={x:0,y:0,width:i,height:r});const{width:s,height:o}=this._innerComponent.getBoundingClientRect();if(s<=0||o<=0)return;const a=s/o,h=i/r;let l,c,u,d,f=1;if(\"contain\"===n)a<h?(f=s/i,l=0,c=(o-r*f)/2):(f=o/r,l=(s-i*f)/2,c=0),l+=e.x*f,c+=e.y*f,u=e.width*f,d=e.height*f;else if(\"cover\"===n)if(a<h){f=o/r,l=e.x*f-(i*f-s)/2,l=Math.max(l,0),l=Math.min(l,s),c=e.y*f;let t=(e.x+e.width)*f-(i*f-s)/2;t=Math.max(t,0),t=Math.min(t,s),u=t-l,d=e.height*f}else{f=s/i,l=e.x*f,c=e.y*f-(r*f-o)/2,c=Math.max(c,0),c=Math.min(c,o);let t=(e.y+e.height)*f-(r*f-o)/2;t=Math.max(t,0),t=Math.min(t,o),u=e.width*f,d=t-c}else l=0,c=0,u=0,d=0;this._divScanArea.style.left=l+\"px\",this._divScanArea.style.top=c+\"px\",this._divScanArea.style.width=u+\"px\",this._divScanArea.style.height=d+\"px\"},we._defaultUIElementURL=\"@engineResourcePath/dce.ui.html\",\"function\"==typeof SuppressedError&&SuppressedError;const Ce=\"undefined\"==typeof self;let Se,Te,Ee,Oe,Ae;function Ie(t,e,i,r){if(\"a\"===i&&!r)throw new TypeError(\"Private accessor was defined without a getter\");if(\"function\"==typeof e?t!==e||!r:!e.has(t))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return\"m\"===i?r:\"a\"===i?r.call(t):r?r.value:e.get(t)}function Le(t,e,i,r,n){if(\"m\"===r)throw new TypeError(\"Private method is not writable\");if(\"a\"===r&&!n)throw new TypeError(\"Private accessor was defined without a setter\");if(\"function\"==typeof e?t!==e||!n:!e.has(t))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return\"a\"===r?n.call(t,i):n?n.value=i:e.set(t,i),i}\"undefined\"!=typeof navigator&&(Se=navigator,Te=Se.userAgent,Ee=Se.platform,Oe=Se.mediaDevices),function(){if(!Ce){const t={Edge:{search:\"Edg\",verSearch:\"Edg\"},OPR:null,Chrome:null,Safari:{str:Se.vendor,search:\"Apple\",verSearch:[\"Version\",\"iPhone OS\",\"CPU OS\"]},Firefox:null,Explorer:{search:\"MSIE\",verSearch:\"MSIE\"}},e={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:Ee,search:\"Win\"},Mac:{str:Ee},Linux:{str:Ee}};let i=\"unknownBrowser\",r=0,n=\"unknownOS\";for(let e in t){const n=t[e]||{};let s=n.str||Te,o=n.search||e,a=n.verStr||Te,h=n.verSearch||e;if(h instanceof Array||(h=[h]),-1!=s.indexOf(o)){i=e;for(let t of h){let e=a.indexOf(t);if(-1!=e){r=parseFloat(a.substring(e+t.length+1));break}}break}}for(let t in e){const i=e[t]||{};let r=i.str||Te,s=i.search||t;if(-1!=r.indexOf(s)){n=t;break}}\"Linux\"==n&&-1!=Te.indexOf(\"Windows NT\")&&(n=\"HarmonyOS\"),Ae={browser:i,version:r,OS:n}}Ce&&(Ae={browser:\"ssr\",version:0,OS:\"ssr\"})}(),Oe&&Oe.getUserMedia,\"Chrome\"===Ae.browser&&Ae.version>66||\"Safari\"===Ae.browser&&Ae.version>13||\"OPR\"===Ae.browser&&Ae.version>43||\"Edge\"===Ae.browser&&Ae.version,\"function\"==typeof SuppressedError&&SuppressedError;let De=class t{static multiply(t,e){const i=[];for(let r=0;r<3;r++){const n=e.slice(3*r,3*r+3);for(let e=0;e<3;e++){const r=[t[e],t[e+3],t[e+6]].reduce(((t,e,i)=>t+e*n[i]),0);i.push(r)}}return i}static identity(){return[1,0,0,0,1,0,0,0,1]}static translate(e,i,r){return t.multiply(e,[1,0,0,0,1,0,i,r,1])}static rotate(e,i){var r=Math.cos(i),n=Math.sin(i);return t.multiply(e,[r,-n,0,n,r,0,0,0,1])}static scale(e,i,r){return t.multiply(e,[i,0,0,0,r,0,0,0,1])}};var Me,Fe,Pe,ke,Re,Be,je,We,Ue;!function(t){t.GREY=\"grey\",t.GREY32=\"grey32\",t.RGBA=\"rgba\",t.RBGA=\"rbga\",t.GRBA=\"grba\",t.GBRA=\"gbra\",t.BRGA=\"brga\",t.BGRA=\"bgra\"}(Me||(Me={}));class Ve{static get version(){return\"1.1.0\"}static checkWebGLSupport(){return null===document.createElement(\"canvas\").getContext(\"webgl\")?(Le(Ve,Fe,!1,\"f\",Pe),!1):(Le(Ve,Fe,!0,\"f\",Pe),!0)}get disposed(){return Ie(this,Ue,\"f\")}constructor(){ke.set(this,Me.RGBA),Re.set(this,null),Be.set(this,null),je.set(this,null),this.useWebGLByDefault=!0,this._reusedCvs=null,this._reusedWebGLCvs=null,We.set(this,null),Ue.set(this,!1)}drawImage(t,e,i,r,n,s){if(this.disposed)throw Error(\"The 'ImageDataGetter' instance has been disposed.\");if(!i||!r)throw new Error(\"Invalid 'sourceWidth' or 'sourceHeight'.\");if(null==Ie(Ve,Fe,\"f\",Pe)&&Ve.checkWebGLSupport(),(null==s?void 0:s.bUseWebGL)&&!Ie(Ve,Fe,\"f\",Pe))throw new Error(\"Your browser or machine may not support WebGL.\");if(e instanceof HTMLVideoElement&&4!==e.readyState||e instanceof HTMLImageElement&&!e.complete)throw new Error(\"The source is not loaded.\");let o;Ve._onLog&&(o=Date.now(),Ve._onLog(\"drawImage(), START: \"+o));let a=0,h=0,l=i,c=r,u=0,d=0,f=i,g=r;n&&(n.sx&&(a=Math.round(n.sx)),n.sy&&(h=Math.round(n.sy)),n.sWidth&&(l=Math.round(n.sWidth)),n.sHeight&&(c=Math.round(n.sHeight)),n.dx&&(u=Math.round(n.dx)),n.dy&&(d=Math.round(n.dy)),n.dWidth&&(f=Math.round(n.dWidth)),n.dHeight&&(g=Math.round(n.dHeight)));let m,p=Me.RGBA;if((null==s?void 0:s.pixelFormat)&&(p=s.pixelFormat),(null==s?void 0:s.bufferContainer)&&(m=s.bufferContainer,m.length<4*f*g))throw new Error(\"Unexpected size of the 'bufferContainer'.\");const v=t;if(!Ie(Ve,Fe,\"f\",Pe)||!(this.useWebGLByDefault&&null==(null==s?void 0:s.bUseWebGL)||(null==s?void 0:s.bUseWebGL))){Ve._onLog&&Ve._onLog(\"drawImage() in context2d.\"),v.ctx2d||(v.ctx2d=v.getContext(\"2d\",{willReadFrequently:!0}));const t=v.ctx2d;if(!t)throw new Error(\"Unable to get 'CanvasRenderingContext2D' from canvas.\");return(v.width<u+f||v.height<d+g)&&(v.width=u+f,v.height=d+g),t.drawImage(e,a,h,l,c,u,d,f,g),Ve._onLog&&Ve._onLog(\"drawImage() in context2d end. Costs: \"+(Date.now()-o)),{context:t,pixelFormat:Me.RGBA,bUseWebGL:!1}}Ve._onLog&&Ve._onLog(\"drawImage() in WebGL.\");try{(v.width<u+f||v.height<d+g)&&(v.width=u+f,v.height=d+g,v.ctxWebGL&&v.ctxWebGL.viewport(0,0,u+f,d+g));const t=v.ctxWebGL||v.getContext(\"webgl\",{antialias:!1})||v.getContext(\"experimental-webgl\",{antialias:!1});if(!t){Ve._onLog&&Ve._onLog(\"Browser or machine may not support WebGL, or the canvas has already been set to a different context mode.\");const t=new Error(\"Unable to get 'WebGLRenderingContext'. Your browser or machine may not support WebGL, or the canvas has already been set to a different context mode.\");throw t.name=\"WebGLError\",t}if(!v.ctxWebGL||p!==Ie(this,ke,\"f\")){v.ctxWebGL=t;const e=t=>{const e=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),t.STATIC_DRAW);const i=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),t.STATIC_DRAW),{positions:e,texCoords:i}},i=t=>{const e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e},r=(t,e)=>{const i=t.createProgram();if(e.forEach((e=>t.attachShader(i,e))),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){const e=new Error(`An error occured linking the program: ${t.getProgramInfoLog(i)}.`);throw e.name=\"WebGLError\",e}return t.useProgram(i),i},n=(t,e,i)=>{const r=t.createShader(e);if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){const e=new Error(`An error occured compiling the shader: ${t.getShaderInfoLog(r)}.`);throw e.name=\"WebGLError\",e}return r},s=\"\\n                  attribute vec2 a_position;\\n                  attribute vec2 a_texCoord;\\n  \\n                  uniform mat3 u_matrix;\\n                  uniform mat3 u_textureMatrix;\\n  \\n                  varying vec2 v_texCoord;\\n                  void main(void) {\\n                  gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1.0);\\n                  v_texCoord = vec4((u_textureMatrix * vec3(a_texCoord, 1)).xy, 0, 1.0).xy;\\n                  }\\n              \";let o=\"rgb\";[\"rgba\",\"rbga\",\"grba\",\"gbra\",\"brga\",\"bgra\"].includes(p)&&(o=p.slice(0,3));const a=`\\n                  precision mediump float;\\n                  varying vec2 v_texCoord;\\n                  uniform sampler2D u_image;\\n                  uniform float uColorFactor;\\n  \\n                  void main() {\\n                      vec4 sample = texture2D(u_image, v_texCoord);\\n                      float grey = 0.21 * sample.r + 0.71 * sample.g + 0.07 * sample.b;\\n                      gl_FragColor = vec4(sample.${o} * (1.0 - uColorFactor) + (grey * uColorFactor), sample.a);\\n                  }\\n              `,h=r(t,[n(t,t.VERTEX_SHADER,s),n(t,t.FRAGMENT_SHADER,a)]);Le(this,Be,{program:h,attribLocations:{vertexPosition:t.getAttribLocation(h,\"a_position\"),texPosition:t.getAttribLocation(h,\"a_texCoord\")},uniformLocations:{uSampler:t.getUniformLocation(h,\"u_image\"),uColorFactor:t.getUniformLocation(h,\"uColorFactor\"),uMatrix:t.getUniformLocation(h,\"u_matrix\"),uTextureMatrix:t.getUniformLocation(h,\"u_textureMatrix\")}},\"f\"),Le(this,je,e(t),\"f\"),Le(this,Re,i(t),\"f\"),Le(this,ke,p,\"f\")}const n=(t,e,i)=>{t.bindBuffer(t.ARRAY_BUFFER,e),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0)},s=(t,e,i)=>{const r=t.RGBA,n=t.RGBA,s=t.UNSIGNED_BYTE;t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,r,n,s,i)},_=(t,e,s,o)=>{t.clearColor(0,0,0,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),n(t,s.positions,e.attribLocations.vertexPosition),n(t,s.texCoords,e.attribLocations.texPosition),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,o),t.uniform1i(e.uniformLocations.uSampler,0),t.uniform1f(e.uniformLocations.uColorFactor,[Me.GREY,Me.GREY32].includes(p)?1:0);let m,v,_=De.translate(De.identity(),-1,-1);_=De.scale(_,2,2),_=De.scale(_,1/t.canvas.width,1/t.canvas.height),m=De.translate(_,u,d),m=De.scale(m,f,g),t.uniformMatrix3fv(e.uniformLocations.uMatrix,!1,m),v=De.translate(De.identity(),a/i,h/r),v=De.scale(v,l/i,c/r),t.uniformMatrix3fv(e.uniformLocations.uTextureMatrix,!1,v),t.drawArrays(t.TRIANGLES,0,6)};s(t,Ie(this,Re,\"f\"),e),_(t,Ie(this,Be,\"f\"),Ie(this,je,\"f\"),Ie(this,Re,\"f\"));const y=m||new Uint8Array(4*f*g);if(t.readPixels(u,d,f,g,t.RGBA,t.UNSIGNED_BYTE,y),255!==y[3]){Ve._onLog&&Ve._onLog(\"Incorrect WebGL drawing .\");const t=new Error(\"WebGL error: incorrect drawing.\");throw t.name=\"WebGLError\",t}return Ve._onLog&&Ve._onLog(\"drawImage() in WebGL end. Costs: \"+(Date.now()-o)),{context:t,pixelFormat:p===Me.GREY?Me.GREY32:p,bUseWebGL:!0}}catch(o){if(this.forceLoseContext(),null==(null==s?void 0:s.bUseWebGL))return Ve._onLog&&Ve._onLog(\"'drawImage()' in WebGL failed, try again in context2d.\"),this.useWebGLByDefault=!1,this.drawImage(t,e,i,r,n,Object.assign({},s,{bUseWebGL:!1}));throw o.name=\"WebGLError\",o}}readCvsData(t,e,i){if(!(t instanceof CanvasRenderingContext2D||t instanceof WebGLRenderingContext))throw new Error(\"Invalid 'context'.\");let r,n=0,s=0,o=t.canvas.width,a=t.canvas.height;if(e&&(e.x&&(n=e.x),e.y&&(s=e.y),e.width&&(o=e.width),e.height&&(a=e.height)),(null==i?void 0:i.length)<4*o*a)throw new Error(\"Unexpected size of the 'bufferContainer'.\");if(t instanceof WebGLRenderingContext){const e=t;i?(e.readPixels(n,s,o,a,e.RGBA,e.UNSIGNED_BYTE,i),r=new Uint8Array(i.buffer,0,4*o*a)):(r=new Uint8Array(4*o*a),e.readPixels(n,s,o,a,e.RGBA,e.UNSIGNED_BYTE,r))}else if(t instanceof CanvasRenderingContext2D){let e;e=t.getImageData(n,s,o,a),r=new Uint8Array(e.data.buffer),null==i||i.set(r)}return r}transformPixelFormat(t,e,i,r){let n,s;if(Ve._onLog&&(n=Date.now(),Ve._onLog(\"transformPixelFormat(), START: \"+n)),e===i)return Ve._onLog&&Ve._onLog(\"transformPixelFormat() end. Costs: \"+(Date.now()-n)),r?new Uint8Array(t):t;const o=[Me.RGBA,Me.RBGA,Me.GRBA,Me.GBRA,Me.BRGA,Me.BGRA];if(o.includes(e))if(i===Me.GREY){s=new Uint8Array(t.length/4);for(let e=0;e<t.length;e+=4){const i=.21*t[e]+.71*t[e+1]+.07*t[e+2];s[e/4]=i}}else if(i===Me.GREY32){s=r?new Uint8Array(t):t;for(let e=0;e<t.length;e+=4){const i=.21*t[e]+.71*t[e+1]+.07*t[e+2];s[e]=i,s[e+1]=i,s[e+2]=i}}else{if(!o.includes(i))throw new Error(\"Unable to transform.\");if(r){s=new Uint8Array(t);const r=e.indexOf(\"r\"),n=e.indexOf(\"g\"),o=e.indexOf(\"b\"),a=i.indexOf(\"r\"),h=i.indexOf(\"g\"),l=i.indexOf(\"b\");for(let e=0;e<t.length;e+=4)s[e+a]=t[e+r],s[e+h]=t[e+n],s[e+l]=t[e+o]}else{s=t;const r=e.indexOf(\"r\"),n=e.indexOf(\"g\"),o=e.indexOf(\"b\"),a=i.indexOf(\"r\"),h=i.indexOf(\"g\"),l=i.indexOf(\"b\");for(let e=0;e<t.length;e+=4){let i=[t[e],t[e+1],t[e+2]];s[e+a]=i[r],s[e+h]=i[n],s[e+l]=i[o]}}}else if(e===Me.GREY){if(i!==Me.GREY32)throw new Error(\"Unable to transform.\");s=new Uint8Array(4*t.length);for(let e=0;e<t.length;e++)s[4*e]=t[e],s[4*e+1]=t[e],s[4*e+2]=t[e],s[4*e+3]=255}else{if(e!==Me.GREY32)throw new Error(\"Unable to transform.\");if(i!==Me.GREY)throw new Error(\"Unable to transform.\");s=new Uint8Array(t.length/4);for(let e=0;e<t.length;e+=4)s[e/4]=t[e]}return Ve._onLog&&Ve._onLog(\"transformPixelFormat() end. Costs: \"+(Date.now()-n)),s}getImageData(t,e,i,r,n){if(this.disposed)throw Error(\"The 'ImageDataGetter' instance has been disposed.\");if(!e||!i)throw new Error(\"Invalid 'sourceWidth' or 'sourceHeight'.\");if(null==Ie(Ve,Fe,\"f\",Pe)&&Ve.checkWebGLSupport(),(null==n?void 0:n.bUseWebGL)&&!Ie(Ve,Fe,\"f\",Pe))throw new Error(\"Your browser or machine may not support WebGL.\");if(r.sx>e||r.sy>i||r.sx+r.sWidth>e||r.sy+r.sHeight>i)throw new Error(\"Invalid position.\");if(t instanceof HTMLVideoElement&&4!==t.readyState||t instanceof HTMLImageElement&&!t.complete)throw new Error(\"The source is not loaded.\");let s;Ve._onLog&&(s=Date.now(),Ve._onLog(\"getImageData(), START: \"+s));const o=Math.round(r.sx),a=Math.round(r.sy),h=Math.round(r.sWidth),l=Math.round(r.sHeight),c=Math.round(r.dWidth),u=Math.round(r.dHeight);let d=Me.RGBA;(null==n?void 0:n.pixelFormat)&&(d=n.pixelFormat);let f,g,m,p=null;if((null==n?void 0:n.bufferContainer)&&(p=n.bufferContainer),Ie(Ve,Fe,\"f\",Pe)&&(this.useWebGLByDefault&&null==(null==n?void 0:n.bUseWebGL)||(null==n?void 0:n.bUseWebGL))){Ve._onLog&&Ve._onLog(\"getImageData() in WebGL.\"),this._reusedWebGLCvs||(this._reusedWebGLCvs=document.createElement(\"canvas\")),f=this._reusedWebGLCvs;try{if(p)if(d===Me.GREY){if(m=new Uint8Array(4*c*u),g=this.drawImage(f,t,e,i,{sx:o,sy:a,sWidth:h,sHeight:l,dWidth:c,dHeight:u},{pixelFormat:d,bUseWebGL:!0,bufferContainer:m}),m=this.transformPixelFormat(m,g.pixelFormat,d),p){if(p.length<m.length)throw new Error(\"Unexpected size of the 'bufferContainer'.\");p.set(m)}}else g=this.drawImage(f,t,e,i,{sx:o,sy:a,sWidth:h,sHeight:l,dWidth:c,dHeight:u},{pixelFormat:d,bUseWebGL:!0,bufferContainer:p}),m=new Uint8Array(p.buffer,0,4*c*u),m=this.transformPixelFormat(m,g.pixelFormat,d);else d===Me.GREY?((!Ie(this,We,\"f\")||Ie(this,We,\"f\").length<4*c*u)&&Le(this,We,new Uint8Array(4*c*u),\"f\"),m=new Uint8Array(Ie(this,We,\"f\").buffer,0,4*c*u)):m=new Uint8Array(4*c*u),g=this.drawImage(f,t,e,i,{sx:o,sy:a,sWidth:h,sHeight:l,dWidth:c,dHeight:u},{pixelFormat:d,bUseWebGL:!0,bufferContainer:m}),m=this.transformPixelFormat(m,g.pixelFormat,d)}catch(r){if(\"WebGLError\"===r.name&&(this.forceLoseContext(),null==(null==n?void 0:n.bUseWebGL)))return Ve._onLog&&Ve._onLog(\"getImageData() in WebGL failed, try again in context2d.\"),this.useWebGLByDefault=!1,this.getImageData(t,e,i,{sx:o,sy:a,sWidth:h,sHeight:l,dWidth:c,dHeight:u},Object.assign({},n,{bUseWebGL:!1}));throw r}}else if(Ve._onLog&&Ve._onLog(\"getImageData() in context2d.\"),this._reusedCvs||(this._reusedCvs=document.createElement(\"canvas\")),f=this._reusedCvs,g=this.drawImage(f,t,e,i,{sx:o,sy:a,sWidth:h,sHeight:l,dWidth:c,dHeight:u},{pixelFormat:Me.RGBA,bUseWebGL:!1}),m=this.readCvsData(g.context,{width:c,height:u},null),m=this.transformPixelFormat(m,g.pixelFormat,d),p){if(p.length<m.length)throw new Error(\"Unexpected size of the 'bufferContainer'.\");p.set(m)}return Ve._onLog&&Ve._onLog(\"getImageData() end. Costs: \"+(Date.now()-s)),{data:m,pixelFormat:d,width:c,height:u,bUseWebGL:g.bUseWebGL}}convertDataToCvs(t,e,i,r){if(!(t instanceof Uint8Array||t instanceof Uint8ClampedArray))throw new TypeError(\"Invalid 'data'.\");if(\"number\"!=typeof e||e<=0)throw new Error(\"Invalid 'width'.\");if(\"number\"!=typeof i||i<=0)throw new Error(\"Invalid 'height'.\");const n=document.createElement(\"canvas\");let s;if(n.width=e,n.height=i,r===Me.GREY){s=new Uint8ClampedArray(4*e*i);for(let e=0;e<s.length;e+=4)s[e]=t[e/4],s[e+1]=t[e/4],s[e+2]=t[e/4],s[e+3]=255}else s=new Uint8ClampedArray(t.buffer);const o=new ImageData(s,e,i);return n.getContext(\"2d\").putImageData(o,0,0),n}forceLoseContext(){if(!this._reusedWebGLCvs)return;const t=this._reusedWebGLCvs.ctxWebGL;t&&!t.isContextLost()&&t.getExtension(\"WEBGL_lose_context\")&&t.getExtension(\"WEBGL_lose_context\").loseContext(),Le(this,Re,null,\"f\"),Le(this,Be,null,\"f\"),Le(this,je,null,\"f\"),this._reusedWebGLCvs=null}dispose(){this.forceLoseContext(),Le(this,Ue,!0,\"f\")}}Fe=Ve,ke=new WeakMap,Re=new WeakMap,Be=new WeakMap,je=new WeakMap,We=new WeakMap,Ue=new WeakMap,Pe={value:void 0};var Ge,Ne,Ye,He,Xe,ze,qe,Ke,Ze,Je,Qe,$e,ti,ei,ii,ri,ni,si,oi,ai,hi,li,ci,ui,di,fi,gi,mi,pi,vi,_i,yi,wi,bi,xi,Ci,Si,Ti,Ei,Oi,Ai,Ii,Li;class Di{constructor(){Ge.set(this,new Map),Ne.set(this,!1)}get disposed(){return be(this,Ne,\"f\")}on(t,e){t=t.toLowerCase();const i=be(this,Ge,\"f\").get(t);if(i){if(i.includes(e))return;i.push(e)}else be(this,Ge,\"f\").set(t,[e])}off(t,e){t=t.toLowerCase();const i=be(this,Ge,\"f\").get(t);if(!i)return;const r=i.indexOf(e);-1!==r&&i.splice(r,1)}offAll(t){t=t.toLowerCase();const e=be(this,Ge,\"f\").get(t);e&&(e.length=0)}fire(t,e=[],i={async:!1,copy:!0}){e||(e=[]),t=t.toLowerCase();const r=be(this,Ge,\"f\").get(t);if(r&&r.length){i=Object.assign({async:!1,copy:!0},i);for(let t of r){if(!t)continue;let n=[];if(i.copy)for(let t of e){try{t=JSON.parse(JSON.stringify(t))}catch(t){}n.push(t)}else n=e;let s=!1;if(i.async)setTimeout((()=>{this.disposed||r.includes(t)&&t.apply(i.target,n)}),0);else try{s=t.apply(i.target,n)}catch(t){}if(!0===s)break}}}dispose(){xe(this,Ne,!0,\"f\")}}Ge=new WeakMap,Ne=new WeakMap;const Mi=(t,e,i,r)=>{if(!i)return t;let n=e+Math.round((t-e)/i)*i;return r&&(n=Math.min(n,r)),n};class Fi{static get version(){return\"2.0.13\"}static isStorageAvailable(t){let e;try{e=window[t];const i=\"__storage_test__\";return e.setItem(i,i),e.removeItem(i),!0}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||\"QuotaExceededError\"===t.name||\"NS_ERROR_DOM_QUOTA_REACHED\"===t.name)&&e&&0!==e.length}}static findBestRearCameraInIOS(t,e){if(!t||!t.length)return null;let i=!1;if((null==e?void 0:e.getMainCamera)&&(i=!0),i){const e=[\"후면 카메라\",\"背面カメラ\",\"後置鏡頭\",\"后置相机\",\"กล้องด้านหลัง\",\"बैक कैमरा\",\"الكاميرا الخلفية\",\"מצלמה אחורית\",\"камера на задней панели\",\"задня камера\",\"задна камера\",\"артқы камера\",\"πίσω κάμερα\",\"zadní fotoaparát\",\"zadná kamera\",\"tylny aparat\",\"takakamera\",\"stražnja kamera\",\"rückkamera\",\"kamera på baksidan\",\"kamera belakang\",\"kamera bak\",\"hátsó kamera\",\"fotocamera (posteriore)\",\"câmera traseira\",\"câmara traseira\",\"cámara trasera\",\"càmera posterior\",\"caméra arrière\",\"cameră spate\",\"camera mặt sau\",\"camera aan achterzijde\",\"bagsidekamera\",\"back camera\",\"arka kamera\"],i=t.find((t=>e.includes(t.label.toLowerCase())));return null==i?void 0:i.deviceId}{const e=[\"후면\",\"背面\",\"後置\",\"后置\",\"านหลัง\",\"बैक\",\"خلفية\",\"אחורית\",\"задняя\",\"задней\",\"задна\",\"πίσω\",\"zadní\",\"zadná\",\"tylny\",\"trasera\",\"traseira\",\"taka\",\"stražnja\",\"spate\",\"sau\",\"rück\",\"posteriore\",\"posterior\",\"hátsó\",\"belakang\",\"baksidan\",\"bakre\",\"bak\",\"bagside\",\"back\",\"aртқы\",\"arrière\",\"arka\",\"achterzijde\"],i=[\"트리플\",\"三镜头\",\"三鏡頭\",\"トリプル\",\"สาม\",\"ट्रिपल\",\"ثلاثية\",\"משולשת\",\"үштік\",\"тройная\",\"тройна\",\"потроєна\",\"τριπλή\",\"üçlü\",\"trójobiektywowy\",\"trostruka\",\"trojný\",\"trojitá\",\"trippelt\",\"trippel\",\"triplă\",\"triple\",\"tripla\",\"tiga\",\"kolmois\",\"ba camera\"],r=[\"듀얼 와이드\",\"雙廣角\",\"双广角\",\"デュアル広角\",\"คู่ด้านหลังมุมกว้าง\",\"ड्युअल वाइड\",\"مزدوجة عريضة\",\"כפולה רחבה\",\"қос кең бұрышты\",\"здвоєна ширококутна\",\"двойная широкоугольная\",\"двойна широкоъгълна\",\"διπλή ευρεία\",\"çift geniş\",\"laajakulmainen kaksois\",\"kép rộng mặt sau\",\"kettős, széles látószögű\",\"grande angular dupla\",\"ganda\",\"dwuobiektywowy\",\"dwikamera\",\"dvostruka široka\",\"duální širokoúhlý\",\"duálna širokouhlá\",\"dupla grande-angular\",\"dublă\",\"dubbel vidvinkel\",\"dual-weitwinkel\",\"dual wide\",\"dual con gran angular\",\"dual\",\"double\",\"doppia con grandangolo\",\"doble\",\"dobbelt vidvinkelkamera\"],n=t.filter((t=>{const i=t.label.toLowerCase();return e.some((t=>i.includes(t)))}));if(!n.length)return null;const s=n.find((t=>{const e=t.label.toLowerCase();return i.some((t=>e.includes(t)))}));if(s)return s.deviceId;const o=n.find((t=>{const e=t.label.toLowerCase();return r.some((t=>e.includes(t)))}));return o?o.deviceId:n[0].deviceId}}static findBestRearCamera(t,e){if(!t||!t.length)return null;if([\"iPhone\",\"iPad\",\"Mac\"].includes(Ae.OS))return Fi.findBestRearCameraInIOS(t,{getMainCamera:null==e?void 0:e.getMainCameraInIOS});const i=[\"후\",\"背面\",\"背置\",\"後面\",\"後置\",\"后面\",\"后置\",\"านหลัง\",\"หลัง\",\"बैक\",\"خلفية\",\"אחורית\",\"задняя\",\"задня\",\"задней\",\"задна\",\"πίσω\",\"zadní\",\"zadná\",\"tylny\",\"trás\",\"trasera\",\"traseira\",\"taka\",\"stražnja\",\"spate\",\"sau\",\"rück\",\"rear\",\"posteriore\",\"posterior\",\"hátsó\",\"darrere\",\"belakang\",\"baksidan\",\"bakre\",\"bak\",\"bagside\",\"back\",\"aртқы\",\"arrière\",\"arka\",\"achterzijde\"];for(let e of t){const t=e.label.toLowerCase();if(t&&i.some((e=>t.includes(e)))&&/\\b0(\\b)?/.test(t))return e.deviceId}return[\"Android\",\"HarmonyOS\"].includes(Ae.OS)?t[t.length-1].deviceId:null}static findBestCamera(t,e,i){return t&&t.length?\"environment\"===e?this.findBestRearCamera(t,i):\"user\"===e?null:e?void 0:null:null}static async playVideo(t,e,i){if(!t)throw new Error(\"Invalid 'videoEl'.\");if(!e)throw new Error(\"Invalid 'source'.\");return new Promise((async(r,n)=>{let s;const o=()=>{t.removeEventListener(\"loadstart\",c),t.removeEventListener(\"abort\",u),t.removeEventListener(\"play\",d),t.removeEventListener(\"error\",f),t.removeEventListener(\"loadedmetadata\",p)};let a=!1;const h=()=>{a=!0,s&&clearTimeout(s),o(),r(t)},l=t=>{s&&clearTimeout(s),o(),n(t)},c=()=>{t.addEventListener(\"abort\",u,{once:!0})},u=()=>{const t=new Error(\"Video playing was interrupted.\");t.name=\"AbortError\",l(t)},d=()=>{h()},f=()=>{l(new Error(`Video error ${t.error.code}: ${t.error.message}.`))};let g;const m=new Promise((t=>{g=t})),p=()=>{g()};if(t.addEventListener(\"loadstart\",c,{once:!0}),t.addEventListener(\"play\",d,{once:!0}),t.addEventListener(\"error\",f,{once:!0}),t.addEventListener(\"loadedmetadata\",p,{once:!0}),\"string\"==typeof e||e instanceof String?t.src=e:t.srcObject=e,t.autoplay&&await new Promise((t=>{setTimeout(t,1e3)})),!a){i&&(s=setTimeout((()=>{o(),n(new Error(\"Failed to play video. Timeout.\"))}),i));try{t.src&&await t.load(),await t.play(),h()}catch(t){console.warn(\"1st play error: \"+((null==t?void 0:t.message)||t))}if(!a){await m;try{await t.play(),h()}catch(t){console.warn(\"2rd play error: \"+((null==t?void 0:t.message)||t)),l(t)}}}}))}static async testCameraAccess(t){var e,i;if(!(null===(i=null===(e=null===window||void 0===window?void 0:window.navigator)||void 0===e?void 0:e.mediaDevices)||void 0===i?void 0:i.getUserMedia))return{ok:!1,errorName:\"InsecureContext\",errorMessage:\"Insecure context.\"};let r;try{r=t?await navigator.mediaDevices.getUserMedia(t):await navigator.mediaDevices.getUserMedia({video:!0})}catch(t){return{ok:!1,errorName:t.name,errorMessage:t.message}}finally{null==r||r.getTracks().forEach((t=>{t.stop()}))}return{ok:!0}}get state(){if(!be(this,ri,\"f\"))return\"closed\";if(\"pending\"===be(this,ri,\"f\"))return\"opening\";if(\"fulfilled\"===be(this,ri,\"f\"))return\"opened\";throw new Error(\"Unknown state.\")}set ifSaveLastUsedCamera(t){t?Fi.isStorageAvailable(\"localStorage\")?xe(this,$e,!0,\"f\"):(xe(this,$e,!1,\"f\"),console.warn(\"Local storage is unavailable\")):xe(this,$e,!1,\"f\")}get ifSaveLastUsedCamera(){return be(this,$e,\"f\")}get isVideoPlaying(){return!(!be(this,Xe,\"f\")||be(this,Xe,\"f\").paused)&&\"opened\"===this.state}set tapFocusEventBoundEl(t){var e,i,r;if(!(t instanceof HTMLElement)&&null!=t)throw new TypeError(\"Invalid 'element'.\");null===(e=be(this,li,\"f\"))||void 0===e||e.removeEventListener(\"click\",be(this,hi,\"f\")),null===(i=be(this,li,\"f\"))||void 0===i||i.removeEventListener(\"touchend\",be(this,hi,\"f\")),null===(r=be(this,li,\"f\"))||void 0===r||r.removeEventListener(\"touchmove\",be(this,ai,\"f\")),xe(this,li,t,\"f\"),t&&(window.TouchEvent&&[\"Android\",\"HarmonyOS\",\"iPhone\",\"iPad\"].includes(Ae.OS)?(t.addEventListener(\"touchend\",be(this,hi,\"f\")),t.addEventListener(\"touchmove\",be(this,ai,\"f\"))):t.addEventListener(\"click\",be(this,hi,\"f\")))}get tapFocusEventBoundEl(){return be(this,li,\"f\")}get disposed(){return be(this,_i,\"f\")}constructor(t){var e,i;He.add(this),Xe.set(this,null),ze.set(this,void 0),qe.set(this,(()=>{\"opened\"===this.state&&be(this,fi,\"f\").fire(\"resumed\",null,{target:this,async:!1})})),Ke.set(this,(()=>{be(this,fi,\"f\").fire(\"paused\",null,{target:this,async:!1})})),Ze.set(this,void 0),Je.set(this,void 0),this.cameraOpenTimeout=15e3,this._arrCameras=[],Qe.set(this,void 0),$e.set(this,!1),this.ifSkipCameraInspection=!1,this.selectIOSRearMainCameraAsDefault=!1,ti.set(this,void 0),ei.set(this,!0),ii.set(this,void 0),ri.set(this,void 0),ni.set(this,!1),this._focusParameters={maxTimeout:400,minTimeout:300,kTimeout:void 0,oldDistance:null,fds:null,isDoingFocus:0,taskBackToContinous:null,curFocusTaskId:0,focusCancelableTime:1500,defaultFocusAreaSizeRatio:6,focusBackToContinousTime:5e3,tapFocusMinDistance:null,tapFocusMaxDistance:null,focusArea:null,tempBufferContainer:null,defaultTempBufferContainerLenRatio:1/4},si.set(this,!1),this._focusSupported=!0,this.calculateCoordInVideo=(t,e)=>{let i,r;const n=window.getComputedStyle(be(this,Xe,\"f\")).objectFit,s=this.getResolution(),o=be(this,Xe,\"f\").getBoundingClientRect(),a=o.left,h=o.top,{width:l,height:c}=be(this,Xe,\"f\").getBoundingClientRect();if(l<=0||c<=0)throw new Error(\"Unable to get video dimensions. Video may not be rendered on the page.\");const u=l/c,d=s.width/s.height;let f=1;if(\"contain\"===n)d>u?(f=l/s.width,i=(t-a)/f,r=(e-h-(c-l/d)/2)/f):(f=c/s.height,r=(e-h)/f,i=(t-a-(l-c*d)/2)/f);else{if(\"cover\"!==n)throw new Error(\"Unsupported object-fit.\");d>u?(f=c/s.height,r=(e-h)/f,i=(t-a+(c*d-l)/2)/f):(f=l/s.width,i=(t-a)/f,r=(e-h+(l/d-c)/2)/f)}return{x:i,y:r}},oi.set(this,!1),ai.set(this,(()=>{xe(this,oi,!0,\"f\")})),hi.set(this,(async t=>{var e;if(be(this,oi,\"f\"))return void xe(this,oi,!1,\"f\");if(!be(this,si,\"f\"))return;if(!this.isVideoPlaying)return;if(!be(this,ze,\"f\"))return;if(!this._focusSupported)return;if(!this._focusParameters.fds&&(this._focusParameters.fds=null===(e=this.getCameraCapabilities())||void 0===e?void 0:e.focusDistance,!this._focusParameters.fds))return void(this._focusSupported=!1);if(null==this._focusParameters.kTimeout&&(this._focusParameters.kTimeout=(this._focusParameters.maxTimeout-this._focusParameters.minTimeout)/(1/this._focusParameters.fds.min-1/this._focusParameters.fds.max)),1==this._focusParameters.isDoingFocus)return;let i,r;if(this._focusParameters.taskBackToContinous&&(clearTimeout(this._focusParameters.taskBackToContinous),this._focusParameters.taskBackToContinous=null),t instanceof MouseEvent)i=t.clientX,r=t.clientY;else{if(!(t instanceof TouchEvent))throw new Error(\"Unknown event type.\");if(!t.changedTouches.length)return;i=t.changedTouches[0].clientX,r=t.changedTouches[0].clientY}const n=this.getResolution(),s=2*Math.round(Math.min(n.width,n.height)/this._focusParameters.defaultFocusAreaSizeRatio/2);let o;try{o=this.calculateCoordInVideo(i,r)}catch(t){}if(o.x<0||o.x>n.width||o.y<0||o.y>n.height)return;const a={x:o.x+\"px\",y:o.y+\"px\"},h=s+\"px\",l=h;let c;Fi._onLog&&(c=Date.now());try{await be(this,He,\"m\",Ai).call(this,a,h,l,this._focusParameters.tapFocusMinDistance,this._focusParameters.tapFocusMaxDistance)}catch(t){if(Fi._onLog)throw Fi._onLog(t),t}Fi._onLog&&Fi._onLog(`Tap focus costs: ${Date.now()-c} ms`),this._focusParameters.taskBackToContinous=setTimeout((()=>{var t;Fi._onLog&&Fi._onLog(\"Back to continuous focus.\"),null===(t=be(this,ze,\"f\"))||void 0===t||t.applyConstraints({advanced:[{focusMode:\"continuous\"}]}).catch((()=>{}))}),this._focusParameters.focusBackToContinousTime),be(this,fi,\"f\").fire(\"tapfocus\",null,{target:this,async:!1})})),li.set(this,null),ci.set(this,1),ui.set(this,{x:0,y:0}),this.updateVideoElWhenSoftwareScaled=()=>{if(!be(this,Xe,\"f\"))return;const t=be(this,ci,\"f\");if(t<1)throw new RangeError(\"Invalid scale value.\");if(1===t)be(this,Xe,\"f\").style.transform=\"\";else{const e=window.getComputedStyle(be(this,Xe,\"f\")).objectFit,i=be(this,Xe,\"f\").videoWidth,r=be(this,Xe,\"f\").videoHeight,{width:n,height:s}=be(this,Xe,\"f\").getBoundingClientRect();if(n<=0||s<=0)throw new Error(\"Unable to get video dimensions. Video may not be rendered on the page.\");const o=n/s,a=i/r;let h=1;\"contain\"===e?h=o<a?n/(i/t):s/(r/t):\"cover\"===e&&(h=a>o?s/(i/t):n/(r/t));const l=h*(1-1/t)*(i/2-be(this,ui,\"f\").x),c=h*(1-1/t)*(r/2-be(this,ui,\"f\").y);be(this,Xe,\"f\").style.transform=`translate(${l}px, ${c}px) scale(${t})`}},di.set(this,(function(){if(!(this.data instanceof Uint8Array||this.data instanceof Uint8ClampedArray))throw new TypeError(\"Invalid data.\");if(\"number\"!=typeof this.width||this.width<=0)throw new Error(\"Invalid width.\");if(\"number\"!=typeof this.height||this.height<=0)throw new Error(\"Invalid height.\");const t=document.createElement(\"canvas\");let e;if(t.width=this.width,t.height=this.height,this.pixelFormat===Me.GREY){e=new Uint8ClampedArray(this.width*this.height*4);for(let t=0;t<e.length;t+=4)e[t]=this.data[t/4],e[t+1]=this.data[t/4],e[t+2]=this.data[t/4],e[t+3]=255}else e=new Uint8ClampedArray(this.data.buffer);const i=new ImageData(e,this.width,this.height);return t.getContext(\"2d\").putImageData(i,0,0),t})),fi.set(this,void 0),gi.set(this,[\"before:open\",\"opened\",\"before:close\",\"closed\",\"before:camera:change\",\"camera:changed\",\"before:resolution:change\",\"resolution:changed\",\"played\",\"paused\",\"resumed\",\"tapfocus\"]),this.detectedResolutions=[{width:160,height:120},{width:320,height:240},{width:480,height:360},{width:640,height:480},{width:800,height:600},{width:960,height:720},{width:1280,height:720},{width:1920,height:1080},{width:2560,height:1440},{width:3840,height:2160}],mi.set(this,new Map),pi.set(this,!1),vi.set(this,(async()=>{var t,e;if(\"visible\"===document.visibilityState){if(Fi._onLog&&Fi._onLog(\"document visible. video paused: \"+(null===(t=be(this,Xe,\"f\"))||void 0===t?void 0:t.paused)),\"opening\"==this.state||\"opened\"==this.state){let t=!1;if(!this.isVideoPlaying){Fi._onLog&&Fi._onLog(\"document visible. Not auto resume. 1st resume start.\");try{await this.resume(),t=!0}catch(t){Fi._onLog&&Fi._onLog(\"document visible. 1st resume video failed, try open instead.\")}t||await be(this,He,\"m\",Ci).call(this)}if(await new Promise((t=>setTimeout(t,300))),!this.isVideoPlaying){Fi._onLog&&Fi._onLog(\"document visible. 1st open failed. 2rd resume start.\"),t=!1;try{await this.resume(),t=!0}catch(t){Fi._onLog&&Fi._onLog(\"document visible. 2rd resume video failed, try open instead.\")}t||await be(this,He,\"m\",Ci).call(this)}}}else\"hidden\"===document.visibilityState&&(Fi._onLog&&Fi._onLog(\"document hidden. video paused: \"+(null===(e=be(this,Xe,\"f\"))||void 0===e?void 0:e.paused)),\"opening\"==this.state||\"opened\"==this.state&&this.isVideoPlaying&&this.pause())})),_i.set(this,!1),(null===(i=null===(e=null===window||void 0===window?void 0:window.navigator)||void 0===e?void 0:e.mediaDevices)||void 0===i?void 0:i.getUserMedia)||setTimeout((()=>{Fi.onWarning&&Fi.onWarning(\"The browser is too old or the page is loaded from an insecure origin.\")}),0),this.defaultConstraints={video:{facingMode:{ideal:\"environment\"}}},this.resetMediaStreamConstraints(),t instanceof HTMLVideoElement&&this.setVideoEl(t),xe(this,fi,new Di,\"f\"),this.imageDataGetter=new Ve,document.addEventListener(\"visibilitychange\",be(this,vi,\"f\"))}setVideoEl(t){if(!(t&&t instanceof HTMLVideoElement))throw new Error(\"Invalid 'videoEl'.\");t.addEventListener(\"play\",be(this,qe,\"f\")),t.addEventListener(\"pause\",be(this,Ke,\"f\")),xe(this,Xe,t,\"f\")}getVideoEl(){return be(this,Xe,\"f\")}releaseVideoEl(){var t,e;null===(t=be(this,Xe,\"f\"))||void 0===t||t.removeEventListener(\"play\",be(this,qe,\"f\")),null===(e=be(this,Xe,\"f\"))||void 0===e||e.removeEventListener(\"pause\",be(this,Ke,\"f\")),xe(this,Xe,null,\"f\")}isVideoLoaded(){return!!be(this,Xe,\"f\")&&4==be(this,Xe,\"f\").readyState}async open(){if(be(this,ii,\"f\")&&!be(this,ei,\"f\")){if(\"pending\"===be(this,ri,\"f\"))return be(this,ii,\"f\");if(\"fulfilled\"===be(this,ri,\"f\"))return}be(this,fi,\"f\").fire(\"before:open\",null,{target:this}),await be(this,He,\"m\",Ci).call(this),be(this,fi,\"f\").fire(\"played\",null,{target:this,async:!1}),be(this,fi,\"f\").fire(\"opened\",null,{target:this,async:!1})}async close(){if(\"closed\"===this.state)return;be(this,fi,\"f\").fire(\"before:close\",null,{target:this});const t=be(this,ii,\"f\");if(be(this,He,\"m\",Ti).call(this),t&&\"pending\"===be(this,ri,\"f\")){try{await t}catch(t){}if(!1===be(this,ei,\"f\")){const t=new Error(\"'close()' was interrupted.\");throw t.name=\"AbortError\",t}}xe(this,ii,null,\"f\"),xe(this,ri,null,\"f\"),be(this,fi,\"f\").fire(\"closed\",null,{target:this,async:!1})}pause(){if(!this.isVideoLoaded())throw new Error(\"Video is not loaded.\");if(\"opened\"!==this.state)throw new Error(\"Camera or video is not open.\");be(this,Xe,\"f\").pause()}async resume(){if(!this.isVideoLoaded())throw new Error(\"Video is not loaded.\");if(\"opened\"!==this.state)throw new Error(\"Camera or video is not open.\");await be(this,Xe,\"f\").play()}async setCamera(t){if(\"string\"!=typeof t)throw new TypeError(\"Invalid 'deviceId'.\");if(\"object\"!=typeof be(this,Ze,\"f\").video&&(be(this,Ze,\"f\").video={}),delete be(this,Ze,\"f\").video.facingMode,be(this,Ze,\"f\").video.deviceId={exact:t},!(\"closed\"===this.state||this.videoSrc||\"opening\"===this.state&&be(this,ei,\"f\"))){be(this,fi,\"f\").fire(\"before:camera:change\",[],{target:this,async:!1}),await be(this,He,\"m\",Si).call(this);try{this.resetSoftwareScale()}catch(t){}return be(this,Je,\"f\")}}async switchToFrontCamera(t){if(\"object\"!=typeof be(this,Ze,\"f\").video&&(be(this,Ze,\"f\").video={}),(null==t?void 0:t.resolution)&&(be(this,Ze,\"f\").video.width={ideal:t.resolution.width},be(this,Ze,\"f\").video.height={ideal:t.resolution.height}),delete be(this,Ze,\"f\").video.deviceId,be(this,Ze,\"f\").video.facingMode={exact:\"user\"},xe(this,Qe,null,\"f\"),!(\"closed\"===this.state||this.videoSrc||\"opening\"===this.state&&be(this,ei,\"f\"))){be(this,fi,\"f\").fire(\"before:camera:change\",[],{target:this,async:!1}),be(this,He,\"m\",Si).call(this);try{this.resetSoftwareScale()}catch(t){}return be(this,Je,\"f\")}}getCamera(){var t;if(be(this,Je,\"f\"))return be(this,Je,\"f\");{let e=(null===(t=be(this,Ze,\"f\").video)||void 0===t?void 0:t.deviceId)||\"\";if(e){e=e.exact||e.ideal||e;for(let t of this._arrCameras)if(t.deviceId===e)return JSON.parse(JSON.stringify(t))}return{deviceId:\"\",label:\"\",_checked:!1}}}async _getCameras(t){var e,i;if(!(null===(i=null===(e=null===window||void 0===window?void 0:window.navigator)||void 0===e?void 0:e.mediaDevices)||void 0===i?void 0:i.getUserMedia))throw new Error(\"Failed to access the camera because the browser is too old or the page is loaded from an insecure origin.\");let r;if(t){let t=await navigator.mediaDevices.getUserMedia({video:!0});r=(await navigator.mediaDevices.enumerateDevices()).filter((t=>\"videoinput\"===t.kind)),t.getTracks().forEach((t=>{t.stop()}))}else r=(await navigator.mediaDevices.enumerateDevices()).filter((t=>\"videoinput\"===t.kind));const n=[],s=[];if(this._arrCameras)for(let t of this._arrCameras)t._checked&&s.push(t);for(let t=0;t<r.length;t++){let e,i=r[t];for(let t of s)if(i.deviceId==t.deviceId){e=t;break}e||(e={deviceId:i.deviceId,label:i.label?i.label:\"camera \"+t,_checked:!1}),e.deviceId&&n.push(e)}return this._arrCameras=n,Fi._onLog&&Fi._onLog(JSON.stringify(this._arrCameras)),n}async getCameras(){var t,e;if(!(null===(e=null===(t=null===window||void 0===window?void 0:window.navigator)||void 0===t?void 0:t.mediaDevices)||void 0===e?void 0:e.enumerateDevices))throw new Error(\"Failed to access the camera because the browser is too old or the page is loaded from an insecure origin.\");const i=(await navigator.mediaDevices.enumerateDevices()).filter((t=>\"videoinput\"===t.kind));return i&&i.length&&!i[0].deviceId?this._getCameras(!0):this._getCameras(!1)}async getAllCameras(){return this.getCameras()}async setResolution(t,e,i){if(\"number\"!=typeof t||t<=0)throw new TypeError(\"Invalid 'width'.\");if(\"number\"!=typeof e||e<=0)throw new TypeError(\"Invalid 'height'.\");if(\"object\"!=typeof be(this,Ze,\"f\").video&&(be(this,Ze,\"f\").video={}),i?(be(this,Ze,\"f\").video.width={exact:t},be(this,Ze,\"f\").video.height={exact:e}):(be(this,Ze,\"f\").video.width={ideal:t},be(this,Ze,\"f\").video.height={ideal:e}),\"closed\"===this.state||this.videoSrc||\"opening\"===this.state&&be(this,ei,\"f\"))return null;be(this,fi,\"f\").fire(\"before:resolution:change\",[],{target:this,async:!1}),await be(this,He,\"m\",Si).call(this);try{this.resetSoftwareScale()}catch(t){}const r=this.getResolution();return{width:r.width,height:r.height}}getResolution(){if(\"opened\"===this.state&&this.videoSrc&&be(this,Xe,\"f\"))return{width:be(this,Xe,\"f\").videoWidth,height:be(this,Xe,\"f\").videoHeight};if(be(this,ze,\"f\")){const t=be(this,ze,\"f\").getSettings();return{width:t.width,height:t.height}}if(this.isVideoLoaded())return{width:be(this,Xe,\"f\").videoWidth,height:be(this,Xe,\"f\").videoHeight};{const t={width:0,height:0};let e=be(this,Ze,\"f\").video.width||0,i=be(this,Ze,\"f\").video.height||0;return e&&(t.width=e.exact||e.ideal||e),i&&(t.height=i.exact||i.ideal||i),t}}async getResolutions(t){var e,i,r,n,s,o,a,h,l,c,u;if(!(null===(i=null===(e=null===window||void 0===window?void 0:window.navigator)||void 0===e?void 0:e.mediaDevices)||void 0===i?void 0:i.getUserMedia))throw new Error(\"Failed to access the camera because the browser is too old or the page is loaded from an insecure origin.\");let d=\"\";const f=(t,e)=>{const i=be(this,mi,\"f\").get(t);if(!i||!i.length)return!1;for(let t of i)if(t.width===e.width&&t.height===e.height)return!0;return!1};if(this._mediaStream){d=null===(u=be(this,Je,\"f\"))||void 0===u?void 0:u.deviceId;let e=be(this,mi,\"f\").get(d);if(e&&!t)return JSON.parse(JSON.stringify(e));e=[],be(this,mi,\"f\").set(d,e),xe(this,ni,!0,\"f\");try{for(let t of this.detectedResolutions){await be(this,ze,\"f\").applyConstraints({width:{ideal:t.width},height:{ideal:t.height}}),be(this,He,\"m\",wi).call(this);const i=be(this,ze,\"f\").getSettings(),r={width:i.width,height:i.height};f(d,r)||e.push({width:r.width,height:r.height})}}catch(t){throw be(this,He,\"m\",Ti).call(this),xe(this,ni,!1,\"f\"),t}try{await be(this,He,\"m\",Ci).call(this)}catch(t){if(\"AbortError\"===t.name)return e;throw t}finally{xe(this,ni,!1,\"f\")}return e}{const e=async(t,e,i)=>{const r={video:{deviceId:{exact:t},width:{ideal:e},height:{ideal:i}}};let n=null;try{n=await navigator.mediaDevices.getUserMedia(r)}catch(t){return null}if(!n)return null;const s=n.getVideoTracks();let o=null;try{const t=s[0].getSettings();o={width:t.width,height:t.height}}catch(t){const e=document.createElement(\"video\");e.srcObject=n,o={width:e.videoWidth,height:e.videoHeight},e.srcObject=null}return s.forEach((t=>{t.stop()})),o};let i=(null===(s=null===(n=null===(r=be(this,Ze,\"f\"))||void 0===r?void 0:r.video)||void 0===n?void 0:n.deviceId)||void 0===s?void 0:s.exact)||(null===(h=null===(a=null===(o=be(this,Ze,\"f\"))||void 0===o?void 0:o.video)||void 0===a?void 0:a.deviceId)||void 0===h?void 0:h.ideal)||(null===(c=null===(l=be(this,Ze,\"f\"))||void 0===l?void 0:l.video)||void 0===c?void 0:c.deviceId);if(!i)return[];let u=be(this,mi,\"f\").get(i);if(u&&!t)return JSON.parse(JSON.stringify(u));u=[],be(this,mi,\"f\").set(i,u);for(let t of this.detectedResolutions){const r=await e(i,t.width,t.height);r&&!f(i,r)&&u.push({width:r.width,height:r.height})}return u}}async setMediaStreamConstraints(t,e){if(!(t=>{return null!==t&&\"[object Object]\"===(e=t,Object.prototype.toString.call(e));var e})(t))throw new TypeError(\"Invalid 'mediaStreamConstraints'.\");xe(this,Ze,JSON.parse(JSON.stringify(t)),\"f\"),xe(this,Qe,null,\"f\"),e&&be(this,He,\"m\",Si).call(this)}getMediaStreamConstraints(){return JSON.parse(JSON.stringify(be(this,Ze,\"f\")))}resetMediaStreamConstraints(){xe(this,Ze,this.defaultConstraints?JSON.parse(JSON.stringify(this.defaultConstraints)):null,\"f\")}getCameraCapabilities(){if(!be(this,ze,\"f\")||\"opened\"!==this.state)throw new Error(\"Camera is not open.\");return be(this,ze,\"f\").getCapabilities?be(this,ze,\"f\").getCapabilities():{}}getCameraSettings(){if(!be(this,ze,\"f\")||\"opened\"!==this.state)throw new Error(\"Camera is not open.\");return be(this,ze,\"f\").getSettings()}async turnOnTorch(){if(!be(this,ze,\"f\")||\"opened\"!==this.state)throw new Error(\"Camera is not open.\");const t=this.getCameraCapabilities();if(!(null==t?void 0:t.torch))throw Error(\"Not supported.\");await be(this,ze,\"f\").applyConstraints({advanced:[{torch:!0}]})}async turnOffTorch(){if(!be(this,ze,\"f\")||\"opened\"!==this.state)throw new Error(\"Camera is not open.\");const t=this.getCameraCapabilities();if(!(null==t?void 0:t.torch))throw Error(\"Not supported.\");await be(this,ze,\"f\").applyConstraints({advanced:[{torch:!1}]})}async setColorTemperature(t,e){var i;if(\"number\"!=typeof t)throw new TypeError(\"Invalid 'value'.\");if(!be(this,ze,\"f\")||\"opened\"!==this.state)throw new Error(\"Camera is not open.\");const r=null===(i=this.getCameraCapabilities())||void 0===i?void 0:i.colorTemperature;if(!r)throw Error(\"Not supported.\");return e&&(t<r.min?t=r.min:t>r.max&&(t=r.max),t=Mi(t,r.min,r.step,r.max)),await be(this,ze,\"f\").applyConstraints({advanced:[{colorTemperature:t,whiteBalanceMode:\"manual\"}]}),t}getColorTemperature(){return this.getCameraSettings().colorTemperature||0}async setExposureCompensation(t,e){var i;if(\"number\"!=typeof t)throw new TypeError(\"Invalid 'value'.\");if(!be(this,ze,\"f\")||\"opened\"!==this.state)throw new Error(\"Camera is not open.\");const r=null===(i=this.getCameraCapabilities())||void 0===i?void 0:i.exposureCompensation;if(!r)throw Error(\"Not supported.\");return e&&(t<r.min?t=r.min:t>r.max&&(t=r.max),t=Mi(t,r.min,r.step,r.max)),await be(this,ze,\"f\").applyConstraints({advanced:[{exposureCompensation:t}]}),t}getExposureCompensation(){return this.getCameraSettings().exposureCompensation||0}async setFrameRate(t,e){var i;if(\"number\"!=typeof t)throw new TypeError(\"Invalid 'value'.\");if(!be(this,ze,\"f\")||\"opened\"!==this.state)throw new Error(\"Camera is not open.\");let r=null===(i=this.getCameraCapabilities())||void 0===i?void 0:i.frameRate;if(!r)throw Error(\"Not supported.\");e&&(t<r.min?t=r.min:t>r.max&&(t=r.max));const n=this.getResolution();return await be(this,ze,\"f\").applyConstraints({width:{ideal:Math.max(n.width,n.height)},frameRate:t}),t}getFrameRate(){return this.getCameraSettings().frameRate}async setFocus(t,e){if(\"object\"!=typeof t||Array.isArray(t)||null==t)throw new TypeError(\"Invalid 'settings'.\");if(!be(this,ze,\"f\")||\"opened\"!==this.state)throw new Error(\"Camera is not open.\");const i=this.getCameraCapabilities(),r=null==i?void 0:i.focusMode,n=null==i?void 0:i.focusDistance;if(!r)throw Error(\"Not supported.\");if(\"string\"!=typeof t.mode)throw TypeError(\"Invalid 'mode'.\");const s=t.mode.toLowerCase();if(!r.includes(s))throw Error(\"Unsupported focus mode.\");if(\"manual\"===s){if(!n)throw Error(\"Manual focus unsupported.\");if(t.hasOwnProperty(\"distance\")){let i=t.distance;e&&(i<n.min?i=n.min:i>n.max&&(i=n.max),i=Mi(i,n.min,n.step,n.max)),this._focusParameters.focusArea=null,await be(this,ze,\"f\").applyConstraints({advanced:[{focusMode:s,focusDistance:i}]})}else{if(!t.area)throw new Error(\"'distance' or 'area' should be specified in 'manual' mode.\");{const e=t.area.centerPoint;let i=t.area.width,r=t.area.height;if(!i||!r){const t=this.getResolution();i||(i=2*Math.round(Math.min(t.width,t.height)/this._focusParameters.defaultFocusAreaSizeRatio/2)+\"px\"),r||(r=2*Math.round(Math.min(t.width,t.height)/this._focusParameters.defaultFocusAreaSizeRatio/2)+\"px\")}this._focusParameters.focusArea={centerPoint:{x:e.x,y:e.y},width:i,height:r},await be(this,He,\"m\",Ai).call(this,e,i,r)}}}else this._focusParameters.focusArea=null,await be(this,ze,\"f\").applyConstraints({advanced:[{focusMode:s}]})}getFocus(){const t=this.getCameraSettings(),e=t.focusMode;return e?\"manual\"===e?this._focusParameters.focusArea?{mode:\"manual\",area:JSON.parse(JSON.stringify(this._focusParameters.focusArea))}:{mode:\"manual\",distance:t.focusDistance}:{mode:e}:null}async enableTapToFocus(){xe(this,si,!0,\"f\")}disableTapToFocus(){xe(this,si,!1,\"f\")}isTapToFocusEnabled(){return be(this,si,\"f\")}async setZoom(t){if(\"object\"!=typeof t||Array.isArray(t)||null==t)throw new TypeError(\"Invalid 'settings'.\");if(\"number\"!=typeof t.factor)throw new TypeError(\"Illegal type of 'factor'.\");if(t.factor<1)throw new RangeError(\"Invalid 'factor'.\");if(\"opened\"!==this.state)throw new Error(\"Video is not playing.\");t.centerPoint?be(this,He,\"m\",Ii).call(this,t.centerPoint):this.resetScaleCenter();try{if(be(this,He,\"m\",Li).call(this,be(this,ui,\"f\"))){const e=await this.setHardwareScale(t.factor,!0);let i=this.getHardwareScale();1==i&&1!=e&&(i=e),t.factor>i?this.setSoftwareScale(t.factor/i):this.setSoftwareScale(1)}else await this.setHardwareScale(1),this.setSoftwareScale(t.factor)}catch(e){const i=e.message||e;if(\"Not supported.\"!==i&&\"Camera is not open.\"!==i)throw e;this.setSoftwareScale(t.factor)}}getZoom(){if(\"opened\"!==this.state)throw new Error(\"Video is not playing.\");let t=1;try{t=this.getHardwareScale()}catch(t){if(\"Camera is not open.\"!==(t.message||t))throw t}return{factor:t*be(this,ci,\"f\")}}async resetZoom(){await this.setZoom({factor:1})}async setHardwareScale(t,e){var i;if(\"number\"!=typeof t)throw new TypeError(\"Invalid 'value'.\");if(t<1)throw new RangeError(\"Invalid 'value'.\");if(!be(this,ze,\"f\")||\"opened\"!==this.state)throw new Error(\"Camera is not open.\");const r=null===(i=this.getCameraCapabilities())||void 0===i?void 0:i.zoom;if(!r)throw Error(\"Not supported.\");return e&&(t<r.min?t=r.min:t>r.max&&(t=r.max),t=Mi(t,r.min,r.step,r.max)),await be(this,ze,\"f\").applyConstraints({advanced:[{zoom:t}]}),t}getHardwareScale(){return this.getCameraSettings().zoom||1}setSoftwareScale(t,e){if(\"number\"!=typeof t)throw new TypeError(\"Invalid 'value'.\");if(t<1)throw new RangeError(\"Invalid 'value'.\");if(\"opened\"!==this.state)throw new Error(\"Video is not playing.\");e&&be(this,He,\"m\",Ii).call(this,e),xe(this,ci,t,\"f\"),this.updateVideoElWhenSoftwareScaled()}getSoftwareScale(){return be(this,ci,\"f\")}resetScaleCenter(){if(\"opened\"!==this.state)throw new Error(\"Video is not playing.\");const t=this.getResolution();xe(this,ui,{x:t.width/2,y:t.height/2},\"f\")}resetSoftwareScale(){this.setSoftwareScale(1),this.resetScaleCenter()}getFrameData(t){if(this.disposed)throw Error(\"The 'Camera' instance has been disposed.\");if(!this.isVideoLoaded())return null;if(be(this,ni,\"f\"))return null;const e=Date.now();Fi._onLog&&Fi._onLog(\"getFrameData() START: \"+e);const i=be(this,Xe,\"f\").videoWidth,r=be(this,Xe,\"f\").videoHeight;let n={sx:0,sy:0,sWidth:i,sHeight:r,dWidth:i,dHeight:r};(null==t?void 0:t.position)&&(n=JSON.parse(JSON.stringify(t.position)));let s=Me.RGBA;(null==t?void 0:t.pixelFormat)&&(s=t.pixelFormat);let o=be(this,ci,\"f\");(null==t?void 0:t.scale)&&(o=t.scale);let a=be(this,ui,\"f\");if(null==t?void 0:t.scaleCenter){if(\"string\"!=typeof t.scaleCenter.x||\"string\"!=typeof t.scaleCenter.y)throw new Error(\"Invalid scale center.\");let e=0,n=0;if(t.scaleCenter.x.endsWith(\"px\"))e=parseFloat(t.scaleCenter.x);else{if(!t.scaleCenter.x.endsWith(\"%\"))throw new Error(\"Invalid scale center.\");e=parseFloat(t.scaleCenter.x)/100*i}if(t.scaleCenter.y.endsWith(\"px\"))n=parseFloat(t.scaleCenter.y);else{if(!t.scaleCenter.y.endsWith(\"%\"))throw new Error(\"Invalid scale center.\");n=parseFloat(t.scaleCenter.y)/100*r}if(isNaN(e)||isNaN(n))throw new Error(\"Invalid scale center.\");a.x=Math.round(e),a.y=Math.round(n)}let h=null;if((null==t?void 0:t.bufferContainer)&&(h=t.bufferContainer),0==i||0==r)return null;1!==o&&(n.sWidth=Math.round(n.sWidth/o),n.sHeight=Math.round(n.sHeight/o),n.sx=Math.round((1-1/o)*a.x+n.sx/o),n.sy=Math.round((1-1/o)*a.y+n.sy/o));const l=this.imageDataGetter.getImageData(be(this,Xe,\"f\"),i,r,n,{pixelFormat:s,bufferContainer:h});if(!l)return null;const c=Date.now();return Fi._onLog&&Fi._onLog(\"getFrameData() END: \"+c),{data:l.data,width:l.width,height:l.height,pixelFormat:l.pixelFormat,timeSpent:c-e,timeStamp:c,toCanvas:be(this,di,\"f\")}}on(t,e){if(!be(this,gi,\"f\").includes(t.toLowerCase()))throw new Error(`Event '${t}' does not exist.`);be(this,fi,\"f\").on(t,e)}off(t,e){be(this,fi,\"f\").off(t,e)}async dispose(){this.tapFocusEventBoundEl=null,await this.close(),this.releaseVideoEl(),be(this,fi,\"f\").dispose(),this.imageDataGetter.dispose(),document.removeEventListener(\"visibilitychange\",be(this,vi,\"f\")),xe(this,_i,!0,\"f\")}}var Pi,ki,Ri,Bi,ji,Wi,Ui,Vi,Gi,Ni,Yi,Hi,Xi,zi,qi,Ki,Zi,Ji,Qi,$i,tr,er,ir,rr,nr,sr,or,ar,hr,lr,cr,ur,dr,fr,gr;Xe=new WeakMap,ze=new WeakMap,qe=new WeakMap,Ke=new WeakMap,Ze=new WeakMap,Je=new WeakMap,Qe=new WeakMap,$e=new WeakMap,ti=new WeakMap,ei=new WeakMap,ii=new WeakMap,ri=new WeakMap,ni=new WeakMap,si=new WeakMap,oi=new WeakMap,ai=new WeakMap,hi=new WeakMap,li=new WeakMap,ci=new WeakMap,ui=new WeakMap,di=new WeakMap,fi=new WeakMap,gi=new WeakMap,mi=new WeakMap,pi=new WeakMap,vi=new WeakMap,_i=new WeakMap,He=new WeakSet,yi=async function(){const t=this.getMediaStreamConstraints();if(\"boolean\"==typeof t.video&&(t.video={}),t.video.deviceId);else if(be(this,Qe,\"f\"))delete t.video.facingMode,t.video.deviceId={exact:be(this,Qe,\"f\")};else if(this.ifSaveLastUsedCamera&&Fi.isStorageAvailable&&window.localStorage.getItem(\"dce_last_camera_id\")){delete t.video.facingMode,t.video.deviceId={ideal:window.localStorage.getItem(\"dce_last_camera_id\")};const e=JSON.parse(window.localStorage.getItem(\"dce_last_apply_width\")),i=JSON.parse(window.localStorage.getItem(\"dce_last_apply_height\"));e&&i&&(t.video.width=e,t.video.height=i)}else if(this.ifSkipCameraInspection);else{const e=async t=>{let e=null;return\"environment\"===t&&[\"Android\",\"HarmonyOS\",\"iPhone\",\"iPad\"].includes(Ae.OS)?(await this._getCameras(!1),be(this,He,\"m\",wi).call(this),e=Fi.findBestCamera(this._arrCameras,\"environment\",{getMainCameraInIOS:this.selectIOSRearMainCameraAsDefault})):t||[\"Android\",\"HarmonyOS\",\"iPhone\",\"iPad\"].includes(Ae.OS)||(await this._getCameras(!1),be(this,He,\"m\",wi).call(this),e=Fi.findBestCamera(this._arrCameras,null,{getMainCameraInIOS:this.selectIOSRearMainCameraAsDefault})),e};let i=t.video.facingMode;i instanceof Array&&i.length&&(i=i[0]),\"object\"==typeof i&&(i=i.exact||i.ideal);const r=await e(i);r&&(delete t.video.facingMode,t.video.deviceId={exact:r})}return t},wi=function(){if(be(this,ei,\"f\")){const t=new Error(\"The operation was interrupted.\");throw t.name=\"AbortError\",t}},bi=async function(t){var e,i;if(!(null===(i=null===(e=null===window||void 0===window?void 0:window.navigator)||void 0===e?void 0:e.mediaDevices)||void 0===i?void 0:i.getUserMedia))throw new Error(\"Failed to access the camera because the browser is too old or the page is loaded from an insecure origin.\");let r;try{Fi._onLog&&Fi._onLog(\"======try getUserMedia========\");let e=[0,500,1e3,2e3],i=null;const n=async t=>{for(let n of e){n&&(await new Promise((t=>setTimeout(t,n))),be(this,He,\"m\",wi).call(this));try{Fi._onLog&&Fi._onLog(\"ask \"+JSON.stringify(t)),r=await navigator.mediaDevices.getUserMedia(t),be(this,He,\"m\",wi).call(this);break}catch(t){if(\"NotFoundError\"===t.name||\"NotAllowedError\"===t.name||\"AbortError\"===t.name||\"OverconstrainedError\"===t.name)throw t;i=t,Fi._onLog&&Fi._onLog(t.message||t)}}};if(await n(t),r||\"object\"!=typeof t.video||(t.video.deviceId&&(delete t.video.deviceId,await n(t)),!r&&t.video.facingMode&&(delete t.video.facingMode,await n(t)),r||!t.video.width&&!t.video.height||(delete t.video.width,delete t.video.height,await n(t))),!r)throw i;return r}catch(t){throw null==r||r.getTracks().forEach((t=>{t.stop()})),\"NotFoundError\"===t.name&&(DOMException?t=new DOMException(\"No camera available, please use a device with an accessible camera.\",t.name):(t=new Error(\"No camera available, please use a device with an accessible camera.\")).name=\"NotFoundError\"),t}},xi=function(){this._mediaStream&&(this._mediaStream.getTracks().forEach((t=>{t.stop()})),this._mediaStream=null),xe(this,ze,null,\"f\")},Ci=async function(){xe(this,ei,!1,\"f\");const t=xe(this,ti,Symbol(),\"f\");if(be(this,ii,\"f\")&&\"pending\"===be(this,ri,\"f\")){try{await be(this,ii,\"f\")}catch(t){}be(this,He,\"m\",wi).call(this)}if(t!==be(this,ti,\"f\"))return;const e=xe(this,ii,(async()=>{xe(this,ri,\"pending\",\"f\");try{if(this.videoSrc){if(!be(this,Xe,\"f\"))throw new Error(\"'videoEl' should be set.\");await Fi.playVideo(be(this,Xe,\"f\"),this.videoSrc,this.cameraOpenTimeout),be(this,He,\"m\",wi).call(this)}else{let t=await be(this,He,\"m\",yi).call(this);be(this,He,\"m\",xi).call(this);let e=await be(this,He,\"m\",bi).call(this,t);await this._getCameras(!1),be(this,He,\"m\",wi).call(this);const i=()=>{const t=e.getVideoTracks();let i,r;if(t.length&&(i=t[0]),i){const t=i.getSettings();if(t)for(let e of this._arrCameras)if(t.deviceId===e.deviceId){e._checked=!0,e.label=i.label,r=e;break}}return r},r=be(this,Ze,\"f\");if(\"object\"==typeof r.video){let n=r.video.facingMode;if(n instanceof Array&&n.length&&(n=n[0]),\"object\"==typeof n&&(n=n.exact||n.ideal),!(be(this,Qe,\"f\")||this.ifSaveLastUsedCamera&&Fi.isStorageAvailable&&window.localStorage.getItem(\"dce_last_camera_id\")||this.ifSkipCameraInspection||r.video.deviceId)){const r=i(),s=Fi.findBestCamera(this._arrCameras,n,{getMainCameraInIOS:this.selectIOSRearMainCameraAsDefault});s&&s!=(null==r?void 0:r.deviceId)&&(e.getTracks().forEach((t=>{t.stop()})),t.video.deviceId={exact:s},e=await be(this,He,\"m\",bi).call(this,t),be(this,He,\"m\",wi).call(this))}}const n=i();(null==n?void 0:n.deviceId)&&(xe(this,Qe,n&&n.deviceId,\"f\"),this.ifSaveLastUsedCamera&&Fi.isStorageAvailable&&(window.localStorage.setItem(\"dce_last_camera_id\",be(this,Qe,\"f\")),\"object\"==typeof t.video&&t.video.width&&t.video.height&&(window.localStorage.setItem(\"dce_last_apply_width\",JSON.stringify(t.video.width)),window.localStorage.setItem(\"dce_last_apply_height\",JSON.stringify(t.video.height))))),be(this,Xe,\"f\")&&(await Fi.playVideo(be(this,Xe,\"f\"),e,this.cameraOpenTimeout),be(this,He,\"m\",wi).call(this)),this._mediaStream=e;const s=e.getVideoTracks();(null==s?void 0:s.length)&&xe(this,ze,s[0],\"f\"),xe(this,Je,n,\"f\")}}catch(t){throw be(this,He,\"m\",Ti).call(this),xe(this,ri,null,\"f\"),t}xe(this,ri,\"fulfilled\",\"f\")})(),\"f\");return e},Si=async function(){var t;if(\"closed\"===this.state||this.videoSrc)return;const e=null===(t=be(this,Je,\"f\"))||void 0===t?void 0:t.deviceId,i=this.getResolution();await be(this,He,\"m\",Ci).call(this);const r=this.getResolution();e&&e!==be(this,Je,\"f\").deviceId&&be(this,fi,\"f\").fire(\"camera:changed\",[be(this,Je,\"f\").deviceId,e],{target:this,async:!1}),i.width==r.width&&i.height==r.height||be(this,fi,\"f\").fire(\"resolution:changed\",[{width:r.width,height:r.height},{width:i.width,height:i.height}],{target:this,async:!1}),be(this,fi,\"f\").fire(\"played\",null,{target:this,async:!1})},Ti=function(){be(this,He,\"m\",xi).call(this),xe(this,Je,null,\"f\"),be(this,Xe,\"f\")&&(be(this,Xe,\"f\").srcObject=null,this.videoSrc&&(be(this,Xe,\"f\").pause(),be(this,Xe,\"f\").currentTime=0)),xe(this,ei,!0,\"f\");try{this.resetSoftwareScale()}catch(t){}},Ei=async function t(e,i){const r=t=>{if(!be(this,ze,\"f\")||!this.isVideoPlaying||t.focusTaskId!=this._focusParameters.curFocusTaskId){be(this,ze,\"f\")&&this.isVideoPlaying||(this._focusParameters.isDoingFocus=0);const e=new Error(`Focus task ${t.focusTaskId} canceled.`);throw e.name=\"DeprecatedTaskError\",e}1===this._focusParameters.isDoingFocus&&Date.now()-t.timeStart>this._focusParameters.focusCancelableTime&&(this._focusParameters.isDoingFocus=-1)};let n;i=Mi(i,this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),await be(this,ze,\"f\").applyConstraints({advanced:[{focusMode:\"manual\",focusDistance:i}]}),r(e),n=null==this._focusParameters.oldDistance?this._focusParameters.kTimeout*Math.max(Math.abs(1/this._focusParameters.fds.min-1/i),Math.abs(1/this._focusParameters.fds.max-1/i))+this._focusParameters.minTimeout:this._focusParameters.kTimeout*Math.abs(1/this._focusParameters.oldDistance-1/i)+this._focusParameters.minTimeout,this._focusParameters.oldDistance=i,await new Promise((t=>{setTimeout(t,n)})),r(e);let s=e.focusL-e.focusW/2,o=e.focusT-e.focusH/2,a=e.focusW,h=e.focusH;const l=this.getResolution();s=Math.round(s),o=Math.round(o),a=Math.round(a),h=Math.round(h),a>l.width&&(a=l.width),h>l.height&&(h=l.height),s<0?s=0:s+a>l.width&&(s=l.width-a),o<0?o=0:o+h>l.height&&(o=l.height-h);const c=4*l.width*l.height*this._focusParameters.defaultTempBufferContainerLenRatio,u=4*a*h;let d=this._focusParameters.tempBufferContainer;if(d){const t=d.length;c>t&&c>=u?d=new Uint8Array(c):u>t&&u>=c&&(d=new Uint8Array(u))}else d=this._focusParameters.tempBufferContainer=new Uint8Array(Math.max(c,u));if(!this.imageDataGetter.getImageData(be(this,Xe,\"f\"),l.width,l.height,{sx:s,sy:o,sWidth:a,sHeight:h,dWidth:a,dHeight:h},{pixelFormat:Me.RGBA,bufferContainer:d}))return be(this,He,\"m\",t).call(this,e,i);const f=d;let g=0;for(let t=0,e=u-8;t<e;++t){let e=f[t]-f[t+8];++t;let i=f[t]-f[t+8];++t;let r=f[t]-f[t+8];++t,g+=e*e+i*i+r*r}return-g},Oi=async function t(e,i,r,n,s,o,a){let h;if(i=Mi(i,this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),n=Mi(n,this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),o?o=Mi(o,this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max):(o=Mi(Math.sqrt((i||this._focusParameters.fds.step)*(n||this._focusParameters.fds.step)),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),a=await be(this,He,\"m\",Ei).call(this,e,o)),a<=r&&a<=s?h=3:r<s&&r<a?h=1:s<r&&s<a&&(h=2),(n-i)/2<=this._focusParameters.fds.step)return 3===h||(1===h?await be(this,ze,\"f\").applyConstraints({advanced:[{focusMode:\"manual\",focusDistance:i}]}):2===h&&await be(this,ze,\"f\").applyConstraints({advanced:[{focusMode:\"manual\",focusDistance:n}]})),!0;if(1===h)return await be(this,He,\"m\",t).call(this,e,i,r,o,a);if(2===h)return await be(this,He,\"m\",t).call(this,e,o,a,n,s);if(3!==h)return r=await be(this,He,\"m\",Ei).call(this,e,i),s=await be(this,He,\"m\",Ei).call(this,e,n),await be(this,He,\"m\",t).call(this,e,i,r,n,s);let l=Mi(Math.sqrt((i||this._focusParameters.fds.step)*(o||this._focusParameters.fds.step)),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),c=Mi(Math.sqrt((n||this._focusParameters.fds.step)*(o||this._focusParameters.fds.step)),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max);if(Math.abs(1/this._focusParameters.oldDistance-1/l)<=Math.abs(1/this._focusParameters.oldDistance-1/c)){let h=await be(this,He,\"m\",Ei).call(this,e,l);if(h<a)return await be(this,He,\"m\",t).call(this,e,i,r,o,a,l,h);if(h==a)return await be(this,He,\"m\",t).call(this,e,l,h,o,a);let u=await be(this,He,\"m\",Ei).call(this,e,c);if(h>a&&a<u)return await be(this,He,\"m\",t).call(this,e,l,h,c,u,o,a);if(a==u)return await be(this,He,\"m\",t).call(this,e,o,a,c,u);if(a>u)return await be(this,He,\"m\",t).call(this,e,o,a,n,s,c,u)}else{let h=await be(this,He,\"m\",Ei).call(this,e,c);if(a>h)return await be(this,He,\"m\",t).call(this,e,o,a,n,s,c,h);if(a==h)return await be(this,He,\"m\",t).call(this,e,o,a,c,h);let u=await be(this,He,\"m\",Ei).call(this,e,l);if(u>a&&a<h)return await be(this,He,\"m\",t).call(this,e,l,u,c,h,o,a);if(u==a)return await be(this,He,\"m\",t).call(this,e,l,u,o,a);if(u<a)return await be(this,He,\"m\",t).call(this,e,i,r,o,a,l,u)}return!1},Ai=async function(t,e,i,r,n){var s;if(1==this._focusParameters.isDoingFocus)return!1;if(!t||\"string\"!=typeof t.x||\"string\"!=typeof t.y)throw new Error(\"Invalid 'centerPoint'.\");if(!e||\"string\"!=typeof e)throw new Error(\"Invalid 'width'.\");if(!i||\"string\"!=typeof i)throw new Error(\"Invalid 'height'.\");const o=this.getResolution();let a=0,h=0;if(t.x.endsWith(\"px\"))a=parseFloat(t.x);else{if(!t.x.endsWith(\"%\"))throw new Error(\"Invalid 'centerPoint'.\");a=parseFloat(t.x)/100*o.width}if(t.y.endsWith(\"px\"))h=parseFloat(t.y);else{if(!t.y.endsWith(\"%\"))throw new Error(\"Invalid 'centerPoint'.\");h=parseFloat(t.y)/100*o.height}if(isNaN(a)||isNaN(h)||a<0||a>o.width||h<0||h>o.height)throw new Error(\"Invalid 'centerPoint'.\");let l=0;if(e.endsWith(\"px\"))l=parseFloat(e);else{if(!e.endsWith(\"%\"))throw new Error(\"Invalid 'width'.\");l=parseFloat(e)/100*o.width}if(isNaN(l)||l<0)throw new Error(\"Invalid 'width'.\");let c=0;if(i.endsWith(\"px\"))c=parseFloat(i);else{if(!i.endsWith(\"%\"))throw new Error(\"Invalid 'height'.\");c=parseFloat(i)/100*o.height}if(isNaN(c)||c<0)throw new Error(\"Invalid 'height'.\");if(1!==be(this,ci,\"f\")){const t=be(this,ci,\"f\"),e=be(this,ui,\"f\");l/=t,c/=t,a=(1-1/t)*e.x+a/t,h=(1-1/t)*e.y+h/t}if(!this._focusSupported)throw new Error(\"Manual focus unsupported.\");if(!this._focusParameters.fds&&(this._focusParameters.fds=null===(s=this.getCameraCapabilities())||void 0===s?void 0:s.focusDistance,!this._focusParameters.fds))throw this._focusSupported=!1,new Error(\"Manual focus unsupported.\");null==this._focusParameters.kTimeout&&(this._focusParameters.kTimeout=(this._focusParameters.maxTimeout-this._focusParameters.minTimeout)/(1/this._focusParameters.fds.min-1/this._focusParameters.fds.max)),this._focusParameters.isDoingFocus=1;const u={focusL:a,focusT:h,focusW:l,focusH:c,focusTaskId:++this._focusParameters.curFocusTaskId,timeStart:Date.now()},d=async(t,e,i)=>{try{(null==e||e<this._focusParameters.fds.min)&&(e=this._focusParameters.fds.min),(null==i||i>this._focusParameters.fds.max)&&(i=this._focusParameters.fds.max),this._focusParameters.oldDistance=null;let r=Mi(Math.sqrt(i*(e||this._focusParameters.fds.step)),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),n=Mi(Math.sqrt((e||this._focusParameters.fds.step)*r),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),s=Mi(Math.sqrt(r*i),this._focusParameters.fds.min,this._focusParameters.fds.step,this._focusParameters.fds.max),o=await be(this,He,\"m\",Ei).call(this,t,s),a=await be(this,He,\"m\",Ei).call(this,t,n),h=await be(this,He,\"m\",Ei).call(this,t,r);if(a>h&&h<o){const e=await be(this,He,\"m\",Oi).call(this,t,n,a,s,o,r,h);return this._focusParameters.isDoingFocus=0,e}if(a<h&&a<o){let i=await be(this,He,\"m\",Ei).call(this,t,e);const s=await be(this,He,\"m\",Oi).call(this,t,e,i,r,h,n,a);return this._focusParameters.isDoingFocus=0,s}if(h>o&&a>o){let e=await be(this,He,\"m\",Ei).call(this,t,i);const n=await be(this,He,\"m\",Oi).call(this,t,r,h,i,e,s,o);return this._focusParameters.isDoingFocus=0,n}if(a==h&&h<o){const e=await be(this,He,\"m\",Oi).call(this,t,n,a,r,h);return this._focusParameters.isDoingFocus=0,e}if(h==o&&a>h){const e=await be(this,He,\"m\",Oi).call(this,t,r,h,s,o);return this._focusParameters.isDoingFocus=0,e}return d(t,e,i)}catch(t){if(\"DeprecatedTaskError\"!==t.name)throw t}};return d(u,r,n)},Ii=function(t){if(\"opened\"!==this.state)throw new Error(\"Video is not playing.\");if(!t||\"string\"!=typeof t.x||\"string\"!=typeof t.y)throw new Error(\"Invalid 'center'.\");const e=this.getResolution();let i=0,r=0;if(t.x.endsWith(\"px\"))i=parseFloat(t.x);else{if(!t.x.endsWith(\"%\"))throw new Error(\"Invalid scale center.\");i=parseFloat(t.x)/100*e.width}if(t.y.endsWith(\"px\"))r=parseFloat(t.y);else{if(!t.y.endsWith(\"%\"))throw new Error(\"Invalid scale center.\");r=parseFloat(t.y)/100*e.height}if(isNaN(i)||isNaN(r))throw new Error(\"Invalid scale center.\");xe(this,ui,{x:i,y:r},\"f\")},Li=function(t){if(\"opened\"!==this.state)throw new Error(\"Video is not playing.\");const e=this.getResolution();return t&&t.x==e.width/2&&t.y==e.height/2},Fi.browserInfo=Ae,Fi.onWarning=null===(Ye=null===window||void 0===window?void 0:window.console)||void 0===Ye?void 0:Ye.warn;class mr{constructor(t){Pi.add(this),ki.set(this,void 0),Ri.set(this,0),Bi.set(this,void 0),ji.set(this,0),Wi.set(this,!1),C(this,ki,t,\"f\")}startCharging(){x(this,Wi,\"f\")||(mr._onLog&&mr._onLog(\"start charging.\"),x(this,Pi,\"m\",Vi).call(this),C(this,Wi,!0,\"f\"))}stopCharging(){x(this,Bi,\"f\")&&clearTimeout(x(this,Bi,\"f\")),x(this,Wi,\"f\")&&(mr._onLog&&mr._onLog(\"stop charging.\"),C(this,Ri,Date.now()-x(this,ji,\"f\"),\"f\"),C(this,Wi,!1,\"f\"))}}ki=new WeakMap,Ri=new WeakMap,Bi=new WeakMap,ji=new WeakMap,Wi=new WeakMap,Pi=new WeakSet,Ui=function(){dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule.cfd(1),mr._onLog&&mr._onLog(\"charge 1.\")},Vi=function t(){0==x(this,Ri,\"f\")&&x(this,Pi,\"m\",Ui).call(this),C(this,ji,Date.now(),\"f\"),x(this,Bi,\"f\")&&clearTimeout(x(this,Bi,\"f\")),C(this,Bi,setTimeout((()=>{C(this,Ri,0,\"f\"),x(this,Pi,\"m\",t).call(this)}),x(this,ki,\"f\")-x(this,Ri,\"f\")),\"f\")};class pr{static beep(){if(!this.allowBeep)return;if(!this.beepSoundSource)return;let t,e=Date.now();if(!(e-x(this,Gi,\"f\",Hi)<100)){if(C(this,Gi,e,\"f\",Hi),x(this,Gi,\"f\",Ni).size&&(t=x(this,Gi,\"f\",Ni).values().next().value,this.beepSoundSource==t.src?(x(this,Gi,\"f\",Ni).delete(t),t.play()):t=null),!t)if(x(this,Gi,\"f\",Yi).size<16){t=new Audio(this.beepSoundSource);let e=null,i=()=>{t.removeEventListener(\"loadedmetadata\",i),t.play(),e=setTimeout((()=>{x(this,Gi,\"f\",Yi).delete(t)}),2e3*t.duration)};t.addEventListener(\"loadedmetadata\",i),t.addEventListener(\"ended\",(()=>{null!=e&&(clearTimeout(e),e=null),t.pause(),t.currentTime=0,x(this,Gi,\"f\",Yi).delete(t),x(this,Gi,\"f\",Ni).add(t)}))}else x(this,Gi,\"f\",Xi)||(C(this,Gi,!0,\"f\",Xi),console.warn(\"The requested audio tracks exceed 16 and will not be played.\"));t&&x(this,Gi,\"f\",Yi).add(t)}}static vibrate(){if(this.allowVibrate){if(!navigator||!navigator.vibrate)throw new Error(\"Not supported.\");navigator.vibrate(pr.vibrateDuration)}}}Gi=pr,Ni={value:new Set},Yi={value:new Set},Hi={value:0},Xi={value:!1},pr.allowBeep=!0,pr.beepSoundSource=\"data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAABQAAAkAAgICAgICAgICAgICAgICAgICAgKCgoKCgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC41NAAAAAAAAAAAAAAAACQEUQAAAAAAAAJAk0uXRQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+MYxAANQAbGeUEQAAHZYZ3fASqD4P5TKBgocg+Bw/8+CAYBA4XB9/4EBAEP4nB9+UOf/6gfUCAIKyjgQ/Kf//wfswAAAwQA/+MYxAYOqrbdkZGQAMA7DJLCsQxNOij///////////+tv///3RWiZGBEhsf/FO/+LoCSFs1dFVS/g8f/4Mhv0nhqAieHleLy/+MYxAYOOrbMAY2gABf/////////////////usPJ66R0wI4boY9/8jQYg//g2SPx1M0N3Z0kVJLIs///Uw4aMyvHJJYmPBYG/+MYxAgPMALBucAQAoGgaBoFQVBUFQWDv6gZBUFQVBUGgaBr5YSgqCoKhIGg7+IQVBUFQVBoGga//SsFSoKnf/iVTEFNRTMu/+MYxAYAAANIAAAAADEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV\",pr.allowVibrate=!0,pr.vibrateDuration=300;const vr=new Map([[dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_GRAYSCALED,Me.GREY],[dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_ABGR_8888,Me.RGBA],[dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_ARGB_8888,Me.BGRA]]),_r=new Map([[Me.GREY,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_GRAYSCALED],[Me.RGBA,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_ABGR_8888],[Me.BGRA,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_ARGB_8888]]),yr=\"function\"==typeof BigInt?{BF_NULL:BigInt(0),BF_ALL:BigInt(0x10000000000000000),BF_DEFAULT:BigInt(4265345023),BF_ONED:BigInt(3147775),BF_GS1_DATABAR:BigInt(260096),BF_CODE_39:BigInt(1),BF_CODE_128:BigInt(2),BF_CODE_93:BigInt(4),BF_CODABAR:BigInt(8),BF_ITF:BigInt(16),BF_EAN_13:BigInt(32),BF_EAN_8:BigInt(64),BF_UPC_A:BigInt(128),BF_UPC_E:BigInt(256),BF_INDUSTRIAL_25:BigInt(512),BF_CODE_39_EXTENDED:BigInt(1024),BF_GS1_DATABAR_OMNIDIRECTIONAL:BigInt(2048),BF_GS1_DATABAR_TRUNCATED:BigInt(4096),BF_GS1_DATABAR_STACKED:BigInt(8192),BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL:BigInt(16384),BF_GS1_DATABAR_EXPANDED:BigInt(32768),BF_GS1_DATABAR_EXPANDED_STACKED:BigInt(65536),BF_GS1_DATABAR_LIMITED:BigInt(131072),BF_PATCHCODE:BigInt(262144),BF_CODE_32:BigInt(16777216),BF_PDF417:BigInt(33554432),BF_QR_CODE:BigInt(67108864),BF_DATAMATRIX:BigInt(134217728),BF_AZTEC:BigInt(268435456),BF_MAXICODE:BigInt(536870912),BF_MICRO_QR:BigInt(1073741824),BF_MICRO_PDF417:BigInt(524288),BF_GS1_COMPOSITE:BigInt(2147483648),BF_MSI_CODE:BigInt(1048576),BF_CODE_11:BigInt(2097152),BF_TWO_DIGIT_ADD_ON:BigInt(4194304),BF_FIVE_DIGIT_ADD_ON:BigInt(8388608),BF_MATRIX_25:BigInt(68719476736),BF_POSTALCODE:BigInt(0x3f0000000000000),BF_NONSTANDARD_BARCODE:BigInt(4294967296),BF_USPSINTELLIGENTMAIL:BigInt(4503599627370496),BF_POSTNET:BigInt(9007199254740992),BF_PLANET:BigInt(0x40000000000000),BF_AUSTRALIANPOST:BigInt(0x80000000000000),BF_RM4SCC:BigInt(72057594037927940),BF_KIX:BigInt(0x200000000000000),BF_DOTCODE:BigInt(8589934592),BF_PHARMACODE_ONE_TRACK:BigInt(17179869184),BF_PHARMACODE_TWO_TRACK:BigInt(34359738368),BF_PHARMACODE:BigInt(51539607552)}:{BF_NULL:\"0x00\",BF_ALL:\"0xFFFFFFFFFFFFFFFF\",BF_DEFAULT:\"0xFE3BFFFF\",BF_ONED:\"0x003007FF\",BF_GS1_DATABAR:\"0x0003F800\",BF_CODE_39:\"0x1\",BF_CODE_128:\"0x2\",BF_CODE_93:\"0x4\",BF_CODABAR:\"0x8\",BF_ITF:\"0x10\",BF_EAN_13:\"0x20\",BF_EAN_8:\"0x40\",BF_UPC_A:\"0x80\",BF_UPC_E:\"0x100\",BF_INDUSTRIAL_25:\"0x200\",BF_CODE_39_EXTENDED:\"0x400\",BF_GS1_DATABAR_OMNIDIRECTIONAL:\"0x800\",BF_GS1_DATABAR_TRUNCATED:\"0x1000\",BF_GS1_DATABAR_STACKED:\"0x2000\",BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL:\"0x4000\",BF_GS1_DATABAR_EXPANDED:\"0x8000\",BF_GS1_DATABAR_EXPANDED_STACKED:\"0x10000\",BF_GS1_DATABAR_LIMITED:\"0x20000\",BF_PATCHCODE:\"0x00040000\",BF_CODE_32:\"0x01000000\",BF_PDF417:\"0x02000000\",BF_QR_CODE:\"0x04000000\",BF_DATAMATRIX:\"0x08000000\",BF_AZTEC:\"0x10000000\",BF_MAXICODE:\"0x20000000\",BF_MICRO_QR:\"0x40000000\",BF_MICRO_PDF417:\"0x00080000\",BF_GS1_COMPOSITE:\"0x80000000\",BF_MSI_CODE:\"0x100000\",BF_CODE_11:\"0x200000\",BF_TWO_DIGIT_ADD_ON:\"0x400000\",BF_FIVE_DIGIT_ADD_ON:\"0x800000\",BF_MATRIX_25:\"0x1000000000\",BF_POSTALCODE:\"0x3F0000000000000\",BF_NONSTANDARD_BARCODE:\"0x100000000\",BF_USPSINTELLIGENTMAIL:\"0x10000000000000\",BF_POSTNET:\"0x20000000000000\",BF_PLANET:\"0x40000000000000\",BF_AUSTRALIANPOST:\"0x80000000000000\",BF_RM4SCC:\"0x100000000000000\",BF_KIX:\"0x200000000000000\",BF_DOTCODE:\"0x200000000\",BF_PHARMACODE_ONE_TRACK:\"0x400000000\",BF_PHARMACODE_TWO_TRACK:\"0x800000000\",BF_PHARMACODE:\"0xC00000000\"};class wr extends dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.ImageSourceAdapter{static set _onLog(t){C(wr,qi,t,\"f\",Ki),Fi._onLog=t,mr._onLog=t}static get _onLog(){return x(wr,qi,\"f\",Ki)}static async detectEnvironment(){return await(async()=>({wasm:I,worker:L,getUserMedia:D,camera:await M(),browser:A.browser,version:A.version,OS:A.OS}))()}static async testCameraAccess(){const t=await Fi.testCameraAccess();return t.ok?{ok:!0,message:\"Successfully accessed the camera.\"}:\"InsecureContext\"===t.errorName?{ok:!1,message:\"Insecure context.\"}:\"OverconstrainedError\"===t.errorName||\"NotFoundError\"===t.errorName?{ok:!1,message:\"No camera detected.\"}:\"NotAllowedError\"===t.errorName?{ok:!1,message:\"No permission to access camera.\"}:\"AbortError\"===t.errorName?{ok:!1,message:\"Some problem occurred which prevented the device from being used.\"}:\"NotReadableError\"===t.errorName?{ok:!1,message:\"A hardware error occurred.\"}:\"SecurityError\"===t.errorName?{ok:!1,message:\"User media support is disabled.\"}:{ok:!1,message:t.errorMessage}}static async createInstance(t){var e,r;if(t&&!(t instanceof we))throw new TypeError(\"Invalid view.\");if(null===(e=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license)||void 0===e?void 0:e.LicenseManager){if(!(null===(r=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license)||void 0===r?void 0:r.LicenseManager.bCallInitLicense))throw new Error(\"License is not set.\");await dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule.loadWasm([\"license\"]),await dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license.dynamsoft()}const n=new wr(t);return wr.onWarning&&(location&&\"file:\"===location.protocol?setTimeout((()=>{wr.onWarning&&wr.onWarning({id:1,message:\"The page is opened over file:// and Dynamsoft Camera Enhancer may not work properly. Please open the page via https://.\"})}),0):!1!==window.isSecureContext&&navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||setTimeout((()=>{wr.onWarning&&wr.onWarning({id:2,message:\"Dynamsoft Camera Enhancer may not work properly in a non-secure context. Please open the page via https://.\"})}),0)),n}get video(){return this.cameraManager.getVideoEl()}set videoSrc(t){if(!this.cameraManager)throw new Error(\"Camera manager is null.\");this.cameraView&&(this.cameraView._hideDefaultSelection=!0),this.cameraManager.videoSrc=t}get videoSrc(){var t;return null===(t=this.cameraManager)||void 0===t?void 0:t.videoSrc}set ifSaveLastUsedCamera(t){if(!this.cameraManager)throw new Error(\"Camera manager is null.\");this.cameraManager.ifSaveLastUsedCamera=t}get ifSaveLastUsedCamera(){var t;return null===(t=this.cameraManager)||void 0===t?void 0:t.ifSaveLastUsedCamera}set ifSkipCameraInspection(t){if(!this.cameraManager)throw new Error(\"Camera manager is null.\");this.cameraManager.ifSkipCameraInspection=t}get ifSkipCameraInspection(){var t;return null===(t=this.cameraManager)||void 0===t?void 0:t.ifSkipCameraInspection}set cameraOpenTimeout(t){if(!this.cameraManager)throw new Error(\"Camera manager is null.\");this.cameraManager.cameraOpenTimeout=t}get cameraOpenTimeout(){var t;return null===(t=this.cameraManager)||void 0===t?void 0:t.cameraOpenTimeout}set singleFrameMode(t){if(![\"disabled\",\"image\",\"camera\"].includes(t))throw new Error(\"Invalid value.\");if(this.isOpen())throw new Error(\"It is not allowed to change `singleFrameMode` when the camera is open.\");C(this,Qi,t,\"f\")}get singleFrameMode(){return x(this,Qi,\"f\")}get _isFetchingStarted(){return x(this,nr,\"f\")}get disposed(){return x(this,lr,\"f\")}constructor(t){if(super(),zi.add(this),Zi.set(this,\"closed\"),Ji.set(this,void 0),this.isTorchOn=void 0,Qi.set(this,void 0),this._onCameraSelChange=async()=>{this.isOpen()&&this.cameraView&&!this.cameraView.disposed&&await this.selectCamera(this.cameraView._selCam.value)},this._onResolutionSelChange=async()=>{if(!this.isOpen())return;if(!this.cameraView||this.cameraView.disposed)return;let t,e;if(this.cameraView._selRsl&&-1!=this.cameraView._selRsl.selectedIndex){let i=this.cameraView._selRsl.options[this.cameraView._selRsl.selectedIndex];t=parseInt(i.getAttribute(\"data-width\")),e=parseInt(i.getAttribute(\"data-height\"))}await this.setResolution({width:t,height:e})},this._onCloseBtnClick=async()=>{this.isOpen()&&this.cameraView&&!this.cameraView.disposed&&this.close()},$i.set(this,((t,e,i,r)=>{const n=Date.now(),s={sx:r.x,sy:r.y,sWidth:r.width,sHeight:r.height,dWidth:r.width,dHeight:r.height},o=Math.max(s.dWidth,s.dHeight);if(this.canvasSizeLimit&&o>this.canvasSizeLimit){const t=this.canvasSizeLimit/o;s.dWidth>s.dHeight?(s.dWidth=this.canvasSizeLimit,s.dHeight=Math.round(s.dHeight*t)):(s.dWidth=Math.round(s.dWidth*t),s.dHeight=this.canvasSizeLimit)}const a=this.cameraManager.imageDataGetter.getImageData(t,e,i,s,{pixelFormat:vr.get(this.getPixelFormat())});let h=null;if(a){const t=Date.now();let o;if(a.pixelFormat===Me.GREY)o=a.width;else o=4*a.width;let l=!0;0===s.sx&&0===s.sy&&s.sWidth===e&&s.sHeight===i&&(l=!1),h={bytes:a.data,width:a.width,height:a.height,stride:o,format:_r.get(a.pixelFormat),tag:{imageId:this._imageId==Number.MAX_VALUE?this._imageId=0:++this._imageId,type:dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImageTagType.ITT_FILE_IMAGE,isCropped:l,cropRegion:{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height,isMeasuredInPercentage:!1},originalWidth:e,originalHeight:i,currentWidth:a.width,currentHeight:a.height,timeSpent:t-n,timeStamp:t},toCanvas:x(this,tr,\"f\"),isDCEFrame:!0}}return h})),this._onSingleFrameAcquired=t=>{let e;e=this.cameraView?this.cameraView.getConvertedRegion():at.convert(x(this,ir,\"f\"),t.width,t.height),e||(e={x:0,y:0,width:t.width,height:t.height});const i=x(this,$i,\"f\").call(this,t,t.width,t.height,e);x(this,Ji,\"f\").fire(\"singleFrameAcquired\",[i],{async:!1,copy:!1})},tr.set(this,(function(){if(!(this.bytes instanceof Uint8Array||this.bytes instanceof Uint8ClampedArray))throw new TypeError(\"Invalid bytes.\");if(\"number\"!=typeof this.width||this.width<=0)throw new Error(\"Invalid width.\");if(\"number\"!=typeof this.height||this.height<=0)throw new Error(\"Invalid height.\");const t=document.createElement(\"canvas\");let e;t.width=this.width,t.height=this.height;if(this.format===dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_GRAYSCALED){e=new Uint8ClampedArray(this.width*this.height*4);for(let t=0;t<e.length;t+=4)e[t]=this.bytes[t/4],e[t+1]=this.bytes[t/4],e[t+2]=this.bytes[t/4],e[t+3]=255}else e=new Uint8ClampedArray(this.bytes.buffer);return t.getContext(\"2d\").putImageData(new ImageData(e,this.width,this.height),0,0),t})),er.set(this,void 0),ir.set(this,void 0),rr.set(this,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_ABGR_8888),nr.set(this,!1),this._imageId=-1,sr.set(this,void 0),this.fetchInterval=0,or.set(this,{enhancedFocus:!1,autoZoom:!1,tapToFocus:!1}),ar.set(this,{minValue:1,maxValue:999,autoFocusFrameArray:[],autoFocusFrameLimit:[5,3],autoZoomDetectionArea:.5,autoZoomTargetBorder:.9,autoZoomIdealArea:[0,.05],autoZoomInFrameArray:[],autoZoomInFrameLimit:[5,3],autoZoomInMaxTimes:5,autoZoomInMinStep:Math.pow(10,.2),autoZoomInIdealModuleSize:6,autoZoomOutFrameCount:0,autoZoomOutFrameLimit:3,autoZoomOutStepRate:1/3,autoZoomOutStepRate_2:.05,autoZoomOutMinStep:2,frameArrayInIdealZoom:[],frameLimitInIdealZoom:[5,3]}),hr.set(this,void 0),lr.set(this,!1),this.isCameraEnhancer=!0,this._taskid4AutoTorch=null,this._delay4AutoTorch=250,this.grayThreshold4AutoTorch=20,this.maxDarkCount4AutoTroch=3,t&&!(t instanceof we))throw new TypeError(\"Invalid view.\");C(this,Ji,new ct,\"f\"),this.cameraManager=new Fi,this._imageDataGetter=this.cameraManager.imageDataGetter;this.cameraManager.updateVideoElWhenSoftwareScaled=()=>{if(!this.video)return;const t=this.cameraManager.getSoftwareScale();if(t<1)throw new RangeError(\"Invalid scale value.\");this.cameraView&&!this.cameraView.disposed?(this.video.style.transform=1===t?\"\":`scale(${t})`,this.cameraView._updateVideoContainer()):this.video.style.transform=1===t?\"\":`scale(${t})`},[\"iPhone\",\"iPad\",\"Android\",\"HarmonyOS\"].includes(A.OS)?this.cameraManager.setResolution(1280,720):this.cameraManager.setResolution(1920,1080),navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?this.singleFrameMode=\"disabled\":this.singleFrameMode=\"image\",t&&(this.setCameraView(t),t.cameraEnhancer=this),this._on(\"before:camera:change\",(()=>{x(this,hr,\"f\").stopCharging();const t=this.cameraView;t&&!t.disposed&&(t._startLoading(),t.clearAllInnerDrawingItems())})),this._on(\"camera:changed\",(()=>{this.clearBuffer()})),this._on(\"before:resolution:change\",(()=>{const t=this.cameraView;t&&!t.disposed&&(t._startLoading(),t.clearAllInnerDrawingItems())})),this._on(\"resolution:changed\",(()=>{this.clearBuffer(),t.eventHandler.fire(\"content:updated\",null,{async:!1})})),this._on(\"paused\",(()=>{x(this,hr,\"f\").stopCharging();const t=this.cameraView;t&&t.disposed})),this._on(\"resumed\",(()=>{const t=this.cameraView;t&&t.disposed})),this._on(\"tapfocus\",(()=>{x(this,or,\"f\").tapToFocus&&x(this,hr,\"f\").startCharging()})),this._intermediateResultReceiver={},this._intermediateResultReceiver.onTaskResultsReceived=async(t,e)=>{var i,r,n,s;if(x(this,zi,\"m\",cr).call(this)||!this.isOpen()||this.isPaused())return;const o=t.intermediateResultUnits;wr._onLog&&(wr._onLog(\"intermediateResultUnits:\"),wr._onLog(o));let a=!1,h=!1;for(let t of o){if(t.unitType===dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumIntermediateResultUnitType.IRUT_DECODED_BARCODES&&t.decodedBarcodes.length){a=!0;break}t.unitType===dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumIntermediateResultUnitType.IRUT_LOCALIZED_BARCODES&&t.localizedBarcodes.length&&(h=!0)}if(wr._onLog&&(wr._onLog(\"hasLocalizedBarcodes:\"),wr._onLog(h)),x(this,or,\"f\").autoZoom||x(this,or,\"f\").enhancedFocus)if(a)x(this,ar,\"f\").autoZoomInFrameArray.length=0,x(this,ar,\"f\").autoZoomOutFrameCount=0,x(this,ar,\"f\").frameArrayInIdealZoom.length=0,x(this,ar,\"f\").autoFocusFrameArray.length=0;else{const t=async t=>{await this.setZoom(t),x(this,or,\"f\").autoZoom&&x(this,hr,\"f\").startCharging()},e=async t=>{await this.setFocus(t),x(this,or,\"f\").enhancedFocus&&x(this,hr,\"f\").startCharging()};if(h){const a=o[0].originalImageTag,h=(null===(i=a.cropRegion)||void 0===i?void 0:i.left)||0,l=(null===(r=a.cropRegion)||void 0===r?void 0:r.top)||0,c=(null===(n=a.cropRegion)||void 0===n?void 0:n.right)?a.cropRegion.right-h:a.originalWidth,u=(null===(s=a.cropRegion)||void 0===s?void 0:s.bottom)?a.cropRegion.bottom-l:a.originalHeight,d=a.currentWidth,f=a.currentHeight;let g;{let t,e,i,r,n;{const t=this.video.videoWidth*(1-x(this,ar,\"f\").autoZoomDetectionArea)/2,e=this.video.videoWidth*(1+x(this,ar,\"f\").autoZoomDetectionArea)/2,i=e,r=t,s=this.video.videoHeight*(1-x(this,ar,\"f\").autoZoomDetectionArea)/2,o=s,a=this.video.videoHeight*(1+x(this,ar,\"f\").autoZoomDetectionArea)/2;n=[{x:t,y:s},{x:e,y:o},{x:i,y:a},{x:r,y:a}]}wr._onLog&&(wr._onLog(\"detectionArea:\"),wr._onLog(n));const s=[];{const t=(t,e)=>{const i=(t,e)=>{if(!t&&!e)throw new Error(\"Invalid arguments.\");return function(t,e,i){let r=!1;const n=t.length;if(n<=2)return!1;for(let s=0;s<n;s++){const o=t[s],a=t[(s+1)%n];if(ut(o,a,{x:e,y:i}))return!0;dt(o.y-i)>0!=dt(a.y-i)>0&&dt(e-(i-o.y)*(o.x-a.x)/(o.y-a.y)-o.x)<0&&(r=!r)}return r}(e,t.x,t.y)},r=(t,e)=>!!(ft([t[0],t[1]],[t[2],t[3]],[e[0].x,e[0].y],[e[1].x,e[1].y])||ft([t[0],t[1]],[t[2],t[3]],[e[1].x,e[1].y],[e[2].x,e[2].y])||ft([t[0],t[1]],[t[2],t[3]],[e[2].x,e[2].y],[e[3].x,e[3].y])||ft([t[0],t[1]],[t[2],t[3]],[e[3].x,e[3].y],[e[0].x,e[0].y]));return!!(i({x:t[0].x,y:t[0].y},e)||i({x:t[1].x,y:t[1].y},e)||i({x:t[2].x,y:t[2].y},e)||i({x:t[3].x,y:t[3].y},e))||(!!(i({x:e[0].x,y:e[0].y},t)||i({x:e[1].x,y:e[1].y},t)||i({x:e[2].x,y:e[2].y},t)||i({x:e[3].x,y:e[3].y},t))||!!(r([e[0].x,e[0].y,e[1].x,e[1].y],t)||r([e[1].x,e[1].y,e[2].x,e[2].y],t)||r([e[2].x,e[2].y,e[3].x,e[3].y],t)||r([e[3].x,e[3].y,e[0].x,e[0].y],t)))};for(let e of o)if(e.unitType===dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumIntermediateResultUnitType.IRUT_LOCALIZED_BARCODES)for(let i of e.localizedBarcodes){if(!i)continue;const e=i.location.points;e.forEach((t=>{we._transformCoordinates(t,h,l,c,u,d,f)})),t(n,e)&&s.push(i)}if(wr._debug&&this.cameraView){const t=this.__layer||(this.__layer=this.cameraView._createDrawingLayer(99));t.clearDrawingItems();const e=this.__styleId2||(this.__styleId2=ge.createDrawingStyle({strokeStyle:\"red\"}));for(let i of o)if(i.unitType===dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumIntermediateResultUnitType.IRUT_LOCALIZED_BARCODES)for(let r of i.localizedBarcodes){if(!r)continue;const i=r.location.points,n=new Tt({points:i},e);t.addDrawingItems([n])}}}if(wr._onLog&&(wr._onLog(\"intersectedResults:\"),wr._onLog(s)),!s.length)return;let a;if(s.length){let t=s.filter((t=>t.possibleFormats==yr.BF_QR_CODE||t.possibleFormats==yr.BF_DATAMATRIX));if(t.length||(t=s.filter((t=>t.possibleFormats==yr.BF_ONED)),t.length||(t=s)),t.length){const e=t=>{const e=t.location.points,i=(e[0].x+e[1].x+e[2].x+e[3].x)/4,r=(e[0].y+e[1].y+e[2].y+e[3].y)/4;return(i-d/2)*(i-d/2)+(r-f/2)*(r-f/2)};a=t[0];let i=e(a);if(1!=t.length)for(let r=1;r<t.length;r++){const n=e(t[r]);t[r].confidence>1.1*a.confidence?(a=t[r],i=n):t[r].confidence>.9*a.confidence&&n<i&&(a=t[r],i=n)}}}if(wr._onLog&&(wr._onLog(\"highPriorityResult:\"),wr._onLog(a)),a){const n=a.location.points;t=Math.min(n[0].x,n[1].x,n[2].x,n[3].x),e=Math.max(n[0].x,n[1].x,n[2].x,n[3].x),i=Math.min(n[0].y,n[1].y,n[2].y,n[3].y),r=Math.max(n[0].y,n[1].y,n[2].y,n[3].y),g={points:[{x:t,y:i},{x:e,y:i},{x:e,y:r},{x:t,y:r}],result:a}}}if(wr._onLog&&(wr._onLog(\"boundingRect:\"),wr._onLog(g)),!g)return;if(wr._debug&&this.cameraView&&(null==g?void 0:g.points)){const t=this.__layer||(this.__layer=this.cameraView._createDrawingLayer(99)),e=this.__styleId1||(this.__styleId1=ge.createDrawingStyle({strokeStyle:\"blue\"})),i=new Tt({points:g.points},e);t.addDrawingItems([i])}if(x(this,ar,\"f\").autoZoomOutFrameCount=0,x(this,or,\"f\").autoZoom){const i=x(this,ar,\"f\").autoZoomIdealArea[1];let r=(1-x(this,ar,\"f\").autoZoomTargetBorder)/2;const n=g.points[0].x/c,s=(c-g.points[2].x)/c,o=g.points[0].y/u,a=(u-g.points[2].y)/u;if(n>i&&s>i&&o>i&&a>i&&g.result.moduleSize<x(this,ar,\"f\").autoZoomInIdealModuleSize){if(x(this,ar,\"f\").autoZoomInFrameArray.push(!0),x(this,ar,\"f\").autoZoomInFrameArray.splice(0,x(this,ar,\"f\").autoZoomInFrameArray.length-x(this,ar,\"f\").autoZoomInFrameLimit[0]),x(this,ar,\"f\").frameArrayInIdealZoom.length=0,x(this,or,\"f\").enhancedFocus&&e({mode:\"continuous\"}).catch((()=>{})),x(this,ar,\"f\").autoZoomInFrameArray.filter((t=>!0===t)).length>=x(this,ar,\"f\").autoZoomInFrameLimit[1]){x(this,ar,\"f\").autoZoomInFrameArray.length=0;const e=[(.5-r)/(.5-n),(.5-r)/(.5-s),(.5-r)/(.5-o),(.5-r)/(.5-a)].filter((t=>t>0)),i=Math.min(...e,x(this,ar,\"f\").autoZoomInIdealModuleSize/g.result.moduleSize),h=this.getZoomSettings().factor;let l=Math.max(Math.pow(h*i,1/x(this,ar,\"f\").autoZoomInMaxTimes),x(this,ar,\"f\").autoZoomInMinStep);l=Math.min(l,i);let c=h*l;c=Math.max(x(this,ar,\"f\").minValue,c),c=Math.min(x(this,ar,\"f\").maxValue,c);try{await t({factor:c})}catch(t){const e=t.message||t;console.warn(e)}this.clearBuffer()}}else if(x(this,ar,\"f\").autoZoomInFrameArray.length=0,x(this,ar,\"f\").frameArrayInIdealZoom.push(!0),x(this,ar,\"f\").frameArrayInIdealZoom.splice(0,x(this,ar,\"f\").frameArrayInIdealZoom.length-x(this,ar,\"f\").frameLimitInIdealZoom[0]),x(this,ar,\"f\").frameArrayInIdealZoom.filter((t=>!0===t)).length>=x(this,ar,\"f\").frameLimitInIdealZoom[1]&&(x(this,ar,\"f\").frameArrayInIdealZoom.length=0,x(this,or,\"f\").enhancedFocus)){const t=g.points;try{await e({mode:\"manual\",area:{centerPoint:{x:(t[0].x+t[2].x)/2+\"px\",y:(t[0].y+t[2].y)/2+\"px\"},width:t[2].x-t[0].x+\"px\",height:t[2].y-t[0].y+\"px\"}})}catch(t){const e=t.message||t;console.warn(e)}this.clearBuffer()}}if(!x(this,or,\"f\").autoZoom&&x(this,or,\"f\").enhancedFocus&&(x(this,ar,\"f\").autoFocusFrameArray.push(!0),x(this,ar,\"f\").autoFocusFrameArray.splice(0,x(this,ar,\"f\").autoFocusFrameArray.length-x(this,ar,\"f\").autoFocusFrameLimit[0]),x(this,ar,\"f\").autoFocusFrameArray.filter((t=>!0===t)).length>=x(this,ar,\"f\").autoFocusFrameLimit[1])){x(this,ar,\"f\").autoFocusFrameArray.length=0;try{const t=g.points;await e({mode:\"manual\",area:{centerPoint:{x:(t[0].x+t[2].x)/2+\"px\",y:(t[0].y+t[2].y)/2+\"px\"},width:t[2].x-t[0].x+\"px\",height:t[2].y-t[0].y+\"px\"}})}catch(t){const e=t.message||t;console.warn(e)}this.clearBuffer()}}else{if(x(this,or,\"f\").autoZoom){if(x(this,ar,\"f\").autoZoomInFrameArray.push(!1),x(this,ar,\"f\").autoZoomInFrameArray.splice(0,x(this,ar,\"f\").autoZoomInFrameArray.length-x(this,ar,\"f\").autoZoomInFrameLimit[0]),x(this,ar,\"f\").autoZoomOutFrameCount++,x(this,ar,\"f\").frameArrayInIdealZoom.push(!1),x(this,ar,\"f\").frameArrayInIdealZoom.splice(0,x(this,ar,\"f\").frameArrayInIdealZoom.length-x(this,ar,\"f\").frameLimitInIdealZoom[0]),x(this,ar,\"f\").autoZoomOutFrameCount>=x(this,ar,\"f\").autoZoomOutFrameLimit){x(this,ar,\"f\").autoZoomOutFrameCount=0;const e=this.getZoomSettings().factor;let i=e-Math.max((e-1)*x(this,ar,\"f\").autoZoomOutStepRate,x(this,ar,\"f\").autoZoomOutMinStep);i=Math.max(x(this,ar,\"f\").minValue,i),i=Math.min(x(this,ar,\"f\").maxValue,i);try{await t({factor:i})}catch(t){const e=t.message||t;console.warn(e)}this.clearBuffer()}x(this,or,\"f\").enhancedFocus&&e({mode:\"continuous\"}).catch((()=>{}))}!x(this,or,\"f\").autoZoom&&x(this,or,\"f\").enhancedFocus&&(x(this,ar,\"f\").autoFocusFrameArray.length=0,e({mode:\"continuous\"}).catch((()=>{})))}}},C(this,hr,new mr(1e4),\"f\")}setCameraView(t){if(!(t instanceof we))throw new TypeError(\"Invalid view.\");if(t.disposed)throw new Error(\"The camera view has been disposed.\");if(this.isOpen())throw new Error(\"It is not allowed to change camera view when the camera is open.\");this.releaseCameraView(),t._singleFrameMode=this.singleFrameMode,t._onSingleFrameAcquired=this._onSingleFrameAcquired,this.videoSrc&&(this.cameraView._hideDefaultSelection=!0),x(this,zi,\"m\",cr).call(this)||this.cameraManager.setVideoEl(t.getVideoElement()),this.cameraView=t,this.addListenerToView()}getCameraView(){return this.cameraView}releaseCameraView(){this.cameraView&&(this.removeListenerFromView(),this.cameraView.disposed||(this.cameraView._singleFrameMode=\"disabled\",this.cameraView._onSingleFrameAcquired=null,this.cameraView._hideDefaultSelection=!1),this.cameraManager.releaseVideoEl(),this.cameraView=null)}addListenerToView(){if(!this.cameraView)return;if(this.cameraView.disposed)throw new Error(\"'cameraView' has been disposed.\");const t=this.cameraView;x(this,zi,\"m\",cr).call(this)||this.videoSrc||(t._innerComponent&&(this.cameraManager.tapFocusEventBoundEl=t._innerComponent),t._selCam&&t._selCam.addEventListener(\"change\",this._onCameraSelChange),t._selRsl&&t._selRsl.addEventListener(\"change\",this._onResolutionSelChange)),t._btnClose&&t._btnClose.addEventListener(\"click\",this._onCloseBtnClick)}removeListenerFromView(){if(!this.cameraView||this.cameraView.disposed)return;const t=this.cameraView;this.cameraManager.tapFocusEventBoundEl=null,t._selCam&&t._selCam.removeEventListener(\"change\",this._onCameraSelChange),t._selRsl&&t._selRsl.removeEventListener(\"change\",this._onResolutionSelChange),t._btnClose&&t._btnClose.removeEventListener(\"click\",this._onCloseBtnClick)}getCameraState(){return x(this,zi,\"m\",cr).call(this)?x(this,Zi,\"f\"):new Map([[\"closed\",\"closed\"],[\"opening\",\"opening\"],[\"opened\",\"open\"]]).get(this.cameraManager.state)}isOpen(){return\"open\"===this.getCameraState()}getVideoEl(){return this.video}async open(){const t=this.cameraView;if(null==t?void 0:t.disposed)throw new Error(\"'cameraView' has been disposed.\");t&&(t._singleFrameMode=this.singleFrameMode,x(this,zi,\"m\",cr).call(this)?t._clickIptSingleFrameMode():(this.cameraManager.setVideoEl(t.getVideoElement()),t._startLoading()));let e={width:0,height:0,deviceId:\"\"};if(x(this,zi,\"m\",cr).call(this));else{try{await this.cameraManager.open()}catch(e){throw t&&t._stopLoading(),\"NotFoundError\"===e.name?new Error(`No camera devices were detected. Please ensure a camera is connected and recognized by your system. ${null==e?void 0:e.name}: ${null==e?void 0:e.message}`):\"NotAllowedError\"===e.name?new Error(`Camera access is blocked. Please check your browser settings or grant permission to use the camera. ${null==e?void 0:e.name}: ${null==e?void 0:e.message}`):e}let i,r=t.getUIElement();if(r=r.shadowRoot||r,i=r.querySelector(\".dce-macro-use-mobile-native-like-ui\")){let t=r.elTorchAuto=r.querySelector(\".dce-mn-torch-auto\"),e=r.elTorchOn=r.querySelector(\".dce-mn-torch-on\"),n=r.elTorchOff=r.querySelector(\".dce-mn-torch-off\");t&&(e.style.display=null==this.isTorchOn?\"\":\"none\"),e&&(e.style.display=1==this.isTorchOn?\"\":\"none\"),n&&(n.style.display=0==this.isTorchOn?\"\":\"none\");let s=r.elBeepOn=r.querySelector(\".dce-mn-beep-on\"),o=r.elBeepOff=r.querySelector(\".dce-mn-beep-off\");s&&(s.style.display=pr.allowBeep?\"\":\"none\"),o&&(o.style.display=pr.allowBeep?\"none\":\"\");let a=r.elVibrateOn=r.querySelector(\".dce-mn-vibrate-on\"),h=r.elVibrateOff=r.querySelector(\".dce-mn-vibrate-off\");a&&(a.style.display=pr.allowVibrate?\"\":\"none\"),h&&(h.style.display=pr.allowVibrate?\"none\":\"\"),r.elResolutionBox=r.querySelector(\".dce-mn-resolution-box\");let l,c=r.elZoom=r.querySelector(\".dce-mn-zoom\");c&&(c.style.display=\"none\",l=r.elZoomSpan=c.querySelector(\"span\"));let u=r.elToast=r.querySelector(\".dce-mn-toast\"),d=r.elCameraClose=r.querySelector(\".dce-mn-camera-close\"),f=r.elTakePhoto=r.querySelector(\".dce-mn-take-photo\"),g=r.elCameraSwitch=r.querySelector(\".dce-mn-camera-switch\"),m=r.elCameraAndResolutionSettings=r.querySelector(\".dce-mn-camera-and-resolution-settings\");m&&(m.style.display=\"none\");const p=r.dceMnFs={},v=()=>{this.turnOnTorch()};null==t||t.addEventListener(\"pointerdown\",v);const _=()=>{this.turnOffTorch()};null==e||e.addEventListener(\"pointerdown\",_);const y=()=>{this.turnAutoTorch()};null==n||n.addEventListener(\"pointerdown\",y);const w=()=>{pr.allowBeep=!pr.allowBeep,s&&(s.style.display=pr.allowBeep?\"\":\"none\"),o&&(o.style.display=pr.allowBeep?\"none\":\"\")};for(let t of[o,s])null==t||t.addEventListener(\"pointerdown\",w);const b=()=>{pr.allowVibrate=!pr.allowVibrate,a&&(a.style.display=pr.allowVibrate?\"\":\"none\"),h&&(h.style.display=pr.allowVibrate?\"none\":\"\")};for(let t of[h,a])null==t||t.addEventListener(\"pointerdown\",b);const x=async t=>{let e,i=t.target;if(e=i.closest(\".dce-mn-camera-option\"))this.selectCamera(e.getAttribute(\"data-davice-id\"));else if(e=i.closest(\".dce-mn-resolution-option\")){let t,i=parseInt(e.getAttribute(\"data-width\")),r=parseInt(e.getAttribute(\"data-height\")),n=await this.setResolution({width:i,height:r});{let e=Math.max(n.width,n.height),i=Math.min(n.width,n.height);t=i<=1080?i+\"P\":e<3e3?\"2K\":Math.round(e/1e3)+\"K\"}t!=e.textContent&&T(`Fallback to ${t}`)}else i.closest(\".dce-mn-camera-and-resolution-settings\")||(i.closest(\".dce-mn-resolution-box\")?m&&(m.style.display=m.style.display?\"\":\"none\"):m&&\"\"===m.style.display&&(m.style.display=\"none\"))};r.addEventListener(\"click\",x);let C=null;p.funcInfoZoomChange=(t,e=3e3)=>{c&&l&&(l.textContent=t.toFixed(1),c.style.display=\"\",null!=C&&(clearTimeout(C),C=null),C=setTimeout((()=>{c.style.display=\"none\",C=null}),e))};let S=null,T=p.funcShowToast=(t,e=3e3)=>{u&&(u.textContent=t,u.style.display=\"\",null!=S&&(clearTimeout(S),S=null),S=setTimeout((()=>{u.style.display=\"none\",S=null}),e))};const E=()=>{this.close()};null==d||d.addEventListener(\"click\",E);const O=()=>{};null==f||f.addEventListener(\"pointerdown\",O);const I=()=>{var t,e;let i,r=this.getVideoSettings(),n=r.video.facingMode,s=null===(e=null===(t=this.cameraManager.getCamera())||void 0===t?void 0:t.label)||void 0===e?void 0:e.toLowerCase(),o=null==s?void 0:s.indexOf(\"front\");-1===o&&(o=null==s?void 0:s.indexOf(\"前\"));let a=null==s?void 0:s.indexOf(\"back\");if(-1===a&&(a=null==s?void 0:s.indexOf(\"后\")),\"number\"==typeof o&&-1!==o?i=!0:\"number\"==typeof a&&-1!==a&&(i=!1),void 0===i){i=\"user\"===((null==n?void 0:n.ideal)||(null==n?void 0:n.exact)||n)}r.video.facingMode={ideal:i?\"environment\":\"user\"},delete r.video.deviceId,this.updateVideoSettings(r)};null==g||g.addEventListener(\"pointerdown\",I);let L=-1/0,D=1;const M=t=>{let e=Date.now();e-L>1e3&&(D=this.getZoomSettings().factor),D-=t.deltaY/200,D>20&&(D=20),D<1&&(D=1),this.setZoom({factor:D}),L=e};i.addEventListener(\"wheel\",M);const F=new Map;let P=!1;const k=async t=>{var e;for(t.touches.length>=2&&\"touchmove\"==t.type&&t.preventDefault();t.changedTouches.length>1&&2==t.touches.length;){let i=t.touches[0],r=t.touches[1],n=F.get(i.identifier),s=F.get(r.identifier);if(!n||!s)break;let o=Math.pow(Math.pow(n.x-s.x,2)+Math.pow(n.y-s.y,2),.5),a=Math.pow(Math.pow(i.clientX-r.clientX,2)+Math.pow(i.clientY-r.clientY,2),.5),h=Date.now();if(P||h-L<100)return;h-L>1e3&&(D=this.getZoomSettings().factor),D*=a/o,D>20&&(D=20),D<1&&(D=1);let l=!1;\"safari\"==(null===(e=null==A?void 0:A.browser)||void 0===e?void 0:e.toLocaleLowerCase())&&(a/o>1&&D<2?(D=2,l=!0):a/o<1&&D<2&&(D=1,l=!0)),P=!0,l&&T(\"zooming...\"),await this.setZoom({factor:D}),l&&(u.textContent=\"\"),P=!1,L=Date.now();break}F.clear();for(let e of t.touches)F.set(e.identifier,{x:e.clientX,y:e.clientY})};r.addEventListener(\"touchstart\",k),r.addEventListener(\"touchmove\",k),r.addEventListener(\"touchend\",k),r.addEventListener(\"touchcancel\",k),p.unbind=()=>{null==t||t.removeEventListener(\"pointerdown\",v),null==e||e.removeEventListener(\"pointerdown\",_),null==n||n.removeEventListener(\"pointerdown\",y);for(let t of[o,s])null==t||t.removeEventListener(\"pointerdown\",w);for(let t of[h,a])null==t||t.removeEventListener(\"pointerdown\",b);r.removeEventListener(\"click\",x),null==d||d.removeEventListener(\"click\",E),null==f||f.removeEventListener(\"pointerdown\",O),null==g||g.removeEventListener(\"pointerdown\",I),i.removeEventListener(\"wheel\",M),r.removeEventListener(\"touchstart\",k),r.removeEventListener(\"touchmove\",k),r.removeEventListener(\"touchend\",k),r.removeEventListener(\"touchcancel\",k),delete r.dceMnFs,i.style.display=\"none\"},i.style.display=\"\",t&&null==this.isTorchOn&&setTimeout((()=>{this.turnAutoTorch(1e3)}),0)}this.isTorchOn&&this.turnOnTorch().catch((()=>{}));const n=this.getResolution();e.width=n.width,e.height=n.height,e.deviceId=this.getSelectedCamera().deviceId}return C(this,Zi,\"open\",\"f\"),t&&(t._innerComponent.style.display=\"\",x(this,zi,\"m\",cr).call(this)||(t._stopLoading(),t._renderCamerasInfo(this.getSelectedCamera(),this.cameraManager._arrCameras),t._renderResolutionInfo({width:e.width,height:e.height}),t.eventHandler.fire(\"content:updated\",null,{async:!1}),t.eventHandler.fire(\"videoEl:resized\",null,{async:!1}))),x(this,Ji,\"f\").fire(\"opened\",null,{target:this,async:!1}),e}close(){var t;const e=this.cameraView;if(null==e?void 0:e.disposed)throw new Error(\"'cameraView' has been disposed.\");if(this.stopFetching(),this.clearBuffer(),x(this,zi,\"m\",cr).call(this));else{this.cameraManager.close();let i=e.getUIElement();i=i.shadowRoot||i,i.querySelector(\".dce-macro-use-mobile-native-like-ui\")&&(null===(t=i.dceMnFs)||void 0===t||t.unbind())}C(this,Zi,\"closed\",\"f\"),x(this,hr,\"f\").stopCharging(),e&&(e._innerComponent.style.display=\"none\",x(this,zi,\"m\",cr).call(this)&&e._innerComponent.removeElement(\"content\"),e._stopLoading()),x(this,Ji,\"f\").fire(\"closed\",null,{target:this,async:!1})}pause(){if(x(this,zi,\"m\",cr).call(this))throw new Error(\"'pause()' is invalid in 'singleFrameMode'.\");this.cameraManager.pause()}isPaused(){var t;return!x(this,zi,\"m\",cr).call(this)&&!0===(null===(t=this.video)||void 0===t?void 0:t.paused)}async resume(){if(x(this,zi,\"m\",cr).call(this))throw new Error(\"'resume()' is invalid in 'singleFrameMode'.\");await this.cameraManager.resume()}async selectCamera(t){if(!t)throw new Error(\"Invalid value.\");let e;e=\"string\"==typeof t?t:t.deviceId,await this.cameraManager.setCamera(e),this.isTorchOn=!1;const i=this.getResolution(),r=this.cameraView;return r&&!r.disposed&&(r._stopLoading(),r._renderCamerasInfo(this.getSelectedCamera(),this.cameraManager._arrCameras),r._renderResolutionInfo({width:i.width,height:i.height})),{width:i.width,height:i.height,deviceId:this.getSelectedCamera().deviceId}}getSelectedCamera(){return this.cameraManager.getCamera()}async getAllCameras(){return this.cameraManager.getCameras()}async setResolution(t){await this.cameraManager.setResolution(t.width,t.height),this.isTorchOn&&this.turnOnTorch().catch((()=>{}));const e=this.getResolution(),i=this.cameraView;return i&&!i.disposed&&(i._stopLoading(),i._renderResolutionInfo({width:e.width,height:e.height})),{width:e.width,height:e.height,deviceId:this.getSelectedCamera().deviceId}}getResolution(){return this.cameraManager.getResolution()}getAvailableResolutions(){var t;return null===(t=this.cameraManager)||void 0===t?void 0:t.getResolutions()}_on(t,e){[\"opened\",\"closed\",\"singleframeacquired\",\"frameaddedtobuffer\"].includes(t.toLowerCase())?x(this,Ji,\"f\").on(t,e):this.cameraManager.on(t,e)}_off(t,e){[\"opened\",\"closed\",\"singleframeacquired\",\"frameaddedtobuffer\"].includes(t.toLowerCase())?x(this,Ji,\"f\").off(t,e):this.cameraManager.off(t,e)}on(t,e){const i=t.toLowerCase(),r=new Map([[\"cameraopen\",\"opened\"],[\"cameraclose\",\"closed\"],[\"camerachange\",\"camera:changed\"],[\"resolutionchange\",\"resolution:changed\"],[\"played\",\"played\"],[\"singleframeacquired\",\"singleFrameAcquired\"],[\"frameaddedtobuffer\",\"frameAddedToBuffer\"]]).get(i);if(!r)throw new Error(\"Invalid event.\");this._on(r,e)}off(t,e){const i=t.toLowerCase(),r=new Map([[\"cameraopen\",\"opened\"],[\"cameraclose\",\"closed\"],[\"camerachange\",\"camera:changed\"],[\"resolutionchange\",\"resolution:changed\"],[\"played\",\"played\"],[\"singleframeacquired\",\"singleFrameAcquired\"],[\"frameaddedtobuffer\",\"frameAddedToBuffer\"]]).get(i);if(!r)throw new Error(\"Invalid event.\");this._off(r,e)}getVideoSettings(){var t;return null===(t=this.cameraManager)||void 0===t?void 0:t.getMediaStreamConstraints()}async updateVideoSettings(t){var e;await(null===(e=this.cameraManager)||void 0===e?void 0:e.setMediaStreamConstraints(t,!0))}getCapabilities(){var t;return null===(t=this.cameraManager)||void 0===t?void 0:t.getCameraCapabilities()}getCameraSettings(){return this.cameraManager.getCameraSettings()}async turnOnTorch(){var t,e;if(x(this,zi,\"m\",cr).call(this))throw new Error(\"'turnOnTorch()' is invalid in 'singleFrameMode'.\");try{await(null===(t=this.cameraManager)||void 0===t?void 0:t.turnOnTorch())}catch(t){let i=this.cameraView.getUIElement();throw i=i.shadowRoot||i,null===(e=null==i?void 0:i.dceMnFs)||void 0===e||e.funcShowToast(\"Torch Not Supported\"),t}this.isTorchOn=!0;let i=this.cameraView.getUIElement();i=i.shadowRoot||i,i.elTorchAuto&&(i.elTorchAuto.style.display=\"none\"),i.elTorchOn&&(i.elTorchOn.style.display=\"\"),i.elTorchOff&&(i.elTorchOff.style.display=\"none\")}async turnOffTorch(){var t;if(x(this,zi,\"m\",cr).call(this))throw new Error(\"'turnOffTorch()' is invalid in 'singleFrameMode'.\");await(null===(t=this.cameraManager)||void 0===t?void 0:t.turnOffTorch()),this.isTorchOn=!1;let e=this.cameraView.getUIElement();e=e.shadowRoot||e,e.elTorchAuto&&(e.elTorchAuto.style.display=\"none\"),e.elTorchOn&&(e.elTorchOn.style.display=\"none\"),e.elTorchOff&&(e.elTorchOff.style.display=\"\")}async turnAutoTorch(t=250){if(null!=this._taskid4AutoTorch){if(!(t<this._delay4AutoTorch))return;clearInterval(this._taskid4AutoTorch),this._taskid4AutoTorch=null}this._delay4AutoTorch=t;let e=!1,i=0,r=0;const n=async()=>{var t,n;if(e||null!=this.isTorchOn||!this.isOpen())return clearInterval(this._taskid4AutoTorch),void(this._taskid4AutoTorch=null);if(++r>10&&this._delay4AutoTorch<1e3)return clearInterval(this._taskid4AutoTorch),this._taskid4AutoTorch=null,void this.turnAutoTorch(1e3);let s;try{s=this.fetchImage()}catch(t){}if(!s||!s.width||!s.height)return;let o=0;if(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_GRAYSCALED===s.format){for(let t=0;t<s.bytes.length;++t)o+=s.bytes[t];o/=s.bytes.length}else{if(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_ABGR_8888!==s.format)return;for(let t=0;t<s.bytes.length;t+=4)o+=s.bytes[t],o+=s.bytes[t+1],o+=s.bytes[t+2];o/=s.bytes.length/4*3}if(o<this.grayThreshold4AutoTorch){if(++i>=this.maxDarkCount4AutoTroch){console.log(`darkCount ${i}`);try{await this.turnOnTorch(),this.isTorchOn=!0;let e=this.cameraView.getUIElement();e=e.shadowRoot||e,null===(t=null==e?void 0:e.dceMnFs)||void 0===t||t.funcShowToast(\"Torch Auto On\")}catch(t){console.error(t),e=!0;let i=this.cameraView.getUIElement();i=i.shadowRoot||i,null===(n=null==i?void 0:i.dceMnFs)||void 0===n||n.funcShowToast(\"Torch Not Supported\")}}}else i=0};this._taskid4AutoTorch=setInterval(n,t),this.isTorchOn=void 0,n();let s=this.cameraView.getUIElement();s=s.shadowRoot||s,s.elTorchAuto&&(s.elTorchAuto.style.display=\"\"),s.elTorchOn&&(s.elTorchOn.style.display=\"none\"),s.elTorchOff&&(s.elTorchOff.style.display=\"none\")}async setColorTemperature(t){if(x(this,zi,\"m\",cr).call(this))throw new Error(\"'setColorTemperature()' is invalid in 'singleFrameMode'.\");await this.cameraManager.setColorTemperature(t,!0)}getColorTemperature(){return this.cameraManager.getColorTemperature()}async setExposureCompensation(t){var e;if(x(this,zi,\"m\",cr).call(this))throw new Error(\"'setExposureCompensation()' is invalid in 'singleFrameMode'.\");await(null===(e=this.cameraManager)||void 0===e?void 0:e.setExposureCompensation(t,!0))}getExposureCompensation(){var t;return null===(t=this.cameraManager)||void 0===t?void 0:t.getExposureCompensation()}async _setZoom(t){var e,i,r;if(x(this,zi,\"m\",cr).call(this))throw new Error(\"'setZoom()' is invalid in 'singleFrameMode'.\");await(null===(e=this.cameraManager)||void 0===e?void 0:e.setZoom(t));{let e=null===(i=this.cameraView)||void 0===i?void 0:i.getUIElement();e=(null==e?void 0:e.shadowRoot)||e,null===(r=null==e?void 0:e.dceMnFs)||void 0===r||r.funcInfoZoomChange(t.factor)}}async setZoom(t){await this._setZoom(t)}getZoomSettings(){var t;return null===(t=this.cameraManager)||void 0===t?void 0:t.getZoom()}async resetZoom(){var t;if(x(this,zi,\"m\",cr).call(this))throw new Error(\"'resetZoom()' is invalid in 'singleFrameMode'.\");await(null===(t=this.cameraManager)||void 0===t?void 0:t.resetZoom())}async setFrameRate(t){var e;if(x(this,zi,\"m\",cr).call(this))throw new Error(\"'setFrameRate()' is invalid in 'singleFrameMode'.\");await(null===(e=this.cameraManager)||void 0===e?void 0:e.setFrameRate(t,!0))}getFrameRate(){var t;return null===(t=this.cameraManager)||void 0===t?void 0:t.getFrameRate()}async setFocus(t){var e;if(x(this,zi,\"m\",cr).call(this))throw new Error(\"'setFocus()' is invalid in 'singleFrameMode'.\");await(null===(e=this.cameraManager)||void 0===e?void 0:e.setFocus(t,!0))}getFocusSettings(){var t;return null===(t=this.cameraManager)||void 0===t?void 0:t.getFocus()}setAutoZoomRange(t){x(this,ar,\"f\").minValue=t.min,x(this,ar,\"f\").maxValue=t.max}getAutoZoomRange(){return{min:x(this,ar,\"f\").minValue,max:x(this,ar,\"f\").maxValue}}async enableEnhancedFeatures(t){var e,r;if(!(null===(r=null===(e=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license)||void 0===e?void 0:e.LicenseManager)||void 0===r?void 0:r.bPassValidation))throw new Error(\"License is not verified, or license is invalid.\");if(0!==dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule.bSupportDce4Module)throw new Error(\"Please set a license containing the DCE module.\");t&W.EF_ENHANCED_FOCUS&&(x(this,or,\"f\").enhancedFocus=!0),t&W.EF_AUTO_ZOOM&&(x(this,or,\"f\").autoZoom=!0),t&W.EF_TAP_TO_FOCUS&&(x(this,or,\"f\").tapToFocus=!0,this.cameraManager.enableTapToFocus())}disableEnhancedFeatures(t){t&W.EF_ENHANCED_FOCUS&&(x(this,or,\"f\").enhancedFocus=!1,this.setFocus({mode:\"continuous\"}).catch((()=>{}))),t&W.EF_AUTO_ZOOM&&(x(this,or,\"f\").autoZoom=!1,this.resetZoom().catch((()=>{}))),t&W.EF_TAP_TO_FOCUS&&(x(this,or,\"f\").tapToFocus=!1,this.cameraManager.disableTapToFocus()),x(this,zi,\"m\",dr).call(this)&&x(this,zi,\"m\",ur).call(this)||x(this,hr,\"f\").stopCharging()}_setScanRegion(t){if(null!=t&&!tt(t)&&!st(t))throw TypeError(\"Invalid 'region'.\");C(this,ir,t?JSON.parse(JSON.stringify(t)):null,\"f\"),this.cameraView&&!this.cameraView.disposed&&this.cameraView.setScanRegion(t)}setScanRegion(t){this._setScanRegion(t),this.cameraView&&!this.cameraView.disposed&&(null===t?this.cameraView.setScanRegionMaskVisible(!1):this.cameraView.setScanRegionMaskVisible(!0))}getScanRegion(){return JSON.parse(JSON.stringify(x(this,ir,\"f\")))}setErrorListener(t){if(!t)throw new TypeError(\"Invalid 'listener'\");C(this,er,t,\"f\")}hasNextImageToFetch(){return!(\"open\"!==this.getCameraState()||!this.cameraManager.isVideoLoaded()||x(this,zi,\"m\",cr).call(this))}startFetching(){if(x(this,zi,\"m\",cr).call(this))throw Error(\"'startFetching()' is unavailable in 'singleFrameMode'.\");x(this,nr,\"f\")||(C(this,nr,!0,\"f\"),x(this,zi,\"m\",fr).call(this))}stopFetching(){x(this,nr,\"f\")&&(wr._onLog&&wr._onLog(\"DCE: stop fetching loop: \"+Date.now()),x(this,sr,\"f\")&&clearTimeout(x(this,sr,\"f\")),C(this,nr,!1,\"f\"))}fetchImage(){if(x(this,zi,\"m\",cr).call(this))throw new Error(\"'fetchImage()' is unavailable in 'singleFrameMode'.\");if(!this.video)throw new Error(\"The video element does not exist.\");if(4!==this.video.readyState)throw new Error(\"The video is not loaded.\");const t=this.getResolution();if(!(null==t?void 0:t.width)||!(null==t?void 0:t.height))throw new Error(\"The video is not loaded.\");let e;if(e=at.convert(x(this,ir,\"f\"),t.width,t.height),e||(e={x:0,y:0,width:t.width,height:t.height}),e.x>t.width||e.y>t.height)throw new Error(\"Invalid scan region.\");e.x+e.width>t.width&&(e.width=t.width-e.x),e.y+e.height>t.height&&(e.height=t.height-e.y);const i={sx:e.x,sy:e.y,sWidth:e.width,sHeight:e.height,dWidth:e.width,dHeight:e.height},r=Math.max(i.dWidth,i.dHeight);if(this.canvasSizeLimit&&r>this.canvasSizeLimit){const t=this.canvasSizeLimit/r;i.dWidth>i.dHeight?(i.dWidth=this.canvasSizeLimit,i.dHeight=Math.round(i.dHeight*t)):(i.dWidth=Math.round(i.dWidth*t),i.dHeight=this.canvasSizeLimit)}const n=this.cameraManager.getFrameData({position:i,pixelFormat:vr.get(this.getPixelFormat())});if(!n)return null;let s;if(n.pixelFormat===Me.GREY)s=n.width;else s=4*n.width;let o=!0;0===i.sx&&0===i.sy&&i.sWidth===t.width&&i.sHeight===t.height&&(o=!1);return{bytes:n.data,width:n.width,height:n.height,stride:s,format:_r.get(n.pixelFormat),tag:{imageId:this._imageId==Number.MAX_VALUE?this._imageId=0:++this._imageId,type:dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImageTagType.ITT_VIDEO_FRAME,isCropped:o,cropRegion:{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height,isMeasuredInPercentage:!1},originalWidth:t.width,originalHeight:t.height,currentWidth:n.width,currentHeight:n.height,timeSpent:n.timeSpent,timeStamp:n.timeStamp},toCanvas:x(this,tr,\"f\"),isDCEFrame:!0}}setImageFetchInterval(t){this.fetchInterval=t,x(this,nr,\"f\")&&(x(this,sr,\"f\")&&clearTimeout(x(this,sr,\"f\")),C(this,sr,setTimeout((()=>{this.disposed||x(this,zi,\"m\",fr).call(this)}),t),\"f\"))}getImageFetchInterval(){return this.fetchInterval}setPixelFormat(t){C(this,rr,t,\"f\")}getPixelFormat(){return x(this,rr,\"f\")}takePhoto(t){if(!this.isOpen())throw new Error(\"Not open.\");if(x(this,zi,\"m\",cr).call(this))throw new Error(\"'takePhoto()' is unavailable in 'singleFrameMode'.\");const e=document.createElement(\"input\");e.setAttribute(\"type\",\"file\"),e.setAttribute(\"accept\",\".jpg,.jpeg,.icon,.gif,.svg,.webp,.png,.bmp\"),e.setAttribute(\"capture\",\"\"),e.style.position=\"absolute\",e.style.top=\"-9999px\",e.style.backgroundColor=\"transparent\",e.style.color=\"transparent\",e.addEventListener(\"click\",(()=>{const t=this.isOpen();this.close(),window.addEventListener(\"focus\",(()=>{t&&this.open(),e.remove()}),{once:!0})})),e.addEventListener(\"change\",(async()=>{const i=e.files[0],r=await(async t=>{let e=null,i=null;if(\"undefined\"!=typeof createImageBitmap)try{if(e=await createImageBitmap(t),e)return e}catch(t){}var r;return e||(i=await(r=t,new Promise(((t,e)=>{let i=URL.createObjectURL(r),n=new Image;n.src=i,n.onload=()=>{URL.revokeObjectURL(n.src),t(n)},n.onerror=t=>{e(new Error(\"Can't convert blob to image : \"+(t instanceof Event?t.type:t)))}})))),i})(i),n=r instanceof HTMLImageElement?r.naturalWidth:r.width,s=r instanceof HTMLImageElement?r.naturalHeight:r.height;let o=at.convert(x(this,ir,\"f\"),n,s);o||(o={x:0,y:0,width:n,height:s});const a=x(this,$i,\"f\").call(this,r,n,s,o);t&&t(a)})),document.body.appendChild(e),e.click()}convertToPageCoordinates(t){const e=x(this,zi,\"m\",gr).call(this,t);return{x:e.pageX,y:e.pageY}}convertToClientCoordinates(t){const e=x(this,zi,\"m\",gr).call(this,t);return{x:e.clientX,y:e.clientY}}dispose(){this.close(),this.cameraManager.dispose(),this.releaseCameraView(),this.__proto__=null;for(let t in this)delete this[t];Object.defineProperty(this,\"isCameraEnhancer\",{value:!0}),Object.defineProperty(this,\"disposed\",{value:!0})}}function br(t,e,i,r){if(\"a\"===i&&!r)throw new TypeError(\"Private accessor was defined without a getter\");if(\"function\"==typeof e?t!==e||!r:!e.has(t))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return\"m\"===i?r:\"a\"===i?r.call(t):r?r.value:e.get(t)}function xr(t,e,i,r,n){if(\"m\"===r)throw new TypeError(\"Private method is not writable\");if(\"a\"===r&&!n)throw new TypeError(\"Private accessor was defined without a setter\");if(\"function\"==typeof e?t!==e||!n:!e.has(t))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return\"a\"===r?n.call(t,i):n?n.value=i:e.set(t,i),i}qi=wr,Zi=new WeakMap,Ji=new WeakMap,Qi=new WeakMap,$i=new WeakMap,tr=new WeakMap,er=new WeakMap,ir=new WeakMap,rr=new WeakMap,nr=new WeakMap,sr=new WeakMap,or=new WeakMap,ar=new WeakMap,hr=new WeakMap,lr=new WeakMap,zi=new WeakSet,cr=function(){return\"disabled\"!==this.singleFrameMode},ur=function(){return!this.videoSrc&&\"opened\"===this.cameraManager.state},dr=function(){for(let t in x(this,or,\"f\"))if(1==x(this,or,\"f\")[t])return!0;return!1},fr=function t(){if(this.disposed)return;if(\"open\"!==this.getCameraState()||!x(this,nr,\"f\"))return x(this,sr,\"f\")&&clearTimeout(x(this,sr,\"f\")),void C(this,sr,setTimeout((()=>{this.disposed||x(this,zi,\"m\",t).call(this)}),this.fetchInterval),\"f\");const e=()=>{var t;let e;wr._onLog&&wr._onLog(\"DCE: start fetching a frame into buffer: \"+Date.now());try{e=this.fetchImage()}catch(e){const i=e.message||e;if(\"The video is not loaded.\"===i)return;if(null===(t=x(this,er,\"f\"))||void 0===t?void 0:t.onErrorReceived)return void setTimeout((()=>{var t;null===(t=x(this,er,\"f\"))||void 0===t||t.onErrorReceived(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumErrorCode.EC_IMAGE_READ_FAILED,i)}),0);console.warn(e)}e?(this.addImageToBuffer(e),wr._onLog&&wr._onLog(\"DCE: finish fetching a frame into buffer: \"+Date.now()),x(this,Ji,\"f\").fire(\"frameAddedToBuffer\",null,{async:!1})):wr._onLog&&wr._onLog(\"DCE: get a invalid frame, abandon it: \"+Date.now())};if(this.getImageCount()>=this.getMaxImageCount())switch(this.getBufferOverflowProtectionMode()){case dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumBufferOverflowProtectionMode.BOPM_BLOCK:break;case dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumBufferOverflowProtectionMode.BOPM_UPDATE:e()}else e();x(this,sr,\"f\")&&clearTimeout(x(this,sr,\"f\")),C(this,sr,setTimeout((()=>{this.disposed||x(this,zi,\"m\",t).call(this)}),this.fetchInterval),\"f\")},gr=function(t){if(!this.cameraView)throw new Error(\"Camera view is not set.\");if(this.cameraView.disposed)throw new Error(\"'cameraView' has been disposed.\");if(!this.isOpen())throw new Error(\"Not open.\");if(!x(this,zi,\"m\",cr).call(this)&&!this.cameraManager.isVideoLoaded())throw new Error(\"Video is not loaded.\");if(x(this,zi,\"m\",cr).call(this)&&!this.cameraView._cvsSingleFrameMode)throw new Error(\"No image is selected.\");const e=this.cameraView._innerComponent.getBoundingClientRect(),i=e.left,r=e.top,n=i+window.scrollX,s=r+window.scrollY,{width:o,height:a}=this.cameraView._innerComponent.getBoundingClientRect();if(o<=0||a<=0)throw new Error(\"Unable to get content dimensions. Camera view may not be rendered on the page.\");let h,l,c;if(x(this,zi,\"m\",cr).call(this)){const t=this.cameraView._innerComponent.getElement(\"content\");h=t.width,l=t.height,c=\"contain\"}else{const t=this.getVideoEl();h=t.videoWidth,l=t.videoHeight,c=this.cameraView.getVideoFit()}const u=o/a,d=h/l;let f,g,m,p,v=1;if(\"contain\"===c)u<d?(v=o/h,f=i+t.x*v,g=r+t.y*v+(a-l*v)/2,m=n+t.x*v,p=s+t.y*v+(a-l*v)/2):(v=a/l,f=i+t.x*v+(o-h*v)/2,g=r+t.y*v,m=n+t.x*v+(o-h*v)/2,p=s+t.y*v);else if(\"cover\"===c)if(u<d){v=a/l;let e=t.x*v-(h*v-o)/2;e=Math.max(e,0),e=Math.min(e,o),f=i+e,g=r+t.y*v,m=n+e,p=s+t.y*v}else{v=o/h;let e=t.y*v-(l*v-a)/2;e=Math.max(e,0),e=Math.min(e,a),f=i+t.x*v,g=r+e,m=n+t.x*v,p=s+e}return{clientX:f,clientY:g,pageX:m,pageY:p}},wr._debug=!1,Ki={value:void 0},wr.browserInfo=A,\"function\"==typeof SuppressedError&&SuppressedError;class Cr{static multiply(t,e){const i=[];for(let r=0;r<3;r++){const n=e.slice(3*r,3*r+3);for(let e=0;e<3;e++){const r=[t[e],t[e+3],t[e+6]].reduce(((t,e,i)=>t+e*n[i]),0);i.push(r)}}return i}static identity(){return[1,0,0,0,1,0,0,0,1]}static translate(t,e,i){return Cr.multiply(t,[1,0,0,0,1,0,e,i,1])}static rotate(t,e){var i=Math.cos(e),r=Math.sin(e);return Cr.multiply(t,[i,-r,0,r,i,0,0,0,1])}static scale(t,e,i){return Cr.multiply(t,[e,0,0,0,i,0,0,0,1])}}var Sr,Tr,Er,Or,Ar,Ir,Lr,Dr,Mr,Fr,Pr,kr,Rr,Br,jr,Wr,Ur,Vr;!function(t){t.GREY=\"grey\",t.GREY32=\"grey32\",t.RGBA=\"rgba\",t.RBGA=\"rbga\",t.GRBA=\"grba\",t.GBRA=\"gbra\",t.BRGA=\"brga\",t.BGRA=\"bgra\"}(Sr||(Sr={}));class Gr{static get version(){return\"1.1.0\"}static checkWebGLSupport(){return null===document.createElement(\"canvas\").getContext(\"webgl\")?(xr(Gr,Tr,!1,\"f\",Er),!1):(xr(Gr,Tr,!0,\"f\",Er),!0)}get disposed(){return br(this,Mr,\"f\")}constructor(){Or.set(this,Sr.RGBA),Ar.set(this,null),Ir.set(this,null),Lr.set(this,null),this.useWebGLByDefault=!0,this._reusedCvs=null,this._reusedWebGLCvs=null,Dr.set(this,null),Mr.set(this,!1)}drawImage(t,e,i,r,n,s){if(this.disposed)throw Error(\"The 'ImageDataGetter' instance has been disposed.\");if(!i||!r)throw new Error(\"Invalid 'sourceWidth' or 'sourceHeight'.\");if(null==br(Gr,Tr,\"f\",Er)&&Gr.checkWebGLSupport(),(null==s?void 0:s.bUseWebGL)&&!br(Gr,Tr,\"f\",Er))throw new Error(\"Your browser or machine may not support WebGL.\");if(e instanceof HTMLVideoElement&&4!==e.readyState||e instanceof HTMLImageElement&&!e.complete)throw new Error(\"The source is not loaded.\");let o;Gr._onLog&&(o=Date.now(),Gr._onLog(\"drawImage(), START: \"+o));let a=0,h=0,l=i,c=r,u=0,d=0,f=i,g=r;n&&(n.sx&&(a=Math.round(n.sx)),n.sy&&(h=Math.round(n.sy)),n.sWidth&&(l=Math.round(n.sWidth)),n.sHeight&&(c=Math.round(n.sHeight)),n.dx&&(u=Math.round(n.dx)),n.dy&&(d=Math.round(n.dy)),n.dWidth&&(f=Math.round(n.dWidth)),n.dHeight&&(g=Math.round(n.dHeight)));let m,p=Sr.RGBA;if((null==s?void 0:s.pixelFormat)&&(p=s.pixelFormat),(null==s?void 0:s.bufferContainer)&&(m=s.bufferContainer,m.length<4*f*g))throw new Error(\"Unexpected size of the 'bufferContainer'.\");const v=t;if(!br(Gr,Tr,\"f\",Er)||!(this.useWebGLByDefault&&null==(null==s?void 0:s.bUseWebGL)||(null==s?void 0:s.bUseWebGL))){Gr._onLog&&Gr._onLog(\"drawImage() in context2d.\"),v.ctx2d||(v.ctx2d=v.getContext(\"2d\",{willReadFrequently:!0}));const t=v.ctx2d;if(!t)throw new Error(\"Unable to get 'CanvasRenderingContext2D' from canvas.\");return(v.width<u+f||v.height<d+g)&&(v.width=u+f,v.height=d+g),t.drawImage(e,a,h,l,c,u,d,f,g),Gr._onLog&&Gr._onLog(\"drawImage() in context2d end. Costs: \"+(Date.now()-o)),{context:t,pixelFormat:Sr.RGBA,bUseWebGL:!1}}Gr._onLog&&Gr._onLog(\"drawImage() in WebGL.\");try{(v.width<u+f||v.height<d+g)&&(v.width=u+f,v.height=d+g,v.ctxWebGL&&v.ctxWebGL.viewport(0,0,u+f,d+g));const t=v.ctxWebGL||v.getContext(\"webgl\",{antialias:!1})||v.getContext(\"experimental-webgl\",{antialias:!1});if(!t){Gr._onLog&&Gr._onLog(\"Browser or machine may not support WebGL, or the canvas has already been set to a different context mode.\");const t=new Error(\"Unable to get 'WebGLRenderingContext'. Your browser or machine may not support WebGL, or the canvas has already been set to a different context mode.\");throw t.name=\"WebGLError\",t}if(!v.ctxWebGL||p!==br(this,Or,\"f\")){v.ctxWebGL=t;const e=t=>{const e=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),t.STATIC_DRAW);const i=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),t.STATIC_DRAW),{positions:e,texCoords:i}},i=t=>{const e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e},r=(t,e)=>{const i=t.createProgram();if(e.forEach((e=>t.attachShader(i,e))),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){const e=new Error(`An error occured linking the program: ${t.getProgramInfoLog(i)}.`);throw e.name=\"WebGLError\",e}return t.useProgram(i),i},n=(t,e,i)=>{const r=t.createShader(e);if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){const e=new Error(`An error occured compiling the shader: ${t.getShaderInfoLog(r)}.`);throw e.name=\"WebGLError\",e}return r},s=\"\\n                  attribute vec2 a_position;\\n                  attribute vec2 a_texCoord;\\n  \\n                  uniform mat3 u_matrix;\\n                  uniform mat3 u_textureMatrix;\\n  \\n                  varying vec2 v_texCoord;\\n                  void main(void) {\\n                  gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1.0);\\n                  v_texCoord = vec4((u_textureMatrix * vec3(a_texCoord, 1)).xy, 0, 1.0).xy;\\n                  }\\n              \";let o=\"rgb\";[\"rgba\",\"rbga\",\"grba\",\"gbra\",\"brga\",\"bgra\"].includes(p)&&(o=p.slice(0,3));const a=`\\n                  precision mediump float;\\n                  varying vec2 v_texCoord;\\n                  uniform sampler2D u_image;\\n                  uniform float uColorFactor;\\n  \\n                  void main() {\\n                      vec4 sample = texture2D(u_image, v_texCoord);\\n                      float grey = 0.21 * sample.r + 0.71 * sample.g + 0.07 * sample.b;\\n                      gl_FragColor = vec4(sample.${o} * (1.0 - uColorFactor) + (grey * uColorFactor), sample.a);\\n                  }\\n              `,h=r(t,[n(t,t.VERTEX_SHADER,s),n(t,t.FRAGMENT_SHADER,a)]);xr(this,Ir,{program:h,attribLocations:{vertexPosition:t.getAttribLocation(h,\"a_position\"),texPosition:t.getAttribLocation(h,\"a_texCoord\")},uniformLocations:{uSampler:t.getUniformLocation(h,\"u_image\"),uColorFactor:t.getUniformLocation(h,\"uColorFactor\"),uMatrix:t.getUniformLocation(h,\"u_matrix\"),uTextureMatrix:t.getUniformLocation(h,\"u_textureMatrix\")}},\"f\"),xr(this,Lr,e(t),\"f\"),xr(this,Ar,i(t),\"f\"),xr(this,Or,p,\"f\")}const n=(t,e,i)=>{t.bindBuffer(t.ARRAY_BUFFER,e),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0)},s=(t,e,i)=>{const r=t.RGBA,n=t.RGBA,s=t.UNSIGNED_BYTE;t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,r,n,s,i)},_=(t,e,s,o)=>{t.clearColor(0,0,0,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),n(t,s.positions,e.attribLocations.vertexPosition),n(t,s.texCoords,e.attribLocations.texPosition),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,o),t.uniform1i(e.uniformLocations.uSampler,0),t.uniform1f(e.uniformLocations.uColorFactor,[Sr.GREY,Sr.GREY32].includes(p)?1:0);let m,v,_=Cr.translate(Cr.identity(),-1,-1);_=Cr.scale(_,2,2),_=Cr.scale(_,1/t.canvas.width,1/t.canvas.height),m=Cr.translate(_,u,d),m=Cr.scale(m,f,g),t.uniformMatrix3fv(e.uniformLocations.uMatrix,!1,m),v=Cr.translate(Cr.identity(),a/i,h/r),v=Cr.scale(v,l/i,c/r),t.uniformMatrix3fv(e.uniformLocations.uTextureMatrix,!1,v),t.drawArrays(t.TRIANGLES,0,6)};s(t,br(this,Ar,\"f\"),e),_(t,br(this,Ir,\"f\"),br(this,Lr,\"f\"),br(this,Ar,\"f\"));const y=m||new Uint8Array(4*f*g);if(t.readPixels(u,d,f,g,t.RGBA,t.UNSIGNED_BYTE,y),255!==y[3]){Gr._onLog&&Gr._onLog(\"Incorrect WebGL drawing .\");const t=new Error(\"WebGL error: incorrect drawing.\");throw t.name=\"WebGLError\",t}return Gr._onLog&&Gr._onLog(\"drawImage() in WebGL end. Costs: \"+(Date.now()-o)),{context:t,pixelFormat:p===Sr.GREY?Sr.GREY32:p,bUseWebGL:!0}}catch(o){if(this.forceLoseContext(),null==(null==s?void 0:s.bUseWebGL))return Gr._onLog&&Gr._onLog(\"'drawImage()' in WebGL failed, try again in context2d.\"),this.useWebGLByDefault=!1,this.drawImage(t,e,i,r,n,Object.assign({},s,{bUseWebGL:!1}));throw o.name=\"WebGLError\",o}}readCvsData(t,e,i){if(!(t instanceof CanvasRenderingContext2D||t instanceof WebGLRenderingContext))throw new Error(\"Invalid 'context'.\");let r,n=0,s=0,o=t.canvas.width,a=t.canvas.height;if(e&&(e.x&&(n=e.x),e.y&&(s=e.y),e.width&&(o=e.width),e.height&&(a=e.height)),(null==i?void 0:i.length)<4*o*a)throw new Error(\"Unexpected size of the 'bufferContainer'.\");if(t instanceof WebGLRenderingContext){const e=t;i?(e.readPixels(n,s,o,a,e.RGBA,e.UNSIGNED_BYTE,i),r=new Uint8Array(i.buffer,0,4*o*a)):(r=new Uint8Array(4*o*a),e.readPixels(n,s,o,a,e.RGBA,e.UNSIGNED_BYTE,r))}else if(t instanceof CanvasRenderingContext2D){let e;e=t.getImageData(n,s,o,a),r=new Uint8Array(e.data.buffer),null==i||i.set(r)}return r}transformPixelFormat(t,e,i,r){let n,s;if(Gr._onLog&&(n=Date.now(),Gr._onLog(\"transformPixelFormat(), START: \"+n)),e===i)return Gr._onLog&&Gr._onLog(\"transformPixelFormat() end. Costs: \"+(Date.now()-n)),r?new Uint8Array(t):t;const o=[Sr.RGBA,Sr.RBGA,Sr.GRBA,Sr.GBRA,Sr.BRGA,Sr.BGRA];if(o.includes(e))if(i===Sr.GREY){s=new Uint8Array(t.length/4);for(let e=0;e<t.length;e+=4){const i=.21*t[e]+.71*t[e+1]+.07*t[e+2];s[e/4]=i}}else if(i===Sr.GREY32){s=r?new Uint8Array(t):t;for(let e=0;e<t.length;e+=4){const i=.21*t[e]+.71*t[e+1]+.07*t[e+2];s[e]=i,s[e+1]=i,s[e+2]=i}}else{if(!o.includes(i))throw new Error(\"Unable to transform.\");if(r){s=new Uint8Array(t);const r=e.indexOf(\"r\"),n=e.indexOf(\"g\"),o=e.indexOf(\"b\"),a=i.indexOf(\"r\"),h=i.indexOf(\"g\"),l=i.indexOf(\"b\");for(let e=0;e<t.length;e+=4)s[e+a]=t[e+r],s[e+h]=t[e+n],s[e+l]=t[e+o]}else{s=t;const r=e.indexOf(\"r\"),n=e.indexOf(\"g\"),o=e.indexOf(\"b\"),a=i.indexOf(\"r\"),h=i.indexOf(\"g\"),l=i.indexOf(\"b\");for(let e=0;e<t.length;e+=4){let i=[t[e],t[e+1],t[e+2]];s[e+a]=i[r],s[e+h]=i[n],s[e+l]=i[o]}}}else if(e===Sr.GREY){if(i!==Sr.GREY32)throw new Error(\"Unable to transform.\");s=new Uint8Array(4*t.length);for(let e=0;e<t.length;e++)s[4*e]=t[e],s[4*e+1]=t[e],s[4*e+2]=t[e],s[4*e+3]=255}else{if(e!==Sr.GREY32)throw new Error(\"Unable to transform.\");if(i!==Sr.GREY)throw new Error(\"Unable to transform.\");s=new Uint8Array(t.length/4);for(let e=0;e<t.length;e+=4)s[e/4]=t[e]}return Gr._onLog&&Gr._onLog(\"transformPixelFormat() end. Costs: \"+(Date.now()-n)),s}getImageData(t,e,i,r,n){if(this.disposed)throw Error(\"The 'ImageDataGetter' instance has been disposed.\");if(!e||!i)throw new Error(\"Invalid 'sourceWidth' or 'sourceHeight'.\");if(null==br(Gr,Tr,\"f\",Er)&&Gr.checkWebGLSupport(),(null==n?void 0:n.bUseWebGL)&&!br(Gr,Tr,\"f\",Er))throw new Error(\"Your browser or machine may not support WebGL.\");if(r.sx>e||r.sy>i||r.sx+r.sWidth>e||r.sy+r.sHeight>i)throw new Error(\"Invalid position.\");if(t instanceof HTMLVideoElement&&4!==t.readyState||t instanceof HTMLImageElement&&!t.complete)throw new Error(\"The source is not loaded.\");let s;Gr._onLog&&(s=Date.now(),Gr._onLog(\"getImageData(), START: \"+s));const o=Math.round(r.sx),a=Math.round(r.sy),h=Math.round(r.sWidth),l=Math.round(r.sHeight),c=Math.round(r.dWidth),u=Math.round(r.dHeight);let d=Sr.RGBA;(null==n?void 0:n.pixelFormat)&&(d=n.pixelFormat);let f,g,m,p=null;if((null==n?void 0:n.bufferContainer)&&(p=n.bufferContainer),br(Gr,Tr,\"f\",Er)&&(this.useWebGLByDefault&&null==(null==n?void 0:n.bUseWebGL)||(null==n?void 0:n.bUseWebGL))){Gr._onLog&&Gr._onLog(\"getImageData() in WebGL.\"),this._reusedWebGLCvs||(this._reusedWebGLCvs=document.createElement(\"canvas\")),f=this._reusedWebGLCvs;try{if(p)if(d===Sr.GREY){if(m=new Uint8Array(4*c*u),g=this.drawImage(f,t,e,i,{sx:o,sy:a,sWidth:h,sHeight:l,dWidth:c,dHeight:u},{pixelFormat:d,bUseWebGL:!0,bufferContainer:m}),m=this.transformPixelFormat(m,g.pixelFormat,d),p){if(p.length<m.length)throw new Error(\"Unexpected size of the 'bufferContainer'.\");p.set(m)}}else g=this.drawImage(f,t,e,i,{sx:o,sy:a,sWidth:h,sHeight:l,dWidth:c,dHeight:u},{pixelFormat:d,bUseWebGL:!0,bufferContainer:p}),m=new Uint8Array(p.buffer,0,4*c*u),m=this.transformPixelFormat(m,g.pixelFormat,d);else d===Sr.GREY?((!br(this,Dr,\"f\")||br(this,Dr,\"f\").length<4*c*u)&&xr(this,Dr,new Uint8Array(4*c*u),\"f\"),m=new Uint8Array(br(this,Dr,\"f\").buffer,0,4*c*u)):m=new Uint8Array(4*c*u),g=this.drawImage(f,t,e,i,{sx:o,sy:a,sWidth:h,sHeight:l,dWidth:c,dHeight:u},{pixelFormat:d,bUseWebGL:!0,bufferContainer:m}),m=this.transformPixelFormat(m,g.pixelFormat,d)}catch(r){if(\"WebGLError\"===r.name&&(this.forceLoseContext(),null==(null==n?void 0:n.bUseWebGL)))return Gr._onLog&&Gr._onLog(\"getImageData() in WebGL failed, try again in context2d.\"),this.useWebGLByDefault=!1,this.getImageData(t,e,i,{sx:o,sy:a,sWidth:h,sHeight:l,dWidth:c,dHeight:u},Object.assign({},n,{bUseWebGL:!1}));throw r}}else if(Gr._onLog&&Gr._onLog(\"getImageData() in context2d.\"),this._reusedCvs||(this._reusedCvs=document.createElement(\"canvas\")),f=this._reusedCvs,g=this.drawImage(f,t,e,i,{sx:o,sy:a,sWidth:h,sHeight:l,dWidth:c,dHeight:u},{pixelFormat:Sr.RGBA,bUseWebGL:!1}),m=this.readCvsData(g.context,{width:c,height:u},null),m=this.transformPixelFormat(m,g.pixelFormat,d),p){if(p.length<m.length)throw new Error(\"Unexpected size of the 'bufferContainer'.\");p.set(m)}return Gr._onLog&&Gr._onLog(\"getImageData() end. Costs: \"+(Date.now()-s)),{data:m,pixelFormat:d,width:c,height:u,bUseWebGL:g.bUseWebGL}}convertDataToCvs(t,e,i,r){if(!(t instanceof Uint8Array||t instanceof Uint8ClampedArray))throw new TypeError(\"Invalid 'data'.\");if(\"number\"!=typeof e||e<=0)throw new Error(\"Invalid 'width'.\");if(\"number\"!=typeof i||i<=0)throw new Error(\"Invalid 'height'.\");const n=document.createElement(\"canvas\");let s;if(n.width=e,n.height=i,r===Sr.GREY){s=new Uint8ClampedArray(4*e*i);for(let e=0;e<s.length;e+=4)s[e]=t[e/4],s[e+1]=t[e/4],s[e+2]=t[e/4],s[e+3]=255}else s=new Uint8ClampedArray(t.buffer);const o=new ImageData(s,e,i);return n.getContext(\"2d\").putImageData(o,0,0),n}forceLoseContext(){if(!this._reusedWebGLCvs)return;const t=this._reusedWebGLCvs.ctxWebGL;t&&!t.isContextLost()&&t.getExtension(\"WEBGL_lose_context\")&&t.getExtension(\"WEBGL_lose_context\").loseContext(),xr(this,Ar,null,\"f\"),xr(this,Ir,null,\"f\"),xr(this,Lr,null,\"f\"),this._reusedWebGLCvs=null}dispose(){this.forceLoseContext(),xr(this,Mr,!0,\"f\")}}Tr=Gr,Or=new WeakMap,Ar=new WeakMap,Ir=new WeakMap,Lr=new WeakMap,Dr=new WeakMap,Mr=new WeakMap,Er={value:void 0};class Nr{get magnifierCanvas(){return x(this,Fr,\"f\")}constructor(){Fr.set(this,void 0),Pr.set(this,void 0),C(this,Fr,document.createElement(\"canvas\"),\"f\"),x(this,Fr,\"f\").style.borderRadius=\"50%\",C(this,Pr,new Gr,\"f\")}update(t,e,i,r){if(!this.magnifierCanvas)throw new Error(\"'magnifierCanvas' not created.\");const n=this.magnifierCanvas;n.width=n.height=t;const s={sx:e.x-i/2,sy:e.y-i/2,sWidth:i,sHeight:i,dx:0,dy:0,dWidth:n.width,dHeight:n.height};for(let t of r){const{image:e,width:i,height:r}=t;x(this,Pr,\"f\").drawImage(n,e,i,r,s,{bUseWebGL:!1})}n.style.width=n.width+\"px\",n.style.height=n.height+\"px\"}show(){if(!this.magnifierCanvas)throw new Error(\"'magnifierCanvas' not created.\");this.magnifierCanvas.style.display=\"block\"}hide(){if(!this.magnifierCanvas)throw new Error(\"'magnifierCanvas' not created.\");this.magnifierCanvas.style.display=\"none\"}}Fr=new WeakMap,Pr=new WeakMap;class Yr extends _e{static async createInstance(t){const e=new Yr;return await e.setUIElement(t||x(e,kr,\"m\",Vr).call(e)),e}get disposed(){return x(this,Ur,\"f\")}constructor(){super(),kr.add(this),this.containerClassName=\"dce-image-container\",Rr.set(this,void 0),Br.set(this,void 0),this.isUseMagnifier=!0,jr.set(this,(t=>{var e;if(!this.isUseMagnifier)return;if(x(this,Br,\"f\")||C(this,Br,new Nr,\"f\"),!x(this,Br,\"f\").magnifierCanvas)return;document.body.contains(x(this,Br,\"f\").magnifierCanvas)||(x(this,Br,\"f\").magnifierCanvas.style.position=\"fixed\",x(this,Br,\"f\").magnifierCanvas.style.boxSizing=\"content-box\",x(this,Br,\"f\").magnifierCanvas.style.border=\"2px solid #FFFFFF\",document.body.append(x(this,Br,\"f\").magnifierCanvas));const i=this._innerComponent.getElement(\"content\");if(!i)return;if(t.pointer.x<0||t.pointer.x>i.width||t.pointer.y<0||t.pointer.y>i.height)return void x(this,Wr,\"f\").call(this);const r=null===(e=this._drawingLayerManager._getFabricCanvas())||void 0===e?void 0:e.lowerCanvasEl;if(!r)return;const n=Math.max(i.clientWidth/5/1.5,i.clientHeight/4/1.5),s=1.5*n,o=[{image:i,width:i.width,height:i.height},{image:r,width:r.width,height:r.height}];x(this,Br,\"f\").update(s,t.pointer,n,o);{let e=0,i=0;t.e instanceof MouseEvent?(e=t.e.clientX,i=t.e.clientY):t.e instanceof TouchEvent&&t.e.changedTouches.length&&(e=t.e.changedTouches[0].clientX,i=t.e.changedTouches[0].clientY),e<1.5*s&&i<1.5*s?(x(this,Br,\"f\").magnifierCanvas.style.left=\"auto\",x(this,Br,\"f\").magnifierCanvas.style.top=\"0\",x(this,Br,\"f\").magnifierCanvas.style.right=\"0\"):(x(this,Br,\"f\").magnifierCanvas.style.left=\"0\",x(this,Br,\"f\").magnifierCanvas.style.top=\"0\",x(this,Br,\"f\").magnifierCanvas.style.right=\"auto\")}x(this,Br,\"f\").show()})),Wr.set(this,(()=>{x(this,Br,\"f\")&&x(this,Br,\"f\").hide()})),Ur.set(this,!1)}_setUIElement(t){this.UIElement=t,this._unbindUI(),this._bindUI()}async setUIElement(t){let e;if(\"string\"==typeof t){let i=await gt(t);e=document.createElement(\"div\"),Object.assign(e.style,{width:\"100%\",height:\"100%\"}),e.attachShadow({mode:\"open\"}).appendChild(i)}else e=t;this._setUIElement(e)}getUIElement(){return this.UIElement}_bindUI(){if(!this.UIElement)throw new Error(\"Need to set 'UIElement'.\");if(this._innerComponent)return;const t=this.UIElement;let e=t.classList.contains(this.containerClassName)?t:t.querySelector(`.${this.containerClassName}`);e||(e=document.createElement(\"div\"),e.style.width=\"100%\",e.style.height=\"100%\",e.className=this.containerClassName,t.append(e)),this._innerComponent=new ye,e.appendChild(this._innerComponent)}_unbindUI(){var t,e,i;null===(t=this._drawingLayerManager)||void 0===t||t.clearDrawingLayers(),null===(e=this._innerComponent)||void 0===e||e.removeElement(\"drawing-layer\"),this._layerBaseCvs=null,null===(i=this._innerComponent)||void 0===i||i.remove(),this._innerComponent=null}setImage(t,e,i){if(!this._innerComponent)throw new Error(\"Need to set 'UIElement'.\");let r=this._innerComponent.getElement(\"content\");r||(r=document.createElement(\"canvas\"),r.style.objectFit=\"contain\",this._innerComponent.setElement(\"content\",r)),r.width===e&&r.height===i||(r.width=e,r.height=i);const n=r.getContext(\"2d\");n.clearRect(0,0,r.width,r.height),t instanceof Uint8Array||t instanceof Uint8ClampedArray?(t instanceof Uint8Array&&(t=new Uint8ClampedArray(t.buffer)),n.putImageData(new ImageData(t,e,i),0,0)):(t instanceof HTMLCanvasElement||t instanceof HTMLImageElement)&&n.drawImage(t,0,0)}getImage(){return this._innerComponent.getElement(\"content\")}clearImage(){if(!this._innerComponent)return;let t=this._innerComponent.getElement(\"content\");t&&t.getContext(\"2d\").clearRect(0,0,t.width,t.height)}removeImage(){this._innerComponent&&this._innerComponent.removeElement(\"content\")}setOriginalImage(t){if($(t)){C(this,Rr,t,\"f\");const{width:e,height:i,bytes:r,format:n}=Object.assign({},t);let s;if(n===dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_GRAYSCALED){s=new Uint8ClampedArray(e*i*4);for(let t=0;t<s.length;t+=4)s[t]=r[t/4],s[t+1]=r[t/4],s[t+2]=r[t/4],s[t+3]=255}else s=new Uint8ClampedArray(r.buffer);this.setImage(s,e,i)}else if(t instanceof HTMLCanvasElement)C(this,Rr,t,\"f\"),this.setImage(t,t.width,t.height);else{if(!(t instanceof HTMLImageElement))throw new TypeError(\"Invalid img.\");C(this,Rr,t,\"f\"),this.setImage(t,t.naturalWidth,t.naturalHeight)}let e;try{e=this.getContentDimensions()}catch(t){if(\"Invalid content dimensions.\"===(t.message||t))return;throw t}this.updateDrawingLayers(e)}getOriginalImage(){return x(this,Rr,\"f\")}getContentDimensions(){let t,e,i;if(this._innerComponent){const r=this._innerComponent.getElement(\"content\");t=null==r?void 0:r.width,e=null==r?void 0:r.height,i=\"contain\"}if(!t||!e)throw new Error(\"Invalid content dimensions.\");return{width:t,height:e,objectFit:i}}_createDrawingLayer(t,e,i,r){if(!this._layerBaseCvs){let t;try{t=this.getContentDimensions()}catch(t){if(\"Invalid content dimensions.\"!==(t.message||t))throw t}e||(e=(null==t?void 0:t.width)||300),i||(i=(null==t?void 0:t.height)||150),r||(r=(null==t?void 0:t.objectFit)||\"contain\"),this._layerBaseCvs=this.createDrawingLayerBaseCvs(e,i,r)}const n=this._layerBaseCvs,s=this._drawingLayerManager.createDrawingLayer(n,t);this._innerComponent.getElement(\"drawing-layer\")||this._innerComponent.setElement(\"drawing-layer\",n.parentElement),t!=me.TIP_LAYER_ID&&s.setMode(\"editor\");const o=this._drawingLayerManager._getFabricCanvas();return o&&(o.on(\"object:scaling\",x(this,jr,\"f\")),o.on(\"object:rotating\",x(this,jr,\"f\")),o.on(\"object:skewing\",x(this,jr,\"f\")),o.on(\"mouse:up\",x(this,Wr,\"f\"))),s}dispose(){this._unbindUI(),this.__proto__=null;for(let t in this)delete this[t];Object.defineProperty(this,\"disposed\",{value:!0})}}Rr=new WeakMap,Br=new WeakMap,jr=new WeakMap,Wr=new WeakMap,Ur=new WeakMap,kr=new WeakSet,Vr=function(){const t=document.createElement(\"div\");return t.className=this.containerClassName,t.style.width=\"100%\",t.style.height=\"100%\",t};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9keW5hbXNvZnQtY2FtZXJhLWVuaGFuY2VyL2Rpc3QvZGNlLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUN3Yyx5Q0FBeUMsK0JBQStCLGtEQUFrRCw0QkFBNEIsS0FBSyxxQkFBcUIsNEJBQTRCLDJDQUEyQyxXQUFXLElBQUksOERBQUMsTUFBTSx1QkFBdUIsQ0FBQywrREFBQyxNQUFNLGNBQWMsQ0FBQyw4REFBQyxRQUFRLFFBQVEsb0JBQW9CLGVBQWUsb0JBQW9CLG9GQUFvRiw0SUFBNEkscURBQXFELHNCQUFzQixpRUFBaUUsb0ZBQW9GLDJJQUEySSxtREFBbUQsY0FBYyx3SkFBd0osT0FBTyxTQUFTLE1BQU0sNkJBQTZCLDhCQUE4Qix1RUFBdUUsd0JBQXdCLGdDQUFnQyxJQUFJLDJEQUEyRCxtQkFBbUIsTUFBTSxNQUFNLFFBQVEsUUFBUSx5Q0FBeUMsZ0JBQWdCLGlCQUFpQiw0REFBNEQsaURBQWlELElBQUksZ0JBQWdCLG1CQUFtQixVQUFVLHdDQUF3QyxPQUFPLE9BQU8sZ0JBQWdCLGlCQUFpQiw2QkFBNkIscUJBQXFCLElBQUksT0FBTyw0REFBNEQsMEJBQTBCLE9BQU8saUNBQWlDLEVBQUUsR0FBRywwTEFBMEwsU0FBUyxTQUFTLHVCQUF1QixTQUFTLDRCQUE0QixTQUFTLFFBQVEsVUFBVSxVQUFVLHVJQUF1SSxPQUFPLGNBQWMsb0RBQW9ELGlCQUFpQixpUEFBaVAsS0FBSywwSUFBMEksVUFBVSwrQkFBK0Isb0JBQW9CLFNBQVMscUlBQXFJLGdCQUFnQixxREFBcUQsc0NBQXNDLHdCQUF3Qix5REFBeUQsZ0JBQWdCLDhLQUE4SywrQ0FBK0MsMkJBQTJCLHNCQUFzQixnTEFBZ0wsTUFBTSxvZ0JBQW9nQixzQkFBc0IsZ0tBQWdLLDBPQUEwTyx3QkFBd0Isa0ZBQWtG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aUIsSUFBSSxNQUFNLE9BQU8sZ0VBQUMsaUJBQWlCLCtCQUErQixZQUFZLFdBQVcsd0RBQXdELHVDQUF1QyxxQkFBcUIsMEZBQTBGLEtBQUssd0VBQXdFLGlFQUFpRSxNQUFNLElBQUksOEJBQThCLFNBQVMseURBQXlELFFBQVEsNEJBQTRCLG1CQUFtQixzQkFBc0IsdUJBQXVCLFVBQVUseUJBQXlCLG1EQUFtRCwrREFBK0QseURBQXlELE9BQU8sOEJBQThCLDZCQUE2Qix3QkFBd0IsTUFBTSxJQUFJLDhCQUE4QixTQUFTLDBEQUEwRCxtTEFBbUwsK0VBQStFLDJKQUEySixxREFBcUQsaUtBQWlLLFVBQVUscUNBQXFDLGlDQUFpQyx1Q0FBdUMsU0FBUyxHQUFHLHdHQUF3RyxzQ0FBc0MseUZBQXljIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9keW5hbXNvZnQtY2FtZXJhLWVuaGFuY2VyL2Rpc3QvZGNlLmVzbS5qcz84MzhhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogRHluYW1zb2Z0IEphdmFTY3JpcHQgTGlicmFyeVxuICogQHByb2R1Y3QgRHluYW1zb2Z0IENhbWVyYSBFbmhhbmNlciBKUyBFZGl0aW9uXG4gKiBAd2Vic2l0ZSBodHRwczovL3d3dy5keW5hbXNvZnQuY29tXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAyMDI0LCBEeW5hbXNvZnQgQ29ycG9yYXRpb25cbiAqIEBhdXRob3IgRHluYW1zb2Z0XG4gKiBAdmVyc2lvbiA0LjEuMFxuICogQGZpbGVvdmVydmlldyBEeW5hbXNvZnQgSmF2YVNjcmlwdCBMaWJyYXJ5IGZvciBDYW1lcmEgRW5oYW5jZXJcbiAqIE1vcmUgaW5mbyBvbiBEQ0UgSlM6IGh0dHBzOi8vd3d3LmR5bmFtc29mdC5jb20vY2FtZXJhLWVuaGFuY2VyL2RvY3MvcHJvZ3JhbW1pbmcvamF2YXNjcmlwdC8/dmVyPWxhdGVzdFxuICovXG5pbXBvcnR7YXV0b0Rpc2NvdmVyeVBhdGhzIGFzIHQsd29ya2VyQXV0b1Jlc291cmNlcyBhcyBlLG1hcFBhY2thZ2VSZWdpc3RlciBhcyBpLF9pc0RTSW1hZ2VEYXRhIGFzIHIsX2lzRFNSZWN0IGFzIG4sX2lzTGluZVNlZ21lbnQgYXMgcyxfaXNRdWFkIGFzIG8sX2lzUmVjdCBhcyBhLF9pc1BvbHlnb24gYXMgaCxfaXNQb2ludCBhcyBsLEVudW1JbWFnZVBpeGVsRm9ybWF0IGFzIGMsaGFuZGxlRW5naW5lUmVzb3VyY2VQYXRocyBhcyB1LENvcmVNb2R1bGUgYXMgZCxFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZSBhcyBmLEltYWdlU291cmNlQWRhcHRlciBhcyBnLEVudW1JbWFnZVRhZ1R5cGUgYXMgbSxFbnVtSW50ZXJtZWRpYXRlUmVzdWx0VW5pdFR5cGUgYXMgcCxFbnVtQnVmZmVyT3ZlcmZsb3dQcm90ZWN0aW9uTW9kZSBhcyB2LEVudW1FcnJvckNvZGUgYXMgX31mcm9tXCJkeW5hbXNvZnQtY29yZVwiO2NvbnN0IHk9XCJ1bmRlZmluZWRcIj09dHlwZW9mIHNlbGYsdz0oKCk9PntpZigheSYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCl7bGV0IHQ9ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMsZT10LmluZGV4T2YoXCI/XCIpO2lmKC0xIT1lKXQ9dC5zdWJzdHJpbmcoMCxlKTtlbHNle2xldCBlPXQuaW5kZXhPZihcIiNcIik7LTEhPWUmJih0PXQuc3Vic3RyaW5nKDAsZSkpfXJldHVybiB0LnN1YnN0cmluZygwLHQubGFzdEluZGV4T2YoXCIvXCIpKzEpfXJldHVyblwiLi9cIn0pKCk7dC5kY2U9e3ZlcnNpb246XCI0LjEuMFwiLHBhdGg6d30sZS5kY2U9e3dhc206ITEsanM6ITF9LGkuZGNlPXt9O2NsYXNzIGJ7c3RhdGljIGdldFZlcnNpb24oKXtyZXR1cm5cIjQuMS4wXCJ9fWZ1bmN0aW9uIHgodCxlLGkscil7aWYoXCJhXCI9PT1pJiYhcil0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGU/dCE9PWV8fCFyOiFlLmhhcyh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO3JldHVyblwibVwiPT09aT9yOlwiYVwiPT09aT9yLmNhbGwodCk6cj9yLnZhbHVlOmUuZ2V0KHQpfWZ1bmN0aW9uIEModCxlLGkscixuKXtpZihcIm1cIj09PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtpZihcImFcIj09PXImJiFuKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZT90IT09ZXx8IW46IWUuaGFzKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtyZXR1cm5cImFcIj09PXI/bi5jYWxsKHQsaSk6bj9uLnZhbHVlPWk6ZS5zZXQodCxpKSxpfWxldCBTLFQsRSxPLEE7XCJmdW5jdGlvblwiPT10eXBlb2YgU3VwcHJlc3NlZEVycm9yJiZTdXBwcmVzc2VkRXJyb3IsXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG5hdmlnYXRvciYmKFM9bmF2aWdhdG9yLFQ9Uy51c2VyQWdlbnQsRT1TLnBsYXRmb3JtLE89Uy5tZWRpYURldmljZXMpLGZ1bmN0aW9uKCl7aWYoIXkpe2NvbnN0IHQ9e0VkZ2U6e3NlYXJjaDpcIkVkZ1wiLHZlclNlYXJjaDpcIkVkZ1wifSxPUFI6bnVsbCxDaHJvbWU6bnVsbCxTYWZhcmk6e3N0cjpTLnZlbmRvcixzZWFyY2g6XCJBcHBsZVwiLHZlclNlYXJjaDpbXCJWZXJzaW9uXCIsXCJpUGhvbmUgT1NcIixcIkNQVSBPU1wiXX0sRmlyZWZveDpudWxsLEV4cGxvcmVyOntzZWFyY2g6XCJNU0lFXCIsdmVyU2VhcmNoOlwiTVNJRVwifX0sZT17SGFybW9ueU9TOm51bGwsQW5kcm9pZDpudWxsLGlQaG9uZTpudWxsLGlQYWQ6bnVsbCxXaW5kb3dzOntzdHI6RSxzZWFyY2g6XCJXaW5cIn0sTWFjOntzdHI6RX0sTGludXg6e3N0cjpFfX07bGV0IGk9XCJ1bmtub3duQnJvd3NlclwiLHI9MCxuPVwidW5rbm93bk9TXCI7Zm9yKGxldCBlIGluIHQpe2NvbnN0IG49dFtlXXx8e307bGV0IHM9bi5zdHJ8fFQsbz1uLnNlYXJjaHx8ZSxhPW4udmVyU3RyfHxULGg9bi52ZXJTZWFyY2h8fGU7aWYoaCBpbnN0YW5jZW9mIEFycmF5fHwoaD1baF0pLC0xIT1zLmluZGV4T2Yobykpe2k9ZTtmb3IobGV0IHQgb2YgaCl7bGV0IGU9YS5pbmRleE9mKHQpO2lmKC0xIT1lKXtyPXBhcnNlRmxvYXQoYS5zdWJzdHJpbmcoZSt0Lmxlbmd0aCsxKSk7YnJlYWt9fWJyZWFrfX1mb3IobGV0IHQgaW4gZSl7Y29uc3QgaT1lW3RdfHx7fTtsZXQgcj1pLnN0cnx8VCxzPWkuc2VhcmNofHx0O2lmKC0xIT1yLmluZGV4T2Yocykpe249dDticmVha319XCJMaW51eFwiPT1uJiYtMSE9VC5pbmRleE9mKFwiV2luZG93cyBOVFwiKSYmKG49XCJIYXJtb255T1NcIiksQT17YnJvd3NlcjppLHZlcnNpb246cixPUzpufX15JiYoQT17YnJvd3NlcjpcInNzclwiLHZlcnNpb246MCxPUzpcInNzclwifSl9KCk7Y29uc3QgST1cInVuZGVmaW5lZFwiIT10eXBlb2YgV2ViQXNzZW1ibHkmJlQmJiEoL1NhZmFyaS8udGVzdChUKSYmIS9DaHJvbWUvLnRlc3QoVCkmJi9cXCguK1xcczExXzJfKFsyLTZdKS4qXFwpLy50ZXN0KFQpKSxMPSEoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFdvcmtlciksRD0hKCFPfHwhTy5nZXRVc2VyTWVkaWEpLE09YXN5bmMoKT0+e2xldCB0PSExO2lmKEQpdHJ5eyhhd2FpdCBPLmdldFVzZXJNZWRpYSh7dmlkZW86ITB9KSkuZ2V0VHJhY2tzKCkuZm9yRWFjaCgodD0+e3Quc3RvcCgpfSkpLHQ9ITB9Y2F0Y2godCl7fXJldHVybiB0fTtcIkNocm9tZVwiPT09QS5icm93c2VyJiZBLnZlcnNpb24+NjZ8fFwiU2FmYXJpXCI9PT1BLmJyb3dzZXImJkEudmVyc2lvbj4xM3x8XCJPUFJcIj09PUEuYnJvd3NlciYmQS52ZXJzaW9uPjQzfHxcIkVkZ2VcIj09PUEuYnJvd3NlciYmQS52ZXJzaW9uO3ZhciBGPXs2NTM6KHQsZSxpKT0+e3ZhciByLG4scyxvLGEsaCxsLGMsdSxkLGYsZyxtLHAsdixfLHksdyxiLHgsQyxTPVN8fHt2ZXJzaW9uOlwiNS4yLjFcIn07aWYoZS5mYWJyaWM9UyxcInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cpZG9jdW1lbnQgaW5zdGFuY2VvZihcInVuZGVmaW5lZFwiIT10eXBlb2YgSFRNTERvY3VtZW50P0hUTUxEb2N1bWVudDpEb2N1bWVudCk/Uy5kb2N1bWVudD1kb2N1bWVudDpTLmRvY3VtZW50PWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcIlwiKSxTLndpbmRvdz13aW5kb3c7ZWxzZXt2YXIgVD1uZXcoaSgxOTIpLkpTRE9NKShkZWNvZGVVUklDb21wb25lbnQoXCIlM0MhRE9DVFlQRSUyMGh0bWwlM0UlM0NodG1sJTNFJTNDaGVhZCUzRSUzQyUyRmhlYWQlM0UlM0Nib2R5JTNFJTNDJTJGYm9keSUzRSUzQyUyRmh0bWwlM0VcIikse2ZlYXR1cmVzOntGZXRjaEV4dGVybmFsUmVzb3VyY2VzOltcImltZ1wiXX0scmVzb3VyY2VzOlwidXNhYmxlXCJ9KS53aW5kb3c7Uy5kb2N1bWVudD1ULmRvY3VtZW50LFMuanNkb21JbXBsRm9yV3JhcHBlcj1pKDg5OCkuaW1wbEZvcldyYXBwZXIsUy5ub2RlQ2FudmFzPWkoMjQ1KS5DYW52YXMsUy53aW5kb3c9VCxET01QYXJzZXI9Uy53aW5kb3cuRE9NUGFyc2VyfWZ1bmN0aW9uIEUodCxlKXt2YXIgaT10LmNhbnZhcyxyPWUudGFyZ2V0Q2FudmFzLG49ci5nZXRDb250ZXh0KFwiMmRcIik7bi50cmFuc2xhdGUoMCxyLmhlaWdodCksbi5zY2FsZSgxLC0xKTt2YXIgcz1pLmhlaWdodC1yLmhlaWdodDtuLmRyYXdJbWFnZShpLDAscyxyLndpZHRoLHIuaGVpZ2h0LDAsMCxyLndpZHRoLHIuaGVpZ2h0KX1mdW5jdGlvbiBPKHQsZSl7dmFyIGk9ZS50YXJnZXRDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLHI9ZS5kZXN0aW5hdGlvbldpZHRoLG49ZS5kZXN0aW5hdGlvbkhlaWdodCxzPXIqbio0LG89bmV3IFVpbnQ4QXJyYXkodGhpcy5pbWFnZUJ1ZmZlciwwLHMpLGE9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMuaW1hZ2VCdWZmZXIsMCxzKTt0LnJlYWRQaXhlbHMoMCwwLHIsbix0LlJHQkEsdC5VTlNJR05FRF9CWVRFLG8pO3ZhciBoPW5ldyBJbWFnZURhdGEoYSxyLG4pO2kucHV0SW1hZ2VEYXRhKGgsMCwwKX1TLmlzVG91Y2hTdXBwb3J0ZWQ9XCJvbnRvdWNoc3RhcnRcImluIFMud2luZG93fHxcIm9udG91Y2hzdGFydFwiaW4gUy5kb2N1bWVudHx8Uy53aW5kb3cmJlMud2luZG93Lm5hdmlnYXRvciYmUy53aW5kb3cubmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzPjAsUy5pc0xpa2VseU5vZGU9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEJ1ZmZlciYmXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvdyxTLlNIQVJFRF9BVFRSSUJVVEVTPVtcImRpc3BsYXlcIixcInRyYW5zZm9ybVwiLFwiZmlsbFwiLFwiZmlsbC1vcGFjaXR5XCIsXCJmaWxsLXJ1bGVcIixcIm9wYWNpdHlcIixcInN0cm9rZVwiLFwic3Ryb2tlLWRhc2hhcnJheVwiLFwic3Ryb2tlLWxpbmVjYXBcIixcInN0cm9rZS1kYXNob2Zmc2V0XCIsXCJzdHJva2UtbGluZWpvaW5cIixcInN0cm9rZS1taXRlcmxpbWl0XCIsXCJzdHJva2Utb3BhY2l0eVwiLFwic3Ryb2tlLXdpZHRoXCIsXCJpZFwiLFwicGFpbnQtb3JkZXJcIixcInZlY3Rvci1lZmZlY3RcIixcImluc3RhbnRpYXRlZF9ieV91c2VcIixcImNsaXAtcGF0aFwiXSxTLkRQST05NixTLnJlTnVtPVwiKD86Wy0rXT8oPzpcXFxcZCt8XFxcXGQqXFxcXC5cXFxcZCspKD86W2VFXVstK10/XFxcXGQrKT8pXCIsUy5jb21tYVdzcD1cIig/OlxcXFxzKyw/XFxcXHMqfCxcXFxccyopXCIsUy5yZVBhdGhDb21tYW5kPS8oWy0rXT8oKFxcZCtcXC5cXGQrKXwoKFxcZCspfChcXC5cXGQrKSkpKD86W2VFXVstK10/XFxkKyk/KS9naSxTLnJlTm9uV29yZD0vWyBcXG5cXC4sOyFcXD9cXC1dLyxTLmZvbnRQYXRocz17fSxTLmlNYXRyaXg9WzEsMCwwLDEsMCwwXSxTLnN2Z05TPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixTLnBlcmZMaW1pdFNpemVUb3RhbD0yMDk3MTUyLFMubWF4Q2FjaGVTaWRlTGltaXQ9NDA5NixTLm1pbkNhY2hlU2lkZUxpbWl0PTI1NixTLmNoYXJXaWR0aHNDYWNoZT17fSxTLnRleHR1cmVTaXplPTIwNDgsUy5kaXNhYmxlU3R5bGVDb3B5UGFzdGU9ITEsUy5lbmFibGVHTEZpbHRlcmluZz0hMCxTLmRldmljZVBpeGVsUmF0aW89Uy53aW5kb3cuZGV2aWNlUGl4ZWxSYXRpb3x8Uy53aW5kb3cud2Via2l0RGV2aWNlUGl4ZWxSYXRpb3x8Uy53aW5kb3cubW96RGV2aWNlUGl4ZWxSYXRpb3x8MSxTLmJyb3dzZXJTaGFkb3dCbHVyQ29uc3RhbnQ9MSxTLmFyY1RvU2VnbWVudHNDYWNoZT17fSxTLmJvdW5kc09mQ3VydmVDYWNoZT17fSxTLmNhY2hlc0JvdW5kc09mQ3VydmU9ITAsUy5mb3JjZUdMUHV0SW1hZ2VEYXRhPSExLFMuaW5pdEZpbHRlckJhY2tlbmQ9ZnVuY3Rpb24oKXtyZXR1cm4gUy5lbmFibGVHTEZpbHRlcmluZyYmUy5pc1dlYmdsU3VwcG9ydGVkJiZTLmlzV2ViZ2xTdXBwb3J0ZWQoUy50ZXh0dXJlU2l6ZSk/KGNvbnNvbGUubG9nKFwibWF4IHRleHR1cmUgc2l6ZTogXCIrUy5tYXhUZXh0dXJlU2l6ZSksbmV3IFMuV2ViZ2xGaWx0ZXJCYWNrZW5kKHt0aWxlU2l6ZTpTLnRleHR1cmVTaXplfSkpOlMuQ2FudmFzMmRGaWx0ZXJCYWNrZW5kP25ldyBTLkNhbnZhczJkRmlsdGVyQmFja2VuZDp2b2lkIDB9LFwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmKHdpbmRvdy5mYWJyaWM9UyksZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7aWYodGhpcy5fX2V2ZW50TGlzdGVuZXJzW3RdKXt2YXIgaT10aGlzLl9fZXZlbnRMaXN0ZW5lcnNbdF07ZT9pW2kuaW5kZXhPZihlKV09ITE6Uy51dGlsLmFycmF5LmZpbGwoaSwhMSl9fWZ1bmN0aW9uIGUodCxlKXt2YXIgaT1mdW5jdGlvbigpe2UuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMub2ZmKHQsaSl9LmJpbmQodGhpcyk7dGhpcy5vbih0LGkpfVMuT2JzZXJ2YWJsZT17ZmlyZTpmdW5jdGlvbih0LGUpe2lmKCF0aGlzLl9fZXZlbnRMaXN0ZW5lcnMpcmV0dXJuIHRoaXM7dmFyIGk9dGhpcy5fX2V2ZW50TGlzdGVuZXJzW3RdO2lmKCFpKXJldHVybiB0aGlzO2Zvcih2YXIgcj0wLG49aS5sZW5ndGg7cjxuO3IrKylpW3JdJiZpW3JdLmNhbGwodGhpcyxlfHx7fSk7cmV0dXJuIHRoaXMuX19ldmVudExpc3RlbmVyc1t0XT1pLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuITEhPT10fSkpLHRoaXN9LG9uOmZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fX2V2ZW50TGlzdGVuZXJzfHwodGhpcy5fX2V2ZW50TGlzdGVuZXJzPXt9KSwxPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIGkgaW4gdCl0aGlzLm9uKGksdFtpXSk7ZWxzZSB0aGlzLl9fZXZlbnRMaXN0ZW5lcnNbdF18fCh0aGlzLl9fZXZlbnRMaXN0ZW5lcnNbdF09W10pLHRoaXMuX19ldmVudExpc3RlbmVyc1t0XS5wdXNoKGUpO3JldHVybiB0aGlzfSxvbmNlOmZ1bmN0aW9uKHQsaSl7aWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciByIGluIHQpZS5jYWxsKHRoaXMscix0W3JdKTtlbHNlIGUuY2FsbCh0aGlzLHQsaSk7cmV0dXJuIHRoaXN9LG9mZjpmdW5jdGlvbihlLGkpe2lmKCF0aGlzLl9fZXZlbnRMaXN0ZW5lcnMpcmV0dXJuIHRoaXM7aWYoMD09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKGUgaW4gdGhpcy5fX2V2ZW50TGlzdGVuZXJzKXQuY2FsbCh0aGlzLGUpO2Vsc2UgaWYoMT09PWFyZ3VtZW50cy5sZW5ndGgmJlwib2JqZWN0XCI9PXR5cGVvZiBhcmd1bWVudHNbMF0pZm9yKHZhciByIGluIGUpdC5jYWxsKHRoaXMscixlW3JdKTtlbHNlIHQuY2FsbCh0aGlzLGUsaSk7cmV0dXJuIHRoaXN9fX0oKSxTLkNvbGxlY3Rpb249e19vYmplY3RzOltdLGFkZDpmdW5jdGlvbigpe2lmKHRoaXMuX29iamVjdHMucHVzaC5hcHBseSh0aGlzLl9vYmplY3RzLGFyZ3VtZW50cyksdGhpcy5fb25PYmplY3RBZGRlZClmb3IodmFyIHQ9MCxlPWFyZ3VtZW50cy5sZW5ndGg7dDxlO3QrKyl0aGlzLl9vbk9iamVjdEFkZGVkKGFyZ3VtZW50c1t0XSk7cmV0dXJuIHRoaXMucmVuZGVyT25BZGRSZW1vdmUmJnRoaXMucmVxdWVzdFJlbmRlckFsbCgpLHRoaXN9LGluc2VydEF0OmZ1bmN0aW9uKHQsZSxpKXt2YXIgcj10aGlzLl9vYmplY3RzO3JldHVybiBpP3JbZV09dDpyLnNwbGljZShlLDAsdCksdGhpcy5fb25PYmplY3RBZGRlZCYmdGhpcy5fb25PYmplY3RBZGRlZCh0KSx0aGlzLnJlbmRlck9uQWRkUmVtb3ZlJiZ0aGlzLnJlcXVlc3RSZW5kZXJBbGwoKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtmb3IodmFyIHQsZT10aGlzLl9vYmplY3RzLGk9ITEscj0wLG49YXJndW1lbnRzLmxlbmd0aDtyPG47cisrKS0xIT09KHQ9ZS5pbmRleE9mKGFyZ3VtZW50c1tyXSkpJiYoaT0hMCxlLnNwbGljZSh0LDEpLHRoaXMuX29uT2JqZWN0UmVtb3ZlZCYmdGhpcy5fb25PYmplY3RSZW1vdmVkKGFyZ3VtZW50c1tyXSkpO3JldHVybiB0aGlzLnJlbmRlck9uQWRkUmVtb3ZlJiZpJiZ0aGlzLnJlcXVlc3RSZW5kZXJBbGwoKSx0aGlzfSxmb3JFYWNoT2JqZWN0OmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPXRoaXMuZ2V0T2JqZWN0cygpLHI9MCxuPWkubGVuZ3RoO3I8bjtyKyspdC5jYWxsKGUsaVtyXSxyLGkpO3JldHVybiB0aGlzfSxnZXRPYmplY3RzOmZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10P3RoaXMuX29iamVjdHMuY29uY2F0KCk6dGhpcy5fb2JqZWN0cy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGU9PT10fSkpfSxpdGVtOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vYmplY3RzW3RdfSxpc0VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLl9vYmplY3RzLmxlbmd0aH0sc2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYmplY3RzLmxlbmd0aH0sY29udGFpbnM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fb2JqZWN0cy5pbmRleE9mKHQpPi0xfHwhIWUmJnRoaXMuX29iamVjdHMuc29tZSgoZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZS5jb250YWlucyYmZS5jb250YWlucyh0LCEwKX0pKX0sY29tcGxleGl0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vYmplY3RzLnJlZHVjZSgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCsoZS5jb21wbGV4aXR5P2UuY29tcGxleGl0eSgpOjApfSksMCl9fSxTLkNvbW1vbk1ldGhvZHM9e19zZXRPcHRpb25zOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0KXRoaXMuc2V0KGUsdFtlXSl9LF9pbml0R3JhZGllbnQ6ZnVuY3Rpb24odCxlKXshdHx8IXQuY29sb3JTdG9wc3x8dCBpbnN0YW5jZW9mIFMuR3JhZGllbnR8fHRoaXMuc2V0KGUsbmV3IFMuR3JhZGllbnQodCkpfSxfaW5pdFBhdHRlcm46ZnVuY3Rpb24odCxlLGkpeyF0fHwhdC5zb3VyY2V8fHQgaW5zdGFuY2VvZiBTLlBhdHRlcm4/aSYmaSgpOnRoaXMuc2V0KGUsbmV3IFMuUGF0dGVybih0LGkpKX0sX3NldE9iamVjdDpmdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdCl0aGlzLl9zZXQoZSx0W2VdKX0sc2V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIHQ/dGhpcy5fc2V0T2JqZWN0KHQpOnRoaXMuX3NldCh0LGUpLHRoaXN9LF9zZXQ6ZnVuY3Rpb24odCxlKXt0aGlzW3RdPWV9LHRvZ2dsZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldCh0KTtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGUmJnRoaXMuc2V0KHQsIWUpLHRoaXN9LGdldDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpc1t0XX19LHI9ZSxuPU1hdGguc3FydCxzPU1hdGguYXRhbjIsbz1NYXRoLnBvdyxhPU1hdGguUEkvMTgwLGg9TWF0aC5QSS8yLFMudXRpbD17Y29zOmZ1bmN0aW9uKHQpe2lmKDA9PT10KXJldHVybiAxO3N3aXRjaCh0PDAmJih0PS10KSx0L2gpe2Nhc2UgMTpjYXNlIDM6cmV0dXJuIDA7Y2FzZSAyOnJldHVybi0xfXJldHVybiBNYXRoLmNvcyh0KX0sc2luOmZ1bmN0aW9uKHQpe2lmKDA9PT10KXJldHVybiAwO3ZhciBlPTE7c3dpdGNoKHQ8MCYmKGU9LTEpLHQvaCl7Y2FzZSAxOnJldHVybiBlO2Nhc2UgMjpyZXR1cm4gMDtjYXNlIDM6cmV0dXJuLWV9cmV0dXJuIE1hdGguc2luKHQpfSxyZW1vdmVGcm9tQXJyYXk6ZnVuY3Rpb24odCxlKXt2YXIgaT10LmluZGV4T2YoZSk7cmV0dXJuLTEhPT1pJiZ0LnNwbGljZShpLDEpLHR9LGdldFJhbmRvbUludDpmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqKGUtdCsxKSkrdH0sZGVncmVlc1RvUmFkaWFuczpmdW5jdGlvbih0KXtyZXR1cm4gdCphfSxyYWRpYW5zVG9EZWdyZWVzOmZ1bmN0aW9uKHQpe3JldHVybiB0L2F9LHJvdGF0ZVBvaW50OmZ1bmN0aW9uKHQsZSxpKXt2YXIgcj1uZXcgUy5Qb2ludCh0LngtZS54LHQueS1lLnkpLG49Uy51dGlsLnJvdGF0ZVZlY3RvcihyLGkpO3JldHVybiBuZXcgUy5Qb2ludChuLngsbi55KS5hZGRFcXVhbHMoZSl9LHJvdGF0ZVZlY3RvcjpmdW5jdGlvbih0LGUpe3ZhciBpPVMudXRpbC5zaW4oZSkscj1TLnV0aWwuY29zKGUpO3JldHVybnt4OnQueCpyLXQueSppLHk6dC54KmkrdC55KnJ9fSxjcmVhdGVWZWN0b3I6ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IFMuUG9pbnQoZS54LXQueCxlLnktdC55KX0sY2FsY0FuZ2xlQmV0d2VlblZlY3RvcnM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5hY29zKCh0LngqZS54K3QueSplLnkpLyhNYXRoLmh5cG90KHQueCx0LnkpKk1hdGguaHlwb3QoZS54LGUueSkpKX0sZ2V0SGF0VmVjdG9yOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUy5Qb2ludCh0LngsdC55KS5tdWx0aXBseSgxL01hdGguaHlwb3QodC54LHQueSkpfSxnZXRCaXNlY3RvcjpmdW5jdGlvbih0LGUsaSl7dmFyIHI9Uy51dGlsLmNyZWF0ZVZlY3Rvcih0LGUpLG49Uy51dGlsLmNyZWF0ZVZlY3Rvcih0LGkpLHM9Uy51dGlsLmNhbGNBbmdsZUJldHdlZW5WZWN0b3JzKHIsbiksbz1zKigwPT09Uy51dGlsLmNhbGNBbmdsZUJldHdlZW5WZWN0b3JzKFMudXRpbC5yb3RhdGVWZWN0b3IocixzKSxuKT8xOi0xKS8yO3JldHVybnt2ZWN0b3I6Uy51dGlsLmdldEhhdFZlY3RvcihTLnV0aWwucm90YXRlVmVjdG9yKHIsbykpLGFuZ2xlOnN9fSxwcm9qZWN0U3Ryb2tlT25Qb2ludHM6ZnVuY3Rpb24odCxlLGkpe3ZhciByPVtdLG49ZS5zdHJva2VXaWR0aC8yLHM9ZS5zdHJva2VVbmlmb3JtP25ldyBTLlBvaW50KDEvZS5zY2FsZVgsMS9lLnNjYWxlWSk6bmV3IFMuUG9pbnQoMSwxKSxvPWZ1bmN0aW9uKHQpe3ZhciBlPW4vTWF0aC5oeXBvdCh0LngsdC55KTtyZXR1cm4gbmV3IFMuUG9pbnQodC54KmUqcy54LHQueSplKnMueSl9O3JldHVybiB0Lmxlbmd0aDw9MXx8dC5mb3JFYWNoKChmdW5jdGlvbihhLGgpe3ZhciBsLGMsdT1uZXcgUy5Qb2ludChhLngsYS55KTswPT09aD8oYz10W2grMV0sbD1pP28oUy51dGlsLmNyZWF0ZVZlY3RvcihjLHUpKS5hZGRFcXVhbHModSk6dFt0Lmxlbmd0aC0xXSk6aD09PXQubGVuZ3RoLTE/KGw9dFtoLTFdLGM9aT9vKFMudXRpbC5jcmVhdGVWZWN0b3IobCx1KSkuYWRkRXF1YWxzKHUpOnRbMF0pOihsPXRbaC0xXSxjPXRbaCsxXSk7dmFyIGQsZixnPVMudXRpbC5nZXRCaXNlY3Rvcih1LGwsYyksbT1nLnZlY3RvcixwPWcuYW5nbGU7aWYoXCJtaXRlclwiPT09ZS5zdHJva2VMaW5lSm9pbiYmKGQ9LW4vTWF0aC5zaW4ocC8yKSxmPW5ldyBTLlBvaW50KG0ueCpkKnMueCxtLnkqZCpzLnkpLE1hdGguaHlwb3QoZi54LGYueSkvbjw9ZS5zdHJva2VNaXRlckxpbWl0KSlyZXR1cm4gci5wdXNoKHUuYWRkKGYpKSx2b2lkIHIucHVzaCh1LnN1YnRyYWN0KGYpKTtkPS1uKk1hdGguU1FSVDIsZj1uZXcgUy5Qb2ludChtLngqZCpzLngsbS55KmQqcy55KSxyLnB1c2godS5hZGQoZikpLHIucHVzaCh1LnN1YnRyYWN0KGYpKX0pKSxyfSx0cmFuc2Zvcm1Qb2ludDpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIGk/bmV3IFMuUG9pbnQoZVswXSp0LngrZVsyXSp0LnksZVsxXSp0LngrZVszXSp0LnkpOm5ldyBTLlBvaW50KGVbMF0qdC54K2VbMl0qdC55K2VbNF0sZVsxXSp0LngrZVszXSp0LnkrZVs1XSl9LG1ha2VCb3VuZGluZ0JveEZyb21Qb2ludHM6ZnVuY3Rpb24odCxlKXtpZihlKWZvcih2YXIgaT0wO2k8dC5sZW5ndGg7aSsrKXRbaV09Uy51dGlsLnRyYW5zZm9ybVBvaW50KHRbaV0sZSk7dmFyIHI9W3RbMF0ueCx0WzFdLngsdFsyXS54LHRbM10ueF0sbj1TLnV0aWwuYXJyYXkubWluKHIpLHM9Uy51dGlsLmFycmF5Lm1heChyKS1uLG89W3RbMF0ueSx0WzFdLnksdFsyXS55LHRbM10ueV0sYT1TLnV0aWwuYXJyYXkubWluKG8pO3JldHVybntsZWZ0Om4sdG9wOmEsd2lkdGg6cyxoZWlnaHQ6Uy51dGlsLmFycmF5Lm1heChvKS1hfX0saW52ZXJ0VHJhbnNmb3JtOmZ1bmN0aW9uKHQpe3ZhciBlPTEvKHRbMF0qdFszXS10WzFdKnRbMl0pLGk9W2UqdFszXSwtZSp0WzFdLC1lKnRbMl0sZSp0WzBdXSxyPVMudXRpbC50cmFuc2Zvcm1Qb2ludCh7eDp0WzRdLHk6dFs1XX0saSwhMCk7cmV0dXJuIGlbNF09LXIueCxpWzVdPS1yLnksaX0sdG9GaXhlZDpmdW5jdGlvbih0LGUpe3JldHVybiBwYXJzZUZsb2F0KE51bWJlcih0KS50b0ZpeGVkKGUpKX0scGFyc2VVbml0OmZ1bmN0aW9uKHQsZSl7dmFyIGk9L1xcRHswLDJ9JC8uZXhlYyh0KSxyPXBhcnNlRmxvYXQodCk7c3dpdGNoKGV8fChlPVMuVGV4dC5ERUZBVUxUX1NWR19GT05UX1NJWkUpLGlbMF0pe2Nhc2VcIm1tXCI6cmV0dXJuIHIqUy5EUEkvMjUuNDtjYXNlXCJjbVwiOnJldHVybiByKlMuRFBJLzIuNTQ7Y2FzZVwiaW5cIjpyZXR1cm4gcipTLkRQSTtjYXNlXCJwdFwiOnJldHVybiByKlMuRFBJLzcyO2Nhc2VcInBjXCI6cmV0dXJuIHIqUy5EUEkvNzIqMTI7Y2FzZVwiZW1cIjpyZXR1cm4gciplO2RlZmF1bHQ6cmV0dXJuIHJ9fSxmYWxzZUZ1bmN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuITF9LGdldEtsYXNzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9Uy51dGlsLnN0cmluZy5jYW1lbGl6ZSh0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSkpLFMudXRpbC5yZXNvbHZlTmFtZXNwYWNlKGUpW3RdfSxnZXRTdmdBdHRyaWJ1dGVzOmZ1bmN0aW9uKHQpe3ZhciBlPVtcImluc3RhbnRpYXRlZF9ieV91c2VcIixcInN0eWxlXCIsXCJpZFwiLFwiY2xhc3NcIl07c3dpdGNoKHQpe2Nhc2VcImxpbmVhckdyYWRpZW50XCI6ZT1lLmNvbmNhdChbXCJ4MVwiLFwieTFcIixcIngyXCIsXCJ5MlwiLFwiZ3JhZGllbnRVbml0c1wiLFwiZ3JhZGllbnRUcmFuc2Zvcm1cIl0pO2JyZWFrO2Nhc2VcInJhZGlhbEdyYWRpZW50XCI6ZT1lLmNvbmNhdChbXCJncmFkaWVudFVuaXRzXCIsXCJncmFkaWVudFRyYW5zZm9ybVwiLFwiY3hcIixcImN5XCIsXCJyXCIsXCJmeFwiLFwiZnlcIixcImZyXCJdKTticmVhaztjYXNlXCJzdG9wXCI6ZT1lLmNvbmNhdChbXCJvZmZzZXRcIixcInN0b3AtY29sb3JcIixcInN0b3Atb3BhY2l0eVwiXSl9cmV0dXJuIGV9LHJlc29sdmVOYW1lc3BhY2U6ZnVuY3Rpb24odCl7aWYoIXQpcmV0dXJuIFM7dmFyIGUsaT10LnNwbGl0KFwiLlwiKSxuPWkubGVuZ3RoLHM9cnx8Uy53aW5kb3c7Zm9yKGU9MDtlPG47KytlKXM9c1tpW2VdXTtyZXR1cm4gc30sbG9hZEltYWdlOmZ1bmN0aW9uKHQsZSxpLHIpe2lmKHQpe3ZhciBuPVMudXRpbC5jcmVhdGVJbWFnZSgpLHM9ZnVuY3Rpb24oKXtlJiZlLmNhbGwoaSxuLCExKSxuPW4ub25sb2FkPW4ub25lcnJvcj1udWxsfTtuLm9ubG9hZD1zLG4ub25lcnJvcj1mdW5jdGlvbigpe1MubG9nKFwiRXJyb3IgbG9hZGluZyBcIituLnNyYyksZSYmZS5jYWxsKGksbnVsbCwhMCksbj1uLm9ubG9hZD1uLm9uZXJyb3I9bnVsbH0sMCE9PXQuaW5kZXhPZihcImRhdGFcIikmJm51bGwhPXImJihuLmNyb3NzT3JpZ2luPXIpLFwiZGF0YTppbWFnZS9zdmdcIj09PXQuc3Vic3RyaW5nKDAsMTQpJiYobi5vbmxvYWQ9bnVsbCxTLnV0aWwubG9hZEltYWdlSW5Eb20obixzKSksbi5zcmM9dH1lbHNlIGUmJmUuY2FsbChpLHQpfSxsb2FkSW1hZ2VJbkRvbTpmdW5jdGlvbih0LGUpe3ZhciBpPVMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpLnN0eWxlLndpZHRoPWkuc3R5bGUuaGVpZ2h0PVwiMXB4XCIsaS5zdHlsZS5sZWZ0PWkuc3R5bGUudG9wPVwiLTEwMCVcIixpLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixpLmFwcGVuZENoaWxkKHQpLFMuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJvZHlcIikuYXBwZW5kQ2hpbGQoaSksdC5vbmxvYWQ9ZnVuY3Rpb24oKXtlKCksaS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGkpLGk9bnVsbH19LGVubGl2ZW5PYmplY3RzOmZ1bmN0aW9uKHQsZSxpLHIpe3ZhciBuPVtdLHM9MCxvPSh0PXR8fFtdKS5sZW5ndGg7ZnVuY3Rpb24gYSgpeysrcz09PW8mJmUmJmUobi5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0fSkpKX1vP3QuZm9yRWFjaCgoZnVuY3Rpb24odCxlKXt0JiZ0LnR5cGU/Uy51dGlsLmdldEtsYXNzKHQudHlwZSxpKS5mcm9tT2JqZWN0KHQsKGZ1bmN0aW9uKGkscyl7c3x8KG5bZV09aSksciYmcih0LGkscyksYSgpfSkpOmEoKX0pKTplJiZlKG4pfSxlbmxpdmVuT2JqZWN0RW5saXZhYmxlczpmdW5jdGlvbih0LGUsaSl7dmFyIHI9Uy5PYmplY3QuRU5MSVZFTl9QUk9QUy5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiEhdFtlXX0pKTtTLnV0aWwuZW5saXZlbk9iamVjdHMoci5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiB0W2VdfSkpLChmdW5jdGlvbih0KXt2YXIgbj17fTtyLmZvckVhY2goKGZ1bmN0aW9uKGkscil7bltpXT10W3JdLGUmJihlW2ldPXRbcl0pfSkpLGkmJmkobil9KSl9LGVubGl2ZW5QYXR0ZXJuczpmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkoKXsrK249PT1zJiZlJiZlKHIpfXZhciByPVtdLG49MCxzPSh0PXR8fFtdKS5sZW5ndGg7cz90LmZvckVhY2goKGZ1bmN0aW9uKHQsZSl7dCYmdC5zb3VyY2U/bmV3IFMuUGF0dGVybih0LChmdW5jdGlvbih0KXtyW2VdPXQsaSgpfSkpOihyW2VdPXQsaSgpKX0pKTplJiZlKHIpfSxncm91cFNWR0VsZW1lbnRzOmZ1bmN0aW9uKHQsZSxpKXt2YXIgcjtyZXR1cm4gdCYmMT09PXQubGVuZ3RoP3RbMF06KGUmJihlLndpZHRoJiZlLmhlaWdodD9lLmNlbnRlclBvaW50PXt4OmUud2lkdGgvMix5OmUuaGVpZ2h0LzJ9OihkZWxldGUgZS53aWR0aCxkZWxldGUgZS5oZWlnaHQpKSxyPW5ldyBTLkdyb3VwKHQsZSksdm9pZCAwIT09aSYmKHIuc291cmNlUGF0aD1pKSxyKX0scG9wdWxhdGVXaXRoUHJvcGVydGllczpmdW5jdGlvbih0LGUsaSl7aWYoaSYmQXJyYXkuaXNBcnJheShpKSlmb3IodmFyIHI9MCxuPWkubGVuZ3RoO3I8bjtyKyspaVtyXWluIHQmJihlW2lbcl1dPXRbaVtyXV0pfSxjcmVhdGVDYW52YXNFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIFMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKX0sY29weUNhbnZhc0VsZW1lbnQ6ZnVuY3Rpb24odCl7dmFyIGU9Uy51dGlsLmNyZWF0ZUNhbnZhc0VsZW1lbnQoKTtyZXR1cm4gZS53aWR0aD10LndpZHRoLGUuaGVpZ2h0PXQuaGVpZ2h0LGUuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZSh0LDAsMCksZX0sdG9EYXRhVVJMOmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdC50b0RhdGFVUkwoXCJpbWFnZS9cIitlLGkpfSxjcmVhdGVJbWFnZTpmdW5jdGlvbigpe3JldHVybiBTLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIil9LG11bHRpcGx5VHJhbnNmb3JtTWF0cmljZXM6ZnVuY3Rpb24odCxlLGkpe3JldHVyblt0WzBdKmVbMF0rdFsyXSplWzFdLHRbMV0qZVswXSt0WzNdKmVbMV0sdFswXSplWzJdK3RbMl0qZVszXSx0WzFdKmVbMl0rdFszXSplWzNdLGk/MDp0WzBdKmVbNF0rdFsyXSplWzVdK3RbNF0saT8wOnRbMV0qZVs0XSt0WzNdKmVbNV0rdFs1XV19LHFyRGVjb21wb3NlOmZ1bmN0aW9uKHQpe3ZhciBlPXModFsxXSx0WzBdKSxpPW8odFswXSwyKStvKHRbMV0sMikscj1uKGkpLGg9KHRbMF0qdFszXS10WzJdKnRbMV0pL3IsbD1zKHRbMF0qdFsyXSt0WzFdKnRbM10saSk7cmV0dXJue2FuZ2xlOmUvYSxzY2FsZVg6cixzY2FsZVk6aCxza2V3WDpsL2Esc2tld1k6MCx0cmFuc2xhdGVYOnRbNF0sdHJhbnNsYXRlWTp0WzVdfX0sY2FsY1JvdGF0ZU1hdHJpeDpmdW5jdGlvbih0KXtpZighdC5hbmdsZSlyZXR1cm4gUy5pTWF0cml4LmNvbmNhdCgpO3ZhciBlPVMudXRpbC5kZWdyZWVzVG9SYWRpYW5zKHQuYW5nbGUpLGk9Uy51dGlsLmNvcyhlKSxyPVMudXRpbC5zaW4oZSk7cmV0dXJuW2ksciwtcixpLDAsMF19LGNhbGNEaW1lbnNpb25zTWF0cml4OmZ1bmN0aW9uKHQpe3ZhciBlPXZvaWQgMD09PXQuc2NhbGVYPzE6dC5zY2FsZVgsaT12b2lkIDA9PT10LnNjYWxlWT8xOnQuc2NhbGVZLHI9W3QuZmxpcFg/LWU6ZSwwLDAsdC5mbGlwWT8taTppLDAsMF0sbj1TLnV0aWwubXVsdGlwbHlUcmFuc2Zvcm1NYXRyaWNlcyxzPVMudXRpbC5kZWdyZWVzVG9SYWRpYW5zO3JldHVybiB0LnNrZXdYJiYocj1uKHIsWzEsMCxNYXRoLnRhbihzKHQuc2tld1gpKSwxXSwhMCkpLHQuc2tld1kmJihyPW4ocixbMSxNYXRoLnRhbihzKHQuc2tld1kpKSwwLDFdLCEwKSkscn0sY29tcG9zZU1hdHJpeDpmdW5jdGlvbih0KXt2YXIgZT1bMSwwLDAsMSx0LnRyYW5zbGF0ZVh8fDAsdC50cmFuc2xhdGVZfHwwXSxpPVMudXRpbC5tdWx0aXBseVRyYW5zZm9ybU1hdHJpY2VzO3JldHVybiB0LmFuZ2xlJiYoZT1pKGUsUy51dGlsLmNhbGNSb3RhdGVNYXRyaXgodCkpKSwoMSE9PXQuc2NhbGVYfHwxIT09dC5zY2FsZVl8fHQuc2tld1h8fHQuc2tld1l8fHQuZmxpcFh8fHQuZmxpcFkpJiYoZT1pKGUsUy51dGlsLmNhbGNEaW1lbnNpb25zTWF0cml4KHQpKSksZX0scmVzZXRPYmplY3RUcmFuc2Zvcm06ZnVuY3Rpb24odCl7dC5zY2FsZVg9MSx0LnNjYWxlWT0xLHQuc2tld1g9MCx0LnNrZXdZPTAsdC5mbGlwWD0hMSx0LmZsaXBZPSExLHQucm90YXRlKDApfSxzYXZlT2JqZWN0VHJhbnNmb3JtOmZ1bmN0aW9uKHQpe3JldHVybntzY2FsZVg6dC5zY2FsZVgsc2NhbGVZOnQuc2NhbGVZLHNrZXdYOnQuc2tld1gsc2tld1k6dC5za2V3WSxhbmdsZTp0LmFuZ2xlLGxlZnQ6dC5sZWZ0LGZsaXBYOnQuZmxpcFgsZmxpcFk6dC5mbGlwWSx0b3A6dC50b3B9fSxpc1RyYW5zcGFyZW50OmZ1bmN0aW9uKHQsZSxpLHIpe3I+MCYmKGU+cj9lLT1yOmU9MCxpPnI/aS09cjppPTApO3ZhciBuLHM9ITAsbz10LmdldEltYWdlRGF0YShlLGksMipyfHwxLDIqcnx8MSksYT1vLmRhdGEubGVuZ3RoO2ZvcihuPTM7bjxhJiYwIT0ocz1vLmRhdGFbbl08PTApO24rPTQpO3JldHVybiBvPW51bGwsc30scGFyc2VQcmVzZXJ2ZUFzcGVjdFJhdGlvQXR0cmlidXRlOmZ1bmN0aW9uKHQpe3ZhciBlLGk9XCJtZWV0XCIscj10LnNwbGl0KFwiIFwiKTtyZXR1cm4gciYmci5sZW5ndGgmJihcIm1lZXRcIiE9PShpPXIucG9wKCkpJiZcInNsaWNlXCIhPT1pPyhlPWksaT1cIm1lZXRcIik6ci5sZW5ndGgmJihlPXIucG9wKCkpKSx7bWVldE9yU2xpY2U6aSxhbGlnblg6XCJub25lXCIhPT1lP2Uuc2xpY2UoMSw0KTpcIm5vbmVcIixhbGlnblk6XCJub25lXCIhPT1lP2Uuc2xpY2UoNSw4KTpcIm5vbmVcIn19LGNsZWFyRmFicmljRm9udENhY2hlOmZ1bmN0aW9uKHQpeyh0PSh0fHxcIlwiKS50b0xvd2VyQ2FzZSgpKT9TLmNoYXJXaWR0aHNDYWNoZVt0XSYmZGVsZXRlIFMuY2hhcldpZHRoc0NhY2hlW3RdOlMuY2hhcldpZHRoc0NhY2hlPXt9fSxsaW1pdERpbXNCeUFyZWE6ZnVuY3Rpb24odCxlKXt2YXIgaT1NYXRoLnNxcnQoZSp0KSxyPU1hdGguZmxvb3IoZS9pKTtyZXR1cm57eDpNYXRoLmZsb29yKGkpLHk6cn19LGNhcFZhbHVlOmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gTWF0aC5tYXgodCxNYXRoLm1pbihlLGkpKX0sZmluZFNjYWxlVG9GaXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5taW4oZS53aWR0aC90LndpZHRoLGUuaGVpZ2h0L3QuaGVpZ2h0KX0sZmluZFNjYWxlVG9Db3ZlcjpmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLm1heChlLndpZHRoL3Qud2lkdGgsZS5oZWlnaHQvdC5oZWlnaHQpfSxtYXRyaXhUb1NWRzpmdW5jdGlvbih0KXtyZXR1cm5cIm1hdHJpeChcIit0Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIFMudXRpbC50b0ZpeGVkKHQsUy5PYmplY3QuTlVNX0ZSQUNUSU9OX0RJR0lUUyl9KSkuam9pbihcIiBcIikrXCIpXCJ9LHJlbW92ZVRyYW5zZm9ybUZyb21PYmplY3Q6ZnVuY3Rpb24odCxlKXt2YXIgaT1TLnV0aWwuaW52ZXJ0VHJhbnNmb3JtKGUpLHI9Uy51dGlsLm11bHRpcGx5VHJhbnNmb3JtTWF0cmljZXMoaSx0LmNhbGNPd25NYXRyaXgoKSk7Uy51dGlsLmFwcGx5VHJhbnNmb3JtVG9PYmplY3QodCxyKX0sYWRkVHJhbnNmb3JtVG9PYmplY3Q6ZnVuY3Rpb24odCxlKXtTLnV0aWwuYXBwbHlUcmFuc2Zvcm1Ub09iamVjdCh0LFMudXRpbC5tdWx0aXBseVRyYW5zZm9ybU1hdHJpY2VzKGUsdC5jYWxjT3duTWF0cml4KCkpKX0sYXBwbHlUcmFuc2Zvcm1Ub09iamVjdDpmdW5jdGlvbih0LGUpe3ZhciBpPVMudXRpbC5xckRlY29tcG9zZShlKSxyPW5ldyBTLlBvaW50KGkudHJhbnNsYXRlWCxpLnRyYW5zbGF0ZVkpO3QuZmxpcFg9ITEsdC5mbGlwWT0hMSx0LnNldChcInNjYWxlWFwiLGkuc2NhbGVYKSx0LnNldChcInNjYWxlWVwiLGkuc2NhbGVZKSx0LnNrZXdYPWkuc2tld1gsdC5za2V3WT1pLnNrZXdZLHQuYW5nbGU9aS5hbmdsZSx0LnNldFBvc2l0aW9uQnlPcmlnaW4ocixcImNlbnRlclwiLFwiY2VudGVyXCIpfSxzaXplQWZ0ZXJUcmFuc2Zvcm06ZnVuY3Rpb24odCxlLGkpe3ZhciByPXQvMixuPWUvMixzPVt7eDotcix5Oi1ufSx7eDpyLHk6LW59LHt4Oi1yLHk6bn0se3g6cix5Om59XSxvPVMudXRpbC5jYWxjRGltZW5zaW9uc01hdHJpeChpKSxhPVMudXRpbC5tYWtlQm91bmRpbmdCb3hGcm9tUG9pbnRzKHMsbyk7cmV0dXJue3g6YS53aWR0aCx5OmEuaGVpZ2h0fX0sbWVyZ2VDbGlwUGF0aHM6ZnVuY3Rpb24odCxlKXt2YXIgaT10LHI9ZTtpLmludmVydGVkJiYhci5pbnZlcnRlZCYmKGk9ZSxyPXQpLFMudXRpbC5hcHBseVRyYW5zZm9ybVRvT2JqZWN0KHIsUy51dGlsLm11bHRpcGx5VHJhbnNmb3JtTWF0cmljZXMoUy51dGlsLmludmVydFRyYW5zZm9ybShpLmNhbGNUcmFuc2Zvcm1NYXRyaXgoKSksci5jYWxjVHJhbnNmb3JtTWF0cml4KCkpKTt2YXIgbj1pLmludmVydGVkJiZyLmludmVydGVkO3JldHVybiBuJiYoaS5pbnZlcnRlZD1yLmludmVydGVkPSExKSxuZXcgUy5Hcm91cChbaV0se2NsaXBQYXRoOnIsaW52ZXJ0ZWQ6bn0pfX0sZnVuY3Rpb24oKXt2YXIgdD1BcnJheS5wcm90b3R5cGUuam9pbixlPXttOjIsbDoyLGg6MSx2OjEsYzo2LHM6NCxxOjQsdDoyLGE6N30saT17bTpcImxcIixNOlwiTFwifTtmdW5jdGlvbiByKHQsZSxpLHIsbixzLG8sYSxoLGwsYyl7dmFyIHU9Uy51dGlsLmNvcyh0KSxkPVMudXRpbC5zaW4odCksZj1TLnV0aWwuY29zKGUpLGc9Uy51dGlsLnNpbihlKSxtPWkqbipmLXIqcypnK28scD1yKm4qZitpKnMqZythO3JldHVybltcIkNcIixsK2gqKC1pKm4qZC1yKnMqdSksYytoKigtcipuKmQraSpzKnUpLG0raCooaSpuKmcrcipzKmYpLHAraCoocipuKmctaSpzKmYpLG0scF19ZnVuY3Rpb24gbih0LGUsaSxyKXt2YXIgbj1NYXRoLmF0YW4yKGUsdCkscz1NYXRoLmF0YW4yKHIsaSk7cmV0dXJuIHM+PW4/cy1uOjIqTWF0aC5QSS0obi1zKX1mdW5jdGlvbiBzKHQsZSxpKXtmb3IodmFyIHM9aVsxXSxvPWlbMl0sYT1pWzNdLGg9aVs0XSxsPWlbNV0sYz1mdW5jdGlvbih0LGUsaSxzLG8sYSxoKXt2YXIgbD1NYXRoLlBJLGM9aCpsLzE4MCx1PVMudXRpbC5zaW4oYyksZD1TLnV0aWwuY29zKGMpLGY9MCxnPTAsbT0tZCp0Ki41LXUqZSouNSxwPS1kKmUqLjUrdSp0Ki41LHY9KGk9TWF0aC5hYnMoaSkpKmksXz0ocz1NYXRoLmFicyhzKSkqcyx5PXAqcCx3PW0qbSxiPXYqXy12KnktXyp3LHg9MDtpZihiPDApe3ZhciBDPU1hdGguc3FydCgxLWIvKHYqXykpO2kqPUMscyo9Q31lbHNlIHg9KG89PT1hPy0xOjEpKk1hdGguc3FydChiLyh2KnkrXyp3KSk7dmFyIFQ9eCppKnAvcyxFPS14KnMqbS9pLE89ZCpULXUqRSsuNSp0LEE9dSpUK2QqRSsuNSplLEk9bigxLDAsKG0tVCkvaSwocC1FKS9zKSxMPW4oKG0tVCkvaSwocC1FKS9zLCgtbS1UKS9pLCgtcC1FKS9zKTswPT09YSYmTD4wP0wtPTIqbDoxPT09YSYmTDwwJiYoTCs9MipsKTtmb3IodmFyIEQ9TWF0aC5jZWlsKE1hdGguYWJzKEwvbCoyKSksTT1bXSxGPUwvRCxQPTgvMypNYXRoLnNpbihGLzQpKk1hdGguc2luKEYvNCkvTWF0aC5zaW4oRi8yKSxrPUkrRixSPTA7UjxEO1IrKylNW1JdPXIoSSxrLGQsdSxpLHMsTyxBLFAsZixnKSxmPU1bUl1bNV0sZz1NW1JdWzZdLEk9ayxrKz1GO3JldHVybiBNfShpWzZdLXQsaVs3XS1lLHMsbyxoLGwsYSksdT0wLGQ9Yy5sZW5ndGg7dTxkO3UrKyljW3VdWzFdKz10LGNbdV1bMl0rPWUsY1t1XVszXSs9dCxjW3VdWzRdKz1lLGNbdV1bNV0rPXQsY1t1XVs2XSs9ZTtyZXR1cm4gY31mdW5jdGlvbiBvKHQsZSxpLHIpe3JldHVybiBNYXRoLnNxcnQoKGktdCkqKGktdCkrKHItZSkqKHItZSkpfWZ1bmN0aW9uIGEodCxlLGkscixuLHMsbyxhKXtyZXR1cm4gZnVuY3Rpb24oaCl7dmFyIGwsYz0obD1oKSpsKmwsdT1mdW5jdGlvbih0KXtyZXR1cm4gMyp0KnQqKDEtdCl9KGgpLGQ9ZnVuY3Rpb24odCl7cmV0dXJuIDMqdCooMS10KSooMS10KX0oaCksZj1mdW5jdGlvbih0KXtyZXR1cm4oMS10KSooMS10KSooMS10KX0oaCk7cmV0dXJue3g6bypjK24qdStpKmQrdCpmLHk6YSpjK3MqdStyKmQrZSpmfX19ZnVuY3Rpb24gaCh0LGUsaSxyLG4scyxvLGEpe3JldHVybiBmdW5jdGlvbihoKXt2YXIgbD0xLWgsYz0zKmwqbCooaS10KSs2KmwqaCoobi1pKSszKmgqaCooby1uKSx1PTMqbCpsKihyLWUpKzYqbCpoKihzLXIpKzMqaCpoKihhLXMpO3JldHVybiBNYXRoLmF0YW4yKHUsYyl9fWZ1bmN0aW9uIGwodCxlLGkscixuLHMpe3JldHVybiBmdW5jdGlvbihvKXt2YXIgYSxoPShhPW8pKmEsbD1mdW5jdGlvbih0KXtyZXR1cm4gMip0KigxLXQpfShvKSxjPWZ1bmN0aW9uKHQpe3JldHVybigxLXQpKigxLXQpfShvKTtyZXR1cm57eDpuKmgraSpsK3QqYyx5OnMqaCtyKmwrZSpjfX19ZnVuY3Rpb24gYyh0LGUsaSxyLG4scyl7cmV0dXJuIGZ1bmN0aW9uKG8pe3ZhciBhPTEtbyxoPTIqYSooaS10KSsyKm8qKG4taSksbD0yKmEqKHItZSkrMipvKihzLXIpO3JldHVybiBNYXRoLmF0YW4yKGwsaCl9fWZ1bmN0aW9uIHUodCxlLGkpe3ZhciByLG4scz17eDplLHk6aX0sYT0wO2ZvcihuPTE7bjw9MTAwO24rPTEpcj10KG4vMTAwKSxhKz1vKHMueCxzLnksci54LHIueSkscz1yO3JldHVybiBhfWZ1bmN0aW9uIGQodCl7Zm9yKHZhciBlLGkscixuLHM9MCxkPXQubGVuZ3RoLGY9MCxnPTAsbT0wLHA9MCx2PVtdLF89MDtfPGQ7XysrKXtzd2l0Y2gocj17eDpmLHk6Zyxjb21tYW5kOihlPXRbX10pWzBdfSxlWzBdKXtjYXNlXCJNXCI6ci5sZW5ndGg9MCxtPWY9ZVsxXSxwPWc9ZVsyXTticmVhaztjYXNlXCJMXCI6ci5sZW5ndGg9byhmLGcsZVsxXSxlWzJdKSxmPWVbMV0sZz1lWzJdO2JyZWFrO2Nhc2VcIkNcIjppPWEoZixnLGVbMV0sZVsyXSxlWzNdLGVbNF0sZVs1XSxlWzZdKSxuPWgoZixnLGVbMV0sZVsyXSxlWzNdLGVbNF0sZVs1XSxlWzZdKSxyLml0ZXJhdG9yPWksci5hbmdsZUZpbmRlcj1uLHIubGVuZ3RoPXUoaSxmLGcpLGY9ZVs1XSxnPWVbNl07YnJlYWs7Y2FzZVwiUVwiOmk9bChmLGcsZVsxXSxlWzJdLGVbM10sZVs0XSksbj1jKGYsZyxlWzFdLGVbMl0sZVszXSxlWzRdKSxyLml0ZXJhdG9yPWksci5hbmdsZUZpbmRlcj1uLHIubGVuZ3RoPXUoaSxmLGcpLGY9ZVszXSxnPWVbNF07YnJlYWs7Y2FzZVwiWlwiOmNhc2VcInpcIjpyLmRlc3RYPW0sci5kZXN0WT1wLHIubGVuZ3RoPW8oZixnLG0scCksZj1tLGc9cH1zKz1yLmxlbmd0aCx2LnB1c2gocil9cmV0dXJuIHYucHVzaCh7bGVuZ3RoOnMseDpmLHk6Z30pLHZ9Uy51dGlsLmpvaW5QYXRoPWZ1bmN0aW9uKHQpe3JldHVybiB0Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQuam9pbihcIiBcIil9KSkuam9pbihcIiBcIil9LFMudXRpbC5wYXJzZVBhdGg9ZnVuY3Rpb24odCl7dmFyIHIsbixzLG8sYSxoPVtdLGw9W10sYz1TLnJlUGF0aENvbW1hbmQsdT1cIlstK10/KD86XFxcXGQqXFxcXC5cXFxcZCt8XFxcXGQrXFxcXC4/KSg/OltlRV1bLStdP1xcXFxkKyk/XFxcXHMqXCIsZD1cIihcIit1K1wiKVwiK1MuY29tbWFXc3AsZj1cIihbMDFdKVwiK1MuY29tbWFXc3ArXCI/XCIsZz1uZXcgUmVnRXhwKGQrXCI/XCIrZCtcIj9cIitkK2YrZitkK1wiPyhcIit1K1wiKVwiLFwiZ1wiKTtpZighdHx8IXQubWF0Y2gpcmV0dXJuIGg7Zm9yKHZhciBtLHA9MCx2PShhPXQubWF0Y2goL1ttemxodmNzcXRhXVtebXpsaHZjc3F0YV0qL2dpKSkubGVuZ3RoO3A8djtwKyspe289KHI9YVtwXSkuc2xpY2UoMSkudHJpbSgpLGwubGVuZ3RoPTA7dmFyIF89ci5jaGFyQXQoMCk7aWYobT1bX10sXCJhXCI9PT1fLnRvTG93ZXJDYXNlKCkpZm9yKHZhciB5O3k9Zy5leGVjKG8pOylmb3IodmFyIHc9MTt3PHkubGVuZ3RoO3crKylsLnB1c2goeVt3XSk7ZWxzZSBmb3IoO3M9Yy5leGVjKG8pOylsLnB1c2goc1swXSk7dz0wO2Zvcih2YXIgYj1sLmxlbmd0aDt3PGI7dysrKW49cGFyc2VGbG9hdChsW3ddKSxpc05hTihuKXx8bS5wdXNoKG4pO3ZhciB4PWVbXy50b0xvd2VyQ2FzZSgpXSxDPWlbX118fF87aWYobS5sZW5ndGgtMT54KWZvcih2YXIgVD0xLEU9bS5sZW5ndGg7VDxFO1QrPXgpaC5wdXNoKFtfXS5jb25jYXQobS5zbGljZShULFQreCkpKSxfPUM7ZWxzZSBoLnB1c2gobSl9cmV0dXJuIGh9LFMudXRpbC5tYWtlUGF0aFNpbXBsZXI9ZnVuY3Rpb24odCl7dmFyIGUsaSxyLG4sbyxhLGg9MCxsPTAsYz10Lmxlbmd0aCx1PTAsZD0wLGY9W107Zm9yKGk9MDtpPGM7KytpKXtzd2l0Y2gocj0hMSwoZT10W2ldLnNsaWNlKDApKVswXSl7Y2FzZVwibFwiOmVbMF09XCJMXCIsZVsxXSs9aCxlWzJdKz1sO2Nhc2VcIkxcIjpoPWVbMV0sbD1lWzJdO2JyZWFrO2Nhc2VcImhcIjplWzFdKz1oO2Nhc2VcIkhcIjplWzBdPVwiTFwiLGVbMl09bCxoPWVbMV07YnJlYWs7Y2FzZVwidlwiOmVbMV0rPWw7Y2FzZVwiVlwiOmVbMF09XCJMXCIsbD1lWzFdLGVbMV09aCxlWzJdPWw7YnJlYWs7Y2FzZVwibVwiOmVbMF09XCJNXCIsZVsxXSs9aCxlWzJdKz1sO2Nhc2VcIk1cIjpoPWVbMV0sbD1lWzJdLHU9ZVsxXSxkPWVbMl07YnJlYWs7Y2FzZVwiY1wiOmVbMF09XCJDXCIsZVsxXSs9aCxlWzJdKz1sLGVbM10rPWgsZVs0XSs9bCxlWzVdKz1oLGVbNl0rPWw7Y2FzZVwiQ1wiOm89ZVszXSxhPWVbNF0saD1lWzVdLGw9ZVs2XTticmVhaztjYXNlXCJzXCI6ZVswXT1cIlNcIixlWzFdKz1oLGVbMl0rPWwsZVszXSs9aCxlWzRdKz1sO2Nhc2VcIlNcIjpcIkNcIj09PW4/KG89MipoLW8sYT0yKmwtYSk6KG89aCxhPWwpLGg9ZVszXSxsPWVbNF0sZVswXT1cIkNcIixlWzVdPWVbM10sZVs2XT1lWzRdLGVbM109ZVsxXSxlWzRdPWVbMl0sZVsxXT1vLGVbMl09YSxvPWVbM10sYT1lWzRdO2JyZWFrO2Nhc2VcInFcIjplWzBdPVwiUVwiLGVbMV0rPWgsZVsyXSs9bCxlWzNdKz1oLGVbNF0rPWw7Y2FzZVwiUVwiOm89ZVsxXSxhPWVbMl0saD1lWzNdLGw9ZVs0XTticmVhaztjYXNlXCJ0XCI6ZVswXT1cIlRcIixlWzFdKz1oLGVbMl0rPWw7Y2FzZVwiVFwiOlwiUVwiPT09bj8obz0yKmgtbyxhPTIqbC1hKToobz1oLGE9bCksZVswXT1cIlFcIixoPWVbMV0sbD1lWzJdLGVbMV09byxlWzJdPWEsZVszXT1oLGVbNF09bDticmVhaztjYXNlXCJhXCI6ZVswXT1cIkFcIixlWzZdKz1oLGVbN10rPWw7Y2FzZVwiQVwiOnI9ITAsZj1mLmNvbmNhdChzKGgsbCxlKSksaD1lWzZdLGw9ZVs3XTticmVhaztjYXNlXCJ6XCI6Y2FzZVwiWlwiOmg9dSxsPWR9cnx8Zi5wdXNoKGUpLG49ZVswXX1yZXR1cm4gZn0sUy51dGlsLmdldFNtb290aFBhdGhGcm9tUG9pbnRzPWZ1bmN0aW9uKHQsZSl7dmFyIGkscj1bXSxuPW5ldyBTLlBvaW50KHRbMF0ueCx0WzBdLnkpLHM9bmV3IFMuUG9pbnQodFsxXS54LHRbMV0ueSksbz10Lmxlbmd0aCxhPTEsaD0wLGw9bz4yO2ZvcihlPWV8fDAsbCYmKGE9dFsyXS54PHMueD8tMTp0WzJdLng9PT1zLng/MDoxLGg9dFsyXS55PHMueT8tMTp0WzJdLnk9PT1zLnk/MDoxKSxyLnB1c2goW1wiTVwiLG4ueC1hKmUsbi55LWgqZV0pLGk9MTtpPG87aSsrKXtpZighbi5lcShzKSl7dmFyIGM9bi5taWRQb2ludEZyb20ocyk7ci5wdXNoKFtcIlFcIixuLngsbi55LGMueCxjLnldKX1uPXRbaV0saSsxPHQubGVuZ3RoJiYocz10W2krMV0pfXJldHVybiBsJiYoYT1uLng+dFtpLTJdLng/MTpuLng9PT10W2ktMl0ueD8wOi0xLGg9bi55PnRbaS0yXS55PzE6bi55PT09dFtpLTJdLnk/MDotMSksci5wdXNoKFtcIkxcIixuLngrYSplLG4ueStoKmVdKSxyfSxTLnV0aWwuZ2V0UGF0aFNlZ21lbnRzSW5mbz1kLFMudXRpbC5nZXRCb3VuZHNPZkN1cnZlPWZ1bmN0aW9uKGUsaSxyLG4scyxvLGEsaCl7dmFyIGw7aWYoUy5jYWNoZXNCb3VuZHNPZkN1cnZlJiYobD10LmNhbGwoYXJndW1lbnRzKSxTLmJvdW5kc09mQ3VydmVDYWNoZVtsXSkpcmV0dXJuIFMuYm91bmRzT2ZDdXJ2ZUNhY2hlW2xdO3ZhciBjLHUsZCxmLGcsbSxwLHYsXz1NYXRoLnNxcnQseT1NYXRoLm1pbix3PU1hdGgubWF4LGI9TWF0aC5hYnMseD1bXSxDPVtbXSxbXV07dT02KmUtMTIqcis2KnMsYz0tMyplKzkqci05KnMrMyphLGQ9MypyLTMqZTtmb3IodmFyIFQ9MDtUPDI7KytUKWlmKFQ+MCYmKHU9NippLTEyKm4rNipvLGM9LTMqaSs5Km4tOSpvKzMqaCxkPTMqbi0zKmkpLGIoYyk8MWUtMTIpe2lmKGIodSk8MWUtMTIpY29udGludWU7MDwoZj0tZC91KSYmZjwxJiZ4LnB1c2goZil9ZWxzZShwPXUqdS00KmQqYyk8MHx8KDA8KGc9KC11Kyh2PV8ocCkpKS8oMipjKSkmJmc8MSYmeC5wdXNoKGcpLDA8KG09KC11LXYpLygyKmMpKSYmbTwxJiZ4LnB1c2gobSkpO2Zvcih2YXIgRSxPLEEsST14Lmxlbmd0aCxMPUk7SS0tOylFPShBPTEtKGY9eFtJXSkpKkEqQSplKzMqQSpBKmYqciszKkEqZipmKnMrZipmKmYqYSxDWzBdW0ldPUUsTz1BKkEqQSppKzMqQSpBKmYqbiszKkEqZipmKm8rZipmKmYqaCxDWzFdW0ldPU87Q1swXVtMXT1lLENbMV1bTF09aSxDWzBdW0wrMV09YSxDWzFdW0wrMV09aDt2YXIgRD1be3g6eS5hcHBseShudWxsLENbMF0pLHk6eS5hcHBseShudWxsLENbMV0pfSx7eDp3LmFwcGx5KG51bGwsQ1swXSkseTp3LmFwcGx5KG51bGwsQ1sxXSl9XTtyZXR1cm4gUy5jYWNoZXNCb3VuZHNPZkN1cnZlJiYoUy5ib3VuZHNPZkN1cnZlQ2FjaGVbbF09RCksRH0sUy51dGlsLmdldFBvaW50T25QYXRoPWZ1bmN0aW9uKHQsZSxpKXtpfHwoaT1kKHQpKTtmb3IodmFyIHI9MDtlLWlbcl0ubGVuZ3RoPjAmJnI8aS5sZW5ndGgtMjspZS09aVtyXS5sZW5ndGgscisrO3ZhciBuLHM9aVtyXSxhPWUvcy5sZW5ndGgsaD1zLmNvbW1hbmQsbD10W3JdO3N3aXRjaChoKXtjYXNlXCJNXCI6cmV0dXJue3g6cy54LHk6cy55LGFuZ2xlOjB9O2Nhc2VcIlpcIjpjYXNlXCJ6XCI6cmV0dXJuKG49bmV3IFMuUG9pbnQocy54LHMueSkubGVycChuZXcgUy5Qb2ludChzLmRlc3RYLHMuZGVzdFkpLGEpKS5hbmdsZT1NYXRoLmF0YW4yKHMuZGVzdFktcy55LHMuZGVzdFgtcy54KSxuO2Nhc2VcIkxcIjpyZXR1cm4obj1uZXcgUy5Qb2ludChzLngscy55KS5sZXJwKG5ldyBTLlBvaW50KGxbMV0sbFsyXSksYSkpLmFuZ2xlPU1hdGguYXRhbjIobFsyXS1zLnksbFsxXS1zLngpLG47Y2FzZVwiQ1wiOmNhc2VcIlFcIjpyZXR1cm4gZnVuY3Rpb24odCxlKXtmb3IodmFyIGkscixuLHM9MCxhPTAsaD10Lml0ZXJhdG9yLGw9e3g6dC54LHk6dC55fSxjPS4wMSx1PXQuYW5nbGVGaW5kZXI7YTxlJiZjPjFlLTQ7KWk9aChzKSxuPXMsKHI9byhsLngsbC55LGkueCxpLnkpKSthPmU/KHMtPWMsYy89Mik6KGw9aSxzKz1jLGErPXIpO3JldHVybiBpLmFuZ2xlPXUobiksaX0ocyxlKX19LFMudXRpbC50cmFuc2Zvcm1QYXRoPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gaSYmKGU9Uy51dGlsLm11bHRpcGx5VHJhbnNmb3JtTWF0cmljZXMoZSxbMSwwLDAsMSwtaS54LC1pLnldKSksdC5tYXAoKGZ1bmN0aW9uKHQpe2Zvcih2YXIgaT10LnNsaWNlKDApLHI9e30sbj0xO248dC5sZW5ndGgtMTtuKz0yKXIueD10W25dLHIueT10W24rMV0scj1TLnV0aWwudHJhbnNmb3JtUG9pbnQocixlKSxpW25dPXIueCxpW24rMV09ci55O3JldHVybiBpfSkpfX0oKSxmdW5jdGlvbigpe3ZhciB0PUFycmF5LnByb3RvdHlwZS5zbGljZTtmdW5jdGlvbiBlKHQsZSxpKXtpZih0JiYwIT09dC5sZW5ndGgpe3ZhciByPXQubGVuZ3RoLTEsbj1lP3Rbcl1bZV06dFtyXTtpZihlKWZvcig7ci0tOylpKHRbcl1bZV0sbikmJihuPXRbcl1bZV0pO2Vsc2UgZm9yKDtyLS07KWkodFtyXSxuKSYmKG49dFtyXSk7cmV0dXJuIG59fVMudXRpbC5hcnJheT17ZmlsbDpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaT10Lmxlbmd0aDtpLS07KXRbaV09ZTtyZXR1cm4gdH0saW52b2tlOmZ1bmN0aW9uKGUsaSl7Zm9yKHZhciByPXQuY2FsbChhcmd1bWVudHMsMiksbj1bXSxzPTAsbz1lLmxlbmd0aDtzPG87cysrKW5bc109ci5sZW5ndGg/ZVtzXVtpXS5hcHBseShlW3NdLHIpOmVbc11baV0uY2FsbChlW3NdKTtyZXR1cm4gbn0sbWluOmZ1bmN0aW9uKHQsaSl7cmV0dXJuIGUodCxpLChmdW5jdGlvbih0LGUpe3JldHVybiB0PGV9KSl9LG1heDpmdW5jdGlvbih0LGkpe3JldHVybiBlKHQsaSwoZnVuY3Rpb24odCxlKXtyZXR1cm4gdD49ZX0pKX19fSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLGkscil7aWYocilpZighUy5pc0xpa2VseU5vZGUmJmkgaW5zdGFuY2VvZiBFbGVtZW50KWU9aTtlbHNlIGlmKGkgaW5zdGFuY2VvZiBBcnJheSl7ZT1bXTtmb3IodmFyIG49MCxzPWkubGVuZ3RoO248cztuKyspZVtuXT10KHt9LGlbbl0scil9ZWxzZSBpZihpJiZcIm9iamVjdFwiPT10eXBlb2YgaSlmb3IodmFyIG8gaW4gaSlcImNhbnZhc1wiPT09b3x8XCJncm91cFwiPT09bz9lW29dPW51bGw6aS5oYXNPd25Qcm9wZXJ0eShvKSYmKGVbb109dCh7fSxpW29dLHIpKTtlbHNlIGU9aTtlbHNlIGZvcih2YXIgbyBpbiBpKWVbb109aVtvXTtyZXR1cm4gZX1TLnV0aWwub2JqZWN0PXtleHRlbmQ6dCxjbG9uZTpmdW5jdGlvbihlLGkpe3JldHVybiB0KHt9LGUsaSl9fSxTLnV0aWwub2JqZWN0LmV4dGVuZChTLnV0aWwsUy5PYnNlcnZhYmxlKX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt2YXIgaT10LmNoYXJDb2RlQXQoZSk7aWYoaXNOYU4oaSkpcmV0dXJuXCJcIjtpZihpPDU1Mjk2fHxpPjU3MzQzKXJldHVybiB0LmNoYXJBdChlKTtpZig1NTI5Njw9aSYmaTw9NTYzMTkpe2lmKHQubGVuZ3RoPD1lKzEpdGhyb3dcIkhpZ2ggc3Vycm9nYXRlIHdpdGhvdXQgZm9sbG93aW5nIGxvdyBzdXJyb2dhdGVcIjt2YXIgcj10LmNoYXJDb2RlQXQoZSsxKTtpZig1NjMyMD5yfHxyPjU3MzQzKXRocm93XCJIaWdoIHN1cnJvZ2F0ZSB3aXRob3V0IGZvbGxvd2luZyBsb3cgc3Vycm9nYXRlXCI7cmV0dXJuIHQuY2hhckF0KGUpK3QuY2hhckF0KGUrMSl9aWYoMD09PWUpdGhyb3dcIkxvdyBzdXJyb2dhdGUgd2l0aG91dCBwcmVjZWRpbmcgaGlnaCBzdXJyb2dhdGVcIjt2YXIgbj10LmNoYXJDb2RlQXQoZS0xKTtpZig1NTI5Nj5ufHxuPjU2MzE5KXRocm93XCJMb3cgc3Vycm9nYXRlIHdpdGhvdXQgcHJlY2VkaW5nIGhpZ2ggc3Vycm9nYXRlXCI7cmV0dXJuITF9Uy51dGlsLnN0cmluZz17Y2FtZWxpemU6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvLSsoLik/L2csKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU/ZS50b1VwcGVyQ2FzZSgpOlwiXCJ9KSl9LGNhcGl0YWxpemU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSsoZT90LnNsaWNlKDEpOnQuc2xpY2UoMSkudG9Mb3dlckNhc2UoKSl9LGVzY2FwZVhtbDpmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKC8mL2csXCImYW1wO1wiKS5yZXBsYWNlKC9cIi9nLFwiJnF1b3Q7XCIpLnJlcGxhY2UoLycvZyxcIiZhcG9zO1wiKS5yZXBsYWNlKC88L2csXCImbHQ7XCIpLnJlcGxhY2UoLz4vZyxcIiZndDtcIil9LGdyYXBoZW1lU3BsaXQ6ZnVuY3Rpb24oZSl7dmFyIGkscj0wLG49W107Zm9yKHI9MDtyPGUubGVuZ3RoO3IrKykhMSE9PShpPXQoZSxyKSkmJm4ucHVzaChpKTtyZXR1cm4gbn19fSgpLGZ1bmN0aW9uKCl7dmFyIHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLGU9ZnVuY3Rpb24oKXt9LGk9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW57dG9TdHJpbmc6MX0paWYoXCJ0b1N0cmluZ1wiPT09dClyZXR1cm4hMTtyZXR1cm4hMH0oKSxyPWZ1bmN0aW9uKHQsZSxyKXtmb3IodmFyIG4gaW4gZSluIGluIHQucHJvdG90eXBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0LnByb3RvdHlwZVtuXSYmKGVbbl0rXCJcIikuaW5kZXhPZihcImNhbGxTdXBlclwiKT4tMT90LnByb3RvdHlwZVtuXT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgaT10aGlzLmNvbnN0cnVjdG9yLnN1cGVyY2xhc3M7dGhpcy5jb25zdHJ1Y3Rvci5zdXBlcmNsYXNzPXI7dmFyIG49ZVt0XS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYodGhpcy5jb25zdHJ1Y3Rvci5zdXBlcmNsYXNzPWksXCJpbml0aWFsaXplXCIhPT10KXJldHVybiBufX0obik6dC5wcm90b3R5cGVbbl09ZVtuXSxpJiYoZS50b1N0cmluZyE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcmJih0LnByb3RvdHlwZS50b1N0cmluZz1lLnRvU3RyaW5nKSxlLnZhbHVlT2YhPT1PYmplY3QucHJvdG90eXBlLnZhbHVlT2YmJih0LnByb3RvdHlwZS52YWx1ZU9mPWUudmFsdWVPZikpfTtmdW5jdGlvbiBuKCl7fWZ1bmN0aW9uIHMoZSl7Zm9yKHZhciBpPW51bGwscj10aGlzO3IuY29uc3RydWN0b3Iuc3VwZXJjbGFzczspe3ZhciBuPXIuY29uc3RydWN0b3Iuc3VwZXJjbGFzcy5wcm90b3R5cGVbZV07aWYocltlXSE9PW4pe2k9bjticmVha31yPXIuY29uc3RydWN0b3Iuc3VwZXJjbGFzcy5wcm90b3R5cGV9cmV0dXJuIGk/YXJndW1lbnRzLmxlbmd0aD4xP2kuYXBwbHkodGhpcyx0LmNhbGwoYXJndW1lbnRzLDEpKTppLmNhbGwodGhpcyk6Y29uc29sZS5sb2coXCJ0cmllZCB0byBjYWxsU3VwZXIgXCIrZStcIiwgbWV0aG9kIG5vdCBmb3VuZCBpbiBwcm90b3R5cGUgY2hhaW5cIix0aGlzKX1TLnV0aWwuY3JlYXRlQ2xhc3M9ZnVuY3Rpb24oKXt2YXIgaT1udWxsLG89dC5jYWxsKGFyZ3VtZW50cywwKTtmdW5jdGlvbiBhKCl7dGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1cImZ1bmN0aW9uXCI9PXR5cGVvZiBvWzBdJiYoaT1vLnNoaWZ0KCkpLGEuc3VwZXJjbGFzcz1pLGEuc3ViY2xhc3Nlcz1bXSxpJiYobi5wcm90b3R5cGU9aS5wcm90b3R5cGUsYS5wcm90b3R5cGU9bmV3IG4saS5zdWJjbGFzc2VzLnB1c2goYSkpO2Zvcih2YXIgaD0wLGw9by5sZW5ndGg7aDxsO2grKylyKGEsb1toXSxpKTtyZXR1cm4gYS5wcm90b3R5cGUuaW5pdGlhbGl6ZXx8KGEucHJvdG90eXBlLmluaXRpYWxpemU9ZSksYS5wcm90b3R5cGUuY29uc3RydWN0b3I9YSxhLnByb3RvdHlwZS5jYWxsU3VwZXI9cyxhfX0oKSxsPSEhUy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLmF0dGFjaEV2ZW50LGM9W1widG91Y2hzdGFydFwiLFwidG91Y2htb3ZlXCIsXCJ0b3VjaGVuZFwiXSxTLnV0aWwuYWRkTGlzdGVuZXI9ZnVuY3Rpb24odCxlLGkscil7dCYmdC5hZGRFdmVudExpc3RlbmVyKGUsaSwhbCYmcil9LFMudXRpbC5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbih0LGUsaSxyKXt0JiZ0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxpLCFsJiZyKX0sUy51dGlsLmdldFBvaW50ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dC50YXJnZXQsaT1TLnV0aWwuZ2V0U2Nyb2xsTGVmdFRvcChlKSxyPWZ1bmN0aW9uKHQpe3ZhciBlPXQuY2hhbmdlZFRvdWNoZXM7cmV0dXJuIGUmJmVbMF0/ZVswXTp0fSh0KTtyZXR1cm57eDpyLmNsaWVudFgraS5sZWZ0LHk6ci5jbGllbnRZK2kudG9wfX0sUy51dGlsLmlzVG91Y2hFdmVudD1mdW5jdGlvbih0KXtyZXR1cm4gYy5pbmRleE9mKHQudHlwZSk+LTF8fFwidG91Y2hcIj09PXQucG9pbnRlclR5cGV9LGQ9XCJzdHJpbmdcIj09dHlwZW9mKHU9Uy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKS5zdHlsZS5vcGFjaXR5LGY9XCJzdHJpbmdcIj09dHlwZW9mIHUuc3R5bGUuZmlsdGVyLGc9L2FscGhhXFxzKlxcKFxccypvcGFjaXR5XFxzKj1cXHMqKFteXFwpXSspXFwpLyxtPWZ1bmN0aW9uKHQpe3JldHVybiB0fSxkP209ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zdHlsZS5vcGFjaXR5PWUsdH06ZiYmKG09ZnVuY3Rpb24odCxlKXt2YXIgaT10LnN0eWxlO3JldHVybiB0LmN1cnJlbnRTdHlsZSYmIXQuY3VycmVudFN0eWxlLmhhc0xheW91dCYmKGkuem9vbT0xKSxnLnRlc3QoaS5maWx0ZXIpPyhlPWU+PS45OTk5P1wiXCI6XCJhbHBoYShvcGFjaXR5PVwiKzEwMCplK1wiKVwiLGkuZmlsdGVyPWkuZmlsdGVyLnJlcGxhY2UoZyxlKSk6aS5maWx0ZXIrPVwiIGFscGhhKG9wYWNpdHk9XCIrMTAwKmUrXCIpXCIsdH0pLFMudXRpbC5zZXRTdHlsZT1mdW5jdGlvbih0LGUpe3ZhciBpPXQuc3R5bGU7aWYoIWkpcmV0dXJuIHQ7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpcmV0dXJuIHQuc3R5bGUuY3NzVGV4dCs9XCI7XCIrZSxlLmluZGV4T2YoXCJvcGFjaXR5XCIpPi0xP20odCxlLm1hdGNoKC9vcGFjaXR5OlxccyooXFxkP1xcLj9cXGQqKS8pWzFdKTp0O2Zvcih2YXIgciBpbiBlKVwib3BhY2l0eVwiPT09cj9tKHQsZVtyXSk6aVtcImZsb2F0XCI9PT1yfHxcImNzc0Zsb2F0XCI9PT1yP3ZvaWQgMD09PWkuc3R5bGVGbG9hdD9cImNzc0Zsb2F0XCI6XCJzdHlsZUZsb2F0XCI6cl09ZVtyXTtyZXR1cm4gdH0sZnVuY3Rpb24oKXt2YXIgdCxlLGkscixuPUFycmF5LnByb3RvdHlwZS5zbGljZSxzPWZ1bmN0aW9uKHQpe3JldHVybiBuLmNhbGwodCwwKX07dHJ5e3Q9cyhTLmRvY3VtZW50LmNoaWxkTm9kZXMpaW5zdGFuY2VvZiBBcnJheX1jYXRjaCh0KXt9ZnVuY3Rpb24gbyh0LGUpe3ZhciBpPVMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KTtmb3IodmFyIHIgaW4gZSlcImNsYXNzXCI9PT1yP2kuY2xhc3NOYW1lPWVbcl06XCJmb3JcIj09PXI/aS5odG1sRm9yPWVbcl06aS5zZXRBdHRyaWJ1dGUocixlW3JdKTtyZXR1cm4gaX1mdW5jdGlvbiBhKHQpe2Zvcih2YXIgZT0wLGk9MCxyPVMuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LG49Uy5kb2N1bWVudC5ib2R5fHx7c2Nyb2xsTGVmdDowLHNjcm9sbFRvcDowfTt0JiYodC5wYXJlbnROb2RlfHx0Lmhvc3QpJiYoKHQ9dC5wYXJlbnROb2RlfHx0Lmhvc3QpPT09Uy5kb2N1bWVudD8oZT1uLnNjcm9sbExlZnR8fHIuc2Nyb2xsTGVmdHx8MCxpPW4uc2Nyb2xsVG9wfHxyLnNjcm9sbFRvcHx8MCk6KGUrPXQuc2Nyb2xsTGVmdHx8MCxpKz10LnNjcm9sbFRvcHx8MCksMSE9PXQubm9kZVR5cGV8fFwiZml4ZWRcIiE9PXQuc3R5bGUucG9zaXRpb24pOyk7cmV0dXJue2xlZnQ6ZSx0b3A6aX19dHx8KHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSh0Lmxlbmd0aCksaT10Lmxlbmd0aDtpLS07KWVbaV09dFtpXTtyZXR1cm4gZX0pLGU9Uy5kb2N1bWVudC5kZWZhdWx0VmlldyYmUy5kb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlP2Z1bmN0aW9uKHQsZSl7dmFyIGk9Uy5kb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKHQsbnVsbCk7cmV0dXJuIGk/aVtlXTp2b2lkIDB9OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5zdHlsZVtlXTtyZXR1cm4haSYmdC5jdXJyZW50U3R5bGUmJihpPXQuY3VycmVudFN0eWxlW2VdKSxpfSxpPVMuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLHI9XCJ1c2VyU2VsZWN0XCJpbiBpP1widXNlclNlbGVjdFwiOlwiTW96VXNlclNlbGVjdFwiaW4gaT9cIk1velVzZXJTZWxlY3RcIjpcIldlYmtpdFVzZXJTZWxlY3RcImluIGk/XCJXZWJraXRVc2VyU2VsZWN0XCI6XCJLaHRtbFVzZXJTZWxlY3RcImluIGk/XCJLaHRtbFVzZXJTZWxlY3RcIjpcIlwiLFMudXRpbC5tYWtlRWxlbWVudFVuc2VsZWN0YWJsZT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dC5vbnNlbGVjdHN0YXJ0JiYodC5vbnNlbGVjdHN0YXJ0PVMudXRpbC5mYWxzZUZ1bmN0aW9uKSxyP3Quc3R5bGVbcl09XCJub25lXCI6XCJzdHJpbmdcIj09dHlwZW9mIHQudW5zZWxlY3RhYmxlJiYodC51bnNlbGVjdGFibGU9XCJvblwiKSx0fSxTLnV0aWwubWFrZUVsZW1lbnRTZWxlY3RhYmxlPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10Lm9uc2VsZWN0c3RhcnQmJih0Lm9uc2VsZWN0c3RhcnQ9bnVsbCkscj90LnN0eWxlW3JdPVwiXCI6XCJzdHJpbmdcIj09dHlwZW9mIHQudW5zZWxlY3RhYmxlJiYodC51bnNlbGVjdGFibGU9XCJcIiksdH0sUy51dGlsLnNldEltYWdlU21vb3RoaW5nPWZ1bmN0aW9uKHQsZSl7dC5pbWFnZVNtb290aGluZ0VuYWJsZWQ9dC5pbWFnZVNtb290aGluZ0VuYWJsZWR8fHQud2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkfHx0Lm1vekltYWdlU21vb3RoaW5nRW5hYmxlZHx8dC5tc0ltYWdlU21vb3RoaW5nRW5hYmxlZHx8dC5vSW1hZ2VTbW9vdGhpbmdFbmFibGVkLHQuaW1hZ2VTbW9vdGhpbmdFbmFibGVkPWV9LFMudXRpbC5nZXRCeUlkPWZ1bmN0aW9uKHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiB0P1MuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCk6dH0sUy51dGlsLnRvQXJyYXk9cyxTLnV0aWwuYWRkQ2xhc3M9ZnVuY3Rpb24odCxlKXt0JiYtMT09PShcIiBcIit0LmNsYXNzTmFtZStcIiBcIikuaW5kZXhPZihcIiBcIitlK1wiIFwiKSYmKHQuY2xhc3NOYW1lKz0odC5jbGFzc05hbWU/XCIgXCI6XCJcIikrZSl9LFMudXRpbC5tYWtlRWxlbWVudD1vLFMudXRpbC53cmFwRWxlbWVudD1mdW5jdGlvbih0LGUsaSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGUmJihlPW8oZSxpKSksdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGUsdCksZS5hcHBlbmRDaGlsZCh0KSxlfSxTLnV0aWwuZ2V0U2Nyb2xsTGVmdFRvcD1hLFMudXRpbC5nZXRFbGVtZW50T2Zmc2V0PWZ1bmN0aW9uKHQpe3ZhciBpLHIsbj10JiZ0Lm93bmVyRG9jdW1lbnQscz17bGVmdDowLHRvcDowfSxvPXtsZWZ0OjAsdG9wOjB9LGg9e2JvcmRlckxlZnRXaWR0aDpcImxlZnRcIixib3JkZXJUb3BXaWR0aDpcInRvcFwiLHBhZGRpbmdMZWZ0OlwibGVmdFwiLHBhZGRpbmdUb3A6XCJ0b3BcIn07aWYoIW4pcmV0dXJuIG87Zm9yKHZhciBsIGluIGgpb1toW2xdXSs9cGFyc2VJbnQoZSh0LGwpLDEwKXx8MDtyZXR1cm4gaT1uLmRvY3VtZW50RWxlbWVudCx2b2lkIDAhPT10LmdldEJvdW5kaW5nQ2xpZW50UmVjdCYmKHM9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSkscj1hKHQpLHtsZWZ0OnMubGVmdCtyLmxlZnQtKGkuY2xpZW50TGVmdHx8MCkrby5sZWZ0LHRvcDpzLnRvcCtyLnRvcC0oaS5jbGllbnRUb3B8fDApK28udG9wfX0sUy51dGlsLmdldE5vZGVDYW52YXM9ZnVuY3Rpb24odCl7dmFyIGU9Uy5qc2RvbUltcGxGb3JXcmFwcGVyKHQpO3JldHVybiBlLl9jYW52YXN8fGUuX2ltYWdlfSxTLnV0aWwuY2xlYW5VcEpzZG9tTm9kZT1mdW5jdGlvbih0KXtpZihTLmlzTGlrZWx5Tm9kZSl7dmFyIGU9Uy5qc2RvbUltcGxGb3JXcmFwcGVyKHQpO2UmJihlLl9pbWFnZT1udWxsLGUuX2NhbnZhcz1udWxsLGUuX2N1cnJlbnRTcmM9bnVsbCxlLl9hdHRyaWJ1dGVzPW51bGwsZS5fY2xhc3NMaXN0PW51bGwpfX19KCksZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fVMudXRpbC5yZXF1ZXN0PWZ1bmN0aW9uKGUsaSl7aXx8KGk9e30pO3ZhciByPWkubWV0aG9kP2kubWV0aG9kLnRvVXBwZXJDYXNlKCk6XCJHRVRcIixuPWkub25Db21wbGV0ZXx8ZnVuY3Rpb24oKXt9LHM9bmV3IFMud2luZG93LlhNTEh0dHBSZXF1ZXN0LG89aS5ib2R5fHxpLnBhcmFtZXRlcnM7cmV0dXJuIHMub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PXMucmVhZHlTdGF0ZSYmKG4ocykscy5vbnJlYWR5c3RhdGVjaGFuZ2U9dCl9LFwiR0VUXCI9PT1yJiYobz1udWxsLFwic3RyaW5nXCI9PXR5cGVvZiBpLnBhcmFtZXRlcnMmJihlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrKC9cXD8vLnRlc3QodCk/XCImXCI6XCI/XCIpK2V9KGUsaS5wYXJhbWV0ZXJzKSkpLHMub3BlbihyLGUsITApLFwiUE9TVFwiIT09ciYmXCJQVVRcIiE9PXJ8fHMuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpLHMuc2VuZChvKSxzfX0oKSxTLmxvZz1jb25zb2xlLmxvZyxTLndhcm49Y29uc29sZS53YXJuLGZ1bmN0aW9uKCl7dmFyIHQ9Uy51dGlsLm9iamVjdC5leHRlbmQsZT1TLnV0aWwub2JqZWN0LmNsb25lLGk9W107ZnVuY3Rpb24gcigpe3JldHVybiExfWZ1bmN0aW9uIG4odCxlLGkscil7cmV0dXJuLWkqTWF0aC5jb3ModC9yKihNYXRoLlBJLzIpKStpK2V9Uy51dGlsLm9iamVjdC5leHRlbmQoaSx7Y2FuY2VsQWxsOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zcGxpY2UoMCk7cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5jYW5jZWwoKX0pKSx0fSxjYW5jZWxCeUNhbnZhczpmdW5jdGlvbih0KXtpZighdClyZXR1cm5bXTt2YXIgZT10aGlzLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGUudGFyZ2V0JiZlLnRhcmdldC5jYW52YXM9PT10fSkpO3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QuY2FuY2VsKCl9KSksZX0sY2FuY2VsQnlUYXJnZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5maW5kQW5pbWF0aW9uc0J5VGFyZ2V0KHQpO3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKHQpe3QuY2FuY2VsKCl9KSksZX0sZmluZEFuaW1hdGlvbkluZGV4OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmluZGV4T2YodGhpcy5maW5kQW5pbWF0aW9uKHQpKX0sZmluZEFuaW1hdGlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4gZS5jYW5jZWw9PT10fSkpfSxmaW5kQW5pbWF0aW9uc0J5VGFyZ2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0P3RoaXMuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gZS50YXJnZXQ9PT10fSkpOltdfX0pO3ZhciBzPVMud2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8Uy53aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxTLndpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fFMud2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fFMud2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbih0KXtyZXR1cm4gUy53aW5kb3cuc2V0VGltZW91dCh0LDFlMy82MCl9LG89Uy53aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fFMud2luZG93LmNsZWFyVGltZW91dDtmdW5jdGlvbiBhKCl7cmV0dXJuIHMuYXBwbHkoUy53aW5kb3csYXJndW1lbnRzKX1TLnV0aWwuYW5pbWF0ZT1mdW5jdGlvbihpKXtpfHwoaT17fSk7dmFyIHMsbz0hMSxoPWZ1bmN0aW9uKCl7dmFyIHQ9Uy5ydW5uaW5nQW5pbWF0aW9ucy5pbmRleE9mKHMpO3JldHVybiB0Pi0xJiZTLnJ1bm5pbmdBbmltYXRpb25zLnNwbGljZSh0LDEpWzBdfTtyZXR1cm4gcz10KGUoaSkse2NhbmNlbDpmdW5jdGlvbigpe3JldHVybiBvPSEwLGgoKX0sY3VycmVudFZhbHVlOlwic3RhcnRWYWx1ZVwiaW4gaT9pLnN0YXJ0VmFsdWU6MCxjb21wbGV0aW9uUmF0ZTowLGR1cmF0aW9uUmF0ZTowfSksUy5ydW5uaW5nQW5pbWF0aW9ucy5wdXNoKHMpLGEoKGZ1bmN0aW9uKHQpe3ZhciBlLGw9dHx8K25ldyBEYXRlLGM9aS5kdXJhdGlvbnx8NTAwLHU9bCtjLGQ9aS5vbkNoYW5nZXx8cixmPWkuYWJvcnR8fHIsZz1pLm9uQ29tcGxldGV8fHIsbT1pLmVhc2luZ3x8bixwPVwic3RhcnRWYWx1ZVwiaW4gaSYmaS5zdGFydFZhbHVlLmxlbmd0aD4wLHY9XCJzdGFydFZhbHVlXCJpbiBpP2kuc3RhcnRWYWx1ZTowLF89XCJlbmRWYWx1ZVwiaW4gaT9pLmVuZFZhbHVlOjEwMCx5PWkuYnlWYWx1ZXx8KHA/di5tYXAoKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIF9bZV0tdltlXX0pKTpfLXYpO2kub25TdGFydCYmaS5vblN0YXJ0KCksZnVuY3Rpb24gdChpKXt2YXIgcj0oZT1pfHwrbmV3IERhdGUpPnU/YzplLWwsbj1yL2Msdz1wP3YubWFwKChmdW5jdGlvbih0LGUpe3JldHVybiBtKHIsdltlXSx5W2VdLGMpfSkpOm0ocix2LHksYyksYj1wP01hdGguYWJzKCh3WzBdLXZbMF0pL3lbMF0pOk1hdGguYWJzKCh3LXYpL3kpO2lmKHMuY3VycmVudFZhbHVlPXA/dy5zbGljZSgpOncscy5jb21wbGV0aW9uUmF0ZT1iLHMuZHVyYXRpb25SYXRlPW4sIW8pe2lmKCFmKHcsYixuKSlyZXR1cm4gZT51PyhzLmN1cnJlbnRWYWx1ZT1wP18uc2xpY2UoKTpfLHMuY29tcGxldGlvblJhdGU9MSxzLmR1cmF0aW9uUmF0ZT0xLGQocD9fLnNsaWNlKCk6XywxLDEpLGcoXywxLDEpLHZvaWQgaCgpKTooZCh3LGIsbiksdm9pZCBhKHQpKTtoKCl9fShsKX0pKSxzLmNhbmNlbH0sUy51dGlsLnJlcXVlc3RBbmltRnJhbWU9YSxTLnV0aWwuY2FuY2VsQW5pbUZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIG8uYXBwbHkoUy53aW5kb3csYXJndW1lbnRzKX0sUy5ydW5uaW5nQW5pbWF0aW9ucz1pfSgpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsaSl7dmFyIHI9XCJyZ2JhKFwiK3BhcnNlSW50KHRbMF0raSooZVswXS10WzBdKSwxMCkrXCIsXCIrcGFyc2VJbnQodFsxXStpKihlWzFdLXRbMV0pLDEwKStcIixcIitwYXJzZUludCh0WzJdK2kqKGVbMl0tdFsyXSksMTApO3JldHVybihyKz1cIixcIisodCYmZT9wYXJzZUZsb2F0KHRbM10raSooZVszXS10WzNdKSk6MSkpK1wiKVwifVMudXRpbC5hbmltYXRlQ29sb3I9ZnVuY3Rpb24oZSxpLHIsbil7dmFyIHM9bmV3IFMuQ29sb3IoZSkuZ2V0U291cmNlKCksbz1uZXcgUy5Db2xvcihpKS5nZXRTb3VyY2UoKSxhPW4ub25Db21wbGV0ZSxoPW4ub25DaGFuZ2U7cmV0dXJuIG49bnx8e30sUy51dGlsLmFuaW1hdGUoUy51dGlsLm9iamVjdC5leHRlbmQobix7ZHVyYXRpb246cnx8NTAwLHN0YXJ0VmFsdWU6cyxlbmRWYWx1ZTpvLGJ5VmFsdWU6byxlYXNpbmc6ZnVuY3Rpb24oZSxpLHIscyl7cmV0dXJuIHQoaSxyLG4uY29sb3JFYXNpbmc/bi5jb2xvckVhc2luZyhlLHMpOjEtTWF0aC5jb3MoZS9zKihNYXRoLlBJLzIpKSl9LG9uQ29tcGxldGU6ZnVuY3Rpb24oZSxpLHIpe2lmKGEpcmV0dXJuIGEodChvLG8sMCksaSxyKX0sb25DaGFuZ2U6ZnVuY3Rpb24oZSxpLHIpe2lmKGgpe2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGgodChlLGUsMCksaSxyKTtoKGUsaSxyKX19fSkpfX0oKSxmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLGkscil7cmV0dXJuIHQ8TWF0aC5hYnMoZSk/KHQ9ZSxyPWkvNCk6cj0wPT09ZSYmMD09PXQ/aS8oMipNYXRoLlBJKSpNYXRoLmFzaW4oMSk6aS8oMipNYXRoLlBJKSpNYXRoLmFzaW4oZS90KSx7YTp0LGM6ZSxwOmksczpyfX1mdW5jdGlvbiBlKHQsZSxpKXtyZXR1cm4gdC5hKk1hdGgucG93KDIsMTAqKGUtPTEpKSpNYXRoLnNpbigoZSppLXQucykqKDIqTWF0aC5QSSkvdC5wKX1mdW5jdGlvbiBpKHQsZSxpLG4pe3JldHVybiBpLXIobi10LDAsaSxuKStlfWZ1bmN0aW9uIHIodCxlLGkscil7cmV0dXJuKHQvPXIpPDEvMi43NT9pKig3LjU2MjUqdCp0KStlOnQ8Mi8yLjc1P2kqKDcuNTYyNSoodC09MS41LzIuNzUpKnQrLjc1KStlOnQ8Mi41LzIuNzU/aSooNy41NjI1Kih0LT0yLjI1LzIuNzUpKnQrLjkzNzUpK2U6aSooNy41NjI1Kih0LT0yLjYyNS8yLjc1KSp0Ky45ODQzNzUpK2V9Uy51dGlsLmVhc2U9e2Vhc2VJblF1YWQ6ZnVuY3Rpb24odCxlLGkscil7cmV0dXJuIGkqKHQvPXIpKnQrZX0sZWFzZU91dFF1YWQ6ZnVuY3Rpb24odCxlLGkscil7cmV0dXJuLWkqKHQvPXIpKih0LTIpK2V9LGVhc2VJbk91dFF1YWQ6ZnVuY3Rpb24odCxlLGkscil7cmV0dXJuKHQvPXIvMik8MT9pLzIqdCp0K2U6LWkvMiooLS10Kih0LTIpLTEpK2V9LGVhc2VJbkN1YmljOmZ1bmN0aW9uKHQsZSxpLHIpe3JldHVybiBpKih0Lz1yKSp0KnQrZX0sZWFzZU91dEN1YmljOmZ1bmN0aW9uKHQsZSxpLHIpe3JldHVybiBpKigodD10L3ItMSkqdCp0KzEpK2V9LGVhc2VJbk91dEN1YmljOmZ1bmN0aW9uKHQsZSxpLHIpe3JldHVybih0Lz1yLzIpPDE/aS8yKnQqdCp0K2U6aS8yKigodC09MikqdCp0KzIpK2V9LGVhc2VJblF1YXJ0OmZ1bmN0aW9uKHQsZSxpLHIpe3JldHVybiBpKih0Lz1yKSp0KnQqdCtlfSxlYXNlT3V0UXVhcnQ6ZnVuY3Rpb24odCxlLGkscil7cmV0dXJuLWkqKCh0PXQvci0xKSp0KnQqdC0xKStlfSxlYXNlSW5PdXRRdWFydDpmdW5jdGlvbih0LGUsaSxyKXtyZXR1cm4odC89ci8yKTwxP2kvMip0KnQqdCp0K2U6LWkvMiooKHQtPTIpKnQqdCp0LTIpK2V9LGVhc2VJblF1aW50OmZ1bmN0aW9uKHQsZSxpLHIpe3JldHVybiBpKih0Lz1yKSp0KnQqdCp0K2V9LGVhc2VPdXRRdWludDpmdW5jdGlvbih0LGUsaSxyKXtyZXR1cm4gaSooKHQ9dC9yLTEpKnQqdCp0KnQrMSkrZX0sZWFzZUluT3V0UXVpbnQ6ZnVuY3Rpb24odCxlLGkscil7cmV0dXJuKHQvPXIvMik8MT9pLzIqdCp0KnQqdCp0K2U6aS8yKigodC09MikqdCp0KnQqdCsyKStlfSxlYXNlSW5TaW5lOmZ1bmN0aW9uKHQsZSxpLHIpe3JldHVybi1pKk1hdGguY29zKHQvciooTWF0aC5QSS8yKSkraStlfSxlYXNlT3V0U2luZTpmdW5jdGlvbih0LGUsaSxyKXtyZXR1cm4gaSpNYXRoLnNpbih0L3IqKE1hdGguUEkvMikpK2V9LGVhc2VJbk91dFNpbmU6ZnVuY3Rpb24odCxlLGkscil7cmV0dXJuLWkvMiooTWF0aC5jb3MoTWF0aC5QSSp0L3IpLTEpK2V9LGVhc2VJbkV4cG86ZnVuY3Rpb24odCxlLGkscil7cmV0dXJuIDA9PT10P2U6aSpNYXRoLnBvdygyLDEwKih0L3ItMSkpK2V9LGVhc2VPdXRFeHBvOmZ1bmN0aW9uKHQsZSxpLHIpe3JldHVybiB0PT09cj9lK2k6aSooMS1NYXRoLnBvdygyLC0xMCp0L3IpKStlfSxlYXNlSW5PdXRFeHBvOmZ1bmN0aW9uKHQsZSxpLHIpe3JldHVybiAwPT09dD9lOnQ9PT1yP2UraToodC89ci8yKTwxP2kvMipNYXRoLnBvdygyLDEwKih0LTEpKStlOmkvMiooMi1NYXRoLnBvdygyLC0xMCotLXQpKStlfSxlYXNlSW5DaXJjOmZ1bmN0aW9uKHQsZSxpLHIpe3JldHVybi1pKihNYXRoLnNxcnQoMS0odC89cikqdCktMSkrZX0sZWFzZU91dENpcmM6ZnVuY3Rpb24odCxlLGkscil7cmV0dXJuIGkqTWF0aC5zcXJ0KDEtKHQ9dC9yLTEpKnQpK2V9LGVhc2VJbk91dENpcmM6ZnVuY3Rpb24odCxlLGkscil7cmV0dXJuKHQvPXIvMik8MT8taS8yKihNYXRoLnNxcnQoMS10KnQpLTEpK2U6aS8yKihNYXRoLnNxcnQoMS0odC09MikqdCkrMSkrZX0sZWFzZUluRWxhc3RpYzpmdW5jdGlvbihpLHIsbixzKXt2YXIgbz0wO3JldHVybiAwPT09aT9yOjE9PShpLz1zKT9yK246KG98fChvPS4zKnMpLC1lKHQobixuLG8sMS43MDE1OCksaSxzKStyKX0sZWFzZU91dEVsYXN0aWM6ZnVuY3Rpb24oZSxpLHIsbil7dmFyIHM9MDtpZigwPT09ZSlyZXR1cm4gaTtpZigxPT0oZS89bikpcmV0dXJuIGkrcjtzfHwocz0uMypuKTt2YXIgbz10KHIscixzLDEuNzAxNTgpO3JldHVybiBvLmEqTWF0aC5wb3coMiwtMTAqZSkqTWF0aC5zaW4oKGUqbi1vLnMpKigyKk1hdGguUEkpL28ucCkrby5jK2l9LGVhc2VJbk91dEVsYXN0aWM6ZnVuY3Rpb24oaSxyLG4scyl7dmFyIG89MDtpZigwPT09aSlyZXR1cm4gcjtpZigyPT0oaS89cy8yKSlyZXR1cm4gcituO298fChvPXMqKC4zKjEuNSkpO3ZhciBhPXQobixuLG8sMS43MDE1OCk7cmV0dXJuIGk8MT8tLjUqZShhLGkscykrcjphLmEqTWF0aC5wb3coMiwtMTAqKGktPTEpKSpNYXRoLnNpbigoaSpzLWEucykqKDIqTWF0aC5QSSkvYS5wKSouNSthLmMrcn0sZWFzZUluQmFjazpmdW5jdGlvbih0LGUsaSxyLG4pe3JldHVybiB2b2lkIDA9PT1uJiYobj0xLjcwMTU4KSxpKih0Lz1yKSp0KigobisxKSp0LW4pK2V9LGVhc2VPdXRCYWNrOmZ1bmN0aW9uKHQsZSxpLHIsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPTEuNzAxNTgpLGkqKCh0PXQvci0xKSp0KigobisxKSp0K24pKzEpK2V9LGVhc2VJbk91dEJhY2s6ZnVuY3Rpb24odCxlLGkscixuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49MS43MDE1OCksKHQvPXIvMik8MT9pLzIqKHQqdCooKDErKG4qPTEuNTI1KSkqdC1uKSkrZTppLzIqKCh0LT0yKSp0KigoMSsobio9MS41MjUpKSp0K24pKzIpK2V9LGVhc2VJbkJvdW5jZTppLGVhc2VPdXRCb3VuY2U6cixlYXNlSW5PdXRCb3VuY2U6ZnVuY3Rpb24odCxlLG4scyl7cmV0dXJuIHQ8cy8yPy41KmkoMip0LDAsbixzKStlOi41KnIoMip0LXMsMCxuLHMpKy41Km4rZX19fSgpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljfHwodC5mYWJyaWM9e30pLGk9ZS51dGlsLm9iamVjdC5leHRlbmQscj1lLnV0aWwub2JqZWN0LmNsb25lLG49ZS51dGlsLnRvRml4ZWQscz1lLnV0aWwucGFyc2VVbml0LG89ZS51dGlsLm11bHRpcGx5VHJhbnNmb3JtTWF0cmljZXMsYT17Y3g6XCJsZWZ0XCIseDpcImxlZnRcIixyOlwicmFkaXVzXCIsY3k6XCJ0b3BcIix5OlwidG9wXCIsZGlzcGxheTpcInZpc2libGVcIix2aXNpYmlsaXR5OlwidmlzaWJsZVwiLHRyYW5zZm9ybTpcInRyYW5zZm9ybU1hdHJpeFwiLFwiZmlsbC1vcGFjaXR5XCI6XCJmaWxsT3BhY2l0eVwiLFwiZmlsbC1ydWxlXCI6XCJmaWxsUnVsZVwiLFwiZm9udC1mYW1pbHlcIjpcImZvbnRGYW1pbHlcIixcImZvbnQtc2l6ZVwiOlwiZm9udFNpemVcIixcImZvbnQtc3R5bGVcIjpcImZvbnRTdHlsZVwiLFwiZm9udC13ZWlnaHRcIjpcImZvbnRXZWlnaHRcIixcImxldHRlci1zcGFjaW5nXCI6XCJjaGFyU3BhY2luZ1wiLFwicGFpbnQtb3JkZXJcIjpcInBhaW50Rmlyc3RcIixcInN0cm9rZS1kYXNoYXJyYXlcIjpcInN0cm9rZURhc2hBcnJheVwiLFwic3Ryb2tlLWRhc2hvZmZzZXRcIjpcInN0cm9rZURhc2hPZmZzZXRcIixcInN0cm9rZS1saW5lY2FwXCI6XCJzdHJva2VMaW5lQ2FwXCIsXCJzdHJva2UtbGluZWpvaW5cIjpcInN0cm9rZUxpbmVKb2luXCIsXCJzdHJva2UtbWl0ZXJsaW1pdFwiOlwic3Ryb2tlTWl0ZXJMaW1pdFwiLFwic3Ryb2tlLW9wYWNpdHlcIjpcInN0cm9rZU9wYWNpdHlcIixcInN0cm9rZS13aWR0aFwiOlwic3Ryb2tlV2lkdGhcIixcInRleHQtZGVjb3JhdGlvblwiOlwidGV4dERlY29yYXRpb25cIixcInRleHQtYW5jaG9yXCI6XCJ0ZXh0QW5jaG9yXCIsb3BhY2l0eTpcIm9wYWNpdHlcIixcImNsaXAtcGF0aFwiOlwiY2xpcFBhdGhcIixcImNsaXAtcnVsZVwiOlwiY2xpcFJ1bGVcIixcInZlY3Rvci1lZmZlY3RcIjpcInN0cm9rZVVuaWZvcm1cIixcImltYWdlLXJlbmRlcmluZ1wiOlwiaW1hZ2VTbW9vdGhpbmdcIn0saD17c3Ryb2tlOlwic3Ryb2tlT3BhY2l0eVwiLGZpbGw6XCJmaWxsT3BhY2l0eVwifSxsPVwiZm9udC1zaXplXCIsYz1cImNsaXAtcGF0aFwiO2Z1bmN0aW9uIHUodCl7cmV0dXJuIHQgaW4gYT9hW3RdOnR9ZnVuY3Rpb24gZCh0LGkscixuKXt2YXIgYSxoPUFycmF5LmlzQXJyYXkoaSk7aWYoXCJmaWxsXCIhPT10JiZcInN0cm9rZVwiIT09dHx8XCJub25lXCIhPT1pKXtpZihcInN0cm9rZVVuaWZvcm1cIj09PXQpcmV0dXJuXCJub24tc2NhbGluZy1zdHJva2VcIj09PWk7aWYoXCJzdHJva2VEYXNoQXJyYXlcIj09PXQpaT1cIm5vbmVcIj09PWk/bnVsbDppLnJlcGxhY2UoLywvZyxcIiBcIikuc3BsaXQoL1xccysvKS5tYXAocGFyc2VGbG9hdCk7ZWxzZSBpZihcInRyYW5zZm9ybU1hdHJpeFwiPT09dClpPXImJnIudHJhbnNmb3JtTWF0cml4P28oci50cmFuc2Zvcm1NYXRyaXgsZS5wYXJzZVRyYW5zZm9ybUF0dHJpYnV0ZShpKSk6ZS5wYXJzZVRyYW5zZm9ybUF0dHJpYnV0ZShpKTtlbHNlIGlmKFwidmlzaWJsZVwiPT09dClpPVwibm9uZVwiIT09aSYmXCJoaWRkZW5cIiE9PWksciYmITE9PT1yLnZpc2libGUmJihpPSExKTtlbHNlIGlmKFwib3BhY2l0eVwiPT09dClpPXBhcnNlRmxvYXQoaSksciYmdm9pZCAwIT09ci5vcGFjaXR5JiYoaSo9ci5vcGFjaXR5KTtlbHNlIGlmKFwidGV4dEFuY2hvclwiPT09dClpPVwic3RhcnRcIj09PWk/XCJsZWZ0XCI6XCJlbmRcIj09PWk/XCJyaWdodFwiOlwiY2VudGVyXCI7ZWxzZSBpZihcImNoYXJTcGFjaW5nXCI9PT10KWE9cyhpLG4pL24qMWUzO2Vsc2UgaWYoXCJwYWludEZpcnN0XCI9PT10KXt2YXIgbD1pLmluZGV4T2YoXCJmaWxsXCIpLGM9aS5pbmRleE9mKFwic3Ryb2tlXCIpO2k9XCJmaWxsXCIsKGw+LTEmJmM+LTEmJmM8bHx8LTE9PT1sJiZjPi0xKSYmKGk9XCJzdHJva2VcIil9ZWxzZXtpZihcImhyZWZcIj09PXR8fFwieGxpbms6aHJlZlwiPT09dHx8XCJmb250XCI9PT10KXJldHVybiBpO2lmKFwiaW1hZ2VTbW9vdGhpbmdcIj09PXQpcmV0dXJuXCJvcHRpbWl6ZVF1YWxpdHlcIj09PWk7YT1oP2kubWFwKHMpOnMoaSxuKX19ZWxzZSBpPVwiXCI7cmV0dXJuIWgmJmlzTmFOKGEpP2k6YX1mdW5jdGlvbiBmKHQpe3JldHVybiBuZXcgUmVnRXhwKFwiXihcIit0LmpvaW4oXCJ8XCIpK1wiKVxcXFxiXCIsXCJpXCIpfWZ1bmN0aW9uIGcodCxlKXt2YXIgaSxyLG4scyxvPVtdO2ZvcihuPTAscz1lLmxlbmd0aDtuPHM7bisrKWk9ZVtuXSxyPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoaSksbz1vLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChyKSk7cmV0dXJuIG99ZnVuY3Rpb24gbSh0LGUpe3ZhciBpLHI9ITA7cmV0dXJuKGk9cCh0LGUucG9wKCkpKSYmZS5sZW5ndGgmJihyPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpLHI9ITA7dC5wYXJlbnROb2RlJiYxPT09dC5wYXJlbnROb2RlLm5vZGVUeXBlJiZlLmxlbmd0aDspciYmKGk9ZS5wb3AoKSkscj1wKHQ9dC5wYXJlbnROb2RlLGkpO3JldHVybiAwPT09ZS5sZW5ndGh9KHQsZSkpLGkmJnImJjA9PT1lLmxlbmd0aH1mdW5jdGlvbiBwKHQsZSl7dmFyIGkscixuPXQubm9kZU5hbWUscz10LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpLG89dC5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtpZihpPW5ldyBSZWdFeHAoXCJeXCIrbixcImlcIiksZT1lLnJlcGxhY2UoaSxcIlwiKSxvJiZlLmxlbmd0aCYmKGk9bmV3IFJlZ0V4cChcIiNcIitvK1wiKD8hW2EtekEtWlxcXFwtXSspXCIsXCJpXCIpLGU9ZS5yZXBsYWNlKGksXCJcIikpLHMmJmUubGVuZ3RoKWZvcihyPShzPXMuc3BsaXQoXCIgXCIpKS5sZW5ndGg7ci0tOylpPW5ldyBSZWdFeHAoXCJcXFxcLlwiK3Nbcl0rXCIoPyFbYS16QS1aXFxcXC1dKylcIixcImlcIiksZT1lLnJlcGxhY2UoaSxcIlwiKTtyZXR1cm4gMD09PWUubGVuZ3RofWZ1bmN0aW9uIHYodCxlKXt2YXIgaTtpZih0LmdldEVsZW1lbnRCeUlkJiYoaT10LmdldEVsZW1lbnRCeUlkKGUpKSxpKXJldHVybiBpO3ZhciByLG4scyxvPXQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpO2ZvcihuPTAscz1vLmxlbmd0aDtuPHM7bisrKWlmKGU9PT0ocj1vW25dKS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSlyZXR1cm4gcn1lLnN2Z1ZhbGlkVGFnTmFtZXNSZWdFeD1mKFtcInBhdGhcIixcImNpcmNsZVwiLFwicG9seWdvblwiLFwicG9seWxpbmVcIixcImVsbGlwc2VcIixcInJlY3RcIixcImxpbmVcIixcImltYWdlXCIsXCJ0ZXh0XCJdKSxlLnN2Z1ZpZXdCb3hFbGVtZW50c1JlZ0V4PWYoW1wic3ltYm9sXCIsXCJpbWFnZVwiLFwibWFya2VyXCIsXCJwYXR0ZXJuXCIsXCJ2aWV3XCIsXCJzdmdcIl0pLGUuc3ZnSW52YWxpZEFuY2VzdG9yc1JlZ0V4PWYoW1wicGF0dGVyblwiLFwiZGVmc1wiLFwic3ltYm9sXCIsXCJtZXRhZGF0YVwiLFwiY2xpcFBhdGhcIixcIm1hc2tcIixcImRlc2NcIl0pLGUuc3ZnVmFsaWRQYXJlbnRzUmVnRXg9ZihbXCJzeW1ib2xcIixcImdcIixcImFcIixcInN2Z1wiLFwiY2xpcFBhdGhcIixcImRlZnNcIl0pLGUuY3NzUnVsZXM9e30sZS5ncmFkaWVudERlZnM9e30sZS5jbGlwUGF0aHM9e30sZS5wYXJzZVRyYW5zZm9ybUF0dHJpYnV0ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxpLHIpe3Rbcl09TWF0aC50YW4oZS51dGlsLmRlZ3JlZXNUb1JhZGlhbnMoaVswXSkpfXZhciBpPWUuaU1hdHJpeCxyPWUucmVOdW0sbj1lLmNvbW1hV3NwLHM9XCIoPzooPzoobWF0cml4KVxcXFxzKlxcXFwoXFxcXHMqKFwiK3IrXCIpXCIrbitcIihcIityK1wiKVwiK24rXCIoXCIrcitcIilcIituK1wiKFwiK3IrXCIpXCIrbitcIihcIityK1wiKVwiK24rXCIoXCIrcitcIilcXFxccypcXFxcKSl8KD86KHRyYW5zbGF0ZSlcXFxccypcXFxcKFxcXFxzKihcIityK1wiKSg/OlwiK24rXCIoXCIrcitcIikpP1xcXFxzKlxcXFwpKXwoPzooc2NhbGUpXFxcXHMqXFxcXChcXFxccyooXCIrcitcIikoPzpcIituK1wiKFwiK3IrXCIpKT9cXFxccypcXFxcKSl8KD86KHJvdGF0ZSlcXFxccypcXFxcKFxcXFxzKihcIityK1wiKSg/OlwiK24rXCIoXCIrcitcIilcIituK1wiKFwiK3IrXCIpKT9cXFxccypcXFxcKSl8KD86KHNrZXdYKVxcXFxzKlxcXFwoXFxcXHMqKFwiK3IrXCIpXFxcXHMqXFxcXCkpfCg/Oihza2V3WSlcXFxccypcXFxcKFxcXFxzKihcIityK1wiKVxcXFxzKlxcXFwpKSlcIixvPW5ldyBSZWdFeHAoXCJeXFxcXHMqKD86KD86XCIrcytcIig/OlwiK24rXCIqXCIrcytcIikqKT8pXFxcXHMqJFwiKSxhPW5ldyBSZWdFeHAocyxcImdcIik7cmV0dXJuIGZ1bmN0aW9uKHIpe3ZhciBuPWkuY29uY2F0KCksaD1bXTtpZighcnx8ciYmIW8udGVzdChyKSlyZXR1cm4gbjtyLnJlcGxhY2UoYSwoZnVuY3Rpb24ocil7dmFyIG89bmV3IFJlZ0V4cChzKS5leGVjKHIpLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuISF0fSkpLGE9b1sxXSxsPW8uc2xpY2UoMikubWFwKHBhcnNlRmxvYXQpO3N3aXRjaChhKXtjYXNlXCJ0cmFuc2xhdGVcIjohZnVuY3Rpb24odCxlKXt0WzRdPWVbMF0sMj09PWUubGVuZ3RoJiYodFs1XT1lWzFdKX0obixsKTticmVhaztjYXNlXCJyb3RhdGVcIjpsWzBdPWUudXRpbC5kZWdyZWVzVG9SYWRpYW5zKGxbMF0pLGZ1bmN0aW9uKHQsaSl7dmFyIHI9ZS51dGlsLmNvcyhpWzBdKSxuPWUudXRpbC5zaW4oaVswXSkscz0wLG89MDszPT09aS5sZW5ndGgmJihzPWlbMV0sbz1pWzJdKSx0WzBdPXIsdFsxXT1uLHRbMl09LW4sdFszXT1yLHRbNF09cy0ocipzLW4qbyksdFs1XT1vLShuKnMrcipvKX0obixsKTticmVhaztjYXNlXCJzY2FsZVwiOiFmdW5jdGlvbih0LGUpe3ZhciBpPWVbMF0scj0yPT09ZS5sZW5ndGg/ZVsxXTplWzBdO3RbMF09aSx0WzNdPXJ9KG4sbCk7YnJlYWs7Y2FzZVwic2tld1hcIjp0KG4sbCwyKTticmVhaztjYXNlXCJza2V3WVwiOnQobixsLDEpO2JyZWFrO2Nhc2VcIm1hdHJpeFwiOm49bH1oLnB1c2gobi5jb25jYXQoKSksbj1pLmNvbmNhdCgpfSkpO2Zvcih2YXIgbD1oWzBdO2gubGVuZ3RoPjE7KWguc2hpZnQoKSxsPWUudXRpbC5tdWx0aXBseVRyYW5zZm9ybU1hdHJpY2VzKGwsaFswXSk7cmV0dXJuIGx9fSgpO3ZhciBfPW5ldyBSZWdFeHAoXCJeXFxcXHMqKFwiK2UucmVOdW0rXCIrKVxcXFxzKiw/XFxcXHMqKFwiK2UucmVOdW0rXCIrKVxcXFxzKiw/XFxcXHMqKFwiK2UucmVOdW0rXCIrKVxcXFxzKiw/XFxcXHMqKFwiK2UucmVOdW0rXCIrKVxcXFxzKiRcIik7ZnVuY3Rpb24geSh0KXtpZighZS5zdmdWaWV3Qm94RWxlbWVudHNSZWdFeC50ZXN0KHQubm9kZU5hbWUpKXJldHVybnt9O3ZhciBpLHIsbixvLGEsaCxsPXQuZ2V0QXR0cmlidXRlKFwidmlld0JveFwiKSxjPTEsdT0xLGQ9dC5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSxmPXQuZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpLGc9dC5nZXRBdHRyaWJ1dGUoXCJ4XCIpfHwwLG09dC5nZXRBdHRyaWJ1dGUoXCJ5XCIpfHwwLHA9dC5nZXRBdHRyaWJ1dGUoXCJwcmVzZXJ2ZUFzcGVjdFJhdGlvXCIpfHxcIlwiLHY9IWx8fCEobD1sLm1hdGNoKF8pKSx5PSFkfHwhZnx8XCIxMDAlXCI9PT1kfHxcIjEwMCVcIj09PWYsdz12JiZ5LGI9e30seD1cIlwiLEM9MCxTPTA7aWYoYi53aWR0aD0wLGIuaGVpZ2h0PTAsYi50b0JlUGFyc2VkPXcsdiYmKGd8fG0pJiZ0LnBhcmVudE5vZGUmJlwiI2RvY3VtZW50XCIhPT10LnBhcmVudE5vZGUubm9kZU5hbWUmJih4PVwiIHRyYW5zbGF0ZShcIitzKGcpK1wiIFwiK3MobSkrXCIpIFwiLGE9KHQuZ2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIpfHxcIlwiKSt4LHQuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsYSksdC5yZW1vdmVBdHRyaWJ1dGUoXCJ4XCIpLHQucmVtb3ZlQXR0cmlidXRlKFwieVwiKSksdylyZXR1cm4gYjtpZih2KXJldHVybiBiLndpZHRoPXMoZCksYi5oZWlnaHQ9cyhmKSxiO2lmKGk9LXBhcnNlRmxvYXQobFsxXSkscj0tcGFyc2VGbG9hdChsWzJdKSxuPXBhcnNlRmxvYXQobFszXSksbz1wYXJzZUZsb2F0KGxbNF0pLGIubWluWD1pLGIubWluWT1yLGIudmlld0JveFdpZHRoPW4sYi52aWV3Qm94SGVpZ2h0PW8seT8oYi53aWR0aD1uLGIuaGVpZ2h0PW8pOihiLndpZHRoPXMoZCksYi5oZWlnaHQ9cyhmKSxjPWIud2lkdGgvbix1PWIuaGVpZ2h0L28pLFwibm9uZVwiIT09KHA9ZS51dGlsLnBhcnNlUHJlc2VydmVBc3BlY3RSYXRpb0F0dHJpYnV0ZShwKSkuYWxpZ25YJiYoXCJtZWV0XCI9PT1wLm1lZXRPclNsaWNlJiYodT1jPWM+dT91OmMpLFwic2xpY2VcIj09PXAubWVldE9yU2xpY2UmJih1PWM9Yz51P2M6dSksQz1iLndpZHRoLW4qYyxTPWIuaGVpZ2h0LW8qYyxcIk1pZFwiPT09cC5hbGlnblgmJihDLz0yKSxcIk1pZFwiPT09cC5hbGlnblkmJihTLz0yKSxcIk1pblwiPT09cC5hbGlnblgmJihDPTApLFwiTWluXCI9PT1wLmFsaWduWSYmKFM9MCkpLDE9PT1jJiYxPT09dSYmMD09PWkmJjA9PT1yJiYwPT09ZyYmMD09PW0pcmV0dXJuIGI7aWYoKGd8fG0pJiZcIiNkb2N1bWVudFwiIT09dC5wYXJlbnROb2RlLm5vZGVOYW1lJiYoeD1cIiB0cmFuc2xhdGUoXCIrcyhnKStcIiBcIitzKG0pK1wiKSBcIiksYT14K1wiIG1hdHJpeChcIitjK1wiIDAgMCBcIit1K1wiIFwiKyhpKmMrQykrXCIgXCIrKHIqdStTKStcIikgXCIsXCJzdmdcIj09PXQubm9kZU5hbWUpe2ZvcihoPXQub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoZS5zdmdOUyxcImdcIik7dC5maXJzdENoaWxkOyloLmFwcGVuZENoaWxkKHQuZmlyc3RDaGlsZCk7dC5hcHBlbmRDaGlsZChoKX1lbHNlKGg9dCkucmVtb3ZlQXR0cmlidXRlKFwieFwiKSxoLnJlbW92ZUF0dHJpYnV0ZShcInlcIiksYT1oLmdldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiKSthO3JldHVybiBoLnNldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiLGEpLGJ9ZnVuY3Rpb24gdyh0LGUpe3ZhciBpPVwieGxpbms6aHJlZlwiLHI9dih0LGUuZ2V0QXR0cmlidXRlKGkpLnNsaWNlKDEpKTtpZihyJiZyLmdldEF0dHJpYnV0ZShpKSYmdyh0LHIpLFtcImdyYWRpZW50VHJhbnNmb3JtXCIsXCJ4MVwiLFwieDJcIixcInkxXCIsXCJ5MlwiLFwiZ3JhZGllbnRVbml0c1wiLFwiY3hcIixcImN5XCIsXCJyXCIsXCJmeFwiLFwiZnlcIl0uZm9yRWFjaCgoZnVuY3Rpb24odCl7ciYmIWUuaGFzQXR0cmlidXRlKHQpJiZyLmhhc0F0dHJpYnV0ZSh0KSYmZS5zZXRBdHRyaWJ1dGUodCxyLmdldEF0dHJpYnV0ZSh0KSl9KSksIWUuY2hpbGRyZW4ubGVuZ3RoKWZvcih2YXIgbj1yLmNsb25lTm9kZSghMCk7bi5maXJzdENoaWxkOyllLmFwcGVuZENoaWxkKG4uZmlyc3RDaGlsZCk7ZS5yZW1vdmVBdHRyaWJ1dGUoaSl9ZS5wYXJzZVNWR0RvY3VtZW50PWZ1bmN0aW9uKHQsaSxuLHMpe2lmKHQpeyFmdW5jdGlvbih0KXtmb3IodmFyIGk9Zyh0LFtcInVzZVwiLFwic3ZnOnVzZVwiXSkscj0wO2kubGVuZ3RoJiZyPGkubGVuZ3RoOyl7dmFyIG49aVtyXSxzPW4uZ2V0QXR0cmlidXRlKFwieGxpbms6aHJlZlwiKXx8bi5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpO2lmKG51bGw9PT1zKXJldHVybjt2YXIgbyxhLGgsbCxjPXMuc2xpY2UoMSksdT1uLmdldEF0dHJpYnV0ZShcInhcIil8fDAsZD1uLmdldEF0dHJpYnV0ZShcInlcIil8fDAsZj12KHQsYykuY2xvbmVOb2RlKCEwKSxtPShmLmdldEF0dHJpYnV0ZShcInRyYW5zZm9ybVwiKXx8XCJcIikrXCIgdHJhbnNsYXRlKFwiK3UrXCIsIFwiK2QrXCIpXCIscD1pLmxlbmd0aCxfPWUuc3ZnTlM7aWYoeShmKSwvXnN2ZyQvaS50ZXN0KGYubm9kZU5hbWUpKXt2YXIgdz1mLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKF8sXCJnXCIpO2ZvcihhPTAsbD0oaD1mLmF0dHJpYnV0ZXMpLmxlbmd0aDthPGw7YSsrKW89aC5pdGVtKGEpLHcuc2V0QXR0cmlidXRlTlMoXyxvLm5vZGVOYW1lLG8ubm9kZVZhbHVlKTtmb3IoO2YuZmlyc3RDaGlsZDspdy5hcHBlbmRDaGlsZChmLmZpcnN0Q2hpbGQpO2Y9d31mb3IoYT0wLGw9KGg9bi5hdHRyaWJ1dGVzKS5sZW5ndGg7YTxsO2ErKylcInhcIiE9PShvPWguaXRlbShhKSkubm9kZU5hbWUmJlwieVwiIT09by5ub2RlTmFtZSYmXCJ4bGluazpocmVmXCIhPT1vLm5vZGVOYW1lJiZcImhyZWZcIiE9PW8ubm9kZU5hbWUmJihcInRyYW5zZm9ybVwiPT09by5ub2RlTmFtZT9tPW8ubm9kZVZhbHVlK1wiIFwiK206Zi5zZXRBdHRyaWJ1dGUoby5ub2RlTmFtZSxvLm5vZGVWYWx1ZSkpO2Yuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsbSksZi5zZXRBdHRyaWJ1dGUoXCJpbnN0YW50aWF0ZWRfYnlfdXNlXCIsXCIxXCIpLGYucmVtb3ZlQXR0cmlidXRlKFwiaWRcIiksbi5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChmLG4pLGkubGVuZ3RoPT09cCYmcisrfX0odCk7dmFyIG8sYSxoPWUuT2JqZWN0Ll9fdWlkKyssbD15KHQpLGM9ZS51dGlsLnRvQXJyYXkodC5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikpO2lmKGwuY3Jvc3NPcmlnaW49cyYmcy5jcm9zc09yaWdpbixsLnN2Z1VpZD1oLDA9PT1jLmxlbmd0aCYmZS5pc0xpa2VseU5vZGUpe3ZhciB1PVtdO2ZvcihvPTAsYT0oYz10LnNlbGVjdE5vZGVzKCcvLypbbmFtZSguKSE9XCJzdmdcIl0nKSkubGVuZ3RoO288YTtvKyspdVtvXT1jW29dO2M9dX12YXIgZD1jLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIHkodCksZS5zdmdWYWxpZFRhZ05hbWVzUmVnRXgudGVzdCh0Lm5vZGVOYW1lLnJlcGxhY2UoXCJzdmc6XCIsXCJcIikpJiYhZnVuY3Rpb24odCxlKXtmb3IoO3QmJih0PXQucGFyZW50Tm9kZSk7KWlmKHQubm9kZU5hbWUmJmUudGVzdCh0Lm5vZGVOYW1lLnJlcGxhY2UoXCJzdmc6XCIsXCJcIikpJiYhdC5nZXRBdHRyaWJ1dGUoXCJpbnN0YW50aWF0ZWRfYnlfdXNlXCIpKXJldHVybiEwO3JldHVybiExfSh0LGUuc3ZnSW52YWxpZEFuY2VzdG9yc1JlZ0V4KX0pKTtpZighZHx8ZCYmIWQubGVuZ3RoKWkmJmkoW10se30pO2Vsc2V7dmFyIGY9e307Yy5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVyblwiY2xpcFBhdGhcIj09PXQubm9kZU5hbWUucmVwbGFjZShcInN2ZzpcIixcIlwiKX0pKS5mb3JFYWNoKChmdW5jdGlvbih0KXt2YXIgaT10LmdldEF0dHJpYnV0ZShcImlkXCIpO2ZbaV09ZS51dGlsLnRvQXJyYXkodC5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikpLmZpbHRlcigoZnVuY3Rpb24odCl7cmV0dXJuIGUuc3ZnVmFsaWRUYWdOYW1lc1JlZ0V4LnRlc3QodC5ub2RlTmFtZS5yZXBsYWNlKFwic3ZnOlwiLFwiXCIpKX0pKX0pKSxlLmdyYWRpZW50RGVmc1toXT1lLmdldEdyYWRpZW50RGVmcyh0KSxlLmNzc1J1bGVzW2hdPWUuZ2V0Q1NTUnVsZXModCksZS5jbGlwUGF0aHNbaF09ZixlLnBhcnNlRWxlbWVudHMoZCwoZnVuY3Rpb24odCxyKXtpJiYoaSh0LGwscixjKSxkZWxldGUgZS5ncmFkaWVudERlZnNbaF0sZGVsZXRlIGUuY3NzUnVsZXNbaF0sZGVsZXRlIGUuY2xpcFBhdGhzW2hdKX0pLHIobCksbixzKX19fTt2YXIgYj1uZXcgUmVnRXhwKFwiKG5vcm1hbHxpdGFsaWMpP1xcXFxzKihub3JtYWx8c21hbGwtY2Fwcyk/XFxcXHMqKG5vcm1hbHxib2xkfGJvbGRlcnxsaWdodGVyfDEwMHwyMDB8MzAwfDQwMHw1MDB8NjAwfDcwMHw4MDB8OTAwKT9cXFxccyooXCIrZS5yZU51bStcIig/OnB4fGNtfG1tfGVtfHB0fHBjfGluKSopKD86XFxcXC8obm9ybWFsfFwiK2UucmVOdW0rXCIpKT9cXFxccysoLiopXCIpO2koZSx7cGFyc2VGb250RGVjbGFyYXRpb246ZnVuY3Rpb24odCxlKXt2YXIgaT10Lm1hdGNoKGIpO2lmKGkpe3ZhciByPWlbMV0sbj1pWzNdLG89aVs0XSxhPWlbNV0saD1pWzZdO3ImJihlLmZvbnRTdHlsZT1yKSxuJiYoZS5mb250V2VpZ2h0PWlzTmFOKHBhcnNlRmxvYXQobikpP246cGFyc2VGbG9hdChuKSksbyYmKGUuZm9udFNpemU9cyhvKSksaCYmKGUuZm9udEZhbWlseT1oKSxhJiYoZS5saW5lSGVpZ2h0PVwibm9ybWFsXCI9PT1hPzE6YSl9fSxnZXRHcmFkaWVudERlZnM6ZnVuY3Rpb24odCl7dmFyIGUsaT1nKHQsW1wibGluZWFyR3JhZGllbnRcIixcInJhZGlhbEdyYWRpZW50XCIsXCJzdmc6bGluZWFyR3JhZGllbnRcIixcInN2ZzpyYWRpYWxHcmFkaWVudFwiXSkscj0wLG49e307Zm9yKHI9aS5sZW5ndGg7ci0tOykoZT1pW3JdKS5nZXRBdHRyaWJ1dGUoXCJ4bGluazpocmVmXCIpJiZ3KHQsZSksbltlLmdldEF0dHJpYnV0ZShcImlkXCIpXT1lO3JldHVybiBufSxwYXJzZUF0dHJpYnV0ZXM6ZnVuY3Rpb24odCxyLG8pe2lmKHQpe3ZhciBhLGYsZyxwPXt9O3ZvaWQgMD09PW8mJihvPXQuZ2V0QXR0cmlidXRlKFwic3ZnVWlkXCIpKSx0LnBhcmVudE5vZGUmJmUuc3ZnVmFsaWRQYXJlbnRzUmVnRXgudGVzdCh0LnBhcmVudE5vZGUubm9kZU5hbWUpJiYocD1lLnBhcnNlQXR0cmlidXRlcyh0LnBhcmVudE5vZGUscixvKSk7dmFyIHY9ci5yZWR1Y2UoKGZ1bmN0aW9uKGUsaSl7cmV0dXJuKGE9dC5nZXRBdHRyaWJ1dGUoaSkpJiYoZVtpXT1hKSxlfSkse30pLF89aShmdW5jdGlvbih0LGkpe3ZhciByPXt9O2Zvcih2YXIgbiBpbiBlLmNzc1J1bGVzW2ldKWlmKG0odCxuLnNwbGl0KFwiIFwiKSkpZm9yKHZhciBzIGluIGUuY3NzUnVsZXNbaV1bbl0pcltzXT1lLmNzc1J1bGVzW2ldW25dW3NdO3JldHVybiByfSh0LG8pLGUucGFyc2VTdHlsZUF0dHJpYnV0ZSh0KSk7dj1pKHYsXyksX1tjXSYmdC5zZXRBdHRyaWJ1dGUoYyxfW2NdKSxmPWc9cC5mb250U2l6ZXx8ZS5UZXh0LkRFRkFVTFRfU1ZHX0ZPTlRfU0laRSx2W2xdJiYodltsXT1mPXModltsXSxnKSk7dmFyIHksdyxiPXt9O2Zvcih2YXIgeCBpbiB2KXc9ZCh5PXUoeCksdlt4XSxwLGYpLGJbeV09dztiJiZiLmZvbnQmJmUucGFyc2VGb250RGVjbGFyYXRpb24oYi5mb250LGIpO3ZhciBDPWkocCxiKTtyZXR1cm4gZS5zdmdWYWxpZFBhcmVudHNSZWdFeC50ZXN0KHQubm9kZU5hbWUpP0M6ZnVuY3Rpb24odCl7Zm9yKHZhciBpIGluIGgpaWYodm9pZCAwIT09dFtoW2ldXSYmXCJcIiE9PXRbaV0pe2lmKHZvaWQgMD09PXRbaV0pe2lmKCFlLk9iamVjdC5wcm90b3R5cGVbaV0pY29udGludWU7dFtpXT1lLk9iamVjdC5wcm90b3R5cGVbaV19aWYoMCE9PXRbaV0uaW5kZXhPZihcInVybChcIikpe3ZhciByPW5ldyBlLkNvbG9yKHRbaV0pO3RbaV09ci5zZXRBbHBoYShuKHIuZ2V0QWxwaGEoKSp0W2hbaV1dLDIpKS50b1JnYmEoKX19cmV0dXJuIHR9KEMpfX0scGFyc2VFbGVtZW50czpmdW5jdGlvbih0LGkscixuLHMpe25ldyBlLkVsZW1lbnRzUGFyc2VyKHQsaSxyLG4scykucGFyc2UoKX0scGFyc2VTdHlsZUF0dHJpYnV0ZTpmdW5jdGlvbih0KXt2YXIgZT17fSxpPXQuZ2V0QXR0cmlidXRlKFwic3R5bGVcIik7cmV0dXJuIGk/KFwic3RyaW5nXCI9PXR5cGVvZiBpP2Z1bmN0aW9uKHQsZSl7dmFyIGkscjt0LnJlcGxhY2UoLztcXHMqJC8sXCJcIikuc3BsaXQoXCI7XCIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe3ZhciBuPXQuc3BsaXQoXCI6XCIpO2k9blswXS50cmltKCkudG9Mb3dlckNhc2UoKSxyPW5bMV0udHJpbSgpLGVbaV09cn0pKX0oaSxlKTpmdW5jdGlvbih0LGUpe3ZhciBpLHI7Zm9yKHZhciBuIGluIHQpdm9pZCAwIT09dFtuXSYmKGk9bi50b0xvd2VyQ2FzZSgpLHI9dFtuXSxlW2ldPXIpfShpLGUpLGUpOmV9LHBhcnNlUG9pbnRzQXR0cmlidXRlOmZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiBudWxsO3ZhciBlLGkscj1bXTtmb3IoZT0wLGk9KHQ9KHQ9dC5yZXBsYWNlKC8sL2csXCIgXCIpLnRyaW0oKSkuc3BsaXQoL1xccysvKSkubGVuZ3RoO2U8aTtlKz0yKXIucHVzaCh7eDpwYXJzZUZsb2F0KHRbZV0pLHk6cGFyc2VGbG9hdCh0W2UrMV0pfSk7cmV0dXJuIHJ9LGdldENTU1J1bGVzOmZ1bmN0aW9uKHQpe3ZhciBpLHIsbj10LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3R5bGVcIikscz17fTtmb3IoaT0wLHI9bi5sZW5ndGg7aTxyO2krKyl7dmFyIG89bltpXS50ZXh0Q29udGVudDtcIlwiIT09KG89by5yZXBsYWNlKC9cXC9cXCpbXFxzXFxTXSo/XFwqXFwvL2csXCJcIikpLnRyaW0oKSYmby5zcGxpdChcIn1cIikuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmltKCl9KSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7dmFyIG49dC5zcGxpdChcIntcIiksbz17fSxhPW5bMV0udHJpbSgpLnNwbGl0KFwiO1wiKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyaW0oKX0pKTtmb3IoaT0wLHI9YS5sZW5ndGg7aTxyO2krKyl7dmFyIGg9YVtpXS5zcGxpdChcIjpcIiksbD1oWzBdLnRyaW0oKSxjPWhbMV0udHJpbSgpO29bbF09Y30odD1uWzBdLnRyaW0oKSkuc3BsaXQoXCIsXCIpLmZvckVhY2goKGZ1bmN0aW9uKHQpe1wiXCIhPT0odD10LnJlcGxhY2UoL15zdmcvaSxcIlwiKS50cmltKCkpJiYoc1t0XT9lLnV0aWwub2JqZWN0LmV4dGVuZChzW3RdLG8pOnNbdF09ZS51dGlsLm9iamVjdC5jbG9uZShvKSl9KSl9KSl9cmV0dXJuIHN9LGxvYWRTVkdGcm9tVVJMOmZ1bmN0aW9uKHQsaSxyLG4pe3Q9dC5yZXBsYWNlKC9eXFxuXFxzKi8sXCJcIikudHJpbSgpLG5ldyBlLnV0aWwucmVxdWVzdCh0LHttZXRob2Q6XCJnZXRcIixvbkNvbXBsZXRlOmZ1bmN0aW9uKHQpe3ZhciBzPXQucmVzcG9uc2VYTUw7aWYoIXN8fCFzLmRvY3VtZW50RWxlbWVudClyZXR1cm4gaSYmaShudWxsKSwhMTtlLnBhcnNlU1ZHRG9jdW1lbnQocy5kb2N1bWVudEVsZW1lbnQsKGZ1bmN0aW9uKHQsZSxyLG4pe2kmJmkodCxlLHIsbil9KSxyLG4pfX0pfSxsb2FkU1ZHRnJvbVN0cmluZzpmdW5jdGlvbih0LGkscixuKXt2YXIgcz0obmV3IGUud2luZG93LkRPTVBhcnNlcikucGFyc2VGcm9tU3RyaW5nKHQudHJpbSgpLFwidGV4dC94bWxcIik7ZS5wYXJzZVNWR0RvY3VtZW50KHMuZG9jdW1lbnRFbGVtZW50LChmdW5jdGlvbih0LGUscixuKXtpKHQsZSxyLG4pfSkscixuKX19KX0oZSksUy5FbGVtZW50c1BhcnNlcj1mdW5jdGlvbih0LGUsaSxyLG4scyl7dGhpcy5lbGVtZW50cz10LHRoaXMuY2FsbGJhY2s9ZSx0aGlzLm9wdGlvbnM9aSx0aGlzLnJldml2ZXI9cix0aGlzLnN2Z1VpZD1pJiZpLnN2Z1VpZHx8MCx0aGlzLnBhcnNpbmdPcHRpb25zPW4sdGhpcy5yZWdleFVybD0vXnVybFxcKFsnXCJdPyMoW14nXCJdKylbJ1wiXT9cXCkvZyx0aGlzLmRvYz1zfSwocD1TLkVsZW1lbnRzUGFyc2VyLnByb3RvdHlwZSkucGFyc2U9ZnVuY3Rpb24oKXt0aGlzLmluc3RhbmNlcz1uZXcgQXJyYXkodGhpcy5lbGVtZW50cy5sZW5ndGgpLHRoaXMubnVtRWxlbWVudHM9dGhpcy5lbGVtZW50cy5sZW5ndGgsdGhpcy5jcmVhdGVPYmplY3RzKCl9LHAuY3JlYXRlT2JqZWN0cz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5lbGVtZW50cy5mb3JFYWNoKChmdW5jdGlvbihlLGkpe2Uuc2V0QXR0cmlidXRlKFwic3ZnVWlkXCIsdC5zdmdVaWQpLHQuY3JlYXRlT2JqZWN0KGUsaSl9KSl9LHAuZmluZFRhZz1mdW5jdGlvbih0KXtyZXR1cm4gU1tTLnV0aWwuc3RyaW5nLmNhcGl0YWxpemUodC50YWdOYW1lLnJlcGxhY2UoXCJzdmc6XCIsXCJcIikpXX0scC5jcmVhdGVPYmplY3Q9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmZpbmRUYWcodCk7aWYoaSYmaS5mcm9tRWxlbWVudCl0cnl7aS5mcm9tRWxlbWVudCh0LHRoaXMuY3JlYXRlQ2FsbGJhY2soZSx0KSx0aGlzLm9wdGlvbnMpfWNhdGNoKHQpe1MubG9nKHQpfWVsc2UgdGhpcy5jaGVja0lmRG9uZSgpfSxwLmNyZWF0ZUNhbGxiYWNrPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcztyZXR1cm4gZnVuY3Rpb24ocil7dmFyIG47aS5yZXNvbHZlR3JhZGllbnQocixlLFwiZmlsbFwiKSxpLnJlc29sdmVHcmFkaWVudChyLGUsXCJzdHJva2VcIiksciBpbnN0YW5jZW9mIFMuSW1hZ2UmJnIuX29yaWdpbmFsRWxlbWVudCYmKG49ci5wYXJzZVByZXNlcnZlQXNwZWN0UmF0aW9BdHRyaWJ1dGUoZSkpLHIuX3JlbW92ZVRyYW5zZm9ybU1hdHJpeChuKSxpLnJlc29sdmVDbGlwUGF0aChyLGUpLGkucmV2aXZlciYmaS5yZXZpdmVyKGUsciksaS5pbnN0YW5jZXNbdF09cixpLmNoZWNrSWZEb25lKCl9fSxwLmV4dHJhY3RQcm9wZXJ0eURlZmluaXRpb249ZnVuY3Rpb24odCxlLGkpe3ZhciByPXRbZV0sbj10aGlzLnJlZ2V4VXJsO2lmKG4udGVzdChyKSl7bi5sYXN0SW5kZXg9MDt2YXIgcz1uLmV4ZWMocilbMV07cmV0dXJuIG4ubGFzdEluZGV4PTAsU1tpXVt0aGlzLnN2Z1VpZF1bc119fSxwLnJlc29sdmVHcmFkaWVudD1mdW5jdGlvbih0LGUsaSl7dmFyIHI9dGhpcy5leHRyYWN0UHJvcGVydHlEZWZpbml0aW9uKHQsaSxcImdyYWRpZW50RGVmc1wiKTtpZihyKXt2YXIgbj1lLmdldEF0dHJpYnV0ZShpK1wiLW9wYWNpdHlcIikscz1TLkdyYWRpZW50LmZyb21FbGVtZW50KHIsdCxuLHRoaXMub3B0aW9ucyk7dC5zZXQoaSxzKX19LHAuY3JlYXRlQ2xpcFBhdGhDYWxsYmFjaz1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbih0KXt0Ll9yZW1vdmVUcmFuc2Zvcm1NYXRyaXgoKSx0LmZpbGxSdWxlPXQuY2xpcFJ1bGUsZS5wdXNoKHQpfX0scC5yZXNvbHZlQ2xpcFBhdGg9ZnVuY3Rpb24odCxlKXt2YXIgaSxyLG4scyxvPXRoaXMuZXh0cmFjdFByb3BlcnR5RGVmaW5pdGlvbih0LFwiY2xpcFBhdGhcIixcImNsaXBQYXRoc1wiKTtpZihvKXtuPVtdLHI9Uy51dGlsLmludmVydFRyYW5zZm9ybSh0LmNhbGNUcmFuc2Zvcm1NYXRyaXgoKSk7Zm9yKHZhciBhPW9bMF0ucGFyZW50Tm9kZSxoPWU7aC5wYXJlbnROb2RlJiZoLmdldEF0dHJpYnV0ZShcImNsaXAtcGF0aFwiKSE9PXQuY2xpcFBhdGg7KWg9aC5wYXJlbnROb2RlO2gucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChhKTtmb3IodmFyIGw9MDtsPG8ubGVuZ3RoO2wrKylpPW9bbF0sdGhpcy5maW5kVGFnKGkpLmZyb21FbGVtZW50KGksdGhpcy5jcmVhdGVDbGlwUGF0aENhbGxiYWNrKHQsbiksdGhpcy5vcHRpb25zKTtvPTE9PT1uLmxlbmd0aD9uWzBdOm5ldyBTLkdyb3VwKG4pLHM9Uy51dGlsLm11bHRpcGx5VHJhbnNmb3JtTWF0cmljZXMocixvLmNhbGNUcmFuc2Zvcm1NYXRyaXgoKSksby5jbGlwUGF0aCYmdGhpcy5yZXNvbHZlQ2xpcFBhdGgobyxoKTt2YXIgYz1TLnV0aWwucXJEZWNvbXBvc2Uocyk7by5mbGlwWD0hMSxvLmZsaXBZPSExLG8uc2V0KFwic2NhbGVYXCIsYy5zY2FsZVgpLG8uc2V0KFwic2NhbGVZXCIsYy5zY2FsZVkpLG8uYW5nbGU9Yy5hbmdsZSxvLnNrZXdYPWMuc2tld1gsby5za2V3WT0wLG8uc2V0UG9zaXRpb25CeU9yaWdpbih7eDpjLnRyYW5zbGF0ZVgseTpjLnRyYW5zbGF0ZVl9LFwiY2VudGVyXCIsXCJjZW50ZXJcIiksdC5jbGlwUGF0aD1vfWVsc2UgZGVsZXRlIHQuY2xpcFBhdGh9LHAuY2hlY2tJZkRvbmU9ZnVuY3Rpb24oKXswPT0tLXRoaXMubnVtRWxlbWVudHMmJih0aGlzLmluc3RhbmNlcz10aGlzLmluc3RhbmNlcy5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT10fSkpLHRoaXMuY2FsbGJhY2sodGhpcy5pbnN0YW5jZXMsdGhpcy5lbGVtZW50cykpfSxmdW5jdGlvbih0KXt2YXIgZT10LmZhYnJpY3x8KHQuZmFicmljPXt9KTtmdW5jdGlvbiBpKHQsZSl7dGhpcy54PXQsdGhpcy55PWV9ZS5Qb2ludD9lLndhcm4oXCJmYWJyaWMuUG9pbnQgaXMgYWxyZWFkeSBkZWZpbmVkXCIpOihlLlBvaW50PWksaS5wcm90b3R5cGU9e3R5cGU6XCJwb2ludFwiLGNvbnN0cnVjdG9yOmksYWRkOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgaSh0aGlzLngrdC54LHRoaXMueSt0LnkpfSxhZGRFcXVhbHM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueCs9dC54LHRoaXMueSs9dC55LHRoaXN9LHNjYWxhckFkZDpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGkodGhpcy54K3QsdGhpcy55K3QpfSxzY2FsYXJBZGRFcXVhbHM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueCs9dCx0aGlzLnkrPXQsdGhpc30sc3VidHJhY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBpKHRoaXMueC10LngsdGhpcy55LXQueSl9LHN1YnRyYWN0RXF1YWxzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngtPXQueCx0aGlzLnktPXQueSx0aGlzfSxzY2FsYXJTdWJ0cmFjdDpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGkodGhpcy54LXQsdGhpcy55LXQpfSxzY2FsYXJTdWJ0cmFjdEVxdWFsczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54LT10LHRoaXMueS09dCx0aGlzfSxtdWx0aXBseTpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IGkodGhpcy54KnQsdGhpcy55KnQpfSxtdWx0aXBseUVxdWFsczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54Kj10LHRoaXMueSo9dCx0aGlzfSxkaXZpZGU6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBpKHRoaXMueC90LHRoaXMueS90KX0sZGl2aWRlRXF1YWxzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngvPXQsdGhpcy55Lz10LHRoaXN9LGVxOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLng9PT10LngmJnRoaXMueT09PXQueX0sbHQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueDx0LngmJnRoaXMueTx0Lnl9LGx0ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PD10LngmJnRoaXMueTw9dC55fSxndDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PnQueCYmdGhpcy55PnQueX0sZ3RlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLng+PXQueCYmdGhpcy55Pj10Lnl9LGxlcnA6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9LjUpLGU9TWF0aC5tYXgoTWF0aC5taW4oMSxlKSwwKSxuZXcgaSh0aGlzLngrKHQueC10aGlzLngpKmUsdGhpcy55Kyh0LnktdGhpcy55KSplKX0sZGlzdGFuY2VGcm9tOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMueC10LngsaT10aGlzLnktdC55O3JldHVybiBNYXRoLnNxcnQoZSplK2kqaSl9LG1pZFBvaW50RnJvbTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5sZXJwKHQpfSxtaW46ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBpKE1hdGgubWluKHRoaXMueCx0LngpLE1hdGgubWluKHRoaXMueSx0LnkpKX0sbWF4OmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgaShNYXRoLm1heCh0aGlzLngsdC54KSxNYXRoLm1heCh0aGlzLnksdC55KSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueCtcIixcIit0aGlzLnl9LHNldFhZOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMueD10LHRoaXMueT1lLHRoaXN9LHNldFg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueD10LHRoaXN9LHNldFk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueT10LHRoaXN9LHNldEZyb21Qb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54PXQueCx0aGlzLnk9dC55LHRoaXN9LHN3YXA6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy54LGk9dGhpcy55O3RoaXMueD10LngsdGhpcy55PXQueSx0Lng9ZSx0Lnk9aX0sY2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGkodGhpcy54LHRoaXMueSl9fSl9KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljfHwodC5mYWJyaWM9e30pO2Z1bmN0aW9uIGkodCl7dGhpcy5zdGF0dXM9dCx0aGlzLnBvaW50cz1bXX1lLkludGVyc2VjdGlvbj9lLndhcm4oXCJmYWJyaWMuSW50ZXJzZWN0aW9uIGlzIGFscmVhZHkgZGVmaW5lZFwiKTooZS5JbnRlcnNlY3Rpb249aSxlLkludGVyc2VjdGlvbi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmksYXBwZW5kUG9pbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucG9pbnRzLnB1c2godCksdGhpc30sYXBwZW5kUG9pbnRzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnBvaW50cz10aGlzLnBvaW50cy5jb25jYXQodCksdGhpc319LGUuSW50ZXJzZWN0aW9uLmludGVyc2VjdExpbmVMaW5lPWZ1bmN0aW9uKHQscixuLHMpe3ZhciBvLGE9KHMueC1uLngpKih0Lnktbi55KS0ocy55LW4ueSkqKHQueC1uLngpLGg9KHIueC10LngpKih0Lnktbi55KS0oci55LXQueSkqKHQueC1uLngpLGw9KHMueS1uLnkpKihyLngtdC54KS0ocy54LW4ueCkqKHIueS10LnkpO2lmKDAhPT1sKXt2YXIgYz1hL2wsdT1oL2w7MDw9YyYmYzw9MSYmMDw9dSYmdTw9MT8obz1uZXcgaShcIkludGVyc2VjdGlvblwiKSkuYXBwZW5kUG9pbnQobmV3IGUuUG9pbnQodC54K2MqKHIueC10LngpLHQueStjKihyLnktdC55KSkpOm89bmV3IGl9ZWxzZSBvPW5ldyBpKDA9PT1hfHwwPT09aD9cIkNvaW5jaWRlbnRcIjpcIlBhcmFsbGVsXCIpO3JldHVybiBvfSxlLkludGVyc2VjdGlvbi5pbnRlcnNlY3RMaW5lUG9seWdvbj1mdW5jdGlvbih0LGUscil7dmFyIG4scyxvLGEsaD1uZXcgaSxsPXIubGVuZ3RoO2ZvcihhPTA7YTxsO2ErKyluPXJbYV0scz1yWyhhKzEpJWxdLG89aS5pbnRlcnNlY3RMaW5lTGluZSh0LGUsbixzKSxoLmFwcGVuZFBvaW50cyhvLnBvaW50cyk7cmV0dXJuIGgucG9pbnRzLmxlbmd0aD4wJiYoaC5zdGF0dXM9XCJJbnRlcnNlY3Rpb25cIiksaH0sZS5JbnRlcnNlY3Rpb24uaW50ZXJzZWN0UG9seWdvblBvbHlnb249ZnVuY3Rpb24odCxlKXt2YXIgcixuPW5ldyBpLHM9dC5sZW5ndGg7Zm9yKHI9MDtyPHM7cisrKXt2YXIgbz10W3JdLGE9dFsocisxKSVzXSxoPWkuaW50ZXJzZWN0TGluZVBvbHlnb24obyxhLGUpO24uYXBwZW5kUG9pbnRzKGgucG9pbnRzKX1yZXR1cm4gbi5wb2ludHMubGVuZ3RoPjAmJihuLnN0YXR1cz1cIkludGVyc2VjdGlvblwiKSxufSxlLkludGVyc2VjdGlvbi5pbnRlcnNlY3RQb2x5Z29uUmVjdGFuZ2xlPWZ1bmN0aW9uKHQscixuKXt2YXIgcz1yLm1pbihuKSxvPXIubWF4KG4pLGE9bmV3IGUuUG9pbnQoby54LHMueSksaD1uZXcgZS5Qb2ludChzLngsby55KSxsPWkuaW50ZXJzZWN0TGluZVBvbHlnb24ocyxhLHQpLGM9aS5pbnRlcnNlY3RMaW5lUG9seWdvbihhLG8sdCksdT1pLmludGVyc2VjdExpbmVQb2x5Z29uKG8saCx0KSxkPWkuaW50ZXJzZWN0TGluZVBvbHlnb24oaCxzLHQpLGY9bmV3IGk7cmV0dXJuIGYuYXBwZW5kUG9pbnRzKGwucG9pbnRzKSxmLmFwcGVuZFBvaW50cyhjLnBvaW50cyksZi5hcHBlbmRQb2ludHModS5wb2ludHMpLGYuYXBwZW5kUG9pbnRzKGQucG9pbnRzKSxmLnBvaW50cy5sZW5ndGg+MCYmKGYuc3RhdHVzPVwiSW50ZXJzZWN0aW9uXCIpLGZ9KX0oZSksZnVuY3Rpb24odCl7dmFyIGU9dC5mYWJyaWN8fCh0LmZhYnJpYz17fSk7ZnVuY3Rpb24gaSh0KXt0P3RoaXMuX3RyeVBhcnNpbmdDb2xvcih0KTp0aGlzLnNldFNvdXJjZShbMCwwLDAsMV0pfWZ1bmN0aW9uIHIodCxlLGkpe3JldHVybiBpPDAmJihpKz0xKSxpPjEmJihpLT0xKSxpPDEvNj90KzYqKGUtdCkqaTppPC41P2U6aTwyLzM/dCsoZS10KSooMi8zLWkpKjY6dH1lLkNvbG9yP2Uud2FybihcImZhYnJpYy5Db2xvciBpcyBhbHJlYWR5IGRlZmluZWQuXCIpOihlLkNvbG9yPWksZS5Db2xvci5wcm90b3R5cGU9e190cnlQYXJzaW5nQ29sb3I6ZnVuY3Rpb24odCl7dmFyIGU7dCBpbiBpLmNvbG9yTmFtZU1hcCYmKHQ9aS5jb2xvck5hbWVNYXBbdF0pLFwidHJhbnNwYXJlbnRcIj09PXQmJihlPVsyNTUsMjU1LDI1NSwwXSksZXx8KGU9aS5zb3VyY2VGcm9tSGV4KHQpKSxlfHwoZT1pLnNvdXJjZUZyb21SZ2IodCkpLGV8fChlPWkuc291cmNlRnJvbUhzbCh0KSksZXx8KGU9WzAsMCwwLDFdKSxlJiZ0aGlzLnNldFNvdXJjZShlKX0sX3JnYlRvSHNsOmZ1bmN0aW9uKHQsaSxyKXt0Lz0yNTUsaS89MjU1LHIvPTI1NTt2YXIgbixzLG8sYT1lLnV0aWwuYXJyYXkubWF4KFt0LGkscl0pLGg9ZS51dGlsLmFycmF5Lm1pbihbdCxpLHJdKTtpZihvPShhK2gpLzIsYT09PWgpbj1zPTA7ZWxzZXt2YXIgbD1hLWg7c3dpdGNoKHM9bz4uNT9sLygyLWEtaCk6bC8oYStoKSxhKXtjYXNlIHQ6bj0oaS1yKS9sKyhpPHI/NjowKTticmVhaztjYXNlIGk6bj0oci10KS9sKzI7YnJlYWs7Y2FzZSByOm49KHQtaSkvbCs0fW4vPTZ9cmV0dXJuW01hdGgucm91bmQoMzYwKm4pLE1hdGgucm91bmQoMTAwKnMpLE1hdGgucm91bmQoMTAwKm8pXX0sZ2V0U291cmNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXJjZX0sc2V0U291cmNlOmZ1bmN0aW9uKHQpe3RoaXMuX3NvdXJjZT10fSx0b1JnYjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0U291cmNlKCk7cmV0dXJuXCJyZ2IoXCIrdFswXStcIixcIit0WzFdK1wiLFwiK3RbMl0rXCIpXCJ9LHRvUmdiYTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0U291cmNlKCk7cmV0dXJuXCJyZ2JhKFwiK3RbMF0rXCIsXCIrdFsxXStcIixcIit0WzJdK1wiLFwiK3RbM10rXCIpXCJ9LHRvSHNsOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRTb3VyY2UoKSxlPXRoaXMuX3JnYlRvSHNsKHRbMF0sdFsxXSx0WzJdKTtyZXR1cm5cImhzbChcIitlWzBdK1wiLFwiK2VbMV0rXCIlLFwiK2VbMl0rXCIlKVwifSx0b0hzbGE6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFNvdXJjZSgpLGU9dGhpcy5fcmdiVG9Ic2wodFswXSx0WzFdLHRbMl0pO3JldHVyblwiaHNsYShcIitlWzBdK1wiLFwiK2VbMV0rXCIlLFwiK2VbMl0rXCIlLFwiK3RbM10rXCIpXCJ9LHRvSGV4OmZ1bmN0aW9uKCl7dmFyIHQsZSxpLHI9dGhpcy5nZXRTb3VyY2UoKTtyZXR1cm4gdD0xPT09KHQ9clswXS50b1N0cmluZygxNikpLmxlbmd0aD9cIjBcIit0OnQsZT0xPT09KGU9clsxXS50b1N0cmluZygxNikpLmxlbmd0aD9cIjBcIitlOmUsaT0xPT09KGk9clsyXS50b1N0cmluZygxNikpLmxlbmd0aD9cIjBcIitpOmksdC50b1VwcGVyQ2FzZSgpK2UudG9VcHBlckNhc2UoKStpLnRvVXBwZXJDYXNlKCl9LHRvSGV4YTpmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5nZXRTb3VyY2UoKTtyZXR1cm4gdD0xPT09KHQ9KHQ9TWF0aC5yb3VuZCgyNTUqZVszXSkpLnRvU3RyaW5nKDE2KSkubGVuZ3RoP1wiMFwiK3Q6dCx0aGlzLnRvSGV4KCkrdC50b1VwcGVyQ2FzZSgpfSxnZXRBbHBoYTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFNvdXJjZSgpWzNdfSxzZXRBbHBoYTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFNvdXJjZSgpO3JldHVybiBlWzNdPXQsdGhpcy5zZXRTb3VyY2UoZSksdGhpc30sdG9HcmF5c2NhbGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFNvdXJjZSgpLGU9cGFyc2VJbnQoKC4zKnRbMF0rLjU5KnRbMV0rLjExKnRbMl0pLnRvRml4ZWQoMCksMTApLGk9dFszXTtyZXR1cm4gdGhpcy5zZXRTb3VyY2UoW2UsZSxlLGldKSx0aGlzfSx0b0JsYWNrV2hpdGU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRTb3VyY2UoKSxpPSguMyplWzBdKy41OSplWzFdKy4xMSplWzJdKS50b0ZpeGVkKDApLHI9ZVszXTtyZXR1cm4gdD10fHwxMjcsaT1OdW1iZXIoaSk8TnVtYmVyKHQpPzA6MjU1LHRoaXMuc2V0U291cmNlKFtpLGksaSxyXSksdGhpc30sb3ZlcmxheVdpdGg6ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIGl8fCh0PW5ldyBpKHQpKTt2YXIgZSxyPVtdLG49dGhpcy5nZXRBbHBoYSgpLHM9dGhpcy5nZXRTb3VyY2UoKSxvPXQuZ2V0U291cmNlKCk7Zm9yKGU9MDtlPDM7ZSsrKXIucHVzaChNYXRoLnJvdW5kKC41KnNbZV0rLjUqb1tlXSkpO3JldHVybiByWzNdPW4sdGhpcy5zZXRTb3VyY2UociksdGhpc319LGUuQ29sb3IucmVSR0JhPS9ecmdiYT9cXChcXHMqKFxcZHsxLDN9KD86XFwuXFxkKyk/XFwlPylcXHMqLFxccyooXFxkezEsM30oPzpcXC5cXGQrKT9cXCU/KVxccyosXFxzKihcXGR7MSwzfSg/OlxcLlxcZCspP1xcJT8pXFxzKig/OlxccyosXFxzKigoPzpcXGQqXFwuP1xcZCspPylcXHMqKT9cXCkkL2ksZS5Db2xvci5yZUhTTGE9L15oc2xhP1xcKFxccyooXFxkezEsM30pXFxzKixcXHMqKFxcZHsxLDN9XFwlKVxccyosXFxzKihcXGR7MSwzfVxcJSlcXHMqKD86XFxzKixcXHMqKFxcZCsoPzpcXC5cXGQrKT8pXFxzKik/XFwpJC9pLGUuQ29sb3IucmVIZXg9L14jPyhbMC05YS1mXXs4fXxbMC05YS1mXXs2fXxbMC05YS1mXXs0fXxbMC05YS1mXXszfSkkL2ksZS5Db2xvci5jb2xvck5hbWVNYXA9e2FsaWNlYmx1ZTpcIiNGMEY4RkZcIixhbnRpcXVld2hpdGU6XCIjRkFFQkQ3XCIsYXF1YTpcIiMwMEZGRkZcIixhcXVhbWFyaW5lOlwiIzdGRkZENFwiLGF6dXJlOlwiI0YwRkZGRlwiLGJlaWdlOlwiI0Y1RjVEQ1wiLGJpc3F1ZTpcIiNGRkU0QzRcIixibGFjazpcIiMwMDAwMDBcIixibGFuY2hlZGFsbW9uZDpcIiNGRkVCQ0RcIixibHVlOlwiIzAwMDBGRlwiLGJsdWV2aW9sZXQ6XCIjOEEyQkUyXCIsYnJvd246XCIjQTUyQTJBXCIsYnVybHl3b29kOlwiI0RFQjg4N1wiLGNhZGV0Ymx1ZTpcIiM1RjlFQTBcIixjaGFydHJldXNlOlwiIzdGRkYwMFwiLGNob2NvbGF0ZTpcIiNEMjY5MUVcIixjb3JhbDpcIiNGRjdGNTBcIixjb3JuZmxvd2VyYmx1ZTpcIiM2NDk1RURcIixjb3Juc2lsazpcIiNGRkY4RENcIixjcmltc29uOlwiI0RDMTQzQ1wiLGN5YW46XCIjMDBGRkZGXCIsZGFya2JsdWU6XCIjMDAwMDhCXCIsZGFya2N5YW46XCIjMDA4QjhCXCIsZGFya2dvbGRlbnJvZDpcIiNCODg2MEJcIixkYXJrZ3JheTpcIiNBOUE5QTlcIixkYXJrZ3JleTpcIiNBOUE5QTlcIixkYXJrZ3JlZW46XCIjMDA2NDAwXCIsZGFya2toYWtpOlwiI0JEQjc2QlwiLGRhcmttYWdlbnRhOlwiIzhCMDA4QlwiLGRhcmtvbGl2ZWdyZWVuOlwiIzU1NkIyRlwiLGRhcmtvcmFuZ2U6XCIjRkY4QzAwXCIsZGFya29yY2hpZDpcIiM5OTMyQ0NcIixkYXJrcmVkOlwiIzhCMDAwMFwiLGRhcmtzYWxtb246XCIjRTk5NjdBXCIsZGFya3NlYWdyZWVuOlwiIzhGQkM4RlwiLGRhcmtzbGF0ZWJsdWU6XCIjNDgzRDhCXCIsZGFya3NsYXRlZ3JheTpcIiMyRjRGNEZcIixkYXJrc2xhdGVncmV5OlwiIzJGNEY0RlwiLGRhcmt0dXJxdW9pc2U6XCIjMDBDRUQxXCIsZGFya3Zpb2xldDpcIiM5NDAwRDNcIixkZWVwcGluazpcIiNGRjE0OTNcIixkZWVwc2t5Ymx1ZTpcIiMwMEJGRkZcIixkaW1ncmF5OlwiIzY5Njk2OVwiLGRpbWdyZXk6XCIjNjk2OTY5XCIsZG9kZ2VyYmx1ZTpcIiMxRTkwRkZcIixmaXJlYnJpY2s6XCIjQjIyMjIyXCIsZmxvcmFsd2hpdGU6XCIjRkZGQUYwXCIsZm9yZXN0Z3JlZW46XCIjMjI4QjIyXCIsZnVjaHNpYTpcIiNGRjAwRkZcIixnYWluc2Jvcm86XCIjRENEQ0RDXCIsZ2hvc3R3aGl0ZTpcIiNGOEY4RkZcIixnb2xkOlwiI0ZGRDcwMFwiLGdvbGRlbnJvZDpcIiNEQUE1MjBcIixncmF5OlwiIzgwODA4MFwiLGdyZXk6XCIjODA4MDgwXCIsZ3JlZW46XCIjMDA4MDAwXCIsZ3JlZW55ZWxsb3c6XCIjQURGRjJGXCIsaG9uZXlkZXc6XCIjRjBGRkYwXCIsaG90cGluazpcIiNGRjY5QjRcIixpbmRpYW5yZWQ6XCIjQ0Q1QzVDXCIsaW5kaWdvOlwiIzRCMDA4MlwiLGl2b3J5OlwiI0ZGRkZGMFwiLGtoYWtpOlwiI0YwRTY4Q1wiLGxhdmVuZGVyOlwiI0U2RTZGQVwiLGxhdmVuZGVyYmx1c2g6XCIjRkZGMEY1XCIsbGF3bmdyZWVuOlwiIzdDRkMwMFwiLGxlbW9uY2hpZmZvbjpcIiNGRkZBQ0RcIixsaWdodGJsdWU6XCIjQUREOEU2XCIsbGlnaHRjb3JhbDpcIiNGMDgwODBcIixsaWdodGN5YW46XCIjRTBGRkZGXCIsbGlnaHRnb2xkZW5yb2R5ZWxsb3c6XCIjRkFGQUQyXCIsbGlnaHRncmF5OlwiI0QzRDNEM1wiLGxpZ2h0Z3JleTpcIiNEM0QzRDNcIixsaWdodGdyZWVuOlwiIzkwRUU5MFwiLGxpZ2h0cGluazpcIiNGRkI2QzFcIixsaWdodHNhbG1vbjpcIiNGRkEwN0FcIixsaWdodHNlYWdyZWVuOlwiIzIwQjJBQVwiLGxpZ2h0c2t5Ymx1ZTpcIiM4N0NFRkFcIixsaWdodHNsYXRlZ3JheTpcIiM3Nzg4OTlcIixsaWdodHNsYXRlZ3JleTpcIiM3Nzg4OTlcIixsaWdodHN0ZWVsYmx1ZTpcIiNCMEM0REVcIixsaWdodHllbGxvdzpcIiNGRkZGRTBcIixsaW1lOlwiIzAwRkYwMFwiLGxpbWVncmVlbjpcIiMzMkNEMzJcIixsaW5lbjpcIiNGQUYwRTZcIixtYWdlbnRhOlwiI0ZGMDBGRlwiLG1hcm9vbjpcIiM4MDAwMDBcIixtZWRpdW1hcXVhbWFyaW5lOlwiIzY2Q0RBQVwiLG1lZGl1bWJsdWU6XCIjMDAwMENEXCIsbWVkaXVtb3JjaGlkOlwiI0JBNTVEM1wiLG1lZGl1bXB1cnBsZTpcIiM5MzcwREJcIixtZWRpdW1zZWFncmVlbjpcIiMzQ0IzNzFcIixtZWRpdW1zbGF0ZWJsdWU6XCIjN0I2OEVFXCIsbWVkaXVtc3ByaW5nZ3JlZW46XCIjMDBGQTlBXCIsbWVkaXVtdHVycXVvaXNlOlwiIzQ4RDFDQ1wiLG1lZGl1bXZpb2xldHJlZDpcIiNDNzE1ODVcIixtaWRuaWdodGJsdWU6XCIjMTkxOTcwXCIsbWludGNyZWFtOlwiI0Y1RkZGQVwiLG1pc3R5cm9zZTpcIiNGRkU0RTFcIixtb2NjYXNpbjpcIiNGRkU0QjVcIixuYXZham93aGl0ZTpcIiNGRkRFQURcIixuYXZ5OlwiIzAwMDA4MFwiLG9sZGxhY2U6XCIjRkRGNUU2XCIsb2xpdmU6XCIjODA4MDAwXCIsb2xpdmVkcmFiOlwiIzZCOEUyM1wiLG9yYW5nZTpcIiNGRkE1MDBcIixvcmFuZ2VyZWQ6XCIjRkY0NTAwXCIsb3JjaGlkOlwiI0RBNzBENlwiLHBhbGVnb2xkZW5yb2Q6XCIjRUVFOEFBXCIscGFsZWdyZWVuOlwiIzk4RkI5OFwiLHBhbGV0dXJxdW9pc2U6XCIjQUZFRUVFXCIscGFsZXZpb2xldHJlZDpcIiNEQjcwOTNcIixwYXBheWF3aGlwOlwiI0ZGRUZENVwiLHBlYWNocHVmZjpcIiNGRkRBQjlcIixwZXJ1OlwiI0NEODUzRlwiLHBpbms6XCIjRkZDMENCXCIscGx1bTpcIiNEREEwRERcIixwb3dkZXJibHVlOlwiI0IwRTBFNlwiLHB1cnBsZTpcIiM4MDAwODBcIixyZWJlY2NhcHVycGxlOlwiIzY2MzM5OVwiLHJlZDpcIiNGRjAwMDBcIixyb3N5YnJvd246XCIjQkM4RjhGXCIscm95YWxibHVlOlwiIzQxNjlFMVwiLHNhZGRsZWJyb3duOlwiIzhCNDUxM1wiLHNhbG1vbjpcIiNGQTgwNzJcIixzYW5keWJyb3duOlwiI0Y0QTQ2MFwiLHNlYWdyZWVuOlwiIzJFOEI1N1wiLHNlYXNoZWxsOlwiI0ZGRjVFRVwiLHNpZW5uYTpcIiNBMDUyMkRcIixzaWx2ZXI6XCIjQzBDMEMwXCIsc2t5Ymx1ZTpcIiM4N0NFRUJcIixzbGF0ZWJsdWU6XCIjNkE1QUNEXCIsc2xhdGVncmF5OlwiIzcwODA5MFwiLHNsYXRlZ3JleTpcIiM3MDgwOTBcIixzbm93OlwiI0ZGRkFGQVwiLHNwcmluZ2dyZWVuOlwiIzAwRkY3RlwiLHN0ZWVsYmx1ZTpcIiM0NjgyQjRcIix0YW46XCIjRDJCNDhDXCIsdGVhbDpcIiMwMDgwODBcIix0aGlzdGxlOlwiI0Q4QkZEOFwiLHRvbWF0bzpcIiNGRjYzNDdcIix0dXJxdW9pc2U6XCIjNDBFMEQwXCIsdmlvbGV0OlwiI0VFODJFRVwiLHdoZWF0OlwiI0Y1REVCM1wiLHdoaXRlOlwiI0ZGRkZGRlwiLHdoaXRlc21va2U6XCIjRjVGNUY1XCIseWVsbG93OlwiI0ZGRkYwMFwiLHllbGxvd2dyZWVuOlwiIzlBQ0QzMlwifSxlLkNvbG9yLmZyb21SZ2I9ZnVuY3Rpb24odCl7cmV0dXJuIGkuZnJvbVNvdXJjZShpLnNvdXJjZUZyb21SZ2IodCkpfSxlLkNvbG9yLnNvdXJjZUZyb21SZ2I9ZnVuY3Rpb24odCl7dmFyIGU9dC5tYXRjaChpLnJlUkdCYSk7aWYoZSl7dmFyIHI9cGFyc2VJbnQoZVsxXSwxMCkvKC8lJC8udGVzdChlWzFdKT8xMDA6MSkqKC8lJC8udGVzdChlWzFdKT8yNTU6MSksbj1wYXJzZUludChlWzJdLDEwKS8oLyUkLy50ZXN0KGVbMl0pPzEwMDoxKSooLyUkLy50ZXN0KGVbMl0pPzI1NToxKSxzPXBhcnNlSW50KGVbM10sMTApLygvJSQvLnRlc3QoZVszXSk/MTAwOjEpKigvJSQvLnRlc3QoZVszXSk/MjU1OjEpO3JldHVybltwYXJzZUludChyLDEwKSxwYXJzZUludChuLDEwKSxwYXJzZUludChzLDEwKSxlWzRdP3BhcnNlRmxvYXQoZVs0XSk6MV19fSxlLkNvbG9yLmZyb21SZ2JhPWkuZnJvbVJnYixlLkNvbG9yLmZyb21Ic2w9ZnVuY3Rpb24odCl7cmV0dXJuIGkuZnJvbVNvdXJjZShpLnNvdXJjZUZyb21Ic2wodCkpfSxlLkNvbG9yLnNvdXJjZUZyb21Ic2w9ZnVuY3Rpb24odCl7dmFyIGU9dC5tYXRjaChpLnJlSFNMYSk7aWYoZSl7dmFyIG4scyxvLGE9KHBhcnNlRmxvYXQoZVsxXSklMzYwKzM2MCklMzYwLzM2MCxoPXBhcnNlRmxvYXQoZVsyXSkvKC8lJC8udGVzdChlWzJdKT8xMDA6MSksbD1wYXJzZUZsb2F0KGVbM10pLygvJSQvLnRlc3QoZVszXSk/MTAwOjEpO2lmKDA9PT1oKW49cz1vPWw7ZWxzZXt2YXIgYz1sPD0uNT9sKihoKzEpOmwraC1sKmgsdT0yKmwtYztuPXIodSxjLGErMS8zKSxzPXIodSxjLGEpLG89cih1LGMsYS0xLzMpfXJldHVybltNYXRoLnJvdW5kKDI1NSpuKSxNYXRoLnJvdW5kKDI1NSpzKSxNYXRoLnJvdW5kKDI1NSpvKSxlWzRdP3BhcnNlRmxvYXQoZVs0XSk6MV19fSxlLkNvbG9yLmZyb21Ic2xhPWkuZnJvbUhzbCxlLkNvbG9yLmZyb21IZXg9ZnVuY3Rpb24odCl7cmV0dXJuIGkuZnJvbVNvdXJjZShpLnNvdXJjZUZyb21IZXgodCkpfSxlLkNvbG9yLnNvdXJjZUZyb21IZXg9ZnVuY3Rpb24odCl7aWYodC5tYXRjaChpLnJlSGV4KSl7dmFyIGU9dC5zbGljZSh0LmluZGV4T2YoXCIjXCIpKzEpLHI9Mz09PWUubGVuZ3RofHw0PT09ZS5sZW5ndGgsbj04PT09ZS5sZW5ndGh8fDQ9PT1lLmxlbmd0aCxzPXI/ZS5jaGFyQXQoMCkrZS5jaGFyQXQoMCk6ZS5zdWJzdHJpbmcoMCwyKSxvPXI/ZS5jaGFyQXQoMSkrZS5jaGFyQXQoMSk6ZS5zdWJzdHJpbmcoMiw0KSxhPXI/ZS5jaGFyQXQoMikrZS5jaGFyQXQoMik6ZS5zdWJzdHJpbmcoNCw2KSxoPW4/cj9lLmNoYXJBdCgzKStlLmNoYXJBdCgzKTplLnN1YnN0cmluZyg2LDgpOlwiRkZcIjtyZXR1cm5bcGFyc2VJbnQocywxNikscGFyc2VJbnQobywxNikscGFyc2VJbnQoYSwxNikscGFyc2VGbG9hdCgocGFyc2VJbnQoaCwxNikvMjU1KS50b0ZpeGVkKDIpKV19fSxlLkNvbG9yLmZyb21Tb3VyY2U9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IGk7cmV0dXJuIGUuc2V0U291cmNlKHQpLGV9KX0oZSksZnVuY3Rpb24odCl7dmFyIGU9dC5mYWJyaWN8fCh0LmZhYnJpYz17fSksaT1bXCJlXCIsXCJzZVwiLFwic1wiLFwic3dcIixcIndcIixcIm53XCIsXCJuXCIsXCJuZVwiLFwiZVwiXSxyPVtcIm5zXCIsXCJuZXN3XCIsXCJld1wiLFwibndzZVwiXSxuPXt9LHM9XCJsZWZ0XCIsbz1cInRvcFwiLGE9XCJyaWdodFwiLGg9XCJib3R0b21cIixsPVwiY2VudGVyXCIsYz17dG9wOmgsYm90dG9tOm8sbGVmdDphLHJpZ2h0OnMsY2VudGVyOmx9LHU9ZS51dGlsLnJhZGlhbnNUb0RlZ3JlZXMsZD1NYXRoLnNpZ258fGZ1bmN0aW9uKHQpe3JldHVybih0PjApLSh0PDApfHwrdH07ZnVuY3Rpb24gZih0LGUpe3ZhciBpPXQuYW5nbGUrdShNYXRoLmF0YW4yKGUueSxlLngpKSszNjA7cmV0dXJuIE1hdGgucm91bmQoaSUzNjAvNDUpfWZ1bmN0aW9uIGcodCxpKXt2YXIgcj1pLnRyYW5zZm9ybS50YXJnZXQsbj1yLmNhbnZhcyxzPWUudXRpbC5vYmplY3QuY2xvbmUoaSk7cy50YXJnZXQ9cixuJiZuLmZpcmUoXCJvYmplY3Q6XCIrdCxzKSxyLmZpcmUodCxpKX1mdW5jdGlvbiBtKHQsZSl7dmFyIGk9ZS5jYW52YXMscj10W2kudW5pU2NhbGVLZXldO3JldHVybiBpLnVuaWZvcm1TY2FsaW5nJiYhcnx8IWkudW5pZm9ybVNjYWxpbmcmJnJ9ZnVuY3Rpb24gcCh0KXtyZXR1cm4gdC5vcmlnaW5YPT09bCYmdC5vcmlnaW5ZPT09bH1mdW5jdGlvbiB2KHQsZSxpKXt2YXIgcj10LmxvY2tTY2FsaW5nWCxuPXQubG9ja1NjYWxpbmdZO3JldHVybiEoKCFyfHwhbikmJihlfHwhciYmIW58fCFpKSYmKCFyfHxcInhcIiE9PWUpJiYoIW58fFwieVwiIT09ZSkpfWZ1bmN0aW9uIF8odCxlLGkscil7cmV0dXJue2U6dCx0cmFuc2Zvcm06ZSxwb2ludGVyOnt4OmkseTpyfX19ZnVuY3Rpb24geSh0KXtyZXR1cm4gZnVuY3Rpb24oZSxpLHIsbil7dmFyIHM9aS50YXJnZXQsbz1zLmdldENlbnRlclBvaW50KCksYT1zLnRyYW5zbGF0ZVRvT3JpZ2luUG9pbnQobyxpLm9yaWdpblgsaS5vcmlnaW5ZKSxoPXQoZSxpLHIsbik7cmV0dXJuIHMuc2V0UG9zaXRpb25CeU9yaWdpbihhLGkub3JpZ2luWCxpLm9yaWdpblkpLGh9fWZ1bmN0aW9uIHcodCxlKXtyZXR1cm4gZnVuY3Rpb24oaSxyLG4scyl7dmFyIG89ZShpLHIsbixzKTtyZXR1cm4gbyYmZyh0LF8oaSxyLG4scykpLG99fWZ1bmN0aW9uIGIodCxpLHIsbixzKXt2YXIgbz10LnRhcmdldCxhPW8uY29udHJvbHNbdC5jb3JuZXJdLGg9by5jYW52YXMuZ2V0Wm9vbSgpLGw9by5wYWRkaW5nL2gsYz1vLnRvTG9jYWxQb2ludChuZXcgZS5Qb2ludChuLHMpLGkscik7cmV0dXJuIGMueD49bCYmKGMueC09bCksYy54PD0tbCYmKGMueCs9bCksYy55Pj1sJiYoYy55LT1sKSxjLnk8PWwmJihjLnkrPWwpLGMueC09YS5vZmZzZXRYLGMueS09YS5vZmZzZXRZLGN9ZnVuY3Rpb24geCh0KXtyZXR1cm4gdC5mbGlwWCE9PXQuZmxpcFl9ZnVuY3Rpb24gQyh0LGUsaSxyLG4pe2lmKDAhPT10W2VdKXt2YXIgcz1uL3QuX2dldFRyYW5zZm9ybWVkRGltZW5zaW9ucygpW3JdKnRbaV07dC5zZXQoaSxzKX19ZnVuY3Rpb24gUyh0LGUsaSxyKXt2YXIgbixsPWUudGFyZ2V0LGM9bC5fZ2V0VHJhbnNmb3JtZWREaW1lbnNpb25zKDAsbC5za2V3WSksZD1iKGUsZS5vcmlnaW5YLGUub3JpZ2luWSxpLHIpLGY9TWF0aC5hYnMoMipkLngpLWMueCxnPWwuc2tld1g7ZjwyP249MDoobj11KE1hdGguYXRhbjIoZi9sLnNjYWxlWCxjLnkvbC5zY2FsZVkpKSxlLm9yaWdpblg9PT1zJiZlLm9yaWdpblk9PT1oJiYobj0tbiksZS5vcmlnaW5YPT09YSYmZS5vcmlnaW5ZPT09byYmKG49LW4pLHgobCkmJihuPS1uKSk7dmFyIG09ZyE9PW47aWYobSl7dmFyIHA9bC5fZ2V0VHJhbnNmb3JtZWREaW1lbnNpb25zKCkueTtsLnNldChcInNrZXdYXCIsbiksQyhsLFwic2tld1lcIixcInNjYWxlWVwiLFwieVwiLHApfXJldHVybiBtfWZ1bmN0aW9uIFQodCxlLGkscil7dmFyIG4sbD1lLnRhcmdldCxjPWwuX2dldFRyYW5zZm9ybWVkRGltZW5zaW9ucyhsLnNrZXdYLDApLGQ9YihlLGUub3JpZ2luWCxlLm9yaWdpblksaSxyKSxmPU1hdGguYWJzKDIqZC55KS1jLnksZz1sLnNrZXdZO2Y8Mj9uPTA6KG49dShNYXRoLmF0YW4yKGYvbC5zY2FsZVksYy54L2wuc2NhbGVYKSksZS5vcmlnaW5YPT09cyYmZS5vcmlnaW5ZPT09aCYmKG49LW4pLGUub3JpZ2luWD09PWEmJmUub3JpZ2luWT09PW8mJihuPS1uKSx4KGwpJiYobj0tbikpO3ZhciBtPWchPT1uO2lmKG0pe3ZhciBwPWwuX2dldFRyYW5zZm9ybWVkRGltZW5zaW9ucygpLng7bC5zZXQoXCJza2V3WVwiLG4pLEMobCxcInNrZXdYXCIsXCJzY2FsZVhcIixcInhcIixwKX1yZXR1cm4gbX1mdW5jdGlvbiBFKHQsZSxpLHIsbil7bj1ufHx7fTt2YXIgcyxvLGEsaCxsLHUsZj1lLnRhcmdldCxnPWYubG9ja1NjYWxpbmdYLF89Zi5sb2NrU2NhbGluZ1kseT1uLmJ5LHc9bSh0LGYpLHg9dihmLHksdyksQz1lLmdlc3R1cmVTY2FsZTtpZih4KXJldHVybiExO2lmKEMpbz1lLnNjYWxlWCpDLGE9ZS5zY2FsZVkqQztlbHNle2lmKHM9YihlLGUub3JpZ2luWCxlLm9yaWdpblksaSxyKSxsPVwieVwiIT09eT9kKHMueCk6MSx1PVwieFwiIT09eT9kKHMueSk6MSxlLnNpZ25YfHwoZS5zaWduWD1sKSxlLnNpZ25ZfHwoZS5zaWduWT11KSxmLmxvY2tTY2FsaW5nRmxpcCYmKGUuc2lnblghPT1sfHxlLnNpZ25ZIT09dSkpcmV0dXJuITE7aWYoaD1mLl9nZXRUcmFuc2Zvcm1lZERpbWVuc2lvbnMoKSx3JiYheSl7dmFyIFM9TWF0aC5hYnMocy54KStNYXRoLmFicyhzLnkpLFQ9ZS5vcmlnaW5hbCxFPVMvKE1hdGguYWJzKGgueCpULnNjYWxlWC9mLnNjYWxlWCkrTWF0aC5hYnMoaC55KlQuc2NhbGVZL2Yuc2NhbGVZKSk7bz1ULnNjYWxlWCpFLGE9VC5zY2FsZVkqRX1lbHNlIG89TWF0aC5hYnMocy54KmYuc2NhbGVYL2gueCksYT1NYXRoLmFicyhzLnkqZi5zY2FsZVkvaC55KTtwKGUpJiYobyo9MixhKj0yKSxlLnNpZ25YIT09bCYmXCJ5XCIhPT15JiYoZS5vcmlnaW5YPWNbZS5vcmlnaW5YXSxvKj0tMSxlLnNpZ25YPWwpLGUuc2lnblkhPT11JiZcInhcIiE9PXkmJihlLm9yaWdpblk9Y1tlLm9yaWdpblldLGEqPS0xLGUuc2lnblk9dSl9dmFyIE89Zi5zY2FsZVgsQT1mLnNjYWxlWTtyZXR1cm4geT8oXCJ4XCI9PT15JiZmLnNldChcInNjYWxlWFwiLG8pLFwieVwiPT09eSYmZi5zZXQoXCJzY2FsZVlcIixhKSk6KCFnJiZmLnNldChcInNjYWxlWFwiLG8pLCFfJiZmLnNldChcInNjYWxlWVwiLGEpKSxPIT09Zi5zY2FsZVh8fEEhPT1mLnNjYWxlWX1uLnNjYWxlQ3Vyc29yU3R5bGVIYW5kbGVyPWZ1bmN0aW9uKHQsZSxyKXt2YXIgbj1tKHQscikscz1cIlwiO2lmKDAhPT1lLngmJjA9PT1lLnk/cz1cInhcIjowPT09ZS54JiYwIT09ZS55JiYocz1cInlcIiksdihyLHMsbikpcmV0dXJuXCJub3QtYWxsb3dlZFwiO3ZhciBvPWYocixlKTtyZXR1cm4gaVtvXStcIi1yZXNpemVcIn0sbi5za2V3Q3Vyc29yU3R5bGVIYW5kbGVyPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1cIm5vdC1hbGxvd2VkXCI7aWYoMCE9PWUueCYmaS5sb2NrU2tld2luZ1kpcmV0dXJuIG47aWYoMCE9PWUueSYmaS5sb2NrU2tld2luZ1gpcmV0dXJuIG47dmFyIHM9ZihpLGUpJTQ7cmV0dXJuIHJbc10rXCItcmVzaXplXCJ9LG4uc2NhbGVTa2V3Q3Vyc29yU3R5bGVIYW5kbGVyPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdFtpLmNhbnZhcy5hbHRBY3Rpb25LZXldP24uc2tld0N1cnNvclN0eWxlSGFuZGxlcih0LGUsaSk6bi5zY2FsZUN1cnNvclN0eWxlSGFuZGxlcih0LGUsaSl9LG4ucm90YXRpb25XaXRoU25hcHBpbmc9dyhcInJvdGF0aW5nXCIseSgoZnVuY3Rpb24odCxlLGkscil7dmFyIG49ZSxzPW4udGFyZ2V0LG89cy50cmFuc2xhdGVUb09yaWdpblBvaW50KHMuZ2V0Q2VudGVyUG9pbnQoKSxuLm9yaWdpblgsbi5vcmlnaW5ZKTtpZihzLmxvY2tSb3RhdGlvbilyZXR1cm4hMTt2YXIgYSxoPU1hdGguYXRhbjIobi5leS1vLnksbi5leC1vLngpLGw9TWF0aC5hdGFuMihyLW8ueSxpLW8ueCksYz11KGwtaCtuLnRoZXRhKTtpZihzLnNuYXBBbmdsZT4wKXt2YXIgZD1zLnNuYXBBbmdsZSxmPXMuc25hcFRocmVzaG9sZHx8ZCxnPU1hdGguY2VpbChjL2QpKmQsbT1NYXRoLmZsb29yKGMvZCkqZDtNYXRoLmFicyhjLW0pPGY/Yz1tOk1hdGguYWJzKGMtZyk8ZiYmKGM9Zyl9cmV0dXJuIGM8MCYmKGM9MzYwK2MpLGMlPTM2MCxhPXMuYW5nbGUhPT1jLHMuYW5nbGU9YyxhfSkpKSxuLnNjYWxpbmdFcXVhbGx5PXcoXCJzY2FsaW5nXCIseSgoZnVuY3Rpb24odCxlLGkscil7cmV0dXJuIEUodCxlLGkscil9KSkpLG4uc2NhbGluZ1g9dyhcInNjYWxpbmdcIix5KChmdW5jdGlvbih0LGUsaSxyKXtyZXR1cm4gRSh0LGUsaSxyLHtieTpcInhcIn0pfSkpKSxuLnNjYWxpbmdZPXcoXCJzY2FsaW5nXCIseSgoZnVuY3Rpb24odCxlLGkscil7cmV0dXJuIEUodCxlLGkscix7Ynk6XCJ5XCJ9KX0pKSksbi5zY2FsaW5nWU9yU2tld2luZ1g9ZnVuY3Rpb24odCxlLGkscil7cmV0dXJuIHRbZS50YXJnZXQuY2FudmFzLmFsdEFjdGlvbktleV0/bi5za2V3SGFuZGxlclgodCxlLGkscik6bi5zY2FsaW5nWSh0LGUsaSxyKX0sbi5zY2FsaW5nWE9yU2tld2luZ1k9ZnVuY3Rpb24odCxlLGkscil7cmV0dXJuIHRbZS50YXJnZXQuY2FudmFzLmFsdEFjdGlvbktleV0/bi5za2V3SGFuZGxlclkodCxlLGkscik6bi5zY2FsaW5nWCh0LGUsaSxyKX0sbi5jaGFuZ2VXaWR0aD13KFwicmVzaXppbmdcIix5KChmdW5jdGlvbih0LGUsaSxyKXt2YXIgbj1lLnRhcmdldCxzPWIoZSxlLm9yaWdpblgsZS5vcmlnaW5ZLGksciksbz1uLnN0cm9rZVdpZHRoLyhuLnN0cm9rZVVuaWZvcm0/bi5zY2FsZVg6MSksYT1wKGUpPzI6MSxoPW4ud2lkdGgsbD1NYXRoLmFicyhzLngqYS9uLnNjYWxlWCktbztyZXR1cm4gbi5zZXQoXCJ3aWR0aFwiLE1hdGgubWF4KGwsMCkpLGghPT1sfSkpKSxuLnNrZXdIYW5kbGVyWD1mdW5jdGlvbih0LGUsaSxyKXt2YXIgbixoPWUudGFyZ2V0LGM9aC5za2V3WCx1PWUub3JpZ2luWTtyZXR1cm4haC5sb2NrU2tld2luZ1gmJigwPT09Yz9uPWIoZSxsLGwsaSxyKS54PjA/czphOihjPjAmJihuPXU9PT1vP3M6YSksYzwwJiYobj11PT09bz9hOnMpLHgoaCkmJihuPW49PT1zP2E6cykpLGUub3JpZ2luWD1uLHcoXCJza2V3aW5nXCIseShTKSkodCxlLGkscikpfSxuLnNrZXdIYW5kbGVyWT1mdW5jdGlvbih0LGUsaSxyKXt2YXIgbixhPWUudGFyZ2V0LGM9YS5za2V3WSx1PWUub3JpZ2luWDtyZXR1cm4hYS5sb2NrU2tld2luZ1kmJigwPT09Yz9uPWIoZSxsLGwsaSxyKS55PjA/bzpoOihjPjAmJihuPXU9PT1zP286aCksYzwwJiYobj11PT09cz9oOm8pLHgoYSkmJihuPW49PT1vP2g6bykpLGUub3JpZ2luWT1uLHcoXCJza2V3aW5nXCIseShUKSkodCxlLGkscikpfSxuLmRyYWdIYW5kbGVyPWZ1bmN0aW9uKHQsZSxpLHIpe3ZhciBuPWUudGFyZ2V0LHM9aS1lLm9mZnNldFgsbz1yLWUub2Zmc2V0WSxhPSFuLmdldChcImxvY2tNb3ZlbWVudFhcIikmJm4ubGVmdCE9PXMsaD0hbi5nZXQoXCJsb2NrTW92ZW1lbnRZXCIpJiZuLnRvcCE9PW87cmV0dXJuIGEmJm4uc2V0KFwibGVmdFwiLHMpLGgmJm4uc2V0KFwidG9wXCIsbyksKGF8fGgpJiZnKFwibW92aW5nXCIsXyh0LGUsaSxyKSksYXx8aH0sbi5zY2FsZU9yU2tld0FjdGlvbk5hbWU9ZnVuY3Rpb24odCxlLGkpe3ZhciByPXRbaS5jYW52YXMuYWx0QWN0aW9uS2V5XTtyZXR1cm4gMD09PWUueD9yP1wic2tld1hcIjpcInNjYWxlWVwiOjA9PT1lLnk/cj9cInNrZXdZXCI6XCJzY2FsZVhcIjp2b2lkIDB9LG4ucm90YXRpb25TdHlsZUhhbmRsZXI9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBpLmxvY2tSb3RhdGlvbj9cIm5vdC1hbGxvd2VkXCI6ZS5jdXJzb3JTdHlsZX0sbi5maXJlRXZlbnQ9ZyxuLndyYXBXaXRoRml4ZWRBbmNob3I9eSxuLndyYXBXaXRoRmlyZUV2ZW50PXcsbi5nZXRMb2NhbFBvaW50PWIsZS5jb250cm9sc1V0aWxzPW59KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljfHwodC5mYWJyaWM9e30pLGk9ZS51dGlsLmRlZ3JlZXNUb1JhZGlhbnMscj1lLmNvbnRyb2xzVXRpbHM7ci5yZW5kZXJDaXJjbGVDb250cm9sPWZ1bmN0aW9uKHQsZSxpLHIsbil7cj1yfHx7fTt2YXIgcyxvPXRoaXMuc2l6ZVh8fHIuY29ybmVyU2l6ZXx8bi5jb3JuZXJTaXplLGE9dGhpcy5zaXplWXx8ci5jb3JuZXJTaXplfHxuLmNvcm5lclNpemUsaD12b2lkIDAhPT1yLnRyYW5zcGFyZW50Q29ybmVycz9yLnRyYW5zcGFyZW50Q29ybmVyczpuLnRyYW5zcGFyZW50Q29ybmVycyxsPWg/XCJzdHJva2VcIjpcImZpbGxcIixjPSFoJiYoci5jb3JuZXJTdHJva2VDb2xvcnx8bi5jb3JuZXJTdHJva2VDb2xvciksdT1lLGQ9aTt0LnNhdmUoKSx0LmZpbGxTdHlsZT1yLmNvcm5lckNvbG9yfHxuLmNvcm5lckNvbG9yLHQuc3Ryb2tlU3R5bGU9ci5jb3JuZXJTdHJva2VDb2xvcnx8bi5jb3JuZXJTdHJva2VDb2xvcixvPmE/KHM9byx0LnNjYWxlKDEsYS9vKSxkPWkqby9hKTphPm8/KHM9YSx0LnNjYWxlKG8vYSwxKSx1PWUqYS9vKTpzPW8sdC5saW5lV2lkdGg9MSx0LmJlZ2luUGF0aCgpLHQuYXJjKHUsZCxzLzIsMCwyKk1hdGguUEksITEpLHRbbF0oKSxjJiZ0LnN0cm9rZSgpLHQucmVzdG9yZSgpfSxyLnJlbmRlclNxdWFyZUNvbnRyb2w9ZnVuY3Rpb24odCxlLHIsbixzKXtuPW58fHt9O3ZhciBvPXRoaXMuc2l6ZVh8fG4uY29ybmVyU2l6ZXx8cy5jb3JuZXJTaXplLGE9dGhpcy5zaXplWXx8bi5jb3JuZXJTaXplfHxzLmNvcm5lclNpemUsaD12b2lkIDAhPT1uLnRyYW5zcGFyZW50Q29ybmVycz9uLnRyYW5zcGFyZW50Q29ybmVyczpzLnRyYW5zcGFyZW50Q29ybmVycyxsPWg/XCJzdHJva2VcIjpcImZpbGxcIixjPSFoJiYobi5jb3JuZXJTdHJva2VDb2xvcnx8cy5jb3JuZXJTdHJva2VDb2xvciksdT1vLzIsZD1hLzI7dC5zYXZlKCksdC5maWxsU3R5bGU9bi5jb3JuZXJDb2xvcnx8cy5jb3JuZXJDb2xvcix0LnN0cm9rZVN0eWxlPW4uY29ybmVyU3Ryb2tlQ29sb3J8fHMuY29ybmVyU3Ryb2tlQ29sb3IsdC5saW5lV2lkdGg9MSx0LnRyYW5zbGF0ZShlLHIpLHQucm90YXRlKGkocy5hbmdsZSkpLHRbbCtcIlJlY3RcIl0oLXUsLWQsbyxhKSxjJiZ0LnN0cm9rZVJlY3QoLXUsLWQsbyxhKSx0LnJlc3RvcmUoKX19KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljfHwodC5mYWJyaWM9e30pO2UuQ29udHJvbD1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdCl0aGlzW2VdPXRbZV19LGUuQ29udHJvbC5wcm90b3R5cGU9e3Zpc2libGU6ITAsYWN0aW9uTmFtZTpcInNjYWxlXCIsYW5nbGU6MCx4OjAseTowLG9mZnNldFg6MCxvZmZzZXRZOjAsc2l6ZVg6bnVsbCxzaXplWTpudWxsLHRvdWNoU2l6ZVg6bnVsbCx0b3VjaFNpemVZOm51bGwsY3Vyc29yU3R5bGU6XCJjcm9zc2hhaXJcIix3aXRoQ29ubmVjdGlvbjohMSxhY3Rpb25IYW5kbGVyOmZ1bmN0aW9uKCl7fSxtb3VzZURvd25IYW5kbGVyOmZ1bmN0aW9uKCl7fSxtb3VzZVVwSGFuZGxlcjpmdW5jdGlvbigpe30sZ2V0QWN0aW9uSGFuZGxlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFjdGlvbkhhbmRsZXJ9LGdldE1vdXNlRG93bkhhbmRsZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb3VzZURvd25IYW5kbGVyfSxnZXRNb3VzZVVwSGFuZGxlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vdXNlVXBIYW5kbGVyfSxjdXJzb3JTdHlsZUhhbmRsZXI6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5jdXJzb3JTdHlsZX0sZ2V0QWN0aW9uTmFtZTpmdW5jdGlvbih0LGUpe3JldHVybiBlLmFjdGlvbk5hbWV9LGdldFZpc2liaWxpdHk6ZnVuY3Rpb24odCxlKXt2YXIgaT10Ll9jb250cm9sc1Zpc2liaWxpdHk7cmV0dXJuIGkmJnZvaWQgMCE9PWlbZV0/aVtlXTp0aGlzLnZpc2libGV9LHNldFZpc2liaWxpdHk6ZnVuY3Rpb24odCl7dGhpcy52aXNpYmxlPXR9LHBvc2l0aW9uSGFuZGxlcjpmdW5jdGlvbih0LGkpe3JldHVybiBlLnV0aWwudHJhbnNmb3JtUG9pbnQoe3g6dGhpcy54KnQueCt0aGlzLm9mZnNldFgseTp0aGlzLnkqdC55K3RoaXMub2Zmc2V0WX0saSl9LGNhbGNDb3JuZXJDb29yZHM6ZnVuY3Rpb24odCxpLHIsbixzKXt2YXIgbyxhLGgsbCxjPXM/dGhpcy50b3VjaFNpemVYOnRoaXMuc2l6ZVgsdT1zP3RoaXMudG91Y2hTaXplWTp0aGlzLnNpemVZO2lmKGMmJnUmJmMhPT11KXt2YXIgZD1NYXRoLmF0YW4yKHUsYyksZj1NYXRoLnNxcnQoYypjK3UqdSkvMixnPWQtZS51dGlsLmRlZ3JlZXNUb1JhZGlhbnModCksbT1NYXRoLlBJLzItZC1lLnV0aWwuZGVncmVlc1RvUmFkaWFucyh0KTtvPWYqZS51dGlsLmNvcyhnKSxhPWYqZS51dGlsLnNpbihnKSxoPWYqZS51dGlsLmNvcyhtKSxsPWYqZS51dGlsLnNpbihtKX1lbHNlIGY9LjcwNzEwNjc4MTIqKGMmJnU/YzppKSxnPWUudXRpbC5kZWdyZWVzVG9SYWRpYW5zKDQ1LXQpLG89aD1mKmUudXRpbC5jb3MoZyksYT1sPWYqZS51dGlsLnNpbihnKTtyZXR1cm57dGw6e3g6ci1sLHk6bi1ofSx0cjp7eDpyK28seTpuLWF9LGJsOnt4OnItbyx5Om4rYX0sYnI6e3g6citsLHk6bitofX19LHJlbmRlcjpmdW5jdGlvbih0LGkscixuLHMpe1wiY2lyY2xlXCI9PT0oKG49bnx8e30pLmNvcm5lclN0eWxlfHxzLmNvcm5lclN0eWxlKT9lLmNvbnRyb2xzVXRpbHMucmVuZGVyQ2lyY2xlQ29udHJvbC5jYWxsKHRoaXMsdCxpLHIsbixzKTplLmNvbnRyb2xzVXRpbHMucmVuZGVyU3F1YXJlQ29udHJvbC5jYWxsKHRoaXMsdCxpLHIsbixzKX19fShlKSxmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt2YXIgaSxyLG4scyxvPXQuZ2V0QXR0cmlidXRlKFwic3R5bGVcIiksYT10LmdldEF0dHJpYnV0ZShcIm9mZnNldFwiKXx8MDtpZihhPShhPXBhcnNlRmxvYXQoYSkvKC8lJC8udGVzdChhKT8xMDA6MSkpPDA/MDphPjE/MTphLG8pe3ZhciBoPW8uc3BsaXQoL1xccyo7XFxzKi8pO2ZvcihcIlwiPT09aFtoLmxlbmd0aC0xXSYmaC5wb3AoKSxzPWgubGVuZ3RoO3MtLTspe3ZhciBsPWhbc10uc3BsaXQoL1xccyo6XFxzKi8pLGM9bFswXS50cmltKCksdT1sWzFdLnRyaW0oKTtcInN0b3AtY29sb3JcIj09PWM/aT11Olwic3RvcC1vcGFjaXR5XCI9PT1jJiYobj11KX19cmV0dXJuIGl8fChpPXQuZ2V0QXR0cmlidXRlKFwic3RvcC1jb2xvclwiKXx8XCJyZ2IoMCwwLDApXCIpLG58fChuPXQuZ2V0QXR0cmlidXRlKFwic3RvcC1vcGFjaXR5XCIpKSxyPShpPW5ldyBTLkNvbG9yKGkpKS5nZXRBbHBoYSgpLG49aXNOYU4ocGFyc2VGbG9hdChuKSk/MTpwYXJzZUZsb2F0KG4pLG4qPXIqZSx7b2Zmc2V0OmEsY29sb3I6aS50b1JnYigpLG9wYWNpdHk6bn19dmFyIGU9Uy51dGlsLm9iamVjdC5jbG9uZTtTLkdyYWRpZW50PVMudXRpbC5jcmVhdGVDbGFzcyh7b2Zmc2V0WDowLG9mZnNldFk6MCxncmFkaWVudFRyYW5zZm9ybTpudWxsLGdyYWRpZW50VW5pdHM6XCJwaXhlbHNcIix0eXBlOlwibGluZWFyXCIsaW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt0fHwodD17fSksdC5jb29yZHN8fCh0LmNvb3Jkcz17fSk7dmFyIGUsaT10aGlzO09iamVjdC5rZXlzKHQpLmZvckVhY2goKGZ1bmN0aW9uKGUpe2lbZV09dFtlXX0pKSx0aGlzLmlkP3RoaXMuaWQrPVwiX1wiK1MuT2JqZWN0Ll9fdWlkKys6dGhpcy5pZD1TLk9iamVjdC5fX3VpZCsrLGU9e3gxOnQuY29vcmRzLngxfHwwLHkxOnQuY29vcmRzLnkxfHwwLHgyOnQuY29vcmRzLngyfHwwLHkyOnQuY29vcmRzLnkyfHwwfSxcInJhZGlhbFwiPT09dGhpcy50eXBlJiYoZS5yMT10LmNvb3Jkcy5yMXx8MCxlLnIyPXQuY29vcmRzLnIyfHwwKSx0aGlzLmNvb3Jkcz1lLHRoaXMuY29sb3JTdG9wcz10LmNvbG9yU3RvcHMuc2xpY2UoKX0sYWRkQ29sb3JTdG9wOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0KXt2YXIgaT1uZXcgUy5Db2xvcih0W2VdKTt0aGlzLmNvbG9yU3RvcHMucHVzaCh7b2Zmc2V0OnBhcnNlRmxvYXQoZSksY29sb3I6aS50b1JnYigpLG9wYWNpdHk6aS5nZXRBbHBoYSgpfSl9cmV0dXJuIHRoaXN9LHRvT2JqZWN0OmZ1bmN0aW9uKHQpe3ZhciBlPXt0eXBlOnRoaXMudHlwZSxjb29yZHM6dGhpcy5jb29yZHMsY29sb3JTdG9wczp0aGlzLmNvbG9yU3RvcHMsb2Zmc2V0WDp0aGlzLm9mZnNldFgsb2Zmc2V0WTp0aGlzLm9mZnNldFksZ3JhZGllbnRVbml0czp0aGlzLmdyYWRpZW50VW5pdHMsZ3JhZGllbnRUcmFuc2Zvcm06dGhpcy5ncmFkaWVudFRyYW5zZm9ybT90aGlzLmdyYWRpZW50VHJhbnNmb3JtLmNvbmNhdCgpOnRoaXMuZ3JhZGllbnRUcmFuc2Zvcm19O3JldHVybiBTLnV0aWwucG9wdWxhdGVXaXRoUHJvcGVydGllcyh0aGlzLGUsdCksZX0sdG9TVkc6ZnVuY3Rpb24odCxpKXt2YXIgcixuLHMsbyxhPWUodGhpcy5jb29yZHMsITApLGg9KGk9aXx8e30sZSh0aGlzLmNvbG9yU3RvcHMsITApKSxsPWEucjE+YS5yMixjPXRoaXMuZ3JhZGllbnRUcmFuc2Zvcm0/dGhpcy5ncmFkaWVudFRyYW5zZm9ybS5jb25jYXQoKTpTLmlNYXRyaXguY29uY2F0KCksdT0tdGhpcy5vZmZzZXRYLGQ9LXRoaXMub2Zmc2V0WSxmPSEhaS5hZGRpdGlvbmFsVHJhbnNmb3JtLGc9XCJwaXhlbHNcIj09PXRoaXMuZ3JhZGllbnRVbml0cz9cInVzZXJTcGFjZU9uVXNlXCI6XCJvYmplY3RCb3VuZGluZ0JveFwiO2lmKGguc29ydCgoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5vZmZzZXQtZS5vZmZzZXR9KSksXCJvYmplY3RCb3VuZGluZ0JveFwiPT09Zz8odS89dC53aWR0aCxkLz10LmhlaWdodCk6KHUrPXQud2lkdGgvMixkKz10LmhlaWdodC8yKSxcInBhdGhcIj09PXQudHlwZSYmXCJwZXJjZW50YWdlXCIhPT10aGlzLmdyYWRpZW50VW5pdHMmJih1LT10LnBhdGhPZmZzZXQueCxkLT10LnBhdGhPZmZzZXQueSksY1s0XS09dSxjWzVdLT1kLG89J2lkPVwiU1ZHSURfJyt0aGlzLmlkKydcIiBncmFkaWVudFVuaXRzPVwiJytnKydcIicsbys9JyBncmFkaWVudFRyYW5zZm9ybT1cIicrKGY/aS5hZGRpdGlvbmFsVHJhbnNmb3JtK1wiIFwiOlwiXCIpK1MudXRpbC5tYXRyaXhUb1NWRyhjKSsnXCIgJyxcImxpbmVhclwiPT09dGhpcy50eXBlP3M9W1wiPGxpbmVhckdyYWRpZW50IFwiLG8sJyB4MT1cIicsYS54MSwnXCIgeTE9XCInLGEueTEsJ1wiIHgyPVwiJyxhLngyLCdcIiB5Mj1cIicsYS55MiwnXCI+XFxuJ106XCJyYWRpYWxcIj09PXRoaXMudHlwZSYmKHM9W1wiPHJhZGlhbEdyYWRpZW50IFwiLG8sJyBjeD1cIicsbD9hLngxOmEueDIsJ1wiIGN5PVwiJyxsP2EueTE6YS55MiwnXCIgcj1cIicsbD9hLnIxOmEucjIsJ1wiIGZ4PVwiJyxsP2EueDI6YS54MSwnXCIgZnk9XCInLGw/YS55MjphLnkxLCdcIj5cXG4nXSksXCJyYWRpYWxcIj09PXRoaXMudHlwZSl7aWYobClmb3IoKGg9aC5jb25jYXQoKSkucmV2ZXJzZSgpLHI9MCxuPWgubGVuZ3RoO3I8bjtyKyspaFtyXS5vZmZzZXQ9MS1oW3JdLm9mZnNldDt2YXIgbT1NYXRoLm1pbihhLnIxLGEucjIpO2lmKG0+MCl7dmFyIHA9bS9NYXRoLm1heChhLnIxLGEucjIpO2ZvcihyPTAsbj1oLmxlbmd0aDtyPG47cisrKWhbcl0ub2Zmc2V0Kz1wKigxLWhbcl0ub2Zmc2V0KX19Zm9yKHI9MCxuPWgubGVuZ3RoO3I8bjtyKyspe3ZhciB2PWhbcl07cy5wdXNoKFwiPHN0b3AgXCIsJ29mZnNldD1cIicsMTAwKnYub2Zmc2V0K1wiJVwiLCdcIiBzdHlsZT1cInN0b3AtY29sb3I6Jyx2LmNvbG9yLHZvaWQgMCE9PXYub3BhY2l0eT9cIjtzdG9wLW9wYWNpdHk6IFwiK3Yub3BhY2l0eTpcIjtcIiwnXCIvPlxcbicpfXJldHVybiBzLnB1c2goXCJsaW5lYXJcIj09PXRoaXMudHlwZT9cIjwvbGluZWFyR3JhZGllbnQ+XFxuXCI6XCI8L3JhZGlhbEdyYWRpZW50PlxcblwiKSxzLmpvaW4oXCJcIil9LHRvTGl2ZTpmdW5jdGlvbih0KXt2YXIgZSxpLHIsbj1TLnV0aWwub2JqZWN0LmNsb25lKHRoaXMuY29vcmRzKTtpZih0aGlzLnR5cGUpe2ZvcihcImxpbmVhclwiPT09dGhpcy50eXBlP2U9dC5jcmVhdGVMaW5lYXJHcmFkaWVudChuLngxLG4ueTEsbi54MixuLnkyKTpcInJhZGlhbFwiPT09dGhpcy50eXBlJiYoZT10LmNyZWF0ZVJhZGlhbEdyYWRpZW50KG4ueDEsbi55MSxuLnIxLG4ueDIsbi55MixuLnIyKSksaT0wLHI9dGhpcy5jb2xvclN0b3BzLmxlbmd0aDtpPHI7aSsrKXt2YXIgcz10aGlzLmNvbG9yU3RvcHNbaV0uY29sb3Isbz10aGlzLmNvbG9yU3RvcHNbaV0ub3BhY2l0eSxhPXRoaXMuY29sb3JTdG9wc1tpXS5vZmZzZXQ7dm9pZCAwIT09byYmKHM9bmV3IFMuQ29sb3Iocykuc2V0QWxwaGEobykudG9SZ2JhKCkpLGUuYWRkQ29sb3JTdG9wKGEscyl9cmV0dXJuIGV9fX0pLFMudXRpbC5vYmplY3QuZXh0ZW5kKFMuR3JhZGllbnQse2Zyb21FbGVtZW50OmZ1bmN0aW9uKGUsaSxyLG4pe3ZhciBzPXBhcnNlRmxvYXQocikvKC8lJC8udGVzdChyKT8xMDA6MSk7cz1zPDA/MDpzPjE/MTpzLGlzTmFOKHMpJiYocz0xKTt2YXIgbyxhLGgsbCxjPWUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdG9wXCIpLHU9XCJ1c2VyU3BhY2VPblVzZVwiPT09ZS5nZXRBdHRyaWJ1dGUoXCJncmFkaWVudFVuaXRzXCIpP1wicGl4ZWxzXCI6XCJwZXJjZW50YWdlXCIsZD1lLmdldEF0dHJpYnV0ZShcImdyYWRpZW50VHJhbnNmb3JtXCIpfHxcIlwiLGY9W10sZz0wLG09MDtmb3IoXCJsaW5lYXJHcmFkaWVudFwiPT09ZS5ub2RlTmFtZXx8XCJMSU5FQVJHUkFESUVOVFwiPT09ZS5ub2RlTmFtZT8obz1cImxpbmVhclwiLGE9ZnVuY3Rpb24odCl7cmV0dXJue3gxOnQuZ2V0QXR0cmlidXRlKFwieDFcIil8fDAseTE6dC5nZXRBdHRyaWJ1dGUoXCJ5MVwiKXx8MCx4Mjp0LmdldEF0dHJpYnV0ZShcIngyXCIpfHxcIjEwMCVcIix5Mjp0LmdldEF0dHJpYnV0ZShcInkyXCIpfHwwfX0oZSkpOihvPVwicmFkaWFsXCIsYT1mdW5jdGlvbih0KXtyZXR1cm57eDE6dC5nZXRBdHRyaWJ1dGUoXCJmeFwiKXx8dC5nZXRBdHRyaWJ1dGUoXCJjeFwiKXx8XCI1MCVcIix5MTp0LmdldEF0dHJpYnV0ZShcImZ5XCIpfHx0LmdldEF0dHJpYnV0ZShcImN5XCIpfHxcIjUwJVwiLHIxOjAseDI6dC5nZXRBdHRyaWJ1dGUoXCJjeFwiKXx8XCI1MCVcIix5Mjp0LmdldEF0dHJpYnV0ZShcImN5XCIpfHxcIjUwJVwiLHIyOnQuZ2V0QXR0cmlidXRlKFwiclwiKXx8XCI1MCVcIn19KGUpKSxoPWMubGVuZ3RoO2gtLTspZi5wdXNoKHQoY1toXSxzKSk7cmV0dXJuIGw9Uy5wYXJzZVRyYW5zZm9ybUF0dHJpYnV0ZShkKSxmdW5jdGlvbih0LGUsaSxyKXt2YXIgbixzO09iamVjdC5rZXlzKGUpLmZvckVhY2goKGZ1bmN0aW9uKHQpe1wiSW5maW5pdHlcIj09PShuPWVbdF0pP3M9MTpcIi1JbmZpbml0eVwiPT09bj9zPTA6KHM9cGFyc2VGbG9hdChlW3RdLDEwKSxcInN0cmluZ1wiPT10eXBlb2YgbiYmL14oXFxkK1xcLlxcZCspJXwoXFxkKyklJC8udGVzdChuKSYmKHMqPS4wMSxcInBpeGVsc1wiPT09ciYmKFwieDFcIiE9PXQmJlwieDJcIiE9PXQmJlwicjJcIiE9PXR8fChzKj1pLnZpZXdCb3hXaWR0aHx8aS53aWR0aCksXCJ5MVwiIT09dCYmXCJ5MlwiIT09dHx8KHMqPWkudmlld0JveEhlaWdodHx8aS5oZWlnaHQpKSkpLGVbdF09c30pKX0oMCxhLG4sdSksXCJwaXhlbHNcIj09PXUmJihnPS1pLmxlZnQsbT0taS50b3ApLG5ldyBTLkdyYWRpZW50KHtpZDplLmdldEF0dHJpYnV0ZShcImlkXCIpLHR5cGU6byxjb29yZHM6YSxjb2xvclN0b3BzOmYsZ3JhZGllbnRVbml0czp1LGdyYWRpZW50VHJhbnNmb3JtOmwsb2Zmc2V0WDpnLG9mZnNldFk6bX0pfX0pfSgpLHY9Uy51dGlsLnRvRml4ZWQsUy5QYXR0ZXJuPVMudXRpbC5jcmVhdGVDbGFzcyh7cmVwZWF0OlwicmVwZWF0XCIsb2Zmc2V0WDowLG9mZnNldFk6MCxjcm9zc09yaWdpbjpcIlwiLHBhdHRlcm5UcmFuc2Zvcm06bnVsbCxpbml0aWFsaXplOmZ1bmN0aW9uKHQsZSl7aWYodHx8KHQ9e30pLHRoaXMuaWQ9Uy5PYmplY3QuX191aWQrKyx0aGlzLnNldE9wdGlvbnModCksIXQuc291cmNlfHx0LnNvdXJjZSYmXCJzdHJpbmdcIiE9dHlwZW9mIHQuc291cmNlKWUmJmUodGhpcyk7ZWxzZXt2YXIgaT10aGlzO3RoaXMuc291cmNlPVMudXRpbC5jcmVhdGVJbWFnZSgpLFMudXRpbC5sb2FkSW1hZ2UodC5zb3VyY2UsKGZ1bmN0aW9uKHQscil7aS5zb3VyY2U9dCxlJiZlKGkscil9KSxudWxsLHRoaXMuY3Jvc3NPcmlnaW4pfX0sdG9PYmplY3Q6ZnVuY3Rpb24odCl7dmFyIGUsaSxyPVMuT2JqZWN0Lk5VTV9GUkFDVElPTl9ESUdJVFM7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHRoaXMuc291cmNlLnNyYz9lPXRoaXMuc291cmNlLnNyYzpcIm9iamVjdFwiPT10eXBlb2YgdGhpcy5zb3VyY2UmJnRoaXMuc291cmNlLnRvRGF0YVVSTCYmKGU9dGhpcy5zb3VyY2UudG9EYXRhVVJMKCkpLGk9e3R5cGU6XCJwYXR0ZXJuXCIsc291cmNlOmUscmVwZWF0OnRoaXMucmVwZWF0LGNyb3NzT3JpZ2luOnRoaXMuY3Jvc3NPcmlnaW4sb2Zmc2V0WDp2KHRoaXMub2Zmc2V0WCxyKSxvZmZzZXRZOnYodGhpcy5vZmZzZXRZLHIpLHBhdHRlcm5UcmFuc2Zvcm06dGhpcy5wYXR0ZXJuVHJhbnNmb3JtP3RoaXMucGF0dGVyblRyYW5zZm9ybS5jb25jYXQoKTpudWxsfSxTLnV0aWwucG9wdWxhdGVXaXRoUHJvcGVydGllcyh0aGlzLGksdCksaX0sdG9TVkc6ZnVuY3Rpb24odCl7dmFyIGU9XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5zb3VyY2U/dGhpcy5zb3VyY2UoKTp0aGlzLnNvdXJjZSxpPWUud2lkdGgvdC53aWR0aCxyPWUuaGVpZ2h0L3QuaGVpZ2h0LG49dGhpcy5vZmZzZXRYL3Qud2lkdGgscz10aGlzLm9mZnNldFkvdC5oZWlnaHQsbz1cIlwiO3JldHVyblwicmVwZWF0LXhcIiE9PXRoaXMucmVwZWF0JiZcIm5vLXJlcGVhdFwiIT09dGhpcy5yZXBlYXR8fChyPTEscyYmKHIrPU1hdGguYWJzKHMpKSksXCJyZXBlYXQteVwiIT09dGhpcy5yZXBlYXQmJlwibm8tcmVwZWF0XCIhPT10aGlzLnJlcGVhdHx8KGk9MSxuJiYoaSs9TWF0aC5hYnMobikpKSxlLnNyYz9vPWUuc3JjOmUudG9EYXRhVVJMJiYobz1lLnRvRGF0YVVSTCgpKSwnPHBhdHRlcm4gaWQ9XCJTVkdJRF8nK3RoaXMuaWQrJ1wiIHg9XCInK24rJ1wiIHk9XCInK3MrJ1wiIHdpZHRoPVwiJytpKydcIiBoZWlnaHQ9XCInK3IrJ1wiPlxcbjxpbWFnZSB4PVwiMFwiIHk9XCIwXCIgd2lkdGg9XCInK2Uud2lkdGgrJ1wiIGhlaWdodD1cIicrZS5oZWlnaHQrJ1wiIHhsaW5rOmhyZWY9XCInK28rJ1wiPjwvaW1hZ2U+XFxuPC9wYXR0ZXJuPlxcbid9LHNldE9wdGlvbnM6ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHQpdGhpc1tlXT10W2VdfSx0b0xpdmU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zb3VyY2U7aWYoIWUpcmV0dXJuXCJcIjtpZih2b2lkIDAhPT1lLnNyYyl7aWYoIWUuY29tcGxldGUpcmV0dXJuXCJcIjtpZigwPT09ZS5uYXR1cmFsV2lkdGh8fDA9PT1lLm5hdHVyYWxIZWlnaHQpcmV0dXJuXCJcIn1yZXR1cm4gdC5jcmVhdGVQYXR0ZXJuKGUsdGhpcy5yZXBlYXQpfX0pLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljfHwodC5mYWJyaWM9e30pLGk9ZS51dGlsLnRvRml4ZWQ7ZS5TaGFkb3c/ZS53YXJuKFwiZmFicmljLlNoYWRvdyBpcyBhbHJlYWR5IGRlZmluZWQuXCIpOihlLlNoYWRvdz1lLnV0aWwuY3JlYXRlQ2xhc3Moe2NvbG9yOlwicmdiKDAsMCwwKVwiLGJsdXI6MCxvZmZzZXRYOjAsb2Zmc2V0WTowLGFmZmVjdFN0cm9rZTohMSxpbmNsdWRlRGVmYXVsdFZhbHVlczohMCxub25TY2FsaW5nOiExLGluaXRpYWxpemU6ZnVuY3Rpb24odCl7Zm9yKHZhciBpIGluXCJzdHJpbmdcIj09dHlwZW9mIHQmJih0PXRoaXMuX3BhcnNlU2hhZG93KHQpKSx0KXRoaXNbaV09dFtpXTt0aGlzLmlkPWUuT2JqZWN0Ll9fdWlkKyt9LF9wYXJzZVNoYWRvdzpmdW5jdGlvbih0KXt2YXIgaT10LnRyaW0oKSxyPWUuU2hhZG93LnJlT2Zmc2V0c0FuZEJsdXIuZXhlYyhpKXx8W107cmV0dXJue2NvbG9yOihpLnJlcGxhY2UoZS5TaGFkb3cucmVPZmZzZXRzQW5kQmx1cixcIlwiKXx8XCJyZ2IoMCwwLDApXCIpLnRyaW0oKSxvZmZzZXRYOnBhcnNlRmxvYXQoclsxXSwxMCl8fDAsb2Zmc2V0WTpwYXJzZUZsb2F0KHJbMl0sMTApfHwwLGJsdXI6cGFyc2VGbG9hdChyWzNdLDEwKXx8MH19LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMub2Zmc2V0WCx0aGlzLm9mZnNldFksdGhpcy5ibHVyLHRoaXMuY29sb3JdLmpvaW4oXCJweCBcIil9LHRvU1ZHOmZ1bmN0aW9uKHQpe3ZhciByPTQwLG49NDAscz1lLk9iamVjdC5OVU1fRlJBQ1RJT05fRElHSVRTLG89ZS51dGlsLnJvdGF0ZVZlY3Rvcih7eDp0aGlzLm9mZnNldFgseTp0aGlzLm9mZnNldFl9LGUudXRpbC5kZWdyZWVzVG9SYWRpYW5zKC10LmFuZ2xlKSksYT1uZXcgZS5Db2xvcih0aGlzLmNvbG9yKTtyZXR1cm4gdC53aWR0aCYmdC5oZWlnaHQmJihyPTEwMCppKChNYXRoLmFicyhvLngpK3RoaXMuYmx1cikvdC53aWR0aCxzKSsyMCxuPTEwMCppKChNYXRoLmFicyhvLnkpK3RoaXMuYmx1cikvdC5oZWlnaHQscykrMjApLHQuZmxpcFgmJihvLngqPS0xKSx0LmZsaXBZJiYoby55Kj0tMSksJzxmaWx0ZXIgaWQ9XCJTVkdJRF8nK3RoaXMuaWQrJ1wiIHk9XCItJytuKyclXCIgaGVpZ2h0PVwiJysoMTAwKzIqbikrJyVcIiB4PVwiLScrcisnJVwiIHdpZHRoPVwiJysoMTAwKzIqcikrJyVcIiA+XFxuXFx0PGZlR2F1c3NpYW5CbHVyIGluPVwiU291cmNlQWxwaGFcIiBzdGREZXZpYXRpb249XCInK2kodGhpcy5ibHVyP3RoaXMuYmx1ci8yOjAscykrJ1wiPjwvZmVHYXVzc2lhbkJsdXI+XFxuXFx0PGZlT2Zmc2V0IGR4PVwiJytpKG8ueCxzKSsnXCIgZHk9XCInK2koby55LHMpKydcIiByZXN1bHQ9XCJvQmx1clwiID48L2ZlT2Zmc2V0PlxcblxcdDxmZUZsb29kIGZsb29kLWNvbG9yPVwiJythLnRvUmdiKCkrJ1wiIGZsb29kLW9wYWNpdHk9XCInK2EuZ2V0QWxwaGEoKSsnXCIvPlxcblxcdDxmZUNvbXBvc2l0ZSBpbjI9XCJvQmx1clwiIG9wZXJhdG9yPVwiaW5cIiAvPlxcblxcdDxmZU1lcmdlPlxcblxcdFxcdDxmZU1lcmdlTm9kZT48L2ZlTWVyZ2VOb2RlPlxcblxcdFxcdDxmZU1lcmdlTm9kZSBpbj1cIlNvdXJjZUdyYXBoaWNcIj48L2ZlTWVyZ2VOb2RlPlxcblxcdDwvZmVNZXJnZT5cXG48L2ZpbHRlcj5cXG4nfSx0b09iamVjdDpmdW5jdGlvbigpe2lmKHRoaXMuaW5jbHVkZURlZmF1bHRWYWx1ZXMpcmV0dXJue2NvbG9yOnRoaXMuY29sb3IsYmx1cjp0aGlzLmJsdXIsb2Zmc2V0WDp0aGlzLm9mZnNldFgsb2Zmc2V0WTp0aGlzLm9mZnNldFksYWZmZWN0U3Ryb2tlOnRoaXMuYWZmZWN0U3Ryb2tlLG5vblNjYWxpbmc6dGhpcy5ub25TY2FsaW5nfTt2YXIgdD17fSxpPWUuU2hhZG93LnByb3RvdHlwZTtyZXR1cm5bXCJjb2xvclwiLFwiYmx1clwiLFwib2Zmc2V0WFwiLFwib2Zmc2V0WVwiLFwiYWZmZWN0U3Ryb2tlXCIsXCJub25TY2FsaW5nXCJdLmZvckVhY2goKGZ1bmN0aW9uKGUpe3RoaXNbZV0hPT1pW2VdJiYodFtlXT10aGlzW2VdKX0pLHRoaXMpLHR9fSksZS5TaGFkb3cucmVPZmZzZXRzQW5kQmx1cj0vKD86XFxzfF4pKC0/XFxkKyg/OlxcLlxcZCopPyg/OnB4KT8oPzpcXHM/fCQpKT8oLT9cXGQrKD86XFwuXFxkKik/KD86cHgpPyg/Olxccz98JCkpPyhcXGQrKD86XFwuXFxkKik/KD86cHgpPyk/KD86XFxzP3wkKSg/OiR8XFxzKS8pfShlKSxmdW5jdGlvbigpe2lmKFMuU3RhdGljQ2FudmFzKVMud2FybihcImZhYnJpYy5TdGF0aWNDYW52YXMgaXMgYWxyZWFkeSBkZWZpbmVkLlwiKTtlbHNle3ZhciB0PVMudXRpbC5vYmplY3QuZXh0ZW5kLGU9Uy51dGlsLmdldEVsZW1lbnRPZmZzZXQsaT1TLnV0aWwucmVtb3ZlRnJvbUFycmF5LHI9Uy51dGlsLnRvRml4ZWQsbj1TLnV0aWwudHJhbnNmb3JtUG9pbnQscz1TLnV0aWwuaW52ZXJ0VHJhbnNmb3JtLG89Uy51dGlsLmdldE5vZGVDYW52YXMsYT1TLnV0aWwuY3JlYXRlQ2FudmFzRWxlbWVudCxoPW5ldyBFcnJvcihcIkNvdWxkIG5vdCBpbml0aWFsaXplIGBjYW52YXNgIGVsZW1lbnRcIik7Uy5TdGF0aWNDYW52YXM9Uy51dGlsLmNyZWF0ZUNsYXNzKFMuQ29tbW9uTWV0aG9kcyx7aW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUpe2V8fChlPXt9KSx0aGlzLnJlbmRlckFuZFJlc2V0Qm91bmQ9dGhpcy5yZW5kZXJBbmRSZXNldC5iaW5kKHRoaXMpLHRoaXMucmVxdWVzdFJlbmRlckFsbEJvdW5kPXRoaXMucmVxdWVzdFJlbmRlckFsbC5iaW5kKHRoaXMpLHRoaXMuX2luaXRTdGF0aWModCxlKX0sYmFja2dyb3VuZENvbG9yOlwiXCIsYmFja2dyb3VuZEltYWdlOm51bGwsb3ZlcmxheUNvbG9yOlwiXCIsb3ZlcmxheUltYWdlOm51bGwsaW5jbHVkZURlZmF1bHRWYWx1ZXM6ITAsc3RhdGVmdWw6ITEscmVuZGVyT25BZGRSZW1vdmU6ITAsY29udHJvbHNBYm92ZU92ZXJsYXk6ITEsYWxsb3dUb3VjaFNjcm9sbGluZzohMSxpbWFnZVNtb290aGluZ0VuYWJsZWQ6ITAsdmlld3BvcnRUcmFuc2Zvcm06Uy5pTWF0cml4LmNvbmNhdCgpLGJhY2tncm91bmRWcHQ6ITAsb3ZlcmxheVZwdDohMCxlbmFibGVSZXRpbmFTY2FsaW5nOiEwLHZwdENvb3Jkczp7fSxza2lwT2Zmc2NyZWVuOiEwLGNsaXBQYXRoOnZvaWQgMCxfaW5pdFN0YXRpYzpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMucmVxdWVzdFJlbmRlckFsbEJvdW5kO3RoaXMuX29iamVjdHM9W10sdGhpcy5fY3JlYXRlTG93ZXJDYW52YXModCksdGhpcy5faW5pdE9wdGlvbnMoZSksdGhpcy5pbnRlcmFjdGl2ZXx8dGhpcy5faW5pdFJldGluYVNjYWxpbmcoKSxlLm92ZXJsYXlJbWFnZSYmdGhpcy5zZXRPdmVybGF5SW1hZ2UoZS5vdmVybGF5SW1hZ2UsaSksZS5iYWNrZ3JvdW5kSW1hZ2UmJnRoaXMuc2V0QmFja2dyb3VuZEltYWdlKGUuYmFja2dyb3VuZEltYWdlLGkpLGUuYmFja2dyb3VuZENvbG9yJiZ0aGlzLnNldEJhY2tncm91bmRDb2xvcihlLmJhY2tncm91bmRDb2xvcixpKSxlLm92ZXJsYXlDb2xvciYmdGhpcy5zZXRPdmVybGF5Q29sb3IoZS5vdmVybGF5Q29sb3IsaSksdGhpcy5jYWxjT2Zmc2V0KCl9LF9pc1JldGluYVNjYWxpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gUy5kZXZpY2VQaXhlbFJhdGlvPjEmJnRoaXMuZW5hYmxlUmV0aW5hU2NhbGluZ30sZ2V0UmV0aW5hU2NhbGluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1JldGluYVNjYWxpbmcoKT9NYXRoLm1heCgxLFMuZGV2aWNlUGl4ZWxSYXRpbyk6MX0sX2luaXRSZXRpbmFTY2FsaW5nOmZ1bmN0aW9uKCl7aWYodGhpcy5faXNSZXRpbmFTY2FsaW5nKCkpe3ZhciB0PVMuZGV2aWNlUGl4ZWxSYXRpbzt0aGlzLl9faW5pdFJldGluYVNjYWxpbmcodCx0aGlzLmxvd2VyQ2FudmFzRWwsdGhpcy5jb250ZXh0Q29udGFpbmVyKSx0aGlzLnVwcGVyQ2FudmFzRWwmJnRoaXMuX19pbml0UmV0aW5hU2NhbGluZyh0LHRoaXMudXBwZXJDYW52YXNFbCx0aGlzLmNvbnRleHRUb3ApfX0sX19pbml0UmV0aW5hU2NhbGluZzpmdW5jdGlvbih0LGUsaSl7ZS5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLHRoaXMud2lkdGgqdCksZS5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIix0aGlzLmhlaWdodCp0KSxpLnNjYWxlKHQsdCl9LGNhbGNPZmZzZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2Zmc2V0PWUodGhpcy5sb3dlckNhbnZhc0VsKSx0aGlzfSxzZXRPdmVybGF5SW1hZ2U6ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLl9fc2V0QmdPdmVybGF5SW1hZ2UoXCJvdmVybGF5SW1hZ2VcIix0LGUsaSl9LHNldEJhY2tncm91bmRJbWFnZTpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRoaXMuX19zZXRCZ092ZXJsYXlJbWFnZShcImJhY2tncm91bmRJbWFnZVwiLHQsZSxpKX0sc2V0T3ZlcmxheUNvbG9yOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX19zZXRCZ092ZXJsYXlDb2xvcihcIm92ZXJsYXlDb2xvclwiLHQsZSl9LHNldEJhY2tncm91bmRDb2xvcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9fc2V0QmdPdmVybGF5Q29sb3IoXCJiYWNrZ3JvdW5kQ29sb3JcIix0LGUpfSxfX3NldEJnT3ZlcmxheUltYWdlOmZ1bmN0aW9uKHQsZSxpLHIpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlP1MudXRpbC5sb2FkSW1hZ2UoZSwoZnVuY3Rpb24oZSxuKXtpZihlKXt2YXIgcz1uZXcgUy5JbWFnZShlLHIpO3RoaXNbdF09cyxzLmNhbnZhcz10aGlzfWkmJmkoZSxuKX0pLHRoaXMsciYmci5jcm9zc09yaWdpbik6KHImJmUuc2V0T3B0aW9ucyhyKSx0aGlzW3RdPWUsZSYmKGUuY2FudmFzPXRoaXMpLGkmJmkoZSwhMSkpLHRoaXN9LF9fc2V0QmdPdmVybGF5Q29sb3I6ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzW3RdPWUsdGhpcy5faW5pdEdyYWRpZW50KGUsdCksdGhpcy5faW5pdFBhdHRlcm4oZSx0LGkpLHRoaXN9LF9jcmVhdGVDYW52YXNFbGVtZW50OmZ1bmN0aW9uKCl7dmFyIHQ9YSgpO2lmKCF0KXRocm93IGg7aWYodC5zdHlsZXx8KHQuc3R5bGU9e30pLHZvaWQgMD09PXQuZ2V0Q29udGV4dCl0aHJvdyBoO3JldHVybiB0fSxfaW5pdE9wdGlvbnM6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5sb3dlckNhbnZhc0VsO3RoaXMuX3NldE9wdGlvbnModCksdGhpcy53aWR0aD10aGlzLndpZHRofHxwYXJzZUludChlLndpZHRoLDEwKXx8MCx0aGlzLmhlaWdodD10aGlzLmhlaWdodHx8cGFyc2VJbnQoZS5oZWlnaHQsMTApfHwwLHRoaXMubG93ZXJDYW52YXNFbC5zdHlsZSYmKGUud2lkdGg9dGhpcy53aWR0aCxlLmhlaWdodD10aGlzLmhlaWdodCxlLnN0eWxlLndpZHRoPXRoaXMud2lkdGgrXCJweFwiLGUuc3R5bGUuaGVpZ2h0PXRoaXMuaGVpZ2h0K1wicHhcIix0aGlzLnZpZXdwb3J0VHJhbnNmb3JtPXRoaXMudmlld3BvcnRUcmFuc2Zvcm0uc2xpY2UoKSl9LF9jcmVhdGVMb3dlckNhbnZhczpmdW5jdGlvbih0KXt0JiZ0LmdldENvbnRleHQ/dGhpcy5sb3dlckNhbnZhc0VsPXQ6dGhpcy5sb3dlckNhbnZhc0VsPVMudXRpbC5nZXRCeUlkKHQpfHx0aGlzLl9jcmVhdGVDYW52YXNFbGVtZW50KCksUy51dGlsLmFkZENsYXNzKHRoaXMubG93ZXJDYW52YXNFbCxcImxvd2VyLWNhbnZhc1wiKSx0aGlzLl9vcmlnaW5hbENhbnZhc1N0eWxlPXRoaXMubG93ZXJDYW52YXNFbC5zdHlsZSx0aGlzLmludGVyYWN0aXZlJiZ0aGlzLl9hcHBseUNhbnZhc1N0eWxlKHRoaXMubG93ZXJDYW52YXNFbCksdGhpcy5jb250ZXh0Q29udGFpbmVyPXRoaXMubG93ZXJDYW52YXNFbC5nZXRDb250ZXh0KFwiMmRcIil9LGdldFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2lkdGh9LGdldEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhlaWdodH0sc2V0V2lkdGg6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5zZXREaW1lbnNpb25zKHt3aWR0aDp0fSxlKX0sc2V0SGVpZ2h0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc2V0RGltZW5zaW9ucyh7aGVpZ2h0OnR9LGUpfSxzZXREaW1lbnNpb25zOmZ1bmN0aW9uKHQsZSl7dmFyIGk7Zm9yKHZhciByIGluIGU9ZXx8e30sdClpPXRbcl0sZS5jc3NPbmx5fHwodGhpcy5fc2V0QmFja3N0b3JlRGltZW5zaW9uKHIsdFtyXSksaSs9XCJweFwiLHRoaXMuaGFzTG9zdENvbnRleHQ9ITApLGUuYmFja3N0b3JlT25seXx8dGhpcy5fc2V0Q3NzRGltZW5zaW9uKHIsaSk7cmV0dXJuIHRoaXMuX2lzQ3VycmVudGx5RHJhd2luZyYmdGhpcy5mcmVlRHJhd2luZ0JydXNoJiZ0aGlzLmZyZWVEcmF3aW5nQnJ1c2guX3NldEJydXNoU3R5bGVzKHRoaXMuY29udGV4dFRvcCksdGhpcy5faW5pdFJldGluYVNjYWxpbmcoKSx0aGlzLmNhbGNPZmZzZXQoKSxlLmNzc09ubHl8fHRoaXMucmVxdWVzdFJlbmRlckFsbCgpLHRoaXN9LF9zZXRCYWNrc3RvcmVEaW1lbnNpb246ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5sb3dlckNhbnZhc0VsW3RdPWUsdGhpcy51cHBlckNhbnZhc0VsJiYodGhpcy51cHBlckNhbnZhc0VsW3RdPWUpLHRoaXMuY2FjaGVDYW52YXNFbCYmKHRoaXMuY2FjaGVDYW52YXNFbFt0XT1lKSx0aGlzW3RdPWUsdGhpc30sX3NldENzc0RpbWVuc2lvbjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmxvd2VyQ2FudmFzRWwuc3R5bGVbdF09ZSx0aGlzLnVwcGVyQ2FudmFzRWwmJih0aGlzLnVwcGVyQ2FudmFzRWwuc3R5bGVbdF09ZSksdGhpcy53cmFwcGVyRWwmJih0aGlzLndyYXBwZXJFbC5zdHlsZVt0XT1lKSx0aGlzfSxnZXRab29tOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlld3BvcnRUcmFuc2Zvcm1bMF19LHNldFZpZXdwb3J0VHJhbnNmb3JtOmZ1bmN0aW9uKHQpe3ZhciBlLGkscixuPXRoaXMuX2FjdGl2ZU9iamVjdCxzPXRoaXMuYmFja2dyb3VuZEltYWdlLG89dGhpcy5vdmVybGF5SW1hZ2U7Zm9yKHRoaXMudmlld3BvcnRUcmFuc2Zvcm09dCxpPTAscj10aGlzLl9vYmplY3RzLmxlbmd0aDtpPHI7aSsrKShlPXRoaXMuX29iamVjdHNbaV0pLmdyb3VwfHxlLnNldENvb3JkcyghMCk7cmV0dXJuIG4mJm4uc2V0Q29vcmRzKCkscyYmcy5zZXRDb29yZHMoITApLG8mJm8uc2V0Q29vcmRzKCEwKSx0aGlzLmNhbGNWaWV3cG9ydEJvdW5kYXJpZXMoKSx0aGlzLnJlbmRlck9uQWRkUmVtb3ZlJiZ0aGlzLnJlcXVlc3RSZW5kZXJBbGwoKSx0aGlzfSx6b29tVG9Qb2ludDpmdW5jdGlvbih0LGUpe3ZhciBpPXQscj10aGlzLnZpZXdwb3J0VHJhbnNmb3JtLnNsaWNlKDApO3Q9bih0LHModGhpcy52aWV3cG9ydFRyYW5zZm9ybSkpLHJbMF09ZSxyWzNdPWU7dmFyIG89bih0LHIpO3JldHVybiByWzRdKz1pLngtby54LHJbNV0rPWkueS1vLnksdGhpcy5zZXRWaWV3cG9ydFRyYW5zZm9ybShyKX0sc2V0Wm9vbTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy56b29tVG9Qb2ludChuZXcgUy5Qb2ludCgwLDApLHQpLHRoaXN9LGFic29sdXRlUGFuOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudmlld3BvcnRUcmFuc2Zvcm0uc2xpY2UoMCk7cmV0dXJuIGVbNF09LXQueCxlWzVdPS10LnksdGhpcy5zZXRWaWV3cG9ydFRyYW5zZm9ybShlKX0scmVsYXRpdmVQYW46ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYWJzb2x1dGVQYW4obmV3IFMuUG9pbnQoLXQueC10aGlzLnZpZXdwb3J0VHJhbnNmb3JtWzRdLC10LnktdGhpcy52aWV3cG9ydFRyYW5zZm9ybVs1XSkpfSxnZXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG93ZXJDYW52YXNFbH0sX29uT2JqZWN0QWRkZWQ6ZnVuY3Rpb24odCl7dGhpcy5zdGF0ZWZ1bCYmdC5zZXR1cFN0YXRlKCksdC5fc2V0KFwiY2FudmFzXCIsdGhpcyksdC5zZXRDb29yZHMoKSx0aGlzLmZpcmUoXCJvYmplY3Q6YWRkZWRcIix7dGFyZ2V0OnR9KSx0LmZpcmUoXCJhZGRlZFwiKX0sX29uT2JqZWN0UmVtb3ZlZDpmdW5jdGlvbih0KXt0aGlzLmZpcmUoXCJvYmplY3Q6cmVtb3ZlZFwiLHt0YXJnZXQ6dH0pLHQuZmlyZShcInJlbW92ZWRcIiksZGVsZXRlIHQuY2FudmFzfSxjbGVhckNvbnRleHQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2xlYXJSZWN0KDAsMCx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KSx0aGlzfSxnZXRDb250ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGV4dENvbnRhaW5lcn0sY2xlYXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW1vdmUuYXBwbHkodGhpcyx0aGlzLmdldE9iamVjdHMoKSksdGhpcy5iYWNrZ3JvdW5kSW1hZ2U9bnVsbCx0aGlzLm92ZXJsYXlJbWFnZT1udWxsLHRoaXMuYmFja2dyb3VuZENvbG9yPVwiXCIsdGhpcy5vdmVybGF5Q29sb3I9XCJcIix0aGlzLl9oYXNJVGV4dEhhbmRsZXJzJiYodGhpcy5vZmYoXCJtb3VzZTp1cFwiLHRoaXMuX21vdXNlVXBJVGV4dEhhbmRsZXIpLHRoaXMuX2lUZXh0SW5zdGFuY2VzPW51bGwsdGhpcy5faGFzSVRleHRIYW5kbGVycz0hMSksdGhpcy5jbGVhckNvbnRleHQodGhpcy5jb250ZXh0Q29udGFpbmVyKSx0aGlzLmZpcmUoXCJjYW52YXM6Y2xlYXJlZFwiKSx0aGlzLnJlbmRlck9uQWRkUmVtb3ZlJiZ0aGlzLnJlcXVlc3RSZW5kZXJBbGwoKSx0aGlzfSxyZW5kZXJBbGw6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNvbnRleHRDb250YWluZXI7cmV0dXJuIHRoaXMucmVuZGVyQ2FudmFzKHQsdGhpcy5fb2JqZWN0cyksdGhpc30scmVuZGVyQW5kUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLmlzUmVuZGVyaW5nPTAsdGhpcy5yZW5kZXJBbGwoKX0scmVxdWVzdFJlbmRlckFsbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzUmVuZGVyaW5nfHwodGhpcy5pc1JlbmRlcmluZz1TLnV0aWwucmVxdWVzdEFuaW1GcmFtZSh0aGlzLnJlbmRlckFuZFJlc2V0Qm91bmQpKSx0aGlzfSxjYWxjVmlld3BvcnRCb3VuZGFyaWVzOmZ1bmN0aW9uKCl7dmFyIHQ9e30sZT10aGlzLndpZHRoLGk9dGhpcy5oZWlnaHQscj1zKHRoaXMudmlld3BvcnRUcmFuc2Zvcm0pO3JldHVybiB0LnRsPW4oe3g6MCx5OjB9LHIpLHQuYnI9bih7eDplLHk6aX0sciksdC50cj1uZXcgUy5Qb2ludCh0LmJyLngsdC50bC55KSx0LmJsPW5ldyBTLlBvaW50KHQudGwueCx0LmJyLnkpLHRoaXMudnB0Q29vcmRzPXQsdH0sY2FuY2VsUmVxdWVzdGVkUmVuZGVyOmZ1bmN0aW9uKCl7dGhpcy5pc1JlbmRlcmluZyYmKFMudXRpbC5jYW5jZWxBbmltRnJhbWUodGhpcy5pc1JlbmRlcmluZyksdGhpcy5pc1JlbmRlcmluZz0wKX0scmVuZGVyQ2FudmFzOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy52aWV3cG9ydFRyYW5zZm9ybSxyPXRoaXMuY2xpcFBhdGg7dGhpcy5jYW5jZWxSZXF1ZXN0ZWRSZW5kZXIoKSx0aGlzLmNhbGNWaWV3cG9ydEJvdW5kYXJpZXMoKSx0aGlzLmNsZWFyQ29udGV4dCh0KSxTLnV0aWwuc2V0SW1hZ2VTbW9vdGhpbmcodCx0aGlzLmltYWdlU21vb3RoaW5nRW5hYmxlZCksdGhpcy5maXJlKFwiYmVmb3JlOnJlbmRlclwiLHtjdHg6dH0pLHRoaXMuX3JlbmRlckJhY2tncm91bmQodCksdC5zYXZlKCksdC50cmFuc2Zvcm0oaVswXSxpWzFdLGlbMl0saVszXSxpWzRdLGlbNV0pLHRoaXMuX3JlbmRlck9iamVjdHModCxlKSx0LnJlc3RvcmUoKSwhdGhpcy5jb250cm9sc0Fib3ZlT3ZlcmxheSYmdGhpcy5pbnRlcmFjdGl2ZSYmdGhpcy5kcmF3Q29udHJvbHModCksciYmKHIuY2FudmFzPXRoaXMsci5zaG91bGRDYWNoZSgpLHIuX3RyYW5zZm9ybURvbmU9ITAsci5yZW5kZXJDYWNoZSh7Zm9yQ2xpcHBpbmc6ITB9KSx0aGlzLmRyYXdDbGlwUGF0aE9uQ2FudmFzKHQpKSx0aGlzLl9yZW5kZXJPdmVybGF5KHQpLHRoaXMuY29udHJvbHNBYm92ZU92ZXJsYXkmJnRoaXMuaW50ZXJhY3RpdmUmJnRoaXMuZHJhd0NvbnRyb2xzKHQpLHRoaXMuZmlyZShcImFmdGVyOnJlbmRlclwiLHtjdHg6dH0pfSxkcmF3Q2xpcFBhdGhPbkNhbnZhczpmdW5jdGlvbih0KXt2YXIgZT10aGlzLnZpZXdwb3J0VHJhbnNmb3JtLGk9dGhpcy5jbGlwUGF0aDt0LnNhdmUoKSx0LnRyYW5zZm9ybShlWzBdLGVbMV0sZVsyXSxlWzNdLGVbNF0sZVs1XSksdC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249XCJkZXN0aW5hdGlvbi1pblwiLGkudHJhbnNmb3JtKHQpLHQuc2NhbGUoMS9pLnpvb21YLDEvaS56b29tWSksdC5kcmF3SW1hZ2UoaS5fY2FjaGVDYW52YXMsLWkuY2FjaGVUcmFuc2xhdGlvblgsLWkuY2FjaGVUcmFuc2xhdGlvblkpLHQucmVzdG9yZSgpfSxfcmVuZGVyT2JqZWN0czpmdW5jdGlvbih0LGUpe3ZhciBpLHI7Zm9yKGk9MCxyPWUubGVuZ3RoO2k8cjsrK2kpZVtpXSYmZVtpXS5yZW5kZXIodCl9LF9yZW5kZXJCYWNrZ3JvdW5kT3JPdmVybGF5OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpc1tlK1wiQ29sb3JcIl0scj10aGlzW2UrXCJJbWFnZVwiXSxuPXRoaXMudmlld3BvcnRUcmFuc2Zvcm0scz10aGlzW2UrXCJWcHRcIl07aWYoaXx8cil7aWYoaSl7dC5zYXZlKCksdC5iZWdpblBhdGgoKSx0Lm1vdmVUbygwLDApLHQubGluZVRvKHRoaXMud2lkdGgsMCksdC5saW5lVG8odGhpcy53aWR0aCx0aGlzLmhlaWdodCksdC5saW5lVG8oMCx0aGlzLmhlaWdodCksdC5jbG9zZVBhdGgoKSx0LmZpbGxTdHlsZT1pLnRvTGl2ZT9pLnRvTGl2ZSh0LHRoaXMpOmkscyYmdC50cmFuc2Zvcm0oblswXSxuWzFdLG5bMl0sblszXSxuWzRdLG5bNV0pLHQudHJhbnNmb3JtKDEsMCwwLDEsaS5vZmZzZXRYfHwwLGkub2Zmc2V0WXx8MCk7dmFyIG89aS5ncmFkaWVudFRyYW5zZm9ybXx8aS5wYXR0ZXJuVHJhbnNmb3JtO28mJnQudHJhbnNmb3JtKG9bMF0sb1sxXSxvWzJdLG9bM10sb1s0XSxvWzVdKSx0LmZpbGwoKSx0LnJlc3RvcmUoKX1yJiYodC5zYXZlKCkscyYmdC50cmFuc2Zvcm0oblswXSxuWzFdLG5bMl0sblszXSxuWzRdLG5bNV0pLHIucmVuZGVyKHQpLHQucmVzdG9yZSgpKX19LF9yZW5kZXJCYWNrZ3JvdW5kOmZ1bmN0aW9uKHQpe3RoaXMuX3JlbmRlckJhY2tncm91bmRPck92ZXJsYXkodCxcImJhY2tncm91bmRcIil9LF9yZW5kZXJPdmVybGF5OmZ1bmN0aW9uKHQpe3RoaXMuX3JlbmRlckJhY2tncm91bmRPck92ZXJsYXkodCxcIm92ZXJsYXlcIil9LGdldENlbnRlcjpmdW5jdGlvbigpe3JldHVybnt0b3A6dGhpcy5oZWlnaHQvMixsZWZ0OnRoaXMud2lkdGgvMn19LGdldENlbnRlclBvaW50OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBTLlBvaW50KHRoaXMud2lkdGgvMix0aGlzLmhlaWdodC8yKX0sY2VudGVyT2JqZWN0SDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2VudGVyT2JqZWN0KHQsbmV3IFMuUG9pbnQodGhpcy5nZXRDZW50ZXJQb2ludCgpLngsdC5nZXRDZW50ZXJQb2ludCgpLnkpKX0sY2VudGVyT2JqZWN0VjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY2VudGVyT2JqZWN0KHQsbmV3IFMuUG9pbnQodC5nZXRDZW50ZXJQb2ludCgpLngsdGhpcy5nZXRDZW50ZXJQb2ludCgpLnkpKX0sY2VudGVyT2JqZWN0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0Q2VudGVyUG9pbnQoKTtyZXR1cm4gdGhpcy5fY2VudGVyT2JqZWN0KHQsZSl9LHZpZXdwb3J0Q2VudGVyT2JqZWN0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0VnBDZW50ZXIoKTtyZXR1cm4gdGhpcy5fY2VudGVyT2JqZWN0KHQsZSl9LHZpZXdwb3J0Q2VudGVyT2JqZWN0SDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFZwQ2VudGVyKCk7cmV0dXJuIHRoaXMuX2NlbnRlck9iamVjdCh0LG5ldyBTLlBvaW50KGUueCx0LmdldENlbnRlclBvaW50KCkueSkpLHRoaXN9LHZpZXdwb3J0Q2VudGVyT2JqZWN0VjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFZwQ2VudGVyKCk7cmV0dXJuIHRoaXMuX2NlbnRlck9iamVjdCh0LG5ldyBTLlBvaW50KHQuZ2V0Q2VudGVyUG9pbnQoKS54LGUueSkpfSxnZXRWcENlbnRlcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0Q2VudGVyUG9pbnQoKSxlPXModGhpcy52aWV3cG9ydFRyYW5zZm9ybSk7cmV0dXJuIG4odCxlKX0sX2NlbnRlck9iamVjdDpmdW5jdGlvbih0LGUpe3JldHVybiB0LnNldFBvc2l0aW9uQnlPcmlnaW4oZSxcImNlbnRlclwiLFwiY2VudGVyXCIpLHQuc2V0Q29vcmRzKCksdGhpcy5yZW5kZXJPbkFkZFJlbW92ZSYmdGhpcy5yZXF1ZXN0UmVuZGVyQWxsKCksdGhpc30sdG9EYXRhbGVzc0pTT046ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudG9EYXRhbGVzc09iamVjdCh0KX0sdG9PYmplY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3RvT2JqZWN0TWV0aG9kKFwidG9PYmplY3RcIix0KX0sdG9EYXRhbGVzc09iamVjdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdG9PYmplY3RNZXRob2QoXCJ0b0RhdGFsZXNzT2JqZWN0XCIsdCl9LF90b09iamVjdE1ldGhvZDpmdW5jdGlvbihlLGkpe3ZhciByPXRoaXMuY2xpcFBhdGgsbj17dmVyc2lvbjpTLnZlcnNpb24sb2JqZWN0czp0aGlzLl90b09iamVjdHMoZSxpKX07cmV0dXJuIHImJiFyLmV4Y2x1ZGVGcm9tRXhwb3J0JiYobi5jbGlwUGF0aD10aGlzLl90b09iamVjdCh0aGlzLmNsaXBQYXRoLGUsaSkpLHQobix0aGlzLl9fc2VyaWFsaXplQmdPdmVybGF5KGUsaSkpLFMudXRpbC5wb3B1bGF0ZVdpdGhQcm9wZXJ0aWVzKHRoaXMsbixpKSxufSxfdG9PYmplY3RzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX29iamVjdHMuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4hdC5leGNsdWRlRnJvbUV4cG9ydH0pKS5tYXAoKGZ1bmN0aW9uKGkpe3JldHVybiB0aGlzLl90b09iamVjdChpLHQsZSl9KSx0aGlzKX0sX3RvT2JqZWN0OmZ1bmN0aW9uKHQsZSxpKXt2YXIgcjt0aGlzLmluY2x1ZGVEZWZhdWx0VmFsdWVzfHwocj10LmluY2x1ZGVEZWZhdWx0VmFsdWVzLHQuaW5jbHVkZURlZmF1bHRWYWx1ZXM9ITEpO3ZhciBuPXRbZV0oaSk7cmV0dXJuIHRoaXMuaW5jbHVkZURlZmF1bHRWYWx1ZXN8fCh0LmluY2x1ZGVEZWZhdWx0VmFsdWVzPXIpLG59LF9fc2VyaWFsaXplQmdPdmVybGF5OmZ1bmN0aW9uKHQsZSl7dmFyIGk9e30scj10aGlzLmJhY2tncm91bmRJbWFnZSxuPXRoaXMub3ZlcmxheUltYWdlLHM9dGhpcy5iYWNrZ3JvdW5kQ29sb3Isbz10aGlzLm92ZXJsYXlDb2xvcjtyZXR1cm4gcyYmcy50b09iamVjdD9zLmV4Y2x1ZGVGcm9tRXhwb3J0fHwoaS5iYWNrZ3JvdW5kPXMudG9PYmplY3QoZSkpOnMmJihpLmJhY2tncm91bmQ9cyksbyYmby50b09iamVjdD9vLmV4Y2x1ZGVGcm9tRXhwb3J0fHwoaS5vdmVybGF5PW8udG9PYmplY3QoZSkpOm8mJihpLm92ZXJsYXk9byksciYmIXIuZXhjbHVkZUZyb21FeHBvcnQmJihpLmJhY2tncm91bmRJbWFnZT10aGlzLl90b09iamVjdChyLHQsZSkpLG4mJiFuLmV4Y2x1ZGVGcm9tRXhwb3J0JiYoaS5vdmVybGF5SW1hZ2U9dGhpcy5fdG9PYmplY3Qobix0LGUpKSxpfSxzdmdWaWV3cG9ydFRyYW5zZm9ybWF0aW9uOiEwLHRvU1ZHOmZ1bmN0aW9uKHQsZSl7dHx8KHQ9e30pLHQucmV2aXZlcj1lO3ZhciBpPVtdO3JldHVybiB0aGlzLl9zZXRTVkdQcmVhbWJsZShpLHQpLHRoaXMuX3NldFNWR0hlYWRlcihpLHQpLHRoaXMuY2xpcFBhdGgmJmkucHVzaCgnPGcgY2xpcC1wYXRoPVwidXJsKCMnK3RoaXMuY2xpcFBhdGguY2xpcFBhdGhJZCsnKVwiID5cXG4nKSx0aGlzLl9zZXRTVkdCZ092ZXJsYXlDb2xvcihpLFwiYmFja2dyb3VuZFwiKSx0aGlzLl9zZXRTVkdCZ092ZXJsYXlJbWFnZShpLFwiYmFja2dyb3VuZEltYWdlXCIsZSksdGhpcy5fc2V0U1ZHT2JqZWN0cyhpLGUpLHRoaXMuY2xpcFBhdGgmJmkucHVzaChcIjwvZz5cXG5cIiksdGhpcy5fc2V0U1ZHQmdPdmVybGF5Q29sb3IoaSxcIm92ZXJsYXlcIiksdGhpcy5fc2V0U1ZHQmdPdmVybGF5SW1hZ2UoaSxcIm92ZXJsYXlJbWFnZVwiLGUpLGkucHVzaChcIjwvc3ZnPlwiKSxpLmpvaW4oXCJcIil9LF9zZXRTVkdQcmVhbWJsZTpmdW5jdGlvbih0LGUpe2Uuc3VwcHJlc3NQcmVhbWJsZXx8dC5wdXNoKCc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCInLGUuZW5jb2Rpbmd8fFwiVVRGLThcIiwnXCIgc3RhbmRhbG9uZT1cIm5vXCIgPz5cXG4nLCc8IURPQ1RZUEUgc3ZnIFBVQkxJQyBcIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOXCIgJywnXCJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGRcIj5cXG4nKX0sX3NldFNWR0hlYWRlcjpmdW5jdGlvbih0LGUpe3ZhciBpLG49ZS53aWR0aHx8dGhpcy53aWR0aCxzPWUuaGVpZ2h0fHx0aGlzLmhlaWdodCxvPSd2aWV3Qm94PVwiMCAwICcrdGhpcy53aWR0aCtcIiBcIit0aGlzLmhlaWdodCsnXCIgJyxhPVMuT2JqZWN0Lk5VTV9GUkFDVElPTl9ESUdJVFM7ZS52aWV3Qm94P289J3ZpZXdCb3g9XCInK2Uudmlld0JveC54K1wiIFwiK2Uudmlld0JveC55K1wiIFwiK2Uudmlld0JveC53aWR0aCtcIiBcIitlLnZpZXdCb3guaGVpZ2h0KydcIiAnOnRoaXMuc3ZnVmlld3BvcnRUcmFuc2Zvcm1hdGlvbiYmKGk9dGhpcy52aWV3cG9ydFRyYW5zZm9ybSxvPSd2aWV3Qm94PVwiJytyKC1pWzRdL2lbMF0sYSkrXCIgXCIrcigtaVs1XS9pWzNdLGEpK1wiIFwiK3IodGhpcy53aWR0aC9pWzBdLGEpK1wiIFwiK3IodGhpcy5oZWlnaHQvaVszXSxhKSsnXCIgJyksdC5wdXNoKFwiPHN2ZyBcIiwneG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiICcsJ3htbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiICcsJ3ZlcnNpb249XCIxLjFcIiAnLCd3aWR0aD1cIicsbiwnXCIgJywnaGVpZ2h0PVwiJyxzLCdcIiAnLG8sJ3htbDpzcGFjZT1cInByZXNlcnZlXCI+XFxuJyxcIjxkZXNjPkNyZWF0ZWQgd2l0aCBGYWJyaWMuanMgXCIsUy52ZXJzaW9uLFwiPC9kZXNjPlxcblwiLFwiPGRlZnM+XFxuXCIsdGhpcy5jcmVhdGVTVkdGb250RmFjZXNNYXJrdXAoKSx0aGlzLmNyZWF0ZVNWR1JlZkVsZW1lbnRzTWFya3VwKCksdGhpcy5jcmVhdGVTVkdDbGlwUGF0aE1hcmt1cChlKSxcIjwvZGVmcz5cXG5cIil9LGNyZWF0ZVNWR0NsaXBQYXRoTWFya3VwOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY2xpcFBhdGg7cmV0dXJuIGU/KGUuY2xpcFBhdGhJZD1cIkNMSVBQQVRIX1wiK1MuT2JqZWN0Ll9fdWlkKyssJzxjbGlwUGF0aCBpZD1cIicrZS5jbGlwUGF0aElkKydcIiA+XFxuJyt0aGlzLmNsaXBQYXRoLnRvQ2xpcFBhdGhTVkcodC5yZXZpdmVyKStcIjwvY2xpcFBhdGg+XFxuXCIpOlwiXCJ9LGNyZWF0ZVNWR1JlZkVsZW1lbnRzTWFya3VwOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm5bXCJiYWNrZ3JvdW5kXCIsXCJvdmVybGF5XCJdLm1hcCgoZnVuY3Rpb24oZSl7dmFyIGk9dFtlK1wiQ29sb3JcIl07aWYoaSYmaS50b0xpdmUpe3ZhciByPXRbZStcIlZwdFwiXSxuPXQudmlld3BvcnRUcmFuc2Zvcm0scz17d2lkdGg6dC53aWR0aC8ocj9uWzBdOjEpLGhlaWdodDp0LmhlaWdodC8ocj9uWzNdOjEpfTtyZXR1cm4gaS50b1NWRyhzLHthZGRpdGlvbmFsVHJhbnNmb3JtOnI/Uy51dGlsLm1hdHJpeFRvU1ZHKG4pOlwiXCJ9KX19KSkuam9pbihcIlwiKX0sY3JlYXRlU1ZHRm9udEZhY2VzTWFya3VwOmZ1bmN0aW9uKCl7dmFyIHQsZSxpLHIsbixzLG8sYSxoPVwiXCIsbD17fSxjPVMuZm9udFBhdGhzLHU9W107Zm9yKHRoaXMuX29iamVjdHMuZm9yRWFjaCgoZnVuY3Rpb24gdChlKXt1LnB1c2goZSksZS5fb2JqZWN0cyYmZS5fb2JqZWN0cy5mb3JFYWNoKHQpfSkpLG89MCxhPXUubGVuZ3RoO288YTtvKyspaWYoZT0odD11W29dKS5mb250RmFtaWx5LC0xIT09dC50eXBlLmluZGV4T2YoXCJ0ZXh0XCIpJiYhbFtlXSYmY1tlXSYmKGxbZV09ITAsdC5zdHlsZXMpKWZvcihuIGluIGk9dC5zdHlsZXMpZm9yKHMgaW4gcj1pW25dKSFsW2U9cltzXS5mb250RmFtaWx5XSYmY1tlXSYmKGxbZV09ITApO2Zvcih2YXIgZCBpbiBsKWgrPVtcIlxcdFxcdEBmb250LWZhY2Uge1xcblwiLFwiXFx0XFx0XFx0Zm9udC1mYW1pbHk6ICdcIixkLFwiJztcXG5cIixcIlxcdFxcdFxcdHNyYzogdXJsKCdcIixjW2RdLFwiJyk7XFxuXCIsXCJcXHRcXHR9XFxuXCJdLmpvaW4oXCJcIik7cmV0dXJuIGgmJihoPVsnXFx0PHN0eWxlIHR5cGU9XCJ0ZXh0L2Nzc1wiPicsXCI8IVtDREFUQVtcXG5cIixoLFwiXV0+XCIsXCI8L3N0eWxlPlxcblwiXS5qb2luKFwiXCIpKSxofSxfc2V0U1ZHT2JqZWN0czpmdW5jdGlvbih0LGUpe3ZhciBpLHIsbixzPXRoaXMuX29iamVjdHM7Zm9yKHI9MCxuPXMubGVuZ3RoO3I8bjtyKyspKGk9c1tyXSkuZXhjbHVkZUZyb21FeHBvcnR8fHRoaXMuX3NldFNWR09iamVjdCh0LGksZSl9LF9zZXRTVkdPYmplY3Q6ZnVuY3Rpb24odCxlLGkpe3QucHVzaChlLnRvU1ZHKGkpKX0sX3NldFNWR0JnT3ZlcmxheUltYWdlOmZ1bmN0aW9uKHQsZSxpKXt0aGlzW2VdJiYhdGhpc1tlXS5leGNsdWRlRnJvbUV4cG9ydCYmdGhpc1tlXS50b1NWRyYmdC5wdXNoKHRoaXNbZV0udG9TVkcoaSkpfSxfc2V0U1ZHQmdPdmVybGF5Q29sb3I6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzW2UrXCJDb2xvclwiXSxyPXRoaXMudmlld3BvcnRUcmFuc2Zvcm0sbj10aGlzLndpZHRoLHM9dGhpcy5oZWlnaHQ7aWYoaSlpZihpLnRvTGl2ZSl7dmFyIG89aS5yZXBlYXQsYT1TLnV0aWwuaW52ZXJ0VHJhbnNmb3JtKHIpLGg9dGhpc1tlK1wiVnB0XCJdP1MudXRpbC5tYXRyaXhUb1NWRyhhKTpcIlwiO3QucHVzaCgnPHJlY3QgdHJhbnNmb3JtPVwiJytoK1wiIHRyYW5zbGF0ZShcIixuLzIsXCIsXCIscy8yLCcpXCInLCcgeD1cIicsaS5vZmZzZXRYLW4vMiwnXCIgeT1cIicsaS5vZmZzZXRZLXMvMiwnXCIgJywnd2lkdGg9XCInLFwicmVwZWF0LXlcIj09PW98fFwibm8tcmVwZWF0XCI9PT1vP2kuc291cmNlLndpZHRoOm4sJ1wiIGhlaWdodD1cIicsXCJyZXBlYXQteFwiPT09b3x8XCJuby1yZXBlYXRcIj09PW8/aS5zb3VyY2UuaGVpZ2h0OnMsJ1wiIGZpbGw9XCJ1cmwoI1NWR0lEXycraS5pZCsnKVwiJyxcIj48L3JlY3Q+XFxuXCIpfWVsc2UgdC5wdXNoKCc8cmVjdCB4PVwiMFwiIHk9XCIwXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiICcsJ2ZpbGw9XCInLGksJ1wiJyxcIj48L3JlY3Q+XFxuXCIpfSxzZW5kVG9CYWNrOmZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiB0aGlzO3ZhciBlLHIsbixzPXRoaXMuX2FjdGl2ZU9iamVjdDtpZih0PT09cyYmXCJhY3RpdmVTZWxlY3Rpb25cIj09PXQudHlwZSlmb3IoZT0obj1zLl9vYmplY3RzKS5sZW5ndGg7ZS0tOylyPW5bZV0saSh0aGlzLl9vYmplY3RzLHIpLHRoaXMuX29iamVjdHMudW5zaGlmdChyKTtlbHNlIGkodGhpcy5fb2JqZWN0cyx0KSx0aGlzLl9vYmplY3RzLnVuc2hpZnQodCk7cmV0dXJuIHRoaXMucmVuZGVyT25BZGRSZW1vdmUmJnRoaXMucmVxdWVzdFJlbmRlckFsbCgpLHRoaXN9LGJyaW5nVG9Gcm9udDpmdW5jdGlvbih0KXtpZighdClyZXR1cm4gdGhpczt2YXIgZSxyLG4scz10aGlzLl9hY3RpdmVPYmplY3Q7aWYodD09PXMmJlwiYWN0aXZlU2VsZWN0aW9uXCI9PT10LnR5cGUpZm9yKG49cy5fb2JqZWN0cyxlPTA7ZTxuLmxlbmd0aDtlKyspcj1uW2VdLGkodGhpcy5fb2JqZWN0cyxyKSx0aGlzLl9vYmplY3RzLnB1c2gocik7ZWxzZSBpKHRoaXMuX29iamVjdHMsdCksdGhpcy5fb2JqZWN0cy5wdXNoKHQpO3JldHVybiB0aGlzLnJlbmRlck9uQWRkUmVtb3ZlJiZ0aGlzLnJlcXVlc3RSZW5kZXJBbGwoKSx0aGlzfSxzZW5kQmFja3dhcmRzOmZ1bmN0aW9uKHQsZSl7aWYoIXQpcmV0dXJuIHRoaXM7dmFyIHIsbixzLG8sYSxoPXRoaXMuX2FjdGl2ZU9iamVjdCxsPTA7aWYodD09PWgmJlwiYWN0aXZlU2VsZWN0aW9uXCI9PT10LnR5cGUpZm9yKGE9aC5fb2JqZWN0cyxyPTA7cjxhLmxlbmd0aDtyKyspbj1hW3JdLChzPXRoaXMuX29iamVjdHMuaW5kZXhPZihuKSk+MCtsJiYobz1zLTEsaSh0aGlzLl9vYmplY3RzLG4pLHRoaXMuX29iamVjdHMuc3BsaWNlKG8sMCxuKSksbCsrO2Vsc2UgMCE9PShzPXRoaXMuX29iamVjdHMuaW5kZXhPZih0KSkmJihvPXRoaXMuX2ZpbmROZXdMb3dlckluZGV4KHQscyxlKSxpKHRoaXMuX29iamVjdHMsdCksdGhpcy5fb2JqZWN0cy5zcGxpY2UobywwLHQpKTtyZXR1cm4gdGhpcy5yZW5kZXJPbkFkZFJlbW92ZSYmdGhpcy5yZXF1ZXN0UmVuZGVyQWxsKCksdGhpc30sX2ZpbmROZXdMb3dlckluZGV4OmZ1bmN0aW9uKHQsZSxpKXt2YXIgcixuO2lmKGkpe2ZvcihyPWUsbj1lLTE7bj49MDstLW4paWYodC5pbnRlcnNlY3RzV2l0aE9iamVjdCh0aGlzLl9vYmplY3RzW25dKXx8dC5pc0NvbnRhaW5lZFdpdGhpbk9iamVjdCh0aGlzLl9vYmplY3RzW25dKXx8dGhpcy5fb2JqZWN0c1tuXS5pc0NvbnRhaW5lZFdpdGhpbk9iamVjdCh0KSl7cj1uO2JyZWFrfX1lbHNlIHI9ZS0xO3JldHVybiByfSxicmluZ0ZvcndhcmQ6ZnVuY3Rpb24odCxlKXtpZighdClyZXR1cm4gdGhpczt2YXIgcixuLHMsbyxhLGg9dGhpcy5fYWN0aXZlT2JqZWN0LGw9MDtpZih0PT09aCYmXCJhY3RpdmVTZWxlY3Rpb25cIj09PXQudHlwZSlmb3Iocj0oYT1oLl9vYmplY3RzKS5sZW5ndGg7ci0tOyluPWFbcl0sKHM9dGhpcy5fb2JqZWN0cy5pbmRleE9mKG4pKTx0aGlzLl9vYmplY3RzLmxlbmd0aC0xLWwmJihvPXMrMSxpKHRoaXMuX29iamVjdHMsbiksdGhpcy5fb2JqZWN0cy5zcGxpY2UobywwLG4pKSxsKys7ZWxzZShzPXRoaXMuX29iamVjdHMuaW5kZXhPZih0KSkhPT10aGlzLl9vYmplY3RzLmxlbmd0aC0xJiYobz10aGlzLl9maW5kTmV3VXBwZXJJbmRleCh0LHMsZSksaSh0aGlzLl9vYmplY3RzLHQpLHRoaXMuX29iamVjdHMuc3BsaWNlKG8sMCx0KSk7cmV0dXJuIHRoaXMucmVuZGVyT25BZGRSZW1vdmUmJnRoaXMucmVxdWVzdFJlbmRlckFsbCgpLHRoaXN9LF9maW5kTmV3VXBwZXJJbmRleDpmdW5jdGlvbih0LGUsaSl7dmFyIHIsbixzO2lmKGkpe2ZvcihyPWUsbj1lKzEscz10aGlzLl9vYmplY3RzLmxlbmd0aDtuPHM7KytuKWlmKHQuaW50ZXJzZWN0c1dpdGhPYmplY3QodGhpcy5fb2JqZWN0c1tuXSl8fHQuaXNDb250YWluZWRXaXRoaW5PYmplY3QodGhpcy5fb2JqZWN0c1tuXSl8fHRoaXMuX29iamVjdHNbbl0uaXNDb250YWluZWRXaXRoaW5PYmplY3QodCkpe3I9bjticmVha319ZWxzZSByPWUrMTtyZXR1cm4gcn0sbW92ZVRvOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGkodGhpcy5fb2JqZWN0cyx0KSx0aGlzLl9vYmplY3RzLnNwbGljZShlLDAsdCksdGhpcy5yZW5kZXJPbkFkZFJlbW92ZSYmdGhpcy5yZXF1ZXN0UmVuZGVyQWxsKCl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1JlbmRlcmluZyYmKFMudXRpbC5jYW5jZWxBbmltRnJhbWUodGhpcy5pc1JlbmRlcmluZyksdGhpcy5pc1JlbmRlcmluZz0wKSx0aGlzLmZvckVhY2hPYmplY3QoKGZ1bmN0aW9uKHQpe3QuZGlzcG9zZSYmdC5kaXNwb3NlKCl9KSksdGhpcy5fb2JqZWN0cz1bXSx0aGlzLmJhY2tncm91bmRJbWFnZSYmdGhpcy5iYWNrZ3JvdW5kSW1hZ2UuZGlzcG9zZSYmdGhpcy5iYWNrZ3JvdW5kSW1hZ2UuZGlzcG9zZSgpLHRoaXMuYmFja2dyb3VuZEltYWdlPW51bGwsdGhpcy5vdmVybGF5SW1hZ2UmJnRoaXMub3ZlcmxheUltYWdlLmRpc3Bvc2UmJnRoaXMub3ZlcmxheUltYWdlLmRpc3Bvc2UoKSx0aGlzLm92ZXJsYXlJbWFnZT1udWxsLHRoaXMuX2lUZXh0SW5zdGFuY2VzPW51bGwsdGhpcy5jb250ZXh0Q29udGFpbmVyPW51bGwsdGhpcy5sb3dlckNhbnZhc0VsLmNsYXNzTGlzdC5yZW1vdmUoXCJsb3dlci1jYW52YXNcIiksUy51dGlsLnNldFN0eWxlKHRoaXMubG93ZXJDYW52YXNFbCx0aGlzLl9vcmlnaW5hbENhbnZhc1N0eWxlKSxkZWxldGUgdGhpcy5fb3JpZ2luYWxDYW52YXNTdHlsZSx0aGlzLmxvd2VyQ2FudmFzRWwuc2V0QXR0cmlidXRlKFwid2lkdGhcIix0aGlzLndpZHRoKSx0aGlzLmxvd2VyQ2FudmFzRWwuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsdGhpcy5oZWlnaHQpLFMudXRpbC5jbGVhblVwSnNkb21Ob2RlKHRoaXMubG93ZXJDYW52YXNFbCksdGhpcy5sb3dlckNhbnZhc0VsPXZvaWQgMCx0aGlzfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVyblwiIzxmYWJyaWMuQ2FudmFzIChcIit0aGlzLmNvbXBsZXhpdHkoKStcIik6IHsgb2JqZWN0czogXCIrdGhpcy5fb2JqZWN0cy5sZW5ndGgrXCIgfT5cIn19KSx0KFMuU3RhdGljQ2FudmFzLnByb3RvdHlwZSxTLk9ic2VydmFibGUpLHQoUy5TdGF0aWNDYW52YXMucHJvdG90eXBlLFMuQ29sbGVjdGlvbiksdChTLlN0YXRpY0NhbnZhcy5wcm90b3R5cGUsUy5EYXRhVVJMRXhwb3J0ZXIpLHQoUy5TdGF0aWNDYW52YXMse0VNUFRZX0pTT046J3tcIm9iamVjdHNcIjogW10sIFwiYmFja2dyb3VuZFwiOiBcIndoaXRlXCJ9JyxzdXBwb3J0czpmdW5jdGlvbih0KXt2YXIgZT1hKCk7aWYoIWV8fCFlLmdldENvbnRleHQpcmV0dXJuIG51bGw7dmFyIGk9ZS5nZXRDb250ZXh0KFwiMmRcIik7cmV0dXJuIGkmJlwic2V0TGluZURhc2hcIj09PXQ/dm9pZCAwIT09aS5zZXRMaW5lRGFzaDpudWxsfX0pLFMuU3RhdGljQ2FudmFzLnByb3RvdHlwZS50b0pTT049Uy5TdGF0aWNDYW52YXMucHJvdG90eXBlLnRvT2JqZWN0LFMuaXNMaWtlbHlOb2RlJiYoUy5TdGF0aWNDYW52YXMucHJvdG90eXBlLmNyZWF0ZVBOR1N0cmVhbT1mdW5jdGlvbigpe3ZhciB0PW8odGhpcy5sb3dlckNhbnZhc0VsKTtyZXR1cm4gdCYmdC5jcmVhdGVQTkdTdHJlYW0oKX0sUy5TdGF0aWNDYW52YXMucHJvdG90eXBlLmNyZWF0ZUpQRUdTdHJlYW09ZnVuY3Rpb24odCl7dmFyIGU9byh0aGlzLmxvd2VyQ2FudmFzRWwpO3JldHVybiBlJiZlLmNyZWF0ZUpQRUdTdHJlYW0odCl9KX19KCksUy5CYXNlQnJ1c2g9Uy51dGlsLmNyZWF0ZUNsYXNzKHtjb2xvcjpcInJnYigwLCAwLCAwKVwiLHdpZHRoOjEsc2hhZG93Om51bGwsc3Ryb2tlTGluZUNhcDpcInJvdW5kXCIsc3Ryb2tlTGluZUpvaW46XCJyb3VuZFwiLHN0cm9rZU1pdGVyTGltaXQ6MTAsc3Ryb2tlRGFzaEFycmF5Om51bGwsbGltaXRlZFRvQ2FudmFzU2l6ZTohMSxfc2V0QnJ1c2hTdHlsZXM6ZnVuY3Rpb24odCl7dC5zdHJva2VTdHlsZT10aGlzLmNvbG9yLHQubGluZVdpZHRoPXRoaXMud2lkdGgsdC5saW5lQ2FwPXRoaXMuc3Ryb2tlTGluZUNhcCx0Lm1pdGVyTGltaXQ9dGhpcy5zdHJva2VNaXRlckxpbWl0LHQubGluZUpvaW49dGhpcy5zdHJva2VMaW5lSm9pbix0LnNldExpbmVEYXNoKHRoaXMuc3Ryb2tlRGFzaEFycmF5fHxbXSl9LF9zYXZlQW5kVHJhbnNmb3JtOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY2FudmFzLnZpZXdwb3J0VHJhbnNmb3JtO3Quc2F2ZSgpLHQudHJhbnNmb3JtKGVbMF0sZVsxXSxlWzJdLGVbM10sZVs0XSxlWzVdKX0sX3NldFNoYWRvdzpmdW5jdGlvbigpe2lmKHRoaXMuc2hhZG93KXt2YXIgdD10aGlzLmNhbnZhcyxlPXRoaXMuc2hhZG93LGk9dC5jb250ZXh0VG9wLHI9dC5nZXRab29tKCk7dCYmdC5faXNSZXRpbmFTY2FsaW5nKCkmJihyKj1TLmRldmljZVBpeGVsUmF0aW8pLGkuc2hhZG93Q29sb3I9ZS5jb2xvcixpLnNoYWRvd0JsdXI9ZS5ibHVyKnIsaS5zaGFkb3dPZmZzZXRYPWUub2Zmc2V0WCpyLGkuc2hhZG93T2Zmc2V0WT1lLm9mZnNldFkqcn19LG5lZWRzRnVsbFJlbmRlcjpmdW5jdGlvbigpe3JldHVybiBuZXcgUy5Db2xvcih0aGlzLmNvbG9yKS5nZXRBbHBoYSgpPDF8fCEhdGhpcy5zaGFkb3d9LF9yZXNldFNoYWRvdzpmdW5jdGlvbigpe3ZhciB0PXRoaXMuY2FudmFzLmNvbnRleHRUb3A7dC5zaGFkb3dDb2xvcj1cIlwiLHQuc2hhZG93Qmx1cj10LnNoYWRvd09mZnNldFg9dC5zaGFkb3dPZmZzZXRZPTB9LF9pc091dFNpZGVDYW52YXM6ZnVuY3Rpb24odCl7cmV0dXJuIHQueDwwfHx0Lng+dGhpcy5jYW52YXMuZ2V0V2lkdGgoKXx8dC55PDB8fHQueT50aGlzLmNhbnZhcy5nZXRIZWlnaHQoKX19KSxTLlBlbmNpbEJydXNoPVMudXRpbC5jcmVhdGVDbGFzcyhTLkJhc2VCcnVzaCx7ZGVjaW1hdGU6LjQsZHJhd1N0cmFpZ2h0TGluZTohMSxzdHJhaWdodExpbmVLZXk6XCJzaGlmdEtleVwiLGluaXRpYWxpemU6ZnVuY3Rpb24odCl7dGhpcy5jYW52YXM9dCx0aGlzLl9wb2ludHM9W119LG5lZWRzRnVsbFJlbmRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbGxTdXBlcihcIm5lZWRzRnVsbFJlbmRlclwiKXx8dGhpcy5faGFzU3RyYWlnaHRMaW5lfSxfZHJhd1NlZ21lbnQ6ZnVuY3Rpb24odCxlLGkpe3ZhciByPWUubWlkUG9pbnRGcm9tKGkpO3JldHVybiB0LnF1YWRyYXRpY0N1cnZlVG8oZS54LGUueSxyLngsci55KSxyfSxvbk1vdXNlRG93bjpmdW5jdGlvbih0LGUpe3RoaXMuY2FudmFzLl9pc01haW5FdmVudChlLmUpJiYodGhpcy5kcmF3U3RyYWlnaHRMaW5lPWUuZVt0aGlzLnN0cmFpZ2h0TGluZUtleV0sdGhpcy5fcHJlcGFyZUZvckRyYXdpbmcodCksdGhpcy5fY2FwdHVyZURyYXdpbmdQYXRoKHQpLHRoaXMuX3JlbmRlcigpKX0sb25Nb3VzZU1vdmU6ZnVuY3Rpb24odCxlKXtpZih0aGlzLmNhbnZhcy5faXNNYWluRXZlbnQoZS5lKSYmKHRoaXMuZHJhd1N0cmFpZ2h0TGluZT1lLmVbdGhpcy5zdHJhaWdodExpbmVLZXldLCghMCE9PXRoaXMubGltaXRlZFRvQ2FudmFzU2l6ZXx8IXRoaXMuX2lzT3V0U2lkZUNhbnZhcyh0KSkmJnRoaXMuX2NhcHR1cmVEcmF3aW5nUGF0aCh0KSYmdGhpcy5fcG9pbnRzLmxlbmd0aD4xKSlpZih0aGlzLm5lZWRzRnVsbFJlbmRlcigpKXRoaXMuY2FudmFzLmNsZWFyQ29udGV4dCh0aGlzLmNhbnZhcy5jb250ZXh0VG9wKSx0aGlzLl9yZW5kZXIoKTtlbHNle3ZhciBpPXRoaXMuX3BvaW50cyxyPWkubGVuZ3RoLG49dGhpcy5jYW52YXMuY29udGV4dFRvcDt0aGlzLl9zYXZlQW5kVHJhbnNmb3JtKG4pLHRoaXMub2xkRW5kJiYobi5iZWdpblBhdGgoKSxuLm1vdmVUbyh0aGlzLm9sZEVuZC54LHRoaXMub2xkRW5kLnkpKSx0aGlzLm9sZEVuZD10aGlzLl9kcmF3U2VnbWVudChuLGlbci0yXSxpW3ItMV0sITApLG4uc3Ryb2tlKCksbi5yZXN0b3JlKCl9fSxvbk1vdXNlVXA6ZnVuY3Rpb24odCl7cmV0dXJuIXRoaXMuY2FudmFzLl9pc01haW5FdmVudCh0LmUpfHwodGhpcy5kcmF3U3RyYWlnaHRMaW5lPSExLHRoaXMub2xkRW5kPXZvaWQgMCx0aGlzLl9maW5hbGl6ZUFuZEFkZFBhdGgoKSwhMSl9LF9wcmVwYXJlRm9yRHJhd2luZzpmdW5jdGlvbih0KXt2YXIgZT1uZXcgUy5Qb2ludCh0LngsdC55KTt0aGlzLl9yZXNldCgpLHRoaXMuX2FkZFBvaW50KGUpLHRoaXMuY2FudmFzLmNvbnRleHRUb3AubW92ZVRvKGUueCxlLnkpfSxfYWRkUG9pbnQ6ZnVuY3Rpb24odCl7cmV0dXJuISh0aGlzLl9wb2ludHMubGVuZ3RoPjEmJnQuZXEodGhpcy5fcG9pbnRzW3RoaXMuX3BvaW50cy5sZW5ndGgtMV0pfHwodGhpcy5kcmF3U3RyYWlnaHRMaW5lJiZ0aGlzLl9wb2ludHMubGVuZ3RoPjEmJih0aGlzLl9oYXNTdHJhaWdodExpbmU9ITAsdGhpcy5fcG9pbnRzLnBvcCgpKSx0aGlzLl9wb2ludHMucHVzaCh0KSwwKSl9LF9yZXNldDpmdW5jdGlvbigpe3RoaXMuX3BvaW50cz1bXSx0aGlzLl9zZXRCcnVzaFN0eWxlcyh0aGlzLmNhbnZhcy5jb250ZXh0VG9wKSx0aGlzLl9zZXRTaGFkb3coKSx0aGlzLl9oYXNTdHJhaWdodExpbmU9ITF9LF9jYXB0dXJlRHJhd2luZ1BhdGg6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IFMuUG9pbnQodC54LHQueSk7cmV0dXJuIHRoaXMuX2FkZFBvaW50KGUpfSxfcmVuZGVyOmZ1bmN0aW9uKHQpe3ZhciBlLGkscj10aGlzLl9wb2ludHNbMF0sbj10aGlzLl9wb2ludHNbMV07aWYodD10fHx0aGlzLmNhbnZhcy5jb250ZXh0VG9wLHRoaXMuX3NhdmVBbmRUcmFuc2Zvcm0odCksdC5iZWdpblBhdGgoKSwyPT09dGhpcy5fcG9pbnRzLmxlbmd0aCYmci54PT09bi54JiZyLnk9PT1uLnkpe3ZhciBzPXRoaXMud2lkdGgvMWUzO3I9bmV3IFMuUG9pbnQoci54LHIueSksbj1uZXcgUy5Qb2ludChuLngsbi55KSxyLngtPXMsbi54Kz1zfWZvcih0Lm1vdmVUbyhyLngsci55KSxlPTEsaT10aGlzLl9wb2ludHMubGVuZ3RoO2U8aTtlKyspdGhpcy5fZHJhd1NlZ21lbnQodCxyLG4pLHI9dGhpcy5fcG9pbnRzW2VdLG49dGhpcy5fcG9pbnRzW2UrMV07dC5saW5lVG8oci54LHIueSksdC5zdHJva2UoKSx0LnJlc3RvcmUoKX0sY29udmVydFBvaW50c1RvU1ZHUGF0aDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLndpZHRoLzFlMztyZXR1cm4gUy51dGlsLmdldFNtb290aFBhdGhGcm9tUG9pbnRzKHQsZSl9LF9pc0VtcHR5U1ZHUGF0aDpmdW5jdGlvbih0KXtyZXR1cm5cIk0gMCAwIFEgMCAwIDAgMCBMIDAgMFwiPT09Uy51dGlsLmpvaW5QYXRoKHQpfSxjcmVhdGVQYXRoOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBTLlBhdGgodCx7ZmlsbDpudWxsLHN0cm9rZTp0aGlzLmNvbG9yLHN0cm9rZVdpZHRoOnRoaXMud2lkdGgsc3Ryb2tlTGluZUNhcDp0aGlzLnN0cm9rZUxpbmVDYXAsc3Ryb2tlTWl0ZXJMaW1pdDp0aGlzLnN0cm9rZU1pdGVyTGltaXQsc3Ryb2tlTGluZUpvaW46dGhpcy5zdHJva2VMaW5lSm9pbixzdHJva2VEYXNoQXJyYXk6dGhpcy5zdHJva2VEYXNoQXJyYXl9KTtyZXR1cm4gdGhpcy5zaGFkb3cmJih0aGlzLnNoYWRvdy5hZmZlY3RTdHJva2U9ITAsZS5zaGFkb3c9bmV3IFMuU2hhZG93KHRoaXMuc2hhZG93KSksZX0sZGVjaW1hdGVQb2ludHM6ZnVuY3Rpb24odCxlKXtpZih0Lmxlbmd0aDw9MilyZXR1cm4gdDt2YXIgaSxyPXRoaXMuY2FudmFzLmdldFpvb20oKSxuPU1hdGgucG93KGUvciwyKSxzPXQubGVuZ3RoLTEsbz10WzBdLGE9W29dO2ZvcihpPTE7aTxzLTE7aSsrKU1hdGgucG93KG8ueC10W2ldLngsMikrTWF0aC5wb3coby55LXRbaV0ueSwyKT49biYmKG89dFtpXSxhLnB1c2gobykpO3JldHVybiBhLnB1c2godFtzXSksYX0sX2ZpbmFsaXplQW5kQWRkUGF0aDpmdW5jdGlvbigpe3RoaXMuY2FudmFzLmNvbnRleHRUb3AuY2xvc2VQYXRoKCksdGhpcy5kZWNpbWF0ZSYmKHRoaXMuX3BvaW50cz10aGlzLmRlY2ltYXRlUG9pbnRzKHRoaXMuX3BvaW50cyx0aGlzLmRlY2ltYXRlKSk7dmFyIHQ9dGhpcy5jb252ZXJ0UG9pbnRzVG9TVkdQYXRoKHRoaXMuX3BvaW50cyk7aWYodGhpcy5faXNFbXB0eVNWR1BhdGgodCkpdGhpcy5jYW52YXMucmVxdWVzdFJlbmRlckFsbCgpO2Vsc2V7dmFyIGU9dGhpcy5jcmVhdGVQYXRoKHQpO3RoaXMuY2FudmFzLmNsZWFyQ29udGV4dCh0aGlzLmNhbnZhcy5jb250ZXh0VG9wKSx0aGlzLmNhbnZhcy5maXJlKFwiYmVmb3JlOnBhdGg6Y3JlYXRlZFwiLHtwYXRoOmV9KSx0aGlzLmNhbnZhcy5hZGQoZSksdGhpcy5jYW52YXMucmVxdWVzdFJlbmRlckFsbCgpLGUuc2V0Q29vcmRzKCksdGhpcy5fcmVzZXRTaGFkb3coKSx0aGlzLmNhbnZhcy5maXJlKFwicGF0aDpjcmVhdGVkXCIse3BhdGg6ZX0pfX19KSxTLkNpcmNsZUJydXNoPVMudXRpbC5jcmVhdGVDbGFzcyhTLkJhc2VCcnVzaCx7d2lkdGg6MTAsaW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt0aGlzLmNhbnZhcz10LHRoaXMucG9pbnRzPVtdfSxkcmF3RG90OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYWRkUG9pbnQodCksaT10aGlzLmNhbnZhcy5jb250ZXh0VG9wO3RoaXMuX3NhdmVBbmRUcmFuc2Zvcm0oaSksdGhpcy5kb3QoaSxlKSxpLnJlc3RvcmUoKX0sZG90OmZ1bmN0aW9uKHQsZSl7dC5maWxsU3R5bGU9ZS5maWxsLHQuYmVnaW5QYXRoKCksdC5hcmMoZS54LGUueSxlLnJhZGl1cywwLDIqTWF0aC5QSSwhMSksdC5jbG9zZVBhdGgoKSx0LmZpbGwoKX0sb25Nb3VzZURvd246ZnVuY3Rpb24odCl7dGhpcy5wb2ludHMubGVuZ3RoPTAsdGhpcy5jYW52YXMuY2xlYXJDb250ZXh0KHRoaXMuY2FudmFzLmNvbnRleHRUb3ApLHRoaXMuX3NldFNoYWRvdygpLHRoaXMuZHJhd0RvdCh0KX0sX3JlbmRlcjpmdW5jdGlvbigpe3ZhciB0LGUsaT10aGlzLmNhbnZhcy5jb250ZXh0VG9wLHI9dGhpcy5wb2ludHM7Zm9yKHRoaXMuX3NhdmVBbmRUcmFuc2Zvcm0oaSksdD0wLGU9ci5sZW5ndGg7dDxlO3QrKyl0aGlzLmRvdChpLHJbdF0pO2kucmVzdG9yZSgpfSxvbk1vdXNlTW92ZTpmdW5jdGlvbih0KXshMD09PXRoaXMubGltaXRlZFRvQ2FudmFzU2l6ZSYmdGhpcy5faXNPdXRTaWRlQ2FudmFzKHQpfHwodGhpcy5uZWVkc0Z1bGxSZW5kZXIoKT8odGhpcy5jYW52YXMuY2xlYXJDb250ZXh0KHRoaXMuY2FudmFzLmNvbnRleHRUb3ApLHRoaXMuYWRkUG9pbnQodCksdGhpcy5fcmVuZGVyKCkpOnRoaXMuZHJhd0RvdCh0KSl9LG9uTW91c2VVcDpmdW5jdGlvbigpe3ZhciB0LGUsaT10aGlzLmNhbnZhcy5yZW5kZXJPbkFkZFJlbW92ZTt0aGlzLmNhbnZhcy5yZW5kZXJPbkFkZFJlbW92ZT0hMTt2YXIgcj1bXTtmb3IodD0wLGU9dGhpcy5wb2ludHMubGVuZ3RoO3Q8ZTt0Kyspe3ZhciBuPXRoaXMucG9pbnRzW3RdLHM9bmV3IFMuQ2lyY2xlKHtyYWRpdXM6bi5yYWRpdXMsbGVmdDpuLngsdG9wOm4ueSxvcmlnaW5YOlwiY2VudGVyXCIsb3JpZ2luWTpcImNlbnRlclwiLGZpbGw6bi5maWxsfSk7dGhpcy5zaGFkb3cmJihzLnNoYWRvdz1uZXcgUy5TaGFkb3codGhpcy5zaGFkb3cpKSxyLnB1c2gocyl9dmFyIG89bmV3IFMuR3JvdXAocik7by5jYW52YXM9dGhpcy5jYW52YXMsdGhpcy5jYW52YXMuZmlyZShcImJlZm9yZTpwYXRoOmNyZWF0ZWRcIix7cGF0aDpvfSksdGhpcy5jYW52YXMuYWRkKG8pLHRoaXMuY2FudmFzLmZpcmUoXCJwYXRoOmNyZWF0ZWRcIix7cGF0aDpvfSksdGhpcy5jYW52YXMuY2xlYXJDb250ZXh0KHRoaXMuY2FudmFzLmNvbnRleHRUb3ApLHRoaXMuX3Jlc2V0U2hhZG93KCksdGhpcy5jYW52YXMucmVuZGVyT25BZGRSZW1vdmU9aSx0aGlzLmNhbnZhcy5yZXF1ZXN0UmVuZGVyQWxsKCl9LGFkZFBvaW50OmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBTLlBvaW50KHQueCx0LnkpLGk9Uy51dGlsLmdldFJhbmRvbUludChNYXRoLm1heCgwLHRoaXMud2lkdGgtMjApLHRoaXMud2lkdGgrMjApLzIscj1uZXcgUy5Db2xvcih0aGlzLmNvbG9yKS5zZXRBbHBoYShTLnV0aWwuZ2V0UmFuZG9tSW50KDAsMTAwKS8xMDApLnRvUmdiYSgpO3JldHVybiBlLnJhZGl1cz1pLGUuZmlsbD1yLHRoaXMucG9pbnRzLnB1c2goZSksZX19KSxTLlNwcmF5QnJ1c2g9Uy51dGlsLmNyZWF0ZUNsYXNzKFMuQmFzZUJydXNoLHt3aWR0aDoxMCxkZW5zaXR5OjIwLGRvdFdpZHRoOjEsZG90V2lkdGhWYXJpYW5jZToxLHJhbmRvbU9wYWNpdHk6ITEsb3B0aW1pemVPdmVybGFwcGluZzohMCxpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3RoaXMuY2FudmFzPXQsdGhpcy5zcHJheUNodW5rcz1bXX0sb25Nb3VzZURvd246ZnVuY3Rpb24odCl7dGhpcy5zcHJheUNodW5rcy5sZW5ndGg9MCx0aGlzLmNhbnZhcy5jbGVhckNvbnRleHQodGhpcy5jYW52YXMuY29udGV4dFRvcCksdGhpcy5fc2V0U2hhZG93KCksdGhpcy5hZGRTcHJheUNodW5rKHQpLHRoaXMucmVuZGVyKHRoaXMuc3ByYXlDaHVua1BvaW50cyl9LG9uTW91c2VNb3ZlOmZ1bmN0aW9uKHQpeyEwPT09dGhpcy5saW1pdGVkVG9DYW52YXNTaXplJiZ0aGlzLl9pc091dFNpZGVDYW52YXModCl8fCh0aGlzLmFkZFNwcmF5Q2h1bmsodCksdGhpcy5yZW5kZXIodGhpcy5zcHJheUNodW5rUG9pbnRzKSl9LG9uTW91c2VVcDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuY2FudmFzLnJlbmRlck9uQWRkUmVtb3ZlO3RoaXMuY2FudmFzLnJlbmRlck9uQWRkUmVtb3ZlPSExO2Zvcih2YXIgZT1bXSxpPTAscj10aGlzLnNwcmF5Q2h1bmtzLmxlbmd0aDtpPHI7aSsrKWZvcih2YXIgbj10aGlzLnNwcmF5Q2h1bmtzW2ldLHM9MCxvPW4ubGVuZ3RoO3M8bztzKyspe3ZhciBhPW5ldyBTLlJlY3Qoe3dpZHRoOm5bc10ud2lkdGgsaGVpZ2h0Om5bc10ud2lkdGgsbGVmdDpuW3NdLngrMSx0b3A6bltzXS55KzEsb3JpZ2luWDpcImNlbnRlclwiLG9yaWdpblk6XCJjZW50ZXJcIixmaWxsOnRoaXMuY29sb3J9KTtlLnB1c2goYSl9dGhpcy5vcHRpbWl6ZU92ZXJsYXBwaW5nJiYoZT10aGlzLl9nZXRPcHRpbWl6ZWRSZWN0cyhlKSk7dmFyIGg9bmV3IFMuR3JvdXAoZSk7dGhpcy5zaGFkb3cmJmguc2V0KFwic2hhZG93XCIsbmV3IFMuU2hhZG93KHRoaXMuc2hhZG93KSksdGhpcy5jYW52YXMuZmlyZShcImJlZm9yZTpwYXRoOmNyZWF0ZWRcIix7cGF0aDpofSksdGhpcy5jYW52YXMuYWRkKGgpLHRoaXMuY2FudmFzLmZpcmUoXCJwYXRoOmNyZWF0ZWRcIix7cGF0aDpofSksdGhpcy5jYW52YXMuY2xlYXJDb250ZXh0KHRoaXMuY2FudmFzLmNvbnRleHRUb3ApLHRoaXMuX3Jlc2V0U2hhZG93KCksdGhpcy5jYW52YXMucmVuZGVyT25BZGRSZW1vdmU9dCx0aGlzLmNhbnZhcy5yZXF1ZXN0UmVuZGVyQWxsKCl9LF9nZXRPcHRpbWl6ZWRSZWN0czpmdW5jdGlvbih0KXt2YXIgZSxpLHIsbj17fTtmb3IoaT0wLHI9dC5sZW5ndGg7aTxyO2krKyluW2U9dFtpXS5sZWZ0K1wiXCIrdFtpXS50b3BdfHwobltlXT10W2ldKTt2YXIgcz1bXTtmb3IoZSBpbiBuKXMucHVzaChuW2VdKTtyZXR1cm4gc30scmVuZGVyOmZ1bmN0aW9uKHQpe3ZhciBlLGkscj10aGlzLmNhbnZhcy5jb250ZXh0VG9wO2ZvcihyLmZpbGxTdHlsZT10aGlzLmNvbG9yLHRoaXMuX3NhdmVBbmRUcmFuc2Zvcm0ociksZT0wLGk9dC5sZW5ndGg7ZTxpO2UrKyl7dmFyIG49dFtlXTt2b2lkIDAhPT1uLm9wYWNpdHkmJihyLmdsb2JhbEFscGhhPW4ub3BhY2l0eSksci5maWxsUmVjdChuLngsbi55LG4ud2lkdGgsbi53aWR0aCl9ci5yZXN0b3JlKCl9LF9yZW5kZXI6ZnVuY3Rpb24oKXt2YXIgdCxlLGk9dGhpcy5jYW52YXMuY29udGV4dFRvcDtmb3IoaS5maWxsU3R5bGU9dGhpcy5jb2xvcix0aGlzLl9zYXZlQW5kVHJhbnNmb3JtKGkpLHQ9MCxlPXRoaXMuc3ByYXlDaHVua3MubGVuZ3RoO3Q8ZTt0KyspdGhpcy5yZW5kZXIodGhpcy5zcHJheUNodW5rc1t0XSk7aS5yZXN0b3JlKCl9LGFkZFNwcmF5Q2h1bms6ZnVuY3Rpb24odCl7dGhpcy5zcHJheUNodW5rUG9pbnRzPVtdO3ZhciBlLGkscixuLHM9dGhpcy53aWR0aC8yO2ZvcihuPTA7bjx0aGlzLmRlbnNpdHk7bisrKXtlPVMudXRpbC5nZXRSYW5kb21JbnQodC54LXMsdC54K3MpLGk9Uy51dGlsLmdldFJhbmRvbUludCh0Lnktcyx0Lnkrcykscj10aGlzLmRvdFdpZHRoVmFyaWFuY2U/Uy51dGlsLmdldFJhbmRvbUludChNYXRoLm1heCgxLHRoaXMuZG90V2lkdGgtdGhpcy5kb3RXaWR0aFZhcmlhbmNlKSx0aGlzLmRvdFdpZHRoK3RoaXMuZG90V2lkdGhWYXJpYW5jZSk6dGhpcy5kb3RXaWR0aDt2YXIgbz1uZXcgUy5Qb2ludChlLGkpO28ud2lkdGg9cix0aGlzLnJhbmRvbU9wYWNpdHkmJihvLm9wYWNpdHk9Uy51dGlsLmdldFJhbmRvbUludCgwLDEwMCkvMTAwKSx0aGlzLnNwcmF5Q2h1bmtQb2ludHMucHVzaChvKX10aGlzLnNwcmF5Q2h1bmtzLnB1c2godGhpcy5zcHJheUNodW5rUG9pbnRzKX19KSxTLlBhdHRlcm5CcnVzaD1TLnV0aWwuY3JlYXRlQ2xhc3MoUy5QZW5jaWxCcnVzaCx7Z2V0UGF0dGVyblNyYzpmdW5jdGlvbigpe3ZhciB0PVMudXRpbC5jcmVhdGVDYW52YXNFbGVtZW50KCksZT10LmdldENvbnRleHQoXCIyZFwiKTtyZXR1cm4gdC53aWR0aD10LmhlaWdodD0yNSxlLmZpbGxTdHlsZT10aGlzLmNvbG9yLGUuYmVnaW5QYXRoKCksZS5hcmMoMTAsMTAsMTAsMCwyKk1hdGguUEksITEpLGUuY2xvc2VQYXRoKCksZS5maWxsKCksdH0sZ2V0UGF0dGVyblNyY0Z1bmN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIFN0cmluZyh0aGlzLmdldFBhdHRlcm5TcmMpLnJlcGxhY2UoXCJ0aGlzLmNvbG9yXCIsJ1wiJyt0aGlzLmNvbG9yKydcIicpfSxnZXRQYXR0ZXJuOmZ1bmN0aW9uKHQpe3JldHVybiB0LmNyZWF0ZVBhdHRlcm4odGhpcy5zb3VyY2V8fHRoaXMuZ2V0UGF0dGVyblNyYygpLFwicmVwZWF0XCIpfSxfc2V0QnJ1c2hTdHlsZXM6ZnVuY3Rpb24odCl7dGhpcy5jYWxsU3VwZXIoXCJfc2V0QnJ1c2hTdHlsZXNcIix0KSx0LnN0cm9rZVN0eWxlPXRoaXMuZ2V0UGF0dGVybih0KX0sY3JlYXRlUGF0aDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmNhbGxTdXBlcihcImNyZWF0ZVBhdGhcIix0KSxpPWUuX2dldExlZnRUb3BDb29yZHMoKS5zY2FsYXJBZGQoZS5zdHJva2VXaWR0aC8yKTtyZXR1cm4gZS5zdHJva2U9bmV3IFMuUGF0dGVybih7c291cmNlOnRoaXMuc291cmNlfHx0aGlzLmdldFBhdHRlcm5TcmNGdW5jdGlvbigpLG9mZnNldFg6LWkueCxvZmZzZXRZOi1pLnl9KSxlfX0pLGZ1bmN0aW9uKCl7dmFyIHQ9Uy51dGlsLmdldFBvaW50ZXIsZT1TLnV0aWwuZGVncmVlc1RvUmFkaWFucyxpPVMudXRpbC5pc1RvdWNoRXZlbnQ7Zm9yKHZhciByIGluIFMuQ2FudmFzPVMudXRpbC5jcmVhdGVDbGFzcyhTLlN0YXRpY0NhbnZhcyx7aW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUpe2V8fChlPXt9KSx0aGlzLnJlbmRlckFuZFJlc2V0Qm91bmQ9dGhpcy5yZW5kZXJBbmRSZXNldC5iaW5kKHRoaXMpLHRoaXMucmVxdWVzdFJlbmRlckFsbEJvdW5kPXRoaXMucmVxdWVzdFJlbmRlckFsbC5iaW5kKHRoaXMpLHRoaXMuX2luaXRTdGF0aWModCxlKSx0aGlzLl9pbml0SW50ZXJhY3RpdmUoKSx0aGlzLl9jcmVhdGVDYWNoZUNhbnZhcygpfSx1bmlmb3JtU2NhbGluZzohMCx1bmlTY2FsZUtleTpcInNoaWZ0S2V5XCIsY2VudGVyZWRTY2FsaW5nOiExLGNlbnRlcmVkUm90YXRpb246ITEsY2VudGVyZWRLZXk6XCJhbHRLZXlcIixhbHRBY3Rpb25LZXk6XCJzaGlmdEtleVwiLGludGVyYWN0aXZlOiEwLHNlbGVjdGlvbjohMCxzZWxlY3Rpb25LZXk6XCJzaGlmdEtleVwiLGFsdFNlbGVjdGlvbktleTpudWxsLHNlbGVjdGlvbkNvbG9yOlwicmdiYSgxMDAsIDEwMCwgMjU1LCAwLjMpXCIsc2VsZWN0aW9uRGFzaEFycmF5OltdLHNlbGVjdGlvbkJvcmRlckNvbG9yOlwicmdiYSgyNTUsIDI1NSwgMjU1LCAwLjMpXCIsc2VsZWN0aW9uTGluZVdpZHRoOjEsc2VsZWN0aW9uRnVsbHlDb250YWluZWQ6ITEsaG92ZXJDdXJzb3I6XCJtb3ZlXCIsbW92ZUN1cnNvcjpcIm1vdmVcIixkZWZhdWx0Q3Vyc29yOlwiZGVmYXVsdFwiLGZyZWVEcmF3aW5nQ3Vyc29yOlwiY3Jvc3NoYWlyXCIsbm90QWxsb3dlZEN1cnNvcjpcIm5vdC1hbGxvd2VkXCIsY29udGFpbmVyQ2xhc3M6XCJjYW52YXMtY29udGFpbmVyXCIscGVyUGl4ZWxUYXJnZXRGaW5kOiExLHRhcmdldEZpbmRUb2xlcmFuY2U6MCxza2lwVGFyZ2V0RmluZDohMSxpc0RyYXdpbmdNb2RlOiExLHByZXNlcnZlT2JqZWN0U3RhY2tpbmc6ITEsc25hcEFuZ2xlOjAsc25hcFRocmVzaG9sZDpudWxsLHN0b3BDb250ZXh0TWVudTohMSxmaXJlUmlnaHRDbGljazohMSxmaXJlTWlkZGxlQ2xpY2s6ITEsdGFyZ2V0czpbXSxlbmFibGVQb2ludGVyRXZlbnRzOiExLF9ob3ZlcmVkVGFyZ2V0Om51bGwsX2hvdmVyZWRUYXJnZXRzOltdLF9pbml0SW50ZXJhY3RpdmU6ZnVuY3Rpb24oKXt0aGlzLl9jdXJyZW50VHJhbnNmb3JtPW51bGwsdGhpcy5fZ3JvdXBTZWxlY3Rvcj1udWxsLHRoaXMuX2luaXRXcmFwcGVyRWxlbWVudCgpLHRoaXMuX2NyZWF0ZVVwcGVyQ2FudmFzKCksdGhpcy5faW5pdEV2ZW50TGlzdGVuZXJzKCksdGhpcy5faW5pdFJldGluYVNjYWxpbmcoKSx0aGlzLmZyZWVEcmF3aW5nQnJ1c2g9Uy5QZW5jaWxCcnVzaCYmbmV3IFMuUGVuY2lsQnJ1c2godGhpcyksdGhpcy5jYWxjT2Zmc2V0KCl9LF9jaG9vc2VPYmplY3RzVG9SZW5kZXI6ZnVuY3Rpb24oKXt2YXIgdCxlLGkscj10aGlzLmdldEFjdGl2ZU9iamVjdHMoKTtpZihyLmxlbmd0aD4wJiYhdGhpcy5wcmVzZXJ2ZU9iamVjdFN0YWNraW5nKXtlPVtdLGk9W107Zm9yKHZhciBuPTAscz10aGlzLl9vYmplY3RzLmxlbmd0aDtuPHM7bisrKXQ9dGhpcy5fb2JqZWN0c1tuXSwtMT09PXIuaW5kZXhPZih0KT9lLnB1c2godCk6aS5wdXNoKHQpO3IubGVuZ3RoPjEmJih0aGlzLl9hY3RpdmVPYmplY3QuX29iamVjdHM9aSksZS5wdXNoLmFwcGx5KGUsaSl9ZWxzZSBlPXRoaXMuX29iamVjdHM7cmV0dXJuIGV9LHJlbmRlckFsbDpmdW5jdGlvbigpeyF0aGlzLmNvbnRleHRUb3BEaXJ0eXx8dGhpcy5fZ3JvdXBTZWxlY3Rvcnx8dGhpcy5pc0RyYXdpbmdNb2RlfHwodGhpcy5jbGVhckNvbnRleHQodGhpcy5jb250ZXh0VG9wKSx0aGlzLmNvbnRleHRUb3BEaXJ0eT0hMSksdGhpcy5oYXNMb3N0Q29udGV4dCYmKHRoaXMucmVuZGVyVG9wTGF5ZXIodGhpcy5jb250ZXh0VG9wKSx0aGlzLmhhc0xvc3RDb250ZXh0PSExKTt2YXIgdD10aGlzLmNvbnRleHRDb250YWluZXI7cmV0dXJuIHRoaXMucmVuZGVyQ2FudmFzKHQsdGhpcy5fY2hvb3NlT2JqZWN0c1RvUmVuZGVyKCkpLHRoaXN9LHJlbmRlclRvcExheWVyOmZ1bmN0aW9uKHQpe3Quc2F2ZSgpLHRoaXMuaXNEcmF3aW5nTW9kZSYmdGhpcy5faXNDdXJyZW50bHlEcmF3aW5nJiYodGhpcy5mcmVlRHJhd2luZ0JydXNoJiZ0aGlzLmZyZWVEcmF3aW5nQnJ1c2guX3JlbmRlcigpLHRoaXMuY29udGV4dFRvcERpcnR5PSEwKSx0aGlzLnNlbGVjdGlvbiYmdGhpcy5fZ3JvdXBTZWxlY3RvciYmKHRoaXMuX2RyYXdTZWxlY3Rpb24odCksdGhpcy5jb250ZXh0VG9wRGlydHk9ITApLHQucmVzdG9yZSgpfSxyZW5kZXJUb3A6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNvbnRleHRUb3A7cmV0dXJuIHRoaXMuY2xlYXJDb250ZXh0KHQpLHRoaXMucmVuZGVyVG9wTGF5ZXIodCksdGhpcy5maXJlKFwiYWZ0ZXI6cmVuZGVyXCIpLHRoaXN9LF9ub3JtYWxpemVQb2ludGVyOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5jYWxjVHJhbnNmb3JtTWF0cml4KCkscj1TLnV0aWwuaW52ZXJ0VHJhbnNmb3JtKGkpLG49dGhpcy5yZXN0b3JlUG9pbnRlclZwdChlKTtyZXR1cm4gUy51dGlsLnRyYW5zZm9ybVBvaW50KG4scil9LGlzVGFyZ2V0VHJhbnNwYXJlbnQ6ZnVuY3Rpb24odCxlLGkpe2lmKHQuc2hvdWxkQ2FjaGUoKSYmdC5fY2FjaGVDYW52YXMmJnQhPT10aGlzLl9hY3RpdmVPYmplY3Qpe3ZhciByPXRoaXMuX25vcm1hbGl6ZVBvaW50ZXIodCx7eDplLHk6aX0pLG49TWF0aC5tYXgodC5jYWNoZVRyYW5zbGF0aW9uWCtyLngqdC56b29tWCwwKSxzPU1hdGgubWF4KHQuY2FjaGVUcmFuc2xhdGlvblkrci55KnQuem9vbVksMCk7cmV0dXJuIFMudXRpbC5pc1RyYW5zcGFyZW50KHQuX2NhY2hlQ29udGV4dCxNYXRoLnJvdW5kKG4pLE1hdGgucm91bmQocyksdGhpcy50YXJnZXRGaW5kVG9sZXJhbmNlKX12YXIgbz10aGlzLmNvbnRleHRDYWNoZSxhPXQuc2VsZWN0aW9uQmFja2dyb3VuZENvbG9yLGg9dGhpcy52aWV3cG9ydFRyYW5zZm9ybTtyZXR1cm4gdC5zZWxlY3Rpb25CYWNrZ3JvdW5kQ29sb3I9XCJcIix0aGlzLmNsZWFyQ29udGV4dChvKSxvLnNhdmUoKSxvLnRyYW5zZm9ybShoWzBdLGhbMV0saFsyXSxoWzNdLGhbNF0saFs1XSksdC5yZW5kZXIobyksby5yZXN0b3JlKCksdC5zZWxlY3Rpb25CYWNrZ3JvdW5kQ29sb3I9YSxTLnV0aWwuaXNUcmFuc3BhcmVudChvLGUsaSx0aGlzLnRhcmdldEZpbmRUb2xlcmFuY2UpfSxfaXNTZWxlY3Rpb25LZXlQcmVzc2VkOmZ1bmN0aW9uKHQpe3JldHVybiBBcnJheS5pc0FycmF5KHRoaXMuc2VsZWN0aW9uS2V5KT8hIXRoaXMuc2VsZWN0aW9uS2V5LmZpbmQoKGZ1bmN0aW9uKGUpe3JldHVybiEwPT09dFtlXX0pKTp0W3RoaXMuc2VsZWN0aW9uS2V5XX0sX3Nob3VsZENsZWFyU2VsZWN0aW9uOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5nZXRBY3RpdmVPYmplY3RzKCkscj10aGlzLl9hY3RpdmVPYmplY3Q7cmV0dXJuIWV8fGUmJnImJmkubGVuZ3RoPjEmJi0xPT09aS5pbmRleE9mKGUpJiZyIT09ZSYmIXRoaXMuX2lzU2VsZWN0aW9uS2V5UHJlc3NlZCh0KXx8ZSYmIWUuZXZlbnRlZHx8ZSYmIWUuc2VsZWN0YWJsZSYmciYmciE9PWV9LF9zaG91bGRDZW50ZXJUcmFuc2Zvcm06ZnVuY3Rpb24odCxlLGkpe3ZhciByO2lmKHQpcmV0dXJuXCJzY2FsZVwiPT09ZXx8XCJzY2FsZVhcIj09PWV8fFwic2NhbGVZXCI9PT1lfHxcInJlc2l6aW5nXCI9PT1lP3I9dGhpcy5jZW50ZXJlZFNjYWxpbmd8fHQuY2VudGVyZWRTY2FsaW5nOlwicm90YXRlXCI9PT1lJiYocj10aGlzLmNlbnRlcmVkUm90YXRpb258fHQuY2VudGVyZWRSb3RhdGlvbikscj8haTppfSxfZ2V0T3JpZ2luRnJvbUNvcm5lcjpmdW5jdGlvbih0LGUpe3ZhciBpPXt4OnQub3JpZ2luWCx5OnQub3JpZ2luWX07cmV0dXJuXCJtbFwiPT09ZXx8XCJ0bFwiPT09ZXx8XCJibFwiPT09ZT9pLng9XCJyaWdodFwiOlwibXJcIiE9PWUmJlwidHJcIiE9PWUmJlwiYnJcIiE9PWV8fChpLng9XCJsZWZ0XCIpLFwidGxcIj09PWV8fFwibXRcIj09PWV8fFwidHJcIj09PWU/aS55PVwiYm90dG9tXCI6XCJibFwiIT09ZSYmXCJtYlwiIT09ZSYmXCJiclwiIT09ZXx8KGkueT1cInRvcFwiKSxpfSxfZ2V0QWN0aW9uRnJvbUNvcm5lcjpmdW5jdGlvbih0LGUsaSxyKXtpZighZXx8IXQpcmV0dXJuXCJkcmFnXCI7dmFyIG49ci5jb250cm9sc1tlXTtyZXR1cm4gbi5nZXRBY3Rpb25OYW1lKGksbixyKX0sX3NldHVwQ3VycmVudFRyYW5zZm9ybTpmdW5jdGlvbih0LGkscil7aWYoaSl7dmFyIG49dGhpcy5nZXRQb2ludGVyKHQpLHM9aS5fX2Nvcm5lcixvPWkuY29udHJvbHNbc10sYT1yJiZzP28uZ2V0QWN0aW9uSGFuZGxlcih0LGksbyk6Uy5jb250cm9sc1V0aWxzLmRyYWdIYW5kbGVyLGg9dGhpcy5fZ2V0QWN0aW9uRnJvbUNvcm5lcihyLHMsdCxpKSxsPXRoaXMuX2dldE9yaWdpbkZyb21Db3JuZXIoaSxzKSxjPXRbdGhpcy5jZW50ZXJlZEtleV0sdT17dGFyZ2V0OmksYWN0aW9uOmgsYWN0aW9uSGFuZGxlcjphLGNvcm5lcjpzLHNjYWxlWDppLnNjYWxlWCxzY2FsZVk6aS5zY2FsZVksc2tld1g6aS5za2V3WCxza2V3WTppLnNrZXdZLG9mZnNldFg6bi54LWkubGVmdCxvZmZzZXRZOm4ueS1pLnRvcCxvcmlnaW5YOmwueCxvcmlnaW5ZOmwueSxleDpuLngsZXk6bi55LGxhc3RYOm4ueCxsYXN0WTpuLnksdGhldGE6ZShpLmFuZ2xlKSx3aWR0aDppLndpZHRoKmkuc2NhbGVYLHNoaWZ0S2V5OnQuc2hpZnRLZXksYWx0S2V5OmMsb3JpZ2luYWw6Uy51dGlsLnNhdmVPYmplY3RUcmFuc2Zvcm0oaSl9O3RoaXMuX3Nob3VsZENlbnRlclRyYW5zZm9ybShpLGgsYykmJih1Lm9yaWdpblg9XCJjZW50ZXJcIix1Lm9yaWdpblk9XCJjZW50ZXJcIiksdS5vcmlnaW5hbC5vcmlnaW5YPWwueCx1Lm9yaWdpbmFsLm9yaWdpblk9bC55LHRoaXMuX2N1cnJlbnRUcmFuc2Zvcm09dSx0aGlzLl9iZWZvcmVUcmFuc2Zvcm0odCl9fSxzZXRDdXJzb3I6ZnVuY3Rpb24odCl7dGhpcy51cHBlckNhbnZhc0VsLnN0eWxlLmN1cnNvcj10fSxfZHJhd1NlbGVjdGlvbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9ncm91cFNlbGVjdG9yLGk9bmV3IFMuUG9pbnQoZS5leCxlLmV5KSxyPVMudXRpbC50cmFuc2Zvcm1Qb2ludChpLHRoaXMudmlld3BvcnRUcmFuc2Zvcm0pLG49bmV3IFMuUG9pbnQoZS5leCtlLmxlZnQsZS5leStlLnRvcCkscz1TLnV0aWwudHJhbnNmb3JtUG9pbnQobix0aGlzLnZpZXdwb3J0VHJhbnNmb3JtKSxvPU1hdGgubWluKHIueCxzLngpLGE9TWF0aC5taW4oci55LHMueSksaD1NYXRoLm1heChyLngscy54KSxsPU1hdGgubWF4KHIueSxzLnkpLGM9dGhpcy5zZWxlY3Rpb25MaW5lV2lkdGgvMjt0aGlzLnNlbGVjdGlvbkNvbG9yJiYodC5maWxsU3R5bGU9dGhpcy5zZWxlY3Rpb25Db2xvcix0LmZpbGxSZWN0KG8sYSxoLW8sbC1hKSksdGhpcy5zZWxlY3Rpb25MaW5lV2lkdGgmJnRoaXMuc2VsZWN0aW9uQm9yZGVyQ29sb3ImJih0LmxpbmVXaWR0aD10aGlzLnNlbGVjdGlvbkxpbmVXaWR0aCx0LnN0cm9rZVN0eWxlPXRoaXMuc2VsZWN0aW9uQm9yZGVyQ29sb3Isbys9YyxhKz1jLGgtPWMsbC09YyxTLk9iamVjdC5wcm90b3R5cGUuX3NldExpbmVEYXNoLmNhbGwodGhpcyx0LHRoaXMuc2VsZWN0aW9uRGFzaEFycmF5KSx0LnN0cm9rZVJlY3QobyxhLGgtbyxsLWEpKX0sZmluZFRhcmdldDpmdW5jdGlvbih0LGUpe2lmKCF0aGlzLnNraXBUYXJnZXRGaW5kKXt2YXIgcixuLHM9dGhpcy5nZXRQb2ludGVyKHQsITApLG89dGhpcy5fYWN0aXZlT2JqZWN0LGE9dGhpcy5nZXRBY3RpdmVPYmplY3RzKCksaD1pKHQpLGw9YS5sZW5ndGg+MSYmIWV8fDE9PT1hLmxlbmd0aDtpZih0aGlzLnRhcmdldHM9W10sbCYmby5fZmluZFRhcmdldENvcm5lcihzLGgpKXJldHVybiBvO2lmKGEubGVuZ3RoPjEmJiFlJiZvPT09dGhpcy5fc2VhcmNoUG9zc2libGVUYXJnZXRzKFtvXSxzKSlyZXR1cm4gbztpZigxPT09YS5sZW5ndGgmJm89PT10aGlzLl9zZWFyY2hQb3NzaWJsZVRhcmdldHMoW29dLHMpKXtpZighdGhpcy5wcmVzZXJ2ZU9iamVjdFN0YWNraW5nKXJldHVybiBvO3I9byxuPXRoaXMudGFyZ2V0cyx0aGlzLnRhcmdldHM9W119dmFyIGM9dGhpcy5fc2VhcmNoUG9zc2libGVUYXJnZXRzKHRoaXMuX29iamVjdHMscyk7cmV0dXJuIHRbdGhpcy5hbHRTZWxlY3Rpb25LZXldJiZjJiZyJiZjIT09ciYmKGM9cix0aGlzLnRhcmdldHM9biksY319LF9jaGVja1RhcmdldDpmdW5jdGlvbih0LGUsaSl7aWYoZSYmZS52aXNpYmxlJiZlLmV2ZW50ZWQmJmUuY29udGFpbnNQb2ludCh0KSl7aWYoIXRoaXMucGVyUGl4ZWxUYXJnZXRGaW5kJiYhZS5wZXJQaXhlbFRhcmdldEZpbmR8fGUuaXNFZGl0aW5nKXJldHVybiEwO2lmKCF0aGlzLmlzVGFyZ2V0VHJhbnNwYXJlbnQoZSxpLngsaS55KSlyZXR1cm4hMH19LF9zZWFyY2hQb3NzaWJsZVRhcmdldHM6ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkscixuPXQubGVuZ3RoO24tLTspe3ZhciBzPXRbbl0sbz1zLmdyb3VwP3RoaXMuX25vcm1hbGl6ZVBvaW50ZXIocy5ncm91cCxlKTplO2lmKHRoaXMuX2NoZWNrVGFyZ2V0KG8scyxlKSl7KGk9dFtuXSkuc3ViVGFyZ2V0Q2hlY2smJmkgaW5zdGFuY2VvZiBTLkdyb3VwJiYocj10aGlzLl9zZWFyY2hQb3NzaWJsZVRhcmdldHMoaS5fb2JqZWN0cyxlKSkmJnRoaXMudGFyZ2V0cy5wdXNoKHIpO2JyZWFrfX1yZXR1cm4gaX0scmVzdG9yZVBvaW50ZXJWcHQ6ZnVuY3Rpb24odCl7cmV0dXJuIFMudXRpbC50cmFuc2Zvcm1Qb2ludCh0LFMudXRpbC5pbnZlcnRUcmFuc2Zvcm0odGhpcy52aWV3cG9ydFRyYW5zZm9ybSkpfSxnZXRQb2ludGVyOmZ1bmN0aW9uKGUsaSl7aWYodGhpcy5fYWJzb2x1dGVQb2ludGVyJiYhaSlyZXR1cm4gdGhpcy5fYWJzb2x1dGVQb2ludGVyO2lmKHRoaXMuX3BvaW50ZXImJmkpcmV0dXJuIHRoaXMuX3BvaW50ZXI7dmFyIHIsbj10KGUpLHM9dGhpcy51cHBlckNhbnZhc0VsLG89cy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxhPW8ud2lkdGh8fDAsaD1vLmhlaWdodHx8MDthJiZofHwoXCJ0b3BcImluIG8mJlwiYm90dG9tXCJpbiBvJiYoaD1NYXRoLmFicyhvLnRvcC1vLmJvdHRvbSkpLFwicmlnaHRcImluIG8mJlwibGVmdFwiaW4gbyYmKGE9TWF0aC5hYnMoby5yaWdodC1vLmxlZnQpKSksdGhpcy5jYWxjT2Zmc2V0KCksbi54PW4ueC10aGlzLl9vZmZzZXQubGVmdCxuLnk9bi55LXRoaXMuX29mZnNldC50b3AsaXx8KG49dGhpcy5yZXN0b3JlUG9pbnRlclZwdChuKSk7dmFyIGw9dGhpcy5nZXRSZXRpbmFTY2FsaW5nKCk7cmV0dXJuIDEhPT1sJiYobi54Lz1sLG4ueS89bCkscj0wPT09YXx8MD09PWg/e3dpZHRoOjEsaGVpZ2h0OjF9Ont3aWR0aDpzLndpZHRoL2EsaGVpZ2h0OnMuaGVpZ2h0L2h9LHt4Om4ueCpyLndpZHRoLHk6bi55KnIuaGVpZ2h0fX0sX2NyZWF0ZVVwcGVyQ2FudmFzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5sb3dlckNhbnZhc0VsLmNsYXNzTmFtZS5yZXBsYWNlKC9cXHMqbG93ZXItY2FudmFzXFxzKi8sXCJcIiksZT10aGlzLmxvd2VyQ2FudmFzRWwsaT10aGlzLnVwcGVyQ2FudmFzRWw7aT9pLmNsYXNzTmFtZT1cIlwiOihpPXRoaXMuX2NyZWF0ZUNhbnZhc0VsZW1lbnQoKSx0aGlzLnVwcGVyQ2FudmFzRWw9aSksUy51dGlsLmFkZENsYXNzKGksXCJ1cHBlci1jYW52YXMgXCIrdCksdGhpcy53cmFwcGVyRWwuYXBwZW5kQ2hpbGQoaSksdGhpcy5fY29weUNhbnZhc1N0eWxlKGUsaSksdGhpcy5fYXBwbHlDYW52YXNTdHlsZShpKSx0aGlzLmNvbnRleHRUb3A9aS5nZXRDb250ZXh0KFwiMmRcIil9LGdldFRvcENvbnRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZXh0VG9wfSxfY3JlYXRlQ2FjaGVDYW52YXM6ZnVuY3Rpb24oKXt0aGlzLmNhY2hlQ2FudmFzRWw9dGhpcy5fY3JlYXRlQ2FudmFzRWxlbWVudCgpLHRoaXMuY2FjaGVDYW52YXNFbC5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLHRoaXMud2lkdGgpLHRoaXMuY2FjaGVDYW52YXNFbC5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIix0aGlzLmhlaWdodCksdGhpcy5jb250ZXh0Q2FjaGU9dGhpcy5jYWNoZUNhbnZhc0VsLmdldENvbnRleHQoXCIyZFwiKX0sX2luaXRXcmFwcGVyRWxlbWVudDpmdW5jdGlvbigpe3RoaXMud3JhcHBlckVsPVMudXRpbC53cmFwRWxlbWVudCh0aGlzLmxvd2VyQ2FudmFzRWwsXCJkaXZcIix7Y2xhc3M6dGhpcy5jb250YWluZXJDbGFzc30pLFMudXRpbC5zZXRTdHlsZSh0aGlzLndyYXBwZXJFbCx7d2lkdGg6dGhpcy53aWR0aCtcInB4XCIsaGVpZ2h0OnRoaXMuaGVpZ2h0K1wicHhcIixwb3NpdGlvbjpcInJlbGF0aXZlXCJ9KSxTLnV0aWwubWFrZUVsZW1lbnRVbnNlbGVjdGFibGUodGhpcy53cmFwcGVyRWwpfSxfYXBwbHlDYW52YXNTdHlsZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLndpZHRofHx0LndpZHRoLGk9dGhpcy5oZWlnaHR8fHQuaGVpZ2h0O1MudXRpbC5zZXRTdHlsZSh0LHtwb3NpdGlvbjpcImFic29sdXRlXCIsd2lkdGg6ZStcInB4XCIsaGVpZ2h0OmkrXCJweFwiLGxlZnQ6MCx0b3A6MCxcInRvdWNoLWFjdGlvblwiOnRoaXMuYWxsb3dUb3VjaFNjcm9sbGluZz9cIm1hbmlwdWxhdGlvblwiOlwibm9uZVwiLFwiLW1zLXRvdWNoLWFjdGlvblwiOnRoaXMuYWxsb3dUb3VjaFNjcm9sbGluZz9cIm1hbmlwdWxhdGlvblwiOlwibm9uZVwifSksdC53aWR0aD1lLHQuaGVpZ2h0PWksUy51dGlsLm1ha2VFbGVtZW50VW5zZWxlY3RhYmxlKHQpfSxfY29weUNhbnZhc1N0eWxlOmZ1bmN0aW9uKHQsZSl7ZS5zdHlsZS5jc3NUZXh0PXQuc3R5bGUuY3NzVGV4dH0sZ2V0U2VsZWN0aW9uQ29udGV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRleHRUb3B9LGdldFNlbGVjdGlvbkVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51cHBlckNhbnZhc0VsfSxnZXRBY3RpdmVPYmplY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlT2JqZWN0fSxnZXRBY3RpdmVPYmplY3RzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fYWN0aXZlT2JqZWN0O3JldHVybiB0P1wiYWN0aXZlU2VsZWN0aW9uXCI9PT10LnR5cGUmJnQuX29iamVjdHM/dC5fb2JqZWN0cy5zbGljZSgwKTpbdF06W119LF9vbk9iamVjdFJlbW92ZWQ6ZnVuY3Rpb24odCl7dD09PXRoaXMuX2FjdGl2ZU9iamVjdCYmKHRoaXMuZmlyZShcImJlZm9yZTpzZWxlY3Rpb246Y2xlYXJlZFwiLHt0YXJnZXQ6dH0pLHRoaXMuX2Rpc2NhcmRBY3RpdmVPYmplY3QoKSx0aGlzLmZpcmUoXCJzZWxlY3Rpb246Y2xlYXJlZFwiLHt0YXJnZXQ6dH0pLHQuZmlyZShcImRlc2VsZWN0ZWRcIikpLHQ9PT10aGlzLl9ob3ZlcmVkVGFyZ2V0JiYodGhpcy5faG92ZXJlZFRhcmdldD1udWxsLHRoaXMuX2hvdmVyZWRUYXJnZXRzPVtdKSx0aGlzLmNhbGxTdXBlcihcIl9vbk9iamVjdFJlbW92ZWRcIix0KX0sX2ZpcmVTZWxlY3Rpb25FdmVudHM6ZnVuY3Rpb24odCxlKXt2YXIgaT0hMSxyPXRoaXMuZ2V0QWN0aXZlT2JqZWN0cygpLG49W10scz1bXTt0LmZvckVhY2goKGZ1bmN0aW9uKHQpey0xPT09ci5pbmRleE9mKHQpJiYoaT0hMCx0LmZpcmUoXCJkZXNlbGVjdGVkXCIse2UsdGFyZ2V0OnR9KSxzLnB1c2godCkpfSkpLHIuZm9yRWFjaCgoZnVuY3Rpb24ocil7LTE9PT10LmluZGV4T2YocikmJihpPSEwLHIuZmlyZShcInNlbGVjdGVkXCIse2UsdGFyZ2V0OnJ9KSxuLnB1c2gocikpfSkpLHQubGVuZ3RoPjAmJnIubGVuZ3RoPjA/aSYmdGhpcy5maXJlKFwic2VsZWN0aW9uOnVwZGF0ZWRcIix7ZSxzZWxlY3RlZDpuLGRlc2VsZWN0ZWQ6c30pOnIubGVuZ3RoPjA/dGhpcy5maXJlKFwic2VsZWN0aW9uOmNyZWF0ZWRcIix7ZSxzZWxlY3RlZDpufSk6dC5sZW5ndGg+MCYmdGhpcy5maXJlKFwic2VsZWN0aW9uOmNsZWFyZWRcIix7ZSxkZXNlbGVjdGVkOnN9KX0sc2V0QWN0aXZlT2JqZWN0OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5nZXRBY3RpdmVPYmplY3RzKCk7cmV0dXJuIHRoaXMuX3NldEFjdGl2ZU9iamVjdCh0LGUpLHRoaXMuX2ZpcmVTZWxlY3Rpb25FdmVudHMoaSxlKSx0aGlzfSxfc2V0QWN0aXZlT2JqZWN0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2FjdGl2ZU9iamVjdCE9PXQmJiEhdGhpcy5fZGlzY2FyZEFjdGl2ZU9iamVjdChlLHQpJiYhdC5vblNlbGVjdCh7ZX0pJiYodGhpcy5fYWN0aXZlT2JqZWN0PXQsITApfSxfZGlzY2FyZEFjdGl2ZU9iamVjdDpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2FjdGl2ZU9iamVjdDtpZihpKXtpZihpLm9uRGVzZWxlY3Qoe2U6dCxvYmplY3Q6ZX0pKXJldHVybiExO3RoaXMuX2FjdGl2ZU9iamVjdD1udWxsfXJldHVybiEwfSxkaXNjYXJkQWN0aXZlT2JqZWN0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0QWN0aXZlT2JqZWN0cygpLGk9dGhpcy5nZXRBY3RpdmVPYmplY3QoKTtyZXR1cm4gZS5sZW5ndGgmJnRoaXMuZmlyZShcImJlZm9yZTpzZWxlY3Rpb246Y2xlYXJlZFwiLHt0YXJnZXQ6aSxlOnR9KSx0aGlzLl9kaXNjYXJkQWN0aXZlT2JqZWN0KHQpLHRoaXMuX2ZpcmVTZWxlY3Rpb25FdmVudHMoZSx0KSx0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy53cmFwcGVyRWw7cmV0dXJuIHRoaXMucmVtb3ZlTGlzdGVuZXJzKCksdC5yZW1vdmVDaGlsZCh0aGlzLnVwcGVyQ2FudmFzRWwpLHQucmVtb3ZlQ2hpbGQodGhpcy5sb3dlckNhbnZhc0VsKSx0aGlzLmNvbnRleHRDYWNoZT1udWxsLHRoaXMuY29udGV4dFRvcD1udWxsLFtcInVwcGVyQ2FudmFzRWxcIixcImNhY2hlQ2FudmFzRWxcIl0uZm9yRWFjaChmdW5jdGlvbih0KXtTLnV0aWwuY2xlYW5VcEpzZG9tTm9kZSh0aGlzW3RdKSx0aGlzW3RdPXZvaWQgMH0uYmluZCh0aGlzKSksdC5wYXJlbnROb2RlJiZ0LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRoaXMubG93ZXJDYW52YXNFbCx0aGlzLndyYXBwZXJFbCksZGVsZXRlIHRoaXMud3JhcHBlckVsLFMuU3RhdGljQ2FudmFzLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpc30sY2xlYXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXNjYXJkQWN0aXZlT2JqZWN0KCksdGhpcy5jbGVhckNvbnRleHQodGhpcy5jb250ZXh0VG9wKSx0aGlzLmNhbGxTdXBlcihcImNsZWFyXCIpfSxkcmF3Q29udHJvbHM6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fYWN0aXZlT2JqZWN0O2UmJmUuX3JlbmRlckNvbnRyb2xzKHQpfSxfdG9PYmplY3Q6ZnVuY3Rpb24odCxlLGkpe3ZhciByPXRoaXMuX3JlYWxpemVHcm91cFRyYW5zZm9ybU9uT2JqZWN0KHQpLG49dGhpcy5jYWxsU3VwZXIoXCJfdG9PYmplY3RcIix0LGUsaSk7cmV0dXJuIHRoaXMuX3Vud2luZEdyb3VwVHJhbnNmb3JtT25PYmplY3QodCxyKSxufSxfcmVhbGl6ZUdyb3VwVHJhbnNmb3JtT25PYmplY3Q6ZnVuY3Rpb24odCl7aWYodC5ncm91cCYmXCJhY3RpdmVTZWxlY3Rpb25cIj09PXQuZ3JvdXAudHlwZSYmdGhpcy5fYWN0aXZlT2JqZWN0PT09dC5ncm91cCl7dmFyIGU9e307cmV0dXJuW1wiYW5nbGVcIixcImZsaXBYXCIsXCJmbGlwWVwiLFwibGVmdFwiLFwic2NhbGVYXCIsXCJzY2FsZVlcIixcInNrZXdYXCIsXCJza2V3WVwiLFwidG9wXCJdLmZvckVhY2goKGZ1bmN0aW9uKGkpe2VbaV09dFtpXX0pKSxTLnV0aWwuYWRkVHJhbnNmb3JtVG9PYmplY3QodCx0aGlzLl9hY3RpdmVPYmplY3QuY2FsY093bk1hdHJpeCgpKSxlfXJldHVybiBudWxsfSxfdW53aW5kR3JvdXBUcmFuc2Zvcm1Pbk9iamVjdDpmdW5jdGlvbih0LGUpe2UmJnQuc2V0KGUpfSxfc2V0U1ZHT2JqZWN0OmZ1bmN0aW9uKHQsZSxpKXt2YXIgcj10aGlzLl9yZWFsaXplR3JvdXBUcmFuc2Zvcm1Pbk9iamVjdChlKTt0aGlzLmNhbGxTdXBlcihcIl9zZXRTVkdPYmplY3RcIix0LGUsaSksdGhpcy5fdW53aW5kR3JvdXBUcmFuc2Zvcm1Pbk9iamVjdChlLHIpfSxzZXRWaWV3cG9ydFRyYW5zZm9ybTpmdW5jdGlvbih0KXt0aGlzLnJlbmRlck9uQWRkUmVtb3ZlJiZ0aGlzLl9hY3RpdmVPYmplY3QmJnRoaXMuX2FjdGl2ZU9iamVjdC5pc0VkaXRpbmcmJnRoaXMuX2FjdGl2ZU9iamVjdC5jbGVhckNvbnRleHRUb3AoKSxTLlN0YXRpY0NhbnZhcy5wcm90b3R5cGUuc2V0Vmlld3BvcnRUcmFuc2Zvcm0uY2FsbCh0aGlzLHQpfX0pLFMuU3RhdGljQ2FudmFzKVwicHJvdG90eXBlXCIhPT1yJiYoUy5DYW52YXNbcl09Uy5TdGF0aWNDYW52YXNbcl0pfSgpLGZ1bmN0aW9uKCl7dmFyIHQ9Uy51dGlsLmFkZExpc3RlbmVyLGU9Uy51dGlsLnJlbW92ZUxpc3RlbmVyLGk9e3Bhc3NpdmU6ITF9O2Z1bmN0aW9uIHIodCxlKXtyZXR1cm4gdC5idXR0b24mJnQuYnV0dG9uPT09ZS0xfVMudXRpbC5vYmplY3QuZXh0ZW5kKFMuQ2FudmFzLnByb3RvdHlwZSx7bWFpblRvdWNoSWQ6bnVsbCxfaW5pdEV2ZW50TGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVMaXN0ZW5lcnMoKSx0aGlzLl9iaW5kRXZlbnRzKCksdGhpcy5hZGRPclJlbW92ZSh0LFwiYWRkXCIpfSxfZ2V0RXZlbnRQcmVmaXg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbmFibGVQb2ludGVyRXZlbnRzP1wicG9pbnRlclwiOlwibW91c2VcIn0sYWRkT3JSZW1vdmU6ZnVuY3Rpb24odCxlKXt2YXIgcj10aGlzLnVwcGVyQ2FudmFzRWwsbj10aGlzLl9nZXRFdmVudFByZWZpeCgpO3QoUy53aW5kb3csXCJyZXNpemVcIix0aGlzLl9vblJlc2l6ZSksdChyLG4rXCJkb3duXCIsdGhpcy5fb25Nb3VzZURvd24pLHQocixuK1wibW92ZVwiLHRoaXMuX29uTW91c2VNb3ZlLGkpLHQocixuK1wib3V0XCIsdGhpcy5fb25Nb3VzZU91dCksdChyLG4rXCJlbnRlclwiLHRoaXMuX29uTW91c2VFbnRlciksdChyLFwid2hlZWxcIix0aGlzLl9vbk1vdXNlV2hlZWwpLHQocixcImNvbnRleHRtZW51XCIsdGhpcy5fb25Db250ZXh0TWVudSksdChyLFwiZGJsY2xpY2tcIix0aGlzLl9vbkRvdWJsZUNsaWNrKSx0KHIsXCJkcmFnb3ZlclwiLHRoaXMuX29uRHJhZ092ZXIpLHQocixcImRyYWdlbnRlclwiLHRoaXMuX29uRHJhZ0VudGVyKSx0KHIsXCJkcmFnbGVhdmVcIix0aGlzLl9vbkRyYWdMZWF2ZSksdChyLFwiZHJvcFwiLHRoaXMuX29uRHJvcCksdGhpcy5lbmFibGVQb2ludGVyRXZlbnRzfHx0KHIsXCJ0b3VjaHN0YXJ0XCIsdGhpcy5fb25Ub3VjaFN0YXJ0LGkpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBldmVudGpzJiZlIGluIGV2ZW50anMmJihldmVudGpzW2VdKHIsXCJnZXN0dXJlXCIsdGhpcy5fb25HZXN0dXJlKSxldmVudGpzW2VdKHIsXCJkcmFnXCIsdGhpcy5fb25EcmFnKSxldmVudGpzW2VdKHIsXCJvcmllbnRhdGlvblwiLHRoaXMuX29uT3JpZW50YXRpb25DaGFuZ2UpLGV2ZW50anNbZV0ocixcInNoYWtlXCIsdGhpcy5fb25TaGFrZSksZXZlbnRqc1tlXShyLFwibG9uZ3ByZXNzXCIsdGhpcy5fb25Mb25nUHJlc3MpKX0scmVtb3ZlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5hZGRPclJlbW92ZShlLFwicmVtb3ZlXCIpO3ZhciB0PXRoaXMuX2dldEV2ZW50UHJlZml4KCk7ZShTLmRvY3VtZW50LHQrXCJ1cFwiLHRoaXMuX29uTW91c2VVcCksZShTLmRvY3VtZW50LFwidG91Y2hlbmRcIix0aGlzLl9vblRvdWNoRW5kLGkpLGUoUy5kb2N1bWVudCx0K1wibW92ZVwiLHRoaXMuX29uTW91c2VNb3ZlLGkpLGUoUy5kb2N1bWVudCxcInRvdWNobW92ZVwiLHRoaXMuX29uTW91c2VNb3ZlLGkpfSxfYmluZEV2ZW50czpmdW5jdGlvbigpe3RoaXMuZXZlbnRzQm91bmR8fCh0aGlzLl9vbk1vdXNlRG93bj10aGlzLl9vbk1vdXNlRG93bi5iaW5kKHRoaXMpLHRoaXMuX29uVG91Y2hTdGFydD10aGlzLl9vblRvdWNoU3RhcnQuYmluZCh0aGlzKSx0aGlzLl9vbk1vdXNlTW92ZT10aGlzLl9vbk1vdXNlTW92ZS5iaW5kKHRoaXMpLHRoaXMuX29uTW91c2VVcD10aGlzLl9vbk1vdXNlVXAuYmluZCh0aGlzKSx0aGlzLl9vblRvdWNoRW5kPXRoaXMuX29uVG91Y2hFbmQuYmluZCh0aGlzKSx0aGlzLl9vblJlc2l6ZT10aGlzLl9vblJlc2l6ZS5iaW5kKHRoaXMpLHRoaXMuX29uR2VzdHVyZT10aGlzLl9vbkdlc3R1cmUuYmluZCh0aGlzKSx0aGlzLl9vbkRyYWc9dGhpcy5fb25EcmFnLmJpbmQodGhpcyksdGhpcy5fb25TaGFrZT10aGlzLl9vblNoYWtlLmJpbmQodGhpcyksdGhpcy5fb25Mb25nUHJlc3M9dGhpcy5fb25Mb25nUHJlc3MuYmluZCh0aGlzKSx0aGlzLl9vbk9yaWVudGF0aW9uQ2hhbmdlPXRoaXMuX29uT3JpZW50YXRpb25DaGFuZ2UuYmluZCh0aGlzKSx0aGlzLl9vbk1vdXNlV2hlZWw9dGhpcy5fb25Nb3VzZVdoZWVsLmJpbmQodGhpcyksdGhpcy5fb25Nb3VzZU91dD10aGlzLl9vbk1vdXNlT3V0LmJpbmQodGhpcyksdGhpcy5fb25Nb3VzZUVudGVyPXRoaXMuX29uTW91c2VFbnRlci5iaW5kKHRoaXMpLHRoaXMuX29uQ29udGV4dE1lbnU9dGhpcy5fb25Db250ZXh0TWVudS5iaW5kKHRoaXMpLHRoaXMuX29uRG91YmxlQ2xpY2s9dGhpcy5fb25Eb3VibGVDbGljay5iaW5kKHRoaXMpLHRoaXMuX29uRHJhZ092ZXI9dGhpcy5fb25EcmFnT3Zlci5iaW5kKHRoaXMpLHRoaXMuX29uRHJhZ0VudGVyPXRoaXMuX3NpbXBsZUV2ZW50SGFuZGxlci5iaW5kKHRoaXMsXCJkcmFnZW50ZXJcIiksdGhpcy5fb25EcmFnTGVhdmU9dGhpcy5fc2ltcGxlRXZlbnRIYW5kbGVyLmJpbmQodGhpcyxcImRyYWdsZWF2ZVwiKSx0aGlzLl9vbkRyb3A9dGhpcy5fb25Ecm9wLmJpbmQodGhpcyksdGhpcy5ldmVudHNCb3VuZD0hMCl9LF9vbkdlc3R1cmU6ZnVuY3Rpb24odCxlKXt0aGlzLl9fb25UcmFuc2Zvcm1HZXN0dXJlJiZ0aGlzLl9fb25UcmFuc2Zvcm1HZXN0dXJlKHQsZSl9LF9vbkRyYWc6ZnVuY3Rpb24odCxlKXt0aGlzLl9fb25EcmFnJiZ0aGlzLl9fb25EcmFnKHQsZSl9LF9vbk1vdXNlV2hlZWw6ZnVuY3Rpb24odCl7dGhpcy5fX29uTW91c2VXaGVlbCh0KX0sX29uTW91c2VPdXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5faG92ZXJlZFRhcmdldDt0aGlzLmZpcmUoXCJtb3VzZTpvdXRcIix7dGFyZ2V0OmUsZTp0fSksdGhpcy5faG92ZXJlZFRhcmdldD1udWxsLGUmJmUuZmlyZShcIm1vdXNlb3V0XCIse2U6dH0pO3ZhciBpPXRoaXM7dGhpcy5faG92ZXJlZFRhcmdldHMuZm9yRWFjaCgoZnVuY3Rpb24ocil7aS5maXJlKFwibW91c2U6b3V0XCIse3RhcmdldDplLGU6dH0pLHImJmUuZmlyZShcIm1vdXNlb3V0XCIse2U6dH0pfSkpLHRoaXMuX2hvdmVyZWRUYXJnZXRzPVtdLHRoaXMuX2lUZXh0SW5zdGFuY2VzJiZ0aGlzLl9pVGV4dEluc3RhbmNlcy5mb3JFYWNoKChmdW5jdGlvbih0KXt0LmlzRWRpdGluZyYmdC5oaWRkZW5UZXh0YXJlYS5mb2N1cygpfSkpfSxfb25Nb3VzZUVudGVyOmZ1bmN0aW9uKHQpe3RoaXMuX2N1cnJlbnRUcmFuc2Zvcm18fHRoaXMuZmluZFRhcmdldCh0KXx8KHRoaXMuZmlyZShcIm1vdXNlOm92ZXJcIix7dGFyZ2V0Om51bGwsZTp0fSksdGhpcy5faG92ZXJlZFRhcmdldD1udWxsLHRoaXMuX2hvdmVyZWRUYXJnZXRzPVtdKX0sX29uT3JpZW50YXRpb25DaGFuZ2U6ZnVuY3Rpb24odCxlKXt0aGlzLl9fb25PcmllbnRhdGlvbkNoYW5nZSYmdGhpcy5fX29uT3JpZW50YXRpb25DaGFuZ2UodCxlKX0sX29uU2hha2U6ZnVuY3Rpb24odCxlKXt0aGlzLl9fb25TaGFrZSYmdGhpcy5fX29uU2hha2UodCxlKX0sX29uTG9uZ1ByZXNzOmZ1bmN0aW9uKHQsZSl7dGhpcy5fX29uTG9uZ1ByZXNzJiZ0aGlzLl9fb25Mb25nUHJlc3ModCxlKX0sX29uRHJhZ092ZXI6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpO3ZhciBlPXRoaXMuX3NpbXBsZUV2ZW50SGFuZGxlcihcImRyYWdvdmVyXCIsdCk7dGhpcy5fZmlyZUVudGVyTGVhdmVFdmVudHMoZSx0KX0sX29uRHJvcDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc2ltcGxlRXZlbnRIYW5kbGVyKFwiZHJvcDpiZWZvcmVcIix0KSx0aGlzLl9zaW1wbGVFdmVudEhhbmRsZXIoXCJkcm9wXCIsdCl9LF9vbkNvbnRleHRNZW51OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnN0b3BDb250ZXh0TWVudSYmKHQuc3RvcFByb3BhZ2F0aW9uKCksdC5wcmV2ZW50RGVmYXVsdCgpKSwhMX0sX29uRG91YmxlQ2xpY2s6ZnVuY3Rpb24odCl7dGhpcy5fY2FjaGVUcmFuc2Zvcm1FdmVudERhdGEodCksdGhpcy5faGFuZGxlRXZlbnQodCxcImRibGNsaWNrXCIpLHRoaXMuX3Jlc2V0VHJhbnNmb3JtRXZlbnREYXRhKHQpfSxnZXRQb2ludGVySWQ6ZnVuY3Rpb24odCl7dmFyIGU9dC5jaGFuZ2VkVG91Y2hlcztyZXR1cm4gZT9lWzBdJiZlWzBdLmlkZW50aWZpZXI6dGhpcy5lbmFibGVQb2ludGVyRXZlbnRzP3QucG9pbnRlcklkOi0xfSxfaXNNYWluRXZlbnQ6ZnVuY3Rpb24odCl7cmV0dXJuITA9PT10LmlzUHJpbWFyeXx8ITEhPT10LmlzUHJpbWFyeSYmKFwidG91Y2hlbmRcIj09PXQudHlwZSYmMD09PXQudG91Y2hlcy5sZW5ndGh8fCF0LmNoYW5nZWRUb3VjaGVzfHx0LmNoYW5nZWRUb3VjaGVzWzBdLmlkZW50aWZpZXI9PT10aGlzLm1haW5Ub3VjaElkKX0sX29uVG91Y2hTdGFydDpmdW5jdGlvbihyKXtyLnByZXZlbnREZWZhdWx0KCksbnVsbD09PXRoaXMubWFpblRvdWNoSWQmJih0aGlzLm1haW5Ub3VjaElkPXRoaXMuZ2V0UG9pbnRlcklkKHIpKSx0aGlzLl9fb25Nb3VzZURvd24ociksdGhpcy5fcmVzZXRUcmFuc2Zvcm1FdmVudERhdGEoKTt2YXIgbj10aGlzLnVwcGVyQ2FudmFzRWwscz10aGlzLl9nZXRFdmVudFByZWZpeCgpO3QoUy5kb2N1bWVudCxcInRvdWNoZW5kXCIsdGhpcy5fb25Ub3VjaEVuZCxpKSx0KFMuZG9jdW1lbnQsXCJ0b3VjaG1vdmVcIix0aGlzLl9vbk1vdXNlTW92ZSxpKSxlKG4scytcImRvd25cIix0aGlzLl9vbk1vdXNlRG93bil9LF9vbk1vdXNlRG93bjpmdW5jdGlvbihyKXt0aGlzLl9fb25Nb3VzZURvd24ociksdGhpcy5fcmVzZXRUcmFuc2Zvcm1FdmVudERhdGEoKTt2YXIgbj10aGlzLnVwcGVyQ2FudmFzRWwscz10aGlzLl9nZXRFdmVudFByZWZpeCgpO2UobixzK1wibW92ZVwiLHRoaXMuX29uTW91c2VNb3ZlLGkpLHQoUy5kb2N1bWVudCxzK1widXBcIix0aGlzLl9vbk1vdXNlVXApLHQoUy5kb2N1bWVudCxzK1wibW92ZVwiLHRoaXMuX29uTW91c2VNb3ZlLGkpfSxfb25Ub3VjaEVuZDpmdW5jdGlvbihyKXtpZighKHIudG91Y2hlcy5sZW5ndGg+MCkpe3RoaXMuX19vbk1vdXNlVXAociksdGhpcy5fcmVzZXRUcmFuc2Zvcm1FdmVudERhdGEoKSx0aGlzLm1haW5Ub3VjaElkPW51bGw7dmFyIG49dGhpcy5fZ2V0RXZlbnRQcmVmaXgoKTtlKFMuZG9jdW1lbnQsXCJ0b3VjaGVuZFwiLHRoaXMuX29uVG91Y2hFbmQsaSksZShTLmRvY3VtZW50LFwidG91Y2htb3ZlXCIsdGhpcy5fb25Nb3VzZU1vdmUsaSk7dmFyIHM9dGhpczt0aGlzLl93aWxsQWRkTW91c2VEb3duJiZjbGVhclRpbWVvdXQodGhpcy5fd2lsbEFkZE1vdXNlRG93biksdGhpcy5fd2lsbEFkZE1vdXNlRG93bj1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3Qocy51cHBlckNhbnZhc0VsLG4rXCJkb3duXCIscy5fb25Nb3VzZURvd24pLHMuX3dpbGxBZGRNb3VzZURvd249MH0pLDQwMCl9fSxfb25Nb3VzZVVwOmZ1bmN0aW9uKHIpe3RoaXMuX19vbk1vdXNlVXAociksdGhpcy5fcmVzZXRUcmFuc2Zvcm1FdmVudERhdGEoKTt2YXIgbj10aGlzLnVwcGVyQ2FudmFzRWwscz10aGlzLl9nZXRFdmVudFByZWZpeCgpO3RoaXMuX2lzTWFpbkV2ZW50KHIpJiYoZShTLmRvY3VtZW50LHMrXCJ1cFwiLHRoaXMuX29uTW91c2VVcCksZShTLmRvY3VtZW50LHMrXCJtb3ZlXCIsdGhpcy5fb25Nb3VzZU1vdmUsaSksdChuLHMrXCJtb3ZlXCIsdGhpcy5fb25Nb3VzZU1vdmUsaSkpfSxfb25Nb3VzZU1vdmU6ZnVuY3Rpb24odCl7IXRoaXMuYWxsb3dUb3VjaFNjcm9sbGluZyYmdC5wcmV2ZW50RGVmYXVsdCYmdC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX19vbk1vdXNlTW92ZSh0KX0sX29uUmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5jYWxjT2Zmc2V0KCl9LF9zaG91bGRSZW5kZXI6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fYWN0aXZlT2JqZWN0O3JldHVybiEhKCEhZSE9ISF0fHxlJiZ0JiZlIT09dCl8fChlJiZlLmlzRWRpdGluZywhMSl9LF9fb25Nb3VzZVVwOmZ1bmN0aW9uKHQpe3ZhciBlLGk9dGhpcy5fY3VycmVudFRyYW5zZm9ybSxuPXRoaXMuX2dyb3VwU2VsZWN0b3Iscz0hMSxvPSFufHwwPT09bi5sZWZ0JiYwPT09bi50b3A7aWYodGhpcy5fY2FjaGVUcmFuc2Zvcm1FdmVudERhdGEodCksZT10aGlzLl90YXJnZXQsdGhpcy5faGFuZGxlRXZlbnQodCxcInVwOmJlZm9yZVwiKSxyKHQsMykpdGhpcy5maXJlUmlnaHRDbGljayYmdGhpcy5faGFuZGxlRXZlbnQodCxcInVwXCIsMyxvKTtlbHNle2lmKHIodCwyKSlyZXR1cm4gdGhpcy5maXJlTWlkZGxlQ2xpY2smJnRoaXMuX2hhbmRsZUV2ZW50KHQsXCJ1cFwiLDIsbyksdm9pZCB0aGlzLl9yZXNldFRyYW5zZm9ybUV2ZW50RGF0YSgpO2lmKHRoaXMuaXNEcmF3aW5nTW9kZSYmdGhpcy5faXNDdXJyZW50bHlEcmF3aW5nKXRoaXMuX29uTW91c2VVcEluRHJhd2luZ01vZGUodCk7ZWxzZSBpZih0aGlzLl9pc01haW5FdmVudCh0KSl7aWYoaSYmKHRoaXMuX2ZpbmFsaXplQ3VycmVudFRyYW5zZm9ybSh0KSxzPWkuYWN0aW9uUGVyZm9ybWVkKSwhbyl7dmFyIGE9ZT09PXRoaXMuX2FjdGl2ZU9iamVjdDt0aGlzLl9tYXliZUdyb3VwT2JqZWN0cyh0KSxzfHwocz10aGlzLl9zaG91bGRSZW5kZXIoZSl8fCFhJiZlPT09dGhpcy5fYWN0aXZlT2JqZWN0KX12YXIgaCxsO2lmKGUpe2lmKGg9ZS5fZmluZFRhcmdldENvcm5lcih0aGlzLmdldFBvaW50ZXIodCwhMCksUy51dGlsLmlzVG91Y2hFdmVudCh0KSksZS5zZWxlY3RhYmxlJiZlIT09dGhpcy5fYWN0aXZlT2JqZWN0JiZcInVwXCI9PT1lLmFjdGl2ZU9uKXRoaXMuc2V0QWN0aXZlT2JqZWN0KGUsdCkscz0hMDtlbHNle3ZhciBjPWUuY29udHJvbHNbaF0sdT1jJiZjLmdldE1vdXNlVXBIYW5kbGVyKHQsZSxjKTt1JiZ1KHQsaSwobD10aGlzLmdldFBvaW50ZXIodCkpLngsbC55KX1lLmlzTW92aW5nPSExfWlmKGkmJihpLnRhcmdldCE9PWV8fGkuY29ybmVyIT09aCkpe3ZhciBkPWkudGFyZ2V0JiZpLnRhcmdldC5jb250cm9sc1tpLmNvcm5lcl0sZj1kJiZkLmdldE1vdXNlVXBIYW5kbGVyKHQsZSxjKTtsPWx8fHRoaXMuZ2V0UG9pbnRlcih0KSxmJiZmKHQsaSxsLngsbC55KX10aGlzLl9zZXRDdXJzb3JGcm9tRXZlbnQodCxlKSx0aGlzLl9oYW5kbGVFdmVudCh0LFwidXBcIiwxLG8pLHRoaXMuX2dyb3VwU2VsZWN0b3I9bnVsbCx0aGlzLl9jdXJyZW50VHJhbnNmb3JtPW51bGwsZSYmKGUuX19jb3JuZXI9MCkscz90aGlzLnJlcXVlc3RSZW5kZXJBbGwoKTpvfHx0aGlzLnJlbmRlclRvcCgpfX19LF9zaW1wbGVFdmVudEhhbmRsZXI6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmZpbmRUYXJnZXQoZSkscj10aGlzLnRhcmdldHMsbj17ZSx0YXJnZXQ6aSxzdWJUYXJnZXRzOnJ9O2lmKHRoaXMuZmlyZSh0LG4pLGkmJmkuZmlyZSh0LG4pLCFyKXJldHVybiBpO2Zvcih2YXIgcz0wO3M8ci5sZW5ndGg7cysrKXJbc10uZmlyZSh0LG4pO3JldHVybiBpfSxfaGFuZGxlRXZlbnQ6ZnVuY3Rpb24odCxlLGkscil7dmFyIG49dGhpcy5fdGFyZ2V0LHM9dGhpcy50YXJnZXRzfHxbXSxvPXtlOnQsdGFyZ2V0Om4sc3ViVGFyZ2V0czpzLGJ1dHRvbjppfHwxLGlzQ2xpY2s6cnx8ITEscG9pbnRlcjp0aGlzLl9wb2ludGVyLGFic29sdXRlUG9pbnRlcjp0aGlzLl9hYnNvbHV0ZVBvaW50ZXIsdHJhbnNmb3JtOnRoaXMuX2N1cnJlbnRUcmFuc2Zvcm19O1widXBcIj09PWUmJihvLmN1cnJlbnRUYXJnZXQ9dGhpcy5maW5kVGFyZ2V0KHQpLG8uY3VycmVudFN1YlRhcmdldHM9dGhpcy50YXJnZXRzKSx0aGlzLmZpcmUoXCJtb3VzZTpcIitlLG8pLG4mJm4uZmlyZShcIm1vdXNlXCIrZSxvKTtmb3IodmFyIGE9MDthPHMubGVuZ3RoO2ErKylzW2FdLmZpcmUoXCJtb3VzZVwiK2Usbyl9LF9maW5hbGl6ZUN1cnJlbnRUcmFuc2Zvcm06ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fY3VycmVudFRyYW5zZm9ybSxpPWUudGFyZ2V0LHI9e2U6dCx0YXJnZXQ6aSx0cmFuc2Zvcm06ZSxhY3Rpb246ZS5hY3Rpb259O2kuX3NjYWxpbmcmJihpLl9zY2FsaW5nPSExKSxpLnNldENvb3JkcygpLChlLmFjdGlvblBlcmZvcm1lZHx8dGhpcy5zdGF0ZWZ1bCYmaS5oYXNTdGF0ZUNoYW5nZWQoKSkmJnRoaXMuX2ZpcmUoXCJtb2RpZmllZFwiLHIpfSxfb25Nb3VzZURvd25JbkRyYXdpbmdNb2RlOmZ1bmN0aW9uKHQpe3RoaXMuX2lzQ3VycmVudGx5RHJhd2luZz0hMCx0aGlzLmdldEFjdGl2ZU9iamVjdCgpJiZ0aGlzLmRpc2NhcmRBY3RpdmVPYmplY3QodCkucmVxdWVzdFJlbmRlckFsbCgpO3ZhciBlPXRoaXMuZ2V0UG9pbnRlcih0KTt0aGlzLmZyZWVEcmF3aW5nQnJ1c2gub25Nb3VzZURvd24oZSx7ZTp0LHBvaW50ZXI6ZX0pLHRoaXMuX2hhbmRsZUV2ZW50KHQsXCJkb3duXCIpfSxfb25Nb3VzZU1vdmVJbkRyYXdpbmdNb2RlOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX2lzQ3VycmVudGx5RHJhd2luZyl7dmFyIGU9dGhpcy5nZXRQb2ludGVyKHQpO3RoaXMuZnJlZURyYXdpbmdCcnVzaC5vbk1vdXNlTW92ZShlLHtlOnQscG9pbnRlcjplfSl9dGhpcy5zZXRDdXJzb3IodGhpcy5mcmVlRHJhd2luZ0N1cnNvciksdGhpcy5faGFuZGxlRXZlbnQodCxcIm1vdmVcIil9LF9vbk1vdXNlVXBJbkRyYXdpbmdNb2RlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0UG9pbnRlcih0KTt0aGlzLl9pc0N1cnJlbnRseURyYXdpbmc9dGhpcy5mcmVlRHJhd2luZ0JydXNoLm9uTW91c2VVcCh7ZTp0LHBvaW50ZXI6ZX0pLHRoaXMuX2hhbmRsZUV2ZW50KHQsXCJ1cFwiKX0sX19vbk1vdXNlRG93bjpmdW5jdGlvbih0KXt0aGlzLl9jYWNoZVRyYW5zZm9ybUV2ZW50RGF0YSh0KSx0aGlzLl9oYW5kbGVFdmVudCh0LFwiZG93bjpiZWZvcmVcIik7dmFyIGU9dGhpcy5fdGFyZ2V0O2lmKHIodCwzKSl0aGlzLmZpcmVSaWdodENsaWNrJiZ0aGlzLl9oYW5kbGVFdmVudCh0LFwiZG93blwiLDMpO2Vsc2UgaWYocih0LDIpKXRoaXMuZmlyZU1pZGRsZUNsaWNrJiZ0aGlzLl9oYW5kbGVFdmVudCh0LFwiZG93blwiLDIpO2Vsc2UgaWYodGhpcy5pc0RyYXdpbmdNb2RlKXRoaXMuX29uTW91c2VEb3duSW5EcmF3aW5nTW9kZSh0KTtlbHNlIGlmKHRoaXMuX2lzTWFpbkV2ZW50KHQpJiYhdGhpcy5fY3VycmVudFRyYW5zZm9ybSl7dmFyIGk9dGhpcy5fcG9pbnRlcjt0aGlzLl9wcmV2aW91c1BvaW50ZXI9aTt2YXIgbj10aGlzLl9zaG91bGRSZW5kZXIoZSkscz10aGlzLl9zaG91bGRHcm91cCh0LGUpO2lmKHRoaXMuX3Nob3VsZENsZWFyU2VsZWN0aW9uKHQsZSk/dGhpcy5kaXNjYXJkQWN0aXZlT2JqZWN0KHQpOnMmJih0aGlzLl9oYW5kbGVHcm91cGluZyh0LGUpLGU9dGhpcy5fYWN0aXZlT2JqZWN0KSwhdGhpcy5zZWxlY3Rpb258fGUmJihlLnNlbGVjdGFibGV8fGUuaXNFZGl0aW5nfHxlPT09dGhpcy5fYWN0aXZlT2JqZWN0KXx8KHRoaXMuX2dyb3VwU2VsZWN0b3I9e2V4OnRoaXMuX2Fic29sdXRlUG9pbnRlci54LGV5OnRoaXMuX2Fic29sdXRlUG9pbnRlci55LHRvcDowLGxlZnQ6MH0pLGUpe3ZhciBvPWU9PT10aGlzLl9hY3RpdmVPYmplY3Q7ZS5zZWxlY3RhYmxlJiZcImRvd25cIj09PWUuYWN0aXZlT24mJnRoaXMuc2V0QWN0aXZlT2JqZWN0KGUsdCk7dmFyIGE9ZS5fZmluZFRhcmdldENvcm5lcih0aGlzLmdldFBvaW50ZXIodCwhMCksUy51dGlsLmlzVG91Y2hFdmVudCh0KSk7aWYoZS5fX2Nvcm5lcj1hLGU9PT10aGlzLl9hY3RpdmVPYmplY3QmJihhfHwhcykpe3RoaXMuX3NldHVwQ3VycmVudFRyYW5zZm9ybSh0LGUsbyk7dmFyIGg9ZS5jb250cm9sc1thXSxsPShpPXRoaXMuZ2V0UG9pbnRlcih0KSxoJiZoLmdldE1vdXNlRG93bkhhbmRsZXIodCxlLGgpKTtsJiZsKHQsdGhpcy5fY3VycmVudFRyYW5zZm9ybSxpLngsaS55KX19dGhpcy5faGFuZGxlRXZlbnQodCxcImRvd25cIiksKG58fHMpJiZ0aGlzLnJlcXVlc3RSZW5kZXJBbGwoKX19LF9yZXNldFRyYW5zZm9ybUV2ZW50RGF0YTpmdW5jdGlvbigpe3RoaXMuX3RhcmdldD1udWxsLHRoaXMuX3BvaW50ZXI9bnVsbCx0aGlzLl9hYnNvbHV0ZVBvaW50ZXI9bnVsbH0sX2NhY2hlVHJhbnNmb3JtRXZlbnREYXRhOmZ1bmN0aW9uKHQpe3RoaXMuX3Jlc2V0VHJhbnNmb3JtRXZlbnREYXRhKCksdGhpcy5fcG9pbnRlcj10aGlzLmdldFBvaW50ZXIodCwhMCksdGhpcy5fYWJzb2x1dGVQb2ludGVyPXRoaXMucmVzdG9yZVBvaW50ZXJWcHQodGhpcy5fcG9pbnRlciksdGhpcy5fdGFyZ2V0PXRoaXMuX2N1cnJlbnRUcmFuc2Zvcm0/dGhpcy5fY3VycmVudFRyYW5zZm9ybS50YXJnZXQ6dGhpcy5maW5kVGFyZ2V0KHQpfHxudWxsfSxfYmVmb3JlVHJhbnNmb3JtOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2N1cnJlbnRUcmFuc2Zvcm07dGhpcy5zdGF0ZWZ1bCYmZS50YXJnZXQuc2F2ZVN0YXRlKCksdGhpcy5maXJlKFwiYmVmb3JlOnRyYW5zZm9ybVwiLHtlOnQsdHJhbnNmb3JtOmV9KX0sX19vbk1vdXNlTW92ZTpmdW5jdGlvbih0KXt2YXIgZSxpO2lmKHRoaXMuX2hhbmRsZUV2ZW50KHQsXCJtb3ZlOmJlZm9yZVwiKSx0aGlzLl9jYWNoZVRyYW5zZm9ybUV2ZW50RGF0YSh0KSx0aGlzLmlzRHJhd2luZ01vZGUpdGhpcy5fb25Nb3VzZU1vdmVJbkRyYXdpbmdNb2RlKHQpO2Vsc2UgaWYodGhpcy5faXNNYWluRXZlbnQodCkpe3ZhciByPXRoaXMuX2dyb3VwU2VsZWN0b3I7cj8oaT10aGlzLl9hYnNvbHV0ZVBvaW50ZXIsci5sZWZ0PWkueC1yLmV4LHIudG9wPWkueS1yLmV5LHRoaXMucmVuZGVyVG9wKCkpOnRoaXMuX2N1cnJlbnRUcmFuc2Zvcm0/dGhpcy5fdHJhbnNmb3JtT2JqZWN0KHQpOihlPXRoaXMuZmluZFRhcmdldCh0KXx8bnVsbCx0aGlzLl9zZXRDdXJzb3JGcm9tRXZlbnQodCxlKSx0aGlzLl9maXJlT3Zlck91dEV2ZW50cyhlLHQpKSx0aGlzLl9oYW5kbGVFdmVudCh0LFwibW92ZVwiKSx0aGlzLl9yZXNldFRyYW5zZm9ybUV2ZW50RGF0YSgpfX0sX2ZpcmVPdmVyT3V0RXZlbnRzOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5faG92ZXJlZFRhcmdldCxyPXRoaXMuX2hvdmVyZWRUYXJnZXRzLG49dGhpcy50YXJnZXRzLHM9TWF0aC5tYXgoci5sZW5ndGgsbi5sZW5ndGgpO3RoaXMuZmlyZVN5bnRoZXRpY0luT3V0RXZlbnRzKHQsZSx7b2xkVGFyZ2V0OmksZXZ0T3V0OlwibW91c2VvdXRcIixjYW52YXNFdnRPdXQ6XCJtb3VzZTpvdXRcIixldnRJbjpcIm1vdXNlb3ZlclwiLGNhbnZhc0V2dEluOlwibW91c2U6b3ZlclwifSk7Zm9yKHZhciBvPTA7bzxzO28rKyl0aGlzLmZpcmVTeW50aGV0aWNJbk91dEV2ZW50cyhuW29dLGUse29sZFRhcmdldDpyW29dLGV2dE91dDpcIm1vdXNlb3V0XCIsZXZ0SW46XCJtb3VzZW92ZXJcIn0pO3RoaXMuX2hvdmVyZWRUYXJnZXQ9dCx0aGlzLl9ob3ZlcmVkVGFyZ2V0cz10aGlzLnRhcmdldHMuY29uY2F0KCl9LF9maXJlRW50ZXJMZWF2ZUV2ZW50czpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2RyYWdnZWRvdmVyVGFyZ2V0LHI9dGhpcy5faG92ZXJlZFRhcmdldHMsbj10aGlzLnRhcmdldHMscz1NYXRoLm1heChyLmxlbmd0aCxuLmxlbmd0aCk7dGhpcy5maXJlU3ludGhldGljSW5PdXRFdmVudHModCxlLHtvbGRUYXJnZXQ6aSxldnRPdXQ6XCJkcmFnbGVhdmVcIixldnRJbjpcImRyYWdlbnRlclwifSk7Zm9yKHZhciBvPTA7bzxzO28rKyl0aGlzLmZpcmVTeW50aGV0aWNJbk91dEV2ZW50cyhuW29dLGUse29sZFRhcmdldDpyW29dLGV2dE91dDpcImRyYWdsZWF2ZVwiLGV2dEluOlwiZHJhZ2VudGVyXCJ9KTt0aGlzLl9kcmFnZ2Vkb3ZlclRhcmdldD10fSxmaXJlU3ludGhldGljSW5PdXRFdmVudHM6ZnVuY3Rpb24odCxlLGkpe3ZhciByLG4scyxvPWkub2xkVGFyZ2V0LGE9byE9PXQsaD1pLmNhbnZhc0V2dEluLGw9aS5jYW52YXNFdnRPdXQ7YSYmKHI9e2UsdGFyZ2V0OnQscHJldmlvdXNUYXJnZXQ6b30sbj17ZSx0YXJnZXQ6byxuZXh0VGFyZ2V0OnR9KSxzPXQmJmEsbyYmYSYmKGwmJnRoaXMuZmlyZShsLG4pLG8uZmlyZShpLmV2dE91dCxuKSkscyYmKGgmJnRoaXMuZmlyZShoLHIpLHQuZmlyZShpLmV2dEluLHIpKX0sX19vbk1vdXNlV2hlZWw6ZnVuY3Rpb24odCl7dGhpcy5fY2FjaGVUcmFuc2Zvcm1FdmVudERhdGEodCksdGhpcy5faGFuZGxlRXZlbnQodCxcIndoZWVsXCIpLHRoaXMuX3Jlc2V0VHJhbnNmb3JtRXZlbnREYXRhKCl9LF90cmFuc2Zvcm1PYmplY3Q6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRQb2ludGVyKHQpLGk9dGhpcy5fY3VycmVudFRyYW5zZm9ybTtpLnJlc2V0PSExLGkuc2hpZnRLZXk9dC5zaGlmdEtleSxpLmFsdEtleT10W3RoaXMuY2VudGVyZWRLZXldLHRoaXMuX3BlcmZvcm1UcmFuc2Zvcm1BY3Rpb24odCxpLGUpLGkuYWN0aW9uUGVyZm9ybWVkJiZ0aGlzLnJlcXVlc3RSZW5kZXJBbGwoKX0sX3BlcmZvcm1UcmFuc2Zvcm1BY3Rpb246ZnVuY3Rpb24odCxlLGkpe3ZhciByPWkueCxuPWkueSxzPWUuYWN0aW9uLG89ITEsYT1lLmFjdGlvbkhhbmRsZXI7YSYmKG89YSh0LGUscixuKSksXCJkcmFnXCI9PT1zJiZvJiYoZS50YXJnZXQuaXNNb3Zpbmc9ITAsdGhpcy5zZXRDdXJzb3IoZS50YXJnZXQubW92ZUN1cnNvcnx8dGhpcy5tb3ZlQ3Vyc29yKSksZS5hY3Rpb25QZXJmb3JtZWQ9ZS5hY3Rpb25QZXJmb3JtZWR8fG99LF9maXJlOlMuY29udHJvbHNVdGlscy5maXJlRXZlbnQsX3NldEN1cnNvckZyb21FdmVudDpmdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiB0aGlzLnNldEN1cnNvcih0aGlzLmRlZmF1bHRDdXJzb3IpLCExO3ZhciBpPWUuaG92ZXJDdXJzb3J8fHRoaXMuaG92ZXJDdXJzb3Iscj10aGlzLl9hY3RpdmVPYmplY3QmJlwiYWN0aXZlU2VsZWN0aW9uXCI9PT10aGlzLl9hY3RpdmVPYmplY3QudHlwZT90aGlzLl9hY3RpdmVPYmplY3Q6bnVsbCxuPSghcnx8IXIuY29udGFpbnMoZSkpJiZlLl9maW5kVGFyZ2V0Q29ybmVyKHRoaXMuZ2V0UG9pbnRlcih0LCEwKSk7bj90aGlzLnNldEN1cnNvcih0aGlzLmdldENvcm5lckN1cnNvcihuLGUsdCkpOihlLnN1YlRhcmdldENoZWNrJiZ0aGlzLnRhcmdldHMuY29uY2F0KCkucmV2ZXJzZSgpLm1hcCgoZnVuY3Rpb24odCl7aT10LmhvdmVyQ3Vyc29yfHxpfSkpLHRoaXMuc2V0Q3Vyc29yKGkpKX0sZ2V0Q29ybmVyQ3Vyc29yOmZ1bmN0aW9uKHQsZSxpKXt2YXIgcj1lLmNvbnRyb2xzW3RdO3JldHVybiByLmN1cnNvclN0eWxlSGFuZGxlcihpLHIsZSl9fSl9KCksXz1NYXRoLm1pbix5PU1hdGgubWF4LFMudXRpbC5vYmplY3QuZXh0ZW5kKFMuQ2FudmFzLnByb3RvdHlwZSx7X3Nob3VsZEdyb3VwOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fYWN0aXZlT2JqZWN0O3JldHVybiBpJiZ0aGlzLl9pc1NlbGVjdGlvbktleVByZXNzZWQodCkmJmUmJmUuc2VsZWN0YWJsZSYmdGhpcy5zZWxlY3Rpb24mJihpIT09ZXx8XCJhY3RpdmVTZWxlY3Rpb25cIj09PWkudHlwZSkmJiFlLm9uU2VsZWN0KHtlOnR9KX0sX2hhbmRsZUdyb3VwaW5nOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fYWN0aXZlT2JqZWN0O2kuX19jb3JuZXJ8fChlIT09aXx8KGU9dGhpcy5maW5kVGFyZ2V0KHQsITApKSYmZS5zZWxlY3RhYmxlKSYmKGkmJlwiYWN0aXZlU2VsZWN0aW9uXCI9PT1pLnR5cGU/dGhpcy5fdXBkYXRlQWN0aXZlU2VsZWN0aW9uKGUsdCk6dGhpcy5fY3JlYXRlQWN0aXZlU2VsZWN0aW9uKGUsdCkpfSxfdXBkYXRlQWN0aXZlU2VsZWN0aW9uOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fYWN0aXZlT2JqZWN0LHI9aS5fb2JqZWN0cy5zbGljZSgwKTtpLmNvbnRhaW5zKHQpPyhpLnJlbW92ZVdpdGhVcGRhdGUodCksdGhpcy5faG92ZXJlZFRhcmdldD10LHRoaXMuX2hvdmVyZWRUYXJnZXRzPXRoaXMudGFyZ2V0cy5jb25jYXQoKSwxPT09aS5zaXplKCkmJnRoaXMuX3NldEFjdGl2ZU9iamVjdChpLml0ZW0oMCksZSkpOihpLmFkZFdpdGhVcGRhdGUodCksdGhpcy5faG92ZXJlZFRhcmdldD1pLHRoaXMuX2hvdmVyZWRUYXJnZXRzPXRoaXMudGFyZ2V0cy5jb25jYXQoKSksdGhpcy5fZmlyZVNlbGVjdGlvbkV2ZW50cyhyLGUpfSxfY3JlYXRlQWN0aXZlU2VsZWN0aW9uOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5nZXRBY3RpdmVPYmplY3RzKCkscj10aGlzLl9jcmVhdGVHcm91cCh0KTt0aGlzLl9ob3ZlcmVkVGFyZ2V0PXIsdGhpcy5fc2V0QWN0aXZlT2JqZWN0KHIsZSksdGhpcy5fZmlyZVNlbGVjdGlvbkV2ZW50cyhpLGUpfSxfY3JlYXRlR3JvdXA6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fb2JqZWN0cyxpPWUuaW5kZXhPZih0aGlzLl9hY3RpdmVPYmplY3QpPGUuaW5kZXhPZih0KT9bdGhpcy5fYWN0aXZlT2JqZWN0LHRdOlt0LHRoaXMuX2FjdGl2ZU9iamVjdF07cmV0dXJuIHRoaXMuX2FjdGl2ZU9iamVjdC5pc0VkaXRpbmcmJnRoaXMuX2FjdGl2ZU9iamVjdC5leGl0RWRpdGluZygpLG5ldyBTLkFjdGl2ZVNlbGVjdGlvbihpLHtjYW52YXM6dGhpc30pfSxfZ3JvdXBTZWxlY3RlZE9iamVjdHM6ZnVuY3Rpb24odCl7dmFyIGUsaT10aGlzLl9jb2xsZWN0T2JqZWN0cyh0KTsxPT09aS5sZW5ndGg/dGhpcy5zZXRBY3RpdmVPYmplY3QoaVswXSx0KTppLmxlbmd0aD4xJiYoZT1uZXcgUy5BY3RpdmVTZWxlY3Rpb24oaS5yZXZlcnNlKCkse2NhbnZhczp0aGlzfSksdGhpcy5zZXRBY3RpdmVPYmplY3QoZSx0KSl9LF9jb2xsZWN0T2JqZWN0czpmdW5jdGlvbih0KXtmb3IodmFyIGUsaT1bXSxyPXRoaXMuX2dyb3VwU2VsZWN0b3IuZXgsbj10aGlzLl9ncm91cFNlbGVjdG9yLmV5LHM9cit0aGlzLl9ncm91cFNlbGVjdG9yLmxlZnQsbz1uK3RoaXMuX2dyb3VwU2VsZWN0b3IudG9wLGE9bmV3IFMuUG9pbnQoXyhyLHMpLF8obixvKSksaD1uZXcgUy5Qb2ludCh5KHIscykseShuLG8pKSxsPSF0aGlzLnNlbGVjdGlvbkZ1bGx5Q29udGFpbmVkLGM9cj09PXMmJm49PT1vLHU9dGhpcy5fb2JqZWN0cy5sZW5ndGg7dS0tJiYhKChlPXRoaXMuX29iamVjdHNbdV0pJiZlLnNlbGVjdGFibGUmJmUudmlzaWJsZSYmKGwmJmUuaW50ZXJzZWN0c1dpdGhSZWN0KGEsaCwhMCl8fGUuaXNDb250YWluZWRXaXRoaW5SZWN0KGEsaCwhMCl8fGwmJmUuY29udGFpbnNQb2ludChhLG51bGwsITApfHxsJiZlLmNvbnRhaW5zUG9pbnQoaCxudWxsLCEwKSkmJihpLnB1c2goZSksYykpOyk7cmV0dXJuIGkubGVuZ3RoPjEmJihpPWkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hZS5vblNlbGVjdCh7ZTp0fSl9KSkpLGl9LF9tYXliZUdyb3VwT2JqZWN0czpmdW5jdGlvbih0KXt0aGlzLnNlbGVjdGlvbiYmdGhpcy5fZ3JvdXBTZWxlY3RvciYmdGhpcy5fZ3JvdXBTZWxlY3RlZE9iamVjdHModCksdGhpcy5zZXRDdXJzb3IodGhpcy5kZWZhdWx0Q3Vyc29yKSx0aGlzLl9ncm91cFNlbGVjdG9yPW51bGx9fSksUy51dGlsLm9iamVjdC5leHRlbmQoUy5TdGF0aWNDYW52YXMucHJvdG90eXBlLHt0b0RhdGFVUkw6ZnVuY3Rpb24odCl7dHx8KHQ9e30pO3ZhciBlPXQuZm9ybWF0fHxcInBuZ1wiLGk9dC5xdWFsaXR5fHwxLHI9KHQubXVsdGlwbGllcnx8MSkqKHQuZW5hYmxlUmV0aW5hU2NhbGluZz90aGlzLmdldFJldGluYVNjYWxpbmcoKToxKSxuPXRoaXMudG9DYW52YXNFbGVtZW50KHIsdCk7cmV0dXJuIFMudXRpbC50b0RhdGFVUkwobixlLGkpfSx0b0NhbnZhc0VsZW1lbnQ6ZnVuY3Rpb24odCxlKXt0PXR8fDE7dmFyIGk9KChlPWV8fHt9KS53aWR0aHx8dGhpcy53aWR0aCkqdCxyPShlLmhlaWdodHx8dGhpcy5oZWlnaHQpKnQsbj10aGlzLmdldFpvb20oKSxzPXRoaXMud2lkdGgsbz10aGlzLmhlaWdodCxhPW4qdCxoPXRoaXMudmlld3BvcnRUcmFuc2Zvcm0sbD0oaFs0XS0oZS5sZWZ0fHwwKSkqdCxjPShoWzVdLShlLnRvcHx8MCkpKnQsdT10aGlzLmludGVyYWN0aXZlLGQ9W2EsMCwwLGEsbCxjXSxmPXRoaXMuZW5hYmxlUmV0aW5hU2NhbGluZyxnPVMudXRpbC5jcmVhdGVDYW52YXNFbGVtZW50KCksbT10aGlzLmNvbnRleHRUb3A7cmV0dXJuIGcud2lkdGg9aSxnLmhlaWdodD1yLHRoaXMuY29udGV4dFRvcD1udWxsLHRoaXMuZW5hYmxlUmV0aW5hU2NhbGluZz0hMSx0aGlzLmludGVyYWN0aXZlPSExLHRoaXMudmlld3BvcnRUcmFuc2Zvcm09ZCx0aGlzLndpZHRoPWksdGhpcy5oZWlnaHQ9cix0aGlzLmNhbGNWaWV3cG9ydEJvdW5kYXJpZXMoKSx0aGlzLnJlbmRlckNhbnZhcyhnLmdldENvbnRleHQoXCIyZFwiKSx0aGlzLl9vYmplY3RzKSx0aGlzLnZpZXdwb3J0VHJhbnNmb3JtPWgsdGhpcy53aWR0aD1zLHRoaXMuaGVpZ2h0PW8sdGhpcy5jYWxjVmlld3BvcnRCb3VuZGFyaWVzKCksdGhpcy5pbnRlcmFjdGl2ZT11LHRoaXMuZW5hYmxlUmV0aW5hU2NhbGluZz1mLHRoaXMuY29udGV4dFRvcD1tLGd9fSksUy51dGlsLm9iamVjdC5leHRlbmQoUy5TdGF0aWNDYW52YXMucHJvdG90eXBlLHtsb2FkRnJvbUpTT046ZnVuY3Rpb24odCxlLGkpe2lmKHQpe3ZhciByPVwic3RyaW5nXCI9PXR5cGVvZiB0P0pTT04ucGFyc2UodCk6Uy51dGlsLm9iamVjdC5jbG9uZSh0KSxuPXRoaXMscz1yLmNsaXBQYXRoLG89dGhpcy5yZW5kZXJPbkFkZFJlbW92ZTtyZXR1cm4gdGhpcy5yZW5kZXJPbkFkZFJlbW92ZT0hMSxkZWxldGUgci5jbGlwUGF0aCx0aGlzLl9lbmxpdmVuT2JqZWN0cyhyLm9iamVjdHMsKGZ1bmN0aW9uKHQpe24uY2xlYXIoKSxuLl9zZXRCZ092ZXJsYXkociwoZnVuY3Rpb24oKXtzP24uX2VubGl2ZW5PYmplY3RzKFtzXSwoZnVuY3Rpb24oaSl7bi5jbGlwUGF0aD1pWzBdLG4uX19zZXR1cENhbnZhcy5jYWxsKG4scix0LG8sZSl9KSk6bi5fX3NldHVwQ2FudmFzLmNhbGwobixyLHQsbyxlKX0pKX0pLGkpLHRoaXN9fSxfX3NldHVwQ2FudmFzOmZ1bmN0aW9uKHQsZSxpLHIpe3ZhciBuPXRoaXM7ZS5mb3JFYWNoKChmdW5jdGlvbih0LGUpe24uaW5zZXJ0QXQodCxlKX0pKSx0aGlzLnJlbmRlck9uQWRkUmVtb3ZlPWksZGVsZXRlIHQub2JqZWN0cyxkZWxldGUgdC5iYWNrZ3JvdW5kSW1hZ2UsZGVsZXRlIHQub3ZlcmxheUltYWdlLGRlbGV0ZSB0LmJhY2tncm91bmQsZGVsZXRlIHQub3ZlcmxheSx0aGlzLl9zZXRPcHRpb25zKHQpLHRoaXMucmVuZGVyQWxsKCksciYmcigpfSxfc2V0QmdPdmVybGF5OmZ1bmN0aW9uKHQsZSl7dmFyIGk9e2JhY2tncm91bmRDb2xvcjohMSxvdmVybGF5Q29sb3I6ITEsYmFja2dyb3VuZEltYWdlOiExLG92ZXJsYXlJbWFnZTohMX07aWYodC5iYWNrZ3JvdW5kSW1hZ2V8fHQub3ZlcmxheUltYWdlfHx0LmJhY2tncm91bmR8fHQub3ZlcmxheSl7dmFyIHI9ZnVuY3Rpb24oKXtpLmJhY2tncm91bmRJbWFnZSYmaS5vdmVybGF5SW1hZ2UmJmkuYmFja2dyb3VuZENvbG9yJiZpLm92ZXJsYXlDb2xvciYmZSYmZSgpfTt0aGlzLl9fc2V0QmdPdmVybGF5KFwiYmFja2dyb3VuZEltYWdlXCIsdC5iYWNrZ3JvdW5kSW1hZ2UsaSxyKSx0aGlzLl9fc2V0QmdPdmVybGF5KFwib3ZlcmxheUltYWdlXCIsdC5vdmVybGF5SW1hZ2UsaSxyKSx0aGlzLl9fc2V0QmdPdmVybGF5KFwiYmFja2dyb3VuZENvbG9yXCIsdC5iYWNrZ3JvdW5kLGksciksdGhpcy5fX3NldEJnT3ZlcmxheShcIm92ZXJsYXlDb2xvclwiLHQub3ZlcmxheSxpLHIpfWVsc2UgZSYmZSgpfSxfX3NldEJnT3ZlcmxheTpmdW5jdGlvbih0LGUsaSxyKXt2YXIgbj10aGlzO2lmKCFlKXJldHVybiBpW3RdPSEwLHZvaWQociYmcigpKTtcImJhY2tncm91bmRJbWFnZVwiPT09dHx8XCJvdmVybGF5SW1hZ2VcIj09PXQ/Uy51dGlsLmVubGl2ZW5PYmplY3RzKFtlXSwoZnVuY3Rpb24oZSl7blt0XT1lWzBdLGlbdF09ITAsciYmcigpfSkpOnRoaXNbXCJzZXRcIitTLnV0aWwuc3RyaW5nLmNhcGl0YWxpemUodCwhMCldKGUsKGZ1bmN0aW9uKCl7aVt0XT0hMCxyJiZyKCl9KSl9LF9lbmxpdmVuT2JqZWN0czpmdW5jdGlvbih0LGUsaSl7dCYmMCE9PXQubGVuZ3RoP1MudXRpbC5lbmxpdmVuT2JqZWN0cyh0LChmdW5jdGlvbih0KXtlJiZlKHQpfSksbnVsbCxpKTplJiZlKFtdKX0sX3RvRGF0YVVSTDpmdW5jdGlvbih0LGUpe3RoaXMuY2xvbmUoKGZ1bmN0aW9uKGkpe2UoaS50b0RhdGFVUkwodCkpfSkpfSxfdG9EYXRhVVJMV2l0aE11bHRpcGxpZXI6ZnVuY3Rpb24odCxlLGkpe3RoaXMuY2xvbmUoKGZ1bmN0aW9uKHIpe2koci50b0RhdGFVUkxXaXRoTXVsdGlwbGllcih0LGUpKX0pKX0sY2xvbmU6ZnVuY3Rpb24odCxlKXt2YXIgaT1KU09OLnN0cmluZ2lmeSh0aGlzLnRvSlNPTihlKSk7dGhpcy5jbG9uZVdpdGhvdXREYXRhKChmdW5jdGlvbihlKXtlLmxvYWRGcm9tSlNPTihpLChmdW5jdGlvbigpe3QmJnQoZSl9KSl9KSl9LGNsb25lV2l0aG91dERhdGE6ZnVuY3Rpb24odCl7dmFyIGU9Uy51dGlsLmNyZWF0ZUNhbnZhc0VsZW1lbnQoKTtlLndpZHRoPXRoaXMud2lkdGgsZS5oZWlnaHQ9dGhpcy5oZWlnaHQ7dmFyIGk9bmV3IFMuQ2FudmFzKGUpO3RoaXMuYmFja2dyb3VuZEltYWdlPyhpLnNldEJhY2tncm91bmRJbWFnZSh0aGlzLmJhY2tncm91bmRJbWFnZS5zcmMsKGZ1bmN0aW9uKCl7aS5yZW5kZXJBbGwoKSx0JiZ0KGkpfSkpLGkuYmFja2dyb3VuZEltYWdlT3BhY2l0eT10aGlzLmJhY2tncm91bmRJbWFnZU9wYWNpdHksaS5iYWNrZ3JvdW5kSW1hZ2VTdHJldGNoPXRoaXMuYmFja2dyb3VuZEltYWdlU3RyZXRjaCk6dCYmdChpKX19KSxmdW5jdGlvbih0KXt2YXIgZT10LmZhYnJpY3x8KHQuZmFicmljPXt9KSxpPWUudXRpbC5vYmplY3QuZXh0ZW5kLHI9ZS51dGlsLm9iamVjdC5jbG9uZSxuPWUudXRpbC50b0ZpeGVkLHM9ZS51dGlsLnN0cmluZy5jYXBpdGFsaXplLG89ZS51dGlsLmRlZ3JlZXNUb1JhZGlhbnMsYT0hZS5pc0xpa2VseU5vZGU7ZS5PYmplY3R8fChlLk9iamVjdD1lLnV0aWwuY3JlYXRlQ2xhc3MoZS5Db21tb25NZXRob2RzLHt0eXBlOlwib2JqZWN0XCIsb3JpZ2luWDpcImxlZnRcIixvcmlnaW5ZOlwidG9wXCIsdG9wOjAsbGVmdDowLHdpZHRoOjAsaGVpZ2h0OjAsc2NhbGVYOjEsc2NhbGVZOjEsZmxpcFg6ITEsZmxpcFk6ITEsb3BhY2l0eToxLGFuZ2xlOjAsc2tld1g6MCxza2V3WTowLGNvcm5lclNpemU6MTMsdG91Y2hDb3JuZXJTaXplOjI0LHRyYW5zcGFyZW50Q29ybmVyczohMCxob3ZlckN1cnNvcjpudWxsLG1vdmVDdXJzb3I6bnVsbCxwYWRkaW5nOjAsYm9yZGVyQ29sb3I6XCJyZ2IoMTc4LDIwNCwyNTUpXCIsYm9yZGVyRGFzaEFycmF5Om51bGwsY29ybmVyQ29sb3I6XCJyZ2IoMTc4LDIwNCwyNTUpXCIsY29ybmVyU3Ryb2tlQ29sb3I6bnVsbCxjb3JuZXJTdHlsZTpcInJlY3RcIixjb3JuZXJEYXNoQXJyYXk6bnVsbCxjZW50ZXJlZFNjYWxpbmc6ITEsY2VudGVyZWRSb3RhdGlvbjohMCxmaWxsOlwicmdiKDAsMCwwKVwiLGZpbGxSdWxlOlwibm9uemVyb1wiLGdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbjpcInNvdXJjZS1vdmVyXCIsYmFja2dyb3VuZENvbG9yOlwiXCIsc2VsZWN0aW9uQmFja2dyb3VuZENvbG9yOlwiXCIsc3Ryb2tlOm51bGwsc3Ryb2tlV2lkdGg6MSxzdHJva2VEYXNoQXJyYXk6bnVsbCxzdHJva2VEYXNoT2Zmc2V0OjAsc3Ryb2tlTGluZUNhcDpcImJ1dHRcIixzdHJva2VMaW5lSm9pbjpcIm1pdGVyXCIsc3Ryb2tlTWl0ZXJMaW1pdDo0LHNoYWRvdzpudWxsLGJvcmRlck9wYWNpdHlXaGVuTW92aW5nOi40LGJvcmRlclNjYWxlRmFjdG9yOjEsbWluU2NhbGVMaW1pdDowLHNlbGVjdGFibGU6ITAsZXZlbnRlZDohMCx2aXNpYmxlOiEwLGhhc0NvbnRyb2xzOiEwLGhhc0JvcmRlcnM6ITAscGVyUGl4ZWxUYXJnZXRGaW5kOiExLGluY2x1ZGVEZWZhdWx0VmFsdWVzOiEwLGxvY2tNb3ZlbWVudFg6ITEsbG9ja01vdmVtZW50WTohMSxsb2NrUm90YXRpb246ITEsbG9ja1NjYWxpbmdYOiExLGxvY2tTY2FsaW5nWTohMSxsb2NrU2tld2luZ1g6ITEsbG9ja1NrZXdpbmdZOiExLGxvY2tTY2FsaW5nRmxpcDohMSxleGNsdWRlRnJvbUV4cG9ydDohMSxvYmplY3RDYWNoaW5nOmEsc3RhdGVmdWxsQ2FjaGU6ITEsbm9TY2FsZUNhY2hlOiEwLHN0cm9rZVVuaWZvcm06ITEsZGlydHk6ITAsX19jb3JuZXI6MCxwYWludEZpcnN0OlwiZmlsbFwiLGFjdGl2ZU9uOlwiZG93blwiLHN0YXRlUHJvcGVydGllczpcInRvcCBsZWZ0IHdpZHRoIGhlaWdodCBzY2FsZVggc2NhbGVZIGZsaXBYIGZsaXBZIG9yaWdpblggb3JpZ2luWSB0cmFuc2Zvcm1NYXRyaXggc3Ryb2tlIHN0cm9rZVdpZHRoIHN0cm9rZURhc2hBcnJheSBzdHJva2VMaW5lQ2FwIHN0cm9rZURhc2hPZmZzZXQgc3Ryb2tlTGluZUpvaW4gc3Ryb2tlTWl0ZXJMaW1pdCBhbmdsZSBvcGFjaXR5IGZpbGwgZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uIHNoYWRvdyB2aXNpYmxlIGJhY2tncm91bmRDb2xvciBza2V3WCBza2V3WSBmaWxsUnVsZSBwYWludEZpcnN0IGNsaXBQYXRoIHN0cm9rZVVuaWZvcm1cIi5zcGxpdChcIiBcIiksY2FjaGVQcm9wZXJ0aWVzOlwiZmlsbCBzdHJva2Ugc3Ryb2tlV2lkdGggc3Ryb2tlRGFzaEFycmF5IHdpZHRoIGhlaWdodCBwYWludEZpcnN0IHN0cm9rZVVuaWZvcm0gc3Ryb2tlTGluZUNhcCBzdHJva2VEYXNoT2Zmc2V0IHN0cm9rZUxpbmVKb2luIHN0cm9rZU1pdGVyTGltaXQgYmFja2dyb3VuZENvbG9yIGNsaXBQYXRoXCIuc3BsaXQoXCIgXCIpLGNvbG9yUHJvcGVydGllczpcImZpbGwgc3Ryb2tlIGJhY2tncm91bmRDb2xvclwiLnNwbGl0KFwiIFwiKSxjbGlwUGF0aDp2b2lkIDAsaW52ZXJ0ZWQ6ITEsYWJzb2x1dGVQb3NpdGlvbmVkOiExLGluaXRpYWxpemU6ZnVuY3Rpb24odCl7dCYmdGhpcy5zZXRPcHRpb25zKHQpfSxfY3JlYXRlQ2FjaGVDYW52YXM6ZnVuY3Rpb24oKXt0aGlzLl9jYWNoZVByb3BlcnRpZXM9e30sdGhpcy5fY2FjaGVDYW52YXM9ZS51dGlsLmNyZWF0ZUNhbnZhc0VsZW1lbnQoKSx0aGlzLl9jYWNoZUNvbnRleHQ9dGhpcy5fY2FjaGVDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLHRoaXMuX3VwZGF0ZUNhY2hlQ2FudmFzKCksdGhpcy5kaXJ0eT0hMH0sX2xpbWl0Q2FjaGVTaXplOmZ1bmN0aW9uKHQpe3ZhciBpPWUucGVyZkxpbWl0U2l6ZVRvdGFsLHI9dC53aWR0aCxuPXQuaGVpZ2h0LHM9ZS5tYXhDYWNoZVNpZGVMaW1pdCxvPWUubWluQ2FjaGVTaWRlTGltaXQ7aWYocjw9cyYmbjw9cyYmcipuPD1pKXJldHVybiByPG8mJih0LndpZHRoPW8pLG48byYmKHQuaGVpZ2h0PW8pLHQ7dmFyIGE9ci9uLGg9ZS51dGlsLmxpbWl0RGltc0J5QXJlYShhLGkpLGw9ZS51dGlsLmNhcFZhbHVlLGM9bChvLGgueCxzKSx1PWwobyxoLnkscyk7cmV0dXJuIHI+YyYmKHQuem9vbVgvPXIvYyx0LndpZHRoPWMsdC5jYXBwZWQ9ITApLG4+dSYmKHQuem9vbVkvPW4vdSx0LmhlaWdodD11LHQuY2FwcGVkPSEwKSx0fSxfZ2V0Q2FjaGVDYW52YXNEaW1lbnNpb25zOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRUb3RhbE9iamVjdFNjYWxpbmcoKSxlPXRoaXMuX2dldFRyYW5zZm9ybWVkRGltZW5zaW9ucygwLDApLGk9ZS54KnQuc2NhbGVYL3RoaXMuc2NhbGVYLHI9ZS55KnQuc2NhbGVZL3RoaXMuc2NhbGVZO3JldHVybnt3aWR0aDppKzIsaGVpZ2h0OnIrMix6b29tWDp0LnNjYWxlWCx6b29tWTp0LnNjYWxlWSx4OmkseTpyfX0sX3VwZGF0ZUNhY2hlQ2FudmFzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jYW52YXM7aWYodGhpcy5ub1NjYWxlQ2FjaGUmJnQmJnQuX2N1cnJlbnRUcmFuc2Zvcm0pe3ZhciBpPXQuX2N1cnJlbnRUcmFuc2Zvcm0udGFyZ2V0LHI9dC5fY3VycmVudFRyYW5zZm9ybS5hY3Rpb247aWYodGhpcz09PWkmJnIuc2xpY2UmJlwic2NhbGVcIj09PXIuc2xpY2UoMCw1KSlyZXR1cm4hMX12YXIgbixzLG89dGhpcy5fY2FjaGVDYW52YXMsYT10aGlzLl9saW1pdENhY2hlU2l6ZSh0aGlzLl9nZXRDYWNoZUNhbnZhc0RpbWVuc2lvbnMoKSksaD1lLm1pbkNhY2hlU2lkZUxpbWl0LGw9YS53aWR0aCxjPWEuaGVpZ2h0LHU9YS56b29tWCxkPWEuem9vbVksZj1sIT09dGhpcy5jYWNoZVdpZHRofHxjIT09dGhpcy5jYWNoZUhlaWdodCxnPXRoaXMuem9vbVghPT11fHx0aGlzLnpvb21ZIT09ZCxtPWZ8fGcscD0wLHY9MCxfPSExO2lmKGYpe3ZhciB5PXRoaXMuX2NhY2hlQ2FudmFzLndpZHRoLHc9dGhpcy5fY2FjaGVDYW52YXMuaGVpZ2h0LGI9bD55fHxjPnc7Xz1ifHwobDwuOSp5fHxjPC45KncpJiZ5PmgmJnc+aCxiJiYhYS5jYXBwZWQmJihsPmh8fGM+aCkmJihwPS4xKmwsdj0uMSpjKX1yZXR1cm4gdGhpcyBpbnN0YW5jZW9mIGUuVGV4dCYmdGhpcy5wYXRoJiYobT0hMCxfPSEwLHArPXRoaXMuZ2V0SGVpZ2h0T2ZMaW5lKDApKnRoaXMuem9vbVgsdis9dGhpcy5nZXRIZWlnaHRPZkxpbmUoMCkqdGhpcy56b29tWSksISFtJiYoXz8oby53aWR0aD1NYXRoLmNlaWwobCtwKSxvLmhlaWdodD1NYXRoLmNlaWwoYyt2KSk6KHRoaXMuX2NhY2hlQ29udGV4dC5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApLHRoaXMuX2NhY2hlQ29udGV4dC5jbGVhclJlY3QoMCwwLG8ud2lkdGgsby5oZWlnaHQpKSxuPWEueC8yLHM9YS55LzIsdGhpcy5jYWNoZVRyYW5zbGF0aW9uWD1NYXRoLnJvdW5kKG8ud2lkdGgvMi1uKStuLHRoaXMuY2FjaGVUcmFuc2xhdGlvblk9TWF0aC5yb3VuZChvLmhlaWdodC8yLXMpK3MsdGhpcy5jYWNoZVdpZHRoPWwsdGhpcy5jYWNoZUhlaWdodD1jLHRoaXMuX2NhY2hlQ29udGV4dC50cmFuc2xhdGUodGhpcy5jYWNoZVRyYW5zbGF0aW9uWCx0aGlzLmNhY2hlVHJhbnNsYXRpb25ZKSx0aGlzLl9jYWNoZUNvbnRleHQuc2NhbGUodSxkKSx0aGlzLnpvb21YPXUsdGhpcy56b29tWT1kLCEwKX0sc2V0T3B0aW9uczpmdW5jdGlvbih0KXt0aGlzLl9zZXRPcHRpb25zKHQpLHRoaXMuX2luaXRHcmFkaWVudCh0LmZpbGwsXCJmaWxsXCIpLHRoaXMuX2luaXRHcmFkaWVudCh0LnN0cm9rZSxcInN0cm9rZVwiKSx0aGlzLl9pbml0UGF0dGVybih0LmZpbGwsXCJmaWxsXCIpLHRoaXMuX2luaXRQYXR0ZXJuKHQuc3Ryb2tlLFwic3Ryb2tlXCIpfSx0cmFuc2Zvcm06ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5ncm91cCYmIXRoaXMuZ3JvdXAuX3RyYW5zZm9ybURvbmV8fHRoaXMuZ3JvdXAmJnRoaXMuY2FudmFzJiZ0PT09dGhpcy5jYW52YXMuY29udGV4dFRvcCxpPXRoaXMuY2FsY1RyYW5zZm9ybU1hdHJpeCghZSk7dC50cmFuc2Zvcm0oaVswXSxpWzFdLGlbMl0saVszXSxpWzRdLGlbNV0pfSx0b09iamVjdDpmdW5jdGlvbih0KXt2YXIgaT1lLk9iamVjdC5OVU1fRlJBQ1RJT05fRElHSVRTLHI9e3R5cGU6dGhpcy50eXBlLHZlcnNpb246ZS52ZXJzaW9uLG9yaWdpblg6dGhpcy5vcmlnaW5YLG9yaWdpblk6dGhpcy5vcmlnaW5ZLGxlZnQ6bih0aGlzLmxlZnQsaSksdG9wOm4odGhpcy50b3AsaSksd2lkdGg6bih0aGlzLndpZHRoLGkpLGhlaWdodDpuKHRoaXMuaGVpZ2h0LGkpLGZpbGw6dGhpcy5maWxsJiZ0aGlzLmZpbGwudG9PYmplY3Q/dGhpcy5maWxsLnRvT2JqZWN0KCk6dGhpcy5maWxsLHN0cm9rZTp0aGlzLnN0cm9rZSYmdGhpcy5zdHJva2UudG9PYmplY3Q/dGhpcy5zdHJva2UudG9PYmplY3QoKTp0aGlzLnN0cm9rZSxzdHJva2VXaWR0aDpuKHRoaXMuc3Ryb2tlV2lkdGgsaSksc3Ryb2tlRGFzaEFycmF5OnRoaXMuc3Ryb2tlRGFzaEFycmF5P3RoaXMuc3Ryb2tlRGFzaEFycmF5LmNvbmNhdCgpOnRoaXMuc3Ryb2tlRGFzaEFycmF5LHN0cm9rZUxpbmVDYXA6dGhpcy5zdHJva2VMaW5lQ2FwLHN0cm9rZURhc2hPZmZzZXQ6dGhpcy5zdHJva2VEYXNoT2Zmc2V0LHN0cm9rZUxpbmVKb2luOnRoaXMuc3Ryb2tlTGluZUpvaW4sc3Ryb2tlVW5pZm9ybTp0aGlzLnN0cm9rZVVuaWZvcm0sc3Ryb2tlTWl0ZXJMaW1pdDpuKHRoaXMuc3Ryb2tlTWl0ZXJMaW1pdCxpKSxzY2FsZVg6bih0aGlzLnNjYWxlWCxpKSxzY2FsZVk6bih0aGlzLnNjYWxlWSxpKSxhbmdsZTpuKHRoaXMuYW5nbGUsaSksZmxpcFg6dGhpcy5mbGlwWCxmbGlwWTp0aGlzLmZsaXBZLG9wYWNpdHk6bih0aGlzLm9wYWNpdHksaSksc2hhZG93OnRoaXMuc2hhZG93JiZ0aGlzLnNoYWRvdy50b09iamVjdD90aGlzLnNoYWRvdy50b09iamVjdCgpOnRoaXMuc2hhZG93LHZpc2libGU6dGhpcy52aXNpYmxlLGJhY2tncm91bmRDb2xvcjp0aGlzLmJhY2tncm91bmRDb2xvcixmaWxsUnVsZTp0aGlzLmZpbGxSdWxlLHBhaW50Rmlyc3Q6dGhpcy5wYWludEZpcnN0LGdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbjp0aGlzLmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbixza2V3WDpuKHRoaXMuc2tld1gsaSksc2tld1k6bih0aGlzLnNrZXdZLGkpfTtyZXR1cm4gdGhpcy5jbGlwUGF0aCYmIXRoaXMuY2xpcFBhdGguZXhjbHVkZUZyb21FeHBvcnQmJihyLmNsaXBQYXRoPXRoaXMuY2xpcFBhdGgudG9PYmplY3QodCksci5jbGlwUGF0aC5pbnZlcnRlZD10aGlzLmNsaXBQYXRoLmludmVydGVkLHIuY2xpcFBhdGguYWJzb2x1dGVQb3NpdGlvbmVkPXRoaXMuY2xpcFBhdGguYWJzb2x1dGVQb3NpdGlvbmVkKSxlLnV0aWwucG9wdWxhdGVXaXRoUHJvcGVydGllcyh0aGlzLHIsdCksdGhpcy5pbmNsdWRlRGVmYXVsdFZhbHVlc3x8KHI9dGhpcy5fcmVtb3ZlRGVmYXVsdFZhbHVlcyhyKSkscn0sdG9EYXRhbGVzc09iamVjdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy50b09iamVjdCh0KX0sX3JlbW92ZURlZmF1bHRWYWx1ZXM6ZnVuY3Rpb24odCl7dmFyIGk9ZS51dGlsLmdldEtsYXNzKHQudHlwZSkucHJvdG90eXBlO3JldHVybiBpLnN0YXRlUHJvcGVydGllcy5mb3JFYWNoKChmdW5jdGlvbihlKXtcImxlZnRcIiE9PWUmJlwidG9wXCIhPT1lJiYodFtlXT09PWlbZV0mJmRlbGV0ZSB0W2VdLEFycmF5LmlzQXJyYXkodFtlXSkmJkFycmF5LmlzQXJyYXkoaVtlXSkmJjA9PT10W2VdLmxlbmd0aCYmMD09PWlbZV0ubGVuZ3RoJiZkZWxldGUgdFtlXSl9KSksdH0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5cIiM8ZmFicmljLlwiK3ModGhpcy50eXBlKStcIj5cIn0sZ2V0T2JqZWN0U2NhbGluZzpmdW5jdGlvbigpe2lmKCF0aGlzLmdyb3VwKXJldHVybntzY2FsZVg6dGhpcy5zY2FsZVgsc2NhbGVZOnRoaXMuc2NhbGVZfTt2YXIgdD1lLnV0aWwucXJEZWNvbXBvc2UodGhpcy5jYWxjVHJhbnNmb3JtTWF0cml4KCkpO3JldHVybntzY2FsZVg6TWF0aC5hYnModC5zY2FsZVgpLHNjYWxlWTpNYXRoLmFicyh0LnNjYWxlWSl9fSxnZXRUb3RhbE9iamVjdFNjYWxpbmc6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldE9iamVjdFNjYWxpbmcoKSxlPXQuc2NhbGVYLGk9dC5zY2FsZVk7aWYodGhpcy5jYW52YXMpe3ZhciByPXRoaXMuY2FudmFzLmdldFpvb20oKSxuPXRoaXMuY2FudmFzLmdldFJldGluYVNjYWxpbmcoKTtlKj1yKm4saSo9cipufXJldHVybntzY2FsZVg6ZSxzY2FsZVk6aX19LGdldE9iamVjdE9wYWNpdHk6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wYWNpdHk7cmV0dXJuIHRoaXMuZ3JvdXAmJih0Kj10aGlzLmdyb3VwLmdldE9iamVjdE9wYWNpdHkoKSksdH0sX3NldDpmdW5jdGlvbih0LGkpe3ZhciByPVwic2NhbGVYXCI9PT10fHxcInNjYWxlWVwiPT09dCxuPXRoaXNbdF0hPT1pLHM9ITE7cmV0dXJuIHImJihpPXRoaXMuX2NvbnN0cmFpblNjYWxlKGkpKSxcInNjYWxlWFwiPT09dCYmaTwwPyh0aGlzLmZsaXBYPSF0aGlzLmZsaXBYLGkqPS0xKTpcInNjYWxlWVwiPT09dCYmaTwwPyh0aGlzLmZsaXBZPSF0aGlzLmZsaXBZLGkqPS0xKTpcInNoYWRvd1wiIT09dHx8IWl8fGkgaW5zdGFuY2VvZiBlLlNoYWRvdz9cImRpcnR5XCI9PT10JiZ0aGlzLmdyb3VwJiZ0aGlzLmdyb3VwLnNldChcImRpcnR5XCIsaSk6aT1uZXcgZS5TaGFkb3coaSksdGhpc1t0XT1pLG4mJihzPXRoaXMuZ3JvdXAmJnRoaXMuZ3JvdXAuaXNPbkFDYWNoZSgpLHRoaXMuY2FjaGVQcm9wZXJ0aWVzLmluZGV4T2YodCk+LTE/KHRoaXMuZGlydHk9ITAscyYmdGhpcy5ncm91cC5zZXQoXCJkaXJ0eVwiLCEwKSk6cyYmdGhpcy5zdGF0ZVByb3BlcnRpZXMuaW5kZXhPZih0KT4tMSYmdGhpcy5ncm91cC5zZXQoXCJkaXJ0eVwiLCEwKSksdGhpc30sc2V0T25Hcm91cDpmdW5jdGlvbigpe30sZ2V0Vmlld3BvcnRUcmFuc2Zvcm06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYW52YXMmJnRoaXMuY2FudmFzLnZpZXdwb3J0VHJhbnNmb3JtP3RoaXMuY2FudmFzLnZpZXdwb3J0VHJhbnNmb3JtOmUuaU1hdHJpeC5jb25jYXQoKX0saXNOb3RWaXNpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLm9wYWNpdHl8fCF0aGlzLndpZHRoJiYhdGhpcy5oZWlnaHQmJjA9PT10aGlzLnN0cm9rZVdpZHRofHwhdGhpcy52aXNpYmxlfSxyZW5kZXI6ZnVuY3Rpb24odCl7dGhpcy5pc05vdFZpc2libGUoKXx8dGhpcy5jYW52YXMmJnRoaXMuY2FudmFzLnNraXBPZmZzY3JlZW4mJiF0aGlzLmdyb3VwJiYhdGhpcy5pc09uU2NyZWVuKCl8fCh0LnNhdmUoKSx0aGlzLl9zZXR1cENvbXBvc2l0ZU9wZXJhdGlvbih0KSx0aGlzLmRyYXdTZWxlY3Rpb25CYWNrZ3JvdW5kKHQpLHRoaXMudHJhbnNmb3JtKHQpLHRoaXMuX3NldE9wYWNpdHkodCksdGhpcy5fc2V0U2hhZG93KHQsdGhpcyksdGhpcy5zaG91bGRDYWNoZSgpPyh0aGlzLnJlbmRlckNhY2hlKCksdGhpcy5kcmF3Q2FjaGVPbkNhbnZhcyh0KSk6KHRoaXMuX3JlbW92ZUNhY2hlQ2FudmFzKCksdGhpcy5kaXJ0eT0hMSx0aGlzLmRyYXdPYmplY3QodCksdGhpcy5vYmplY3RDYWNoaW5nJiZ0aGlzLnN0YXRlZnVsbENhY2hlJiZ0aGlzLnNhdmVTdGF0ZSh7cHJvcGVydHlTZXQ6XCJjYWNoZVByb3BlcnRpZXNcIn0pKSx0LnJlc3RvcmUoKSl9LHJlbmRlckNhY2hlOmZ1bmN0aW9uKHQpe3Q9dHx8e30sdGhpcy5fY2FjaGVDYW52YXMmJnRoaXMuX2NhY2hlQ29udGV4dHx8dGhpcy5fY3JlYXRlQ2FjaGVDYW52YXMoKSx0aGlzLmlzQ2FjaGVEaXJ0eSgpJiYodGhpcy5zdGF0ZWZ1bGxDYWNoZSYmdGhpcy5zYXZlU3RhdGUoe3Byb3BlcnR5U2V0OlwiY2FjaGVQcm9wZXJ0aWVzXCJ9KSx0aGlzLmRyYXdPYmplY3QodGhpcy5fY2FjaGVDb250ZXh0LHQuZm9yQ2xpcHBpbmcpLHRoaXMuZGlydHk9ITEpfSxfcmVtb3ZlQ2FjaGVDYW52YXM6ZnVuY3Rpb24oKXt0aGlzLl9jYWNoZUNhbnZhcz1udWxsLHRoaXMuX2NhY2hlQ29udGV4dD1udWxsLHRoaXMuY2FjaGVXaWR0aD0wLHRoaXMuY2FjaGVIZWlnaHQ9MH0saGFzU3Ryb2tlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3Ryb2tlJiZcInRyYW5zcGFyZW50XCIhPT10aGlzLnN0cm9rZSYmMCE9PXRoaXMuc3Ryb2tlV2lkdGh9LGhhc0ZpbGw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5maWxsJiZcInRyYW5zcGFyZW50XCIhPT10aGlzLmZpbGx9LG5lZWRzSXRzT3duQ2FjaGU6ZnVuY3Rpb24oKXtyZXR1cm4hKFwic3Ryb2tlXCIhPT10aGlzLnBhaW50Rmlyc3R8fCF0aGlzLmhhc0ZpbGwoKXx8IXRoaXMuaGFzU3Ryb2tlKCl8fFwib2JqZWN0XCIhPXR5cGVvZiB0aGlzLnNoYWRvdyl8fCEhdGhpcy5jbGlwUGF0aH0sc2hvdWxkQ2FjaGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vd25DYWNoaW5nPXRoaXMubmVlZHNJdHNPd25DYWNoZSgpfHx0aGlzLm9iamVjdENhY2hpbmcmJighdGhpcy5ncm91cHx8IXRoaXMuZ3JvdXAuaXNPbkFDYWNoZSgpKSx0aGlzLm93bkNhY2hpbmd9LHdpbGxEcmF3U2hhZG93OmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLnNoYWRvdyYmKDAhPT10aGlzLnNoYWRvdy5vZmZzZXRYfHwwIT09dGhpcy5zaGFkb3cub2Zmc2V0WSl9LGRyYXdDbGlwUGF0aE9uQ2FjaGU6ZnVuY3Rpb24odCxpKXtpZih0LnNhdmUoKSxpLmludmVydGVkP3QuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPVwiZGVzdGluYXRpb24tb3V0XCI6dC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249XCJkZXN0aW5hdGlvbi1pblwiLGkuYWJzb2x1dGVQb3NpdGlvbmVkKXt2YXIgcj1lLnV0aWwuaW52ZXJ0VHJhbnNmb3JtKHRoaXMuY2FsY1RyYW5zZm9ybU1hdHJpeCgpKTt0LnRyYW5zZm9ybShyWzBdLHJbMV0sclsyXSxyWzNdLHJbNF0scls1XSl9aS50cmFuc2Zvcm0odCksdC5zY2FsZSgxL2kuem9vbVgsMS9pLnpvb21ZKSx0LmRyYXdJbWFnZShpLl9jYWNoZUNhbnZhcywtaS5jYWNoZVRyYW5zbGF0aW9uWCwtaS5jYWNoZVRyYW5zbGF0aW9uWSksdC5yZXN0b3JlKCl9LGRyYXdPYmplY3Q6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmZpbGwscj10aGlzLnN0cm9rZTtlPyh0aGlzLmZpbGw9XCJibGFja1wiLHRoaXMuc3Ryb2tlPVwiXCIsdGhpcy5fc2V0Q2xpcHBpbmdQcm9wZXJ0aWVzKHQpKTp0aGlzLl9yZW5kZXJCYWNrZ3JvdW5kKHQpLHRoaXMuX3JlbmRlcih0KSx0aGlzLl9kcmF3Q2xpcFBhdGgodCx0aGlzLmNsaXBQYXRoKSx0aGlzLmZpbGw9aSx0aGlzLnN0cm9rZT1yfSxfZHJhd0NsaXBQYXRoOmZ1bmN0aW9uKHQsZSl7ZSYmKGUuY2FudmFzPXRoaXMuY2FudmFzLGUuc2hvdWxkQ2FjaGUoKSxlLl90cmFuc2Zvcm1Eb25lPSEwLGUucmVuZGVyQ2FjaGUoe2ZvckNsaXBwaW5nOiEwfSksdGhpcy5kcmF3Q2xpcFBhdGhPbkNhY2hlKHQsZSkpfSxkcmF3Q2FjaGVPbkNhbnZhczpmdW5jdGlvbih0KXt0LnNjYWxlKDEvdGhpcy56b29tWCwxL3RoaXMuem9vbVkpLHQuZHJhd0ltYWdlKHRoaXMuX2NhY2hlQ2FudmFzLC10aGlzLmNhY2hlVHJhbnNsYXRpb25YLC10aGlzLmNhY2hlVHJhbnNsYXRpb25ZKX0saXNDYWNoZURpcnR5OmZ1bmN0aW9uKHQpe2lmKHRoaXMuaXNOb3RWaXNpYmxlKCkpcmV0dXJuITE7aWYodGhpcy5fY2FjaGVDYW52YXMmJnRoaXMuX2NhY2hlQ29udGV4dCYmIXQmJnRoaXMuX3VwZGF0ZUNhY2hlQ2FudmFzKCkpcmV0dXJuITA7aWYodGhpcy5kaXJ0eXx8dGhpcy5jbGlwUGF0aCYmdGhpcy5jbGlwUGF0aC5hYnNvbHV0ZVBvc2l0aW9uZWR8fHRoaXMuc3RhdGVmdWxsQ2FjaGUmJnRoaXMuaGFzU3RhdGVDaGFuZ2VkKFwiY2FjaGVQcm9wZXJ0aWVzXCIpKXtpZih0aGlzLl9jYWNoZUNhbnZhcyYmdGhpcy5fY2FjaGVDb250ZXh0JiYhdCl7dmFyIGU9dGhpcy5jYWNoZVdpZHRoL3RoaXMuem9vbVgsaT10aGlzLmNhY2hlSGVpZ2h0L3RoaXMuem9vbVk7dGhpcy5fY2FjaGVDb250ZXh0LmNsZWFyUmVjdCgtZS8yLC1pLzIsZSxpKX1yZXR1cm4hMH1yZXR1cm4hMX0sX3JlbmRlckJhY2tncm91bmQ6ZnVuY3Rpb24odCl7aWYodGhpcy5iYWNrZ3JvdW5kQ29sb3Ipe3ZhciBlPXRoaXMuX2dldE5vblRyYW5zZm9ybWVkRGltZW5zaW9ucygpO3QuZmlsbFN0eWxlPXRoaXMuYmFja2dyb3VuZENvbG9yLHQuZmlsbFJlY3QoLWUueC8yLC1lLnkvMixlLngsZS55KSx0aGlzLl9yZW1vdmVTaGFkb3codCl9fSxfc2V0T3BhY2l0eTpmdW5jdGlvbih0KXt0aGlzLmdyb3VwJiYhdGhpcy5ncm91cC5fdHJhbnNmb3JtRG9uZT90Lmdsb2JhbEFscGhhPXRoaXMuZ2V0T2JqZWN0T3BhY2l0eSgpOnQuZ2xvYmFsQWxwaGEqPXRoaXMub3BhY2l0eX0sX3NldFN0cm9rZVN0eWxlczpmdW5jdGlvbih0LGUpe3ZhciBpPWUuc3Ryb2tlO2kmJih0LmxpbmVXaWR0aD1lLnN0cm9rZVdpZHRoLHQubGluZUNhcD1lLnN0cm9rZUxpbmVDYXAsdC5saW5lRGFzaE9mZnNldD1lLnN0cm9rZURhc2hPZmZzZXQsdC5saW5lSm9pbj1lLnN0cm9rZUxpbmVKb2luLHQubWl0ZXJMaW1pdD1lLnN0cm9rZU1pdGVyTGltaXQsaS50b0xpdmU/XCJwZXJjZW50YWdlXCI9PT1pLmdyYWRpZW50VW5pdHN8fGkuZ3JhZGllbnRUcmFuc2Zvcm18fGkucGF0dGVyblRyYW5zZm9ybT90aGlzLl9hcHBseVBhdHRlcm5Gb3JUcmFuc2Zvcm1lZEdyYWRpZW50KHQsaSk6KHQuc3Ryb2tlU3R5bGU9aS50b0xpdmUodCx0aGlzKSx0aGlzLl9hcHBseVBhdHRlcm5HcmFkaWVudFRyYW5zZm9ybSh0LGkpKTp0LnN0cm9rZVN0eWxlPWUuc3Ryb2tlKX0sX3NldEZpbGxTdHlsZXM6ZnVuY3Rpb24odCxlKXt2YXIgaT1lLmZpbGw7aSYmKGkudG9MaXZlPyh0LmZpbGxTdHlsZT1pLnRvTGl2ZSh0LHRoaXMpLHRoaXMuX2FwcGx5UGF0dGVybkdyYWRpZW50VHJhbnNmb3JtKHQsZS5maWxsKSk6dC5maWxsU3R5bGU9aSl9LF9zZXRDbGlwcGluZ1Byb3BlcnRpZXM6ZnVuY3Rpb24odCl7dC5nbG9iYWxBbHBoYT0xLHQuc3Ryb2tlU3R5bGU9XCJ0cmFuc3BhcmVudFwiLHQuZmlsbFN0eWxlPVwiIzAwMDAwMFwifSxfc2V0TGluZURhc2g6ZnVuY3Rpb24odCxlKXtlJiYwIT09ZS5sZW5ndGgmJigxJmUubGVuZ3RoJiZlLnB1c2guYXBwbHkoZSxlKSx0LnNldExpbmVEYXNoKGUpKX0sX3JlbmRlckNvbnRyb2xzOmZ1bmN0aW9uKHQsaSl7dmFyIHIsbixzLGE9dGhpcy5nZXRWaWV3cG9ydFRyYW5zZm9ybSgpLGg9dGhpcy5jYWxjVHJhbnNmb3JtTWF0cml4KCk7bj12b2lkIDAhPT0oaT1pfHx7fSkuaGFzQm9yZGVycz9pLmhhc0JvcmRlcnM6dGhpcy5oYXNCb3JkZXJzLHM9dm9pZCAwIT09aS5oYXNDb250cm9scz9pLmhhc0NvbnRyb2xzOnRoaXMuaGFzQ29udHJvbHMsaD1lLnV0aWwubXVsdGlwbHlUcmFuc2Zvcm1NYXRyaWNlcyhhLGgpLHI9ZS51dGlsLnFyRGVjb21wb3NlKGgpLHQuc2F2ZSgpLHQudHJhbnNsYXRlKHIudHJhbnNsYXRlWCxyLnRyYW5zbGF0ZVkpLHQubGluZVdpZHRoPTEqdGhpcy5ib3JkZXJTY2FsZUZhY3Rvcix0aGlzLmdyb3VwfHwodC5nbG9iYWxBbHBoYT10aGlzLmlzTW92aW5nP3RoaXMuYm9yZGVyT3BhY2l0eVdoZW5Nb3Zpbmc6MSksdGhpcy5mbGlwWCYmKHIuYW5nbGUtPTE4MCksdC5yb3RhdGUobyh0aGlzLmdyb3VwP3IuYW5nbGU6dGhpcy5hbmdsZSkpLGkuZm9yQWN0aXZlU2VsZWN0aW9ufHx0aGlzLmdyb3VwP24mJnRoaXMuZHJhd0JvcmRlcnNJbkdyb3VwKHQscixpKTpuJiZ0aGlzLmRyYXdCb3JkZXJzKHQsaSkscyYmdGhpcy5kcmF3Q29udHJvbHModCxpKSx0LnJlc3RvcmUoKX0sX3NldFNoYWRvdzpmdW5jdGlvbih0KXtpZih0aGlzLnNoYWRvdyl7dmFyIGkscj10aGlzLnNoYWRvdyxuPXRoaXMuY2FudmFzLHM9biYmbi52aWV3cG9ydFRyYW5zZm9ybVswXXx8MSxvPW4mJm4udmlld3BvcnRUcmFuc2Zvcm1bM118fDE7aT1yLm5vblNjYWxpbmc/e3NjYWxlWDoxLHNjYWxlWToxfTp0aGlzLmdldE9iamVjdFNjYWxpbmcoKSxuJiZuLl9pc1JldGluYVNjYWxpbmcoKSYmKHMqPWUuZGV2aWNlUGl4ZWxSYXRpbyxvKj1lLmRldmljZVBpeGVsUmF0aW8pLHQuc2hhZG93Q29sb3I9ci5jb2xvcix0LnNoYWRvd0JsdXI9ci5ibHVyKmUuYnJvd3NlclNoYWRvd0JsdXJDb25zdGFudCoocytvKSooaS5zY2FsZVgraS5zY2FsZVkpLzQsdC5zaGFkb3dPZmZzZXRYPXIub2Zmc2V0WCpzKmkuc2NhbGVYLHQuc2hhZG93T2Zmc2V0WT1yLm9mZnNldFkqbyppLnNjYWxlWX19LF9yZW1vdmVTaGFkb3c6ZnVuY3Rpb24odCl7dGhpcy5zaGFkb3cmJih0LnNoYWRvd0NvbG9yPVwiXCIsdC5zaGFkb3dCbHVyPXQuc2hhZG93T2Zmc2V0WD10LnNoYWRvd09mZnNldFk9MCl9LF9hcHBseVBhdHRlcm5HcmFkaWVudFRyYW5zZm9ybTpmdW5jdGlvbih0LGUpe2lmKCFlfHwhZS50b0xpdmUpcmV0dXJue29mZnNldFg6MCxvZmZzZXRZOjB9O3ZhciBpPWUuZ3JhZGllbnRUcmFuc2Zvcm18fGUucGF0dGVyblRyYW5zZm9ybSxyPS10aGlzLndpZHRoLzIrZS5vZmZzZXRYfHwwLG49LXRoaXMuaGVpZ2h0LzIrZS5vZmZzZXRZfHwwO3JldHVyblwicGVyY2VudGFnZVwiPT09ZS5ncmFkaWVudFVuaXRzP3QudHJhbnNmb3JtKHRoaXMud2lkdGgsMCwwLHRoaXMuaGVpZ2h0LHIsbik6dC50cmFuc2Zvcm0oMSwwLDAsMSxyLG4pLGkmJnQudHJhbnNmb3JtKGlbMF0saVsxXSxpWzJdLGlbM10saVs0XSxpWzVdKSx7b2Zmc2V0WDpyLG9mZnNldFk6bn19LF9yZW5kZXJQYWludEluT3JkZXI6ZnVuY3Rpb24odCl7XCJzdHJva2VcIj09PXRoaXMucGFpbnRGaXJzdD8odGhpcy5fcmVuZGVyU3Ryb2tlKHQpLHRoaXMuX3JlbmRlckZpbGwodCkpOih0aGlzLl9yZW5kZXJGaWxsKHQpLHRoaXMuX3JlbmRlclN0cm9rZSh0KSl9LF9yZW5kZXI6ZnVuY3Rpb24oKXt9LF9yZW5kZXJGaWxsOmZ1bmN0aW9uKHQpe3RoaXMuZmlsbCYmKHQuc2F2ZSgpLHRoaXMuX3NldEZpbGxTdHlsZXModCx0aGlzKSxcImV2ZW5vZGRcIj09PXRoaXMuZmlsbFJ1bGU/dC5maWxsKFwiZXZlbm9kZFwiKTp0LmZpbGwoKSx0LnJlc3RvcmUoKSl9LF9yZW5kZXJTdHJva2U6ZnVuY3Rpb24odCl7aWYodGhpcy5zdHJva2UmJjAhPT10aGlzLnN0cm9rZVdpZHRoKXtpZih0aGlzLnNoYWRvdyYmIXRoaXMuc2hhZG93LmFmZmVjdFN0cm9rZSYmdGhpcy5fcmVtb3ZlU2hhZG93KHQpLHQuc2F2ZSgpLHRoaXMuc3Ryb2tlVW5pZm9ybSYmdGhpcy5ncm91cCl7dmFyIGU9dGhpcy5nZXRPYmplY3RTY2FsaW5nKCk7dC5zY2FsZSgxL2Uuc2NhbGVYLDEvZS5zY2FsZVkpfWVsc2UgdGhpcy5zdHJva2VVbmlmb3JtJiZ0LnNjYWxlKDEvdGhpcy5zY2FsZVgsMS90aGlzLnNjYWxlWSk7dGhpcy5fc2V0TGluZURhc2godCx0aGlzLnN0cm9rZURhc2hBcnJheSksdGhpcy5fc2V0U3Ryb2tlU3R5bGVzKHQsdGhpcyksdC5zdHJva2UoKSx0LnJlc3RvcmUoKX19LF9hcHBseVBhdHRlcm5Gb3JUcmFuc2Zvcm1lZEdyYWRpZW50OmZ1bmN0aW9uKHQsaSl7dmFyIHIsbj10aGlzLl9saW1pdENhY2hlU2l6ZSh0aGlzLl9nZXRDYWNoZUNhbnZhc0RpbWVuc2lvbnMoKSkscz1lLnV0aWwuY3JlYXRlQ2FudmFzRWxlbWVudCgpLG89dGhpcy5jYW52YXMuZ2V0UmV0aW5hU2NhbGluZygpLGE9bi54L3RoaXMuc2NhbGVYL28saD1uLnkvdGhpcy5zY2FsZVkvbztzLndpZHRoPWEscy5oZWlnaHQ9aCwocj1zLmdldENvbnRleHQoXCIyZFwiKSkuYmVnaW5QYXRoKCksci5tb3ZlVG8oMCwwKSxyLmxpbmVUbyhhLDApLHIubGluZVRvKGEsaCksci5saW5lVG8oMCxoKSxyLmNsb3NlUGF0aCgpLHIudHJhbnNsYXRlKGEvMixoLzIpLHIuc2NhbGUobi56b29tWC90aGlzLnNjYWxlWC9vLG4uem9vbVkvdGhpcy5zY2FsZVkvbyksdGhpcy5fYXBwbHlQYXR0ZXJuR3JhZGllbnRUcmFuc2Zvcm0ocixpKSxyLmZpbGxTdHlsZT1pLnRvTGl2ZSh0KSxyLmZpbGwoKSx0LnRyYW5zbGF0ZSgtdGhpcy53aWR0aC8yLXRoaXMuc3Ryb2tlV2lkdGgvMiwtdGhpcy5oZWlnaHQvMi10aGlzLnN0cm9rZVdpZHRoLzIpLHQuc2NhbGUobyp0aGlzLnNjYWxlWC9uLnpvb21YLG8qdGhpcy5zY2FsZVkvbi56b29tWSksdC5zdHJva2VTdHlsZT1yLmNyZWF0ZVBhdHRlcm4ocyxcIm5vLXJlcGVhdFwiKX0sX2ZpbmRDZW50ZXJGcm9tRWxlbWVudDpmdW5jdGlvbigpe3JldHVybnt4OnRoaXMubGVmdCt0aGlzLndpZHRoLzIseTp0aGlzLnRvcCt0aGlzLmhlaWdodC8yfX0sX2Fzc2lnblRyYW5zZm9ybU1hdHJpeFByb3BzOmZ1bmN0aW9uKCl7aWYodGhpcy50cmFuc2Zvcm1NYXRyaXgpe3ZhciB0PWUudXRpbC5xckRlY29tcG9zZSh0aGlzLnRyYW5zZm9ybU1hdHJpeCk7dGhpcy5mbGlwWD0hMSx0aGlzLmZsaXBZPSExLHRoaXMuc2V0KFwic2NhbGVYXCIsdC5zY2FsZVgpLHRoaXMuc2V0KFwic2NhbGVZXCIsdC5zY2FsZVkpLHRoaXMuYW5nbGU9dC5hbmdsZSx0aGlzLnNrZXdYPXQuc2tld1gsdGhpcy5za2V3WT0wfX0sX3JlbW92ZVRyYW5zZm9ybU1hdHJpeDpmdW5jdGlvbih0KXt2YXIgaT10aGlzLl9maW5kQ2VudGVyRnJvbUVsZW1lbnQoKTt0aGlzLnRyYW5zZm9ybU1hdHJpeCYmKHRoaXMuX2Fzc2lnblRyYW5zZm9ybU1hdHJpeFByb3BzKCksaT1lLnV0aWwudHJhbnNmb3JtUG9pbnQoaSx0aGlzLnRyYW5zZm9ybU1hdHJpeCkpLHRoaXMudHJhbnNmb3JtTWF0cml4PW51bGwsdCYmKHRoaXMuc2NhbGVYKj10LnNjYWxlWCx0aGlzLnNjYWxlWSo9dC5zY2FsZVksdGhpcy5jcm9wWD10LmNyb3BYLHRoaXMuY3JvcFk9dC5jcm9wWSxpLngrPXQub2Zmc2V0TGVmdCxpLnkrPXQub2Zmc2V0VG9wLHRoaXMud2lkdGg9dC53aWR0aCx0aGlzLmhlaWdodD10LmhlaWdodCksdGhpcy5zZXRQb3NpdGlvbkJ5T3JpZ2luKGksXCJjZW50ZXJcIixcImNlbnRlclwiKX0sY2xvbmU6ZnVuY3Rpb24odCxpKXt2YXIgcj10aGlzLnRvT2JqZWN0KGkpO3RoaXMuY29uc3RydWN0b3IuZnJvbU9iamVjdD90aGlzLmNvbnN0cnVjdG9yLmZyb21PYmplY3Qocix0KTplLk9iamVjdC5fZnJvbU9iamVjdChcIk9iamVjdFwiLHIsdCl9LGNsb25lQXNJbWFnZTpmdW5jdGlvbih0LGkpe3ZhciByPXRoaXMudG9DYW52YXNFbGVtZW50KGkpO3JldHVybiB0JiZ0KG5ldyBlLkltYWdlKHIpKSx0aGlzfSx0b0NhbnZhc0VsZW1lbnQ6ZnVuY3Rpb24odCl7dHx8KHQ9e30pO3ZhciBpPWUudXRpbCxyPWkuc2F2ZU9iamVjdFRyYW5zZm9ybSh0aGlzKSxuPXRoaXMuZ3JvdXAscz10aGlzLnNoYWRvdyxvPU1hdGguYWJzLGE9KHQubXVsdGlwbGllcnx8MSkqKHQuZW5hYmxlUmV0aW5hU2NhbGluZz9lLmRldmljZVBpeGVsUmF0aW86MSk7ZGVsZXRlIHRoaXMuZ3JvdXAsdC53aXRob3V0VHJhbnNmb3JtJiZpLnJlc2V0T2JqZWN0VHJhbnNmb3JtKHRoaXMpLHQud2l0aG91dFNoYWRvdyYmKHRoaXMuc2hhZG93PW51bGwpO3ZhciBoLGwsYyx1LGQ9ZS51dGlsLmNyZWF0ZUNhbnZhc0VsZW1lbnQoKSxmPXRoaXMuZ2V0Qm91bmRpbmdSZWN0KCEwLCEwKSxnPXRoaXMuc2hhZG93LG09e3g6MCx5OjB9O2cmJihsPWcuYmx1cixoPWcubm9uU2NhbGluZz97c2NhbGVYOjEsc2NhbGVZOjF9OnRoaXMuZ2V0T2JqZWN0U2NhbGluZygpLG0ueD0yKk1hdGgucm91bmQobyhnLm9mZnNldFgpK2wpKm8oaC5zY2FsZVgpLG0ueT0yKk1hdGgucm91bmQobyhnLm9mZnNldFkpK2wpKm8oaC5zY2FsZVkpKSxjPWYud2lkdGgrbS54LHU9Zi5oZWlnaHQrbS55LGQud2lkdGg9TWF0aC5jZWlsKGMpLGQuaGVpZ2h0PU1hdGguY2VpbCh1KTt2YXIgcD1uZXcgZS5TdGF0aWNDYW52YXMoZCx7ZW5hYmxlUmV0aW5hU2NhbGluZzohMSxyZW5kZXJPbkFkZFJlbW92ZTohMSxza2lwT2Zmc2NyZWVuOiExfSk7XCJqcGVnXCI9PT10LmZvcm1hdCYmKHAuYmFja2dyb3VuZENvbG9yPVwiI2ZmZlwiKSx0aGlzLnNldFBvc2l0aW9uQnlPcmlnaW4obmV3IGUuUG9pbnQocC53aWR0aC8yLHAuaGVpZ2h0LzIpLFwiY2VudGVyXCIsXCJjZW50ZXJcIik7dmFyIHY9dGhpcy5jYW52YXM7cC5hZGQodGhpcyk7dmFyIF89cC50b0NhbnZhc0VsZW1lbnQoYXx8MSx0KTtyZXR1cm4gdGhpcy5zaGFkb3c9cyx0aGlzLnNldChcImNhbnZhc1wiLHYpLG4mJih0aGlzLmdyb3VwPW4pLHRoaXMuc2V0KHIpLnNldENvb3JkcygpLHAuX29iamVjdHM9W10scC5kaXNwb3NlKCkscD1udWxsLF99LHRvRGF0YVVSTDpmdW5jdGlvbih0KXtyZXR1cm4gdHx8KHQ9e30pLGUudXRpbC50b0RhdGFVUkwodGhpcy50b0NhbnZhc0VsZW1lbnQodCksdC5mb3JtYXR8fFwicG5nXCIsdC5xdWFsaXR5fHwxKX0saXNUeXBlOmZ1bmN0aW9uKHQpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPjE/QXJyYXkuZnJvbShhcmd1bWVudHMpLmluY2x1ZGVzKHRoaXMudHlwZSk6dGhpcy50eXBlPT09dH0sY29tcGxleGl0eTpmdW5jdGlvbigpe3JldHVybiAxfSx0b0pTT046ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudG9PYmplY3QodCl9LHJvdGF0ZTpmdW5jdGlvbih0KXt2YXIgZT0oXCJjZW50ZXJcIiE9PXRoaXMub3JpZ2luWHx8XCJjZW50ZXJcIiE9PXRoaXMub3JpZ2luWSkmJnRoaXMuY2VudGVyZWRSb3RhdGlvbjtyZXR1cm4gZSYmdGhpcy5fc2V0T3JpZ2luVG9DZW50ZXIoKSx0aGlzLnNldChcImFuZ2xlXCIsdCksZSYmdGhpcy5fcmVzZXRPcmlnaW4oKSx0aGlzfSxjZW50ZXJIOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FudmFzJiZ0aGlzLmNhbnZhcy5jZW50ZXJPYmplY3RIKHRoaXMpLHRoaXN9LHZpZXdwb3J0Q2VudGVySDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbnZhcyYmdGhpcy5jYW52YXMudmlld3BvcnRDZW50ZXJPYmplY3RIKHRoaXMpLHRoaXN9LGNlbnRlclY6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYW52YXMmJnRoaXMuY2FudmFzLmNlbnRlck9iamVjdFYodGhpcyksdGhpc30sdmlld3BvcnRDZW50ZXJWOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FudmFzJiZ0aGlzLmNhbnZhcy52aWV3cG9ydENlbnRlck9iamVjdFYodGhpcyksdGhpc30sY2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FudmFzJiZ0aGlzLmNhbnZhcy5jZW50ZXJPYmplY3QodGhpcyksdGhpc30sdmlld3BvcnRDZW50ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYW52YXMmJnRoaXMuY2FudmFzLnZpZXdwb3J0Q2VudGVyT2JqZWN0KHRoaXMpLHRoaXN9LGdldExvY2FsUG9pbnRlcjpmdW5jdGlvbih0LGkpe2k9aXx8dGhpcy5jYW52YXMuZ2V0UG9pbnRlcih0KTt2YXIgcj1uZXcgZS5Qb2ludChpLngsaS55KSxuPXRoaXMuX2dldExlZnRUb3BDb29yZHMoKTtyZXR1cm4gdGhpcy5hbmdsZSYmKHI9ZS51dGlsLnJvdGF0ZVBvaW50KHIsbixvKC10aGlzLmFuZ2xlKSkpLHt4OnIueC1uLngseTpyLnktbi55fX0sX3NldHVwQ29tcG9zaXRlT3BlcmF0aW9uOmZ1bmN0aW9uKHQpe3RoaXMuZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uJiYodC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249dGhpcy5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24pfSxkaXNwb3NlOmZ1bmN0aW9uKCl7ZS5ydW5uaW5nQW5pbWF0aW9ucyYmZS5ydW5uaW5nQW5pbWF0aW9ucy5jYW5jZWxCeVRhcmdldCh0aGlzKX19KSxlLnV0aWwuY3JlYXRlQWNjZXNzb3JzJiZlLnV0aWwuY3JlYXRlQWNjZXNzb3JzKGUuT2JqZWN0KSxpKGUuT2JqZWN0LnByb3RvdHlwZSxlLk9ic2VydmFibGUpLGUuT2JqZWN0Lk5VTV9GUkFDVElPTl9ESUdJVFM9MixlLk9iamVjdC5FTkxJVkVOX1BST1BTPVtcImNsaXBQYXRoXCJdLGUuT2JqZWN0Ll9mcm9tT2JqZWN0PWZ1bmN0aW9uKHQsaSxuLHMpe3ZhciBvPWVbdF07aT1yKGksITApLGUudXRpbC5lbmxpdmVuUGF0dGVybnMoW2kuZmlsbCxpLnN0cm9rZV0sKGZ1bmN0aW9uKHQpe3ZvaWQgMCE9PXRbMF0mJihpLmZpbGw9dFswXSksdm9pZCAwIT09dFsxXSYmKGkuc3Ryb2tlPXRbMV0pLGUudXRpbC5lbmxpdmVuT2JqZWN0RW5saXZhYmxlcyhpLGksKGZ1bmN0aW9uKCl7dmFyIHQ9cz9uZXcgbyhpW3NdLGkpOm5ldyBvKGkpO24mJm4odCl9KSl9KSl9LGUuT2JqZWN0Ll9fdWlkPTApfShlKSx3PVMudXRpbC5kZWdyZWVzVG9SYWRpYW5zLGI9e2xlZnQ6LS41LGNlbnRlcjowLHJpZ2h0Oi41fSx4PXt0b3A6LS41LGNlbnRlcjowLGJvdHRvbTouNX0sUy51dGlsLm9iamVjdC5leHRlbmQoUy5PYmplY3QucHJvdG90eXBlLHt0cmFuc2xhdGVUb0dpdmVuT3JpZ2luOmZ1bmN0aW9uKHQsZSxpLHIsbil7dmFyIHMsbyxhLGg9dC54LGw9dC55O3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlP2U9YltlXTplLT0uNSxcInN0cmluZ1wiPT10eXBlb2Ygcj9yPWJbcl06ci09LjUsXCJzdHJpbmdcIj09dHlwZW9mIGk/aT14W2ldOmktPS41LFwic3RyaW5nXCI9PXR5cGVvZiBuP249eFtuXTpuLT0uNSxvPW4taSwoKHM9ci1lKXx8bykmJihhPXRoaXMuX2dldFRyYW5zZm9ybWVkRGltZW5zaW9ucygpLGg9dC54K3MqYS54LGw9dC55K28qYS55KSxuZXcgUy5Qb2ludChoLGwpfSx0cmFuc2xhdGVUb0NlbnRlclBvaW50OmZ1bmN0aW9uKHQsZSxpKXt2YXIgcj10aGlzLnRyYW5zbGF0ZVRvR2l2ZW5PcmlnaW4odCxlLGksXCJjZW50ZXJcIixcImNlbnRlclwiKTtyZXR1cm4gdGhpcy5hbmdsZT9TLnV0aWwucm90YXRlUG9pbnQocix0LHcodGhpcy5hbmdsZSkpOnJ9LHRyYW5zbGF0ZVRvT3JpZ2luUG9pbnQ6ZnVuY3Rpb24odCxlLGkpe3ZhciByPXRoaXMudHJhbnNsYXRlVG9HaXZlbk9yaWdpbih0LFwiY2VudGVyXCIsXCJjZW50ZXJcIixlLGkpO3JldHVybiB0aGlzLmFuZ2xlP1MudXRpbC5yb3RhdGVQb2ludChyLHQsdyh0aGlzLmFuZ2xlKSk6cn0sZ2V0Q2VudGVyUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgUy5Qb2ludCh0aGlzLmxlZnQsdGhpcy50b3ApO3JldHVybiB0aGlzLnRyYW5zbGF0ZVRvQ2VudGVyUG9pbnQodCx0aGlzLm9yaWdpblgsdGhpcy5vcmlnaW5ZKX0sZ2V0UG9pbnRCeU9yaWdpbjpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuZ2V0Q2VudGVyUG9pbnQoKTtyZXR1cm4gdGhpcy50cmFuc2xhdGVUb09yaWdpblBvaW50KGksdCxlKX0sdG9Mb2NhbFBvaW50OmZ1bmN0aW9uKHQsZSxpKXt2YXIgcixuLHM9dGhpcy5nZXRDZW50ZXJQb2ludCgpO3JldHVybiByPXZvaWQgMCE9PWUmJnZvaWQgMCE9PWk/dGhpcy50cmFuc2xhdGVUb0dpdmVuT3JpZ2luKHMsXCJjZW50ZXJcIixcImNlbnRlclwiLGUsaSk6bmV3IFMuUG9pbnQodGhpcy5sZWZ0LHRoaXMudG9wKSxuPW5ldyBTLlBvaW50KHQueCx0LnkpLHRoaXMuYW5nbGUmJihuPVMudXRpbC5yb3RhdGVQb2ludChuLHMsLXcodGhpcy5hbmdsZSkpKSxuLnN1YnRyYWN0RXF1YWxzKHIpfSxzZXRQb3NpdGlvbkJ5T3JpZ2luOmZ1bmN0aW9uKHQsZSxpKXt2YXIgcj10aGlzLnRyYW5zbGF0ZVRvQ2VudGVyUG9pbnQodCxlLGkpLG49dGhpcy50cmFuc2xhdGVUb09yaWdpblBvaW50KHIsdGhpcy5vcmlnaW5YLHRoaXMub3JpZ2luWSk7dGhpcy5zZXQoXCJsZWZ0XCIsbi54KSx0aGlzLnNldChcInRvcFwiLG4ueSl9LGFkanVzdFBvc2l0aW9uOmZ1bmN0aW9uKHQpe3ZhciBlLGkscj13KHRoaXMuYW5nbGUpLG49dGhpcy5nZXRTY2FsZWRXaWR0aCgpLHM9Uy51dGlsLmNvcyhyKSpuLG89Uy51dGlsLnNpbihyKSpuO2U9XCJzdHJpbmdcIj09dHlwZW9mIHRoaXMub3JpZ2luWD9iW3RoaXMub3JpZ2luWF06dGhpcy5vcmlnaW5YLS41LGk9XCJzdHJpbmdcIj09dHlwZW9mIHQ/Ylt0XTp0LS41LHRoaXMubGVmdCs9cyooaS1lKSx0aGlzLnRvcCs9byooaS1lKSx0aGlzLnNldENvb3JkcygpLHRoaXMub3JpZ2luWD10fSxfc2V0T3JpZ2luVG9DZW50ZXI6ZnVuY3Rpb24oKXt0aGlzLl9vcmlnaW5hbE9yaWdpblg9dGhpcy5vcmlnaW5YLHRoaXMuX29yaWdpbmFsT3JpZ2luWT10aGlzLm9yaWdpblk7dmFyIHQ9dGhpcy5nZXRDZW50ZXJQb2ludCgpO3RoaXMub3JpZ2luWD1cImNlbnRlclwiLHRoaXMub3JpZ2luWT1cImNlbnRlclwiLHRoaXMubGVmdD10LngsdGhpcy50b3A9dC55fSxfcmVzZXRPcmlnaW46ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRyYW5zbGF0ZVRvT3JpZ2luUG9pbnQodGhpcy5nZXRDZW50ZXJQb2ludCgpLHRoaXMuX29yaWdpbmFsT3JpZ2luWCx0aGlzLl9vcmlnaW5hbE9yaWdpblkpO3RoaXMub3JpZ2luWD10aGlzLl9vcmlnaW5hbE9yaWdpblgsdGhpcy5vcmlnaW5ZPXRoaXMuX29yaWdpbmFsT3JpZ2luWSx0aGlzLmxlZnQ9dC54LHRoaXMudG9wPXQueSx0aGlzLl9vcmlnaW5hbE9yaWdpblg9bnVsbCx0aGlzLl9vcmlnaW5hbE9yaWdpblk9bnVsbH0sX2dldExlZnRUb3BDb29yZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc2xhdGVUb09yaWdpblBvaW50KHRoaXMuZ2V0Q2VudGVyUG9pbnQoKSxcImxlZnRcIixcInRvcFwiKX19KSxmdW5jdGlvbigpe3ZhciB0PVMudXRpbCxlPXQuZGVncmVlc1RvUmFkaWFucyxpPXQubXVsdGlwbHlUcmFuc2Zvcm1NYXRyaWNlcyxyPXQudHJhbnNmb3JtUG9pbnQ7dC5vYmplY3QuZXh0ZW5kKFMuT2JqZWN0LnByb3RvdHlwZSx7b0Nvb3JkczpudWxsLGFDb29yZHM6bnVsbCxsaW5lQ29vcmRzOm51bGwsb3duTWF0cml4Q2FjaGU6bnVsbCxtYXRyaXhDYWNoZTpudWxsLGNvbnRyb2xzOnt9LF9nZXRDb29yZHM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT90P3RoaXMuY2FsY0FDb29yZHMoKTp0aGlzLmNhbGNMaW5lQ29vcmRzKCk6KHRoaXMuYUNvb3JkcyYmdGhpcy5saW5lQ29vcmRzfHx0aGlzLnNldENvb3JkcyghMCksdD90aGlzLmFDb29yZHM6dGhpcy5saW5lQ29vcmRzKX0sZ2V0Q29vcmRzOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGk9dGhpcy5fZ2V0Q29vcmRzKHQsZSksW25ldyBTLlBvaW50KGkudGwueCxpLnRsLnkpLG5ldyBTLlBvaW50KGkudHIueCxpLnRyLnkpLG5ldyBTLlBvaW50KGkuYnIueCxpLmJyLnkpLG5ldyBTLlBvaW50KGkuYmwueCxpLmJsLnkpXTt2YXIgaX0saW50ZXJzZWN0c1dpdGhSZWN0OmZ1bmN0aW9uKHQsZSxpLHIpe3ZhciBuPXRoaXMuZ2V0Q29vcmRzKGkscik7cmV0dXJuXCJJbnRlcnNlY3Rpb25cIj09PVMuSW50ZXJzZWN0aW9uLmludGVyc2VjdFBvbHlnb25SZWN0YW5nbGUobix0LGUpLnN0YXR1c30saW50ZXJzZWN0c1dpdGhPYmplY3Q6ZnVuY3Rpb24odCxlLGkpe3JldHVyblwiSW50ZXJzZWN0aW9uXCI9PT1TLkludGVyc2VjdGlvbi5pbnRlcnNlY3RQb2x5Z29uUG9seWdvbih0aGlzLmdldENvb3JkcyhlLGkpLHQuZ2V0Q29vcmRzKGUsaSkpLnN0YXR1c3x8dC5pc0NvbnRhaW5lZFdpdGhpbk9iamVjdCh0aGlzLGUsaSl8fHRoaXMuaXNDb250YWluZWRXaXRoaW5PYmplY3QodCxlLGkpfSxpc0NvbnRhaW5lZFdpdGhpbk9iamVjdDpmdW5jdGlvbih0LGUsaSl7Zm9yKHZhciByPXRoaXMuZ2V0Q29vcmRzKGUsaSksbj1lP3QuYUNvb3Jkczp0LmxpbmVDb29yZHMscz0wLG89dC5fZ2V0SW1hZ2VMaW5lcyhuKTtzPDQ7cysrKWlmKCF0LmNvbnRhaW5zUG9pbnQocltzXSxvKSlyZXR1cm4hMTtyZXR1cm4hMH0saXNDb250YWluZWRXaXRoaW5SZWN0OmZ1bmN0aW9uKHQsZSxpLHIpe3ZhciBuPXRoaXMuZ2V0Qm91bmRpbmdSZWN0KGkscik7cmV0dXJuIG4ubGVmdD49dC54JiZuLmxlZnQrbi53aWR0aDw9ZS54JiZuLnRvcD49dC55JiZuLnRvcCtuLmhlaWdodDw9ZS55fSxjb250YWluc1BvaW50OmZ1bmN0aW9uKHQsZSxpLHIpe3ZhciBuPXRoaXMuX2dldENvb3JkcyhpLHIpLHM9KGU9ZXx8dGhpcy5fZ2V0SW1hZ2VMaW5lcyhuKSx0aGlzLl9maW5kQ3Jvc3NQb2ludHModCxlKSk7cmV0dXJuIDAhPT1zJiZzJTI9PTF9LGlzT25TY3JlZW46ZnVuY3Rpb24odCl7aWYoIXRoaXMuY2FudmFzKXJldHVybiExO3ZhciBlPXRoaXMuY2FudmFzLnZwdENvb3Jkcy50bCxpPXRoaXMuY2FudmFzLnZwdENvb3Jkcy5icjtyZXR1cm4hIXRoaXMuZ2V0Q29vcmRzKCEwLHQpLnNvbWUoKGZ1bmN0aW9uKHQpe3JldHVybiB0Lng8PWkueCYmdC54Pj1lLngmJnQueTw9aS55JiZ0Lnk+PWUueX0pKXx8ISF0aGlzLmludGVyc2VjdHNXaXRoUmVjdChlLGksITAsdCl8fHRoaXMuX2NvbnRhaW5zQ2VudGVyT2ZDYW52YXMoZSxpLHQpfSxfY29udGFpbnNDZW50ZXJPZkNhbnZhczpmdW5jdGlvbih0LGUsaSl7dmFyIHI9e3g6KHQueCtlLngpLzIseToodC55K2UueSkvMn07cmV0dXJuISF0aGlzLmNvbnRhaW5zUG9pbnQocixudWxsLCEwLGkpfSxpc1BhcnRpYWxseU9uU2NyZWVuOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLmNhbnZhcylyZXR1cm4hMTt2YXIgZT10aGlzLmNhbnZhcy52cHRDb29yZHMudGwsaT10aGlzLmNhbnZhcy52cHRDb29yZHMuYnI7cmV0dXJuISF0aGlzLmludGVyc2VjdHNXaXRoUmVjdChlLGksITAsdCl8fHRoaXMuZ2V0Q29vcmRzKCEwLHQpLmV2ZXJ5KChmdW5jdGlvbih0KXtyZXR1cm4odC54Pj1pLnh8fHQueDw9ZS54KSYmKHQueT49aS55fHx0Lnk8PWUueSl9KSkmJnRoaXMuX2NvbnRhaW5zQ2VudGVyT2ZDYW52YXMoZSxpLHQpfSxfZ2V0SW1hZ2VMaW5lczpmdW5jdGlvbih0KXtyZXR1cm57dG9wbGluZTp7bzp0LnRsLGQ6dC50cn0scmlnaHRsaW5lOntvOnQudHIsZDp0LmJyfSxib3R0b21saW5lOntvOnQuYnIsZDp0LmJsfSxsZWZ0bGluZTp7bzp0LmJsLGQ6dC50bH19fSxfZmluZENyb3NzUG9pbnRzOmZ1bmN0aW9uKHQsZSl7dmFyIGkscixuLHM9MDtmb3IodmFyIG8gaW4gZSlpZighKChuPWVbb10pLm8ueTx0LnkmJm4uZC55PHQueXx8bi5vLnk+PXQueSYmbi5kLnk+PXQueXx8KG4uby54PT09bi5kLngmJm4uby54Pj10Lng/cj1uLm8ueDooaT0obi5kLnktbi5vLnkpLyhuLmQueC1uLm8ueCkscj0tKHQueS0wKnQueC0obi5vLnktaSpuLm8ueCkpLygwLWkpKSxyPj10LngmJihzKz0xKSwyIT09cykpKWJyZWFrO3JldHVybiBzfSxnZXRCb3VuZGluZ1JlY3Q6ZnVuY3Rpb24oZSxpKXt2YXIgcj10aGlzLmdldENvb3JkcyhlLGkpO3JldHVybiB0Lm1ha2VCb3VuZGluZ0JveEZyb21Qb2ludHMocil9LGdldFNjYWxlZFdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFRyYW5zZm9ybWVkRGltZW5zaW9ucygpLnh9LGdldFNjYWxlZEhlaWdodDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRUcmFuc2Zvcm1lZERpbWVuc2lvbnMoKS55fSxfY29uc3RyYWluU2NhbGU6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGguYWJzKHQpPHRoaXMubWluU2NhbGVMaW1pdD90PDA/LXRoaXMubWluU2NhbGVMaW1pdDp0aGlzLm1pblNjYWxlTGltaXQ6MD09PXQ/MWUtNDp0fSxzY2FsZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc2V0KFwic2NhbGVYXCIsdCksdGhpcy5fc2V0KFwic2NhbGVZXCIsdCksdGhpcy5zZXRDb29yZHMoKX0sc2NhbGVUb1dpZHRoOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5nZXRCb3VuZGluZ1JlY3QoZSkud2lkdGgvdGhpcy5nZXRTY2FsZWRXaWR0aCgpO3JldHVybiB0aGlzLnNjYWxlKHQvdGhpcy53aWR0aC9pKX0sc2NhbGVUb0hlaWdodDpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuZ2V0Qm91bmRpbmdSZWN0KGUpLmhlaWdodC90aGlzLmdldFNjYWxlZEhlaWdodCgpO3JldHVybiB0aGlzLnNjYWxlKHQvdGhpcy5oZWlnaHQvaSl9LGNhbGNMaW5lQ29vcmRzOmZ1bmN0aW9uKCl7dmFyIGk9dGhpcy5nZXRWaWV3cG9ydFRyYW5zZm9ybSgpLG49dGhpcy5wYWRkaW5nLHM9ZSh0aGlzLmFuZ2xlKSxvPXQuY29zKHMpKm4sYT10LnNpbihzKSpuLGg9bythLGw9by1hLGM9dGhpcy5jYWxjQUNvb3JkcygpLHU9e3RsOnIoYy50bCxpKSx0cjpyKGMudHIsaSksYmw6cihjLmJsLGkpLGJyOnIoYy5icixpKX07cmV0dXJuIG4mJih1LnRsLngtPWwsdS50bC55LT1oLHUudHIueCs9aCx1LnRyLnktPWwsdS5ibC54LT1oLHUuYmwueSs9bCx1LmJyLngrPWwsdS5ici55Kz1oKSx1fSxjYWxjT0Nvb3JkczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NhbGNSb3RhdGVNYXRyaXgoKSxlPXRoaXMuX2NhbGNUcmFuc2xhdGVNYXRyaXgoKSxyPXRoaXMuZ2V0Vmlld3BvcnRUcmFuc2Zvcm0oKSxuPWkocixlKSxzPWkobix0KSxvPShzPWkocyxbMS9yWzBdLDAsMCwxL3JbM10sMCwwXSksdGhpcy5fY2FsY3VsYXRlQ3VycmVudERpbWVuc2lvbnMoKSksYT17fTtyZXR1cm4gdGhpcy5mb3JFYWNoQ29udHJvbCgoZnVuY3Rpb24odCxlLGkpe2FbZV09dC5wb3NpdGlvbkhhbmRsZXIobyxzLGkpfSkpLGF9LGNhbGNBQ29vcmRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fY2FsY1JvdGF0ZU1hdHJpeCgpLGU9dGhpcy5fY2FsY1RyYW5zbGF0ZU1hdHJpeCgpLG49aShlLHQpLHM9dGhpcy5fZ2V0VHJhbnNmb3JtZWREaW1lbnNpb25zKCksbz1zLngvMixhPXMueS8yO3JldHVybnt0bDpyKHt4Oi1vLHk6LWF9LG4pLHRyOnIoe3g6byx5Oi1hfSxuKSxibDpyKHt4Oi1vLHk6YX0sbiksYnI6cih7eDpvLHk6YX0sbil9fSxzZXRDb29yZHM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYUNvb3Jkcz10aGlzLmNhbGNBQ29vcmRzKCksdGhpcy5saW5lQ29vcmRzPXRoaXMuZ3JvdXA/dGhpcy5hQ29vcmRzOnRoaXMuY2FsY0xpbmVDb29yZHMoKSx0fHwodGhpcy5vQ29vcmRzPXRoaXMuY2FsY09Db29yZHMoKSx0aGlzLl9zZXRDb3JuZXJDb29yZHMmJnRoaXMuX3NldENvcm5lckNvb3JkcygpKSx0aGlzfSxfY2FsY1JvdGF0ZU1hdHJpeDpmdW5jdGlvbigpe3JldHVybiB0LmNhbGNSb3RhdGVNYXRyaXgodGhpcyl9LF9jYWxjVHJhbnNsYXRlTWF0cml4OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRDZW50ZXJQb2ludCgpO3JldHVyblsxLDAsMCwxLHQueCx0LnldfSx0cmFuc2Zvcm1NYXRyaXhLZXk6ZnVuY3Rpb24odCl7dmFyIGU9XCJfXCIsaT1cIlwiO3JldHVybiF0JiZ0aGlzLmdyb3VwJiYoaT10aGlzLmdyb3VwLnRyYW5zZm9ybU1hdHJpeEtleSh0KStlKSxpK3RoaXMudG9wK2UrdGhpcy5sZWZ0K2UrdGhpcy5zY2FsZVgrZSt0aGlzLnNjYWxlWStlK3RoaXMuc2tld1grZSt0aGlzLnNrZXdZK2UrdGhpcy5hbmdsZStlK3RoaXMub3JpZ2luWCtlK3RoaXMub3JpZ2luWStlK3RoaXMud2lkdGgrZSt0aGlzLmhlaWdodCtlK3RoaXMuc3Ryb2tlV2lkdGgrdGhpcy5mbGlwWCt0aGlzLmZsaXBZfSxjYWxjVHJhbnNmb3JtTWF0cml4OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY2FsY093bk1hdHJpeCgpO2lmKHR8fCF0aGlzLmdyb3VwKXJldHVybiBlO3ZhciByPXRoaXMudHJhbnNmb3JtTWF0cml4S2V5KHQpLG49dGhpcy5tYXRyaXhDYWNoZXx8KHRoaXMubWF0cml4Q2FjaGU9e30pO3JldHVybiBuLmtleT09PXI/bi52YWx1ZToodGhpcy5ncm91cCYmKGU9aSh0aGlzLmdyb3VwLmNhbGNUcmFuc2Zvcm1NYXRyaXgoITEpLGUpKSxuLmtleT1yLG4udmFsdWU9ZSxlKX0sY2FsY093bk1hdHJpeDpmdW5jdGlvbigpe3ZhciBlPXRoaXMudHJhbnNmb3JtTWF0cml4S2V5KCEwKSxpPXRoaXMub3duTWF0cml4Q2FjaGV8fCh0aGlzLm93bk1hdHJpeENhY2hlPXt9KTtpZihpLmtleT09PWUpcmV0dXJuIGkudmFsdWU7dmFyIHI9dGhpcy5fY2FsY1RyYW5zbGF0ZU1hdHJpeCgpLG49e2FuZ2xlOnRoaXMuYW5nbGUsdHJhbnNsYXRlWDpyWzRdLHRyYW5zbGF0ZVk6cls1XSxzY2FsZVg6dGhpcy5zY2FsZVgsc2NhbGVZOnRoaXMuc2NhbGVZLHNrZXdYOnRoaXMuc2tld1gsc2tld1k6dGhpcy5za2V3WSxmbGlwWDp0aGlzLmZsaXBYLGZsaXBZOnRoaXMuZmxpcFl9O3JldHVybiBpLmtleT1lLGkudmFsdWU9dC5jb21wb3NlTWF0cml4KG4pLGkudmFsdWV9LF9nZXROb25UcmFuc2Zvcm1lZERpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnN0cm9rZVdpZHRoO3JldHVybnt4OnRoaXMud2lkdGgrdCx5OnRoaXMuaGVpZ2h0K3R9fSxfZ2V0VHJhbnNmb3JtZWREaW1lbnNpb25zOmZ1bmN0aW9uKGUsaSl7dm9pZCAwPT09ZSYmKGU9dGhpcy5za2V3WCksdm9pZCAwPT09aSYmKGk9dGhpcy5za2V3WSk7dmFyIHIsbixzLG89MD09PWUmJjA9PT1pO2lmKHRoaXMuc3Ryb2tlVW5pZm9ybT8obj10aGlzLndpZHRoLHM9dGhpcy5oZWlnaHQpOihuPShyPXRoaXMuX2dldE5vblRyYW5zZm9ybWVkRGltZW5zaW9ucygpKS54LHM9ci55KSxvKXJldHVybiB0aGlzLl9maW5hbGl6ZURpbWVuc2lvbnMobip0aGlzLnNjYWxlWCxzKnRoaXMuc2NhbGVZKTt2YXIgYT10LnNpemVBZnRlclRyYW5zZm9ybShuLHMse3NjYWxlWDp0aGlzLnNjYWxlWCxzY2FsZVk6dGhpcy5zY2FsZVksc2tld1g6ZSxza2V3WTppfSk7cmV0dXJuIHRoaXMuX2ZpbmFsaXplRGltZW5zaW9ucyhhLngsYS55KX0sX2ZpbmFsaXplRGltZW5zaW9uczpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnN0cm9rZVVuaWZvcm0/e3g6dCt0aGlzLnN0cm9rZVdpZHRoLHk6ZSt0aGlzLnN0cm9rZVdpZHRofTp7eDp0LHk6ZX19LF9jYWxjdWxhdGVDdXJyZW50RGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0Vmlld3BvcnRUcmFuc2Zvcm0oKSxlPXRoaXMuX2dldFRyYW5zZm9ybWVkRGltZW5zaW9ucygpO3JldHVybiByKGUsdCwhMCkuc2NhbGFyQWRkKDIqdGhpcy5wYWRkaW5nKX19KX0oKSxTLnV0aWwub2JqZWN0LmV4dGVuZChTLk9iamVjdC5wcm90b3R5cGUse3NlbmRUb0JhY2s6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ncm91cD9TLlN0YXRpY0NhbnZhcy5wcm90b3R5cGUuc2VuZFRvQmFjay5jYWxsKHRoaXMuZ3JvdXAsdGhpcyk6dGhpcy5jYW52YXMmJnRoaXMuY2FudmFzLnNlbmRUb0JhY2sodGhpcyksdGhpc30sYnJpbmdUb0Zyb250OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ3JvdXA/Uy5TdGF0aWNDYW52YXMucHJvdG90eXBlLmJyaW5nVG9Gcm9udC5jYWxsKHRoaXMuZ3JvdXAsdGhpcyk6dGhpcy5jYW52YXMmJnRoaXMuY2FudmFzLmJyaW5nVG9Gcm9udCh0aGlzKSx0aGlzfSxzZW5kQmFja3dhcmRzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdyb3VwP1MuU3RhdGljQ2FudmFzLnByb3RvdHlwZS5zZW5kQmFja3dhcmRzLmNhbGwodGhpcy5ncm91cCx0aGlzLHQpOnRoaXMuY2FudmFzJiZ0aGlzLmNhbnZhcy5zZW5kQmFja3dhcmRzKHRoaXMsdCksdGhpc30sYnJpbmdGb3J3YXJkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdyb3VwP1MuU3RhdGljQ2FudmFzLnByb3RvdHlwZS5icmluZ0ZvcndhcmQuY2FsbCh0aGlzLmdyb3VwLHRoaXMsdCk6dGhpcy5jYW52YXMmJnRoaXMuY2FudmFzLmJyaW5nRm9yd2FyZCh0aGlzLHQpLHRoaXN9LG1vdmVUbzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ncm91cCYmXCJhY3RpdmVTZWxlY3Rpb25cIiE9PXRoaXMuZ3JvdXAudHlwZT9TLlN0YXRpY0NhbnZhcy5wcm90b3R5cGUubW92ZVRvLmNhbGwodGhpcy5ncm91cCx0aGlzLHQpOnRoaXMuY2FudmFzJiZ0aGlzLmNhbnZhcy5tb3ZlVG8odGhpcyx0KSx0aGlzfX0pLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2lmKGUpe2lmKGUudG9MaXZlKXJldHVybiB0K1wiOiB1cmwoI1NWR0lEX1wiK2UuaWQrXCIpOyBcIjt2YXIgaT1uZXcgUy5Db2xvcihlKSxyPXQrXCI6IFwiK2kudG9SZ2IoKStcIjsgXCIsbj1pLmdldEFscGhhKCk7cmV0dXJuIDEhPT1uJiYocis9dCtcIi1vcGFjaXR5OiBcIituLnRvU3RyaW5nKCkrXCI7IFwiKSxyfXJldHVybiB0K1wiOiBub25lOyBcIn12YXIgZT1TLnV0aWwudG9GaXhlZDtTLnV0aWwub2JqZWN0LmV4dGVuZChTLk9iamVjdC5wcm90b3R5cGUse2dldFN2Z1N0eWxlczpmdW5jdGlvbihlKXt2YXIgaT10aGlzLmZpbGxSdWxlP3RoaXMuZmlsbFJ1bGU6XCJub256ZXJvXCIscj10aGlzLnN0cm9rZVdpZHRoP3RoaXMuc3Ryb2tlV2lkdGg6XCIwXCIsbj10aGlzLnN0cm9rZURhc2hBcnJheT90aGlzLnN0cm9rZURhc2hBcnJheS5qb2luKFwiIFwiKTpcIm5vbmVcIixzPXRoaXMuc3Ryb2tlRGFzaE9mZnNldD90aGlzLnN0cm9rZURhc2hPZmZzZXQ6XCIwXCIsbz10aGlzLnN0cm9rZUxpbmVDYXA/dGhpcy5zdHJva2VMaW5lQ2FwOlwiYnV0dFwiLGE9dGhpcy5zdHJva2VMaW5lSm9pbj90aGlzLnN0cm9rZUxpbmVKb2luOlwibWl0ZXJcIixoPXRoaXMuc3Ryb2tlTWl0ZXJMaW1pdD90aGlzLnN0cm9rZU1pdGVyTGltaXQ6XCI0XCIsbD12b2lkIDAhPT10aGlzLm9wYWNpdHk/dGhpcy5vcGFjaXR5OlwiMVwiLGM9dGhpcy52aXNpYmxlP1wiXCI6XCIgdmlzaWJpbGl0eTogaGlkZGVuO1wiLHU9ZT9cIlwiOnRoaXMuZ2V0U3ZnRmlsdGVyKCksZD10KFwiZmlsbFwiLHRoaXMuZmlsbCk7cmV0dXJuW3QoXCJzdHJva2VcIix0aGlzLnN0cm9rZSksXCJzdHJva2Utd2lkdGg6IFwiLHIsXCI7IFwiLFwic3Ryb2tlLWRhc2hhcnJheTogXCIsbixcIjsgXCIsXCJzdHJva2UtbGluZWNhcDogXCIsbyxcIjsgXCIsXCJzdHJva2UtZGFzaG9mZnNldDogXCIscyxcIjsgXCIsXCJzdHJva2UtbGluZWpvaW46IFwiLGEsXCI7IFwiLFwic3Ryb2tlLW1pdGVybGltaXQ6IFwiLGgsXCI7IFwiLGQsXCJmaWxsLXJ1bGU6IFwiLGksXCI7IFwiLFwib3BhY2l0eTogXCIsbCxcIjtcIix1LGNdLmpvaW4oXCJcIil9LGdldFN2Z1NwYW5TdHlsZXM6ZnVuY3Rpb24oZSxpKXt2YXIgcj1cIjsgXCIsbj1lLmZvbnRGYW1pbHk/XCJmb250LWZhbWlseTogXCIrKC0xPT09ZS5mb250RmFtaWx5LmluZGV4T2YoXCInXCIpJiYtMT09PWUuZm9udEZhbWlseS5pbmRleE9mKCdcIicpP1wiJ1wiK2UuZm9udEZhbWlseStcIidcIjplLmZvbnRGYW1pbHkpK3I6XCJcIixzPWUuc3Ryb2tlV2lkdGg/XCJzdHJva2Utd2lkdGg6IFwiK2Uuc3Ryb2tlV2lkdGgrcjpcIlwiLG89ZS5mb250U2l6ZT9cImZvbnQtc2l6ZTogXCIrZS5mb250U2l6ZStcInB4XCIrcjpcIlwiLGE9ZS5mb250U3R5bGU/XCJmb250LXN0eWxlOiBcIitlLmZvbnRTdHlsZStyOlwiXCIsaD1lLmZvbnRXZWlnaHQ/XCJmb250LXdlaWdodDogXCIrZS5mb250V2VpZ2h0K3I6XCJcIixsPWUuZmlsbD90KFwiZmlsbFwiLGUuZmlsbCk6XCJcIixjPWUuc3Ryb2tlP3QoXCJzdHJva2VcIixlLnN0cm9rZSk6XCJcIix1PXRoaXMuZ2V0U3ZnVGV4dERlY29yYXRpb24oZSk7cmV0dXJuIHUmJih1PVwidGV4dC1kZWNvcmF0aW9uOiBcIit1K3IpLFtjLHMsbixvLGEsaCx1LGwsZS5kZWx0YVk/XCJiYXNlbGluZS1zaGlmdDogXCIrLWUuZGVsdGFZK1wiOyBcIjpcIlwiLGk/XCJ3aGl0ZS1zcGFjZTogcHJlOyBcIjpcIlwiXS5qb2luKFwiXCIpfSxnZXRTdmdUZXh0RGVjb3JhdGlvbjpmdW5jdGlvbih0KXtyZXR1cm5bXCJvdmVybGluZVwiLFwidW5kZXJsaW5lXCIsXCJsaW5lLXRocm91Z2hcIl0uZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gdFtlLnJlcGxhY2UoXCItXCIsXCJcIildfSkpLmpvaW4oXCIgXCIpfSxnZXRTdmdGaWx0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zaGFkb3c/XCJmaWx0ZXI6IHVybCgjU1ZHSURfXCIrdGhpcy5zaGFkb3cuaWQrXCIpO1wiOlwiXCJ9LGdldFN2Z0NvbW1vbnM6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5pZD8naWQ9XCInK3RoaXMuaWQrJ1wiICc6XCJcIix0aGlzLmNsaXBQYXRoPydjbGlwLXBhdGg9XCJ1cmwoIycrdGhpcy5jbGlwUGF0aC5jbGlwUGF0aElkKycpXCIgJzpcIlwiXS5qb2luKFwiXCIpfSxnZXRTdmdUcmFuc2Zvcm06ZnVuY3Rpb24odCxlKXt2YXIgaT10P3RoaXMuY2FsY1RyYW5zZm9ybU1hdHJpeCgpOnRoaXMuY2FsY093bk1hdHJpeCgpO3JldHVybid0cmFuc2Zvcm09XCInK1MudXRpbC5tYXRyaXhUb1NWRyhpKSsoZXx8XCJcIikrJ1wiICd9LF9zZXRTVkdCZzpmdW5jdGlvbih0KXtpZih0aGlzLmJhY2tncm91bmRDb2xvcil7dmFyIGk9Uy5PYmplY3QuTlVNX0ZSQUNUSU9OX0RJR0lUUzt0LnB1c2goXCJcXHRcXHQ8cmVjdCBcIix0aGlzLl9nZXRGaWxsQXR0cmlidXRlcyh0aGlzLmJhY2tncm91bmRDb2xvciksJyB4PVwiJyxlKC10aGlzLndpZHRoLzIsaSksJ1wiIHk9XCInLGUoLXRoaXMuaGVpZ2h0LzIsaSksJ1wiIHdpZHRoPVwiJyxlKHRoaXMud2lkdGgsaSksJ1wiIGhlaWdodD1cIicsZSh0aGlzLmhlaWdodCxpKSwnXCI+PC9yZWN0PlxcbicpfX0sdG9TVkc6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NyZWF0ZUJhc2VTVkdNYXJrdXAodGhpcy5fdG9TVkcodCkse3Jldml2ZXI6dH0pfSx0b0NsaXBQYXRoU1ZHOmZ1bmN0aW9uKHQpe3JldHVyblwiXFx0XCIrdGhpcy5fY3JlYXRlQmFzZUNsaXBQYXRoU1ZHTWFya3VwKHRoaXMuX3RvU1ZHKHQpLHtyZXZpdmVyOnR9KX0sX2NyZWF0ZUJhc2VDbGlwUGF0aFNWR01hcmt1cDpmdW5jdGlvbih0LGUpe3ZhciBpPShlPWV8fHt9KS5yZXZpdmVyLHI9ZS5hZGRpdGlvbmFsVHJhbnNmb3JtfHxcIlwiLG49W3RoaXMuZ2V0U3ZnVHJhbnNmb3JtKCEwLHIpLHRoaXMuZ2V0U3ZnQ29tbW9ucygpXS5qb2luKFwiXCIpLHM9dC5pbmRleE9mKFwiQ09NTU9OX1BBUlRTXCIpO3JldHVybiB0W3NdPW4saT9pKHQuam9pbihcIlwiKSk6dC5qb2luKFwiXCIpfSxfY3JlYXRlQmFzZVNWR01hcmt1cDpmdW5jdGlvbih0LGUpe3ZhciBpLHIsbj0oZT1lfHx7fSkubm9TdHlsZSxzPWUucmV2aXZlcixvPW4/XCJcIjonc3R5bGU9XCInK3RoaXMuZ2V0U3ZnU3R5bGVzKCkrJ1wiICcsYT1lLndpdGhTaGFkb3c/J3N0eWxlPVwiJyt0aGlzLmdldFN2Z0ZpbHRlcigpKydcIiAnOlwiXCIsaD10aGlzLmNsaXBQYXRoLGw9dGhpcy5zdHJva2VVbmlmb3JtPyd2ZWN0b3ItZWZmZWN0PVwibm9uLXNjYWxpbmctc3Ryb2tlXCIgJzpcIlwiLGM9aCYmaC5hYnNvbHV0ZVBvc2l0aW9uZWQsdT10aGlzLnN0cm9rZSxkPXRoaXMuZmlsbCxmPXRoaXMuc2hhZG93LGc9W10sbT10LmluZGV4T2YoXCJDT01NT05fUEFSVFNcIikscD1lLmFkZGl0aW9uYWxUcmFuc2Zvcm07cmV0dXJuIGgmJihoLmNsaXBQYXRoSWQ9XCJDTElQUEFUSF9cIitTLk9iamVjdC5fX3VpZCsrLHI9JzxjbGlwUGF0aCBpZD1cIicraC5jbGlwUGF0aElkKydcIiA+XFxuJytoLnRvQ2xpcFBhdGhTVkcocykrXCI8L2NsaXBQYXRoPlxcblwiKSxjJiZnLnB1c2goXCI8ZyBcIixhLHRoaXMuZ2V0U3ZnQ29tbW9ucygpLFwiID5cXG5cIiksZy5wdXNoKFwiPGcgXCIsdGhpcy5nZXRTdmdUcmFuc2Zvcm0oITEpLGM/XCJcIjphK3RoaXMuZ2V0U3ZnQ29tbW9ucygpLFwiID5cXG5cIiksaT1bbyxsLG4/XCJcIjp0aGlzLmFkZFBhaW50T3JkZXIoKSxcIiBcIixwPyd0cmFuc2Zvcm09XCInK3ArJ1wiICc6XCJcIl0uam9pbihcIlwiKSx0W21dPWksZCYmZC50b0xpdmUmJmcucHVzaChkLnRvU1ZHKHRoaXMpKSx1JiZ1LnRvTGl2ZSYmZy5wdXNoKHUudG9TVkcodGhpcykpLGYmJmcucHVzaChmLnRvU1ZHKHRoaXMpKSxoJiZnLnB1c2gociksZy5wdXNoKHQuam9pbihcIlwiKSksZy5wdXNoKFwiPC9nPlxcblwiKSxjJiZnLnB1c2goXCI8L2c+XFxuXCIpLHM/cyhnLmpvaW4oXCJcIikpOmcuam9pbihcIlwiKX0sYWRkUGFpbnRPcmRlcjpmdW5jdGlvbigpe3JldHVyblwiZmlsbFwiIT09dGhpcy5wYWludEZpcnN0PycgcGFpbnQtb3JkZXI9XCInK3RoaXMucGFpbnRGaXJzdCsnXCIgJzpcIlwifX0pfSgpLGZ1bmN0aW9uKCl7dmFyIHQ9Uy51dGlsLm9iamVjdC5leHRlbmQsZT1cInN0YXRlUHJvcGVydGllc1wiO2Z1bmN0aW9uIGkoZSxpLHIpe3ZhciBuPXt9O3IuZm9yRWFjaCgoZnVuY3Rpb24odCl7blt0XT1lW3RdfSkpLHQoZVtpXSxuLCEwKX1mdW5jdGlvbiByKHQsZSxpKXtpZih0PT09ZSlyZXR1cm4hMDtpZihBcnJheS5pc0FycmF5KHQpKXtpZighQXJyYXkuaXNBcnJheShlKXx8dC5sZW5ndGghPT1lLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIG49MCxzPXQubGVuZ3RoO248cztuKyspaWYoIXIodFtuXSxlW25dKSlyZXR1cm4hMTtyZXR1cm4hMH1pZih0JiZcIm9iamVjdFwiPT10eXBlb2YgdCl7dmFyIG8sYT1PYmplY3Qua2V5cyh0KTtpZighZXx8XCJvYmplY3RcIiE9dHlwZW9mIGV8fCFpJiZhLmxlbmd0aCE9PU9iamVjdC5rZXlzKGUpLmxlbmd0aClyZXR1cm4hMTtmb3Iobj0wLHM9YS5sZW5ndGg7bjxzO24rKylpZihcImNhbnZhc1wiIT09KG89YVtuXSkmJlwiZ3JvdXBcIiE9PW8mJiFyKHRbb10sZVtvXSkpcmV0dXJuITE7cmV0dXJuITB9fVMudXRpbC5vYmplY3QuZXh0ZW5kKFMuT2JqZWN0LnByb3RvdHlwZSx7aGFzU3RhdGVDaGFuZ2VkOmZ1bmN0aW9uKHQpe3ZhciBpPVwiX1wiKyh0PXR8fGUpO3JldHVybiBPYmplY3Qua2V5cyh0aGlzW2ldKS5sZW5ndGg8dGhpc1t0XS5sZW5ndGh8fCFyKHRoaXNbaV0sdGhpcywhMCl9LHNhdmVTdGF0ZTpmdW5jdGlvbih0KXt2YXIgcj10JiZ0LnByb3BlcnR5U2V0fHxlLG49XCJfXCIrcjtyZXR1cm4gdGhpc1tuXT8oaSh0aGlzLG4sdGhpc1tyXSksdCYmdC5zdGF0ZVByb3BlcnRpZXMmJmkodGhpcyxuLHQuc3RhdGVQcm9wZXJ0aWVzKSx0aGlzKTp0aGlzLnNldHVwU3RhdGUodCl9LHNldHVwU3RhdGU6ZnVuY3Rpb24odCl7dmFyIGk9KHQ9dHx8e30pLnByb3BlcnR5U2V0fHxlO3JldHVybiB0LnByb3BlcnR5U2V0PWksdGhpc1tcIl9cIitpXT17fSx0aGlzLnNhdmVTdGF0ZSh0KSx0aGlzfX0pfSgpLGZ1bmN0aW9uKCl7dmFyIHQ9Uy51dGlsLmRlZ3JlZXNUb1JhZGlhbnM7Uy51dGlsLm9iamVjdC5leHRlbmQoUy5PYmplY3QucHJvdG90eXBlLHtfZmluZFRhcmdldENvcm5lcjpmdW5jdGlvbih0LGUpe2lmKCF0aGlzLmhhc0NvbnRyb2xzfHx0aGlzLmdyb3VwfHwhdGhpcy5jYW52YXN8fHRoaXMuY2FudmFzLl9hY3RpdmVPYmplY3QhPT10aGlzKXJldHVybiExO3ZhciBpLHIsbixzPXQueCxvPXQueSxhPU9iamVjdC5rZXlzKHRoaXMub0Nvb3JkcyksaD1hLmxlbmd0aC0xO2Zvcih0aGlzLl9fY29ybmVyPTA7aD49MDtoLS0paWYobj1hW2hdLHRoaXMuaXNDb250cm9sVmlzaWJsZShuKSYmKHI9dGhpcy5fZ2V0SW1hZ2VMaW5lcyhlP3RoaXMub0Nvb3Jkc1tuXS50b3VjaENvcm5lcjp0aGlzLm9Db29yZHNbbl0uY29ybmVyKSwwIT09KGk9dGhpcy5fZmluZENyb3NzUG9pbnRzKHt4OnMseTpvfSxyKSkmJmklMj09MSkpcmV0dXJuIHRoaXMuX19jb3JuZXI9bixuO3JldHVybiExfSxmb3JFYWNoQ29udHJvbDpmdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5jb250cm9scyl0KHRoaXMuY29udHJvbHNbZV0sZSx0aGlzKX0sX3NldENvcm5lckNvb3JkczpmdW5jdGlvbigpe3ZhciB0PXRoaXMub0Nvb3Jkcztmb3IodmFyIGUgaW4gdCl7dmFyIGk9dGhpcy5jb250cm9sc1tlXTt0W2VdLmNvcm5lcj1pLmNhbGNDb3JuZXJDb29yZHModGhpcy5hbmdsZSx0aGlzLmNvcm5lclNpemUsdFtlXS54LHRbZV0ueSwhMSksdFtlXS50b3VjaENvcm5lcj1pLmNhbGNDb3JuZXJDb29yZHModGhpcy5hbmdsZSx0aGlzLnRvdWNoQ29ybmVyU2l6ZSx0W2VdLngsdFtlXS55LCEwKX19LGRyYXdTZWxlY3Rpb25CYWNrZ3JvdW5kOmZ1bmN0aW9uKGUpe2lmKCF0aGlzLnNlbGVjdGlvbkJhY2tncm91bmRDb2xvcnx8dGhpcy5jYW52YXMmJiF0aGlzLmNhbnZhcy5pbnRlcmFjdGl2ZXx8dGhpcy5jYW52YXMmJnRoaXMuY2FudmFzLl9hY3RpdmVPYmplY3QhPT10aGlzKXJldHVybiB0aGlzO2Uuc2F2ZSgpO3ZhciBpPXRoaXMuZ2V0Q2VudGVyUG9pbnQoKSxyPXRoaXMuX2NhbGN1bGF0ZUN1cnJlbnREaW1lbnNpb25zKCksbj10aGlzLmNhbnZhcy52aWV3cG9ydFRyYW5zZm9ybTtyZXR1cm4gZS50cmFuc2xhdGUoaS54LGkueSksZS5zY2FsZSgxL25bMF0sMS9uWzNdKSxlLnJvdGF0ZSh0KHRoaXMuYW5nbGUpKSxlLmZpbGxTdHlsZT10aGlzLnNlbGVjdGlvbkJhY2tncm91bmRDb2xvcixlLmZpbGxSZWN0KC1yLngvMiwtci55LzIsci54LHIueSksZS5yZXN0b3JlKCksdGhpc30sZHJhd0JvcmRlcnM6ZnVuY3Rpb24odCxlKXtlPWV8fHt9O3ZhciBpPXRoaXMuX2NhbGN1bGF0ZUN1cnJlbnREaW1lbnNpb25zKCkscj10aGlzLmJvcmRlclNjYWxlRmFjdG9yLG49aS54K3Iscz1pLnkrcixvPXZvaWQgMCE9PWUuaGFzQ29udHJvbHM/ZS5oYXNDb250cm9sczp0aGlzLmhhc0NvbnRyb2xzLGE9ITE7cmV0dXJuIHQuc2F2ZSgpLHQuc3Ryb2tlU3R5bGU9ZS5ib3JkZXJDb2xvcnx8dGhpcy5ib3JkZXJDb2xvcix0aGlzLl9zZXRMaW5lRGFzaCh0LGUuYm9yZGVyRGFzaEFycmF5fHx0aGlzLmJvcmRlckRhc2hBcnJheSksdC5zdHJva2VSZWN0KC1uLzIsLXMvMixuLHMpLG8mJih0LmJlZ2luUGF0aCgpLHRoaXMuZm9yRWFjaENvbnRyb2woKGZ1bmN0aW9uKGUsaSxyKXtlLndpdGhDb25uZWN0aW9uJiZlLmdldFZpc2liaWxpdHkocixpKSYmKGE9ITAsdC5tb3ZlVG8oZS54Km4sZS55KnMpLHQubGluZVRvKGUueCpuK2Uub2Zmc2V0WCxlLnkqcytlLm9mZnNldFkpKX0pKSxhJiZ0LnN0cm9rZSgpKSx0LnJlc3RvcmUoKSx0aGlzfSxkcmF3Qm9yZGVyc0luR3JvdXA6ZnVuY3Rpb24odCxlLGkpe2k9aXx8e307dmFyIHI9Uy51dGlsLnNpemVBZnRlclRyYW5zZm9ybSh0aGlzLndpZHRoLHRoaXMuaGVpZ2h0LGUpLG49dGhpcy5zdHJva2VXaWR0aCxzPXRoaXMuc3Ryb2tlVW5pZm9ybSxvPXRoaXMuYm9yZGVyU2NhbGVGYWN0b3IsYT1yLngrbioocz90aGlzLmNhbnZhcy5nZXRab29tKCk6ZS5zY2FsZVgpK28saD1yLnkrbioocz90aGlzLmNhbnZhcy5nZXRab29tKCk6ZS5zY2FsZVkpK287cmV0dXJuIHQuc2F2ZSgpLHRoaXMuX3NldExpbmVEYXNoKHQsaS5ib3JkZXJEYXNoQXJyYXl8fHRoaXMuYm9yZGVyRGFzaEFycmF5KSx0LnN0cm9rZVN0eWxlPWkuYm9yZGVyQ29sb3J8fHRoaXMuYm9yZGVyQ29sb3IsdC5zdHJva2VSZWN0KC1hLzIsLWgvMixhLGgpLHQucmVzdG9yZSgpLHRoaXN9LGRyYXdDb250cm9sczpmdW5jdGlvbih0LGUpe2U9ZXx8e30sdC5zYXZlKCk7dmFyIGkscixuPXRoaXMuY2FudmFzLmdldFJldGluYVNjYWxpbmcoKTtyZXR1cm4gdC5zZXRUcmFuc2Zvcm0obiwwLDAsbiwwLDApLHQuc3Ryb2tlU3R5bGU9dC5maWxsU3R5bGU9ZS5jb3JuZXJDb2xvcnx8dGhpcy5jb3JuZXJDb2xvcix0aGlzLnRyYW5zcGFyZW50Q29ybmVyc3x8KHQuc3Ryb2tlU3R5bGU9ZS5jb3JuZXJTdHJva2VDb2xvcnx8dGhpcy5jb3JuZXJTdHJva2VDb2xvciksdGhpcy5fc2V0TGluZURhc2godCxlLmNvcm5lckRhc2hBcnJheXx8dGhpcy5jb3JuZXJEYXNoQXJyYXkpLHRoaXMuc2V0Q29vcmRzKCksdGhpcy5ncm91cCYmKGk9dGhpcy5ncm91cC5jYWxjVHJhbnNmb3JtTWF0cml4KCkpLHRoaXMuZm9yRWFjaENvbnRyb2woKGZ1bmN0aW9uKG4scyxvKXtyPW8ub0Nvb3Jkc1tzXSxuLmdldFZpc2liaWxpdHkobyxzKSYmKGkmJihyPVMudXRpbC50cmFuc2Zvcm1Qb2ludChyLGkpKSxuLnJlbmRlcih0LHIueCxyLnksZSxvKSl9KSksdC5yZXN0b3JlKCksdGhpc30saXNDb250cm9sVmlzaWJsZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250cm9sc1t0XSYmdGhpcy5jb250cm9sc1t0XS5nZXRWaXNpYmlsaXR5KHRoaXMsdCl9LHNldENvbnRyb2xWaXNpYmxlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2NvbnRyb2xzVmlzaWJpbGl0eXx8KHRoaXMuX2NvbnRyb2xzVmlzaWJpbGl0eT17fSksdGhpcy5fY29udHJvbHNWaXNpYmlsaXR5W3RdPWUsdGhpc30sc2V0Q29udHJvbHNWaXNpYmlsaXR5OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0fHwodD17fSksdCl0aGlzLnNldENvbnRyb2xWaXNpYmxlKGUsdFtlXSk7cmV0dXJuIHRoaXN9LG9uRGVzZWxlY3Q6ZnVuY3Rpb24oKXt9LG9uU2VsZWN0OmZ1bmN0aW9uKCl7fX0pfSgpLFMudXRpbC5vYmplY3QuZXh0ZW5kKFMuU3RhdGljQ2FudmFzLnByb3RvdHlwZSx7RlhfRFVSQVRJT046NTAwLGZ4Q2VudGVyT2JqZWN0SDpmdW5jdGlvbih0LGUpe3ZhciBpPWZ1bmN0aW9uKCl7fSxyPShlPWV8fHt9KS5vbkNvbXBsZXRlfHxpLG49ZS5vbkNoYW5nZXx8aSxzPXRoaXM7cmV0dXJuIFMudXRpbC5hbmltYXRlKHt0YXJnZXQ6dGhpcyxzdGFydFZhbHVlOnQubGVmdCxlbmRWYWx1ZTp0aGlzLmdldENlbnRlclBvaW50KCkueCxkdXJhdGlvbjp0aGlzLkZYX0RVUkFUSU9OLG9uQ2hhbmdlOmZ1bmN0aW9uKGUpe3Quc2V0KFwibGVmdFwiLGUpLHMucmVxdWVzdFJlbmRlckFsbCgpLG4oKX0sb25Db21wbGV0ZTpmdW5jdGlvbigpe3Quc2V0Q29vcmRzKCkscigpfX0pfSxmeENlbnRlck9iamVjdFY6ZnVuY3Rpb24odCxlKXt2YXIgaT1mdW5jdGlvbigpe30scj0oZT1lfHx7fSkub25Db21wbGV0ZXx8aSxuPWUub25DaGFuZ2V8fGkscz10aGlzO3JldHVybiBTLnV0aWwuYW5pbWF0ZSh7dGFyZ2V0OnRoaXMsc3RhcnRWYWx1ZTp0LnRvcCxlbmRWYWx1ZTp0aGlzLmdldENlbnRlclBvaW50KCkueSxkdXJhdGlvbjp0aGlzLkZYX0RVUkFUSU9OLG9uQ2hhbmdlOmZ1bmN0aW9uKGUpe3Quc2V0KFwidG9wXCIsZSkscy5yZXF1ZXN0UmVuZGVyQWxsKCksbigpfSxvbkNvbXBsZXRlOmZ1bmN0aW9uKCl7dC5zZXRDb29yZHMoKSxyKCl9fSl9LGZ4UmVtb3ZlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9ZnVuY3Rpb24oKXt9LHI9KGU9ZXx8e30pLm9uQ29tcGxldGV8fGksbj1lLm9uQ2hhbmdlfHxpLHM9dGhpcztyZXR1cm4gUy51dGlsLmFuaW1hdGUoe3RhcmdldDp0aGlzLHN0YXJ0VmFsdWU6dC5vcGFjaXR5LGVuZFZhbHVlOjAsZHVyYXRpb246dGhpcy5GWF9EVVJBVElPTixvbkNoYW5nZTpmdW5jdGlvbihlKXt0LnNldChcIm9wYWNpdHlcIixlKSxzLnJlcXVlc3RSZW5kZXJBbGwoKSxuKCl9LG9uQ29tcGxldGU6ZnVuY3Rpb24oKXtzLnJlbW92ZSh0KSxyKCl9fSl9fSksUy51dGlsLm9iamVjdC5leHRlbmQoUy5PYmplY3QucHJvdG90eXBlLHthbmltYXRlOmZ1bmN0aW9uKCl7aWYoYXJndW1lbnRzWzBdJiZcIm9iamVjdFwiPT10eXBlb2YgYXJndW1lbnRzWzBdKXt2YXIgdCxlLGk9W10scj1bXTtmb3IodCBpbiBhcmd1bWVudHNbMF0paS5wdXNoKHQpO2Zvcih2YXIgbj0wLHM9aS5sZW5ndGg7bjxzO24rKyl0PWlbbl0sZT1uIT09cy0xLHIucHVzaCh0aGlzLl9hbmltYXRlKHQsYXJndW1lbnRzWzBdW3RdLGFyZ3VtZW50c1sxXSxlKSk7cmV0dXJuIHJ9cmV0dXJuIHRoaXMuX2FuaW1hdGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxfYW5pbWF0ZTpmdW5jdGlvbih0LGUsaSxyKXt2YXIgbixzPXRoaXM7ZT1lLnRvU3RyaW5nKCksaT1pP1MudXRpbC5vYmplY3QuY2xvbmUoaSk6e30sfnQuaW5kZXhPZihcIi5cIikmJihuPXQuc3BsaXQoXCIuXCIpKTt2YXIgbz1zLmNvbG9yUHJvcGVydGllcy5pbmRleE9mKHQpPi0xfHxuJiZzLmNvbG9yUHJvcGVydGllcy5pbmRleE9mKG5bMV0pPi0xLGE9bj90aGlzLmdldChuWzBdKVtuWzFdXTp0aGlzLmdldCh0KTtcImZyb21cImluIGl8fChpLmZyb209YSksb3x8KGU9fmUuaW5kZXhPZihcIj1cIik/YStwYXJzZUZsb2F0KGUucmVwbGFjZShcIj1cIixcIlwiKSk6cGFyc2VGbG9hdChlKSk7dmFyIGg9e3RhcmdldDp0aGlzLHN0YXJ0VmFsdWU6aS5mcm9tLGVuZFZhbHVlOmUsYnlWYWx1ZTppLmJ5LGVhc2luZzppLmVhc2luZyxkdXJhdGlvbjppLmR1cmF0aW9uLGFib3J0OmkuYWJvcnQmJmZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gaS5hYm9ydC5jYWxsKHMsdCxlLHIpfSxvbkNoYW5nZTpmdW5jdGlvbihlLG8sYSl7bj9zW25bMF1dW25bMV1dPWU6cy5zZXQodCxlKSxyfHxpLm9uQ2hhbmdlJiZpLm9uQ2hhbmdlKGUsbyxhKX0sb25Db21wbGV0ZTpmdW5jdGlvbih0LGUsbil7cnx8KHMuc2V0Q29vcmRzKCksaS5vbkNvbXBsZXRlJiZpLm9uQ29tcGxldGUodCxlLG4pKX19O3JldHVybiBvP1MudXRpbC5hbmltYXRlQ29sb3IoaC5zdGFydFZhbHVlLGguZW5kVmFsdWUsaC5kdXJhdGlvbixoKTpTLnV0aWwuYW5pbWF0ZShoKX19KSxmdW5jdGlvbih0KXt2YXIgZT10LmZhYnJpY3x8KHQuZmFicmljPXt9KSxpPWUudXRpbC5vYmplY3QuZXh0ZW5kLHI9ZS51dGlsLm9iamVjdC5jbG9uZSxuPXt4MToxLHgyOjEseTE6MSx5MjoxfTtmdW5jdGlvbiBzKHQsZSl7dmFyIGk9dC5vcmlnaW4scj10LmF4aXMxLG49dC5heGlzMixzPXQuZGltZW5zaW9uLG89ZS5uZWFyZXN0LGE9ZS5jZW50ZXIsaD1lLmZhcnRoZXN0O3JldHVybiBmdW5jdGlvbigpe3N3aXRjaCh0aGlzLmdldChpKSl7Y2FzZSBvOnJldHVybiBNYXRoLm1pbih0aGlzLmdldChyKSx0aGlzLmdldChuKSk7Y2FzZSBhOnJldHVybiBNYXRoLm1pbih0aGlzLmdldChyKSx0aGlzLmdldChuKSkrLjUqdGhpcy5nZXQocyk7Y2FzZSBoOnJldHVybiBNYXRoLm1heCh0aGlzLmdldChyKSx0aGlzLmdldChuKSl9fX1lLkxpbmU/ZS53YXJuKFwiZmFicmljLkxpbmUgaXMgYWxyZWFkeSBkZWZpbmVkXCIpOihlLkxpbmU9ZS51dGlsLmNyZWF0ZUNsYXNzKGUuT2JqZWN0LHt0eXBlOlwibGluZVwiLHgxOjAseTE6MCx4MjowLHkyOjAsY2FjaGVQcm9wZXJ0aWVzOmUuT2JqZWN0LnByb3RvdHlwZS5jYWNoZVByb3BlcnRpZXMuY29uY2F0KFwieDFcIixcIngyXCIsXCJ5MVwiLFwieTJcIiksaW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUpe3R8fCh0PVswLDAsMCwwXSksdGhpcy5jYWxsU3VwZXIoXCJpbml0aWFsaXplXCIsZSksdGhpcy5zZXQoXCJ4MVwiLHRbMF0pLHRoaXMuc2V0KFwieTFcIix0WzFdKSx0aGlzLnNldChcIngyXCIsdFsyXSksdGhpcy5zZXQoXCJ5MlwiLHRbM10pLHRoaXMuX3NldFdpZHRoSGVpZ2h0KGUpfSxfc2V0V2lkdGhIZWlnaHQ6ZnVuY3Rpb24odCl7dHx8KHQ9e30pLHRoaXMud2lkdGg9TWF0aC5hYnModGhpcy54Mi10aGlzLngxKSx0aGlzLmhlaWdodD1NYXRoLmFicyh0aGlzLnkyLXRoaXMueTEpLHRoaXMubGVmdD1cImxlZnRcImluIHQ/dC5sZWZ0OnRoaXMuX2dldExlZnRUb09yaWdpblgoKSx0aGlzLnRvcD1cInRvcFwiaW4gdD90LnRvcDp0aGlzLl9nZXRUb3BUb09yaWdpblkoKX0sX3NldDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmNhbGxTdXBlcihcIl9zZXRcIix0LGUpLHZvaWQgMCE9PW5bdF0mJnRoaXMuX3NldFdpZHRoSGVpZ2h0KCksdGhpc30sX2dldExlZnRUb09yaWdpblg6cyh7b3JpZ2luOlwib3JpZ2luWFwiLGF4aXMxOlwieDFcIixheGlzMjpcIngyXCIsZGltZW5zaW9uOlwid2lkdGhcIn0se25lYXJlc3Q6XCJsZWZ0XCIsY2VudGVyOlwiY2VudGVyXCIsZmFydGhlc3Q6XCJyaWdodFwifSksX2dldFRvcFRvT3JpZ2luWTpzKHtvcmlnaW46XCJvcmlnaW5ZXCIsYXhpczE6XCJ5MVwiLGF4aXMyOlwieTJcIixkaW1lbnNpb246XCJoZWlnaHRcIn0se25lYXJlc3Q6XCJ0b3BcIixjZW50ZXI6XCJjZW50ZXJcIixmYXJ0aGVzdDpcImJvdHRvbVwifSksX3JlbmRlcjpmdW5jdGlvbih0KXt0LmJlZ2luUGF0aCgpO3ZhciBlPXRoaXMuY2FsY0xpbmVQb2ludHMoKTt0Lm1vdmVUbyhlLngxLGUueTEpLHQubGluZVRvKGUueDIsZS55MiksdC5saW5lV2lkdGg9dGhpcy5zdHJva2VXaWR0aDt2YXIgaT10LnN0cm9rZVN0eWxlO3Quc3Ryb2tlU3R5bGU9dGhpcy5zdHJva2V8fHQuZmlsbFN0eWxlLHRoaXMuc3Ryb2tlJiZ0aGlzLl9yZW5kZXJTdHJva2UodCksdC5zdHJva2VTdHlsZT1pfSxfZmluZENlbnRlckZyb21FbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJue3g6KHRoaXMueDErdGhpcy54MikvMix5Oih0aGlzLnkxK3RoaXMueTIpLzJ9fSx0b09iamVjdDpmdW5jdGlvbih0KXtyZXR1cm4gaSh0aGlzLmNhbGxTdXBlcihcInRvT2JqZWN0XCIsdCksdGhpcy5jYWxjTGluZVBvaW50cygpKX0sX2dldE5vblRyYW5zZm9ybWVkRGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuY2FsbFN1cGVyKFwiX2dldE5vblRyYW5zZm9ybWVkRGltZW5zaW9uc1wiKTtyZXR1cm5cImJ1dHRcIj09PXRoaXMuc3Ryb2tlTGluZUNhcCYmKDA9PT10aGlzLndpZHRoJiYodC55LT10aGlzLnN0cm9rZVdpZHRoKSwwPT09dGhpcy5oZWlnaHQmJih0LngtPXRoaXMuc3Ryb2tlV2lkdGgpKSx0fSxjYWxjTGluZVBvaW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXMueDE8PXRoaXMueDI/LTE6MSxlPXRoaXMueTE8PXRoaXMueTI/LTE6MSxpPXQqdGhpcy53aWR0aCouNSxyPWUqdGhpcy5oZWlnaHQqLjU7cmV0dXJue3gxOmkseDI6dCp0aGlzLndpZHRoKi0uNSx5MTpyLHkyOmUqdGhpcy5oZWlnaHQqLS41fX0sX3RvU1ZHOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jYWxjTGluZVBvaW50cygpO3JldHVybltcIjxsaW5lIFwiLFwiQ09NTU9OX1BBUlRTXCIsJ3gxPVwiJyx0LngxLCdcIiB5MT1cIicsdC55MSwnXCIgeDI9XCInLHQueDIsJ1wiIHkyPVwiJyx0LnkyLCdcIiAvPlxcbiddfX0pLGUuTGluZS5BVFRSSUJVVEVfTkFNRVM9ZS5TSEFSRURfQVRUUklCVVRFUy5jb25jYXQoXCJ4MSB5MSB4MiB5MlwiLnNwbGl0KFwiIFwiKSksZS5MaW5lLmZyb21FbGVtZW50PWZ1bmN0aW9uKHQscixuKXtuPW58fHt9O3ZhciBzPWUucGFyc2VBdHRyaWJ1dGVzKHQsZS5MaW5lLkFUVFJJQlVURV9OQU1FUyksbz1bcy54MXx8MCxzLnkxfHwwLHMueDJ8fDAscy55Mnx8MF07cihuZXcgZS5MaW5lKG8saShzLG4pKSl9LGUuTGluZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKHQsaSl7dmFyIG49cih0LCEwKTtuLnBvaW50cz1bdC54MSx0LnkxLHQueDIsdC55Ml0sZS5PYmplY3QuX2Zyb21PYmplY3QoXCJMaW5lXCIsbiwoZnVuY3Rpb24odCl7ZGVsZXRlIHQucG9pbnRzLGkmJmkodCl9KSxcInBvaW50c1wiKX0pfShlKSxmdW5jdGlvbih0KXt2YXIgZT10LmZhYnJpY3x8KHQuZmFicmljPXt9KSxpPWUudXRpbC5kZWdyZWVzVG9SYWRpYW5zO2UuQ2lyY2xlP2Uud2FybihcImZhYnJpYy5DaXJjbGUgaXMgYWxyZWFkeSBkZWZpbmVkLlwiKTooZS5DaXJjbGU9ZS51dGlsLmNyZWF0ZUNsYXNzKGUuT2JqZWN0LHt0eXBlOlwiY2lyY2xlXCIscmFkaXVzOjAsc3RhcnRBbmdsZTowLGVuZEFuZ2xlOjM2MCxjYWNoZVByb3BlcnRpZXM6ZS5PYmplY3QucHJvdG90eXBlLmNhY2hlUHJvcGVydGllcy5jb25jYXQoXCJyYWRpdXNcIixcInN0YXJ0QW5nbGVcIixcImVuZEFuZ2xlXCIpLF9zZXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5jYWxsU3VwZXIoXCJfc2V0XCIsdCxlKSxcInJhZGl1c1wiPT09dCYmdGhpcy5zZXRSYWRpdXMoZSksdGhpc30sdG9PYmplY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2FsbFN1cGVyKFwidG9PYmplY3RcIixbXCJyYWRpdXNcIixcInN0YXJ0QW5nbGVcIixcImVuZEFuZ2xlXCJdLmNvbmNhdCh0KSl9LF90b1NWRzpmdW5jdGlvbigpe3ZhciB0LHI9KHRoaXMuZW5kQW5nbGUtdGhpcy5zdGFydEFuZ2xlKSUzNjA7aWYoMD09PXIpdD1bXCI8Y2lyY2xlIFwiLFwiQ09NTU9OX1BBUlRTXCIsJ2N4PVwiMFwiIGN5PVwiMFwiICcsJ3I9XCInLHRoaXMucmFkaXVzLCdcIiAvPlxcbiddO2Vsc2V7dmFyIG49aSh0aGlzLnN0YXJ0QW5nbGUpLHM9aSh0aGlzLmVuZEFuZ2xlKSxvPXRoaXMucmFkaXVzO3Q9Wyc8cGF0aCBkPVwiTSAnK2UudXRpbC5jb3MobikqbytcIiBcIitlLnV0aWwuc2luKG4pKm8sXCIgQSBcIitvK1wiIFwiK28sXCIgMCBcIiwrKHI+MTgwP1wiMVwiOlwiMFwiKStcIiAxXCIsXCIgXCIrZS51dGlsLmNvcyhzKSpvK1wiIFwiK2UudXRpbC5zaW4ocykqbywnXCIgJyxcIkNPTU1PTl9QQVJUU1wiLFwiIC8+XFxuXCJdfXJldHVybiB0fSxfcmVuZGVyOmZ1bmN0aW9uKHQpe3QuYmVnaW5QYXRoKCksdC5hcmMoMCwwLHRoaXMucmFkaXVzLGkodGhpcy5zdGFydEFuZ2xlKSxpKHRoaXMuZW5kQW5nbGUpLCExKSx0aGlzLl9yZW5kZXJQYWludEluT3JkZXIodCl9LGdldFJhZGl1c1g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJyYWRpdXNcIikqdGhpcy5nZXQoXCJzY2FsZVhcIil9LGdldFJhZGl1c1k6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJyYWRpdXNcIikqdGhpcy5nZXQoXCJzY2FsZVlcIil9LHNldFJhZGl1czpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5yYWRpdXM9dCx0aGlzLnNldChcIndpZHRoXCIsMip0KS5zZXQoXCJoZWlnaHRcIiwyKnQpfX0pLGUuQ2lyY2xlLkFUVFJJQlVURV9OQU1FUz1lLlNIQVJFRF9BVFRSSUJVVEVTLmNvbmNhdChcImN4IGN5IHJcIi5zcGxpdChcIiBcIikpLGUuQ2lyY2xlLmZyb21FbGVtZW50PWZ1bmN0aW9uKHQsaSl7dmFyIHIsbj1lLnBhcnNlQXR0cmlidXRlcyh0LGUuQ2lyY2xlLkFUVFJJQlVURV9OQU1FUyk7aWYoIShcInJhZGl1c1wiaW4ocj1uKSYmci5yYWRpdXM+PTApKXRocm93IG5ldyBFcnJvcihcInZhbHVlIG9mIGByYCBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgYW5kIGNhbiBub3QgYmUgbmVnYXRpdmVcIik7bi5sZWZ0PShuLmxlZnR8fDApLW4ucmFkaXVzLG4udG9wPShuLnRvcHx8MCktbi5yYWRpdXMsaShuZXcgZS5DaXJjbGUobikpfSxlLkNpcmNsZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKHQsaSl7ZS5PYmplY3QuX2Zyb21PYmplY3QoXCJDaXJjbGVcIix0LGkpfSl9KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljfHwodC5mYWJyaWM9e30pO2UuVHJpYW5nbGU/ZS53YXJuKFwiZmFicmljLlRyaWFuZ2xlIGlzIGFscmVhZHkgZGVmaW5lZFwiKTooZS5UcmlhbmdsZT1lLnV0aWwuY3JlYXRlQ2xhc3MoZS5PYmplY3Qse3R5cGU6XCJ0cmlhbmdsZVwiLHdpZHRoOjEwMCxoZWlnaHQ6MTAwLF9yZW5kZXI6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy53aWR0aC8yLGk9dGhpcy5oZWlnaHQvMjt0LmJlZ2luUGF0aCgpLHQubW92ZVRvKC1lLGkpLHQubGluZVRvKDAsLWkpLHQubGluZVRvKGUsaSksdC5jbG9zZVBhdGgoKSx0aGlzLl9yZW5kZXJQYWludEluT3JkZXIodCl9LF90b1NWRzpmdW5jdGlvbigpe3ZhciB0PXRoaXMud2lkdGgvMixlPXRoaXMuaGVpZ2h0LzI7cmV0dXJuW1wiPHBvbHlnb24gXCIsXCJDT01NT05fUEFSVFNcIiwncG9pbnRzPVwiJyxbLXQrXCIgXCIrZSxcIjAgXCIrLWUsdCtcIiBcIitlXS5qb2luKFwiLFwiKSwnXCIgLz4nXX19KSxlLlRyaWFuZ2xlLmZyb21PYmplY3Q9ZnVuY3Rpb24odCxpKXtyZXR1cm4gZS5PYmplY3QuX2Zyb21PYmplY3QoXCJUcmlhbmdsZVwiLHQsaSl9KX0oZSksZnVuY3Rpb24odCl7dmFyIGU9dC5mYWJyaWN8fCh0LmZhYnJpYz17fSksaT0yKk1hdGguUEk7ZS5FbGxpcHNlP2Uud2FybihcImZhYnJpYy5FbGxpcHNlIGlzIGFscmVhZHkgZGVmaW5lZC5cIik6KGUuRWxsaXBzZT1lLnV0aWwuY3JlYXRlQ2xhc3MoZS5PYmplY3Qse3R5cGU6XCJlbGxpcHNlXCIscng6MCxyeTowLGNhY2hlUHJvcGVydGllczplLk9iamVjdC5wcm90b3R5cGUuY2FjaGVQcm9wZXJ0aWVzLmNvbmNhdChcInJ4XCIsXCJyeVwiKSxpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3RoaXMuY2FsbFN1cGVyKFwiaW5pdGlhbGl6ZVwiLHQpLHRoaXMuc2V0KFwicnhcIix0JiZ0LnJ4fHwwKSx0aGlzLnNldChcInJ5XCIsdCYmdC5yeXx8MCl9LF9zZXQ6ZnVuY3Rpb24odCxlKXtzd2l0Y2godGhpcy5jYWxsU3VwZXIoXCJfc2V0XCIsdCxlKSx0KXtjYXNlXCJyeFwiOnRoaXMucng9ZSx0aGlzLnNldChcIndpZHRoXCIsMiplKTticmVhaztjYXNlXCJyeVwiOnRoaXMucnk9ZSx0aGlzLnNldChcImhlaWdodFwiLDIqZSl9cmV0dXJuIHRoaXN9LGdldFJ4OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwicnhcIikqdGhpcy5nZXQoXCJzY2FsZVhcIil9LGdldFJ5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwicnlcIikqdGhpcy5nZXQoXCJzY2FsZVlcIil9LHRvT2JqZWN0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNhbGxTdXBlcihcInRvT2JqZWN0XCIsW1wicnhcIixcInJ5XCJdLmNvbmNhdCh0KSl9LF90b1NWRzpmdW5jdGlvbigpe3JldHVybltcIjxlbGxpcHNlIFwiLFwiQ09NTU9OX1BBUlRTXCIsJ2N4PVwiMFwiIGN5PVwiMFwiICcsJ3J4PVwiJyx0aGlzLnJ4LCdcIiByeT1cIicsdGhpcy5yeSwnXCIgLz5cXG4nXX0sX3JlbmRlcjpmdW5jdGlvbih0KXt0LmJlZ2luUGF0aCgpLHQuc2F2ZSgpLHQudHJhbnNmb3JtKDEsMCwwLHRoaXMucnkvdGhpcy5yeCwwLDApLHQuYXJjKDAsMCx0aGlzLnJ4LDAsaSwhMSksdC5yZXN0b3JlKCksdGhpcy5fcmVuZGVyUGFpbnRJbk9yZGVyKHQpfX0pLGUuRWxsaXBzZS5BVFRSSUJVVEVfTkFNRVM9ZS5TSEFSRURfQVRUUklCVVRFUy5jb25jYXQoXCJjeCBjeSByeCByeVwiLnNwbGl0KFwiIFwiKSksZS5FbGxpcHNlLmZyb21FbGVtZW50PWZ1bmN0aW9uKHQsaSl7dmFyIHI9ZS5wYXJzZUF0dHJpYnV0ZXModCxlLkVsbGlwc2UuQVRUUklCVVRFX05BTUVTKTtyLmxlZnQ9KHIubGVmdHx8MCktci5yeCxyLnRvcD0oci50b3B8fDApLXIucnksaShuZXcgZS5FbGxpcHNlKHIpKX0sZS5FbGxpcHNlLmZyb21PYmplY3Q9ZnVuY3Rpb24odCxpKXtlLk9iamVjdC5fZnJvbU9iamVjdChcIkVsbGlwc2VcIix0LGkpfSl9KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljfHwodC5mYWJyaWM9e30pLGk9ZS51dGlsLm9iamVjdC5leHRlbmQ7ZS5SZWN0P2Uud2FybihcImZhYnJpYy5SZWN0IGlzIGFscmVhZHkgZGVmaW5lZFwiKTooZS5SZWN0PWUudXRpbC5jcmVhdGVDbGFzcyhlLk9iamVjdCx7c3RhdGVQcm9wZXJ0aWVzOmUuT2JqZWN0LnByb3RvdHlwZS5zdGF0ZVByb3BlcnRpZXMuY29uY2F0KFwicnhcIixcInJ5XCIpLHR5cGU6XCJyZWN0XCIscng6MCxyeTowLGNhY2hlUHJvcGVydGllczplLk9iamVjdC5wcm90b3R5cGUuY2FjaGVQcm9wZXJ0aWVzLmNvbmNhdChcInJ4XCIsXCJyeVwiKSxpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3RoaXMuY2FsbFN1cGVyKFwiaW5pdGlhbGl6ZVwiLHQpLHRoaXMuX2luaXRSeFJ5KCl9LF9pbml0UnhSeTpmdW5jdGlvbigpe3RoaXMucngmJiF0aGlzLnJ5P3RoaXMucnk9dGhpcy5yeDp0aGlzLnJ5JiYhdGhpcy5yeCYmKHRoaXMucng9dGhpcy5yeSl9LF9yZW5kZXI6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5yeD9NYXRoLm1pbih0aGlzLnJ4LHRoaXMud2lkdGgvMik6MCxpPXRoaXMucnk/TWF0aC5taW4odGhpcy5yeSx0aGlzLmhlaWdodC8yKTowLHI9dGhpcy53aWR0aCxuPXRoaXMuaGVpZ2h0LHM9LXRoaXMud2lkdGgvMixvPS10aGlzLmhlaWdodC8yLGE9MCE9PWV8fDAhPT1pLGg9LjQ0NzcxNTI1MDI7dC5iZWdpblBhdGgoKSx0Lm1vdmVUbyhzK2UsbyksdC5saW5lVG8ocytyLWUsbyksYSYmdC5iZXppZXJDdXJ2ZVRvKHMrci1oKmUsbyxzK3IsbytoKmkscytyLG8raSksdC5saW5lVG8ocytyLG8rbi1pKSxhJiZ0LmJlemllckN1cnZlVG8ocytyLG8rbi1oKmkscytyLWgqZSxvK24scytyLWUsbytuKSx0LmxpbmVUbyhzK2UsbytuKSxhJiZ0LmJlemllckN1cnZlVG8ocytoKmUsbytuLHMsbytuLWgqaSxzLG8rbi1pKSx0LmxpbmVUbyhzLG8raSksYSYmdC5iZXppZXJDdXJ2ZVRvKHMsbytoKmkscytoKmUsbyxzK2UsbyksdC5jbG9zZVBhdGgoKSx0aGlzLl9yZW5kZXJQYWludEluT3JkZXIodCl9LHRvT2JqZWN0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNhbGxTdXBlcihcInRvT2JqZWN0XCIsW1wicnhcIixcInJ5XCJdLmNvbmNhdCh0KSl9LF90b1NWRzpmdW5jdGlvbigpe3JldHVybltcIjxyZWN0IFwiLFwiQ09NTU9OX1BBUlRTXCIsJ3g9XCInLC10aGlzLndpZHRoLzIsJ1wiIHk9XCInLC10aGlzLmhlaWdodC8yLCdcIiByeD1cIicsdGhpcy5yeCwnXCIgcnk9XCInLHRoaXMucnksJ1wiIHdpZHRoPVwiJyx0aGlzLndpZHRoLCdcIiBoZWlnaHQ9XCInLHRoaXMuaGVpZ2h0LCdcIiAvPlxcbiddfX0pLGUuUmVjdC5BVFRSSUJVVEVfTkFNRVM9ZS5TSEFSRURfQVRUUklCVVRFUy5jb25jYXQoXCJ4IHkgcnggcnkgd2lkdGggaGVpZ2h0XCIuc3BsaXQoXCIgXCIpKSxlLlJlY3QuZnJvbUVsZW1lbnQ9ZnVuY3Rpb24odCxyLG4pe2lmKCF0KXJldHVybiByKG51bGwpO249bnx8e307dmFyIHM9ZS5wYXJzZUF0dHJpYnV0ZXModCxlLlJlY3QuQVRUUklCVVRFX05BTUVTKTtzLmxlZnQ9cy5sZWZ0fHwwLHMudG9wPXMudG9wfHwwLHMuaGVpZ2h0PXMuaGVpZ2h0fHwwLHMud2lkdGg9cy53aWR0aHx8MDt2YXIgbz1uZXcgZS5SZWN0KGkobj9lLnV0aWwub2JqZWN0LmNsb25lKG4pOnt9LHMpKTtvLnZpc2libGU9by52aXNpYmxlJiZvLndpZHRoPjAmJm8uaGVpZ2h0PjAscihvKX0sZS5SZWN0LmZyb21PYmplY3Q9ZnVuY3Rpb24odCxpKXtyZXR1cm4gZS5PYmplY3QuX2Zyb21PYmplY3QoXCJSZWN0XCIsdCxpKX0pfShlKSxmdW5jdGlvbih0KXt2YXIgZT10LmZhYnJpY3x8KHQuZmFicmljPXt9KSxpPWUudXRpbC5vYmplY3QuZXh0ZW5kLHI9ZS51dGlsLmFycmF5Lm1pbixuPWUudXRpbC5hcnJheS5tYXgscz1lLnV0aWwudG9GaXhlZCxvPWUudXRpbC5wcm9qZWN0U3Ryb2tlT25Qb2ludHM7ZS5Qb2x5bGluZT9lLndhcm4oXCJmYWJyaWMuUG9seWxpbmUgaXMgYWxyZWFkeSBkZWZpbmVkXCIpOihlLlBvbHlsaW5lPWUudXRpbC5jcmVhdGVDbGFzcyhlLk9iamVjdCx7dHlwZTpcInBvbHlsaW5lXCIscG9pbnRzOm51bGwsZXhhY3RCb3VuZGluZ0JveDohMSxjYWNoZVByb3BlcnRpZXM6ZS5PYmplY3QucHJvdG90eXBlLmNhY2hlUHJvcGVydGllcy5jb25jYXQoXCJwb2ludHNcIiksaW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUpe2U9ZXx8e30sdGhpcy5wb2ludHM9dHx8W10sdGhpcy5jYWxsU3VwZXIoXCJpbml0aWFsaXplXCIsZSksdGhpcy5fc2V0UG9zaXRpb25EaW1lbnNpb25zKGUpfSxfcHJvamVjdFN0cm9rZU9uUG9pbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIG8odGhpcy5wb2ludHMsdGhpcywhMCl9LF9zZXRQb3NpdGlvbkRpbWVuc2lvbnM6ZnVuY3Rpb24odCl7dmFyIGUsaT10aGlzLl9jYWxjRGltZW5zaW9ucyh0KSxyPXRoaXMuZXhhY3RCb3VuZGluZ0JveD90aGlzLnN0cm9rZVdpZHRoOjA7dGhpcy53aWR0aD1pLndpZHRoLXIsdGhpcy5oZWlnaHQ9aS5oZWlnaHQtcix0LmZyb21TVkd8fChlPXRoaXMudHJhbnNsYXRlVG9HaXZlbk9yaWdpbih7eDppLmxlZnQtdGhpcy5zdHJva2VXaWR0aC8yK3IvMix5OmkudG9wLXRoaXMuc3Ryb2tlV2lkdGgvMityLzJ9LFwibGVmdFwiLFwidG9wXCIsdGhpcy5vcmlnaW5YLHRoaXMub3JpZ2luWSkpLHZvaWQgMD09PXQubGVmdCYmKHRoaXMubGVmdD10LmZyb21TVkc/aS5sZWZ0OmUueCksdm9pZCAwPT09dC50b3AmJih0aGlzLnRvcD10LmZyb21TVkc/aS50b3A6ZS55KSx0aGlzLnBhdGhPZmZzZXQ9e3g6aS5sZWZ0K3RoaXMud2lkdGgvMityLzIseTppLnRvcCt0aGlzLmhlaWdodC8yK3IvMn19LF9jYWxjRGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZXhhY3RCb3VuZGluZ0JveD90aGlzLl9wcm9qZWN0U3Ryb2tlT25Qb2ludHMoKTp0aGlzLnBvaW50cyxlPXIodCxcInhcIil8fDAsaT1yKHQsXCJ5XCIpfHwwO3JldHVybntsZWZ0OmUsdG9wOmksd2lkdGg6KG4odCxcInhcIil8fDApLWUsaGVpZ2h0OihuKHQsXCJ5XCIpfHwwKS1pfX0sdG9PYmplY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIGkodGhpcy5jYWxsU3VwZXIoXCJ0b09iamVjdFwiLHQpLHtwb2ludHM6dGhpcy5wb2ludHMuY29uY2F0KCl9KX0sX3RvU1ZHOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdLGk9dGhpcy5wYXRoT2Zmc2V0Lngscj10aGlzLnBhdGhPZmZzZXQueSxuPWUuT2JqZWN0Lk5VTV9GUkFDVElPTl9ESUdJVFMsbz0wLGE9dGhpcy5wb2ludHMubGVuZ3RoO288YTtvKyspdC5wdXNoKHModGhpcy5wb2ludHNbb10ueC1pLG4pLFwiLFwiLHModGhpcy5wb2ludHNbb10ueS1yLG4pLFwiIFwiKTtyZXR1cm5bXCI8XCIrdGhpcy50eXBlK1wiIFwiLFwiQ09NTU9OX1BBUlRTXCIsJ3BvaW50cz1cIicsdC5qb2luKFwiXCIpLCdcIiAvPlxcbiddfSxjb21tb25SZW5kZXI6ZnVuY3Rpb24odCl7dmFyIGUsaT10aGlzLnBvaW50cy5sZW5ndGgscj10aGlzLnBhdGhPZmZzZXQueCxuPXRoaXMucGF0aE9mZnNldC55O2lmKCFpfHxpc05hTih0aGlzLnBvaW50c1tpLTFdLnkpKXJldHVybiExO3QuYmVnaW5QYXRoKCksdC5tb3ZlVG8odGhpcy5wb2ludHNbMF0ueC1yLHRoaXMucG9pbnRzWzBdLnktbik7Zm9yKHZhciBzPTA7czxpO3MrKyllPXRoaXMucG9pbnRzW3NdLHQubGluZVRvKGUueC1yLGUueS1uKTtyZXR1cm4hMH0sX3JlbmRlcjpmdW5jdGlvbih0KXt0aGlzLmNvbW1vblJlbmRlcih0KSYmdGhpcy5fcmVuZGVyUGFpbnRJbk9yZGVyKHQpfSxjb21wbGV4aXR5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwicG9pbnRzXCIpLmxlbmd0aH19KSxlLlBvbHlsaW5lLkFUVFJJQlVURV9OQU1FUz1lLlNIQVJFRF9BVFRSSUJVVEVTLmNvbmNhdCgpLGUuUG9seWxpbmUuZnJvbUVsZW1lbnRHZW5lcmF0b3I9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHIsbixzKXtpZighcilyZXR1cm4gbihudWxsKTtzfHwocz17fSk7dmFyIG89ZS5wYXJzZVBvaW50c0F0dHJpYnV0ZShyLmdldEF0dHJpYnV0ZShcInBvaW50c1wiKSksYT1lLnBhcnNlQXR0cmlidXRlcyhyLGVbdF0uQVRUUklCVVRFX05BTUVTKTthLmZyb21TVkc9ITAsbihuZXcgZVt0XShvLGkoYSxzKSkpfX0sZS5Qb2x5bGluZS5mcm9tRWxlbWVudD1lLlBvbHlsaW5lLmZyb21FbGVtZW50R2VuZXJhdG9yKFwiUG9seWxpbmVcIiksZS5Qb2x5bGluZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKHQsaSl7cmV0dXJuIGUuT2JqZWN0Ll9mcm9tT2JqZWN0KFwiUG9seWxpbmVcIix0LGksXCJwb2ludHNcIil9KX0oZSksZnVuY3Rpb24odCl7dmFyIGU9dC5mYWJyaWN8fCh0LmZhYnJpYz17fSksaT1lLnV0aWwucHJvamVjdFN0cm9rZU9uUG9pbnRzO2UuUG9seWdvbj9lLndhcm4oXCJmYWJyaWMuUG9seWdvbiBpcyBhbHJlYWR5IGRlZmluZWRcIik6KGUuUG9seWdvbj1lLnV0aWwuY3JlYXRlQ2xhc3MoZS5Qb2x5bGluZSx7dHlwZTpcInBvbHlnb25cIixfcHJvamVjdFN0cm9rZU9uUG9pbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIGkodGhpcy5wb2ludHMsdGhpcyl9LF9yZW5kZXI6ZnVuY3Rpb24odCl7dGhpcy5jb21tb25SZW5kZXIodCkmJih0LmNsb3NlUGF0aCgpLHRoaXMuX3JlbmRlclBhaW50SW5PcmRlcih0KSl9fSksZS5Qb2x5Z29uLkFUVFJJQlVURV9OQU1FUz1lLlNIQVJFRF9BVFRSSUJVVEVTLmNvbmNhdCgpLGUuUG9seWdvbi5mcm9tRWxlbWVudD1lLlBvbHlsaW5lLmZyb21FbGVtZW50R2VuZXJhdG9yKFwiUG9seWdvblwiKSxlLlBvbHlnb24uZnJvbU9iamVjdD1mdW5jdGlvbih0LGkpe2UuT2JqZWN0Ll9mcm9tT2JqZWN0KFwiUG9seWdvblwiLHQsaSxcInBvaW50c1wiKX0pfShlKSxmdW5jdGlvbih0KXt2YXIgZT10LmZhYnJpY3x8KHQuZmFicmljPXt9KSxpPWUudXRpbC5hcnJheS5taW4scj1lLnV0aWwuYXJyYXkubWF4LG49ZS51dGlsLm9iamVjdC5leHRlbmQscz1lLnV0aWwub2JqZWN0LmNsb25lLG89ZS51dGlsLnRvRml4ZWQ7ZS5QYXRoP2Uud2FybihcImZhYnJpYy5QYXRoIGlzIGFscmVhZHkgZGVmaW5lZFwiKTooZS5QYXRoPWUudXRpbC5jcmVhdGVDbGFzcyhlLk9iamVjdCx7dHlwZTpcInBhdGhcIixwYXRoOm51bGwsY2FjaGVQcm9wZXJ0aWVzOmUuT2JqZWN0LnByb3RvdHlwZS5jYWNoZVByb3BlcnRpZXMuY29uY2F0KFwicGF0aFwiLFwiZmlsbFJ1bGVcIiksc3RhdGVQcm9wZXJ0aWVzOmUuT2JqZWN0LnByb3RvdHlwZS5zdGF0ZVByb3BlcnRpZXMuY29uY2F0KFwicGF0aFwiKSxpbml0aWFsaXplOmZ1bmN0aW9uKHQsZSl7ZGVsZXRlKGU9cyhlfHx7fSkpLnBhdGgsdGhpcy5jYWxsU3VwZXIoXCJpbml0aWFsaXplXCIsZSksdGhpcy5fc2V0UGF0aCh0fHxbXSxlKX0sX3NldFBhdGg6ZnVuY3Rpb24odCxpKXt0aGlzLnBhdGg9ZS51dGlsLm1ha2VQYXRoU2ltcGxlcihBcnJheS5pc0FycmF5KHQpP3Q6ZS51dGlsLnBhcnNlUGF0aCh0KSksZS5Qb2x5bGluZS5wcm90b3R5cGUuX3NldFBvc2l0aW9uRGltZW5zaW9ucy5jYWxsKHRoaXMsaXx8e30pfSxfcmVuZGVyUGF0aENvbW1hbmRzOmZ1bmN0aW9uKHQpe3ZhciBlLGk9MCxyPTAsbj0wLHM9MCxvPTAsYT0wLGg9LXRoaXMucGF0aE9mZnNldC54LGw9LXRoaXMucGF0aE9mZnNldC55O3QuYmVnaW5QYXRoKCk7Zm9yKHZhciBjPTAsdT10aGlzLnBhdGgubGVuZ3RoO2M8dTsrK2Mpc3dpdGNoKChlPXRoaXMucGF0aFtjXSlbMF0pe2Nhc2VcIkxcIjpuPWVbMV0scz1lWzJdLHQubGluZVRvKG4raCxzK2wpO2JyZWFrO2Nhc2VcIk1cIjppPW49ZVsxXSxyPXM9ZVsyXSx0Lm1vdmVUbyhuK2gscytsKTticmVhaztjYXNlXCJDXCI6bj1lWzVdLHM9ZVs2XSxvPWVbM10sYT1lWzRdLHQuYmV6aWVyQ3VydmVUbyhlWzFdK2gsZVsyXStsLG8raCxhK2wsbitoLHMrbCk7YnJlYWs7Y2FzZVwiUVwiOnQucXVhZHJhdGljQ3VydmVUbyhlWzFdK2gsZVsyXStsLGVbM10raCxlWzRdK2wpLG49ZVszXSxzPWVbNF0sbz1lWzFdLGE9ZVsyXTticmVhaztjYXNlXCJ6XCI6Y2FzZVwiWlwiOm49aSxzPXIsdC5jbG9zZVBhdGgoKX19LF9yZW5kZXI6ZnVuY3Rpb24odCl7dGhpcy5fcmVuZGVyUGF0aENvbW1hbmRzKHQpLHRoaXMuX3JlbmRlclBhaW50SW5PcmRlcih0KX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5cIiM8ZmFicmljLlBhdGggKFwiK3RoaXMuY29tcGxleGl0eSgpKycpOiB7IFwidG9wXCI6ICcrdGhpcy50b3ArJywgXCJsZWZ0XCI6ICcrdGhpcy5sZWZ0K1wiIH0+XCJ9LHRvT2JqZWN0OmZ1bmN0aW9uKHQpe3JldHVybiBuKHRoaXMuY2FsbFN1cGVyKFwidG9PYmplY3RcIix0KSx7cGF0aDp0aGlzLnBhdGgubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC5zbGljZSgpfSkpfSl9LHRvRGF0YWxlc3NPYmplY3Q6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50b09iamVjdChbXCJzb3VyY2VQYXRoXCJdLmNvbmNhdCh0KSk7cmV0dXJuIGUuc291cmNlUGF0aCYmZGVsZXRlIGUucGF0aCxlfSxfdG9TVkc6ZnVuY3Rpb24oKXtyZXR1cm5bXCI8cGF0aCBcIixcIkNPTU1PTl9QQVJUU1wiLCdkPVwiJyxlLnV0aWwuam9pblBhdGgodGhpcy5wYXRoKSwnXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiICcsXCIvPlxcblwiXX0sX2dldE9mZnNldFRyYW5zZm9ybTpmdW5jdGlvbigpe3ZhciB0PWUuT2JqZWN0Lk5VTV9GUkFDVElPTl9ESUdJVFM7cmV0dXJuXCIgdHJhbnNsYXRlKFwiK28oLXRoaXMucGF0aE9mZnNldC54LHQpK1wiLCBcIitvKC10aGlzLnBhdGhPZmZzZXQueSx0KStcIilcIn0sdG9DbGlwUGF0aFNWRzpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9nZXRPZmZzZXRUcmFuc2Zvcm0oKTtyZXR1cm5cIlxcdFwiK3RoaXMuX2NyZWF0ZUJhc2VDbGlwUGF0aFNWR01hcmt1cCh0aGlzLl90b1NWRygpLHtyZXZpdmVyOnQsYWRkaXRpb25hbFRyYW5zZm9ybTplfSl9LHRvU1ZHOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2dldE9mZnNldFRyYW5zZm9ybSgpO3JldHVybiB0aGlzLl9jcmVhdGVCYXNlU1ZHTWFya3VwKHRoaXMuX3RvU1ZHKCkse3Jldml2ZXI6dCxhZGRpdGlvbmFsVHJhbnNmb3JtOmV9KX0sY29tcGxleGl0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhdGgubGVuZ3RofSxfY2FsY0RpbWVuc2lvbnM6ZnVuY3Rpb24oKXtmb3IodmFyIHQsbixzPVtdLG89W10sYT0wLGg9MCxsPTAsYz0wLHU9MCxkPXRoaXMucGF0aC5sZW5ndGg7dTxkOysrdSl7c3dpdGNoKCh0PXRoaXMucGF0aFt1XSlbMF0pe2Nhc2VcIkxcIjpsPXRbMV0sYz10WzJdLG49W107YnJlYWs7Y2FzZVwiTVwiOmE9bD10WzFdLGg9Yz10WzJdLG49W107YnJlYWs7Y2FzZVwiQ1wiOm49ZS51dGlsLmdldEJvdW5kc09mQ3VydmUobCxjLHRbMV0sdFsyXSx0WzNdLHRbNF0sdFs1XSx0WzZdKSxsPXRbNV0sYz10WzZdO2JyZWFrO2Nhc2VcIlFcIjpuPWUudXRpbC5nZXRCb3VuZHNPZkN1cnZlKGwsYyx0WzFdLHRbMl0sdFsxXSx0WzJdLHRbM10sdFs0XSksbD10WzNdLGM9dFs0XTticmVhaztjYXNlXCJ6XCI6Y2FzZVwiWlwiOmw9YSxjPWh9bi5mb3JFYWNoKChmdW5jdGlvbih0KXtzLnB1c2godC54KSxvLnB1c2godC55KX0pKSxzLnB1c2gobCksby5wdXNoKGMpfXZhciBmPWkocyl8fDAsZz1pKG8pfHwwO3JldHVybntsZWZ0OmYsdG9wOmcsd2lkdGg6KHIocyl8fDApLWYsaGVpZ2h0OihyKG8pfHwwKS1nfX19KSxlLlBhdGguZnJvbU9iamVjdD1mdW5jdGlvbih0LGkpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0LnNvdXJjZVBhdGgpe3ZhciByPXQuc291cmNlUGF0aDtlLmxvYWRTVkdGcm9tVVJMKHIsKGZ1bmN0aW9uKGUpe3ZhciByPWVbMF07ci5zZXRPcHRpb25zKHQpLGkmJmkocil9KSl9ZWxzZSBlLk9iamVjdC5fZnJvbU9iamVjdChcIlBhdGhcIix0LGksXCJwYXRoXCIpfSxlLlBhdGguQVRUUklCVVRFX05BTUVTPWUuU0hBUkVEX0FUVFJJQlVURVMuY29uY2F0KFtcImRcIl0pLGUuUGF0aC5mcm9tRWxlbWVudD1mdW5jdGlvbih0LGkscil7dmFyIHM9ZS5wYXJzZUF0dHJpYnV0ZXModCxlLlBhdGguQVRUUklCVVRFX05BTUVTKTtzLmZyb21TVkc9ITAsaShuZXcgZS5QYXRoKHMuZCxuKHMscikpKX0pfShlKSxmdW5jdGlvbih0KXt2YXIgZT10LmZhYnJpY3x8KHQuZmFicmljPXt9KSxpPWUudXRpbC5hcnJheS5taW4scj1lLnV0aWwuYXJyYXkubWF4O2UuR3JvdXB8fChlLkdyb3VwPWUudXRpbC5jcmVhdGVDbGFzcyhlLk9iamVjdCxlLkNvbGxlY3Rpb24se3R5cGU6XCJncm91cFwiLHN0cm9rZVdpZHRoOjAsc3ViVGFyZ2V0Q2hlY2s6ITEsY2FjaGVQcm9wZXJ0aWVzOltdLHVzZVNldE9uR3JvdXA6ITEsaW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUsaSl7ZT1lfHx7fSx0aGlzLl9vYmplY3RzPVtdLGkmJnRoaXMuY2FsbFN1cGVyKFwiaW5pdGlhbGl6ZVwiLGUpLHRoaXMuX29iamVjdHM9dHx8W107Zm9yKHZhciByPXRoaXMuX29iamVjdHMubGVuZ3RoO3ItLTspdGhpcy5fb2JqZWN0c1tyXS5ncm91cD10aGlzO2lmKGkpdGhpcy5fdXBkYXRlT2JqZWN0c0FDb29yZHMoKTtlbHNle3ZhciBuPWUmJmUuY2VudGVyUG9pbnQ7dm9pZCAwIT09ZS5vcmlnaW5YJiYodGhpcy5vcmlnaW5YPWUub3JpZ2luWCksdm9pZCAwIT09ZS5vcmlnaW5ZJiYodGhpcy5vcmlnaW5ZPWUub3JpZ2luWSksbnx8dGhpcy5fY2FsY0JvdW5kcygpLHRoaXMuX3VwZGF0ZU9iamVjdHNDb29yZHMobiksZGVsZXRlIGUuY2VudGVyUG9pbnQsdGhpcy5jYWxsU3VwZXIoXCJpbml0aWFsaXplXCIsZSl9dGhpcy5zZXRDb29yZHMoKX0sX3VwZGF0ZU9iamVjdHNBQ29vcmRzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX29iamVjdHMubGVuZ3RoO3QtLTspdGhpcy5fb2JqZWN0c1t0XS5zZXRDb29yZHMoITApfSxfdXBkYXRlT2JqZWN0c0Nvb3JkczpmdW5jdGlvbih0KXt0PXR8fHRoaXMuZ2V0Q2VudGVyUG9pbnQoKTtmb3IodmFyIGU9dGhpcy5fb2JqZWN0cy5sZW5ndGg7ZS0tOyl0aGlzLl91cGRhdGVPYmplY3RDb29yZHModGhpcy5fb2JqZWN0c1tlXSx0KX0sX3VwZGF0ZU9iamVjdENvb3JkczpmdW5jdGlvbih0LGUpe3ZhciBpPXQubGVmdCxyPXQudG9wO3Quc2V0KHtsZWZ0OmktZS54LHRvcDpyLWUueX0pLHQuZ3JvdXA9dGhpcyx0LnNldENvb3JkcyghMCl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuXCIjPGZhYnJpYy5Hcm91cDogKFwiK3RoaXMuY29tcGxleGl0eSgpK1wiKT5cIn0sYWRkV2l0aFVwZGF0ZTpmdW5jdGlvbih0KXt2YXIgaT0hIXRoaXMuZ3JvdXA7cmV0dXJuIHRoaXMuX3Jlc3RvcmVPYmplY3RzU3RhdGUoKSxlLnV0aWwucmVzZXRPYmplY3RUcmFuc2Zvcm0odGhpcyksdCYmKGkmJmUudXRpbC5yZW1vdmVUcmFuc2Zvcm1Gcm9tT2JqZWN0KHQsdGhpcy5ncm91cC5jYWxjVHJhbnNmb3JtTWF0cml4KCkpLHRoaXMuX29iamVjdHMucHVzaCh0KSx0Lmdyb3VwPXRoaXMsdC5fc2V0KFwiY2FudmFzXCIsdGhpcy5jYW52YXMpKSx0aGlzLl9jYWxjQm91bmRzKCksdGhpcy5fdXBkYXRlT2JqZWN0c0Nvb3JkcygpLHRoaXMuZGlydHk9ITAsaT90aGlzLmdyb3VwLmFkZFdpdGhVcGRhdGUoKTp0aGlzLnNldENvb3JkcygpLHRoaXN9LHJlbW92ZVdpdGhVcGRhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3Jlc3RvcmVPYmplY3RzU3RhdGUoKSxlLnV0aWwucmVzZXRPYmplY3RUcmFuc2Zvcm0odGhpcyksdGhpcy5yZW1vdmUodCksdGhpcy5fY2FsY0JvdW5kcygpLHRoaXMuX3VwZGF0ZU9iamVjdHNDb29yZHMoKSx0aGlzLnNldENvb3JkcygpLHRoaXMuZGlydHk9ITAsdGhpc30sX29uT2JqZWN0QWRkZWQ6ZnVuY3Rpb24odCl7dGhpcy5kaXJ0eT0hMCx0Lmdyb3VwPXRoaXMsdC5fc2V0KFwiY2FudmFzXCIsdGhpcy5jYW52YXMpfSxfb25PYmplY3RSZW1vdmVkOmZ1bmN0aW9uKHQpe3RoaXMuZGlydHk9ITAsZGVsZXRlIHQuZ3JvdXB9LF9zZXQ6ZnVuY3Rpb24odCxpKXt2YXIgcj10aGlzLl9vYmplY3RzLmxlbmd0aDtpZih0aGlzLnVzZVNldE9uR3JvdXApZm9yKDtyLS07KXRoaXMuX29iamVjdHNbcl0uc2V0T25Hcm91cCh0LGkpO2lmKFwiY2FudmFzXCI9PT10KWZvcig7ci0tOyl0aGlzLl9vYmplY3RzW3JdLl9zZXQodCxpKTtlLk9iamVjdC5wcm90b3R5cGUuX3NldC5jYWxsKHRoaXMsdCxpKX0sdG9PYmplY3Q6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5pbmNsdWRlRGVmYXVsdFZhbHVlcyxyPXRoaXMuX29iamVjdHMuZmlsdGVyKChmdW5jdGlvbih0KXtyZXR1cm4hdC5leGNsdWRlRnJvbUV4cG9ydH0pKS5tYXAoKGZ1bmN0aW9uKGUpe3ZhciByPWUuaW5jbHVkZURlZmF1bHRWYWx1ZXM7ZS5pbmNsdWRlRGVmYXVsdFZhbHVlcz1pO3ZhciBuPWUudG9PYmplY3QodCk7cmV0dXJuIGUuaW5jbHVkZURlZmF1bHRWYWx1ZXM9cixufSkpLG49ZS5PYmplY3QucHJvdG90eXBlLnRvT2JqZWN0LmNhbGwodGhpcyx0KTtyZXR1cm4gbi5vYmplY3RzPXIsbn0sdG9EYXRhbGVzc09iamVjdDpmdW5jdGlvbih0KXt2YXIgaSxyPXRoaXMuc291cmNlUGF0aDtpZihyKWk9cjtlbHNle3ZhciBuPXRoaXMuaW5jbHVkZURlZmF1bHRWYWx1ZXM7aT10aGlzLl9vYmplY3RzLm1hcCgoZnVuY3Rpb24oZSl7dmFyIGk9ZS5pbmNsdWRlRGVmYXVsdFZhbHVlcztlLmluY2x1ZGVEZWZhdWx0VmFsdWVzPW47dmFyIHI9ZS50b0RhdGFsZXNzT2JqZWN0KHQpO3JldHVybiBlLmluY2x1ZGVEZWZhdWx0VmFsdWVzPWkscn0pKX12YXIgcz1lLk9iamVjdC5wcm90b3R5cGUudG9EYXRhbGVzc09iamVjdC5jYWxsKHRoaXMsdCk7cmV0dXJuIHMub2JqZWN0cz1pLHN9LHJlbmRlcjpmdW5jdGlvbih0KXt0aGlzLl90cmFuc2Zvcm1Eb25lPSEwLHRoaXMuY2FsbFN1cGVyKFwicmVuZGVyXCIsdCksdGhpcy5fdHJhbnNmb3JtRG9uZT0hMX0sc2hvdWxkQ2FjaGU6ZnVuY3Rpb24oKXt2YXIgdD1lLk9iamVjdC5wcm90b3R5cGUuc2hvdWxkQ2FjaGUuY2FsbCh0aGlzKTtpZih0KWZvcih2YXIgaT0wLHI9dGhpcy5fb2JqZWN0cy5sZW5ndGg7aTxyO2krKylpZih0aGlzLl9vYmplY3RzW2ldLndpbGxEcmF3U2hhZG93KCkpcmV0dXJuIHRoaXMub3duQ2FjaGluZz0hMSwhMTtyZXR1cm4gdH0sd2lsbERyYXdTaGFkb3c6ZnVuY3Rpb24oKXtpZihlLk9iamVjdC5wcm90b3R5cGUud2lsbERyYXdTaGFkb3cuY2FsbCh0aGlzKSlyZXR1cm4hMDtmb3IodmFyIHQ9MCxpPXRoaXMuX29iamVjdHMubGVuZ3RoO3Q8aTt0KyspaWYodGhpcy5fb2JqZWN0c1t0XS53aWxsRHJhd1NoYWRvdygpKXJldHVybiEwO3JldHVybiExfSxpc09uQUNhY2hlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3duQ2FjaGluZ3x8dGhpcy5ncm91cCYmdGhpcy5ncm91cC5pc09uQUNhY2hlKCl9LGRyYXdPYmplY3Q6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsaT10aGlzLl9vYmplY3RzLmxlbmd0aDtlPGk7ZSsrKXRoaXMuX29iamVjdHNbZV0ucmVuZGVyKHQpO3RoaXMuX2RyYXdDbGlwUGF0aCh0LHRoaXMuY2xpcFBhdGgpfSxpc0NhY2hlRGlydHk6ZnVuY3Rpb24odCl7aWYodGhpcy5jYWxsU3VwZXIoXCJpc0NhY2hlRGlydHlcIix0KSlyZXR1cm4hMDtpZighdGhpcy5zdGF0ZWZ1bGxDYWNoZSlyZXR1cm4hMTtmb3IodmFyIGU9MCxpPXRoaXMuX29iamVjdHMubGVuZ3RoO2U8aTtlKyspaWYodGhpcy5fb2JqZWN0c1tlXS5pc0NhY2hlRGlydHkoITApKXtpZih0aGlzLl9jYWNoZUNhbnZhcyl7dmFyIHI9dGhpcy5jYWNoZVdpZHRoL3RoaXMuem9vbVgsbj10aGlzLmNhY2hlSGVpZ2h0L3RoaXMuem9vbVk7dGhpcy5fY2FjaGVDb250ZXh0LmNsZWFyUmVjdCgtci8yLC1uLzIscixuKX1yZXR1cm4hMH1yZXR1cm4hMX0sX3Jlc3RvcmVPYmplY3RzU3RhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNhbGNPd25NYXRyaXgoKTtyZXR1cm4gdGhpcy5fb2JqZWN0cy5mb3JFYWNoKChmdW5jdGlvbihpKXtlLnV0aWwuYWRkVHJhbnNmb3JtVG9PYmplY3QoaSx0KSxkZWxldGUgaS5ncm91cCxpLnNldENvb3JkcygpfSkpLHRoaXN9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb2JqZWN0cy5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnNldChcImRpcnR5XCIsITApfSkpLHRoaXMuX3Jlc3RvcmVPYmplY3RzU3RhdGUoKX0sZGlzcG9zZTpmdW5jdGlvbigpe3RoaXMuY2FsbFN1cGVyKFwiZGlzcG9zZVwiKSx0aGlzLmZvckVhY2hPYmplY3QoKGZ1bmN0aW9uKHQpe3QuZGlzcG9zZSYmdC5kaXNwb3NlKCl9KSksdGhpcy5fb2JqZWN0cz1bXX0sdG9BY3RpdmVTZWxlY3Rpb246ZnVuY3Rpb24oKXtpZih0aGlzLmNhbnZhcyl7dmFyIHQ9dGhpcy5fb2JqZWN0cyxpPXRoaXMuY2FudmFzO3RoaXMuX29iamVjdHM9W107dmFyIHI9dGhpcy50b09iamVjdCgpO2RlbGV0ZSByLm9iamVjdHM7dmFyIG49bmV3IGUuQWN0aXZlU2VsZWN0aW9uKFtdKTtyZXR1cm4gbi5zZXQociksbi50eXBlPVwiYWN0aXZlU2VsZWN0aW9uXCIsaS5yZW1vdmUodGhpcyksdC5mb3JFYWNoKChmdW5jdGlvbih0KXt0Lmdyb3VwPW4sdC5kaXJ0eT0hMCxpLmFkZCh0KX0pKSxuLmNhbnZhcz1pLG4uX29iamVjdHM9dCxpLl9hY3RpdmVPYmplY3Q9bixuLnNldENvb3JkcygpLG59fSx1bmdyb3VwT25DYW52YXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVzdG9yZU9iamVjdHNTdGF0ZSgpfSxzZXRPYmplY3RzQ29vcmRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZm9yRWFjaE9iamVjdCgoZnVuY3Rpb24odCl7dC5zZXRDb29yZHMoITApfSkpLHRoaXN9LF9jYWxjQm91bmRzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxpLHIsbixzPVtdLG89W10sYT1bXCJ0clwiLFwiYnJcIixcImJsXCIsXCJ0bFwiXSxoPTAsbD10aGlzLl9vYmplY3RzLmxlbmd0aCxjPWEubGVuZ3RoO2g8bDsrK2gpe2ZvcihyPShlPXRoaXMuX29iamVjdHNbaF0pLmNhbGNBQ29vcmRzKCksbj0wO248YztuKyspaT1hW25dLHMucHVzaChyW2ldLngpLG8ucHVzaChyW2ldLnkpO2UuYUNvb3Jkcz1yfXRoaXMuX2dldEJvdW5kcyhzLG8sdCl9LF9nZXRCb3VuZHM6ZnVuY3Rpb24odCxuLHMpe3ZhciBvPW5ldyBlLlBvaW50KGkodCksaShuKSksYT1uZXcgZS5Qb2ludChyKHQpLHIobikpLGg9by55fHwwLGw9by54fHwwLGM9YS54LW8ueHx8MCx1PWEueS1vLnl8fDA7dGhpcy53aWR0aD1jLHRoaXMuaGVpZ2h0PXUsc3x8dGhpcy5zZXRQb3NpdGlvbkJ5T3JpZ2luKHt4OmwseTpofSxcImxlZnRcIixcInRvcFwiKX0sX3RvU1ZHOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXCI8ZyBcIixcIkNPTU1PTl9QQVJUU1wiLFwiID5cXG5cIl0saT0wLHI9dGhpcy5fb2JqZWN0cy5sZW5ndGg7aTxyO2krKyllLnB1c2goXCJcXHRcXHRcIix0aGlzLl9vYmplY3RzW2ldLnRvU1ZHKHQpKTtyZXR1cm4gZS5wdXNoKFwiPC9nPlxcblwiKSxlfSxnZXRTdmdTdHlsZXM6ZnVuY3Rpb24oKXt2YXIgdD12b2lkIDAhPT10aGlzLm9wYWNpdHkmJjEhPT10aGlzLm9wYWNpdHk/XCJvcGFjaXR5OiBcIit0aGlzLm9wYWNpdHkrXCI7XCI6XCJcIixlPXRoaXMudmlzaWJsZT9cIlwiOlwiIHZpc2liaWxpdHk6IGhpZGRlbjtcIjtyZXR1cm5bdCx0aGlzLmdldFN2Z0ZpbHRlcigpLGVdLmpvaW4oXCJcIil9LHRvQ2xpcFBhdGhTVkc6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLGk9MCxyPXRoaXMuX29iamVjdHMubGVuZ3RoO2k8cjtpKyspZS5wdXNoKFwiXFx0XCIsdGhpcy5fb2JqZWN0c1tpXS50b0NsaXBQYXRoU1ZHKHQpKTtyZXR1cm4gdGhpcy5fY3JlYXRlQmFzZUNsaXBQYXRoU1ZHTWFya3VwKGUse3Jldml2ZXI6dH0pfX0pLGUuR3JvdXAuZnJvbU9iamVjdD1mdW5jdGlvbih0LGkpe3ZhciByPXQub2JqZWN0cyxuPWUudXRpbC5vYmplY3QuY2xvbmUodCwhMCk7ZGVsZXRlIG4ub2JqZWN0cyxcInN0cmluZ1wiIT10eXBlb2Ygcj9lLnV0aWwuZW5saXZlbk9iamVjdHMociwoZnVuY3Rpb24ocil7dmFyIG49ZS51dGlsLm9iamVjdC5jbG9uZSh0LCEwKTtkZWxldGUgbi5vYmplY3RzLGUudXRpbC5lbmxpdmVuT2JqZWN0RW5saXZhYmxlcyh0LG4sKGZ1bmN0aW9uKCl7aSYmaShuZXcgZS5Hcm91cChyLG4sITApKX0pKX0pKTplLmxvYWRTVkdGcm9tVVJMKHIsKGZ1bmN0aW9uKHMpe3ZhciBvPWUudXRpbC5ncm91cFNWR0VsZW1lbnRzKHMsdCxyKTtvLnNldChuKSxpJiZpKG8pfSkpfSl9KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljfHwodC5mYWJyaWM9e30pO2UuQWN0aXZlU2VsZWN0aW9ufHwoZS5BY3RpdmVTZWxlY3Rpb249ZS51dGlsLmNyZWF0ZUNsYXNzKGUuR3JvdXAse3R5cGU6XCJhY3RpdmVTZWxlY3Rpb25cIixpbml0aWFsaXplOmZ1bmN0aW9uKHQsaSl7aT1pfHx7fSx0aGlzLl9vYmplY3RzPXR8fFtdO2Zvcih2YXIgcj10aGlzLl9vYmplY3RzLmxlbmd0aDtyLS07KXRoaXMuX29iamVjdHNbcl0uZ3JvdXA9dGhpcztpLm9yaWdpblgmJih0aGlzLm9yaWdpblg9aS5vcmlnaW5YKSxpLm9yaWdpblkmJih0aGlzLm9yaWdpblk9aS5vcmlnaW5ZKSx0aGlzLl9jYWxjQm91bmRzKCksdGhpcy5fdXBkYXRlT2JqZWN0c0Nvb3JkcygpLGUuT2JqZWN0LnByb3RvdHlwZS5pbml0aWFsaXplLmNhbGwodGhpcyxpKSx0aGlzLnNldENvb3JkcygpfSx0b0dyb3VwOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fb2JqZWN0cy5jb25jYXQoKTt0aGlzLl9vYmplY3RzPVtdO3ZhciBpPWUuT2JqZWN0LnByb3RvdHlwZS50b09iamVjdC5jYWxsKHRoaXMpLHI9bmV3IGUuR3JvdXAoW10pO2lmKGRlbGV0ZSBpLnR5cGUsci5zZXQoaSksdC5mb3JFYWNoKChmdW5jdGlvbih0KXt0LmNhbnZhcy5yZW1vdmUodCksdC5ncm91cD1yfSkpLHIuX29iamVjdHM9dCwhdGhpcy5jYW52YXMpcmV0dXJuIHI7dmFyIG49dGhpcy5jYW52YXM7cmV0dXJuIG4uYWRkKHIpLG4uX2FjdGl2ZU9iamVjdD1yLHIuc2V0Q29vcmRzKCkscn0sb25EZXNlbGVjdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRlc3Ryb3koKSwhMX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm5cIiM8ZmFicmljLkFjdGl2ZVNlbGVjdGlvbjogKFwiK3RoaXMuY29tcGxleGl0eSgpK1wiKT5cIn0sc2hvdWxkQ2FjaGU6ZnVuY3Rpb24oKXtyZXR1cm4hMX0saXNPbkFDYWNoZTpmdW5jdGlvbigpe3JldHVybiExfSxfcmVuZGVyQ29udHJvbHM6ZnVuY3Rpb24odCxlLGkpe3Quc2F2ZSgpLHQuZ2xvYmFsQWxwaGE9dGhpcy5pc01vdmluZz90aGlzLmJvcmRlck9wYWNpdHlXaGVuTW92aW5nOjEsdGhpcy5jYWxsU3VwZXIoXCJfcmVuZGVyQ29udHJvbHNcIix0LGUpLHZvaWQgMD09PShpPWl8fHt9KS5oYXNDb250cm9scyYmKGkuaGFzQ29udHJvbHM9ITEpLGkuZm9yQWN0aXZlU2VsZWN0aW9uPSEwO2Zvcih2YXIgcj0wLG49dGhpcy5fb2JqZWN0cy5sZW5ndGg7cjxuO3IrKyl0aGlzLl9vYmplY3RzW3JdLl9yZW5kZXJDb250cm9scyh0LGkpO3QucmVzdG9yZSgpfX0pLGUuQWN0aXZlU2VsZWN0aW9uLmZyb21PYmplY3Q9ZnVuY3Rpb24odCxpKXtlLnV0aWwuZW5saXZlbk9iamVjdHModC5vYmplY3RzLChmdW5jdGlvbihyKXtkZWxldGUgdC5vYmplY3RzLGkmJmkobmV3IGUuQWN0aXZlU2VsZWN0aW9uKHIsdCwhMCkpfSkpfSl9KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPVMudXRpbC5vYmplY3QuZXh0ZW5kO3QuZmFicmljfHwodC5mYWJyaWM9e30pLHQuZmFicmljLkltYWdlP1Mud2FybihcImZhYnJpYy5JbWFnZSBpcyBhbHJlYWR5IGRlZmluZWQuXCIpOihTLkltYWdlPVMudXRpbC5jcmVhdGVDbGFzcyhTLk9iamVjdCx7dHlwZTpcImltYWdlXCIsc3Ryb2tlV2lkdGg6MCxzcmNGcm9tQXR0cmlidXRlOiExLF9sYXN0U2NhbGVYOjEsX2xhc3RTY2FsZVk6MSxfZmlsdGVyU2NhbGluZ1g6MSxfZmlsdGVyU2NhbGluZ1k6MSxtaW5pbXVtU2NhbGVUcmlnZ2VyOi41LHN0YXRlUHJvcGVydGllczpTLk9iamVjdC5wcm90b3R5cGUuc3RhdGVQcm9wZXJ0aWVzLmNvbmNhdChcImNyb3BYXCIsXCJjcm9wWVwiKSxjYWNoZVByb3BlcnRpZXM6Uy5PYmplY3QucHJvdG90eXBlLmNhY2hlUHJvcGVydGllcy5jb25jYXQoXCJjcm9wWFwiLFwiY3JvcFlcIiksY2FjaGVLZXk6XCJcIixjcm9wWDowLGNyb3BZOjAsaW1hZ2VTbW9vdGhpbmc6ITAsaW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUpe2V8fChlPXt9KSx0aGlzLmZpbHRlcnM9W10sdGhpcy5jYWNoZUtleT1cInRleHR1cmVcIitTLk9iamVjdC5fX3VpZCsrLHRoaXMuY2FsbFN1cGVyKFwiaW5pdGlhbGl6ZVwiLGUpLHRoaXMuX2luaXRFbGVtZW50KHQsZSl9LGdldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZWxlbWVudHx8e319LHNldEVsZW1lbnQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5yZW1vdmVUZXh0dXJlKHRoaXMuY2FjaGVLZXkpLHRoaXMucmVtb3ZlVGV4dHVyZSh0aGlzLmNhY2hlS2V5K1wiX2ZpbHRlcmVkXCIpLHRoaXMuX2VsZW1lbnQ9dCx0aGlzLl9vcmlnaW5hbEVsZW1lbnQ9dCx0aGlzLl9pbml0Q29uZmlnKGUpLDAhPT10aGlzLmZpbHRlcnMubGVuZ3RoJiZ0aGlzLmFwcGx5RmlsdGVycygpLHRoaXMucmVzaXplRmlsdGVyJiZ0aGlzLmFwcGx5UmVzaXplRmlsdGVycygpLHRoaXN9LHJlbW92ZVRleHR1cmU6ZnVuY3Rpb24odCl7dmFyIGU9Uy5maWx0ZXJCYWNrZW5kO2UmJmUuZXZpY3RDYWNoZXNGb3JLZXkmJmUuZXZpY3RDYWNoZXNGb3JLZXkodCl9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt0aGlzLmNhbGxTdXBlcihcImRpc3Bvc2VcIiksdGhpcy5yZW1vdmVUZXh0dXJlKHRoaXMuY2FjaGVLZXkpLHRoaXMucmVtb3ZlVGV4dHVyZSh0aGlzLmNhY2hlS2V5K1wiX2ZpbHRlcmVkXCIpLHRoaXMuX2NhY2hlQ29udGV4dD12b2lkIDAsW1wiX29yaWdpbmFsRWxlbWVudFwiLFwiX2VsZW1lbnRcIixcIl9maWx0ZXJlZEVsXCIsXCJfY2FjaGVDYW52YXNcIl0uZm9yRWFjaChmdW5jdGlvbih0KXtTLnV0aWwuY2xlYW5VcEpzZG9tTm9kZSh0aGlzW3RdKSx0aGlzW3RdPXZvaWQgMH0uYmluZCh0aGlzKSl9LGdldENyb3NzT3JpZ2luOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29yaWdpbmFsRWxlbWVudCYmKHRoaXMuX29yaWdpbmFsRWxlbWVudC5jcm9zc09yaWdpbnx8bnVsbCl9LGdldE9yaWdpbmFsU2l6ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0RWxlbWVudCgpO3JldHVybnt3aWR0aDp0Lm5hdHVyYWxXaWR0aHx8dC53aWR0aCxoZWlnaHQ6dC5uYXR1cmFsSGVpZ2h0fHx0LmhlaWdodH19LF9zdHJva2U6ZnVuY3Rpb24odCl7aWYodGhpcy5zdHJva2UmJjAhPT10aGlzLnN0cm9rZVdpZHRoKXt2YXIgZT10aGlzLndpZHRoLzIsaT10aGlzLmhlaWdodC8yO3QuYmVnaW5QYXRoKCksdC5tb3ZlVG8oLWUsLWkpLHQubGluZVRvKGUsLWkpLHQubGluZVRvKGUsaSksdC5saW5lVG8oLWUsaSksdC5saW5lVG8oLWUsLWkpLHQuY2xvc2VQYXRoKCl9fSx0b09iamVjdDpmdW5jdGlvbih0KXt2YXIgaT1bXTt0aGlzLmZpbHRlcnMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dCYmaS5wdXNoKHQudG9PYmplY3QoKSl9KSk7dmFyIHI9ZSh0aGlzLmNhbGxTdXBlcihcInRvT2JqZWN0XCIsW1wiY3JvcFhcIixcImNyb3BZXCJdLmNvbmNhdCh0KSkse3NyYzp0aGlzLmdldFNyYygpLGNyb3NzT3JpZ2luOnRoaXMuZ2V0Q3Jvc3NPcmlnaW4oKSxmaWx0ZXJzOml9KTtyZXR1cm4gdGhpcy5yZXNpemVGaWx0ZXImJihyLnJlc2l6ZUZpbHRlcj10aGlzLnJlc2l6ZUZpbHRlci50b09iamVjdCgpKSxyfSxoYXNDcm9wOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3JvcFh8fHRoaXMuY3JvcFl8fHRoaXMud2lkdGg8dGhpcy5fZWxlbWVudC53aWR0aHx8dGhpcy5oZWlnaHQ8dGhpcy5fZWxlbWVudC5oZWlnaHR9LF90b1NWRzpmdW5jdGlvbigpe3ZhciB0LGU9W10saT1bXSxyPXRoaXMuX2VsZW1lbnQsbj0tdGhpcy53aWR0aC8yLHM9LXRoaXMuaGVpZ2h0LzIsbz1cIlwiLGE9XCJcIjtpZighcilyZXR1cm5bXTtpZih0aGlzLmhhc0Nyb3AoKSl7dmFyIGg9Uy5PYmplY3QuX191aWQrKztlLnB1c2goJzxjbGlwUGF0aCBpZD1cImltYWdlQ3JvcF8nK2grJ1wiPlxcbicsJ1xcdDxyZWN0IHg9XCInK24rJ1wiIHk9XCInK3MrJ1wiIHdpZHRoPVwiJyt0aGlzLndpZHRoKydcIiBoZWlnaHQ9XCInK3RoaXMuaGVpZ2h0KydcIiAvPlxcbicsXCI8L2NsaXBQYXRoPlxcblwiKSxvPScgY2xpcC1wYXRoPVwidXJsKCNpbWFnZUNyb3BfJytoKycpXCIgJ31pZih0aGlzLmltYWdlU21vb3RoaW5nfHwoYT0nXCIgaW1hZ2UtcmVuZGVyaW5nPVwib3B0aW1pemVTcGVlZCcpLGkucHVzaChcIlxcdDxpbWFnZSBcIixcIkNPTU1PTl9QQVJUU1wiLCd4bGluazpocmVmPVwiJyx0aGlzLmdldFN2Z1NyYyghMCksJ1wiIHg9XCInLG4tdGhpcy5jcm9wWCwnXCIgeT1cIicscy10aGlzLmNyb3BZLCdcIiB3aWR0aD1cIicsci53aWR0aHx8ci5uYXR1cmFsV2lkdGgsJ1wiIGhlaWdodD1cIicsci5oZWlnaHR8fHIuaGVpZ2h0LGEsJ1wiJyxvLFwiPjwvaW1hZ2U+XFxuXCIpLHRoaXMuc3Ryb2tlfHx0aGlzLnN0cm9rZURhc2hBcnJheSl7dmFyIGw9dGhpcy5maWxsO3RoaXMuZmlsbD1udWxsLHQ9W1wiXFx0PHJlY3QgXCIsJ3g9XCInLG4sJ1wiIHk9XCInLHMsJ1wiIHdpZHRoPVwiJyx0aGlzLndpZHRoLCdcIiBoZWlnaHQ9XCInLHRoaXMuaGVpZ2h0LCdcIiBzdHlsZT1cIicsdGhpcy5nZXRTdmdTdHlsZXMoKSwnXCIvPlxcbiddLHRoaXMuZmlsbD1sfXJldHVyblwiZmlsbFwiIT09dGhpcy5wYWludEZpcnN0P2UuY29uY2F0KHQsaSk6ZS5jb25jYXQoaSx0KX0sZ2V0U3JjOmZ1bmN0aW9uKHQpe3ZhciBlPXQ/dGhpcy5fZWxlbWVudDp0aGlzLl9vcmlnaW5hbEVsZW1lbnQ7cmV0dXJuIGU/ZS50b0RhdGFVUkw/ZS50b0RhdGFVUkwoKTp0aGlzLnNyY0Zyb21BdHRyaWJ1dGU/ZS5nZXRBdHRyaWJ1dGUoXCJzcmNcIik6ZS5zcmM6dGhpcy5zcmN8fFwiXCJ9LHNldFNyYzpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIFMudXRpbC5sb2FkSW1hZ2UodCwoZnVuY3Rpb24odCxyKXt0aGlzLnNldEVsZW1lbnQodCxpKSx0aGlzLl9zZXRXaWR0aEhlaWdodCgpLGUmJmUodGhpcyxyKX0pLHRoaXMsaSYmaS5jcm9zc09yaWdpbiksdGhpc30sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4nIzxmYWJyaWMuSW1hZ2U6IHsgc3JjOiBcIicrdGhpcy5nZXRTcmMoKSsnXCIgfT4nfSxhcHBseVJlc2l6ZUZpbHRlcnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnJlc2l6ZUZpbHRlcixlPXRoaXMubWluaW11bVNjYWxlVHJpZ2dlcixpPXRoaXMuZ2V0VG90YWxPYmplY3RTY2FsaW5nKCkscj1pLnNjYWxlWCxuPWkuc2NhbGVZLHM9dGhpcy5fZmlsdGVyZWRFbHx8dGhpcy5fb3JpZ2luYWxFbGVtZW50O2lmKHRoaXMuZ3JvdXAmJnRoaXMuc2V0KFwiZGlydHlcIiwhMCksIXR8fHI+ZSYmbj5lKXJldHVybiB0aGlzLl9lbGVtZW50PXMsdGhpcy5fZmlsdGVyU2NhbGluZ1g9MSx0aGlzLl9maWx0ZXJTY2FsaW5nWT0xLHRoaXMuX2xhc3RTY2FsZVg9cix2b2lkKHRoaXMuX2xhc3RTY2FsZVk9bik7Uy5maWx0ZXJCYWNrZW5kfHwoUy5maWx0ZXJCYWNrZW5kPVMuaW5pdEZpbHRlckJhY2tlbmQoKSk7dmFyIG89Uy51dGlsLmNyZWF0ZUNhbnZhc0VsZW1lbnQoKSxhPXRoaXMuX2ZpbHRlcmVkRWw/dGhpcy5jYWNoZUtleStcIl9maWx0ZXJlZFwiOnRoaXMuY2FjaGVLZXksaD1zLndpZHRoLGw9cy5oZWlnaHQ7by53aWR0aD1oLG8uaGVpZ2h0PWwsdGhpcy5fZWxlbWVudD1vLHRoaXMuX2xhc3RTY2FsZVg9dC5zY2FsZVg9cix0aGlzLl9sYXN0U2NhbGVZPXQuc2NhbGVZPW4sUy5maWx0ZXJCYWNrZW5kLmFwcGx5RmlsdGVycyhbdF0scyxoLGwsdGhpcy5fZWxlbWVudCxhKSx0aGlzLl9maWx0ZXJTY2FsaW5nWD1vLndpZHRoL3RoaXMuX29yaWdpbmFsRWxlbWVudC53aWR0aCx0aGlzLl9maWx0ZXJTY2FsaW5nWT1vLmhlaWdodC90aGlzLl9vcmlnaW5hbEVsZW1lbnQuaGVpZ2h0fSxhcHBseUZpbHRlcnM6ZnVuY3Rpb24odCl7aWYodD0odD10fHx0aGlzLmZpbHRlcnN8fFtdKS5maWx0ZXIoKGZ1bmN0aW9uKHQpe3JldHVybiB0JiYhdC5pc05ldXRyYWxTdGF0ZSgpfSkpLHRoaXMuc2V0KFwiZGlydHlcIiwhMCksdGhpcy5yZW1vdmVUZXh0dXJlKHRoaXMuY2FjaGVLZXkrXCJfZmlsdGVyZWRcIiksMD09PXQubGVuZ3RoKXJldHVybiB0aGlzLl9lbGVtZW50PXRoaXMuX29yaWdpbmFsRWxlbWVudCx0aGlzLl9maWx0ZXJlZEVsPW51bGwsdGhpcy5fZmlsdGVyU2NhbGluZ1g9MSx0aGlzLl9maWx0ZXJTY2FsaW5nWT0xLHRoaXM7dmFyIGU9dGhpcy5fb3JpZ2luYWxFbGVtZW50LGk9ZS5uYXR1cmFsV2lkdGh8fGUud2lkdGgscj1lLm5hdHVyYWxIZWlnaHR8fGUuaGVpZ2h0O2lmKHRoaXMuX2VsZW1lbnQ9PT10aGlzLl9vcmlnaW5hbEVsZW1lbnQpe3ZhciBuPVMudXRpbC5jcmVhdGVDYW52YXNFbGVtZW50KCk7bi53aWR0aD1pLG4uaGVpZ2h0PXIsdGhpcy5fZWxlbWVudD1uLHRoaXMuX2ZpbHRlcmVkRWw9bn1lbHNlIHRoaXMuX2VsZW1lbnQ9dGhpcy5fZmlsdGVyZWRFbCx0aGlzLl9maWx0ZXJlZEVsLmdldENvbnRleHQoXCIyZFwiKS5jbGVhclJlY3QoMCwwLGksciksdGhpcy5fbGFzdFNjYWxlWD0xLHRoaXMuX2xhc3RTY2FsZVk9MTtyZXR1cm4gUy5maWx0ZXJCYWNrZW5kfHwoUy5maWx0ZXJCYWNrZW5kPVMuaW5pdEZpbHRlckJhY2tlbmQoKSksUy5maWx0ZXJCYWNrZW5kLmFwcGx5RmlsdGVycyh0LHRoaXMuX29yaWdpbmFsRWxlbWVudCxpLHIsdGhpcy5fZWxlbWVudCx0aGlzLmNhY2hlS2V5KSx0aGlzLl9vcmlnaW5hbEVsZW1lbnQud2lkdGg9PT10aGlzLl9lbGVtZW50LndpZHRoJiZ0aGlzLl9vcmlnaW5hbEVsZW1lbnQuaGVpZ2h0PT09dGhpcy5fZWxlbWVudC5oZWlnaHR8fCh0aGlzLl9maWx0ZXJTY2FsaW5nWD10aGlzLl9lbGVtZW50LndpZHRoL3RoaXMuX29yaWdpbmFsRWxlbWVudC53aWR0aCx0aGlzLl9maWx0ZXJTY2FsaW5nWT10aGlzLl9lbGVtZW50LmhlaWdodC90aGlzLl9vcmlnaW5hbEVsZW1lbnQuaGVpZ2h0KSx0aGlzfSxfcmVuZGVyOmZ1bmN0aW9uKHQpe1MudXRpbC5zZXRJbWFnZVNtb290aGluZyh0LHRoaXMuaW1hZ2VTbW9vdGhpbmcpLCEwIT09dGhpcy5pc01vdmluZyYmdGhpcy5yZXNpemVGaWx0ZXImJnRoaXMuX25lZWRzUmVzaXplKCkmJnRoaXMuYXBwbHlSZXNpemVGaWx0ZXJzKCksdGhpcy5fc3Ryb2tlKHQpLHRoaXMuX3JlbmRlclBhaW50SW5PcmRlcih0KX0sZHJhd0NhY2hlT25DYW52YXM6ZnVuY3Rpb24odCl7Uy51dGlsLnNldEltYWdlU21vb3RoaW5nKHQsdGhpcy5pbWFnZVNtb290aGluZyksUy5PYmplY3QucHJvdG90eXBlLmRyYXdDYWNoZU9uQ2FudmFzLmNhbGwodGhpcyx0KX0sc2hvdWxkQ2FjaGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uZWVkc0l0c093bkNhY2hlKCl9LF9yZW5kZXJGaWxsOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2VsZW1lbnQ7aWYoZSl7dmFyIGk9dGhpcy5fZmlsdGVyU2NhbGluZ1gscj10aGlzLl9maWx0ZXJTY2FsaW5nWSxuPXRoaXMud2lkdGgscz10aGlzLmhlaWdodCxvPU1hdGgubWluLGE9TWF0aC5tYXgsaD1hKHRoaXMuY3JvcFgsMCksbD1hKHRoaXMuY3JvcFksMCksYz1lLm5hdHVyYWxXaWR0aHx8ZS53aWR0aCx1PWUubmF0dXJhbEhlaWdodHx8ZS5oZWlnaHQsZD1oKmksZj1sKnIsZz1vKG4qaSxjLWQpLG09byhzKnIsdS1mKSxwPS1uLzIsdj0tcy8yLF89byhuLGMvaS1oKSx5PW8ocyx1L3ItbCk7ZSYmdC5kcmF3SW1hZ2UoZSxkLGYsZyxtLHAsdixfLHkpfX0sX25lZWRzUmVzaXplOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRUb3RhbE9iamVjdFNjYWxpbmcoKTtyZXR1cm4gdC5zY2FsZVghPT10aGlzLl9sYXN0U2NhbGVYfHx0LnNjYWxlWSE9PXRoaXMuX2xhc3RTY2FsZVl9LF9yZXNldFdpZHRoSGVpZ2h0OmZ1bmN0aW9uKCl7dGhpcy5zZXQodGhpcy5nZXRPcmlnaW5hbFNpemUoKSl9LF9pbml0RWxlbWVudDpmdW5jdGlvbih0LGUpe3RoaXMuc2V0RWxlbWVudChTLnV0aWwuZ2V0QnlJZCh0KSxlKSxTLnV0aWwuYWRkQ2xhc3ModGhpcy5nZXRFbGVtZW50KCksUy5JbWFnZS5DU1NfQ0FOVkFTKX0sX2luaXRDb25maWc6ZnVuY3Rpb24odCl7dHx8KHQ9e30pLHRoaXMuc2V0T3B0aW9ucyh0KSx0aGlzLl9zZXRXaWR0aEhlaWdodCh0KX0sX2luaXRGaWx0ZXJzOmZ1bmN0aW9uKHQsZSl7dCYmdC5sZW5ndGg/Uy51dGlsLmVubGl2ZW5PYmplY3RzKHQsKGZ1bmN0aW9uKHQpe2UmJmUodCl9KSxcImZhYnJpYy5JbWFnZS5maWx0ZXJzXCIpOmUmJmUoKX0sX3NldFdpZHRoSGVpZ2h0OmZ1bmN0aW9uKHQpe3R8fCh0PXt9KTt2YXIgZT10aGlzLmdldEVsZW1lbnQoKTt0aGlzLndpZHRoPXQud2lkdGh8fGUubmF0dXJhbFdpZHRofHxlLndpZHRofHwwLHRoaXMuaGVpZ2h0PXQuaGVpZ2h0fHxlLm5hdHVyYWxIZWlnaHR8fGUuaGVpZ2h0fHwwfSxwYXJzZVByZXNlcnZlQXNwZWN0UmF0aW9BdHRyaWJ1dGU6ZnVuY3Rpb24oKXt2YXIgdCxlPVMudXRpbC5wYXJzZVByZXNlcnZlQXNwZWN0UmF0aW9BdHRyaWJ1dGUodGhpcy5wcmVzZXJ2ZUFzcGVjdFJhdGlvfHxcIlwiKSxpPXRoaXMuX2VsZW1lbnQud2lkdGgscj10aGlzLl9lbGVtZW50LmhlaWdodCxuPTEscz0xLG89MCxhPTAsaD0wLGw9MCxjPXRoaXMud2lkdGgsdT10aGlzLmhlaWdodCxkPXt3aWR0aDpjLGhlaWdodDp1fTtyZXR1cm4hZXx8XCJub25lXCI9PT1lLmFsaWduWCYmXCJub25lXCI9PT1lLmFsaWduWT8obj1jL2kscz11L3IpOihcIm1lZXRcIj09PWUubWVldE9yU2xpY2UmJih0PShjLWkqKG49cz1TLnV0aWwuZmluZFNjYWxlVG9GaXQodGhpcy5fZWxlbWVudCxkKSkpLzIsXCJNaW5cIj09PWUuYWxpZ25YJiYobz0tdCksXCJNYXhcIj09PWUuYWxpZ25YJiYobz10KSx0PSh1LXIqcykvMixcIk1pblwiPT09ZS5hbGlnblkmJihhPS10KSxcIk1heFwiPT09ZS5hbGlnblkmJihhPXQpKSxcInNsaWNlXCI9PT1lLm1lZXRPclNsaWNlJiYodD1pLWMvKG49cz1TLnV0aWwuZmluZFNjYWxlVG9Db3Zlcih0aGlzLl9lbGVtZW50LGQpKSxcIk1pZFwiPT09ZS5hbGlnblgmJihoPXQvMiksXCJNYXhcIj09PWUuYWxpZ25YJiYoaD10KSx0PXItdS9zLFwiTWlkXCI9PT1lLmFsaWduWSYmKGw9dC8yKSxcIk1heFwiPT09ZS5hbGlnblkmJihsPXQpLGk9Yy9uLHI9dS9zKSkse3dpZHRoOmksaGVpZ2h0OnIsc2NhbGVYOm4sc2NhbGVZOnMsb2Zmc2V0TGVmdDpvLG9mZnNldFRvcDphLGNyb3BYOmgsY3JvcFk6bH19fSksUy5JbWFnZS5DU1NfQ0FOVkFTPVwiY2FudmFzLWltZ1wiLFMuSW1hZ2UucHJvdG90eXBlLmdldFN2Z1NyYz1TLkltYWdlLnByb3RvdHlwZS5nZXRTcmMsUy5JbWFnZS5mcm9tT2JqZWN0PWZ1bmN0aW9uKHQsZSl7dmFyIGk9Uy51dGlsLm9iamVjdC5jbG9uZSh0KTtTLnV0aWwubG9hZEltYWdlKGkuc3JjLChmdW5jdGlvbih0LHIpe3I/ZSYmZShudWxsLCEwKTpTLkltYWdlLnByb3RvdHlwZS5faW5pdEZpbHRlcnMuY2FsbChpLGkuZmlsdGVycywoZnVuY3Rpb24ocil7aS5maWx0ZXJzPXJ8fFtdLFMuSW1hZ2UucHJvdG90eXBlLl9pbml0RmlsdGVycy5jYWxsKGksW2kucmVzaXplRmlsdGVyXSwoZnVuY3Rpb24ocil7aS5yZXNpemVGaWx0ZXI9clswXSxTLnV0aWwuZW5saXZlbk9iamVjdEVubGl2YWJsZXMoaSxpLChmdW5jdGlvbigpe3ZhciByPW5ldyBTLkltYWdlKHQsaSk7ZShyLCExKX0pKX0pKX0pKX0pLG51bGwsaS5jcm9zc09yaWdpbil9LFMuSW1hZ2UuZnJvbVVSTD1mdW5jdGlvbih0LGUsaSl7Uy51dGlsLmxvYWRJbWFnZSh0LChmdW5jdGlvbih0LHIpe2UmJmUobmV3IFMuSW1hZ2UodCxpKSxyKX0pLG51bGwsaSYmaS5jcm9zc09yaWdpbil9LFMuSW1hZ2UuQVRUUklCVVRFX05BTUVTPVMuU0hBUkVEX0FUVFJJQlVURVMuY29uY2F0KFwieCB5IHdpZHRoIGhlaWdodCBwcmVzZXJ2ZUFzcGVjdFJhdGlvIHhsaW5rOmhyZWYgY3Jvc3NPcmlnaW4gaW1hZ2UtcmVuZGVyaW5nXCIuc3BsaXQoXCIgXCIpKSxTLkltYWdlLmZyb21FbGVtZW50PWZ1bmN0aW9uKHQsaSxyKXt2YXIgbj1TLnBhcnNlQXR0cmlidXRlcyh0LFMuSW1hZ2UuQVRUUklCVVRFX05BTUVTKTtTLkltYWdlLmZyb21VUkwobltcInhsaW5rOmhyZWZcIl0saSxlKHI/Uy51dGlsLm9iamVjdC5jbG9uZShyKTp7fSxuKSl9KX0oZSksUy51dGlsLm9iamVjdC5leHRlbmQoUy5PYmplY3QucHJvdG90eXBlLHtfZ2V0QW5nbGVWYWx1ZUZvclN0cmFpZ2h0ZW46ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmFuZ2xlJTM2MDtyZXR1cm4gdD4wPzkwKk1hdGgucm91bmQoKHQtMSkvOTApOjkwKk1hdGgucm91bmQodC85MCl9LHN0cmFpZ2h0ZW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yb3RhdGUodGhpcy5fZ2V0QW5nbGVWYWx1ZUZvclN0cmFpZ2h0ZW4oKSl9LGZ4U3RyYWlnaHRlbjpmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe30saT0odD10fHx7fSkub25Db21wbGV0ZXx8ZSxyPXQub25DaGFuZ2V8fGUsbj10aGlzO3JldHVybiBTLnV0aWwuYW5pbWF0ZSh7dGFyZ2V0OnRoaXMsc3RhcnRWYWx1ZTp0aGlzLmdldChcImFuZ2xlXCIpLGVuZFZhbHVlOnRoaXMuX2dldEFuZ2xlVmFsdWVGb3JTdHJhaWdodGVuKCksZHVyYXRpb246dGhpcy5GWF9EVVJBVElPTixvbkNoYW5nZTpmdW5jdGlvbih0KXtuLnJvdGF0ZSh0KSxyKCl9LG9uQ29tcGxldGU6ZnVuY3Rpb24oKXtuLnNldENvb3JkcygpLGkoKX19KX19KSxTLnV0aWwub2JqZWN0LmV4dGVuZChTLlN0YXRpY0NhbnZhcy5wcm90b3R5cGUse3N0cmFpZ2h0ZW5PYmplY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHQuc3RyYWlnaHRlbigpLHRoaXMucmVxdWVzdFJlbmRlckFsbCgpLHRoaXN9LGZ4U3RyYWlnaHRlbk9iamVjdDpmdW5jdGlvbih0KXtyZXR1cm4gdC5meFN0cmFpZ2h0ZW4oe29uQ2hhbmdlOnRoaXMucmVxdWVzdFJlbmRlckFsbEJvdW5kfSl9fSksZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dmFyIGk9XCJwcmVjaXNpb24gXCIrZStcIiBmbG9hdDtcXG52b2lkIG1haW4oKXt9XCIscj10LmNyZWF0ZVNoYWRlcih0LkZSQUdNRU5UX1NIQURFUik7cmV0dXJuIHQuc2hhZGVyU291cmNlKHIsaSksdC5jb21waWxlU2hhZGVyKHIpLCEhdC5nZXRTaGFkZXJQYXJhbWV0ZXIocix0LkNPTVBJTEVfU1RBVFVTKX1mdW5jdGlvbiBlKHQpe3QmJnQudGlsZVNpemUmJih0aGlzLnRpbGVTaXplPXQudGlsZVNpemUpLHRoaXMuc2V0dXBHTENvbnRleHQodGhpcy50aWxlU2l6ZSx0aGlzLnRpbGVTaXplKSx0aGlzLmNhcHR1cmVHUFVJbmZvKCl9Uy5pc1dlYmdsU3VwcG9ydGVkPWZ1bmN0aW9uKGUpe2lmKFMuaXNMaWtlbHlOb2RlKXJldHVybiExO2U9ZXx8Uy5XZWJnbEZpbHRlckJhY2tlbmQucHJvdG90eXBlLnRpbGVTaXplO3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikscj1pLmdldENvbnRleHQoXCJ3ZWJnbFwiKXx8aS5nZXRDb250ZXh0KFwiZXhwZXJpbWVudGFsLXdlYmdsXCIpLG49ITE7aWYocil7Uy5tYXhUZXh0dXJlU2l6ZT1yLmdldFBhcmFtZXRlcihyLk1BWF9URVhUVVJFX1NJWkUpLG49Uy5tYXhUZXh0dXJlU2l6ZT49ZTtmb3IodmFyIHM9W1wiaGlnaHBcIixcIm1lZGl1bXBcIixcImxvd3BcIl0sbz0wO288MztvKyspaWYodChyLHNbb10pKXtTLndlYkdsUHJlY2lzaW9uPXNbb107YnJlYWt9fXJldHVybiB0aGlzLmlzU3VwcG9ydGVkPW4sbn0sUy5XZWJnbEZpbHRlckJhY2tlbmQ9ZSxlLnByb3RvdHlwZT17dGlsZVNpemU6MjA0OCxyZXNvdXJjZXM6e30sc2V0dXBHTENvbnRleHQ6ZnVuY3Rpb24odCxlKXt0aGlzLmRpc3Bvc2UoKSx0aGlzLmNyZWF0ZVdlYkdMQ2FudmFzKHQsZSksdGhpcy5hUG9zaXRpb249bmV3IEZsb2F0MzJBcnJheShbMCwwLDAsMSwxLDAsMSwxXSksdGhpcy5jaG9vc2VGYXN0ZXN0Q29weUdMVG8yRE1ldGhvZCh0LGUpfSxjaG9vc2VGYXN0ZXN0Q29weUdMVG8yRE1ldGhvZDpmdW5jdGlvbih0LGUpe3ZhciBpLHI9dm9pZCAwIT09d2luZG93LnBlcmZvcm1hbmNlO3RyeXtuZXcgSW1hZ2VEYXRhKDEsMSksaT0hMH1jYXRjaCh0KXtpPSExfXZhciBuPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBBcnJheUJ1ZmZlcixzPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBVaW50OENsYW1wZWRBcnJheTtpZihyJiZpJiZuJiZzKXt2YXIgbz1TLnV0aWwuY3JlYXRlQ2FudmFzRWxlbWVudCgpLGE9bmV3IEFycmF5QnVmZmVyKHQqZSo0KTtpZihTLmZvcmNlR0xQdXRJbWFnZURhdGEpcmV0dXJuIHRoaXMuaW1hZ2VCdWZmZXI9YSx2b2lkKHRoaXMuY29weUdMVG8yRD1PKTt2YXIgaCxsLGM9e2ltYWdlQnVmZmVyOmEsZGVzdGluYXRpb25XaWR0aDp0LGRlc3RpbmF0aW9uSGVpZ2h0OmUsdGFyZ2V0Q2FudmFzOm99O28ud2lkdGg9dCxvLmhlaWdodD1lLGg9d2luZG93LnBlcmZvcm1hbmNlLm5vdygpLEUuY2FsbChjLHRoaXMuZ2wsYyksbD13aW5kb3cucGVyZm9ybWFuY2Uubm93KCktaCxoPXdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSxPLmNhbGwoYyx0aGlzLmdsLGMpLGw+d2luZG93LnBlcmZvcm1hbmNlLm5vdygpLWg/KHRoaXMuaW1hZ2VCdWZmZXI9YSx0aGlzLmNvcHlHTFRvMkQ9Tyk6dGhpcy5jb3B5R0xUbzJEPUV9fSxjcmVhdGVXZWJHTENhbnZhczpmdW5jdGlvbih0LGUpe3ZhciBpPVMudXRpbC5jcmVhdGVDYW52YXNFbGVtZW50KCk7aS53aWR0aD10LGkuaGVpZ2h0PWU7dmFyIHI9e2FscGhhOiEwLHByZW11bHRpcGxpZWRBbHBoYTohMSxkZXB0aDohMSxzdGVuY2lsOiExLGFudGlhbGlhczohMX0sbj1pLmdldENvbnRleHQoXCJ3ZWJnbFwiLHIpO258fChuPWkuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLHIpKSxuJiYobi5jbGVhckNvbG9yKDAsMCwwLDApLHRoaXMuY2FudmFzPWksdGhpcy5nbD1uKX0sYXBwbHlGaWx0ZXJzOmZ1bmN0aW9uKHQsZSxpLHIsbixzKXt2YXIgbyxhPXRoaXMuZ2w7cyYmKG89dGhpcy5nZXRDYWNoZWRUZXh0dXJlKHMsZSkpO3ZhciBoPXtvcmlnaW5hbFdpZHRoOmUud2lkdGh8fGUub3JpZ2luYWxXaWR0aCxvcmlnaW5hbEhlaWdodDplLmhlaWdodHx8ZS5vcmlnaW5hbEhlaWdodCxzb3VyY2VXaWR0aDppLHNvdXJjZUhlaWdodDpyLGRlc3RpbmF0aW9uV2lkdGg6aSxkZXN0aW5hdGlvbkhlaWdodDpyLGNvbnRleHQ6YSxzb3VyY2VUZXh0dXJlOnRoaXMuY3JlYXRlVGV4dHVyZShhLGksciwhbyYmZSksdGFyZ2V0VGV4dHVyZTp0aGlzLmNyZWF0ZVRleHR1cmUoYSxpLHIpLG9yaWdpbmFsVGV4dHVyZTpvfHx0aGlzLmNyZWF0ZVRleHR1cmUoYSxpLHIsIW8mJmUpLHBhc3Nlczp0Lmxlbmd0aCx3ZWJnbDohMCxhUG9zaXRpb246dGhpcy5hUG9zaXRpb24scHJvZ3JhbUNhY2hlOnRoaXMucHJvZ3JhbUNhY2hlLHBhc3M6MCxmaWx0ZXJCYWNrZW5kOnRoaXMsdGFyZ2V0Q2FudmFzOm59LGw9YS5jcmVhdGVGcmFtZWJ1ZmZlcigpO3JldHVybiBhLmJpbmRGcmFtZWJ1ZmZlcihhLkZSQU1FQlVGRkVSLGwpLHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7dCYmdC5hcHBseVRvKGgpfSkpLGZ1bmN0aW9uKHQpe3ZhciBlPXQudGFyZ2V0Q2FudmFzLGk9ZS53aWR0aCxyPWUuaGVpZ2h0LG49dC5kZXN0aW5hdGlvbldpZHRoLHM9dC5kZXN0aW5hdGlvbkhlaWdodDtpPT09biYmcj09PXN8fChlLndpZHRoPW4sZS5oZWlnaHQ9cyl9KGgpLHRoaXMuY29weUdMVG8yRChhLGgpLGEuYmluZFRleHR1cmUoYS5URVhUVVJFXzJELG51bGwpLGEuZGVsZXRlVGV4dHVyZShoLnNvdXJjZVRleHR1cmUpLGEuZGVsZXRlVGV4dHVyZShoLnRhcmdldFRleHR1cmUpLGEuZGVsZXRlRnJhbWVidWZmZXIobCksbi5nZXRDb250ZXh0KFwiMmRcIikuc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKSxofSxkaXNwb3NlOmZ1bmN0aW9uKCl7dGhpcy5jYW52YXMmJih0aGlzLmNhbnZhcz1udWxsLHRoaXMuZ2w9bnVsbCksdGhpcy5jbGVhcldlYkdMQ2FjaGVzKCl9LGNsZWFyV2ViR0xDYWNoZXM6ZnVuY3Rpb24oKXt0aGlzLnByb2dyYW1DYWNoZT17fSx0aGlzLnRleHR1cmVDYWNoZT17fX0sY3JlYXRlVGV4dHVyZTpmdW5jdGlvbih0LGUsaSxyKXt2YXIgbj10LmNyZWF0ZVRleHR1cmUoKTtyZXR1cm4gdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsbiksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfTUFHX0ZJTFRFUix0Lk5FQVJFU1QpLHQudGV4UGFyYW1ldGVyaSh0LlRFWFRVUkVfMkQsdC5URVhUVVJFX01JTl9GSUxURVIsdC5ORUFSRVNUKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9XUkFQX1MsdC5DTEFNUF9UT19FREdFKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9XUkFQX1QsdC5DTEFNUF9UT19FREdFKSxyP3QudGV4SW1hZ2UyRCh0LlRFWFRVUkVfMkQsMCx0LlJHQkEsdC5SR0JBLHQuVU5TSUdORURfQllURSxyKTp0LnRleEltYWdlMkQodC5URVhUVVJFXzJELDAsdC5SR0JBLGUsaSwwLHQuUkdCQSx0LlVOU0lHTkVEX0JZVEUsbnVsbCksbn0sZ2V0Q2FjaGVkVGV4dHVyZTpmdW5jdGlvbih0LGUpe2lmKHRoaXMudGV4dHVyZUNhY2hlW3RdKXJldHVybiB0aGlzLnRleHR1cmVDYWNoZVt0XTt2YXIgaT10aGlzLmNyZWF0ZVRleHR1cmUodGhpcy5nbCxlLndpZHRoLGUuaGVpZ2h0LGUpO3JldHVybiB0aGlzLnRleHR1cmVDYWNoZVt0XT1pLGl9LGV2aWN0Q2FjaGVzRm9yS2V5OmZ1bmN0aW9uKHQpe3RoaXMudGV4dHVyZUNhY2hlW3RdJiYodGhpcy5nbC5kZWxldGVUZXh0dXJlKHRoaXMudGV4dHVyZUNhY2hlW3RdKSxkZWxldGUgdGhpcy50ZXh0dXJlQ2FjaGVbdF0pfSxjb3B5R0xUbzJEOkUsY2FwdHVyZUdQVUluZm86ZnVuY3Rpb24oKXtpZih0aGlzLmdwdUluZm8pcmV0dXJuIHRoaXMuZ3B1SW5mbzt2YXIgdD10aGlzLmdsLGU9e3JlbmRlcmVyOlwiXCIsdmVuZG9yOlwiXCJ9O2lmKCF0KXJldHVybiBlO3ZhciBpPXQuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfZGVidWdfcmVuZGVyZXJfaW5mb1wiKTtpZihpKXt2YXIgcj10LmdldFBhcmFtZXRlcihpLlVOTUFTS0VEX1JFTkRFUkVSX1dFQkdMKSxuPXQuZ2V0UGFyYW1ldGVyKGkuVU5NQVNLRURfVkVORE9SX1dFQkdMKTtyJiYoZS5yZW5kZXJlcj1yLnRvTG93ZXJDYXNlKCkpLG4mJihlLnZlbmRvcj1uLnRvTG93ZXJDYXNlKCkpfXJldHVybiB0aGlzLmdwdUluZm89ZSxlfX19KCksZnVuY3Rpb24oKXt2YXIgdD1mdW5jdGlvbigpe307ZnVuY3Rpb24gZSgpe31TLkNhbnZhczJkRmlsdGVyQmFja2VuZD1lLGUucHJvdG90eXBlPXtldmljdENhY2hlc0ZvcktleTp0LGRpc3Bvc2U6dCxjbGVhcldlYkdMQ2FjaGVzOnQscmVzb3VyY2VzOnt9LGFwcGx5RmlsdGVyczpmdW5jdGlvbih0LGUsaSxyLG4pe3ZhciBzPW4uZ2V0Q29udGV4dChcIjJkXCIpO3MuZHJhd0ltYWdlKGUsMCwwLGkscik7dmFyIG89e3NvdXJjZVdpZHRoOmksc291cmNlSGVpZ2h0OnIsaW1hZ2VEYXRhOnMuZ2V0SW1hZ2VEYXRhKDAsMCxpLHIpLG9yaWdpbmFsRWw6ZSxvcmlnaW5hbEltYWdlRGF0YTpzLmdldEltYWdlRGF0YSgwLDAsaSxyKSxjYW52YXNFbDpuLGN0eDpzLGZpbHRlckJhY2tlbmQ6dGhpc307cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5hcHBseVRvKG8pfSkpLG8uaW1hZ2VEYXRhLndpZHRoPT09aSYmby5pbWFnZURhdGEuaGVpZ2h0PT09cnx8KG4ud2lkdGg9by5pbWFnZURhdGEud2lkdGgsbi5oZWlnaHQ9by5pbWFnZURhdGEuaGVpZ2h0KSxzLnB1dEltYWdlRGF0YShvLmltYWdlRGF0YSwwLDApLG99fX0oKSxTLkltYWdlPVMuSW1hZ2V8fHt9LFMuSW1hZ2UuZmlsdGVycz1TLkltYWdlLmZpbHRlcnN8fHt9LFMuSW1hZ2UuZmlsdGVycy5CYXNlRmlsdGVyPVMudXRpbC5jcmVhdGVDbGFzcyh7dHlwZTpcIkJhc2VGaWx0ZXJcIix2ZXJ0ZXhTb3VyY2U6XCJhdHRyaWJ1dGUgdmVjMiBhUG9zaXRpb247XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG52b2lkIG1haW4oKSB7XFxudlRleENvb3JkID0gYVBvc2l0aW9uO1xcbmdsX1Bvc2l0aW9uID0gdmVjNChhUG9zaXRpb24gKiAyLjAgLSAxLjAsIDAuMCwgMS4wKTtcXG59XCIsZnJhZ21lbnRTb3VyY2U6XCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG51bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcXG52b2lkIG1haW4oKSB7XFxuZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VGV4Q29vcmQpO1xcbn1cIixpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3QmJnRoaXMuc2V0T3B0aW9ucyh0KX0sc2V0T3B0aW9uczpmdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdCl0aGlzW2VdPXRbZV19LGNyZWF0ZVByb2dyYW06ZnVuY3Rpb24odCxlLGkpe2U9ZXx8dGhpcy5mcmFnbWVudFNvdXJjZSxpPWl8fHRoaXMudmVydGV4U291cmNlLFwiaGlnaHBcIiE9PVMud2ViR2xQcmVjaXNpb24mJihlPWUucmVwbGFjZSgvcHJlY2lzaW9uIGhpZ2hwIGZsb2F0L2csXCJwcmVjaXNpb24gXCIrUy53ZWJHbFByZWNpc2lvbitcIiBmbG9hdFwiKSk7dmFyIHI9dC5jcmVhdGVTaGFkZXIodC5WRVJURVhfU0hBREVSKTtpZih0LnNoYWRlclNvdXJjZShyLGkpLHQuY29tcGlsZVNoYWRlcihyKSwhdC5nZXRTaGFkZXJQYXJhbWV0ZXIocix0LkNPTVBJTEVfU1RBVFVTKSl0aHJvdyBuZXcgRXJyb3IoXCJWZXJ0ZXggc2hhZGVyIGNvbXBpbGUgZXJyb3IgZm9yIFwiK3RoaXMudHlwZStcIjogXCIrdC5nZXRTaGFkZXJJbmZvTG9nKHIpKTt2YXIgbj10LmNyZWF0ZVNoYWRlcih0LkZSQUdNRU5UX1NIQURFUik7aWYodC5zaGFkZXJTb3VyY2UobixlKSx0LmNvbXBpbGVTaGFkZXIobiksIXQuZ2V0U2hhZGVyUGFyYW1ldGVyKG4sdC5DT01QSUxFX1NUQVRVUykpdGhyb3cgbmV3IEVycm9yKFwiRnJhZ21lbnQgc2hhZGVyIGNvbXBpbGUgZXJyb3IgZm9yIFwiK3RoaXMudHlwZStcIjogXCIrdC5nZXRTaGFkZXJJbmZvTG9nKG4pKTt2YXIgcz10LmNyZWF0ZVByb2dyYW0oKTtpZih0LmF0dGFjaFNoYWRlcihzLHIpLHQuYXR0YWNoU2hhZGVyKHMsbiksdC5saW5rUHJvZ3JhbShzKSwhdC5nZXRQcm9ncmFtUGFyYW1ldGVyKHMsdC5MSU5LX1NUQVRVUykpdGhyb3cgbmV3IEVycm9yKCdTaGFkZXIgbGluayBlcnJvciBmb3IgXCIke3RoaXMudHlwZX1cIiAnK3QuZ2V0UHJvZ3JhbUluZm9Mb2cocykpO3ZhciBvPXRoaXMuZ2V0QXR0cmlidXRlTG9jYXRpb25zKHQscyksYT10aGlzLmdldFVuaWZvcm1Mb2NhdGlvbnModCxzKXx8e307cmV0dXJuIGEudVN0ZXBXPXQuZ2V0VW5pZm9ybUxvY2F0aW9uKHMsXCJ1U3RlcFdcIiksYS51U3RlcEg9dC5nZXRVbmlmb3JtTG9jYXRpb24ocyxcInVTdGVwSFwiKSx7cHJvZ3JhbTpzLGF0dHJpYnV0ZUxvY2F0aW9uczpvLHVuaWZvcm1Mb2NhdGlvbnM6YX19LGdldEF0dHJpYnV0ZUxvY2F0aW9uczpmdW5jdGlvbih0LGUpe3JldHVybnthUG9zaXRpb246dC5nZXRBdHRyaWJMb2NhdGlvbihlLFwiYVBvc2l0aW9uXCIpfX0sZ2V0VW5pZm9ybUxvY2F0aW9uczpmdW5jdGlvbigpe3JldHVybnt9fSxzZW5kQXR0cmlidXRlRGF0YTpmdW5jdGlvbih0LGUsaSl7dmFyIHI9ZS5hUG9zaXRpb24sbj10LmNyZWF0ZUJ1ZmZlcigpO3QuYmluZEJ1ZmZlcih0LkFSUkFZX0JVRkZFUixuKSx0LmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KHIpLHQudmVydGV4QXR0cmliUG9pbnRlcihyLDIsdC5GTE9BVCwhMSwwLDApLHQuYnVmZmVyRGF0YSh0LkFSUkFZX0JVRkZFUixpLHQuU1RBVElDX0RSQVcpfSxfc2V0dXBGcmFtZUJ1ZmZlcjpmdW5jdGlvbih0KXt2YXIgZSxpLHI9dC5jb250ZXh0O3QucGFzc2VzPjE/KGU9dC5kZXN0aW5hdGlvbldpZHRoLGk9dC5kZXN0aW5hdGlvbkhlaWdodCx0LnNvdXJjZVdpZHRoPT09ZSYmdC5zb3VyY2VIZWlnaHQ9PT1pfHwoci5kZWxldGVUZXh0dXJlKHQudGFyZ2V0VGV4dHVyZSksdC50YXJnZXRUZXh0dXJlPXQuZmlsdGVyQmFja2VuZC5jcmVhdGVUZXh0dXJlKHIsZSxpKSksci5mcmFtZWJ1ZmZlclRleHR1cmUyRChyLkZSQU1FQlVGRkVSLHIuQ09MT1JfQVRUQUNITUVOVDAsci5URVhUVVJFXzJELHQudGFyZ2V0VGV4dHVyZSwwKSk6KHIuYmluZEZyYW1lYnVmZmVyKHIuRlJBTUVCVUZGRVIsbnVsbCksci5maW5pc2goKSl9LF9zd2FwVGV4dHVyZXM6ZnVuY3Rpb24odCl7dC5wYXNzZXMtLSx0LnBhc3MrKzt2YXIgZT10LnRhcmdldFRleHR1cmU7dC50YXJnZXRUZXh0dXJlPXQuc291cmNlVGV4dHVyZSx0LnNvdXJjZVRleHR1cmU9ZX0saXNOZXV0cmFsU3RhdGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm1haW5QYXJhbWV0ZXIsZT1TLkltYWdlLmZpbHRlcnNbdGhpcy50eXBlXS5wcm90b3R5cGU7aWYodCl7aWYoQXJyYXkuaXNBcnJheShlW3RdKSl7Zm9yKHZhciBpPWVbdF0ubGVuZ3RoO2ktLTspaWYodGhpc1t0XVtpXSE9PWVbdF1baV0pcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuIGVbdF09PT10aGlzW3RdfXJldHVybiExfSxhcHBseVRvOmZ1bmN0aW9uKHQpe3Qud2ViZ2w/KHRoaXMuX3NldHVwRnJhbWVCdWZmZXIodCksdGhpcy5hcHBseVRvV2ViR0wodCksdGhpcy5fc3dhcFRleHR1cmVzKHQpKTp0aGlzLmFwcGx5VG8yZCh0KX0scmV0cmlldmVTaGFkZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHQucHJvZ3JhbUNhY2hlLmhhc093blByb3BlcnR5KHRoaXMudHlwZSl8fCh0LnByb2dyYW1DYWNoZVt0aGlzLnR5cGVdPXRoaXMuY3JlYXRlUHJvZ3JhbSh0LmNvbnRleHQpKSx0LnByb2dyYW1DYWNoZVt0aGlzLnR5cGVdfSxhcHBseVRvV2ViR0w6ZnVuY3Rpb24odCl7dmFyIGU9dC5jb250ZXh0LGk9dGhpcy5yZXRyaWV2ZVNoYWRlcih0KTswPT09dC5wYXNzJiZ0Lm9yaWdpbmFsVGV4dHVyZT9lLmJpbmRUZXh0dXJlKGUuVEVYVFVSRV8yRCx0Lm9yaWdpbmFsVGV4dHVyZSk6ZS5iaW5kVGV4dHVyZShlLlRFWFRVUkVfMkQsdC5zb3VyY2VUZXh0dXJlKSxlLnVzZVByb2dyYW0oaS5wcm9ncmFtKSx0aGlzLnNlbmRBdHRyaWJ1dGVEYXRhKGUsaS5hdHRyaWJ1dGVMb2NhdGlvbnMsdC5hUG9zaXRpb24pLGUudW5pZm9ybTFmKGkudW5pZm9ybUxvY2F0aW9ucy51U3RlcFcsMS90LnNvdXJjZVdpZHRoKSxlLnVuaWZvcm0xZihpLnVuaWZvcm1Mb2NhdGlvbnMudVN0ZXBILDEvdC5zb3VyY2VIZWlnaHQpLHRoaXMuc2VuZFVuaWZvcm1EYXRhKGUsaS51bmlmb3JtTG9jYXRpb25zKSxlLnZpZXdwb3J0KDAsMCx0LmRlc3RpbmF0aW9uV2lkdGgsdC5kZXN0aW5hdGlvbkhlaWdodCksZS5kcmF3QXJyYXlzKGUuVFJJQU5HTEVfU1RSSVAsMCw0KX0sYmluZEFkZGl0aW9uYWxUZXh0dXJlOmZ1bmN0aW9uKHQsZSxpKXt0LmFjdGl2ZVRleHR1cmUoaSksdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsZSksdC5hY3RpdmVUZXh0dXJlKHQuVEVYVFVSRTApfSx1bmJpbmRBZGRpdGlvbmFsVGV4dHVyZTpmdW5jdGlvbih0LGUpe3QuYWN0aXZlVGV4dHVyZShlKSx0LmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxudWxsKSx0LmFjdGl2ZVRleHR1cmUodC5URVhUVVJFMCl9LGdldE1haW5QYXJhbWV0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1t0aGlzLm1haW5QYXJhbWV0ZXJdfSxzZXRNYWluUGFyYW1ldGVyOmZ1bmN0aW9uKHQpe3RoaXNbdGhpcy5tYWluUGFyYW1ldGVyXT10fSxzZW5kVW5pZm9ybURhdGE6ZnVuY3Rpb24oKXt9LGNyZWF0ZUhlbHBMYXllcjpmdW5jdGlvbih0KXtpZighdC5oZWxwTGF5ZXIpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7ZS53aWR0aD10LnNvdXJjZVdpZHRoLGUuaGVpZ2h0PXQuc291cmNlSGVpZ2h0LHQuaGVscExheWVyPWV9fSx0b09iamVjdDpmdW5jdGlvbigpe3ZhciB0PXt0eXBlOnRoaXMudHlwZX0sZT10aGlzLm1haW5QYXJhbWV0ZXI7cmV0dXJuIGUmJih0W2VdPXRoaXNbZV0pLHR9LHRvSlNPTjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvT2JqZWN0KCl9fSksUy5JbWFnZS5maWx0ZXJzLkJhc2VGaWx0ZXIuZnJvbU9iamVjdD1mdW5jdGlvbih0LGUpe3ZhciBpPW5ldyBTLkltYWdlLmZpbHRlcnNbdC50eXBlXSh0KTtyZXR1cm4gZSYmZShpKSxpfSxmdW5jdGlvbih0KXt2YXIgZT10LmZhYnJpY3x8KHQuZmFicmljPXt9KSxpPWUuSW1hZ2UuZmlsdGVycyxyPWUudXRpbC5jcmVhdGVDbGFzcztpLkNvbG9yTWF0cml4PXIoaS5CYXNlRmlsdGVyLHt0eXBlOlwiQ29sb3JNYXRyaXhcIixmcmFnbWVudFNvdXJjZTpcInByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG51bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcXG52YXJ5aW5nIHZlYzIgdlRleENvb3JkO1xcbnVuaWZvcm0gbWF0NCB1Q29sb3JNYXRyaXg7XFxudW5pZm9ybSB2ZWM0IHVDb25zdGFudHM7XFxudm9pZCBtYWluKCkge1xcbnZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZUZXhDb29yZCk7XFxuY29sb3IgKj0gdUNvbG9yTWF0cml4O1xcbmNvbG9yICs9IHVDb25zdGFudHM7XFxuZ2xfRnJhZ0NvbG9yID0gY29sb3I7XFxufVwiLG1hdHJpeDpbMSwwLDAsMCwwLDAsMSwwLDAsMCwwLDAsMSwwLDAsMCwwLDAsMSwwXSxtYWluUGFyYW1ldGVyOlwibWF0cml4XCIsY29sb3JzT25seTohMCxpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3RoaXMuY2FsbFN1cGVyKFwiaW5pdGlhbGl6ZVwiLHQpLHRoaXMubWF0cml4PXRoaXMubWF0cml4LnNsaWNlKDApfSxhcHBseVRvMmQ6ZnVuY3Rpb24odCl7dmFyIGUsaSxyLG4scyxvPXQuaW1hZ2VEYXRhLmRhdGEsYT1vLmxlbmd0aCxoPXRoaXMubWF0cml4LGw9dGhpcy5jb2xvcnNPbmx5O2ZvcihzPTA7czxhO3MrPTQpZT1vW3NdLGk9b1tzKzFdLHI9b1tzKzJdLGw/KG9bc109ZSpoWzBdK2kqaFsxXStyKmhbMl0rMjU1KmhbNF0sb1tzKzFdPWUqaFs1XStpKmhbNl0rcipoWzddKzI1NSpoWzldLG9bcysyXT1lKmhbMTBdK2kqaFsxMV0rcipoWzEyXSsyNTUqaFsxNF0pOihuPW9bcyszXSxvW3NdPWUqaFswXStpKmhbMV0rcipoWzJdK24qaFszXSsyNTUqaFs0XSxvW3MrMV09ZSpoWzVdK2kqaFs2XStyKmhbN10rbipoWzhdKzI1NSpoWzldLG9bcysyXT1lKmhbMTBdK2kqaFsxMV0rcipoWzEyXStuKmhbMTNdKzI1NSpoWzE0XSxvW3MrM109ZSpoWzE1XStpKmhbMTZdK3IqaFsxN10rbipoWzE4XSsyNTUqaFsxOV0pfSxnZXRVbmlmb3JtTG9jYXRpb25zOmZ1bmN0aW9uKHQsZSl7cmV0dXJue3VDb2xvck1hdHJpeDp0LmdldFVuaWZvcm1Mb2NhdGlvbihlLFwidUNvbG9yTWF0cml4XCIpLHVDb25zdGFudHM6dC5nZXRVbmlmb3JtTG9jYXRpb24oZSxcInVDb25zdGFudHNcIil9fSxzZW5kVW5pZm9ybURhdGE6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLm1hdHJpeCxyPVtpWzBdLGlbMV0saVsyXSxpWzNdLGlbNV0saVs2XSxpWzddLGlbOF0saVsxMF0saVsxMV0saVsxMl0saVsxM10saVsxNV0saVsxNl0saVsxN10saVsxOF1dLG49W2lbNF0saVs5XSxpWzE0XSxpWzE5XV07dC51bmlmb3JtTWF0cml4NGZ2KGUudUNvbG9yTWF0cml4LCExLHIpLHQudW5pZm9ybTRmdihlLnVDb25zdGFudHMsbil9fSksZS5JbWFnZS5maWx0ZXJzLkNvbG9yTWF0cml4LmZyb21PYmplY3Q9ZS5JbWFnZS5maWx0ZXJzLkJhc2VGaWx0ZXIuZnJvbU9iamVjdH0oZSksZnVuY3Rpb24odCl7dmFyIGU9dC5mYWJyaWN8fCh0LmZhYnJpYz17fSksaT1lLkltYWdlLmZpbHRlcnMscj1lLnV0aWwuY3JlYXRlQ2xhc3M7aS5CcmlnaHRuZXNzPXIoaS5CYXNlRmlsdGVyLHt0eXBlOlwiQnJpZ2h0bmVzc1wiLGZyYWdtZW50U291cmNlOlwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgdUJyaWdodG5lc3M7XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG52b2lkIG1haW4oKSB7XFxudmVjNCBjb2xvciA9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlRleENvb3JkKTtcXG5jb2xvci5yZ2IgKz0gdUJyaWdodG5lc3M7XFxuZ2xfRnJhZ0NvbG9yID0gY29sb3I7XFxufVwiLGJyaWdodG5lc3M6MCxtYWluUGFyYW1ldGVyOlwiYnJpZ2h0bmVzc1wiLGFwcGx5VG8yZDpmdW5jdGlvbih0KXtpZigwIT09dGhpcy5icmlnaHRuZXNzKXt2YXIgZSxpPXQuaW1hZ2VEYXRhLmRhdGEscj1pLmxlbmd0aCxuPU1hdGgucm91bmQoMjU1KnRoaXMuYnJpZ2h0bmVzcyk7Zm9yKGU9MDtlPHI7ZSs9NClpW2VdPWlbZV0rbixpW2UrMV09aVtlKzFdK24saVtlKzJdPWlbZSsyXStufX0sZ2V0VW5pZm9ybUxvY2F0aW9uczpmdW5jdGlvbih0LGUpe3JldHVybnt1QnJpZ2h0bmVzczp0LmdldFVuaWZvcm1Mb2NhdGlvbihlLFwidUJyaWdodG5lc3NcIil9fSxzZW5kVW5pZm9ybURhdGE6ZnVuY3Rpb24odCxlKXt0LnVuaWZvcm0xZihlLnVCcmlnaHRuZXNzLHRoaXMuYnJpZ2h0bmVzcyl9fSksZS5JbWFnZS5maWx0ZXJzLkJyaWdodG5lc3MuZnJvbU9iamVjdD1lLkltYWdlLmZpbHRlcnMuQmFzZUZpbHRlci5mcm9tT2JqZWN0fShlKSxmdW5jdGlvbih0KXt2YXIgZT10LmZhYnJpY3x8KHQuZmFicmljPXt9KSxpPWUudXRpbC5vYmplY3QuZXh0ZW5kLHI9ZS5JbWFnZS5maWx0ZXJzLG49ZS51dGlsLmNyZWF0ZUNsYXNzO3IuQ29udm9sdXRlPW4oci5CYXNlRmlsdGVyLHt0eXBlOlwiQ29udm9sdXRlXCIsb3BhcXVlOiExLG1hdHJpeDpbMCwwLDAsMCwxLDAsMCwwLDBdLGZyYWdtZW50U291cmNlOntDb252b2x1dGVfM18xOlwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgdU1hdHJpeFs5XTtcXG51bmlmb3JtIGZsb2F0IHVTdGVwVztcXG51bmlmb3JtIGZsb2F0IHVTdGVwSDtcXG52YXJ5aW5nIHZlYzIgdlRleENvb3JkO1xcbnZvaWQgbWFpbigpIHtcXG52ZWM0IGNvbG9yID0gdmVjNCgwLCAwLCAwLCAwKTtcXG5mb3IgKGZsb2F0IGggPSAwLjA7IGggPCAzLjA7IGgrPTEuMCkge1xcbmZvciAoZmxvYXQgdyA9IDAuMDsgdyA8IDMuMDsgdys9MS4wKSB7XFxudmVjMiBtYXRyaXhQb3MgPSB2ZWMyKHVTdGVwVyAqICh3IC0gMSksIHVTdGVwSCAqIChoIC0gMSkpO1xcbmNvbG9yICs9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlRleENvb3JkICsgbWF0cml4UG9zKSAqIHVNYXRyaXhbaW50KGggKiAzLjAgKyB3KV07XFxufVxcbn1cXG5nbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG59XCIsQ29udm9sdXRlXzNfMDpcInByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG51bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcXG51bmlmb3JtIGZsb2F0IHVNYXRyaXhbOV07XFxudW5pZm9ybSBmbG9hdCB1U3RlcFc7XFxudW5pZm9ybSBmbG9hdCB1U3RlcEg7XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG52b2lkIG1haW4oKSB7XFxudmVjNCBjb2xvciA9IHZlYzQoMCwgMCwgMCwgMSk7XFxuZm9yIChmbG9hdCBoID0gMC4wOyBoIDwgMy4wOyBoKz0xLjApIHtcXG5mb3IgKGZsb2F0IHcgPSAwLjA7IHcgPCAzLjA7IHcrPTEuMCkge1xcbnZlYzIgbWF0cml4UG9zID0gdmVjMih1U3RlcFcgKiAodyAtIDEuMCksIHVTdGVwSCAqIChoIC0gMS4wKSk7XFxuY29sb3IucmdiICs9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlRleENvb3JkICsgbWF0cml4UG9zKS5yZ2IgKiB1TWF0cml4W2ludChoICogMy4wICsgdyldO1xcbn1cXG59XFxuZmxvYXQgYWxwaGEgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZUZXhDb29yZCkuYTtcXG5nbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG5nbF9GcmFnQ29sb3IuYSA9IGFscGhhO1xcbn1cIixDb252b2x1dGVfNV8xOlwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgdU1hdHJpeFsyNV07XFxudW5pZm9ybSBmbG9hdCB1U3RlcFc7XFxudW5pZm9ybSBmbG9hdCB1U3RlcEg7XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG52b2lkIG1haW4oKSB7XFxudmVjNCBjb2xvciA9IHZlYzQoMCwgMCwgMCwgMCk7XFxuZm9yIChmbG9hdCBoID0gMC4wOyBoIDwgNS4wOyBoKz0xLjApIHtcXG5mb3IgKGZsb2F0IHcgPSAwLjA7IHcgPCA1LjA7IHcrPTEuMCkge1xcbnZlYzIgbWF0cml4UG9zID0gdmVjMih1U3RlcFcgKiAodyAtIDIuMCksIHVTdGVwSCAqIChoIC0gMi4wKSk7XFxuY29sb3IgKz0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VGV4Q29vcmQgKyBtYXRyaXhQb3MpICogdU1hdHJpeFtpbnQoaCAqIDUuMCArIHcpXTtcXG59XFxufVxcbmdsX0ZyYWdDb2xvciA9IGNvbG9yO1xcbn1cIixDb252b2x1dGVfNV8wOlwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgdU1hdHJpeFsyNV07XFxudW5pZm9ybSBmbG9hdCB1U3RlcFc7XFxudW5pZm9ybSBmbG9hdCB1U3RlcEg7XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG52b2lkIG1haW4oKSB7XFxudmVjNCBjb2xvciA9IHZlYzQoMCwgMCwgMCwgMSk7XFxuZm9yIChmbG9hdCBoID0gMC4wOyBoIDwgNS4wOyBoKz0xLjApIHtcXG5mb3IgKGZsb2F0IHcgPSAwLjA7IHcgPCA1LjA7IHcrPTEuMCkge1xcbnZlYzIgbWF0cml4UG9zID0gdmVjMih1U3RlcFcgKiAodyAtIDIuMCksIHVTdGVwSCAqIChoIC0gMi4wKSk7XFxuY29sb3IucmdiICs9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlRleENvb3JkICsgbWF0cml4UG9zKS5yZ2IgKiB1TWF0cml4W2ludChoICogNS4wICsgdyldO1xcbn1cXG59XFxuZmxvYXQgYWxwaGEgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZUZXhDb29yZCkuYTtcXG5nbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG5nbF9GcmFnQ29sb3IuYSA9IGFscGhhO1xcbn1cIixDb252b2x1dGVfN18xOlwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgdU1hdHJpeFs0OV07XFxudW5pZm9ybSBmbG9hdCB1U3RlcFc7XFxudW5pZm9ybSBmbG9hdCB1U3RlcEg7XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG52b2lkIG1haW4oKSB7XFxudmVjNCBjb2xvciA9IHZlYzQoMCwgMCwgMCwgMCk7XFxuZm9yIChmbG9hdCBoID0gMC4wOyBoIDwgNy4wOyBoKz0xLjApIHtcXG5mb3IgKGZsb2F0IHcgPSAwLjA7IHcgPCA3LjA7IHcrPTEuMCkge1xcbnZlYzIgbWF0cml4UG9zID0gdmVjMih1U3RlcFcgKiAodyAtIDMuMCksIHVTdGVwSCAqIChoIC0gMy4wKSk7XFxuY29sb3IgKz0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VGV4Q29vcmQgKyBtYXRyaXhQb3MpICogdU1hdHJpeFtpbnQoaCAqIDcuMCArIHcpXTtcXG59XFxufVxcbmdsX0ZyYWdDb2xvciA9IGNvbG9yO1xcbn1cIixDb252b2x1dGVfN18wOlwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgdU1hdHJpeFs0OV07XFxudW5pZm9ybSBmbG9hdCB1U3RlcFc7XFxudW5pZm9ybSBmbG9hdCB1U3RlcEg7XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG52b2lkIG1haW4oKSB7XFxudmVjNCBjb2xvciA9IHZlYzQoMCwgMCwgMCwgMSk7XFxuZm9yIChmbG9hdCBoID0gMC4wOyBoIDwgNy4wOyBoKz0xLjApIHtcXG5mb3IgKGZsb2F0IHcgPSAwLjA7IHcgPCA3LjA7IHcrPTEuMCkge1xcbnZlYzIgbWF0cml4UG9zID0gdmVjMih1U3RlcFcgKiAodyAtIDMuMCksIHVTdGVwSCAqIChoIC0gMy4wKSk7XFxuY29sb3IucmdiICs9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlRleENvb3JkICsgbWF0cml4UG9zKS5yZ2IgKiB1TWF0cml4W2ludChoICogNy4wICsgdyldO1xcbn1cXG59XFxuZmxvYXQgYWxwaGEgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZUZXhDb29yZCkuYTtcXG5nbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG5nbF9GcmFnQ29sb3IuYSA9IGFscGhhO1xcbn1cIixDb252b2x1dGVfOV8xOlwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgdU1hdHJpeFs4MV07XFxudW5pZm9ybSBmbG9hdCB1U3RlcFc7XFxudW5pZm9ybSBmbG9hdCB1U3RlcEg7XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG52b2lkIG1haW4oKSB7XFxudmVjNCBjb2xvciA9IHZlYzQoMCwgMCwgMCwgMCk7XFxuZm9yIChmbG9hdCBoID0gMC4wOyBoIDwgOS4wOyBoKz0xLjApIHtcXG5mb3IgKGZsb2F0IHcgPSAwLjA7IHcgPCA5LjA7IHcrPTEuMCkge1xcbnZlYzIgbWF0cml4UG9zID0gdmVjMih1U3RlcFcgKiAodyAtIDQuMCksIHVTdGVwSCAqIChoIC0gNC4wKSk7XFxuY29sb3IgKz0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VGV4Q29vcmQgKyBtYXRyaXhQb3MpICogdU1hdHJpeFtpbnQoaCAqIDkuMCArIHcpXTtcXG59XFxufVxcbmdsX0ZyYWdDb2xvciA9IGNvbG9yO1xcbn1cIixDb252b2x1dGVfOV8wOlwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgdU1hdHJpeFs4MV07XFxudW5pZm9ybSBmbG9hdCB1U3RlcFc7XFxudW5pZm9ybSBmbG9hdCB1U3RlcEg7XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG52b2lkIG1haW4oKSB7XFxudmVjNCBjb2xvciA9IHZlYzQoMCwgMCwgMCwgMSk7XFxuZm9yIChmbG9hdCBoID0gMC4wOyBoIDwgOS4wOyBoKz0xLjApIHtcXG5mb3IgKGZsb2F0IHcgPSAwLjA7IHcgPCA5LjA7IHcrPTEuMCkge1xcbnZlYzIgbWF0cml4UG9zID0gdmVjMih1U3RlcFcgKiAodyAtIDQuMCksIHVTdGVwSCAqIChoIC0gNC4wKSk7XFxuY29sb3IucmdiICs9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlRleENvb3JkICsgbWF0cml4UG9zKS5yZ2IgKiB1TWF0cml4W2ludChoICogOS4wICsgdyldO1xcbn1cXG59XFxuZmxvYXQgYWxwaGEgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZUZXhDb29yZCkuYTtcXG5nbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG5nbF9GcmFnQ29sb3IuYSA9IGFscGhhO1xcbn1cIn0scmV0cmlldmVTaGFkZXI6ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5zcXJ0KHRoaXMubWF0cml4Lmxlbmd0aCksaT10aGlzLnR5cGUrXCJfXCIrZStcIl9cIisodGhpcy5vcGFxdWU/MTowKSxyPXRoaXMuZnJhZ21lbnRTb3VyY2VbaV07cmV0dXJuIHQucHJvZ3JhbUNhY2hlLmhhc093blByb3BlcnR5KGkpfHwodC5wcm9ncmFtQ2FjaGVbaV09dGhpcy5jcmVhdGVQcm9ncmFtKHQuY29udGV4dCxyKSksdC5wcm9ncmFtQ2FjaGVbaV19LGFwcGx5VG8yZDpmdW5jdGlvbih0KXt2YXIgZSxpLHIsbixzLG8sYSxoLGwsYyx1LGQsZixnPXQuaW1hZ2VEYXRhLG09Zy5kYXRhLHA9dGhpcy5tYXRyaXgsdj1NYXRoLnJvdW5kKE1hdGguc3FydChwLmxlbmd0aCkpLF89TWF0aC5mbG9vcih2LzIpLHk9Zy53aWR0aCx3PWcuaGVpZ2h0LGI9dC5jdHguY3JlYXRlSW1hZ2VEYXRhKHksdykseD1iLmRhdGEsQz10aGlzLm9wYXF1ZT8xOjA7Zm9yKHU9MDt1PHc7dSsrKWZvcihjPTA7Yzx5O2MrKyl7Zm9yKHM9NCoodSp5K2MpLGU9MCxpPTAscj0wLG49MCxmPTA7Zjx2O2YrKylmb3IoZD0wO2Q8djtkKyspbz1jK2QtXywoYT11K2YtXyk8MHx8YT49d3x8bzwwfHxvPj15fHwoaD00KihhKnkrbyksbD1wW2YqditkXSxlKz1tW2hdKmwsaSs9bVtoKzFdKmwscis9bVtoKzJdKmwsQ3x8KG4rPW1baCszXSpsKSk7eFtzXT1lLHhbcysxXT1pLHhbcysyXT1yLHhbcyszXT1DP21bcyszXTpufXQuaW1hZ2VEYXRhPWJ9LGdldFVuaWZvcm1Mb2NhdGlvbnM6ZnVuY3Rpb24odCxlKXtyZXR1cm57dU1hdHJpeDp0LmdldFVuaWZvcm1Mb2NhdGlvbihlLFwidU1hdHJpeFwiKSx1T3BhcXVlOnQuZ2V0VW5pZm9ybUxvY2F0aW9uKGUsXCJ1T3BhcXVlXCIpLHVIYWxmU2l6ZTp0LmdldFVuaWZvcm1Mb2NhdGlvbihlLFwidUhhbGZTaXplXCIpLHVTaXplOnQuZ2V0VW5pZm9ybUxvY2F0aW9uKGUsXCJ1U2l6ZVwiKX19LHNlbmRVbmlmb3JtRGF0YTpmdW5jdGlvbih0LGUpe3QudW5pZm9ybTFmdihlLnVNYXRyaXgsdGhpcy5tYXRyaXgpfSx0b09iamVjdDpmdW5jdGlvbigpe3JldHVybiBpKHRoaXMuY2FsbFN1cGVyKFwidG9PYmplY3RcIikse29wYXF1ZTp0aGlzLm9wYXF1ZSxtYXRyaXg6dGhpcy5tYXRyaXh9KX19KSxlLkltYWdlLmZpbHRlcnMuQ29udm9sdXRlLmZyb21PYmplY3Q9ZS5JbWFnZS5maWx0ZXJzLkJhc2VGaWx0ZXIuZnJvbU9iamVjdH0oZSksZnVuY3Rpb24odCl7dmFyIGU9dC5mYWJyaWN8fCh0LmZhYnJpYz17fSksaT1lLkltYWdlLmZpbHRlcnMscj1lLnV0aWwuY3JlYXRlQ2xhc3M7aS5HcmF5c2NhbGU9cihpLkJhc2VGaWx0ZXIse3R5cGU6XCJHcmF5c2NhbGVcIixmcmFnbWVudFNvdXJjZTp7YXZlcmFnZTpcInByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG51bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcXG52YXJ5aW5nIHZlYzIgdlRleENvb3JkO1xcbnZvaWQgbWFpbigpIHtcXG52ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VGV4Q29vcmQpO1xcbmZsb2F0IGF2ZXJhZ2UgPSAoY29sb3IuciArIGNvbG9yLmIgKyBjb2xvci5nKSAvIDMuMDtcXG5nbF9GcmFnQ29sb3IgPSB2ZWM0KGF2ZXJhZ2UsIGF2ZXJhZ2UsIGF2ZXJhZ2UsIGNvbG9yLmEpO1xcbn1cIixsaWdodG5lc3M6XCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdVRleHR1cmU7XFxudW5pZm9ybSBpbnQgdU1vZGU7XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG52b2lkIG1haW4oKSB7XFxudmVjNCBjb2wgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZUZXhDb29yZCk7XFxuZmxvYXQgYXZlcmFnZSA9IChtYXgobWF4KGNvbC5yLCBjb2wuZyksY29sLmIpICsgbWluKG1pbihjb2wuciwgY29sLmcpLGNvbC5iKSkgLyAyLjA7XFxuZ2xfRnJhZ0NvbG9yID0gdmVjNChhdmVyYWdlLCBhdmVyYWdlLCBhdmVyYWdlLCBjb2wuYSk7XFxufVwiLGx1bWlub3NpdHk6XCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdVRleHR1cmU7XFxudW5pZm9ybSBpbnQgdU1vZGU7XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG52b2lkIG1haW4oKSB7XFxudmVjNCBjb2wgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZUZXhDb29yZCk7XFxuZmxvYXQgYXZlcmFnZSA9IDAuMjEgKiBjb2wuciArIDAuNzIgKiBjb2wuZyArIDAuMDcgKiBjb2wuYjtcXG5nbF9GcmFnQ29sb3IgPSB2ZWM0KGF2ZXJhZ2UsIGF2ZXJhZ2UsIGF2ZXJhZ2UsIGNvbC5hKTtcXG59XCJ9LG1vZGU6XCJhdmVyYWdlXCIsbWFpblBhcmFtZXRlcjpcIm1vZGVcIixhcHBseVRvMmQ6ZnVuY3Rpb24odCl7dmFyIGUsaSxyPXQuaW1hZ2VEYXRhLmRhdGEsbj1yLmxlbmd0aCxzPXRoaXMubW9kZTtmb3IoZT0wO2U8bjtlKz00KVwiYXZlcmFnZVwiPT09cz9pPShyW2VdK3JbZSsxXStyW2UrMl0pLzM6XCJsaWdodG5lc3NcIj09PXM/aT0oTWF0aC5taW4ocltlXSxyW2UrMV0scltlKzJdKStNYXRoLm1heChyW2VdLHJbZSsxXSxyW2UrMl0pKS8yOlwibHVtaW5vc2l0eVwiPT09cyYmKGk9LjIxKnJbZV0rLjcyKnJbZSsxXSsuMDcqcltlKzJdKSxyW2VdPWkscltlKzFdPWkscltlKzJdPWl9LHJldHJpZXZlU2hhZGVyOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudHlwZStcIl9cIit0aGlzLm1vZGU7aWYoIXQucHJvZ3JhbUNhY2hlLmhhc093blByb3BlcnR5KGUpKXt2YXIgaT10aGlzLmZyYWdtZW50U291cmNlW3RoaXMubW9kZV07dC5wcm9ncmFtQ2FjaGVbZV09dGhpcy5jcmVhdGVQcm9ncmFtKHQuY29udGV4dCxpKX1yZXR1cm4gdC5wcm9ncmFtQ2FjaGVbZV19LGdldFVuaWZvcm1Mb2NhdGlvbnM6ZnVuY3Rpb24odCxlKXtyZXR1cm57dU1vZGU6dC5nZXRVbmlmb3JtTG9jYXRpb24oZSxcInVNb2RlXCIpfX0sc2VuZFVuaWZvcm1EYXRhOmZ1bmN0aW9uKHQsZSl7dC51bmlmb3JtMWkoZS51TW9kZSwxKX0saXNOZXV0cmFsU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4hMX19KSxlLkltYWdlLmZpbHRlcnMuR3JheXNjYWxlLmZyb21PYmplY3Q9ZS5JbWFnZS5maWx0ZXJzLkJhc2VGaWx0ZXIuZnJvbU9iamVjdH0oZSksZnVuY3Rpb24odCl7dmFyIGU9dC5mYWJyaWN8fCh0LmZhYnJpYz17fSksaT1lLkltYWdlLmZpbHRlcnMscj1lLnV0aWwuY3JlYXRlQ2xhc3M7aS5JbnZlcnQ9cihpLkJhc2VGaWx0ZXIse3R5cGU6XCJJbnZlcnRcIixmcmFnbWVudFNvdXJjZTpcInByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG51bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcXG51bmlmb3JtIGludCB1SW52ZXJ0O1xcbnZhcnlpbmcgdmVjMiB2VGV4Q29vcmQ7XFxudm9pZCBtYWluKCkge1xcbnZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZUZXhDb29yZCk7XFxuaWYgKHVJbnZlcnQgPT0gMSkge1xcbmdsX0ZyYWdDb2xvciA9IHZlYzQoMS4wIC0gY29sb3IuciwxLjAgLWNvbG9yLmcsMS4wIC1jb2xvci5iLGNvbG9yLmEpO1xcbn0gZWxzZSB7XFxuZ2xfRnJhZ0NvbG9yID0gY29sb3I7XFxufVxcbn1cIixpbnZlcnQ6ITAsbWFpblBhcmFtZXRlcjpcImludmVydFwiLGFwcGx5VG8yZDpmdW5jdGlvbih0KXt2YXIgZSxpPXQuaW1hZ2VEYXRhLmRhdGEscj1pLmxlbmd0aDtmb3IoZT0wO2U8cjtlKz00KWlbZV09MjU1LWlbZV0saVtlKzFdPTI1NS1pW2UrMV0saVtlKzJdPTI1NS1pW2UrMl19LGlzTmV1dHJhbFN0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaW52ZXJ0fSxnZXRVbmlmb3JtTG9jYXRpb25zOmZ1bmN0aW9uKHQsZSl7cmV0dXJue3VJbnZlcnQ6dC5nZXRVbmlmb3JtTG9jYXRpb24oZSxcInVJbnZlcnRcIil9fSxzZW5kVW5pZm9ybURhdGE6ZnVuY3Rpb24odCxlKXt0LnVuaWZvcm0xaShlLnVJbnZlcnQsdGhpcy5pbnZlcnQpfX0pLGUuSW1hZ2UuZmlsdGVycy5JbnZlcnQuZnJvbU9iamVjdD1lLkltYWdlLmZpbHRlcnMuQmFzZUZpbHRlci5mcm9tT2JqZWN0fShlKSxmdW5jdGlvbih0KXt2YXIgZT10LmZhYnJpY3x8KHQuZmFicmljPXt9KSxpPWUudXRpbC5vYmplY3QuZXh0ZW5kLHI9ZS5JbWFnZS5maWx0ZXJzLG49ZS51dGlsLmNyZWF0ZUNsYXNzO3IuTm9pc2U9bihyLkJhc2VGaWx0ZXIse3R5cGU6XCJOb2lzZVwiLGZyYWdtZW50U291cmNlOlwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgdVN0ZXBIO1xcbnVuaWZvcm0gZmxvYXQgdU5vaXNlO1xcbnVuaWZvcm0gZmxvYXQgdVNlZWQ7XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG5mbG9hdCByYW5kKHZlYzIgY28sIGZsb2F0IHNlZWQsIGZsb2F0IHZTY2FsZSkge1xcbnJldHVybiBmcmFjdChzaW4oZG90KGNvLnh5ICogdlNjYWxlICx2ZWMyKDEyLjk4OTggLCA3OC4yMzMpKSkgKiA0Mzc1OC41NDUzICogKHNlZWQgKyAwLjAxKSAvIDIuMCk7XFxufVxcbnZvaWQgbWFpbigpIHtcXG52ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VGV4Q29vcmQpO1xcbmNvbG9yLnJnYiArPSAoMC41IC0gcmFuZCh2VGV4Q29vcmQsIHVTZWVkLCAwLjEgLyB1U3RlcEgpKSAqIHVOb2lzZTtcXG5nbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG59XCIsbWFpblBhcmFtZXRlcjpcIm5vaXNlXCIsbm9pc2U6MCxhcHBseVRvMmQ6ZnVuY3Rpb24odCl7aWYoMCE9PXRoaXMubm9pc2Upe3ZhciBlLGkscj10LmltYWdlRGF0YS5kYXRhLG49ci5sZW5ndGgscz10aGlzLm5vaXNlO2ZvcihlPTAsbj1yLmxlbmd0aDtlPG47ZSs9NClpPSguNS1NYXRoLnJhbmRvbSgpKSpzLHJbZV0rPWkscltlKzFdKz1pLHJbZSsyXSs9aX19LGdldFVuaWZvcm1Mb2NhdGlvbnM6ZnVuY3Rpb24odCxlKXtyZXR1cm57dU5vaXNlOnQuZ2V0VW5pZm9ybUxvY2F0aW9uKGUsXCJ1Tm9pc2VcIiksdVNlZWQ6dC5nZXRVbmlmb3JtTG9jYXRpb24oZSxcInVTZWVkXCIpfX0sc2VuZFVuaWZvcm1EYXRhOmZ1bmN0aW9uKHQsZSl7dC51bmlmb3JtMWYoZS51Tm9pc2UsdGhpcy5ub2lzZS8yNTUpLHQudW5pZm9ybTFmKGUudVNlZWQsTWF0aC5yYW5kb20oKSl9LHRvT2JqZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIGkodGhpcy5jYWxsU3VwZXIoXCJ0b09iamVjdFwiKSx7bm9pc2U6dGhpcy5ub2lzZX0pfX0pLGUuSW1hZ2UuZmlsdGVycy5Ob2lzZS5mcm9tT2JqZWN0PWUuSW1hZ2UuZmlsdGVycy5CYXNlRmlsdGVyLmZyb21PYmplY3R9KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljfHwodC5mYWJyaWM9e30pLGk9ZS5JbWFnZS5maWx0ZXJzLHI9ZS51dGlsLmNyZWF0ZUNsYXNzO2kuUGl4ZWxhdGU9cihpLkJhc2VGaWx0ZXIse3R5cGU6XCJQaXhlbGF0ZVwiLGJsb2Nrc2l6ZTo0LG1haW5QYXJhbWV0ZXI6XCJibG9ja3NpemVcIixmcmFnbWVudFNvdXJjZTpcInByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG51bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcXG51bmlmb3JtIGZsb2F0IHVCbG9ja3NpemU7XFxudW5pZm9ybSBmbG9hdCB1U3RlcFc7XFxudW5pZm9ybSBmbG9hdCB1U3RlcEg7XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG52b2lkIG1haW4oKSB7XFxuZmxvYXQgYmxvY2tXID0gdUJsb2Nrc2l6ZSAqIHVTdGVwVztcXG5mbG9hdCBibG9ja0ggPSB1QmxvY2tzaXplICogdVN0ZXBXO1xcbmludCBwb3NYID0gaW50KHZUZXhDb29yZC54IC8gYmxvY2tXKTtcXG5pbnQgcG9zWSA9IGludCh2VGV4Q29vcmQueSAvIGJsb2NrSCk7XFxuZmxvYXQgZnBvc1ggPSBmbG9hdChwb3NYKTtcXG5mbG9hdCBmcG9zWSA9IGZsb2F0KHBvc1kpO1xcbnZlYzIgc3F1YXJlQ29vcmRzID0gdmVjMihmcG9zWCAqIGJsb2NrVywgZnBvc1kgKiBibG9ja0gpO1xcbnZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHNxdWFyZUNvb3Jkcyk7XFxuZ2xfRnJhZ0NvbG9yID0gY29sb3I7XFxufVwiLGFwcGx5VG8yZDpmdW5jdGlvbih0KXt2YXIgZSxpLHIsbixzLG8sYSxoLGwsYyx1LGQ9dC5pbWFnZURhdGEsZj1kLmRhdGEsZz1kLmhlaWdodCxtPWQud2lkdGg7Zm9yKGk9MDtpPGc7aSs9dGhpcy5ibG9ja3NpemUpZm9yKHI9MDtyPG07cis9dGhpcy5ibG9ja3NpemUpZm9yKG49ZltlPTQqaSptKzQqcl0scz1mW2UrMV0sbz1mW2UrMl0sYT1mW2UrM10sYz1NYXRoLm1pbihpK3RoaXMuYmxvY2tzaXplLGcpLHU9TWF0aC5taW4ocit0aGlzLmJsb2Nrc2l6ZSxtKSxoPWk7aDxjO2grKylmb3IobD1yO2w8dTtsKyspZltlPTQqaCptKzQqbF09bixmW2UrMV09cyxmW2UrMl09byxmW2UrM109YX0saXNOZXV0cmFsU3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gMT09PXRoaXMuYmxvY2tzaXplfSxnZXRVbmlmb3JtTG9jYXRpb25zOmZ1bmN0aW9uKHQsZSl7cmV0dXJue3VCbG9ja3NpemU6dC5nZXRVbmlmb3JtTG9jYXRpb24oZSxcInVCbG9ja3NpemVcIiksdVN0ZXBXOnQuZ2V0VW5pZm9ybUxvY2F0aW9uKGUsXCJ1U3RlcFdcIiksdVN0ZXBIOnQuZ2V0VW5pZm9ybUxvY2F0aW9uKGUsXCJ1U3RlcEhcIil9fSxzZW5kVW5pZm9ybURhdGE6ZnVuY3Rpb24odCxlKXt0LnVuaWZvcm0xZihlLnVCbG9ja3NpemUsdGhpcy5ibG9ja3NpemUpfX0pLGUuSW1hZ2UuZmlsdGVycy5QaXhlbGF0ZS5mcm9tT2JqZWN0PWUuSW1hZ2UuZmlsdGVycy5CYXNlRmlsdGVyLmZyb21PYmplY3R9KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljfHwodC5mYWJyaWM9e30pLGk9ZS51dGlsLm9iamVjdC5leHRlbmQscj1lLkltYWdlLmZpbHRlcnMsbj1lLnV0aWwuY3JlYXRlQ2xhc3M7ci5SZW1vdmVDb2xvcj1uKHIuQmFzZUZpbHRlcix7dHlwZTpcIlJlbW92ZUNvbG9yXCIsY29sb3I6XCIjRkZGRkZGXCIsZnJhZ21lbnRTb3VyY2U6XCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdVRleHR1cmU7XFxudW5pZm9ybSB2ZWM0IHVMb3c7XFxudW5pZm9ybSB2ZWM0IHVIaWdoO1xcbnZhcnlpbmcgdmVjMiB2VGV4Q29vcmQ7XFxudm9pZCBtYWluKCkge1xcbmdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlRleENvb3JkKTtcXG5pZihhbGwoZ3JlYXRlclRoYW4oZ2xfRnJhZ0NvbG9yLnJnYix1TG93LnJnYikpICYmIGFsbChncmVhdGVyVGhhbih1SGlnaC5yZ2IsZ2xfRnJhZ0NvbG9yLnJnYikpKSB7XFxuZ2xfRnJhZ0NvbG9yLmEgPSAwLjA7XFxufVxcbn1cIixkaXN0YW5jZTouMDIsdXNlQWxwaGE6ITEsYXBwbHlUbzJkOmZ1bmN0aW9uKHQpe3ZhciBpLHIsbixzLG89dC5pbWFnZURhdGEuZGF0YSxhPTI1NSp0aGlzLmRpc3RhbmNlLGg9bmV3IGUuQ29sb3IodGhpcy5jb2xvcikuZ2V0U291cmNlKCksbD1baFswXS1hLGhbMV0tYSxoWzJdLWFdLGM9W2hbMF0rYSxoWzFdK2EsaFsyXSthXTtmb3IoaT0wO2k8by5sZW5ndGg7aSs9NClyPW9baV0sbj1vW2krMV0scz1vW2krMl0scj5sWzBdJiZuPmxbMV0mJnM+bFsyXSYmcjxjWzBdJiZuPGNbMV0mJnM8Y1syXSYmKG9baSszXT0wKX0sZ2V0VW5pZm9ybUxvY2F0aW9uczpmdW5jdGlvbih0LGUpe3JldHVybnt1TG93OnQuZ2V0VW5pZm9ybUxvY2F0aW9uKGUsXCJ1TG93XCIpLHVIaWdoOnQuZ2V0VW5pZm9ybUxvY2F0aW9uKGUsXCJ1SGlnaFwiKX19LHNlbmRVbmlmb3JtRGF0YTpmdW5jdGlvbih0LGkpe3ZhciByPW5ldyBlLkNvbG9yKHRoaXMuY29sb3IpLmdldFNvdXJjZSgpLG49cGFyc2VGbG9hdCh0aGlzLmRpc3RhbmNlKSxzPVswK3JbMF0vMjU1LW4sMCtyWzFdLzI1NS1uLDArclsyXS8yNTUtbiwxXSxvPVtyWzBdLzI1NStuLHJbMV0vMjU1K24sclsyXS8yNTUrbiwxXTt0LnVuaWZvcm00ZnYoaS51TG93LHMpLHQudW5pZm9ybTRmdihpLnVIaWdoLG8pfSx0b09iamVjdDpmdW5jdGlvbigpe3JldHVybiBpKHRoaXMuY2FsbFN1cGVyKFwidG9PYmplY3RcIikse2NvbG9yOnRoaXMuY29sb3IsZGlzdGFuY2U6dGhpcy5kaXN0YW5jZX0pfX0pLGUuSW1hZ2UuZmlsdGVycy5SZW1vdmVDb2xvci5mcm9tT2JqZWN0PWUuSW1hZ2UuZmlsdGVycy5CYXNlRmlsdGVyLmZyb21PYmplY3R9KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljfHwodC5mYWJyaWM9e30pLGk9ZS5JbWFnZS5maWx0ZXJzLHI9ZS51dGlsLmNyZWF0ZUNsYXNzLG49e0Jyb3duaWU6Wy41OTk3LC4zNDU1MywtLjI3MDgyLDAsLjE4NiwtLjAzNzcsLjg2MDk1LC4xNTA1OSwwLC0uMTQ0OSwuMjQxMTMsLS4wNzQ0MSwuNDQ5NzIsMCwtLjAyOTY1LDAsMCwwLDEsMF0sVmludGFnZTpbLjYyNzkzLC4zMjAyMSwtLjAzOTY1LDAsLjAzNzg0LC4wMjU3OCwuNjQ0MTEsLjAzMjU5LDAsLjAyOTI2LC4wNDY2LC0uMDg1MTIsLjUyNDE2LDAsLjAyMDIzLDAsMCwwLDEsMF0sS29kYWNocm9tZTpbMS4xMjg1NSwtLjM5NjczLC0uMDM5OTIsMCwuMjQ5OTEsLS4xNjQwNCwxLjA4MzUyLC0uMDU0OTgsMCwuMDk2OTgsLS4xNjc4NiwtLjU2MDM0LDEuNjAxNDgsMCwuMTM5NzIsMCwwLDAsMSwwXSxUZWNobmljb2xvcjpbMS45MTI1MiwtLjg1NDUzLC0uMDkxNTUsMCwuMDQ2MjQsLS4zMDg3OCwxLjc2NTg5LC0uMTA2MDEsMCwtLjI3NTg5LC0uMjMxMSwtLjc1MDE4LDEuODQ3NTksMCwuMTIxMzcsMCwwLDAsMSwwXSxQb2xhcm9pZDpbMS40MzgsLS4wNjIsLS4wNjIsMCwwLC0uMTIyLDEuMzc4LC0uMTIyLDAsMCwtLjAxNiwtLjAxNiwxLjQ4MywwLDAsMCwwLDAsMSwwXSxTZXBpYTpbLjM5MywuNzY5LC4xODksMCwwLC4zNDksLjY4NiwuMTY4LDAsMCwuMjcyLC41MzQsLjEzMSwwLDAsMCwwLDAsMSwwXSxCbGFja1doaXRlOlsxLjUsMS41LDEuNSwwLC0xLDEuNSwxLjUsMS41LDAsLTEsMS41LDEuNSwxLjUsMCwtMSwwLDAsMCwxLDBdfTtmb3IodmFyIHMgaW4gbilpW3NdPXIoaS5Db2xvck1hdHJpeCx7dHlwZTpzLG1hdHJpeDpuW3NdLG1haW5QYXJhbWV0ZXI6ITEsY29sb3JzT25seTohMH0pLGUuSW1hZ2UuZmlsdGVyc1tzXS5mcm9tT2JqZWN0PWUuSW1hZ2UuZmlsdGVycy5CYXNlRmlsdGVyLmZyb21PYmplY3R9KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljLGk9ZS5JbWFnZS5maWx0ZXJzLHI9ZS51dGlsLmNyZWF0ZUNsYXNzO2kuQmxlbmRDb2xvcj1yKGkuQmFzZUZpbHRlcix7dHlwZTpcIkJsZW5kQ29sb3JcIixjb2xvcjpcIiNGOTVDNjNcIixtb2RlOlwibXVsdGlwbHlcIixhbHBoYToxLGZyYWdtZW50U291cmNlOnttdWx0aXBseTpcImdsX0ZyYWdDb2xvci5yZ2IgKj0gdUNvbG9yLnJnYjtcXG5cIixzY3JlZW46XCJnbF9GcmFnQ29sb3IucmdiID0gMS4wIC0gKDEuMCAtIGdsX0ZyYWdDb2xvci5yZ2IpICogKDEuMCAtIHVDb2xvci5yZ2IpO1xcblwiLGFkZDpcImdsX0ZyYWdDb2xvci5yZ2IgKz0gdUNvbG9yLnJnYjtcXG5cIixkaWZmOlwiZ2xfRnJhZ0NvbG9yLnJnYiA9IGFicyhnbF9GcmFnQ29sb3IucmdiIC0gdUNvbG9yLnJnYik7XFxuXCIsc3VidHJhY3Q6XCJnbF9GcmFnQ29sb3IucmdiIC09IHVDb2xvci5yZ2I7XFxuXCIsbGlnaHRlbjpcImdsX0ZyYWdDb2xvci5yZ2IgPSBtYXgoZ2xfRnJhZ0NvbG9yLnJnYiwgdUNvbG9yLnJnYik7XFxuXCIsZGFya2VuOlwiZ2xfRnJhZ0NvbG9yLnJnYiA9IG1pbihnbF9GcmFnQ29sb3IucmdiLCB1Q29sb3IucmdiKTtcXG5cIixleGNsdXNpb246XCJnbF9GcmFnQ29sb3IucmdiICs9IHVDb2xvci5yZ2IgLSAyLjAgKiAodUNvbG9yLnJnYiAqIGdsX0ZyYWdDb2xvci5yZ2IpO1xcblwiLG92ZXJsYXk6XCJpZiAodUNvbG9yLnIgPCAwLjUpIHtcXG5nbF9GcmFnQ29sb3IuciAqPSAyLjAgKiB1Q29sb3IucjtcXG59IGVsc2Uge1xcbmdsX0ZyYWdDb2xvci5yID0gMS4wIC0gMi4wICogKDEuMCAtIGdsX0ZyYWdDb2xvci5yKSAqICgxLjAgLSB1Q29sb3Iucik7XFxufVxcbmlmICh1Q29sb3IuZyA8IDAuNSkge1xcbmdsX0ZyYWdDb2xvci5nICo9IDIuMCAqIHVDb2xvci5nO1xcbn0gZWxzZSB7XFxuZ2xfRnJhZ0NvbG9yLmcgPSAxLjAgLSAyLjAgKiAoMS4wIC0gZ2xfRnJhZ0NvbG9yLmcpICogKDEuMCAtIHVDb2xvci5nKTtcXG59XFxuaWYgKHVDb2xvci5iIDwgMC41KSB7XFxuZ2xfRnJhZ0NvbG9yLmIgKj0gMi4wICogdUNvbG9yLmI7XFxufSBlbHNlIHtcXG5nbF9GcmFnQ29sb3IuYiA9IDEuMCAtIDIuMCAqICgxLjAgLSBnbF9GcmFnQ29sb3IuYikgKiAoMS4wIC0gdUNvbG9yLmIpO1xcbn1cXG5cIix0aW50OlwiZ2xfRnJhZ0NvbG9yLnJnYiAqPSAoMS4wIC0gdUNvbG9yLmEpO1xcbmdsX0ZyYWdDb2xvci5yZ2IgKz0gdUNvbG9yLnJnYjtcXG5cIn0sYnVpbGRTb3VyY2U6ZnVuY3Rpb24odCl7cmV0dXJuXCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdVRleHR1cmU7XFxudW5pZm9ybSB2ZWM0IHVDb2xvcjtcXG52YXJ5aW5nIHZlYzIgdlRleENvb3JkO1xcbnZvaWQgbWFpbigpIHtcXG52ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VGV4Q29vcmQpO1xcbmdsX0ZyYWdDb2xvciA9IGNvbG9yO1xcbmlmIChjb2xvci5hID4gMC4wKSB7XFxuXCIrdGhpcy5mcmFnbWVudFNvdXJjZVt0XStcIn1cXG59XCJ9LHJldHJpZXZlU2hhZGVyOmZ1bmN0aW9uKHQpe3ZhciBlLGk9dGhpcy50eXBlK1wiX1wiK3RoaXMubW9kZTtyZXR1cm4gdC5wcm9ncmFtQ2FjaGUuaGFzT3duUHJvcGVydHkoaSl8fChlPXRoaXMuYnVpbGRTb3VyY2UodGhpcy5tb2RlKSx0LnByb2dyYW1DYWNoZVtpXT10aGlzLmNyZWF0ZVByb2dyYW0odC5jb250ZXh0LGUpKSx0LnByb2dyYW1DYWNoZVtpXX0sYXBwbHlUbzJkOmZ1bmN0aW9uKHQpe3ZhciBpLHIsbixzLG8sYSxoLGw9dC5pbWFnZURhdGEuZGF0YSxjPWwubGVuZ3RoLHU9MS10aGlzLmFscGhhO2k9KGg9bmV3IGUuQ29sb3IodGhpcy5jb2xvcikuZ2V0U291cmNlKCkpWzBdKnRoaXMuYWxwaGEscj1oWzFdKnRoaXMuYWxwaGEsbj1oWzJdKnRoaXMuYWxwaGE7Zm9yKHZhciBkPTA7ZDxjO2QrPTQpc3dpdGNoKHM9bFtkXSxvPWxbZCsxXSxhPWxbZCsyXSx0aGlzLm1vZGUpe2Nhc2VcIm11bHRpcGx5XCI6bFtkXT1zKmkvMjU1LGxbZCsxXT1vKnIvMjU1LGxbZCsyXT1hKm4vMjU1O2JyZWFrO2Nhc2VcInNjcmVlblwiOmxbZF09MjU1LSgyNTUtcykqKDI1NS1pKS8yNTUsbFtkKzFdPTI1NS0oMjU1LW8pKigyNTUtcikvMjU1LGxbZCsyXT0yNTUtKDI1NS1hKSooMjU1LW4pLzI1NTticmVhaztjYXNlXCJhZGRcIjpsW2RdPXMraSxsW2QrMV09bytyLGxbZCsyXT1hK247YnJlYWs7Y2FzZVwiZGlmZlwiOmNhc2VcImRpZmZlcmVuY2VcIjpsW2RdPU1hdGguYWJzKHMtaSksbFtkKzFdPU1hdGguYWJzKG8tciksbFtkKzJdPU1hdGguYWJzKGEtbik7YnJlYWs7Y2FzZVwic3VidHJhY3RcIjpsW2RdPXMtaSxsW2QrMV09by1yLGxbZCsyXT1hLW47YnJlYWs7Y2FzZVwiZGFya2VuXCI6bFtkXT1NYXRoLm1pbihzLGkpLGxbZCsxXT1NYXRoLm1pbihvLHIpLGxbZCsyXT1NYXRoLm1pbihhLG4pO2JyZWFrO2Nhc2VcImxpZ2h0ZW5cIjpsW2RdPU1hdGgubWF4KHMsaSksbFtkKzFdPU1hdGgubWF4KG8sciksbFtkKzJdPU1hdGgubWF4KGEsbik7YnJlYWs7Y2FzZVwib3ZlcmxheVwiOmxbZF09aTwxMjg/MipzKmkvMjU1OjI1NS0yKigyNTUtcykqKDI1NS1pKS8yNTUsbFtkKzFdPXI8MTI4PzIqbypyLzI1NToyNTUtMiooMjU1LW8pKigyNTUtcikvMjU1LGxbZCsyXT1uPDEyOD8yKmEqbi8yNTU6MjU1LTIqKDI1NS1hKSooMjU1LW4pLzI1NTticmVhaztjYXNlXCJleGNsdXNpb25cIjpsW2RdPWkrcy0yKmkqcy8yNTUsbFtkKzFdPXIrby0yKnIqby8yNTUsbFtkKzJdPW4rYS0yKm4qYS8yNTU7YnJlYWs7Y2FzZVwidGludFwiOmxbZF09aStzKnUsbFtkKzFdPXIrbyp1LGxbZCsyXT1uK2EqdX19LGdldFVuaWZvcm1Mb2NhdGlvbnM6ZnVuY3Rpb24odCxlKXtyZXR1cm57dUNvbG9yOnQuZ2V0VW5pZm9ybUxvY2F0aW9uKGUsXCJ1Q29sb3JcIil9fSxzZW5kVW5pZm9ybURhdGE6ZnVuY3Rpb24odCxpKXt2YXIgcj1uZXcgZS5Db2xvcih0aGlzLmNvbG9yKS5nZXRTb3VyY2UoKTtyWzBdPXRoaXMuYWxwaGEqclswXS8yNTUsclsxXT10aGlzLmFscGhhKnJbMV0vMjU1LHJbMl09dGhpcy5hbHBoYSpyWzJdLzI1NSxyWzNdPXRoaXMuYWxwaGEsdC51bmlmb3JtNGZ2KGkudUNvbG9yLHIpfSx0b09iamVjdDpmdW5jdGlvbigpe3JldHVybnt0eXBlOnRoaXMudHlwZSxjb2xvcjp0aGlzLmNvbG9yLG1vZGU6dGhpcy5tb2RlLGFscGhhOnRoaXMuYWxwaGF9fX0pLGUuSW1hZ2UuZmlsdGVycy5CbGVuZENvbG9yLmZyb21PYmplY3Q9ZS5JbWFnZS5maWx0ZXJzLkJhc2VGaWx0ZXIuZnJvbU9iamVjdH0oZSksZnVuY3Rpb24odCl7dmFyIGU9dC5mYWJyaWMsaT1lLkltYWdlLmZpbHRlcnMscj1lLnV0aWwuY3JlYXRlQ2xhc3M7aS5CbGVuZEltYWdlPXIoaS5CYXNlRmlsdGVyLHt0eXBlOlwiQmxlbmRJbWFnZVwiLGltYWdlOm51bGwsbW9kZTpcIm11bHRpcGx5XCIsYWxwaGE6MSx2ZXJ0ZXhTb3VyY2U6XCJhdHRyaWJ1dGUgdmVjMiBhUG9zaXRpb247XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG52YXJ5aW5nIHZlYzIgdlRleENvb3JkMjtcXG51bmlmb3JtIG1hdDMgdVRyYW5zZm9ybU1hdHJpeDtcXG52b2lkIG1haW4oKSB7XFxudlRleENvb3JkID0gYVBvc2l0aW9uO1xcbnZUZXhDb29yZDIgPSAodVRyYW5zZm9ybU1hdHJpeCAqIHZlYzMoYVBvc2l0aW9uLCAxLjApKS54eTtcXG5nbF9Qb3NpdGlvbiA9IHZlYzQoYVBvc2l0aW9uICogMi4wIC0gMS4wLCAwLjAsIDEuMCk7XFxufVwiLGZyYWdtZW50U291cmNlOnttdWx0aXBseTpcInByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG51bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcXG51bmlmb3JtIHNhbXBsZXIyRCB1SW1hZ2U7XFxudW5pZm9ybSB2ZWM0IHVDb2xvcjtcXG52YXJ5aW5nIHZlYzIgdlRleENvb3JkO1xcbnZhcnlpbmcgdmVjMiB2VGV4Q29vcmQyO1xcbnZvaWQgbWFpbigpIHtcXG52ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VGV4Q29vcmQpO1xcbnZlYzQgY29sb3IyID0gdGV4dHVyZTJEKHVJbWFnZSwgdlRleENvb3JkMik7XFxuY29sb3IucmdiYSAqPSBjb2xvcjIucmdiYTtcXG5nbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG59XCIsbWFzazpcInByZWNpc2lvbiBoaWdocCBmbG9hdDtcXG51bmlmb3JtIHNhbXBsZXIyRCB1VGV4dHVyZTtcXG51bmlmb3JtIHNhbXBsZXIyRCB1SW1hZ2U7XFxudW5pZm9ybSB2ZWM0IHVDb2xvcjtcXG52YXJ5aW5nIHZlYzIgdlRleENvb3JkO1xcbnZhcnlpbmcgdmVjMiB2VGV4Q29vcmQyO1xcbnZvaWQgbWFpbigpIHtcXG52ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VGV4Q29vcmQpO1xcbnZlYzQgY29sb3IyID0gdGV4dHVyZTJEKHVJbWFnZSwgdlRleENvb3JkMik7XFxuY29sb3IuYSA9IGNvbG9yMi5hO1xcbmdsX0ZyYWdDb2xvciA9IGNvbG9yO1xcbn1cIn0scmV0cmlldmVTaGFkZXI6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy50eXBlK1wiX1wiK3RoaXMubW9kZSxpPXRoaXMuZnJhZ21lbnRTb3VyY2VbdGhpcy5tb2RlXTtyZXR1cm4gdC5wcm9ncmFtQ2FjaGUuaGFzT3duUHJvcGVydHkoZSl8fCh0LnByb2dyYW1DYWNoZVtlXT10aGlzLmNyZWF0ZVByb2dyYW0odC5jb250ZXh0LGkpKSx0LnByb2dyYW1DYWNoZVtlXX0sYXBwbHlUb1dlYkdMOmZ1bmN0aW9uKHQpe3ZhciBlPXQuY29udGV4dCxpPXRoaXMuY3JlYXRlVGV4dHVyZSh0LmZpbHRlckJhY2tlbmQsdGhpcy5pbWFnZSk7dGhpcy5iaW5kQWRkaXRpb25hbFRleHR1cmUoZSxpLGUuVEVYVFVSRTEpLHRoaXMuY2FsbFN1cGVyKFwiYXBwbHlUb1dlYkdMXCIsdCksdGhpcy51bmJpbmRBZGRpdGlvbmFsVGV4dHVyZShlLGUuVEVYVFVSRTEpfSxjcmVhdGVUZXh0dXJlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuZ2V0Q2FjaGVkVGV4dHVyZShlLmNhY2hlS2V5LGUuX2VsZW1lbnQpfSxjYWxjdWxhdGVNYXRyaXg6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmltYWdlLGU9dC5fZWxlbWVudC53aWR0aCxpPXQuX2VsZW1lbnQuaGVpZ2h0O3JldHVyblsxL3Quc2NhbGVYLDAsMCwwLDEvdC5zY2FsZVksMCwtdC5sZWZ0L2UsLXQudG9wL2ksMV19LGFwcGx5VG8yZDpmdW5jdGlvbih0KXt2YXIgaSxyLG4scyxvLGEsaCxsLGMsdSxkLGY9dC5pbWFnZURhdGEsZz10LmZpbHRlckJhY2tlbmQucmVzb3VyY2VzLG09Zi5kYXRhLHA9bS5sZW5ndGgsdj1mLndpZHRoLF89Zi5oZWlnaHQseT10aGlzLmltYWdlO2cuYmxlbmRJbWFnZXx8KGcuYmxlbmRJbWFnZT1lLnV0aWwuY3JlYXRlQ2FudmFzRWxlbWVudCgpKSx1PShjPWcuYmxlbmRJbWFnZSkuZ2V0Q29udGV4dChcIjJkXCIpLGMud2lkdGghPT12fHxjLmhlaWdodCE9PV8/KGMud2lkdGg9dixjLmhlaWdodD1fKTp1LmNsZWFyUmVjdCgwLDAsdixfKSx1LnNldFRyYW5zZm9ybSh5LnNjYWxlWCwwLDAseS5zY2FsZVkseS5sZWZ0LHkudG9wKSx1LmRyYXdJbWFnZSh5Ll9lbGVtZW50LDAsMCx2LF8pLGQ9dS5nZXRJbWFnZURhdGEoMCwwLHYsXykuZGF0YTtmb3IodmFyIHc9MDt3PHA7dys9NClzd2l0Y2gobz1tW3ddLGE9bVt3KzFdLGg9bVt3KzJdLGw9bVt3KzNdLGk9ZFt3XSxyPWRbdysxXSxuPWRbdysyXSxzPWRbdyszXSx0aGlzLm1vZGUpe2Nhc2VcIm11bHRpcGx5XCI6bVt3XT1vKmkvMjU1LG1bdysxXT1hKnIvMjU1LG1bdysyXT1oKm4vMjU1LG1bdyszXT1sKnMvMjU1O2JyZWFrO2Nhc2VcIm1hc2tcIjptW3crM109c319LGdldFVuaWZvcm1Mb2NhdGlvbnM6ZnVuY3Rpb24odCxlKXtyZXR1cm57dVRyYW5zZm9ybU1hdHJpeDp0LmdldFVuaWZvcm1Mb2NhdGlvbihlLFwidVRyYW5zZm9ybU1hdHJpeFwiKSx1SW1hZ2U6dC5nZXRVbmlmb3JtTG9jYXRpb24oZSxcInVJbWFnZVwiKX19LHNlbmRVbmlmb3JtRGF0YTpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuY2FsY3VsYXRlTWF0cml4KCk7dC51bmlmb3JtMWkoZS51SW1hZ2UsMSksdC51bmlmb3JtTWF0cml4M2Z2KGUudVRyYW5zZm9ybU1hdHJpeCwhMSxpKX0sdG9PYmplY3Q6ZnVuY3Rpb24oKXtyZXR1cm57dHlwZTp0aGlzLnR5cGUsaW1hZ2U6dGhpcy5pbWFnZSYmdGhpcy5pbWFnZS50b09iamVjdCgpLG1vZGU6dGhpcy5tb2RlLGFscGhhOnRoaXMuYWxwaGF9fX0pLGUuSW1hZ2UuZmlsdGVycy5CbGVuZEltYWdlLmZyb21PYmplY3Q9ZnVuY3Rpb24odCxpKXtlLkltYWdlLmZyb21PYmplY3QodC5pbWFnZSwoZnVuY3Rpb24ocil7dmFyIG49ZS51dGlsLm9iamVjdC5jbG9uZSh0KTtuLmltYWdlPXIsaShuZXcgZS5JbWFnZS5maWx0ZXJzLkJsZW5kSW1hZ2UobikpfSkpfX0oZSksZnVuY3Rpb24odCl7dmFyIGU9dC5mYWJyaWN8fCh0LmZhYnJpYz17fSksaT1NYXRoLnBvdyxyPU1hdGguZmxvb3Isbj1NYXRoLnNxcnQscz1NYXRoLmFicyxvPU1hdGgucm91bmQsYT1NYXRoLnNpbixoPU1hdGguY2VpbCxsPWUuSW1hZ2UuZmlsdGVycyxjPWUudXRpbC5jcmVhdGVDbGFzcztsLlJlc2l6ZT1jKGwuQmFzZUZpbHRlcix7dHlwZTpcIlJlc2l6ZVwiLHJlc2l6ZVR5cGU6XCJoZXJtaXRlXCIsc2NhbGVYOjEsc2NhbGVZOjEsbGFuY3pvc0xvYmVzOjMsZ2V0VW5pZm9ybUxvY2F0aW9uczpmdW5jdGlvbih0LGUpe3JldHVybnt1RGVsdGE6dC5nZXRVbmlmb3JtTG9jYXRpb24oZSxcInVEZWx0YVwiKSx1VGFwczp0LmdldFVuaWZvcm1Mb2NhdGlvbihlLFwidVRhcHNcIil9fSxzZW5kVW5pZm9ybURhdGE6ZnVuY3Rpb24odCxlKXt0LnVuaWZvcm0yZnYoZS51RGVsdGEsdGhpcy5ob3Jpem9udGFsP1sxL3RoaXMud2lkdGgsMF06WzAsMS90aGlzLmhlaWdodF0pLHQudW5pZm9ybTFmdihlLnVUYXBzLHRoaXMudGFwcyl9LHJldHJpZXZlU2hhZGVyOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0RmlsdGVyV2luZG93KCksaT10aGlzLnR5cGUrXCJfXCIrZTtpZighdC5wcm9ncmFtQ2FjaGUuaGFzT3duUHJvcGVydHkoaSkpe3ZhciByPXRoaXMuZ2VuZXJhdGVTaGFkZXIoZSk7dC5wcm9ncmFtQ2FjaGVbaV09dGhpcy5jcmVhdGVQcm9ncmFtKHQuY29udGV4dCxyKX1yZXR1cm4gdC5wcm9ncmFtQ2FjaGVbaV19LGdldEZpbHRlcldpbmRvdzpmdW5jdGlvbigpe3ZhciB0PXRoaXMudGVtcFNjYWxlO3JldHVybiBNYXRoLmNlaWwodGhpcy5sYW5jem9zTG9iZXMvdCl9LGdldFRhcHM6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5sYW5jem9zQ3JlYXRlKHRoaXMubGFuY3pvc0xvYmVzKSxlPXRoaXMudGVtcFNjYWxlLGk9dGhpcy5nZXRGaWx0ZXJXaW5kb3coKSxyPW5ldyBBcnJheShpKSxuPTE7bjw9aTtuKyspcltuLTFdPXQobiplKTtyZXR1cm4gcn0sZ2VuZXJhdGVTaGFkZXI6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBBcnJheSh0KSxpPXRoaXMuZnJhZ21lbnRTb3VyY2VUT1Ascj0xO3I8PXQ7cisrKWVbci0xXT1yK1wiLjAgKiB1RGVsdGFcIjtyZXR1cm4gaSs9XCJ1bmlmb3JtIGZsb2F0IHVUYXBzW1wiK3QrXCJdO1xcblwiLGkrPVwidm9pZCBtYWluKCkge1xcblwiLGkrPVwiICB2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VGV4Q29vcmQpO1xcblwiLGkrPVwiICBmbG9hdCBzdW0gPSAxLjA7XFxuXCIsZS5mb3JFYWNoKChmdW5jdGlvbih0LGUpe2krPVwiICBjb2xvciArPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZUZXhDb29yZCArIFwiK3QrXCIpICogdVRhcHNbXCIrZStcIl07XFxuXCIsaSs9XCIgIGNvbG9yICs9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlRleENvb3JkIC0gXCIrdCtcIikgKiB1VGFwc1tcIitlK1wiXTtcXG5cIixpKz1cIiAgc3VtICs9IDIuMCAqIHVUYXBzW1wiK2UrXCJdO1xcblwifSkpLGkrPVwiICBnbF9GcmFnQ29sb3IgPSBjb2xvciAvIHN1bTtcXG5cIixpKz1cIn1cIn0sZnJhZ21lbnRTb3VyY2VUT1A6XCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdVRleHR1cmU7XFxudW5pZm9ybSB2ZWMyIHVEZWx0YTtcXG52YXJ5aW5nIHZlYzIgdlRleENvb3JkO1xcblwiLGFwcGx5VG86ZnVuY3Rpb24odCl7dC53ZWJnbD8odC5wYXNzZXMrKyx0aGlzLndpZHRoPXQuc291cmNlV2lkdGgsdGhpcy5ob3Jpem9udGFsPSEwLHRoaXMuZFc9TWF0aC5yb3VuZCh0aGlzLndpZHRoKnRoaXMuc2NhbGVYKSx0aGlzLmRIPXQuc291cmNlSGVpZ2h0LHRoaXMudGVtcFNjYWxlPXRoaXMuZFcvdGhpcy53aWR0aCx0aGlzLnRhcHM9dGhpcy5nZXRUYXBzKCksdC5kZXN0aW5hdGlvbldpZHRoPXRoaXMuZFcsdGhpcy5fc2V0dXBGcmFtZUJ1ZmZlcih0KSx0aGlzLmFwcGx5VG9XZWJHTCh0KSx0aGlzLl9zd2FwVGV4dHVyZXModCksdC5zb3VyY2VXaWR0aD10LmRlc3RpbmF0aW9uV2lkdGgsdGhpcy5oZWlnaHQ9dC5zb3VyY2VIZWlnaHQsdGhpcy5ob3Jpem9udGFsPSExLHRoaXMuZEg9TWF0aC5yb3VuZCh0aGlzLmhlaWdodCp0aGlzLnNjYWxlWSksdGhpcy50ZW1wU2NhbGU9dGhpcy5kSC90aGlzLmhlaWdodCx0aGlzLnRhcHM9dGhpcy5nZXRUYXBzKCksdC5kZXN0aW5hdGlvbkhlaWdodD10aGlzLmRILHRoaXMuX3NldHVwRnJhbWVCdWZmZXIodCksdGhpcy5hcHBseVRvV2ViR0wodCksdGhpcy5fc3dhcFRleHR1cmVzKHQpLHQuc291cmNlSGVpZ2h0PXQuZGVzdGluYXRpb25IZWlnaHQpOnRoaXMuYXBwbHlUbzJkKHQpfSxpc05ldXRyYWxTdGF0ZTpmdW5jdGlvbigpe3JldHVybiAxPT09dGhpcy5zY2FsZVgmJjE9PT10aGlzLnNjYWxlWX0sbGFuY3pvc0NyZWF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSl7aWYoZT49dHx8ZTw9LXQpcmV0dXJuIDA7aWYoZTwxLjE5MjA5MjllLTcmJmU+LTEuMTkyMDkyOWUtNylyZXR1cm4gMTt2YXIgaT0oZSo9TWF0aC5QSSkvdDtyZXR1cm4gYShlKS9lKmEoaSkvaX19LGFwcGx5VG8yZDpmdW5jdGlvbih0KXt2YXIgZT10LmltYWdlRGF0YSxpPXRoaXMuc2NhbGVYLHI9dGhpcy5zY2FsZVk7dGhpcy5yY3BTY2FsZVg9MS9pLHRoaXMucmNwU2NhbGVZPTEvcjt2YXIgbixzPWUud2lkdGgsYT1lLmhlaWdodCxoPW8ocyppKSxsPW8oYSpyKTtcInNsaWNlSGFja1wiPT09dGhpcy5yZXNpemVUeXBlP249dGhpcy5zbGljZUJ5VHdvKHQscyxhLGgsbCk6XCJoZXJtaXRlXCI9PT10aGlzLnJlc2l6ZVR5cGU/bj10aGlzLmhlcm1pdGVGYXN0UmVzaXplKHQscyxhLGgsbCk6XCJiaWxpbmVhclwiPT09dGhpcy5yZXNpemVUeXBlP249dGhpcy5iaWxpbmVhckZpbHRlcmluZyh0LHMsYSxoLGwpOlwibGFuY3pvc1wiPT09dGhpcy5yZXNpemVUeXBlJiYobj10aGlzLmxhbmN6b3NSZXNpemUodCxzLGEsaCxsKSksdC5pbWFnZURhdGE9bn0sc2xpY2VCeVR3bzpmdW5jdGlvbih0LGksbixzLG8pe3ZhciBhLGgsbD10LmltYWdlRGF0YSxjPS41LHU9ITEsZD0hMSxmPWkqYyxnPW4qYyxtPWUuZmlsdGVyQmFja2VuZC5yZXNvdXJjZXMscD0wLHY9MCxfPWkseT0wO2ZvcihtLnNsaWNlQnlUd298fChtLnNsaWNlQnlUd289ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSksKChhPW0uc2xpY2VCeVR3bykud2lkdGg8MS41Kml8fGEuaGVpZ2h0PG4pJiYoYS53aWR0aD0xLjUqaSxhLmhlaWdodD1uKSwoaD1hLmdldENvbnRleHQoXCIyZFwiKSkuY2xlYXJSZWN0KDAsMCwxLjUqaSxuKSxoLnB1dEltYWdlRGF0YShsLDAsMCkscz1yKHMpLG89cihvKTshdXx8IWQ7KWk9ZixuPWcsczxyKGYqYyk/Zj1yKGYqYyk6KGY9cyx1PSEwKSxvPHIoZypjKT9nPXIoZypjKTooZz1vLGQ9ITApLGguZHJhd0ltYWdlKGEscCx2LGksbixfLHksZixnKSxwPV8sdj15LHkrPWc7cmV0dXJuIGguZ2V0SW1hZ2VEYXRhKHAsdixzLG8pfSxsYW5jem9zUmVzaXplOmZ1bmN0aW9uKHQsZSxvLGEsbCl7dmFyIGM9dC5pbWFnZURhdGEuZGF0YSx1PXQuY3R4LmNyZWF0ZUltYWdlRGF0YShhLGwpLGQ9dS5kYXRhLGY9dGhpcy5sYW5jem9zQ3JlYXRlKHRoaXMubGFuY3pvc0xvYmVzKSxnPXRoaXMucmNwU2NhbGVYLG09dGhpcy5yY3BTY2FsZVkscD0yL3RoaXMucmNwU2NhbGVYLHY9Mi90aGlzLnJjcFNjYWxlWSxfPWgoZyp0aGlzLmxhbmN6b3NMb2Jlcy8yKSx5PWgobSp0aGlzLmxhbmN6b3NMb2Jlcy8yKSx3PXt9LGI9e30seD17fTtyZXR1cm4gZnVuY3Rpb24gdChoKXt2YXIgQyxTLFQsRSxPLEEsSSxMLEQsTSxGO2ZvcihiLng9KGgrLjUpKmcseC54PXIoYi54KSxDPTA7QzxsO0MrKyl7Zm9yKGIueT0oQysuNSkqbSx4Lnk9cihiLnkpLE89MCxBPTAsST0wLEw9MCxEPTAsUz14LngtXztTPD14LngrXztTKyspaWYoIShTPDB8fFM+PWUpKXtNPXIoMWUzKnMoUy1iLngpKSx3W01dfHwod1tNXT17fSk7Zm9yKHZhciBQPXgueS15O1A8PXgueSt5O1ArKylQPDB8fFA+PW98fChGPXIoMWUzKnMoUC1iLnkpKSx3W01dW0ZdfHwod1tNXVtGXT1mKG4oaShNKnAsMikraShGKnYsMikpLzFlMykpLChUPXdbTV1bRl0pPjAmJihPKz1ULEErPVQqY1tFPTQqKFAqZStTKV0sSSs9VCpjW0UrMV0sTCs9VCpjW0UrMl0sRCs9VCpjW0UrM10pKX1kW0U9NCooQyphK2gpXT1BL08sZFtFKzFdPUkvTyxkW0UrMl09TC9PLGRbRSszXT1EL099cmV0dXJuKytoPGE/dChoKTp1fSgwKX0sYmlsaW5lYXJGaWx0ZXJpbmc6ZnVuY3Rpb24odCxlLGksbixzKXt2YXIgbyxhLGgsbCxjLHUsZCxmLGcsbT0wLHA9dGhpcy5yY3BTY2FsZVgsdj10aGlzLnJjcFNjYWxlWSxfPTQqKGUtMSkseT10LmltYWdlRGF0YS5kYXRhLHc9dC5jdHguY3JlYXRlSW1hZ2VEYXRhKG4scyksYj13LmRhdGE7Zm9yKGg9MDtoPHM7aCsrKWZvcihsPTA7bDxuO2wrKylmb3IoYz1wKmwtKG89cihwKmwpKSx1PXYqaC0oYT1yKHYqaCkpLGc9NCooYSplK28pLGQ9MDtkPDQ7ZCsrKWY9eVtnK2RdKigxLWMpKigxLXUpK3lbZys0K2RdKmMqKDEtdSkreVtnK18rZF0qdSooMS1jKSt5W2crXys0K2RdKmMqdSxiW20rK109ZjtyZXR1cm4gd30saGVybWl0ZUZhc3RSZXNpemU6ZnVuY3Rpb24odCxlLGksbyxhKXtmb3IodmFyIGw9dGhpcy5yY3BTY2FsZVgsYz10aGlzLnJjcFNjYWxlWSx1PWgobC8yKSxkPWgoYy8yKSxmPXQuaW1hZ2VEYXRhLmRhdGEsZz10LmN0eC5jcmVhdGVJbWFnZURhdGEobyxhKSxtPWcuZGF0YSxwPTA7cDxhO3ArKylmb3IodmFyIHY9MDt2PG87disrKXtmb3IodmFyIF89NCooditwKm8pLHk9MCx3PTAsYj0wLHg9MCxDPTAsUz0wLFQ9MCxFPShwKy41KSpjLE89cihwKmMpO088KHArMSkqYztPKyspZm9yKHZhciBBPXMoRS0oTysuNSkpL2QsST0odisuNSkqbCxMPUEqQSxEPXIodipsKTtEPCh2KzEpKmw7RCsrKXt2YXIgTT1zKEktKEQrLjUpKS91LEY9bihMK00qTSk7Rj4xJiZGPC0xfHwoeT0yKkYqRipGLTMqRipGKzEpPjAmJihUKz15KmZbMysoTT00KihEK08qZSkpXSxiKz15LGZbTSszXTwyNTUmJih5PXkqZltNKzNdLzI1MCkseCs9eSpmW01dLEMrPXkqZltNKzFdLFMrPXkqZltNKzJdLHcrPXkpfW1bX109eC93LG1bXysxXT1DL3csbVtfKzJdPVMvdyxtW18rM109VC9ifXJldHVybiBnfSx0b09iamVjdDpmdW5jdGlvbigpe3JldHVybnt0eXBlOnRoaXMudHlwZSxzY2FsZVg6dGhpcy5zY2FsZVgsc2NhbGVZOnRoaXMuc2NhbGVZLHJlc2l6ZVR5cGU6dGhpcy5yZXNpemVUeXBlLGxhbmN6b3NMb2Jlczp0aGlzLmxhbmN6b3NMb2Jlc319fSksZS5JbWFnZS5maWx0ZXJzLlJlc2l6ZS5mcm9tT2JqZWN0PWUuSW1hZ2UuZmlsdGVycy5CYXNlRmlsdGVyLmZyb21PYmplY3R9KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljfHwodC5mYWJyaWM9e30pLGk9ZS5JbWFnZS5maWx0ZXJzLHI9ZS51dGlsLmNyZWF0ZUNsYXNzO2kuQ29udHJhc3Q9cihpLkJhc2VGaWx0ZXIse3R5cGU6XCJDb250cmFzdFwiLGZyYWdtZW50U291cmNlOlwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgdUNvbnRyYXN0O1xcbnZhcnlpbmcgdmVjMiB2VGV4Q29vcmQ7XFxudm9pZCBtYWluKCkge1xcbnZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZUZXhDb29yZCk7XFxuZmxvYXQgY29udHJhc3RGID0gMS4wMTUgKiAodUNvbnRyYXN0ICsgMS4wKSAvICgxLjAgKiAoMS4wMTUgLSB1Q29udHJhc3QpKTtcXG5jb2xvci5yZ2IgPSBjb250cmFzdEYgKiAoY29sb3IucmdiIC0gMC41KSArIDAuNTtcXG5nbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG59XCIsY29udHJhc3Q6MCxtYWluUGFyYW1ldGVyOlwiY29udHJhc3RcIixhcHBseVRvMmQ6ZnVuY3Rpb24odCl7aWYoMCE9PXRoaXMuY29udHJhc3Qpe3ZhciBlLGk9dC5pbWFnZURhdGEuZGF0YSxyPWkubGVuZ3RoLG49TWF0aC5mbG9vcigyNTUqdGhpcy5jb250cmFzdCkscz0yNTkqKG4rMjU1KS8oMjU1KigyNTktbikpO2ZvcihlPTA7ZTxyO2UrPTQpaVtlXT1zKihpW2VdLTEyOCkrMTI4LGlbZSsxXT1zKihpW2UrMV0tMTI4KSsxMjgsaVtlKzJdPXMqKGlbZSsyXS0xMjgpKzEyOH19LGdldFVuaWZvcm1Mb2NhdGlvbnM6ZnVuY3Rpb24odCxlKXtyZXR1cm57dUNvbnRyYXN0OnQuZ2V0VW5pZm9ybUxvY2F0aW9uKGUsXCJ1Q29udHJhc3RcIil9fSxzZW5kVW5pZm9ybURhdGE6ZnVuY3Rpb24odCxlKXt0LnVuaWZvcm0xZihlLnVDb250cmFzdCx0aGlzLmNvbnRyYXN0KX19KSxlLkltYWdlLmZpbHRlcnMuQ29udHJhc3QuZnJvbU9iamVjdD1lLkltYWdlLmZpbHRlcnMuQmFzZUZpbHRlci5mcm9tT2JqZWN0fShlKSxmdW5jdGlvbih0KXt2YXIgZT10LmZhYnJpY3x8KHQuZmFicmljPXt9KSxpPWUuSW1hZ2UuZmlsdGVycyxyPWUudXRpbC5jcmVhdGVDbGFzcztpLlNhdHVyYXRpb249cihpLkJhc2VGaWx0ZXIse3R5cGU6XCJTYXR1cmF0aW9uXCIsZnJhZ21lbnRTb3VyY2U6XCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdVRleHR1cmU7XFxudW5pZm9ybSBmbG9hdCB1U2F0dXJhdGlvbjtcXG52YXJ5aW5nIHZlYzIgdlRleENvb3JkO1xcbnZvaWQgbWFpbigpIHtcXG52ZWM0IGNvbG9yID0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VGV4Q29vcmQpO1xcbmZsb2F0IHJnTWF4ID0gbWF4KGNvbG9yLnIsIGNvbG9yLmcpO1xcbmZsb2F0IHJnYk1heCA9IG1heChyZ01heCwgY29sb3IuYik7XFxuY29sb3IuciArPSByZ2JNYXggIT0gY29sb3IuciA/IChyZ2JNYXggLSBjb2xvci5yKSAqIHVTYXR1cmF0aW9uIDogMC4wMDtcXG5jb2xvci5nICs9IHJnYk1heCAhPSBjb2xvci5nID8gKHJnYk1heCAtIGNvbG9yLmcpICogdVNhdHVyYXRpb24gOiAwLjAwO1xcbmNvbG9yLmIgKz0gcmdiTWF4ICE9IGNvbG9yLmIgPyAocmdiTWF4IC0gY29sb3IuYikgKiB1U2F0dXJhdGlvbiA6IDAuMDA7XFxuZ2xfRnJhZ0NvbG9yID0gY29sb3I7XFxufVwiLHNhdHVyYXRpb246MCxtYWluUGFyYW1ldGVyOlwic2F0dXJhdGlvblwiLGFwcGx5VG8yZDpmdW5jdGlvbih0KXtpZigwIT09dGhpcy5zYXR1cmF0aW9uKXt2YXIgZSxpLHI9dC5pbWFnZURhdGEuZGF0YSxuPXIubGVuZ3RoLHM9LXRoaXMuc2F0dXJhdGlvbjtmb3IoZT0wO2U8bjtlKz00KWk9TWF0aC5tYXgocltlXSxyW2UrMV0scltlKzJdKSxyW2VdKz1pIT09cltlXT8oaS1yW2VdKSpzOjAscltlKzFdKz1pIT09cltlKzFdPyhpLXJbZSsxXSkqczowLHJbZSsyXSs9aSE9PXJbZSsyXT8oaS1yW2UrMl0pKnM6MH19LGdldFVuaWZvcm1Mb2NhdGlvbnM6ZnVuY3Rpb24odCxlKXtyZXR1cm57dVNhdHVyYXRpb246dC5nZXRVbmlmb3JtTG9jYXRpb24oZSxcInVTYXR1cmF0aW9uXCIpfX0sc2VuZFVuaWZvcm1EYXRhOmZ1bmN0aW9uKHQsZSl7dC51bmlmb3JtMWYoZS51U2F0dXJhdGlvbiwtdGhpcy5zYXR1cmF0aW9uKX19KSxlLkltYWdlLmZpbHRlcnMuU2F0dXJhdGlvbi5mcm9tT2JqZWN0PWUuSW1hZ2UuZmlsdGVycy5CYXNlRmlsdGVyLmZyb21PYmplY3R9KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljfHwodC5mYWJyaWM9e30pLGk9ZS5JbWFnZS5maWx0ZXJzLHI9ZS51dGlsLmNyZWF0ZUNsYXNzO2kuVmlicmFuY2U9cihpLkJhc2VGaWx0ZXIse3R5cGU6XCJWaWJyYW5jZVwiLGZyYWdtZW50U291cmNlOlwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgdVZpYnJhbmNlO1xcbnZhcnlpbmcgdmVjMiB2VGV4Q29vcmQ7XFxudm9pZCBtYWluKCkge1xcbnZlYzQgY29sb3IgPSB0ZXh0dXJlMkQodVRleHR1cmUsIHZUZXhDb29yZCk7XFxuZmxvYXQgbWF4ID0gbWF4KGNvbG9yLnIsIG1heChjb2xvci5nLCBjb2xvci5iKSk7XFxuZmxvYXQgYXZnID0gKGNvbG9yLnIgKyBjb2xvci5nICsgY29sb3IuYikgLyAzLjA7XFxuZmxvYXQgYW10ID0gKGFicyhtYXggLSBhdmcpICogMi4wKSAqIHVWaWJyYW5jZTtcXG5jb2xvci5yICs9IG1heCAhPSBjb2xvci5yID8gKG1heCAtIGNvbG9yLnIpICogYW10IDogMC4wMDtcXG5jb2xvci5nICs9IG1heCAhPSBjb2xvci5nID8gKG1heCAtIGNvbG9yLmcpICogYW10IDogMC4wMDtcXG5jb2xvci5iICs9IG1heCAhPSBjb2xvci5iID8gKG1heCAtIGNvbG9yLmIpICogYW10IDogMC4wMDtcXG5nbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG59XCIsdmlicmFuY2U6MCxtYWluUGFyYW1ldGVyOlwidmlicmFuY2VcIixhcHBseVRvMmQ6ZnVuY3Rpb24odCl7aWYoMCE9PXRoaXMudmlicmFuY2Upe3ZhciBlLGkscixuLHM9dC5pbWFnZURhdGEuZGF0YSxvPXMubGVuZ3RoLGE9LXRoaXMudmlicmFuY2U7Zm9yKGU9MDtlPG87ZSs9NClpPU1hdGgubWF4KHNbZV0sc1tlKzFdLHNbZSsyXSkscj0oc1tlXStzW2UrMV0rc1tlKzJdKS8zLG49MipNYXRoLmFicyhpLXIpLzI1NSphLHNbZV0rPWkhPT1zW2VdPyhpLXNbZV0pKm46MCxzW2UrMV0rPWkhPT1zW2UrMV0/KGktc1tlKzFdKSpuOjAsc1tlKzJdKz1pIT09c1tlKzJdPyhpLXNbZSsyXSkqbjowfX0sZ2V0VW5pZm9ybUxvY2F0aW9uczpmdW5jdGlvbih0LGUpe3JldHVybnt1VmlicmFuY2U6dC5nZXRVbmlmb3JtTG9jYXRpb24oZSxcInVWaWJyYW5jZVwiKX19LHNlbmRVbmlmb3JtRGF0YTpmdW5jdGlvbih0LGUpe3QudW5pZm9ybTFmKGUudVZpYnJhbmNlLC10aGlzLnZpYnJhbmNlKX19KSxlLkltYWdlLmZpbHRlcnMuVmlicmFuY2UuZnJvbU9iamVjdD1lLkltYWdlLmZpbHRlcnMuQmFzZUZpbHRlci5mcm9tT2JqZWN0fShlKSxmdW5jdGlvbih0KXt2YXIgZT10LmZhYnJpY3x8KHQuZmFicmljPXt9KSxpPWUuSW1hZ2UuZmlsdGVycyxyPWUudXRpbC5jcmVhdGVDbGFzcztpLkJsdXI9cihpLkJhc2VGaWx0ZXIse3R5cGU6XCJCbHVyXCIsZnJhZ21lbnRTb3VyY2U6XCJwcmVjaXNpb24gaGlnaHAgZmxvYXQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdVRleHR1cmU7XFxudW5pZm9ybSB2ZWMyIHVEZWx0YTtcXG52YXJ5aW5nIHZlYzIgdlRleENvb3JkO1xcbmNvbnN0IGZsb2F0IG5TYW1wbGVzID0gMTUuMDtcXG52ZWMzIHYzb2Zmc2V0ID0gdmVjMygxMi45ODk4LCA3OC4yMzMsIDE1MS43MTgyKTtcXG5mbG9hdCByYW5kb20odmVjMyBzY2FsZSkge1xcbnJldHVybiBmcmFjdChzaW4oZG90KGdsX0ZyYWdDb29yZC54eXosIHNjYWxlKSkgKiA0Mzc1OC41NDUzKTtcXG59XFxudm9pZCBtYWluKCkge1xcbnZlYzQgY29sb3IgPSB2ZWM0KDAuMCk7XFxuZmxvYXQgdG90YWwgPSAwLjA7XFxuZmxvYXQgb2Zmc2V0ID0gcmFuZG9tKHYzb2Zmc2V0KTtcXG5mb3IgKGZsb2F0IHQgPSAtblNhbXBsZXM7IHQgPD0gblNhbXBsZXM7IHQrKykge1xcbmZsb2F0IHBlcmNlbnQgPSAodCArIG9mZnNldCAtIDAuNSkgLyBuU2FtcGxlcztcXG5mbG9hdCB3ZWlnaHQgPSAxLjAgLSBhYnMocGVyY2VudCk7XFxuY29sb3IgKz0gdGV4dHVyZTJEKHVUZXh0dXJlLCB2VGV4Q29vcmQgKyB1RGVsdGEgKiBwZXJjZW50KSAqIHdlaWdodDtcXG50b3RhbCArPSB3ZWlnaHQ7XFxufVxcbmdsX0ZyYWdDb2xvciA9IGNvbG9yIC8gdG90YWw7XFxufVwiLGJsdXI6MCxtYWluUGFyYW1ldGVyOlwiYmx1clwiLGFwcGx5VG86ZnVuY3Rpb24odCl7dC53ZWJnbD8odGhpcy5hc3BlY3RSYXRpbz10LnNvdXJjZVdpZHRoL3Quc291cmNlSGVpZ2h0LHQucGFzc2VzKyssdGhpcy5fc2V0dXBGcmFtZUJ1ZmZlcih0KSx0aGlzLmhvcml6b250YWw9ITAsdGhpcy5hcHBseVRvV2ViR0wodCksdGhpcy5fc3dhcFRleHR1cmVzKHQpLHRoaXMuX3NldHVwRnJhbWVCdWZmZXIodCksdGhpcy5ob3Jpem9udGFsPSExLHRoaXMuYXBwbHlUb1dlYkdMKHQpLHRoaXMuX3N3YXBUZXh0dXJlcyh0KSk6dGhpcy5hcHBseVRvMmQodCl9LGFwcGx5VG8yZDpmdW5jdGlvbih0KXt0LmltYWdlRGF0YT10aGlzLnNpbXBsZUJsdXIodCl9LHNpbXBsZUJsdXI6ZnVuY3Rpb24odCl7dmFyIGkscixuPXQuZmlsdGVyQmFja2VuZC5yZXNvdXJjZXMscz10LmltYWdlRGF0YS53aWR0aCxvPXQuaW1hZ2VEYXRhLmhlaWdodDtuLmJsdXJMYXllcjF8fChuLmJsdXJMYXllcjE9ZS51dGlsLmNyZWF0ZUNhbnZhc0VsZW1lbnQoKSxuLmJsdXJMYXllcjI9ZS51dGlsLmNyZWF0ZUNhbnZhc0VsZW1lbnQoKSksaT1uLmJsdXJMYXllcjEscj1uLmJsdXJMYXllcjIsaS53aWR0aD09PXMmJmkuaGVpZ2h0PT09b3x8KHIud2lkdGg9aS53aWR0aD1zLHIuaGVpZ2h0PWkuaGVpZ2h0PW8pO3ZhciBhLGgsbCxjLHU9aS5nZXRDb250ZXh0KFwiMmRcIiksZD1yLmdldENvbnRleHQoXCIyZFwiKSxmPS4wNip0aGlzLmJsdXIqLjU7Zm9yKHUucHV0SW1hZ2VEYXRhKHQuaW1hZ2VEYXRhLDAsMCksZC5jbGVhclJlY3QoMCwwLHMsbyksYz0tMTU7Yzw9MTU7YysrKWw9ZiooaD1jLzE1KSpzKyhhPShNYXRoLnJhbmRvbSgpLS41KS80KSxkLmdsb2JhbEFscGhhPTEtTWF0aC5hYnMoaCksZC5kcmF3SW1hZ2UoaSxsLGEpLHUuZHJhd0ltYWdlKHIsMCwwKSxkLmdsb2JhbEFscGhhPTEsZC5jbGVhclJlY3QoMCwwLHIud2lkdGgsci5oZWlnaHQpO2ZvcihjPS0xNTtjPD0xNTtjKyspbD1mKihoPWMvMTUpKm8rKGE9KE1hdGgucmFuZG9tKCktLjUpLzQpLGQuZ2xvYmFsQWxwaGE9MS1NYXRoLmFicyhoKSxkLmRyYXdJbWFnZShpLGEsbCksdS5kcmF3SW1hZ2UociwwLDApLGQuZ2xvYmFsQWxwaGE9MSxkLmNsZWFyUmVjdCgwLDAsci53aWR0aCxyLmhlaWdodCk7dC5jdHguZHJhd0ltYWdlKGksMCwwKTt2YXIgZz10LmN0eC5nZXRJbWFnZURhdGEoMCwwLGkud2lkdGgsaS5oZWlnaHQpO3JldHVybiB1Lmdsb2JhbEFscGhhPTEsdS5jbGVhclJlY3QoMCwwLGkud2lkdGgsaS5oZWlnaHQpLGd9LGdldFVuaWZvcm1Mb2NhdGlvbnM6ZnVuY3Rpb24odCxlKXtyZXR1cm57ZGVsdGE6dC5nZXRVbmlmb3JtTG9jYXRpb24oZSxcInVEZWx0YVwiKX19LHNlbmRVbmlmb3JtRGF0YTpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuY2hvb3NlUmlnaHREZWx0YSgpO3QudW5pZm9ybTJmdihlLmRlbHRhLGkpfSxjaG9vc2VSaWdodERlbHRhOmZ1bmN0aW9uKCl7dmFyIHQsZT0xLGk9WzAsMF07cmV0dXJuIHRoaXMuaG9yaXpvbnRhbD90aGlzLmFzcGVjdFJhdGlvPjEmJihlPTEvdGhpcy5hc3BlY3RSYXRpbyk6dGhpcy5hc3BlY3RSYXRpbzwxJiYoZT10aGlzLmFzcGVjdFJhdGlvKSx0PWUqdGhpcy5ibHVyKi4xMix0aGlzLmhvcml6b250YWw/aVswXT10OmlbMV09dCxpfX0pLGkuQmx1ci5mcm9tT2JqZWN0PWUuSW1hZ2UuZmlsdGVycy5CYXNlRmlsdGVyLmZyb21PYmplY3R9KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljfHwodC5mYWJyaWM9e30pLGk9ZS5JbWFnZS5maWx0ZXJzLHI9ZS51dGlsLmNyZWF0ZUNsYXNzO2kuR2FtbWE9cihpLkJhc2VGaWx0ZXIse3R5cGU6XCJHYW1tYVwiLGZyYWdtZW50U291cmNlOlwicHJlY2lzaW9uIGhpZ2hwIGZsb2F0O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHVUZXh0dXJlO1xcbnVuaWZvcm0gdmVjMyB1R2FtbWE7XFxudmFyeWluZyB2ZWMyIHZUZXhDb29yZDtcXG52b2lkIG1haW4oKSB7XFxudmVjNCBjb2xvciA9IHRleHR1cmUyRCh1VGV4dHVyZSwgdlRleENvb3JkKTtcXG52ZWMzIGNvcnJlY3Rpb24gPSAoMS4wIC8gdUdhbW1hKTtcXG5jb2xvci5yID0gcG93KGNvbG9yLnIsIGNvcnJlY3Rpb24ucik7XFxuY29sb3IuZyA9IHBvdyhjb2xvci5nLCBjb3JyZWN0aW9uLmcpO1xcbmNvbG9yLmIgPSBwb3coY29sb3IuYiwgY29ycmVjdGlvbi5iKTtcXG5nbF9GcmFnQ29sb3IgPSBjb2xvcjtcXG5nbF9GcmFnQ29sb3IucmdiICo9IGNvbG9yLmE7XFxufVwiLGdhbW1hOlsxLDEsMV0sbWFpblBhcmFtZXRlcjpcImdhbW1hXCIsaW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt0aGlzLmdhbW1hPVsxLDEsMV0saS5CYXNlRmlsdGVyLnByb3RvdHlwZS5pbml0aWFsaXplLmNhbGwodGhpcyx0KX0sYXBwbHlUbzJkOmZ1bmN0aW9uKHQpe3ZhciBlLGk9dC5pbWFnZURhdGEuZGF0YSxyPXRoaXMuZ2FtbWEsbj1pLmxlbmd0aCxzPTEvclswXSxvPTEvclsxXSxhPTEvclsyXTtmb3IodGhpcy5yVmFsc3x8KHRoaXMuclZhbHM9bmV3IFVpbnQ4QXJyYXkoMjU2KSx0aGlzLmdWYWxzPW5ldyBVaW50OEFycmF5KDI1NiksdGhpcy5iVmFscz1uZXcgVWludDhBcnJheSgyNTYpKSxlPTAsbj0yNTY7ZTxuO2UrKyl0aGlzLnJWYWxzW2VdPTI1NSpNYXRoLnBvdyhlLzI1NSxzKSx0aGlzLmdWYWxzW2VdPTI1NSpNYXRoLnBvdyhlLzI1NSxvKSx0aGlzLmJWYWxzW2VdPTI1NSpNYXRoLnBvdyhlLzI1NSxhKTtmb3IoZT0wLG49aS5sZW5ndGg7ZTxuO2UrPTQpaVtlXT10aGlzLnJWYWxzW2lbZV1dLGlbZSsxXT10aGlzLmdWYWxzW2lbZSsxXV0saVtlKzJdPXRoaXMuYlZhbHNbaVtlKzJdXX0sZ2V0VW5pZm9ybUxvY2F0aW9uczpmdW5jdGlvbih0LGUpe3JldHVybnt1R2FtbWE6dC5nZXRVbmlmb3JtTG9jYXRpb24oZSxcInVHYW1tYVwiKX19LHNlbmRVbmlmb3JtRGF0YTpmdW5jdGlvbih0LGUpe3QudW5pZm9ybTNmdihlLnVHYW1tYSx0aGlzLmdhbW1hKX19KSxlLkltYWdlLmZpbHRlcnMuR2FtbWEuZnJvbU9iamVjdD1lLkltYWdlLmZpbHRlcnMuQmFzZUZpbHRlci5mcm9tT2JqZWN0fShlKSxmdW5jdGlvbih0KXt2YXIgZT10LmZhYnJpY3x8KHQuZmFicmljPXt9KSxpPWUuSW1hZ2UuZmlsdGVycyxyPWUudXRpbC5jcmVhdGVDbGFzcztpLkNvbXBvc2VkPXIoaS5CYXNlRmlsdGVyLHt0eXBlOlwiQ29tcG9zZWRcIixzdWJGaWx0ZXJzOltdLGluaXRpYWxpemU6ZnVuY3Rpb24odCl7dGhpcy5jYWxsU3VwZXIoXCJpbml0aWFsaXplXCIsdCksdGhpcy5zdWJGaWx0ZXJzPXRoaXMuc3ViRmlsdGVycy5zbGljZSgwKX0sYXBwbHlUbzpmdW5jdGlvbih0KXt0LnBhc3Nlcys9dGhpcy5zdWJGaWx0ZXJzLmxlbmd0aC0xLHRoaXMuc3ViRmlsdGVycy5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmFwcGx5VG8odCl9KSl9LHRvT2JqZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIGUudXRpbC5vYmplY3QuZXh0ZW5kKHRoaXMuY2FsbFN1cGVyKFwidG9PYmplY3RcIikse3N1YkZpbHRlcnM6dGhpcy5zdWJGaWx0ZXJzLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQudG9PYmplY3QoKX0pKX0pfSxpc05ldXRyYWxTdGF0ZTpmdW5jdGlvbigpe3JldHVybiF0aGlzLnN1YkZpbHRlcnMuc29tZSgoZnVuY3Rpb24odCl7cmV0dXJuIXQuaXNOZXV0cmFsU3RhdGUoKX0pKX19KSxlLkltYWdlLmZpbHRlcnMuQ29tcG9zZWQuZnJvbU9iamVjdD1mdW5jdGlvbih0LGkpe3ZhciByPSh0LnN1YkZpbHRlcnN8fFtdKS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgZS5JbWFnZS5maWx0ZXJzW3QudHlwZV0odCl9KSksbj1uZXcgZS5JbWFnZS5maWx0ZXJzLkNvbXBvc2VkKHtzdWJGaWx0ZXJzOnJ9KTtyZXR1cm4gaSYmaShuKSxufX0oZSksZnVuY3Rpb24odCl7dmFyIGU9dC5mYWJyaWN8fCh0LmZhYnJpYz17fSksaT1lLkltYWdlLmZpbHRlcnMscj1lLnV0aWwuY3JlYXRlQ2xhc3M7aS5IdWVSb3RhdGlvbj1yKGkuQ29sb3JNYXRyaXgse3R5cGU6XCJIdWVSb3RhdGlvblwiLHJvdGF0aW9uOjAsbWFpblBhcmFtZXRlcjpcInJvdGF0aW9uXCIsY2FsY3VsYXRlTWF0cml4OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yb3RhdGlvbipNYXRoLlBJLGk9ZS51dGlsLmNvcyh0KSxyPWUudXRpbC5zaW4odCksbj0xLzMscz1NYXRoLnNxcnQobikqcixvPTEtaTt0aGlzLm1hdHJpeD1bMSwwLDAsMCwwLDAsMSwwLDAsMCwwLDAsMSwwLDAsMCwwLDAsMSwwXSx0aGlzLm1hdHJpeFswXT1pK28vMyx0aGlzLm1hdHJpeFsxXT1uKm8tcyx0aGlzLm1hdHJpeFsyXT1uKm8rcyx0aGlzLm1hdHJpeFs1XT1uKm8rcyx0aGlzLm1hdHJpeFs2XT1pK24qbyx0aGlzLm1hdHJpeFs3XT1uKm8tcyx0aGlzLm1hdHJpeFsxMF09bipvLXMsdGhpcy5tYXRyaXhbMTFdPW4qbytzLHRoaXMubWF0cml4WzEyXT1pK24qb30saXNOZXV0cmFsU3RhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2FsY3VsYXRlTWF0cml4KCksaS5CYXNlRmlsdGVyLnByb3RvdHlwZS5pc05ldXRyYWxTdGF0ZS5jYWxsKHRoaXMsdCl9LGFwcGx5VG86ZnVuY3Rpb24odCl7dGhpcy5jYWxjdWxhdGVNYXRyaXgoKSxpLkJhc2VGaWx0ZXIucHJvdG90eXBlLmFwcGx5VG8uY2FsbCh0aGlzLHQpfX0pLGUuSW1hZ2UuZmlsdGVycy5IdWVSb3RhdGlvbi5mcm9tT2JqZWN0PWUuSW1hZ2UuZmlsdGVycy5CYXNlRmlsdGVyLmZyb21PYmplY3R9KGUpLGZ1bmN0aW9uKHQpe3ZhciBlPXQuZmFicmljfHwodC5mYWJyaWM9e30pLGk9ZS51dGlsLm9iamVjdC5jbG9uZTtpZihlLlRleHQpZS53YXJuKFwiZmFicmljLlRleHQgaXMgYWxyZWFkeSBkZWZpbmVkXCIpO2Vsc2V7dmFyIHI9XCJmb250RmFtaWx5IGZvbnRXZWlnaHQgZm9udFNpemUgdGV4dCB1bmRlcmxpbmUgb3ZlcmxpbmUgbGluZXRocm91Z2ggdGV4dEFsaWduIGZvbnRTdHlsZSBsaW5lSGVpZ2h0IHRleHRCYWNrZ3JvdW5kQ29sb3IgY2hhclNwYWNpbmcgc3R5bGVzIGRpcmVjdGlvbiBwYXRoIHBhdGhTdGFydE9mZnNldCBwYXRoU2lkZSBwYXRoQWxpZ25cIi5zcGxpdChcIiBcIik7ZS5UZXh0PWUudXRpbC5jcmVhdGVDbGFzcyhlLk9iamVjdCx7X2RpbWVuc2lvbkFmZmVjdGluZ1Byb3BzOltcImZvbnRTaXplXCIsXCJmb250V2VpZ2h0XCIsXCJmb250RmFtaWx5XCIsXCJmb250U3R5bGVcIixcImxpbmVIZWlnaHRcIixcInRleHRcIixcImNoYXJTcGFjaW5nXCIsXCJ0ZXh0QWxpZ25cIixcInN0eWxlc1wiLFwicGF0aFwiLFwicGF0aFN0YXJ0T2Zmc2V0XCIsXCJwYXRoU2lkZVwiLFwicGF0aEFsaWduXCJdLF9yZU5ld2xpbmU6L1xccj9cXG4vLF9yZVNwYWNlc0FuZFRhYnM6L1sgXFx0XFxyXS9nLF9yZVNwYWNlQW5kVGFiOi9bIFxcdFxccl0vLF9yZVdvcmRzOi9cXFMrL2csdHlwZTpcInRleHRcIixmb250U2l6ZTo0MCxmb250V2VpZ2h0Olwibm9ybWFsXCIsZm9udEZhbWlseTpcIlRpbWVzIE5ldyBSb21hblwiLHVuZGVybGluZTohMSxvdmVybGluZTohMSxsaW5ldGhyb3VnaDohMSx0ZXh0QWxpZ246XCJsZWZ0XCIsZm9udFN0eWxlOlwibm9ybWFsXCIsbGluZUhlaWdodDoxLjE2LHN1cGVyc2NyaXB0OntzaXplOi42LGJhc2VsaW5lOi0uMzV9LHN1YnNjcmlwdDp7c2l6ZTouNixiYXNlbGluZTouMTF9LHRleHRCYWNrZ3JvdW5kQ29sb3I6XCJcIixzdGF0ZVByb3BlcnRpZXM6ZS5PYmplY3QucHJvdG90eXBlLnN0YXRlUHJvcGVydGllcy5jb25jYXQociksY2FjaGVQcm9wZXJ0aWVzOmUuT2JqZWN0LnByb3RvdHlwZS5jYWNoZVByb3BlcnRpZXMuY29uY2F0KHIpLHN0cm9rZTpudWxsLHNoYWRvdzpudWxsLHBhdGg6bnVsbCxwYXRoU3RhcnRPZmZzZXQ6MCxwYXRoU2lkZTpcImxlZnRcIixwYXRoQWxpZ246XCJiYXNlbGluZVwiLF9mb250U2l6ZUZyYWN0aW9uOi4yMjIsb2Zmc2V0czp7dW5kZXJsaW5lOi4xLGxpbmV0aHJvdWdoOi0uMzE1LG92ZXJsaW5lOi0uODh9LF9mb250U2l6ZU11bHQ6MS4xMyxjaGFyU3BhY2luZzowLHN0eWxlczpudWxsLF9tZWFzdXJpbmdDb250ZXh0Om51bGwsZGVsdGFZOjAsZGlyZWN0aW9uOlwibHRyXCIsX3N0eWxlUHJvcGVydGllczpbXCJzdHJva2VcIixcInN0cm9rZVdpZHRoXCIsXCJmaWxsXCIsXCJmb250RmFtaWx5XCIsXCJmb250U2l6ZVwiLFwiZm9udFdlaWdodFwiLFwiZm9udFN0eWxlXCIsXCJ1bmRlcmxpbmVcIixcIm92ZXJsaW5lXCIsXCJsaW5ldGhyb3VnaFwiLFwiZGVsdGFZXCIsXCJ0ZXh0QmFja2dyb3VuZENvbG9yXCJdLF9fY2hhckJvdW5kczpbXSxDQUNIRV9GT05UX1NJWkU6NDAwLE1JTl9URVhUX1dJRFRIOjIsaW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUpe3RoaXMuc3R5bGVzPWUmJmUuc3R5bGVzfHx7fSx0aGlzLnRleHQ9dCx0aGlzLl9fc2tpcERpbWVuc2lvbj0hMCx0aGlzLmNhbGxTdXBlcihcImluaXRpYWxpemVcIixlKSx0aGlzLnBhdGgmJnRoaXMuc2V0UGF0aEluZm8oKSx0aGlzLl9fc2tpcERpbWVuc2lvbj0hMSx0aGlzLmluaXREaW1lbnNpb25zKCksdGhpcy5zZXRDb29yZHMoKSx0aGlzLnNldHVwU3RhdGUoe3Byb3BlcnR5U2V0OlwiX2RpbWVuc2lvbkFmZmVjdGluZ1Byb3BzXCJ9KX0sc2V0UGF0aEluZm86ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhdGg7dCYmKHQuc2VnbWVudHNJbmZvPWUudXRpbC5nZXRQYXRoU2VnbWVudHNJbmZvKHQucGF0aCkpfSxnZXRNZWFzdXJpbmdDb250ZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuX21lYXN1cmluZ0NvbnRleHR8fChlLl9tZWFzdXJpbmdDb250ZXh0PXRoaXMuY2FudmFzJiZ0aGlzLmNhbnZhcy5jb250ZXh0Q2FjaGV8fGUudXRpbC5jcmVhdGVDYW52YXNFbGVtZW50KCkuZ2V0Q29udGV4dChcIjJkXCIpKSxlLl9tZWFzdXJpbmdDb250ZXh0fSxfc3BsaXRUZXh0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fc3BsaXRUZXh0SW50b0xpbmVzKHRoaXMudGV4dCk7cmV0dXJuIHRoaXMudGV4dExpbmVzPXQubGluZXMsdGhpcy5fdGV4dExpbmVzPXQuZ3JhcGhlbWVMaW5lcyx0aGlzLl91bndyYXBwZWRUZXh0TGluZXM9dC5fdW53cmFwcGVkTGluZXMsdGhpcy5fdGV4dD10LmdyYXBoZW1lVGV4dCx0fSxpbml0RGltZW5zaW9uczpmdW5jdGlvbigpe3RoaXMuX19za2lwRGltZW5zaW9ufHwodGhpcy5fc3BsaXRUZXh0KCksdGhpcy5fY2xlYXJDYWNoZSgpLHRoaXMucGF0aD8odGhpcy53aWR0aD10aGlzLnBhdGgud2lkdGgsdGhpcy5oZWlnaHQ9dGhpcy5wYXRoLmhlaWdodCk6KHRoaXMud2lkdGg9dGhpcy5jYWxjVGV4dFdpZHRoKCl8fHRoaXMuY3Vyc29yV2lkdGh8fHRoaXMuTUlOX1RFWFRfV0lEVEgsdGhpcy5oZWlnaHQ9dGhpcy5jYWxjVGV4dEhlaWdodCgpKSwtMSE9PXRoaXMudGV4dEFsaWduLmluZGV4T2YoXCJqdXN0aWZ5XCIpJiZ0aGlzLmVubGFyZ2VTcGFjZXMoKSx0aGlzLnNhdmVTdGF0ZSh7cHJvcGVydHlTZXQ6XCJfZGltZW5zaW9uQWZmZWN0aW5nUHJvcHNcIn0pKX0sZW5sYXJnZVNwYWNlczpmdW5jdGlvbigpe2Zvcih2YXIgdCxlLGkscixuLHMsbyxhPTAsaD10aGlzLl90ZXh0TGluZXMubGVuZ3RoO2E8aDthKyspaWYoKFwianVzdGlmeVwiPT09dGhpcy50ZXh0QWxpZ258fGEhPT1oLTEmJiF0aGlzLmlzRW5kT2ZXcmFwcGluZyhhKSkmJihyPTAsbj10aGlzLl90ZXh0TGluZXNbYV0sKGU9dGhpcy5nZXRMaW5lV2lkdGgoYSkpPHRoaXMud2lkdGgmJihvPXRoaXMudGV4dExpbmVzW2FdLm1hdGNoKHRoaXMuX3JlU3BhY2VzQW5kVGFicykpKSl7aT1vLmxlbmd0aCx0PSh0aGlzLndpZHRoLWUpL2k7Zm9yKHZhciBsPTAsYz1uLmxlbmd0aDtsPD1jO2wrKylzPXRoaXMuX19jaGFyQm91bmRzW2FdW2xdLHRoaXMuX3JlU3BhY2VBbmRUYWIudGVzdChuW2xdKT8ocy53aWR0aCs9dCxzLmtlcm5lZFdpZHRoKz10LHMubGVmdCs9cixyKz10KTpzLmxlZnQrPXJ9fSxpc0VuZE9mV3JhcHBpbmc6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT10aGlzLl90ZXh0TGluZXMubGVuZ3RoLTF9LG1pc3NpbmdOZXdsaW5lT2Zmc2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDF9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuXCIjPGZhYnJpYy5UZXh0IChcIit0aGlzLmNvbXBsZXhpdHkoKSsnKTogeyBcInRleHRcIjogXCInK3RoaXMudGV4dCsnXCIsIFwiZm9udEZhbWlseVwiOiBcIicrdGhpcy5mb250RmFtaWx5KydcIiB9Pid9LF9nZXRDYWNoZUNhbnZhc0RpbWVuc2lvbnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNhbGxTdXBlcihcIl9nZXRDYWNoZUNhbnZhc0RpbWVuc2lvbnNcIiksZT10aGlzLmZvbnRTaXplO3JldHVybiB0LndpZHRoKz1lKnQuem9vbVgsdC5oZWlnaHQrPWUqdC56b29tWSx0fSxfcmVuZGVyOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGF0aDtlJiYhZS5pc05vdFZpc2libGUoKSYmZS5fcmVuZGVyKHQpLHRoaXMuX3NldFRleHRTdHlsZXModCksdGhpcy5fcmVuZGVyVGV4dExpbmVzQmFja2dyb3VuZCh0KSx0aGlzLl9yZW5kZXJUZXh0RGVjb3JhdGlvbih0LFwidW5kZXJsaW5lXCIpLHRoaXMuX3JlbmRlclRleHQodCksdGhpcy5fcmVuZGVyVGV4dERlY29yYXRpb24odCxcIm92ZXJsaW5lXCIpLHRoaXMuX3JlbmRlclRleHREZWNvcmF0aW9uKHQsXCJsaW5ldGhyb3VnaFwiKX0sX3JlbmRlclRleHQ6ZnVuY3Rpb24odCl7XCJzdHJva2VcIj09PXRoaXMucGFpbnRGaXJzdD8odGhpcy5fcmVuZGVyVGV4dFN0cm9rZSh0KSx0aGlzLl9yZW5kZXJUZXh0RmlsbCh0KSk6KHRoaXMuX3JlbmRlclRleHRGaWxsKHQpLHRoaXMuX3JlbmRlclRleHRTdHJva2UodCkpfSxfc2V0VGV4dFN0eWxlczpmdW5jdGlvbih0LGUsaSl7aWYodC50ZXh0QmFzZWxpbmU9XCJhbHBoYWJldGljYWxcIix0aGlzLnBhdGgpc3dpdGNoKHRoaXMucGF0aEFsaWduKXtjYXNlXCJjZW50ZXJcIjp0LnRleHRCYXNlbGluZT1cIm1pZGRsZVwiO2JyZWFrO2Nhc2VcImFzY2VuZGVyXCI6dC50ZXh0QmFzZWxpbmU9XCJ0b3BcIjticmVhaztjYXNlXCJkZXNjZW5kZXJcIjp0LnRleHRCYXNlbGluZT1cImJvdHRvbVwifXQuZm9udD10aGlzLl9nZXRGb250RGVjbGFyYXRpb24oZSxpKX0sY2FsY1RleHRXaWR0aDpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmdldExpbmVXaWR0aCgwKSxlPTEsaT10aGlzLl90ZXh0TGluZXMubGVuZ3RoO2U8aTtlKyspe3ZhciByPXRoaXMuZ2V0TGluZVdpZHRoKGUpO3I+dCYmKHQ9cil9cmV0dXJuIHR9LF9yZW5kZXJUZXh0TGluZTpmdW5jdGlvbih0LGUsaSxyLG4scyl7dGhpcy5fcmVuZGVyQ2hhcnModCxlLGkscixuLHMpfSxfcmVuZGVyVGV4dExpbmVzQmFja2dyb3VuZDpmdW5jdGlvbih0KXtpZih0aGlzLnRleHRCYWNrZ3JvdW5kQ29sb3J8fHRoaXMuc3R5bGVIYXMoXCJ0ZXh0QmFja2dyb3VuZENvbG9yXCIpKXtmb3IodmFyIGUsaSxyLG4scyxvLGEsaD10LmZpbGxTdHlsZSxsPXRoaXMuX2dldExlZnRPZmZzZXQoKSxjPXRoaXMuX2dldFRvcE9mZnNldCgpLHU9MCxkPTAsZj10aGlzLnBhdGgsZz0wLG09dGhpcy5fdGV4dExpbmVzLmxlbmd0aDtnPG07ZysrKWlmKGU9dGhpcy5nZXRIZWlnaHRPZkxpbmUoZyksdGhpcy50ZXh0QmFja2dyb3VuZENvbG9yfHx0aGlzLnN0eWxlSGFzKFwidGV4dEJhY2tncm91bmRDb2xvclwiLGcpKXtyPXRoaXMuX3RleHRMaW5lc1tnXSxpPXRoaXMuX2dldExpbmVMZWZ0T2Zmc2V0KGcpLGQ9MCx1PTAsbj10aGlzLmdldFZhbHVlT2ZQcm9wZXJ0eUF0KGcsMCxcInRleHRCYWNrZ3JvdW5kQ29sb3JcIik7Zm9yKHZhciBwPTAsdj1yLmxlbmd0aDtwPHY7cCsrKXM9dGhpcy5fX2NoYXJCb3VuZHNbZ11bcF0sbz10aGlzLmdldFZhbHVlT2ZQcm9wZXJ0eUF0KGcscCxcInRleHRCYWNrZ3JvdW5kQ29sb3JcIiksZj8odC5zYXZlKCksdC50cmFuc2xhdGUocy5yZW5kZXJMZWZ0LHMucmVuZGVyVG9wKSx0LnJvdGF0ZShzLmFuZ2xlKSx0LmZpbGxTdHlsZT1vLG8mJnQuZmlsbFJlY3QoLXMud2lkdGgvMiwtZS90aGlzLmxpbmVIZWlnaHQqKDEtdGhpcy5fZm9udFNpemVGcmFjdGlvbikscy53aWR0aCxlL3RoaXMubGluZUhlaWdodCksdC5yZXN0b3JlKCkpOm8hPT1uPyhhPWwraSt1LFwicnRsXCI9PT10aGlzLmRpcmVjdGlvbiYmKGE9dGhpcy53aWR0aC1hLWQpLHQuZmlsbFN0eWxlPW4sbiYmdC5maWxsUmVjdChhLGMsZCxlL3RoaXMubGluZUhlaWdodCksdT1zLmxlZnQsZD1zLndpZHRoLG49byk6ZCs9cy5rZXJuZWRXaWR0aDtvJiYhZiYmKGE9bCtpK3UsXCJydGxcIj09PXRoaXMuZGlyZWN0aW9uJiYoYT10aGlzLndpZHRoLWEtZCksdC5maWxsU3R5bGU9byx0LmZpbGxSZWN0KGEsYyxkLGUvdGhpcy5saW5lSGVpZ2h0KSksYys9ZX1lbHNlIGMrPWU7dC5maWxsU3R5bGU9aCx0aGlzLl9yZW1vdmVTaGFkb3codCl9fSxnZXRGb250Q2FjaGU6ZnVuY3Rpb24odCl7dmFyIGk9dC5mb250RmFtaWx5LnRvTG93ZXJDYXNlKCk7ZS5jaGFyV2lkdGhzQ2FjaGVbaV18fChlLmNoYXJXaWR0aHNDYWNoZVtpXT17fSk7dmFyIHI9ZS5jaGFyV2lkdGhzQ2FjaGVbaV0sbj10LmZvbnRTdHlsZS50b0xvd2VyQ2FzZSgpK1wiX1wiKyh0LmZvbnRXZWlnaHQrXCJcIikudG9Mb3dlckNhc2UoKTtyZXR1cm4gcltuXXx8KHJbbl09e30pLHJbbl19LF9tZWFzdXJlQ2hhcjpmdW5jdGlvbih0LGUsaSxyKXt2YXIgbixzLG8sYSxoPXRoaXMuZ2V0Rm9udENhY2hlKGUpLGw9aSt0LGM9dGhpcy5fZ2V0Rm9udERlY2xhcmF0aW9uKGUpPT09dGhpcy5fZ2V0Rm9udERlY2xhcmF0aW9uKHIpLHU9ZS5mb250U2l6ZS90aGlzLkNBQ0hFX0ZPTlRfU0laRTtpZihpJiZ2b2lkIDAhPT1oW2ldJiYobz1oW2ldKSx2b2lkIDAhPT1oW3RdJiYoYT1uPWhbdF0pLGMmJnZvaWQgMCE9PWhbbF0mJihhPShzPWhbbF0pLW8pLHZvaWQgMD09PW58fHZvaWQgMD09PW98fHZvaWQgMD09PXMpe3ZhciBkPXRoaXMuZ2V0TWVhc3VyaW5nQ29udGV4dCgpO3RoaXMuX3NldFRleHRTdHlsZXMoZCxlLCEwKX1yZXR1cm4gdm9pZCAwPT09biYmKGE9bj1kLm1lYXN1cmVUZXh0KHQpLndpZHRoLGhbdF09biksdm9pZCAwPT09byYmYyYmaSYmKG89ZC5tZWFzdXJlVGV4dChpKS53aWR0aCxoW2ldPW8pLGMmJnZvaWQgMD09PXMmJihzPWQubWVhc3VyZVRleHQobCkud2lkdGgsaFtsXT1zLGE9cy1vKSx7d2lkdGg6bip1LGtlcm5lZFdpZHRoOmEqdX19LGdldEhlaWdodE9mQ2hhcjpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmdldFZhbHVlT2ZQcm9wZXJ0eUF0KHQsZSxcImZvbnRTaXplXCIpfSxtZWFzdXJlTGluZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9tZWFzdXJlTGluZSh0KTtyZXR1cm4gMCE9PXRoaXMuY2hhclNwYWNpbmcmJihlLndpZHRoLT10aGlzLl9nZXRXaWR0aE9mQ2hhclNwYWNpbmcoKSksZS53aWR0aDwwJiYoZS53aWR0aD0wKSxlfSxfbWVhc3VyZUxpbmU6ZnVuY3Rpb24odCl7dmFyIGkscixuLHMsbyxhLGg9MCxsPXRoaXMuX3RleHRMaW5lc1t0XSxjPW5ldyBBcnJheShsLmxlbmd0aCksdT0wLGQ9dGhpcy5wYXRoLGY9XCJyaWdodFwiPT09dGhpcy5wYXRoU2lkZTtmb3IodGhpcy5fX2NoYXJCb3VuZHNbdF09YyxpPTA7aTxsLmxlbmd0aDtpKyspcj1sW2ldLHM9dGhpcy5fZ2V0R3JhcGhlbWVCb3gocix0LGksbiksY1tpXT1zLGgrPXMua2VybmVkV2lkdGgsbj1yO2lmKGNbaV09e2xlZnQ6cz9zLmxlZnQrcy53aWR0aDowLHdpZHRoOjAsa2VybmVkV2lkdGg6MCxoZWlnaHQ6dGhpcy5mb250U2l6ZX0sZCl7c3dpdGNoKGE9ZC5zZWdtZW50c0luZm9bZC5zZWdtZW50c0luZm8ubGVuZ3RoLTFdLmxlbmd0aCwobz1lLnV0aWwuZ2V0UG9pbnRPblBhdGgoZC5wYXRoLDAsZC5zZWdtZW50c0luZm8pKS54Kz1kLnBhdGhPZmZzZXQueCxvLnkrPWQucGF0aE9mZnNldC55LHRoaXMudGV4dEFsaWduKXtjYXNlXCJsZWZ0XCI6dT1mP2EtaDowO2JyZWFrO2Nhc2VcImNlbnRlclwiOnU9KGEtaCkvMjticmVhaztjYXNlXCJyaWdodFwiOnU9Zj8wOmEtaH1mb3IodSs9dGhpcy5wYXRoU3RhcnRPZmZzZXQqKGY/LTE6MSksaT1mP2wubGVuZ3RoLTE6MDtmP2k+PTA6aTxsLmxlbmd0aDtmP2ktLTppKyspcz1jW2ldLHU+YT91JT1hOnU8MCYmKHUrPWEpLHRoaXMuX3NldEdyYXBoZW1lT25QYXRoKHUscyxvKSx1Kz1zLmtlcm5lZFdpZHRofXJldHVybnt3aWR0aDpoLG51bU9mU3BhY2VzOjB9fSxfc2V0R3JhcGhlbWVPblBhdGg6ZnVuY3Rpb24odCxpLHIpe3ZhciBuPXQraS5rZXJuZWRXaWR0aC8yLHM9dGhpcy5wYXRoLG89ZS51dGlsLmdldFBvaW50T25QYXRoKHMucGF0aCxuLHMuc2VnbWVudHNJbmZvKTtpLnJlbmRlckxlZnQ9by54LXIueCxpLnJlbmRlclRvcD1vLnktci55LGkuYW5nbGU9by5hbmdsZSsoXCJyaWdodFwiPT09dGhpcy5wYXRoU2lkZT9NYXRoLlBJOjApfSxfZ2V0R3JhcGhlbWVCb3g6ZnVuY3Rpb24odCxlLGkscixuKXt2YXIgcyxvPXRoaXMuZ2V0Q29tcGxldGVTdHlsZURlY2xhcmF0aW9uKGUsaSksYT1yP3RoaXMuZ2V0Q29tcGxldGVTdHlsZURlY2xhcmF0aW9uKGUsaS0xKTp7fSxoPXRoaXMuX21lYXN1cmVDaGFyKHQsbyxyLGEpLGw9aC5rZXJuZWRXaWR0aCxjPWgud2lkdGg7MCE9PXRoaXMuY2hhclNwYWNpbmcmJihjKz1zPXRoaXMuX2dldFdpZHRoT2ZDaGFyU3BhY2luZygpLGwrPXMpO3ZhciB1PXt3aWR0aDpjLGxlZnQ6MCxoZWlnaHQ6by5mb250U2l6ZSxrZXJuZWRXaWR0aDpsLGRlbHRhWTpvLmRlbHRhWX07aWYoaT4wJiYhbil7dmFyIGQ9dGhpcy5fX2NoYXJCb3VuZHNbZV1baS0xXTt1LmxlZnQ9ZC5sZWZ0K2Qud2lkdGgraC5rZXJuZWRXaWR0aC1oLndpZHRofXJldHVybiB1fSxnZXRIZWlnaHRPZkxpbmU6ZnVuY3Rpb24odCl7aWYodGhpcy5fX2xpbmVIZWlnaHRzW3RdKXJldHVybiB0aGlzLl9fbGluZUhlaWdodHNbdF07Zm9yKHZhciBlPXRoaXMuX3RleHRMaW5lc1t0XSxpPXRoaXMuZ2V0SGVpZ2h0T2ZDaGFyKHQsMCkscj0xLG49ZS5sZW5ndGg7cjxuO3IrKylpPU1hdGgubWF4KHRoaXMuZ2V0SGVpZ2h0T2ZDaGFyKHQsciksaSk7cmV0dXJuIHRoaXMuX19saW5lSGVpZ2h0c1t0XT1pKnRoaXMubGluZUhlaWdodCp0aGlzLl9mb250U2l6ZU11bHR9LGNhbGNUZXh0SGVpZ2h0OmZ1bmN0aW9uKCl7Zm9yKHZhciB0LGU9MCxpPTAscj10aGlzLl90ZXh0TGluZXMubGVuZ3RoO2k8cjtpKyspdD10aGlzLmdldEhlaWdodE9mTGluZShpKSxlKz1pPT09ci0xP3QvdGhpcy5saW5lSGVpZ2h0OnQ7cmV0dXJuIGV9LF9nZXRMZWZ0T2Zmc2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJsdHJcIj09PXRoaXMuZGlyZWN0aW9uPy10aGlzLndpZHRoLzI6dGhpcy53aWR0aC8yfSxfZ2V0VG9wT2Zmc2V0OmZ1bmN0aW9uKCl7cmV0dXJuLXRoaXMuaGVpZ2h0LzJ9LF9yZW5kZXJUZXh0Q29tbW9uOmZ1bmN0aW9uKHQsZSl7dC5zYXZlKCk7Zm9yKHZhciBpPTAscj10aGlzLl9nZXRMZWZ0T2Zmc2V0KCksbj10aGlzLl9nZXRUb3BPZmZzZXQoKSxzPTAsbz10aGlzLl90ZXh0TGluZXMubGVuZ3RoO3M8bztzKyspe3ZhciBhPXRoaXMuZ2V0SGVpZ2h0T2ZMaW5lKHMpLGg9YS90aGlzLmxpbmVIZWlnaHQsbD10aGlzLl9nZXRMaW5lTGVmdE9mZnNldChzKTt0aGlzLl9yZW5kZXJUZXh0TGluZShlLHQsdGhpcy5fdGV4dExpbmVzW3NdLHIrbCxuK2kraCxzKSxpKz1hfXQucmVzdG9yZSgpfSxfcmVuZGVyVGV4dEZpbGw6ZnVuY3Rpb24odCl7KHRoaXMuZmlsbHx8dGhpcy5zdHlsZUhhcyhcImZpbGxcIikpJiZ0aGlzLl9yZW5kZXJUZXh0Q29tbW9uKHQsXCJmaWxsVGV4dFwiKX0sX3JlbmRlclRleHRTdHJva2U6ZnVuY3Rpb24odCl7KHRoaXMuc3Ryb2tlJiYwIT09dGhpcy5zdHJva2VXaWR0aHx8IXRoaXMuaXNFbXB0eVN0eWxlcygpKSYmKHRoaXMuc2hhZG93JiYhdGhpcy5zaGFkb3cuYWZmZWN0U3Ryb2tlJiZ0aGlzLl9yZW1vdmVTaGFkb3codCksdC5zYXZlKCksdGhpcy5fc2V0TGluZURhc2godCx0aGlzLnN0cm9rZURhc2hBcnJheSksdC5iZWdpblBhdGgoKSx0aGlzLl9yZW5kZXJUZXh0Q29tbW9uKHQsXCJzdHJva2VUZXh0XCIpLHQuY2xvc2VQYXRoKCksdC5yZXN0b3JlKCkpfSxfcmVuZGVyQ2hhcnM6ZnVuY3Rpb24odCxlLGkscixuLHMpe3ZhciBvLGEsaCxsLGMsdT10aGlzLmdldEhlaWdodE9mTGluZShzKSxkPS0xIT09dGhpcy50ZXh0QWxpZ24uaW5kZXhPZihcImp1c3RpZnlcIiksZj1cIlwiLGc9MCxtPXRoaXMucGF0aCxwPSFkJiYwPT09dGhpcy5jaGFyU3BhY2luZyYmdGhpcy5pc0VtcHR5U3R5bGVzKHMpJiYhbSx2PVwibHRyXCI9PT10aGlzLmRpcmVjdGlvbixfPVwibHRyXCI9PT10aGlzLmRpcmVjdGlvbj8xOi0xLHk9ZS5jYW52YXMuZ2V0QXR0cmlidXRlKFwiZGlyXCIpO2lmKGUuc2F2ZSgpLHkhPT10aGlzLmRpcmVjdGlvbiYmKGUuY2FudmFzLnNldEF0dHJpYnV0ZShcImRpclwiLHY/XCJsdHJcIjpcInJ0bFwiKSxlLmRpcmVjdGlvbj12P1wibHRyXCI6XCJydGxcIixlLnRleHRBbGlnbj12P1wibGVmdFwiOlwicmlnaHRcIiksbi09dSp0aGlzLl9mb250U2l6ZUZyYWN0aW9uL3RoaXMubGluZUhlaWdodCxwKXJldHVybiB0aGlzLl9yZW5kZXJDaGFyKHQsZSxzLDAsaS5qb2luKFwiXCIpLHIsbix1KSx2b2lkIGUucmVzdG9yZSgpO2Zvcih2YXIgdz0wLGI9aS5sZW5ndGgtMTt3PD1iO3crKylsPXc9PT1ifHx0aGlzLmNoYXJTcGFjaW5nfHxtLGYrPWlbd10saD10aGlzLl9fY2hhckJvdW5kc1tzXVt3XSwwPT09Zz8ocis9XyooaC5rZXJuZWRXaWR0aC1oLndpZHRoKSxnKz1oLndpZHRoKTpnKz1oLmtlcm5lZFdpZHRoLGQmJiFsJiZ0aGlzLl9yZVNwYWNlQW5kVGFiLnRlc3QoaVt3XSkmJihsPSEwKSxsfHwobz1vfHx0aGlzLmdldENvbXBsZXRlU3R5bGVEZWNsYXJhdGlvbihzLHcpLGE9dGhpcy5nZXRDb21wbGV0ZVN0eWxlRGVjbGFyYXRpb24ocyx3KzEpLGw9dGhpcy5faGFzU3R5bGVDaGFuZ2VkKG8sYSkpLGwmJihtPyhlLnNhdmUoKSxlLnRyYW5zbGF0ZShoLnJlbmRlckxlZnQsaC5yZW5kZXJUb3ApLGUucm90YXRlKGguYW5nbGUpLHRoaXMuX3JlbmRlckNoYXIodCxlLHMsdyxmLC1nLzIsMCx1KSxlLnJlc3RvcmUoKSk6KGM9cix0aGlzLl9yZW5kZXJDaGFyKHQsZSxzLHcsZixjLG4sdSkpLGY9XCJcIixvPWEscis9XypnLGc9MCk7ZS5yZXN0b3JlKCl9LF9hcHBseVBhdHRlcm5HcmFkaWVudFRyYW5zZm9ybVRleHQ6ZnVuY3Rpb24odCl7dmFyIGkscj1lLnV0aWwuY3JlYXRlQ2FudmFzRWxlbWVudCgpLG49dGhpcy53aWR0aCt0aGlzLnN0cm9rZVdpZHRoLHM9dGhpcy5oZWlnaHQrdGhpcy5zdHJva2VXaWR0aDtyZXR1cm4gci53aWR0aD1uLHIuaGVpZ2h0PXMsKGk9ci5nZXRDb250ZXh0KFwiMmRcIikpLmJlZ2luUGF0aCgpLGkubW92ZVRvKDAsMCksaS5saW5lVG8obiwwKSxpLmxpbmVUbyhuLHMpLGkubGluZVRvKDAscyksaS5jbG9zZVBhdGgoKSxpLnRyYW5zbGF0ZShuLzIscy8yKSxpLmZpbGxTdHlsZT10LnRvTGl2ZShpKSx0aGlzLl9hcHBseVBhdHRlcm5HcmFkaWVudFRyYW5zZm9ybShpLHQpLGkuZmlsbCgpLGkuY3JlYXRlUGF0dGVybihyLFwibm8tcmVwZWF0XCIpfSxoYW5kbGVGaWxsZXI6ZnVuY3Rpb24odCxlLGkpe3ZhciByLG47cmV0dXJuIGkudG9MaXZlP1wicGVyY2VudGFnZVwiPT09aS5ncmFkaWVudFVuaXRzfHxpLmdyYWRpZW50VHJhbnNmb3JtfHxpLnBhdHRlcm5UcmFuc2Zvcm0/KHI9LXRoaXMud2lkdGgvMixuPS10aGlzLmhlaWdodC8yLHQudHJhbnNsYXRlKHIsbiksdFtlXT10aGlzLl9hcHBseVBhdHRlcm5HcmFkaWVudFRyYW5zZm9ybVRleHQoaSkse29mZnNldFg6cixvZmZzZXRZOm59KToodFtlXT1pLnRvTGl2ZSh0LHRoaXMpLHRoaXMuX2FwcGx5UGF0dGVybkdyYWRpZW50VHJhbnNmb3JtKHQsaSkpOih0W2VdPWkse29mZnNldFg6MCxvZmZzZXRZOjB9KX0sX3NldFN0cm9rZVN0eWxlczpmdW5jdGlvbih0LGUpe3JldHVybiB0LmxpbmVXaWR0aD1lLnN0cm9rZVdpZHRoLHQubGluZUNhcD10aGlzLnN0cm9rZUxpbmVDYXAsdC5saW5lRGFzaE9mZnNldD10aGlzLnN0cm9rZURhc2hPZmZzZXQsdC5saW5lSm9pbj10aGlzLnN0cm9rZUxpbmVKb2luLHQubWl0ZXJMaW1pdD10aGlzLnN0cm9rZU1pdGVyTGltaXQsdGhpcy5oYW5kbGVGaWxsZXIodCxcInN0cm9rZVN0eWxlXCIsZS5zdHJva2UpfSxfc2V0RmlsbFN0eWxlczpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmhhbmRsZUZpbGxlcih0LFwiZmlsbFN0eWxlXCIsZS5maWxsKX0sX3JlbmRlckNoYXI6ZnVuY3Rpb24odCxlLGkscixuLHMsbyl7dmFyIGEsaCxsPXRoaXMuX2dldFN0eWxlRGVjbGFyYXRpb24oaSxyKSxjPXRoaXMuZ2V0Q29tcGxldGVTdHlsZURlY2xhcmF0aW9uKGksciksdT1cImZpbGxUZXh0XCI9PT10JiZjLmZpbGwsZD1cInN0cm9rZVRleHRcIj09PXQmJmMuc3Ryb2tlJiZjLnN0cm9rZVdpZHRoOyhkfHx1KSYmKGUuc2F2ZSgpLHUmJihhPXRoaXMuX3NldEZpbGxTdHlsZXMoZSxjKSksZCYmKGg9dGhpcy5fc2V0U3Ryb2tlU3R5bGVzKGUsYykpLGUuZm9udD10aGlzLl9nZXRGb250RGVjbGFyYXRpb24oYyksbCYmbC50ZXh0QmFja2dyb3VuZENvbG9yJiZ0aGlzLl9yZW1vdmVTaGFkb3coZSksbCYmbC5kZWx0YVkmJihvKz1sLmRlbHRhWSksdSYmZS5maWxsVGV4dChuLHMtYS5vZmZzZXRYLG8tYS5vZmZzZXRZKSxkJiZlLnN0cm9rZVRleHQobixzLWgub2Zmc2V0WCxvLWgub2Zmc2V0WSksZS5yZXN0b3JlKCkpfSxzZXRTdXBlcnNjcmlwdDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9zZXRTY3JpcHQodCxlLHRoaXMuc3VwZXJzY3JpcHQpfSxzZXRTdWJzY3JpcHQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fc2V0U2NyaXB0KHQsZSx0aGlzLnN1YnNjcmlwdCl9LF9zZXRTY3JpcHQ6ZnVuY3Rpb24odCxlLGkpe3ZhciByPXRoaXMuZ2V0MkRDdXJzb3JMb2NhdGlvbih0LCEwKSxuPXRoaXMuZ2V0VmFsdWVPZlByb3BlcnR5QXQoci5saW5lSW5kZXgsci5jaGFySW5kZXgsXCJmb250U2l6ZVwiKSxzPXRoaXMuZ2V0VmFsdWVPZlByb3BlcnR5QXQoci5saW5lSW5kZXgsci5jaGFySW5kZXgsXCJkZWx0YVlcIiksbz17Zm9udFNpemU6bippLnNpemUsZGVsdGFZOnMrbippLmJhc2VsaW5lfTtyZXR1cm4gdGhpcy5zZXRTZWxlY3Rpb25TdHlsZXMobyx0LGUpLHRoaXN9LF9oYXNTdHlsZUNoYW5nZWQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5maWxsIT09ZS5maWxsfHx0LnN0cm9rZSE9PWUuc3Ryb2tlfHx0LnN0cm9rZVdpZHRoIT09ZS5zdHJva2VXaWR0aHx8dC5mb250U2l6ZSE9PWUuZm9udFNpemV8fHQuZm9udEZhbWlseSE9PWUuZm9udEZhbWlseXx8dC5mb250V2VpZ2h0IT09ZS5mb250V2VpZ2h0fHx0LmZvbnRTdHlsZSE9PWUuZm9udFN0eWxlfHx0LmRlbHRhWSE9PWUuZGVsdGFZfSxfaGFzU3R5bGVDaGFuZ2VkRm9yU3ZnOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2hhc1N0eWxlQ2hhbmdlZCh0LGUpfHx0Lm92ZXJsaW5lIT09ZS5vdmVybGluZXx8dC51bmRlcmxpbmUhPT1lLnVuZGVybGluZXx8dC5saW5ldGhyb3VnaCE9PWUubGluZXRocm91Z2h9LF9nZXRMaW5lTGVmdE9mZnNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldExpbmVXaWR0aCh0KSxpPXRoaXMud2lkdGgtZSxyPXRoaXMudGV4dEFsaWduLG49dGhpcy5kaXJlY3Rpb24scz0wLG89dGhpcy5pc0VuZE9mV3JhcHBpbmcodCk7cmV0dXJuXCJqdXN0aWZ5XCI9PT1yfHxcImp1c3RpZnktY2VudGVyXCI9PT1yJiYhb3x8XCJqdXN0aWZ5LXJpZ2h0XCI9PT1yJiYhb3x8XCJqdXN0aWZ5LWxlZnRcIj09PXImJiFvPzA6KFwiY2VudGVyXCI9PT1yJiYocz1pLzIpLFwicmlnaHRcIj09PXImJihzPWkpLFwianVzdGlmeS1jZW50ZXJcIj09PXImJihzPWkvMiksXCJqdXN0aWZ5LXJpZ2h0XCI9PT1yJiYocz1pKSxcInJ0bFwiPT09biYmKHMtPWkpLHMpfSxfY2xlYXJDYWNoZTpmdW5jdGlvbigpe3RoaXMuX19saW5lV2lkdGhzPVtdLHRoaXMuX19saW5lSGVpZ2h0cz1bXSx0aGlzLl9fY2hhckJvdW5kcz1bXX0sX3Nob3VsZENsZWFyRGltZW5zaW9uQ2FjaGU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9mb3JjZUNsZWFyQ2FjaGU7cmV0dXJuIHR8fCh0PXRoaXMuaGFzU3RhdGVDaGFuZ2VkKFwiX2RpbWVuc2lvbkFmZmVjdGluZ1Byb3BzXCIpKSx0JiYodGhpcy5kaXJ0eT0hMCx0aGlzLl9mb3JjZUNsZWFyQ2FjaGU9ITEpLHR9LGdldExpbmVXaWR0aDpmdW5jdGlvbih0KXtpZih2b2lkIDAhPT10aGlzLl9fbGluZVdpZHRoc1t0XSlyZXR1cm4gdGhpcy5fX2xpbmVXaWR0aHNbdF07dmFyIGU9dGhpcy5tZWFzdXJlTGluZSh0KS53aWR0aDtyZXR1cm4gdGhpcy5fX2xpbmVXaWR0aHNbdF09ZSxlfSxfZ2V0V2lkdGhPZkNoYXJTcGFjaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIDAhPT10aGlzLmNoYXJTcGFjaW5nP3RoaXMuZm9udFNpemUqdGhpcy5jaGFyU3BhY2luZy8xZTM6MH0sZ2V0VmFsdWVPZlByb3BlcnR5QXQ6ZnVuY3Rpb24odCxlLGkpe3ZhciByPXRoaXMuX2dldFN0eWxlRGVjbGFyYXRpb24odCxlKTtyZXR1cm4gciYmdm9pZCAwIT09cltpXT9yW2ldOnRoaXNbaV19LF9yZW5kZXJUZXh0RGVjb3JhdGlvbjpmdW5jdGlvbih0LGUpe2lmKHRoaXNbZV18fHRoaXMuc3R5bGVIYXMoZSkpe2Zvcih2YXIgaSxyLG4scyxvLGEsaCxsLGMsdSxkLGYsZyxtLHAsdixfPXRoaXMuX2dldExlZnRPZmZzZXQoKSx5PXRoaXMuX2dldFRvcE9mZnNldCgpLHc9dGhpcy5wYXRoLGI9dGhpcy5fZ2V0V2lkdGhPZkNoYXJTcGFjaW5nKCkseD10aGlzLm9mZnNldHNbZV0sQz0wLFM9dGhpcy5fdGV4dExpbmVzLmxlbmd0aDtDPFM7QysrKWlmKGk9dGhpcy5nZXRIZWlnaHRPZkxpbmUoQyksdGhpc1tlXXx8dGhpcy5zdHlsZUhhcyhlLEMpKXtoPXRoaXMuX3RleHRMaW5lc1tDXSxtPWkvdGhpcy5saW5lSGVpZ2h0LHM9dGhpcy5fZ2V0TGluZUxlZnRPZmZzZXQoQyksdT0wLGQ9MCxsPXRoaXMuZ2V0VmFsdWVPZlByb3BlcnR5QXQoQywwLGUpLHY9dGhpcy5nZXRWYWx1ZU9mUHJvcGVydHlBdChDLDAsXCJmaWxsXCIpLGM9eSttKigxLXRoaXMuX2ZvbnRTaXplRnJhY3Rpb24pLHI9dGhpcy5nZXRIZWlnaHRPZkNoYXIoQywwKSxvPXRoaXMuZ2V0VmFsdWVPZlByb3BlcnR5QXQoQywwLFwiZGVsdGFZXCIpO2Zvcih2YXIgVD0wLEU9aC5sZW5ndGg7VDxFO1QrKylpZihmPXRoaXMuX19jaGFyQm91bmRzW0NdW1RdLGc9dGhpcy5nZXRWYWx1ZU9mUHJvcGVydHlBdChDLFQsZSkscD10aGlzLmdldFZhbHVlT2ZQcm9wZXJ0eUF0KEMsVCxcImZpbGxcIiksbj10aGlzLmdldEhlaWdodE9mQ2hhcihDLFQpLGE9dGhpcy5nZXRWYWx1ZU9mUHJvcGVydHlBdChDLFQsXCJkZWx0YVlcIiksdyYmZyYmcCl0LnNhdmUoKSx0LmZpbGxTdHlsZT12LHQudHJhbnNsYXRlKGYucmVuZGVyTGVmdCxmLnJlbmRlclRvcCksdC5yb3RhdGUoZi5hbmdsZSksdC5maWxsUmVjdCgtZi5rZXJuZWRXaWR0aC8yLHgqbithLGYua2VybmVkV2lkdGgsdGhpcy5mb250U2l6ZS8xNSksdC5yZXN0b3JlKCk7ZWxzZSBpZigoZyE9PWx8fHAhPT12fHxuIT09cnx8YSE9PW8pJiZkPjApe3ZhciBPPV8rcyt1O1wicnRsXCI9PT10aGlzLmRpcmVjdGlvbiYmKE89dGhpcy53aWR0aC1PLWQpLGwmJnYmJih0LmZpbGxTdHlsZT12LHQuZmlsbFJlY3QoTyxjK3gqcitvLGQsdGhpcy5mb250U2l6ZS8xNSkpLHU9Zi5sZWZ0LGQ9Zi53aWR0aCxsPWcsdj1wLHI9bixvPWF9ZWxzZSBkKz1mLmtlcm5lZFdpZHRoO089XytzK3UsXCJydGxcIj09PXRoaXMuZGlyZWN0aW9uJiYoTz10aGlzLndpZHRoLU8tZCksdC5maWxsU3R5bGU9cCxnJiZwJiZ0LmZpbGxSZWN0KE8sYyt4KnIrbyxkLWIsdGhpcy5mb250U2l6ZS8xNSkseSs9aX1lbHNlIHkrPWk7dGhpcy5fcmVtb3ZlU2hhZG93KHQpfX0sX2dldEZvbnREZWNsYXJhdGlvbjpmdW5jdGlvbih0LGkpe3ZhciByPXR8fHRoaXMsbj10aGlzLmZvbnRGYW1pbHkscz1lLlRleHQuZ2VuZXJpY0ZvbnRzLmluZGV4T2Yobi50b0xvd2VyQ2FzZSgpKT4tMSxvPXZvaWQgMD09PW58fG4uaW5kZXhPZihcIidcIik+LTF8fG4uaW5kZXhPZihcIixcIik+LTF8fG4uaW5kZXhPZignXCInKT4tMXx8cz9yLmZvbnRGYW1pbHk6J1wiJytyLmZvbnRGYW1pbHkrJ1wiJztyZXR1cm5bZS5pc0xpa2VseU5vZGU/ci5mb250V2VpZ2h0OnIuZm9udFN0eWxlLGUuaXNMaWtlbHlOb2RlP3IuZm9udFN0eWxlOnIuZm9udFdlaWdodCxpP3RoaXMuQ0FDSEVfRk9OVF9TSVpFK1wicHhcIjpyLmZvbnRTaXplK1wicHhcIixvXS5qb2luKFwiIFwiKX0scmVuZGVyOmZ1bmN0aW9uKHQpe3RoaXMudmlzaWJsZSYmKHRoaXMuY2FudmFzJiZ0aGlzLmNhbnZhcy5za2lwT2Zmc2NyZWVuJiYhdGhpcy5ncm91cCYmIXRoaXMuaXNPblNjcmVlbigpfHwodGhpcy5fc2hvdWxkQ2xlYXJEaW1lbnNpb25DYWNoZSgpJiZ0aGlzLmluaXREaW1lbnNpb25zKCksdGhpcy5jYWxsU3VwZXIoXCJyZW5kZXJcIix0KSkpfSxfc3BsaXRUZXh0SW50b0xpbmVzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgaT10LnNwbGl0KHRoaXMuX3JlTmV3bGluZSkscj1uZXcgQXJyYXkoaS5sZW5ndGgpLG49W1wiXFxuXCJdLHM9W10sbz0wO288aS5sZW5ndGg7bysrKXJbb109ZS51dGlsLnN0cmluZy5ncmFwaGVtZVNwbGl0KGlbb10pLHM9cy5jb25jYXQocltvXSxuKTtyZXR1cm4gcy5wb3AoKSx7X3Vud3JhcHBlZExpbmVzOnIsbGluZXM6aSxncmFwaGVtZVRleHQ6cyxncmFwaGVtZUxpbmVzOnJ9fSx0b09iamVjdDpmdW5jdGlvbih0KXt2YXIgZT1yLmNvbmNhdCh0KSxuPXRoaXMuY2FsbFN1cGVyKFwidG9PYmplY3RcIixlKTtyZXR1cm4gbi5zdHlsZXM9aSh0aGlzLnN0eWxlcywhMCksbi5wYXRoJiYobi5wYXRoPXRoaXMucGF0aC50b09iamVjdCgpKSxufSxzZXQ6ZnVuY3Rpb24odCxlKXt0aGlzLmNhbGxTdXBlcihcInNldFwiLHQsZSk7dmFyIGk9ITEscj0hMTtpZihcIm9iamVjdFwiPT10eXBlb2YgdClmb3IodmFyIG4gaW4gdClcInBhdGhcIj09PW4mJnRoaXMuc2V0UGF0aEluZm8oKSxpPWl8fC0xIT09dGhpcy5fZGltZW5zaW9uQWZmZWN0aW5nUHJvcHMuaW5kZXhPZihuKSxyPXJ8fFwicGF0aFwiPT09bjtlbHNlIGk9LTEhPT10aGlzLl9kaW1lbnNpb25BZmZlY3RpbmdQcm9wcy5pbmRleE9mKHQpLHI9XCJwYXRoXCI9PT10O3JldHVybiByJiZ0aGlzLnNldFBhdGhJbmZvKCksaSYmKHRoaXMuaW5pdERpbWVuc2lvbnMoKSx0aGlzLnNldENvb3JkcygpKSx0aGlzfSxjb21wbGV4aXR5OmZ1bmN0aW9uKCl7cmV0dXJuIDF9fSksZS5UZXh0LkFUVFJJQlVURV9OQU1FUz1lLlNIQVJFRF9BVFRSSUJVVEVTLmNvbmNhdChcInggeSBkeCBkeSBmb250LWZhbWlseSBmb250LXN0eWxlIGZvbnQtd2VpZ2h0IGZvbnQtc2l6ZSBsZXR0ZXItc3BhY2luZyB0ZXh0LWRlY29yYXRpb24gdGV4dC1hbmNob3JcIi5zcGxpdChcIiBcIikpLGUuVGV4dC5ERUZBVUxUX1NWR19GT05UX1NJWkU9MTYsZS5UZXh0LmZyb21FbGVtZW50PWZ1bmN0aW9uKHQscixuKXtpZighdClyZXR1cm4gcihudWxsKTt2YXIgcz1lLnBhcnNlQXR0cmlidXRlcyh0LGUuVGV4dC5BVFRSSUJVVEVfTkFNRVMpLG89cy50ZXh0QW5jaG9yfHxcImxlZnRcIjtpZigobj1lLnV0aWwub2JqZWN0LmV4dGVuZChuP2kobik6e30scykpLnRvcD1uLnRvcHx8MCxuLmxlZnQ9bi5sZWZ0fHwwLHMudGV4dERlY29yYXRpb24pe3ZhciBhPXMudGV4dERlY29yYXRpb247LTEhPT1hLmluZGV4T2YoXCJ1bmRlcmxpbmVcIikmJihuLnVuZGVybGluZT0hMCksLTEhPT1hLmluZGV4T2YoXCJvdmVybGluZVwiKSYmKG4ub3ZlcmxpbmU9ITApLC0xIT09YS5pbmRleE9mKFwibGluZS10aHJvdWdoXCIpJiYobi5saW5ldGhyb3VnaD0hMCksZGVsZXRlIG4udGV4dERlY29yYXRpb259XCJkeFwiaW4gcyYmKG4ubGVmdCs9cy5keCksXCJkeVwiaW4gcyYmKG4udG9wKz1zLmR5KSxcImZvbnRTaXplXCJpbiBufHwobi5mb250U2l6ZT1lLlRleHQuREVGQVVMVF9TVkdfRk9OVF9TSVpFKTt2YXIgaD1cIlwiO1widGV4dENvbnRlbnRcImluIHQ/aD10LnRleHRDb250ZW50OlwiZmlyc3RDaGlsZFwiaW4gdCYmbnVsbCE9PXQuZmlyc3RDaGlsZCYmXCJkYXRhXCJpbiB0LmZpcnN0Q2hpbGQmJm51bGwhPT10LmZpcnN0Q2hpbGQuZGF0YSYmKGg9dC5maXJzdENoaWxkLmRhdGEpLGg9aC5yZXBsYWNlKC9eXFxzK3xcXHMrJHxcXG4rL2csXCJcIikucmVwbGFjZSgvXFxzKy9nLFwiIFwiKTt2YXIgbD1uLnN0cm9rZVdpZHRoO24uc3Ryb2tlV2lkdGg9MDt2YXIgYz1uZXcgZS5UZXh0KGgsbiksdT1jLmdldFNjYWxlZEhlaWdodCgpL2MuaGVpZ2h0LGQ9KChjLmhlaWdodCtjLnN0cm9rZVdpZHRoKSpjLmxpbmVIZWlnaHQtYy5oZWlnaHQpKnUsZj1jLmdldFNjYWxlZEhlaWdodCgpK2QsZz0wO1wiY2VudGVyXCI9PT1vJiYoZz1jLmdldFNjYWxlZFdpZHRoKCkvMiksXCJyaWdodFwiPT09byYmKGc9Yy5nZXRTY2FsZWRXaWR0aCgpKSxjLnNldCh7bGVmdDpjLmxlZnQtZyx0b3A6Yy50b3AtKGYtYy5mb250U2l6ZSooLjA3K2MuX2ZvbnRTaXplRnJhY3Rpb24pKS9jLmxpbmVIZWlnaHQsc3Ryb2tlV2lkdGg6dm9pZCAwIT09bD9sOjF9KSxyKGMpfSxlLlRleHQuZnJvbU9iamVjdD1mdW5jdGlvbih0LHIpe3ZhciBuPWkodCkscz10LnBhdGg7cmV0dXJuIGRlbGV0ZSBuLnBhdGgsZS5PYmplY3QuX2Zyb21PYmplY3QoXCJUZXh0XCIsbiwoZnVuY3Rpb24odCl7cz9lLk9iamVjdC5fZnJvbU9iamVjdChcIlBhdGhcIixzLChmdW5jdGlvbihlKXt0LnNldChcInBhdGhcIixlKSxyKHQpfSksXCJwYXRoXCIpOnIodCl9KSxcInRleHRcIil9LGUuVGV4dC5nZW5lcmljRm9udHM9W1wic2Fucy1zZXJpZlwiLFwic2VyaWZcIixcImN1cnNpdmVcIixcImZhbnRhc3lcIixcIm1vbm9zcGFjZVwiXSxlLnV0aWwuY3JlYXRlQWNjZXNzb3JzJiZlLnV0aWwuY3JlYXRlQWNjZXNzb3JzKGUuVGV4dCl9fShlKSxTLnV0aWwub2JqZWN0LmV4dGVuZChTLlRleHQucHJvdG90eXBlLHtpc0VtcHR5U3R5bGVzOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLnN0eWxlcylyZXR1cm4hMDtpZih2b2lkIDAhPT10JiYhdGhpcy5zdHlsZXNbdF0pcmV0dXJuITA7dmFyIGU9dm9pZCAwPT09dD90aGlzLnN0eWxlczp7bGluZTp0aGlzLnN0eWxlc1t0XX07Zm9yKHZhciBpIGluIGUpZm9yKHZhciByIGluIGVbaV0pZm9yKHZhciBuIGluIGVbaV1bcl0pcmV0dXJuITE7cmV0dXJuITB9LHN0eWxlSGFzOmZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuc3R5bGVzfHwhdHx8XCJcIj09PXQpcmV0dXJuITE7aWYodm9pZCAwIT09ZSYmIXRoaXMuc3R5bGVzW2VdKXJldHVybiExO3ZhciBpPXZvaWQgMD09PWU/dGhpcy5zdHlsZXM6ezA6dGhpcy5zdHlsZXNbZV19O2Zvcih2YXIgciBpbiBpKWZvcih2YXIgbiBpbiBpW3JdKWlmKHZvaWQgMCE9PWlbcl1bbl1bdF0pcmV0dXJuITA7cmV0dXJuITF9LGNsZWFuU3R5bGU6ZnVuY3Rpb24odCl7aWYoIXRoaXMuc3R5bGVzfHwhdHx8XCJcIj09PXQpcmV0dXJuITE7dmFyIGUsaSxyPXRoaXMuc3R5bGVzLG49MCxzPSEwLG89MDtmb3IodmFyIGEgaW4gcil7Zm9yKHZhciBoIGluIGU9MCxyW2FdKXt2YXIgbDtuKyssKGw9clthXVtoXSkuaGFzT3duUHJvcGVydHkodCk/KGk/bFt0XSE9PWkmJihzPSExKTppPWxbdF0sbFt0XT09PXRoaXNbdF0mJmRlbGV0ZSBsW3RdKTpzPSExLDAhPT1PYmplY3Qua2V5cyhsKS5sZW5ndGg/ZSsrOmRlbGV0ZSByW2FdW2hdfTA9PT1lJiZkZWxldGUgclthXX1mb3IodmFyIGM9MDtjPHRoaXMuX3RleHRMaW5lcy5sZW5ndGg7YysrKW8rPXRoaXMuX3RleHRMaW5lc1tjXS5sZW5ndGg7cyYmbj09PW8mJih0aGlzW3RdPWksdGhpcy5yZW1vdmVTdHlsZSh0KSl9LHJlbW92ZVN0eWxlOmZ1bmN0aW9uKHQpe2lmKHRoaXMuc3R5bGVzJiZ0JiZcIlwiIT09dCl7dmFyIGUsaSxyLG49dGhpcy5zdHlsZXM7Zm9yKGkgaW4gbil7Zm9yKHIgaW4gZT1uW2ldKWRlbGV0ZSBlW3JdW3RdLDA9PT1PYmplY3Qua2V5cyhlW3JdKS5sZW5ndGgmJmRlbGV0ZSBlW3JdOzA9PT1PYmplY3Qua2V5cyhlKS5sZW5ndGgmJmRlbGV0ZSBuW2ldfX19LF9leHRlbmRTdHlsZXM6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmdldDJEQ3Vyc29yTG9jYXRpb24odCk7dGhpcy5fZ2V0TGluZVN0eWxlKGkubGluZUluZGV4KXx8dGhpcy5fc2V0TGluZVN0eWxlKGkubGluZUluZGV4KSx0aGlzLl9nZXRTdHlsZURlY2xhcmF0aW9uKGkubGluZUluZGV4LGkuY2hhckluZGV4KXx8dGhpcy5fc2V0U3R5bGVEZWNsYXJhdGlvbihpLmxpbmVJbmRleCxpLmNoYXJJbmRleCx7fSksUy51dGlsLm9iamVjdC5leHRlbmQodGhpcy5fZ2V0U3R5bGVEZWNsYXJhdGlvbihpLmxpbmVJbmRleCxpLmNoYXJJbmRleCksZSl9LGdldDJEQ3Vyc29yTG9jYXRpb246ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT10JiYodD10aGlzLnNlbGVjdGlvblN0YXJ0KTtmb3IodmFyIGk9ZT90aGlzLl91bndyYXBwZWRUZXh0TGluZXM6dGhpcy5fdGV4dExpbmVzLHI9aS5sZW5ndGgsbj0wO248cjtuKyspe2lmKHQ8PWlbbl0ubGVuZ3RoKXJldHVybntsaW5lSW5kZXg6bixjaGFySW5kZXg6dH07dC09aVtuXS5sZW5ndGgrdGhpcy5taXNzaW5nTmV3bGluZU9mZnNldChuKX1yZXR1cm57bGluZUluZGV4Om4tMSxjaGFySW5kZXg6aVtuLTFdLmxlbmd0aDx0P2lbbi0xXS5sZW5ndGg6dH19LGdldFNlbGVjdGlvblN0eWxlczpmdW5jdGlvbih0LGUsaSl7dm9pZCAwPT09dCYmKHQ9dGhpcy5zZWxlY3Rpb25TdGFydHx8MCksdm9pZCAwPT09ZSYmKGU9dGhpcy5zZWxlY3Rpb25FbmR8fHQpO2Zvcih2YXIgcj1bXSxuPXQ7bjxlO24rKylyLnB1c2godGhpcy5nZXRTdHlsZUF0UG9zaXRpb24obixpKSk7cmV0dXJuIHJ9LGdldFN0eWxlQXRQb3NpdGlvbjpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuZ2V0MkRDdXJzb3JMb2NhdGlvbih0KTtyZXR1cm4oZT90aGlzLmdldENvbXBsZXRlU3R5bGVEZWNsYXJhdGlvbihpLmxpbmVJbmRleCxpLmNoYXJJbmRleCk6dGhpcy5fZ2V0U3R5bGVEZWNsYXJhdGlvbihpLmxpbmVJbmRleCxpLmNoYXJJbmRleCkpfHx7fX0sc2V0U2VsZWN0aW9uU3R5bGVzOmZ1bmN0aW9uKHQsZSxpKXt2b2lkIDA9PT1lJiYoZT10aGlzLnNlbGVjdGlvblN0YXJ0fHwwKSx2b2lkIDA9PT1pJiYoaT10aGlzLnNlbGVjdGlvbkVuZHx8ZSk7Zm9yKHZhciByPWU7cjxpO3IrKyl0aGlzLl9leHRlbmRTdHlsZXMocix0KTtyZXR1cm4gdGhpcy5fZm9yY2VDbGVhckNhY2hlPSEwLHRoaXN9LF9nZXRTdHlsZURlY2xhcmF0aW9uOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5zdHlsZXMmJnRoaXMuc3R5bGVzW3RdO3JldHVybiBpP2lbZV06bnVsbH0sZ2V0Q29tcGxldGVTdHlsZURlY2xhcmF0aW9uOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpLHI9dGhpcy5fZ2V0U3R5bGVEZWNsYXJhdGlvbih0LGUpfHx7fSxuPXt9LHM9MDtzPHRoaXMuX3N0eWxlUHJvcGVydGllcy5sZW5ndGg7cysrKW5baT10aGlzLl9zdHlsZVByb3BlcnRpZXNbc11dPXZvaWQgMD09PXJbaV0/dGhpc1tpXTpyW2ldO3JldHVybiBufSxfc2V0U3R5bGVEZWNsYXJhdGlvbjpmdW5jdGlvbih0LGUsaSl7dGhpcy5zdHlsZXNbdF1bZV09aX0sX2RlbGV0ZVN0eWxlRGVjbGFyYXRpb246ZnVuY3Rpb24odCxlKXtkZWxldGUgdGhpcy5zdHlsZXNbdF1bZV19LF9nZXRMaW5lU3R5bGU6ZnVuY3Rpb24odCl7cmV0dXJuISF0aGlzLnN0eWxlc1t0XX0sX3NldExpbmVTdHlsZTpmdW5jdGlvbih0KXt0aGlzLnN0eWxlc1t0XT17fX0sX2RlbGV0ZUxpbmVTdHlsZTpmdW5jdGlvbih0KXtkZWxldGUgdGhpcy5zdHlsZXNbdF19fSksZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3QudGV4dERlY29yYXRpb24mJih0LnRleHREZWNvcmF0aW9uLmluZGV4T2YoXCJ1bmRlcmxpbmVcIik+LTEmJih0LnVuZGVybGluZT0hMCksdC50ZXh0RGVjb3JhdGlvbi5pbmRleE9mKFwibGluZS10aHJvdWdoXCIpPi0xJiYodC5saW5ldGhyb3VnaD0hMCksdC50ZXh0RGVjb3JhdGlvbi5pbmRleE9mKFwib3ZlcmxpbmVcIik+LTEmJih0Lm92ZXJsaW5lPSEwKSxkZWxldGUgdC50ZXh0RGVjb3JhdGlvbil9Uy5JVGV4dD1TLnV0aWwuY3JlYXRlQ2xhc3MoUy5UZXh0LFMuT2JzZXJ2YWJsZSx7dHlwZTpcImktdGV4dFwiLHNlbGVjdGlvblN0YXJ0OjAsc2VsZWN0aW9uRW5kOjAsc2VsZWN0aW9uQ29sb3I6XCJyZ2JhKDE3LDExOSwyNTUsMC4zKVwiLGlzRWRpdGluZzohMSxlZGl0YWJsZTohMCxlZGl0aW5nQm9yZGVyQ29sb3I6XCJyZ2JhKDEwMiwxNTMsMjU1LDAuMjUpXCIsY3Vyc29yV2lkdGg6MixjdXJzb3JDb2xvcjpcIlwiLGN1cnNvckRlbGF5OjFlMyxjdXJzb3JEdXJhdGlvbjo2MDAsY2FjaGluZzohMCxoaWRkZW5UZXh0YXJlYUNvbnRhaW5lcjpudWxsLF9yZVNwYWNlOi9cXHN8XFxuLyxfY3VycmVudEN1cnNvck9wYWNpdHk6MCxfc2VsZWN0aW9uRGlyZWN0aW9uOm51bGwsX2Fib3J0Q3Vyc29yQW5pbWF0aW9uOiExLF9fd2lkdGhPZlNwYWNlOltdLGluQ29tcG9zaXRpb25Nb2RlOiExLGluaXRpYWxpemU6ZnVuY3Rpb24odCxlKXt0aGlzLmNhbGxTdXBlcihcImluaXRpYWxpemVcIix0LGUpLHRoaXMuaW5pdEJlaGF2aW9yKCl9LHNldFNlbGVjdGlvblN0YXJ0OmZ1bmN0aW9uKHQpe3Q9TWF0aC5tYXgodCwwKSx0aGlzLl91cGRhdGVBbmRGaXJlKFwic2VsZWN0aW9uU3RhcnRcIix0KX0sc2V0U2VsZWN0aW9uRW5kOmZ1bmN0aW9uKHQpe3Q9TWF0aC5taW4odCx0aGlzLnRleHQubGVuZ3RoKSx0aGlzLl91cGRhdGVBbmRGaXJlKFwic2VsZWN0aW9uRW5kXCIsdCl9LF91cGRhdGVBbmRGaXJlOmZ1bmN0aW9uKHQsZSl7dGhpc1t0XSE9PWUmJih0aGlzLl9maXJlU2VsZWN0aW9uQ2hhbmdlZCgpLHRoaXNbdF09ZSksdGhpcy5fdXBkYXRlVGV4dGFyZWEoKX0sX2ZpcmVTZWxlY3Rpb25DaGFuZ2VkOmZ1bmN0aW9uKCl7dGhpcy5maXJlKFwic2VsZWN0aW9uOmNoYW5nZWRcIiksdGhpcy5jYW52YXMmJnRoaXMuY2FudmFzLmZpcmUoXCJ0ZXh0OnNlbGVjdGlvbjpjaGFuZ2VkXCIse3RhcmdldDp0aGlzfSl9LGluaXREaW1lbnNpb25zOmZ1bmN0aW9uKCl7dGhpcy5pc0VkaXRpbmcmJnRoaXMuaW5pdERlbGF5ZWRDdXJzb3IoKSx0aGlzLmNsZWFyQ29udGV4dFRvcCgpLHRoaXMuY2FsbFN1cGVyKFwiaW5pdERpbWVuc2lvbnNcIil9LHJlbmRlcjpmdW5jdGlvbih0KXt0aGlzLmNsZWFyQ29udGV4dFRvcCgpLHRoaXMuY2FsbFN1cGVyKFwicmVuZGVyXCIsdCksdGhpcy5jdXJzb3JPZmZzZXRDYWNoZT17fSx0aGlzLnJlbmRlckN1cnNvck9yU2VsZWN0aW9uKCl9LF9yZW5kZXI6ZnVuY3Rpb24odCl7dGhpcy5jYWxsU3VwZXIoXCJfcmVuZGVyXCIsdCl9LGNsZWFyQ29udGV4dFRvcDpmdW5jdGlvbih0KXtpZih0aGlzLmlzRWRpdGluZyYmdGhpcy5jYW52YXMmJnRoaXMuY2FudmFzLmNvbnRleHRUb3Ape3ZhciBlPXRoaXMuY2FudmFzLmNvbnRleHRUb3AsaT10aGlzLmNhbnZhcy52aWV3cG9ydFRyYW5zZm9ybTtlLnNhdmUoKSxlLnRyYW5zZm9ybShpWzBdLGlbMV0saVsyXSxpWzNdLGlbNF0saVs1XSksdGhpcy50cmFuc2Zvcm0oZSksdGhpcy5fY2xlYXJUZXh0QXJlYShlKSx0fHxlLnJlc3RvcmUoKX19LHJlbmRlckN1cnNvck9yU2VsZWN0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5pc0VkaXRpbmcmJnRoaXMuY2FudmFzJiZ0aGlzLmNhbnZhcy5jb250ZXh0VG9wKXt2YXIgdD10aGlzLl9nZXRDdXJzb3JCb3VuZGFyaWVzKCksZT10aGlzLmNhbnZhcy5jb250ZXh0VG9wO3RoaXMuY2xlYXJDb250ZXh0VG9wKCEwKSx0aGlzLnNlbGVjdGlvblN0YXJ0PT09dGhpcy5zZWxlY3Rpb25FbmQ/dGhpcy5yZW5kZXJDdXJzb3IodCxlKTp0aGlzLnJlbmRlclNlbGVjdGlvbih0LGUpLGUucmVzdG9yZSgpfX0sX2NsZWFyVGV4dEFyZWE6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy53aWR0aCs0LGk9dGhpcy5oZWlnaHQrNDt0LmNsZWFyUmVjdCgtZS8yLC1pLzIsZSxpKX0sX2dldEN1cnNvckJvdW5kYXJpZXM6ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9dGhpcy5zZWxlY3Rpb25TdGFydCk7dmFyIGU9dGhpcy5fZ2V0TGVmdE9mZnNldCgpLGk9dGhpcy5fZ2V0VG9wT2Zmc2V0KCkscj10aGlzLl9nZXRDdXJzb3JCb3VuZGFyaWVzT2Zmc2V0cyh0KTtyZXR1cm57bGVmdDplLHRvcDppLGxlZnRPZmZzZXQ6ci5sZWZ0LHRvcE9mZnNldDpyLnRvcH19LF9nZXRDdXJzb3JCb3VuZGFyaWVzT2Zmc2V0czpmdW5jdGlvbih0KXtpZih0aGlzLmN1cnNvck9mZnNldENhY2hlJiZcInRvcFwiaW4gdGhpcy5jdXJzb3JPZmZzZXRDYWNoZSlyZXR1cm4gdGhpcy5jdXJzb3JPZmZzZXRDYWNoZTt2YXIgZSxpLHIsbixzPTAsbz0wLGE9dGhpcy5nZXQyREN1cnNvckxvY2F0aW9uKHQpO3I9YS5jaGFySW5kZXgsaT1hLmxpbmVJbmRleDtmb3IodmFyIGg9MDtoPGk7aCsrKXMrPXRoaXMuZ2V0SGVpZ2h0T2ZMaW5lKGgpO2U9dGhpcy5fZ2V0TGluZUxlZnRPZmZzZXQoaSk7dmFyIGw9dGhpcy5fX2NoYXJCb3VuZHNbaV1bcl07cmV0dXJuIGwmJihvPWwubGVmdCksMCE9PXRoaXMuY2hhclNwYWNpbmcmJnI9PT10aGlzLl90ZXh0TGluZXNbaV0ubGVuZ3RoJiYoby09dGhpcy5fZ2V0V2lkdGhPZkNoYXJTcGFjaW5nKCkpLG49e3RvcDpzLGxlZnQ6ZSsobz4wP286MCl9LFwicnRsXCI9PT10aGlzLmRpcmVjdGlvbiYmKG4ubGVmdCo9LTEpLHRoaXMuY3Vyc29yT2Zmc2V0Q2FjaGU9bix0aGlzLmN1cnNvck9mZnNldENhY2hlfSxyZW5kZXJDdXJzb3I6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLmdldDJEQ3Vyc29yTG9jYXRpb24oKSxyPWkubGluZUluZGV4LG49aS5jaGFySW5kZXg+MD9pLmNoYXJJbmRleC0xOjAscz10aGlzLmdldFZhbHVlT2ZQcm9wZXJ0eUF0KHIsbixcImZvbnRTaXplXCIpLG89dGhpcy5zY2FsZVgqdGhpcy5jYW52YXMuZ2V0Wm9vbSgpLGE9dGhpcy5jdXJzb3JXaWR0aC9vLGg9dC50b3BPZmZzZXQsbD10aGlzLmdldFZhbHVlT2ZQcm9wZXJ0eUF0KHIsbixcImRlbHRhWVwiKTtoKz0oMS10aGlzLl9mb250U2l6ZUZyYWN0aW9uKSp0aGlzLmdldEhlaWdodE9mTGluZShyKS90aGlzLmxpbmVIZWlnaHQtcyooMS10aGlzLl9mb250U2l6ZUZyYWN0aW9uKSx0aGlzLmluQ29tcG9zaXRpb25Nb2RlJiZ0aGlzLnJlbmRlclNlbGVjdGlvbih0LGUpLGUuZmlsbFN0eWxlPXRoaXMuY3Vyc29yQ29sb3J8fHRoaXMuZ2V0VmFsdWVPZlByb3BlcnR5QXQocixuLFwiZmlsbFwiKSxlLmdsb2JhbEFscGhhPXRoaXMuX19pc01vdXNlZG93bj8xOnRoaXMuX2N1cnJlbnRDdXJzb3JPcGFjaXR5LGUuZmlsbFJlY3QodC5sZWZ0K3QubGVmdE9mZnNldC1hLzIsaCt0LnRvcCtsLGEscyl9LHJlbmRlclNlbGVjdGlvbjpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaT10aGlzLmluQ29tcG9zaXRpb25Nb2RlP3RoaXMuaGlkZGVuVGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQ6dGhpcy5zZWxlY3Rpb25TdGFydCxyPXRoaXMuaW5Db21wb3NpdGlvbk1vZGU/dGhpcy5oaWRkZW5UZXh0YXJlYS5zZWxlY3Rpb25FbmQ6dGhpcy5zZWxlY3Rpb25FbmQsbj0tMSE9PXRoaXMudGV4dEFsaWduLmluZGV4T2YoXCJqdXN0aWZ5XCIpLHM9dGhpcy5nZXQyREN1cnNvckxvY2F0aW9uKGkpLG89dGhpcy5nZXQyREN1cnNvckxvY2F0aW9uKHIpLGE9cy5saW5lSW5kZXgsaD1vLmxpbmVJbmRleCxsPXMuY2hhckluZGV4PDA/MDpzLmNoYXJJbmRleCxjPW8uY2hhckluZGV4PDA/MDpvLmNoYXJJbmRleCx1PWE7dTw9aDt1Kyspe3ZhciBkLGY9dGhpcy5fZ2V0TGluZUxlZnRPZmZzZXQodSl8fDAsZz10aGlzLmdldEhlaWdodE9mTGluZSh1KSxtPTAscD0wO2lmKHU9PT1hJiYobT10aGlzLl9fY2hhckJvdW5kc1thXVtsXS5sZWZ0KSx1Pj1hJiZ1PGgpcD1uJiYhdGhpcy5pc0VuZE9mV3JhcHBpbmcodSk/dGhpcy53aWR0aDp0aGlzLmdldExpbmVXaWR0aCh1KXx8NTtlbHNlIGlmKHU9PT1oKWlmKDA9PT1jKXA9dGhpcy5fX2NoYXJCb3VuZHNbaF1bY10ubGVmdDtlbHNle3ZhciB2PXRoaXMuX2dldFdpZHRoT2ZDaGFyU3BhY2luZygpO3A9dGhpcy5fX2NoYXJCb3VuZHNbaF1bYy0xXS5sZWZ0K3RoaXMuX19jaGFyQm91bmRzW2hdW2MtMV0ud2lkdGgtdn1kPWcsKHRoaXMubGluZUhlaWdodDwxfHx1PT09aCYmdGhpcy5saW5lSGVpZ2h0PjEpJiYoZy89dGhpcy5saW5lSGVpZ2h0KTt2YXIgXz10LmxlZnQrZittLHk9cC1tLHc9ZyxiPTA7dGhpcy5pbkNvbXBvc2l0aW9uTW9kZT8oZS5maWxsU3R5bGU9dGhpcy5jb21wb3NpdGlvbkNvbG9yfHxcImJsYWNrXCIsdz0xLGI9Zyk6ZS5maWxsU3R5bGU9dGhpcy5zZWxlY3Rpb25Db2xvcixcInJ0bFwiPT09dGhpcy5kaXJlY3Rpb24mJihfPXRoaXMud2lkdGgtXy15KSxlLmZpbGxSZWN0KF8sdC50b3ArdC50b3BPZmZzZXQrYix5LHcpLHQudG9wT2Zmc2V0Kz1kfX0sZ2V0Q3VycmVudENoYXJGb250U2l6ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2dldEN1cnJlbnRDaGFySW5kZXgoKTtyZXR1cm4gdGhpcy5nZXRWYWx1ZU9mUHJvcGVydHlBdCh0LmwsdC5jLFwiZm9udFNpemVcIil9LGdldEN1cnJlbnRDaGFyQ29sb3I6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9nZXRDdXJyZW50Q2hhckluZGV4KCk7cmV0dXJuIHRoaXMuZ2V0VmFsdWVPZlByb3BlcnR5QXQodC5sLHQuYyxcImZpbGxcIil9LF9nZXRDdXJyZW50Q2hhckluZGV4OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXQyREN1cnNvckxvY2F0aW9uKHRoaXMuc2VsZWN0aW9uU3RhcnQsITApLGU9dC5jaGFySW5kZXg+MD90LmNoYXJJbmRleC0xOjA7cmV0dXJue2w6dC5saW5lSW5kZXgsYzplfX19KSxTLklUZXh0LmZyb21PYmplY3Q9ZnVuY3Rpb24oZSxpKXtpZih0KGUpLGUuc3R5bGVzKWZvcih2YXIgciBpbiBlLnN0eWxlcylmb3IodmFyIG4gaW4gZS5zdHlsZXNbcl0pdChlLnN0eWxlc1tyXVtuXSk7Uy5PYmplY3QuX2Zyb21PYmplY3QoXCJJVGV4dFwiLGUsaSxcInRleHRcIil9fSgpLEM9Uy51dGlsLm9iamVjdC5jbG9uZSxTLnV0aWwub2JqZWN0LmV4dGVuZChTLklUZXh0LnByb3RvdHlwZSx7aW5pdEJlaGF2aW9yOmZ1bmN0aW9uKCl7dGhpcy5pbml0QWRkZWRIYW5kbGVyKCksdGhpcy5pbml0UmVtb3ZlZEhhbmRsZXIoKSx0aGlzLmluaXRDdXJzb3JTZWxlY3Rpb25IYW5kbGVycygpLHRoaXMuaW5pdERvdWJsZUNsaWNrU2ltdWxhdGlvbigpLHRoaXMubW91c2VNb3ZlSGFuZGxlcj10aGlzLm1vdXNlTW92ZUhhbmRsZXIuYmluZCh0aGlzKX0sb25EZXNlbGVjdDpmdW5jdGlvbigpe3RoaXMuaXNFZGl0aW5nJiZ0aGlzLmV4aXRFZGl0aW5nKCksdGhpcy5zZWxlY3RlZD0hMX0saW5pdEFkZGVkSGFuZGxlcjpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5vbihcImFkZGVkXCIsKGZ1bmN0aW9uKCl7dmFyIGU9dC5jYW52YXM7ZSYmKGUuX2hhc0lUZXh0SGFuZGxlcnN8fChlLl9oYXNJVGV4dEhhbmRsZXJzPSEwLHQuX2luaXRDYW52YXNIYW5kbGVycyhlKSksZS5faVRleHRJbnN0YW5jZXM9ZS5faVRleHRJbnN0YW5jZXN8fFtdLGUuX2lUZXh0SW5zdGFuY2VzLnB1c2godCkpfSkpfSxpbml0UmVtb3ZlZEhhbmRsZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMub24oXCJyZW1vdmVkXCIsKGZ1bmN0aW9uKCl7dmFyIGU9dC5jYW52YXM7ZSYmKGUuX2lUZXh0SW5zdGFuY2VzPWUuX2lUZXh0SW5zdGFuY2VzfHxbXSxTLnV0aWwucmVtb3ZlRnJvbUFycmF5KGUuX2lUZXh0SW5zdGFuY2VzLHQpLDA9PT1lLl9pVGV4dEluc3RhbmNlcy5sZW5ndGgmJihlLl9oYXNJVGV4dEhhbmRsZXJzPSExLHQuX3JlbW92ZUNhbnZhc0hhbmRsZXJzKGUpKSl9KSl9LF9pbml0Q2FudmFzSGFuZGxlcnM6ZnVuY3Rpb24odCl7dC5fbW91c2VVcElUZXh0SGFuZGxlcj1mdW5jdGlvbigpe3QuX2lUZXh0SW5zdGFuY2VzJiZ0Ll9pVGV4dEluc3RhbmNlcy5mb3JFYWNoKChmdW5jdGlvbih0KXt0Ll9faXNNb3VzZWRvd249ITF9KSl9LHQub24oXCJtb3VzZTp1cFwiLHQuX21vdXNlVXBJVGV4dEhhbmRsZXIpfSxfcmVtb3ZlQ2FudmFzSGFuZGxlcnM6ZnVuY3Rpb24odCl7dC5vZmYoXCJtb3VzZTp1cFwiLHQuX21vdXNlVXBJVGV4dEhhbmRsZXIpfSxfdGljazpmdW5jdGlvbigpe3RoaXMuX2N1cnJlbnRUaWNrU3RhdGU9dGhpcy5fYW5pbWF0ZUN1cnNvcih0aGlzLDEsdGhpcy5jdXJzb3JEdXJhdGlvbixcIl9vblRpY2tDb21wbGV0ZVwiKX0sX2FuaW1hdGVDdXJzb3I6ZnVuY3Rpb24odCxlLGkscil7dmFyIG47cmV0dXJuIG49e2lzQWJvcnRlZDohMSxhYm9ydDpmdW5jdGlvbigpe3RoaXMuaXNBYm9ydGVkPSEwfX0sdC5hbmltYXRlKFwiX2N1cnJlbnRDdXJzb3JPcGFjaXR5XCIsZSx7ZHVyYXRpb246aSxvbkNvbXBsZXRlOmZ1bmN0aW9uKCl7bi5pc0Fib3J0ZWR8fHRbcl0oKX0sb25DaGFuZ2U6ZnVuY3Rpb24oKXt0LmNhbnZhcyYmdC5zZWxlY3Rpb25TdGFydD09PXQuc2VsZWN0aW9uRW5kJiZ0LnJlbmRlckN1cnNvck9yU2VsZWN0aW9uKCl9LGFib3J0OmZ1bmN0aW9uKCl7cmV0dXJuIG4uaXNBYm9ydGVkfX0pLG59LF9vblRpY2tDb21wbGV0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5fY3Vyc29yVGltZW91dDEmJmNsZWFyVGltZW91dCh0aGlzLl9jdXJzb3JUaW1lb3V0MSksdGhpcy5fY3Vyc29yVGltZW91dDE9c2V0VGltZW91dCgoZnVuY3Rpb24oKXt0Ll9jdXJyZW50VGlja0NvbXBsZXRlU3RhdGU9dC5fYW5pbWF0ZUN1cnNvcih0LDAsdGhpcy5jdXJzb3JEdXJhdGlvbi8yLFwiX3RpY2tcIil9KSwxMDApfSxpbml0RGVsYXllZEN1cnNvcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLGk9dD8wOnRoaXMuY3Vyc29yRGVsYXk7dGhpcy5hYm9ydEN1cnNvckFuaW1hdGlvbigpLHRoaXMuX2N1cnJlbnRDdXJzb3JPcGFjaXR5PTEsdGhpcy5fY3Vyc29yVGltZW91dDI9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtlLl90aWNrKCl9KSxpKX0sYWJvcnRDdXJzb3JBbmltYXRpb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9jdXJyZW50VGlja1N0YXRlfHx0aGlzLl9jdXJyZW50VGlja0NvbXBsZXRlU3RhdGUsZT10aGlzLmNhbnZhczt0aGlzLl9jdXJyZW50VGlja1N0YXRlJiZ0aGlzLl9jdXJyZW50VGlja1N0YXRlLmFib3J0KCksdGhpcy5fY3VycmVudFRpY2tDb21wbGV0ZVN0YXRlJiZ0aGlzLl9jdXJyZW50VGlja0NvbXBsZXRlU3RhdGUuYWJvcnQoKSxjbGVhclRpbWVvdXQodGhpcy5fY3Vyc29yVGltZW91dDEpLGNsZWFyVGltZW91dCh0aGlzLl9jdXJzb3JUaW1lb3V0MiksdGhpcy5fY3VycmVudEN1cnNvck9wYWNpdHk9MCx0JiZlJiZlLmNsZWFyQ29udGV4dChlLmNvbnRleHRUb3B8fGUuY29udGV4dENvbnRhaW5lcil9LHNlbGVjdEFsbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNlbGVjdGlvblN0YXJ0PTAsdGhpcy5zZWxlY3Rpb25FbmQ9dGhpcy5fdGV4dC5sZW5ndGgsdGhpcy5fZmlyZVNlbGVjdGlvbkNoYW5nZWQoKSx0aGlzLl91cGRhdGVUZXh0YXJlYSgpLHRoaXN9LGdldFNlbGVjdGVkVGV4dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90ZXh0LnNsaWNlKHRoaXMuc2VsZWN0aW9uU3RhcnQsdGhpcy5zZWxlY3Rpb25FbmQpLmpvaW4oXCJcIil9LGZpbmRXb3JkQm91bmRhcnlMZWZ0OmZ1bmN0aW9uKHQpe3ZhciBlPTAsaT10LTE7aWYodGhpcy5fcmVTcGFjZS50ZXN0KHRoaXMuX3RleHRbaV0pKWZvcig7dGhpcy5fcmVTcGFjZS50ZXN0KHRoaXMuX3RleHRbaV0pOyllKyssaS0tO2Zvcig7L1xcUy8udGVzdCh0aGlzLl90ZXh0W2ldKSYmaT4tMTspZSsrLGktLTtyZXR1cm4gdC1lfSxmaW5kV29yZEJvdW5kYXJ5UmlnaHQ6ZnVuY3Rpb24odCl7dmFyIGU9MCxpPXQ7aWYodGhpcy5fcmVTcGFjZS50ZXN0KHRoaXMuX3RleHRbaV0pKWZvcig7dGhpcy5fcmVTcGFjZS50ZXN0KHRoaXMuX3RleHRbaV0pOyllKyssaSsrO2Zvcig7L1xcUy8udGVzdCh0aGlzLl90ZXh0W2ldKSYmaTx0aGlzLl90ZXh0Lmxlbmd0aDspZSsrLGkrKztyZXR1cm4gdCtlfSxmaW5kTGluZUJvdW5kYXJ5TGVmdDpmdW5jdGlvbih0KXtmb3IodmFyIGU9MCxpPXQtMTshL1xcbi8udGVzdCh0aGlzLl90ZXh0W2ldKSYmaT4tMTspZSsrLGktLTtyZXR1cm4gdC1lfSxmaW5kTGluZUJvdW5kYXJ5UmlnaHQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsaT10OyEvXFxuLy50ZXN0KHRoaXMuX3RleHRbaV0pJiZpPHRoaXMuX3RleHQubGVuZ3RoOyllKyssaSsrO3JldHVybiB0K2V9LHNlYXJjaFdvcmRCb3VuZGFyeTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaT10aGlzLl90ZXh0LHI9dGhpcy5fcmVTcGFjZS50ZXN0KGlbdF0pP3QtMTp0LG49aVtyXSxzPVMucmVOb25Xb3JkOyFzLnRlc3QobikmJnI+MCYmcjxpLmxlbmd0aDspbj1pW3IrPWVdO3JldHVybiBzLnRlc3QobikmJihyKz0xPT09ZT8wOjEpLHJ9LHNlbGVjdFdvcmQ6ZnVuY3Rpb24odCl7dD10fHx0aGlzLnNlbGVjdGlvblN0YXJ0O3ZhciBlPXRoaXMuc2VhcmNoV29yZEJvdW5kYXJ5KHQsLTEpLGk9dGhpcy5zZWFyY2hXb3JkQm91bmRhcnkodCwxKTt0aGlzLnNlbGVjdGlvblN0YXJ0PWUsdGhpcy5zZWxlY3Rpb25FbmQ9aSx0aGlzLl9maXJlU2VsZWN0aW9uQ2hhbmdlZCgpLHRoaXMuX3VwZGF0ZVRleHRhcmVhKCksdGhpcy5yZW5kZXJDdXJzb3JPclNlbGVjdGlvbigpfSxzZWxlY3RMaW5lOmZ1bmN0aW9uKHQpe3Q9dHx8dGhpcy5zZWxlY3Rpb25TdGFydDt2YXIgZT10aGlzLmZpbmRMaW5lQm91bmRhcnlMZWZ0KHQpLGk9dGhpcy5maW5kTGluZUJvdW5kYXJ5UmlnaHQodCk7cmV0dXJuIHRoaXMuc2VsZWN0aW9uU3RhcnQ9ZSx0aGlzLnNlbGVjdGlvbkVuZD1pLHRoaXMuX2ZpcmVTZWxlY3Rpb25DaGFuZ2VkKCksdGhpcy5fdXBkYXRlVGV4dGFyZWEoKSx0aGlzfSxlbnRlckVkaXRpbmc6ZnVuY3Rpb24odCl7aWYoIXRoaXMuaXNFZGl0aW5nJiZ0aGlzLmVkaXRhYmxlKXJldHVybiB0aGlzLmNhbnZhcyYmKHRoaXMuY2FudmFzLmNhbGNPZmZzZXQoKSx0aGlzLmV4aXRFZGl0aW5nT25PdGhlcnModGhpcy5jYW52YXMpKSx0aGlzLmlzRWRpdGluZz0hMCx0aGlzLmluaXRIaWRkZW5UZXh0YXJlYSh0KSx0aGlzLmhpZGRlblRleHRhcmVhLmZvY3VzKCksdGhpcy5oaWRkZW5UZXh0YXJlYS52YWx1ZT10aGlzLnRleHQsdGhpcy5fdXBkYXRlVGV4dGFyZWEoKSx0aGlzLl9zYXZlRWRpdGluZ1Byb3BzKCksdGhpcy5fc2V0RWRpdGluZ1Byb3BzKCksdGhpcy5fdGV4dEJlZm9yZUVkaXQ9dGhpcy50ZXh0LHRoaXMuX3RpY2soKSx0aGlzLmZpcmUoXCJlZGl0aW5nOmVudGVyZWRcIiksdGhpcy5fZmlyZVNlbGVjdGlvbkNoYW5nZWQoKSx0aGlzLmNhbnZhcz8odGhpcy5jYW52YXMuZmlyZShcInRleHQ6ZWRpdGluZzplbnRlcmVkXCIse3RhcmdldDp0aGlzfSksdGhpcy5pbml0TW91c2VNb3ZlSGFuZGxlcigpLHRoaXMuY2FudmFzLnJlcXVlc3RSZW5kZXJBbGwoKSx0aGlzKTp0aGlzfSxleGl0RWRpdGluZ09uT3RoZXJzOmZ1bmN0aW9uKHQpe3QuX2lUZXh0SW5zdGFuY2VzJiZ0Ll9pVGV4dEluc3RhbmNlcy5mb3JFYWNoKChmdW5jdGlvbih0KXt0LnNlbGVjdGVkPSExLHQuaXNFZGl0aW5nJiZ0LmV4aXRFZGl0aW5nKCl9KSl9LGluaXRNb3VzZU1vdmVIYW5kbGVyOmZ1bmN0aW9uKCl7dGhpcy5jYW52YXMub24oXCJtb3VzZTptb3ZlXCIsdGhpcy5tb3VzZU1vdmVIYW5kbGVyKX0sbW91c2VNb3ZlSGFuZGxlcjpmdW5jdGlvbih0KXtpZih0aGlzLl9faXNNb3VzZWRvd24mJnRoaXMuaXNFZGl0aW5nKXt2YXIgZT10aGlzLmdldFNlbGVjdGlvblN0YXJ0RnJvbVBvaW50ZXIodC5lKSxpPXRoaXMuc2VsZWN0aW9uU3RhcnQscj10aGlzLnNlbGVjdGlvbkVuZDsoZT09PXRoaXMuX19zZWxlY3Rpb25TdGFydE9uTW91c2VEb3duJiZpIT09cnx8aSE9PWUmJnIhPT1lKSYmKGU+dGhpcy5fX3NlbGVjdGlvblN0YXJ0T25Nb3VzZURvd24/KHRoaXMuc2VsZWN0aW9uU3RhcnQ9dGhpcy5fX3NlbGVjdGlvblN0YXJ0T25Nb3VzZURvd24sdGhpcy5zZWxlY3Rpb25FbmQ9ZSk6KHRoaXMuc2VsZWN0aW9uU3RhcnQ9ZSx0aGlzLnNlbGVjdGlvbkVuZD10aGlzLl9fc2VsZWN0aW9uU3RhcnRPbk1vdXNlRG93biksdGhpcy5zZWxlY3Rpb25TdGFydD09PWkmJnRoaXMuc2VsZWN0aW9uRW5kPT09cnx8KHRoaXMucmVzdGFydEN1cnNvcklmTmVlZGVkKCksdGhpcy5fZmlyZVNlbGVjdGlvbkNoYW5nZWQoKSx0aGlzLl91cGRhdGVUZXh0YXJlYSgpLHRoaXMucmVuZGVyQ3Vyc29yT3JTZWxlY3Rpb24oKSkpfX0sX3NldEVkaXRpbmdQcm9wczpmdW5jdGlvbigpe3RoaXMuaG92ZXJDdXJzb3I9XCJ0ZXh0XCIsdGhpcy5jYW52YXMmJih0aGlzLmNhbnZhcy5kZWZhdWx0Q3Vyc29yPXRoaXMuY2FudmFzLm1vdmVDdXJzb3I9XCJ0ZXh0XCIpLHRoaXMuYm9yZGVyQ29sb3I9dGhpcy5lZGl0aW5nQm9yZGVyQ29sb3IsdGhpcy5oYXNDb250cm9scz10aGlzLnNlbGVjdGFibGU9ITEsdGhpcy5sb2NrTW92ZW1lbnRYPXRoaXMubG9ja01vdmVtZW50WT0hMH0sZnJvbVN0cmluZ1RvR3JhcGhlbWVTZWxlY3Rpb246ZnVuY3Rpb24odCxlLGkpe3ZhciByPWkuc2xpY2UoMCx0KSxuPVMudXRpbC5zdHJpbmcuZ3JhcGhlbWVTcGxpdChyKS5sZW5ndGg7aWYodD09PWUpcmV0dXJue3NlbGVjdGlvblN0YXJ0Om4sc2VsZWN0aW9uRW5kOm59O3ZhciBzPWkuc2xpY2UodCxlKTtyZXR1cm57c2VsZWN0aW9uU3RhcnQ6bixzZWxlY3Rpb25FbmQ6bitTLnV0aWwuc3RyaW5nLmdyYXBoZW1lU3BsaXQocykubGVuZ3RofX0sZnJvbUdyYXBoZW1lVG9TdHJpbmdTZWxlY3Rpb246ZnVuY3Rpb24odCxlLGkpe3ZhciByPWkuc2xpY2UoMCx0KS5qb2luKFwiXCIpLmxlbmd0aDtyZXR1cm4gdD09PWU/e3NlbGVjdGlvblN0YXJ0OnIsc2VsZWN0aW9uRW5kOnJ9OntzZWxlY3Rpb25TdGFydDpyLHNlbGVjdGlvbkVuZDpyK2kuc2xpY2UodCxlKS5qb2luKFwiXCIpLmxlbmd0aH19LF91cGRhdGVUZXh0YXJlYTpmdW5jdGlvbigpe2lmKHRoaXMuY3Vyc29yT2Zmc2V0Q2FjaGU9e30sdGhpcy5oaWRkZW5UZXh0YXJlYSl7aWYoIXRoaXMuaW5Db21wb3NpdGlvbk1vZGUpe3ZhciB0PXRoaXMuZnJvbUdyYXBoZW1lVG9TdHJpbmdTZWxlY3Rpb24odGhpcy5zZWxlY3Rpb25TdGFydCx0aGlzLnNlbGVjdGlvbkVuZCx0aGlzLl90ZXh0KTt0aGlzLmhpZGRlblRleHRhcmVhLnNlbGVjdGlvblN0YXJ0PXQuc2VsZWN0aW9uU3RhcnQsdGhpcy5oaWRkZW5UZXh0YXJlYS5zZWxlY3Rpb25FbmQ9dC5zZWxlY3Rpb25FbmR9dGhpcy51cGRhdGVUZXh0YXJlYVBvc2l0aW9uKCl9fSx1cGRhdGVGcm9tVGV4dEFyZWE6ZnVuY3Rpb24oKXtpZih0aGlzLmhpZGRlblRleHRhcmVhKXt0aGlzLmN1cnNvck9mZnNldENhY2hlPXt9LHRoaXMudGV4dD10aGlzLmhpZGRlblRleHRhcmVhLnZhbHVlLHRoaXMuX3Nob3VsZENsZWFyRGltZW5zaW9uQ2FjaGUoKSYmKHRoaXMuaW5pdERpbWVuc2lvbnMoKSx0aGlzLnNldENvb3JkcygpKTt2YXIgdD10aGlzLmZyb21TdHJpbmdUb0dyYXBoZW1lU2VsZWN0aW9uKHRoaXMuaGlkZGVuVGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQsdGhpcy5oaWRkZW5UZXh0YXJlYS5zZWxlY3Rpb25FbmQsdGhpcy5oaWRkZW5UZXh0YXJlYS52YWx1ZSk7dGhpcy5zZWxlY3Rpb25FbmQ9dGhpcy5zZWxlY3Rpb25TdGFydD10LnNlbGVjdGlvbkVuZCx0aGlzLmluQ29tcG9zaXRpb25Nb2RlfHwodGhpcy5zZWxlY3Rpb25TdGFydD10LnNlbGVjdGlvblN0YXJ0KSx0aGlzLnVwZGF0ZVRleHRhcmVhUG9zaXRpb24oKX19LHVwZGF0ZVRleHRhcmVhUG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzLnNlbGVjdGlvblN0YXJ0PT09dGhpcy5zZWxlY3Rpb25FbmQpe3ZhciB0PXRoaXMuX2NhbGNUZXh0YXJlYVBvc2l0aW9uKCk7dGhpcy5oaWRkZW5UZXh0YXJlYS5zdHlsZS5sZWZ0PXQubGVmdCx0aGlzLmhpZGRlblRleHRhcmVhLnN0eWxlLnRvcD10LnRvcH19LF9jYWxjVGV4dGFyZWFQb3NpdGlvbjpmdW5jdGlvbigpe2lmKCF0aGlzLmNhbnZhcylyZXR1cm57eDoxLHk6MX07dmFyIHQ9dGhpcy5pbkNvbXBvc2l0aW9uTW9kZT90aGlzLmNvbXBvc2l0aW9uU3RhcnQ6dGhpcy5zZWxlY3Rpb25TdGFydCxlPXRoaXMuX2dldEN1cnNvckJvdW5kYXJpZXModCksaT10aGlzLmdldDJEQ3Vyc29yTG9jYXRpb24odCkscj1pLmxpbmVJbmRleCxuPWkuY2hhckluZGV4LHM9dGhpcy5nZXRWYWx1ZU9mUHJvcGVydHlBdChyLG4sXCJmb250U2l6ZVwiKSp0aGlzLmxpbmVIZWlnaHQsbz1lLmxlZnRPZmZzZXQsYT10aGlzLmNhbGNUcmFuc2Zvcm1NYXRyaXgoKSxoPXt4OmUubGVmdCtvLHk6ZS50b3ArZS50b3BPZmZzZXQrc30sbD10aGlzLmNhbnZhcy5nZXRSZXRpbmFTY2FsaW5nKCksYz10aGlzLmNhbnZhcy51cHBlckNhbnZhc0VsLHU9Yy53aWR0aC9sLGQ9Yy5oZWlnaHQvbCxmPXUtcyxnPWQtcyxtPWMuY2xpZW50V2lkdGgvdSxwPWMuY2xpZW50SGVpZ2h0L2Q7cmV0dXJuIGg9Uy51dGlsLnRyYW5zZm9ybVBvaW50KGgsYSksKGg9Uy51dGlsLnRyYW5zZm9ybVBvaW50KGgsdGhpcy5jYW52YXMudmlld3BvcnRUcmFuc2Zvcm0pKS54Kj1tLGgueSo9cCxoLng8MCYmKGgueD0wKSxoLng+ZiYmKGgueD1mKSxoLnk8MCYmKGgueT0wKSxoLnk+ZyYmKGgueT1nKSxoLngrPXRoaXMuY2FudmFzLl9vZmZzZXQubGVmdCxoLnkrPXRoaXMuY2FudmFzLl9vZmZzZXQudG9wLHtsZWZ0OmgueCtcInB4XCIsdG9wOmgueStcInB4XCIsZm9udFNpemU6cytcInB4XCIsY2hhckhlaWdodDpzfX0sX3NhdmVFZGl0aW5nUHJvcHM6ZnVuY3Rpb24oKXt0aGlzLl9zYXZlZFByb3BzPXtoYXNDb250cm9sczp0aGlzLmhhc0NvbnRyb2xzLGJvcmRlckNvbG9yOnRoaXMuYm9yZGVyQ29sb3IsbG9ja01vdmVtZW50WDp0aGlzLmxvY2tNb3ZlbWVudFgsbG9ja01vdmVtZW50WTp0aGlzLmxvY2tNb3ZlbWVudFksaG92ZXJDdXJzb3I6dGhpcy5ob3ZlckN1cnNvcixzZWxlY3RhYmxlOnRoaXMuc2VsZWN0YWJsZSxkZWZhdWx0Q3Vyc29yOnRoaXMuY2FudmFzJiZ0aGlzLmNhbnZhcy5kZWZhdWx0Q3Vyc29yLG1vdmVDdXJzb3I6dGhpcy5jYW52YXMmJnRoaXMuY2FudmFzLm1vdmVDdXJzb3J9fSxfcmVzdG9yZUVkaXRpbmdQcm9wczpmdW5jdGlvbigpe3RoaXMuX3NhdmVkUHJvcHMmJih0aGlzLmhvdmVyQ3Vyc29yPXRoaXMuX3NhdmVkUHJvcHMuaG92ZXJDdXJzb3IsdGhpcy5oYXNDb250cm9scz10aGlzLl9zYXZlZFByb3BzLmhhc0NvbnRyb2xzLHRoaXMuYm9yZGVyQ29sb3I9dGhpcy5fc2F2ZWRQcm9wcy5ib3JkZXJDb2xvcix0aGlzLnNlbGVjdGFibGU9dGhpcy5fc2F2ZWRQcm9wcy5zZWxlY3RhYmxlLHRoaXMubG9ja01vdmVtZW50WD10aGlzLl9zYXZlZFByb3BzLmxvY2tNb3ZlbWVudFgsdGhpcy5sb2NrTW92ZW1lbnRZPXRoaXMuX3NhdmVkUHJvcHMubG9ja01vdmVtZW50WSx0aGlzLmNhbnZhcyYmKHRoaXMuY2FudmFzLmRlZmF1bHRDdXJzb3I9dGhpcy5fc2F2ZWRQcm9wcy5kZWZhdWx0Q3Vyc29yLHRoaXMuY2FudmFzLm1vdmVDdXJzb3I9dGhpcy5fc2F2ZWRQcm9wcy5tb3ZlQ3Vyc29yKSl9LGV4aXRFZGl0aW5nOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fdGV4dEJlZm9yZUVkaXQhPT10aGlzLnRleHQsZT10aGlzLmhpZGRlblRleHRhcmVhO3JldHVybiB0aGlzLnNlbGVjdGVkPSExLHRoaXMuaXNFZGl0aW5nPSExLHRoaXMuc2VsZWN0aW9uRW5kPXRoaXMuc2VsZWN0aW9uU3RhcnQsZSYmKGUuYmx1ciYmZS5ibHVyKCksZS5wYXJlbnROb2RlJiZlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSkpLHRoaXMuaGlkZGVuVGV4dGFyZWE9bnVsbCx0aGlzLmFib3J0Q3Vyc29yQW5pbWF0aW9uKCksdGhpcy5fcmVzdG9yZUVkaXRpbmdQcm9wcygpLHRoaXMuX2N1cnJlbnRDdXJzb3JPcGFjaXR5PTAsdGhpcy5fc2hvdWxkQ2xlYXJEaW1lbnNpb25DYWNoZSgpJiYodGhpcy5pbml0RGltZW5zaW9ucygpLHRoaXMuc2V0Q29vcmRzKCkpLHRoaXMuZmlyZShcImVkaXRpbmc6ZXhpdGVkXCIpLHQmJnRoaXMuZmlyZShcIm1vZGlmaWVkXCIpLHRoaXMuY2FudmFzJiYodGhpcy5jYW52YXMub2ZmKFwibW91c2U6bW92ZVwiLHRoaXMubW91c2VNb3ZlSGFuZGxlciksdGhpcy5jYW52YXMuZmlyZShcInRleHQ6ZWRpdGluZzpleGl0ZWRcIix7dGFyZ2V0OnRoaXN9KSx0JiZ0aGlzLmNhbnZhcy5maXJlKFwib2JqZWN0Om1vZGlmaWVkXCIse3RhcmdldDp0aGlzfSkpLHRoaXN9LF9yZW1vdmVFeHRyYW5lb3VzU3R5bGVzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuc3R5bGVzKXRoaXMuX3RleHRMaW5lc1t0XXx8ZGVsZXRlIHRoaXMuc3R5bGVzW3RdfSxyZW1vdmVTdHlsZUZyb21UbzpmdW5jdGlvbih0LGUpe3ZhciBpLHIsbj10aGlzLmdldDJEQ3Vyc29yTG9jYXRpb24odCwhMCkscz10aGlzLmdldDJEQ3Vyc29yTG9jYXRpb24oZSwhMCksbz1uLmxpbmVJbmRleCxhPW4uY2hhckluZGV4LGg9cy5saW5lSW5kZXgsbD1zLmNoYXJJbmRleDtpZihvIT09aCl7aWYodGhpcy5zdHlsZXNbb10pZm9yKGk9YTtpPHRoaXMuX3Vud3JhcHBlZFRleHRMaW5lc1tvXS5sZW5ndGg7aSsrKWRlbGV0ZSB0aGlzLnN0eWxlc1tvXVtpXTtpZih0aGlzLnN0eWxlc1toXSlmb3IoaT1sO2k8dGhpcy5fdW53cmFwcGVkVGV4dExpbmVzW2hdLmxlbmd0aDtpKyspKHI9dGhpcy5zdHlsZXNbaF1baV0pJiYodGhpcy5zdHlsZXNbb118fCh0aGlzLnN0eWxlc1tvXT17fSksdGhpcy5zdHlsZXNbb11bYStpLWxdPXIpO2ZvcihpPW8rMTtpPD1oO2krKylkZWxldGUgdGhpcy5zdHlsZXNbaV07dGhpcy5zaGlmdExpbmVTdHlsZXMoaCxvLWgpfWVsc2UgaWYodGhpcy5zdHlsZXNbb10pe3I9dGhpcy5zdHlsZXNbb107dmFyIGMsdSxkPWwtYTtmb3IoaT1hO2k8bDtpKyspZGVsZXRlIHJbaV07Zm9yKHUgaW4gdGhpcy5zdHlsZXNbb10pKGM9cGFyc2VJbnQodSwxMCkpPj1sJiYocltjLWRdPXJbdV0sZGVsZXRlIHJbdV0pfX0sc2hpZnRMaW5lU3R5bGVzOmZ1bmN0aW9uKHQsZSl7dmFyIGk9Qyh0aGlzLnN0eWxlcyk7Zm9yKHZhciByIGluIHRoaXMuc3R5bGVzKXt2YXIgbj1wYXJzZUludChyLDEwKTtuPnQmJih0aGlzLnN0eWxlc1tuK2VdPWlbbl0saVtuLWVdfHxkZWxldGUgdGhpcy5zdHlsZXNbbl0pfX0scmVzdGFydEN1cnNvcklmTmVlZGVkOmZ1bmN0aW9uKCl7dGhpcy5fY3VycmVudFRpY2tTdGF0ZSYmIXRoaXMuX2N1cnJlbnRUaWNrU3RhdGUuaXNBYm9ydGVkJiZ0aGlzLl9jdXJyZW50VGlja0NvbXBsZXRlU3RhdGUmJiF0aGlzLl9jdXJyZW50VGlja0NvbXBsZXRlU3RhdGUuaXNBYm9ydGVkfHx0aGlzLmluaXREZWxheWVkQ3Vyc29yKCl9LGluc2VydE5ld2xpbmVTdHlsZU9iamVjdDpmdW5jdGlvbih0LGUsaSxyKXt2YXIgbixzPXt9LG89ITEsYT10aGlzLl91bndyYXBwZWRUZXh0TGluZXNbdF0ubGVuZ3RoPT09ZTtmb3IodmFyIGggaW4gaXx8KGk9MSksdGhpcy5zaGlmdExpbmVTdHlsZXModCxpKSx0aGlzLnN0eWxlc1t0XSYmKG49dGhpcy5zdHlsZXNbdF1bMD09PWU/ZTplLTFdKSx0aGlzLnN0eWxlc1t0XSl7dmFyIGw9cGFyc2VJbnQoaCwxMCk7bD49ZSYmKG89ITAsc1tsLWVdPXRoaXMuc3R5bGVzW3RdW2hdLGEmJjA9PT1lfHxkZWxldGUgdGhpcy5zdHlsZXNbdF1baF0pfXZhciBjPSExO2ZvcihvJiYhYSYmKHRoaXMuc3R5bGVzW3QraV09cyxjPSEwKSxjJiZpLS07aT4wOylyJiZyW2ktMV0/dGhpcy5zdHlsZXNbdCtpXT17MDpDKHJbaS0xXSl9Om4/dGhpcy5zdHlsZXNbdCtpXT17MDpDKG4pfTpkZWxldGUgdGhpcy5zdHlsZXNbdCtpXSxpLS07dGhpcy5fZm9yY2VDbGVhckNhY2hlPSEwfSxpbnNlcnRDaGFyU3R5bGVPYmplY3Q6ZnVuY3Rpb24odCxlLGkscil7dGhpcy5zdHlsZXN8fCh0aGlzLnN0eWxlcz17fSk7dmFyIG49dGhpcy5zdHlsZXNbdF0scz1uP0Mobik6e307Zm9yKHZhciBvIGluIGl8fChpPTEpLHMpe3ZhciBhPXBhcnNlSW50KG8sMTApO2E+PWUmJihuW2EraV09c1thXSxzW2EtaV18fGRlbGV0ZSBuW2FdKX1pZih0aGlzLl9mb3JjZUNsZWFyQ2FjaGU9ITAscilmb3IoO2ktLTspT2JqZWN0LmtleXMocltpXSkubGVuZ3RoJiYodGhpcy5zdHlsZXNbdF18fCh0aGlzLnN0eWxlc1t0XT17fSksdGhpcy5zdHlsZXNbdF1bZStpXT1DKHJbaV0pKTtlbHNlIGlmKG4pZm9yKHZhciBoPW5bZT9lLTE6MV07aCYmaS0tOyl0aGlzLnN0eWxlc1t0XVtlK2ldPUMoaCl9LGluc2VydE5ld1N0eWxlQmxvY2s6ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgcj10aGlzLmdldDJEQ3Vyc29yTG9jYXRpb24oZSwhMCksbj1bMF0scz0wLG89MDtvPHQubGVuZ3RoO28rKylcIlxcblwiPT09dFtvXT9uWysrc109MDpuW3NdKys7Zm9yKG5bMF0+MCYmKHRoaXMuaW5zZXJ0Q2hhclN0eWxlT2JqZWN0KHIubGluZUluZGV4LHIuY2hhckluZGV4LG5bMF0saSksaT1pJiZpLnNsaWNlKG5bMF0rMSkpLHMmJnRoaXMuaW5zZXJ0TmV3bGluZVN0eWxlT2JqZWN0KHIubGluZUluZGV4LHIuY2hhckluZGV4K25bMF0scyksbz0xO288cztvKyspbltvXT4wP3RoaXMuaW5zZXJ0Q2hhclN0eWxlT2JqZWN0KHIubGluZUluZGV4K28sMCxuW29dLGkpOmkmJnRoaXMuc3R5bGVzW3IubGluZUluZGV4K29dJiZpWzBdJiYodGhpcy5zdHlsZXNbci5saW5lSW5kZXgrb11bMF09aVswXSksaT1pJiZpLnNsaWNlKG5bb10rMSk7bltvXT4wJiZ0aGlzLmluc2VydENoYXJTdHlsZU9iamVjdChyLmxpbmVJbmRleCtvLDAsbltvXSxpKX0sc2V0U2VsZWN0aW9uU3RhcnRFbmRXaXRoU2hpZnQ6ZnVuY3Rpb24odCxlLGkpe2k8PXQ/KGU9PT10P3RoaXMuX3NlbGVjdGlvbkRpcmVjdGlvbj1cImxlZnRcIjpcInJpZ2h0XCI9PT10aGlzLl9zZWxlY3Rpb25EaXJlY3Rpb24mJih0aGlzLl9zZWxlY3Rpb25EaXJlY3Rpb249XCJsZWZ0XCIsdGhpcy5zZWxlY3Rpb25FbmQ9dCksdGhpcy5zZWxlY3Rpb25TdGFydD1pKTppPnQmJmk8ZT9cInJpZ2h0XCI9PT10aGlzLl9zZWxlY3Rpb25EaXJlY3Rpb24/dGhpcy5zZWxlY3Rpb25FbmQ9aTp0aGlzLnNlbGVjdGlvblN0YXJ0PWk6KGU9PT10P3RoaXMuX3NlbGVjdGlvbkRpcmVjdGlvbj1cInJpZ2h0XCI6XCJsZWZ0XCI9PT10aGlzLl9zZWxlY3Rpb25EaXJlY3Rpb24mJih0aGlzLl9zZWxlY3Rpb25EaXJlY3Rpb249XCJyaWdodFwiLHRoaXMuc2VsZWN0aW9uU3RhcnQ9ZSksdGhpcy5zZWxlY3Rpb25FbmQ9aSl9LHNldFNlbGVjdGlvbkluQm91bmRhcmllczpmdW5jdGlvbigpe3ZhciB0PXRoaXMudGV4dC5sZW5ndGg7dGhpcy5zZWxlY3Rpb25TdGFydD50P3RoaXMuc2VsZWN0aW9uU3RhcnQ9dDp0aGlzLnNlbGVjdGlvblN0YXJ0PDAmJih0aGlzLnNlbGVjdGlvblN0YXJ0PTApLHRoaXMuc2VsZWN0aW9uRW5kPnQ/dGhpcy5zZWxlY3Rpb25FbmQ9dDp0aGlzLnNlbGVjdGlvbkVuZDwwJiYodGhpcy5zZWxlY3Rpb25FbmQ9MCl9fSksUy51dGlsLm9iamVjdC5leHRlbmQoUy5JVGV4dC5wcm90b3R5cGUse2luaXREb3VibGVDbGlja1NpbXVsYXRpb246ZnVuY3Rpb24oKXt0aGlzLl9fbGFzdENsaWNrVGltZT0rbmV3IERhdGUsdGhpcy5fX2xhc3RMYXN0Q2xpY2tUaW1lPStuZXcgRGF0ZSx0aGlzLl9fbGFzdFBvaW50ZXI9e30sdGhpcy5vbihcIm1vdXNlZG93blwiLHRoaXMub25Nb3VzZURvd24pfSxvbk1vdXNlRG93bjpmdW5jdGlvbih0KXtpZih0aGlzLmNhbnZhcyl7dGhpcy5fX25ld0NsaWNrVGltZT0rbmV3IERhdGU7dmFyIGU9dC5wb2ludGVyO3RoaXMuaXNUcmlwbGVDbGljayhlKSYmKHRoaXMuZmlyZShcInRyaXBsZWNsaWNrXCIsdCksdGhpcy5fc3RvcEV2ZW50KHQuZSkpLHRoaXMuX19sYXN0TGFzdENsaWNrVGltZT10aGlzLl9fbGFzdENsaWNrVGltZSx0aGlzLl9fbGFzdENsaWNrVGltZT10aGlzLl9fbmV3Q2xpY2tUaW1lLHRoaXMuX19sYXN0UG9pbnRlcj1lLHRoaXMuX19sYXN0SXNFZGl0aW5nPXRoaXMuaXNFZGl0aW5nLHRoaXMuX19sYXN0U2VsZWN0ZWQ9dGhpcy5zZWxlY3RlZH19LGlzVHJpcGxlQ2xpY2s6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX19uZXdDbGlja1RpbWUtdGhpcy5fX2xhc3RDbGlja1RpbWU8NTAwJiZ0aGlzLl9fbGFzdENsaWNrVGltZS10aGlzLl9fbGFzdExhc3RDbGlja1RpbWU8NTAwJiZ0aGlzLl9fbGFzdFBvaW50ZXIueD09PXQueCYmdGhpcy5fX2xhc3RQb2ludGVyLnk9PT10Lnl9LF9zdG9wRXZlbnQ6ZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCYmdC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uJiZ0LnN0b3BQcm9wYWdhdGlvbigpfSxpbml0Q3Vyc29yU2VsZWN0aW9uSGFuZGxlcnM6ZnVuY3Rpb24oKXt0aGlzLmluaXRNb3VzZWRvd25IYW5kbGVyKCksdGhpcy5pbml0TW91c2V1cEhhbmRsZXIoKSx0aGlzLmluaXRDbGlja3MoKX0sZG91YmxlQ2xpY2tIYW5kbGVyOmZ1bmN0aW9uKHQpe3RoaXMuaXNFZGl0aW5nJiZ0aGlzLnNlbGVjdFdvcmQodGhpcy5nZXRTZWxlY3Rpb25TdGFydEZyb21Qb2ludGVyKHQuZSkpfSx0cmlwbGVDbGlja0hhbmRsZXI6ZnVuY3Rpb24odCl7dGhpcy5pc0VkaXRpbmcmJnRoaXMuc2VsZWN0TGluZSh0aGlzLmdldFNlbGVjdGlvblN0YXJ0RnJvbVBvaW50ZXIodC5lKSl9LGluaXRDbGlja3M6ZnVuY3Rpb24oKXt0aGlzLm9uKFwibW91c2VkYmxjbGlja1wiLHRoaXMuZG91YmxlQ2xpY2tIYW5kbGVyKSx0aGlzLm9uKFwidHJpcGxlY2xpY2tcIix0aGlzLnRyaXBsZUNsaWNrSGFuZGxlcil9LF9tb3VzZURvd25IYW5kbGVyOmZ1bmN0aW9uKHQpeyF0aGlzLmNhbnZhc3x8IXRoaXMuZWRpdGFibGV8fHQuZS5idXR0b24mJjEhPT10LmUuYnV0dG9ufHwodGhpcy5fX2lzTW91c2Vkb3duPSEwLHRoaXMuc2VsZWN0ZWQmJih0aGlzLmluQ29tcG9zaXRpb25Nb2RlPSExLHRoaXMuc2V0Q3Vyc29yQnlDbGljayh0LmUpKSx0aGlzLmlzRWRpdGluZyYmKHRoaXMuX19zZWxlY3Rpb25TdGFydE9uTW91c2VEb3duPXRoaXMuc2VsZWN0aW9uU3RhcnQsdGhpcy5zZWxlY3Rpb25TdGFydD09PXRoaXMuc2VsZWN0aW9uRW5kJiZ0aGlzLmFib3J0Q3Vyc29yQW5pbWF0aW9uKCksdGhpcy5yZW5kZXJDdXJzb3JPclNlbGVjdGlvbigpKSl9LF9tb3VzZURvd25IYW5kbGVyQmVmb3JlOmZ1bmN0aW9uKHQpeyF0aGlzLmNhbnZhc3x8IXRoaXMuZWRpdGFibGV8fHQuZS5idXR0b24mJjEhPT10LmUuYnV0dG9ufHwodGhpcy5zZWxlY3RlZD10aGlzPT09dGhpcy5jYW52YXMuX2FjdGl2ZU9iamVjdCl9LGluaXRNb3VzZWRvd25IYW5kbGVyOmZ1bmN0aW9uKCl7dGhpcy5vbihcIm1vdXNlZG93blwiLHRoaXMuX21vdXNlRG93bkhhbmRsZXIpLHRoaXMub24oXCJtb3VzZWRvd246YmVmb3JlXCIsdGhpcy5fbW91c2VEb3duSGFuZGxlckJlZm9yZSl9LGluaXRNb3VzZXVwSGFuZGxlcjpmdW5jdGlvbigpe3RoaXMub24oXCJtb3VzZXVwXCIsdGhpcy5tb3VzZVVwSGFuZGxlcil9LG1vdXNlVXBIYW5kbGVyOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX19pc01vdXNlZG93bj0hMSwhKCF0aGlzLmVkaXRhYmxlfHx0aGlzLmdyb3VwfHx0LnRyYW5zZm9ybSYmdC50cmFuc2Zvcm0uYWN0aW9uUGVyZm9ybWVkfHx0LmUuYnV0dG9uJiYxIT09dC5lLmJ1dHRvbikpe2lmKHRoaXMuY2FudmFzKXt2YXIgZT10aGlzLmNhbnZhcy5fYWN0aXZlT2JqZWN0O2lmKGUmJmUhPT10aGlzKXJldHVybn10aGlzLl9fbGFzdFNlbGVjdGVkJiYhdGhpcy5fX2Nvcm5lcj8odGhpcy5zZWxlY3RlZD0hMSx0aGlzLl9fbGFzdFNlbGVjdGVkPSExLHRoaXMuZW50ZXJFZGl0aW5nKHQuZSksdGhpcy5zZWxlY3Rpb25TdGFydD09PXRoaXMuc2VsZWN0aW9uRW5kP3RoaXMuaW5pdERlbGF5ZWRDdXJzb3IoITApOnRoaXMucmVuZGVyQ3Vyc29yT3JTZWxlY3Rpb24oKSk6dGhpcy5zZWxlY3RlZD0hMH19LHNldEN1cnNvckJ5Q2xpY2s6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRTZWxlY3Rpb25TdGFydEZyb21Qb2ludGVyKHQpLGk9dGhpcy5zZWxlY3Rpb25TdGFydCxyPXRoaXMuc2VsZWN0aW9uRW5kO3Quc2hpZnRLZXk/dGhpcy5zZXRTZWxlY3Rpb25TdGFydEVuZFdpdGhTaGlmdChpLHIsZSk6KHRoaXMuc2VsZWN0aW9uU3RhcnQ9ZSx0aGlzLnNlbGVjdGlvbkVuZD1lKSx0aGlzLmlzRWRpdGluZyYmKHRoaXMuX2ZpcmVTZWxlY3Rpb25DaGFuZ2VkKCksdGhpcy5fdXBkYXRlVGV4dGFyZWEoKSl9LGdldFNlbGVjdGlvblN0YXJ0RnJvbVBvaW50ZXI6ZnVuY3Rpb24odCl7Zm9yKHZhciBlLGk9dGhpcy5nZXRMb2NhbFBvaW50ZXIodCkscj0wLG49MCxzPTAsbz0wLGE9MCxoPTAsbD10aGlzLl90ZXh0TGluZXMubGVuZ3RoO2g8bCYmczw9aS55O2grKylzKz10aGlzLmdldEhlaWdodE9mTGluZShoKSp0aGlzLnNjYWxlWSxhPWgsaD4wJiYobys9dGhpcy5fdGV4dExpbmVzW2gtMV0ubGVuZ3RoK3RoaXMubWlzc2luZ05ld2xpbmVPZmZzZXQoaC0xKSk7bj10aGlzLl9nZXRMaW5lTGVmdE9mZnNldChhKSp0aGlzLnNjYWxlWCxlPXRoaXMuX3RleHRMaW5lc1thXSxcInJ0bFwiPT09dGhpcy5kaXJlY3Rpb24mJihpLng9dGhpcy53aWR0aCp0aGlzLnNjYWxlWC1pLngrbik7Zm9yKHZhciBjPTAsdT1lLmxlbmd0aDtjPHUmJihyPW4sKG4rPXRoaXMuX19jaGFyQm91bmRzW2FdW2NdLmtlcm5lZFdpZHRoKnRoaXMuc2NhbGVYKTw9aS54KTtjKyspbysrO3JldHVybiB0aGlzLl9nZXROZXdTZWxlY3Rpb25TdGFydEZyb21PZmZzZXQoaSxyLG4sbyx1KX0sX2dldE5ld1NlbGVjdGlvblN0YXJ0RnJvbU9mZnNldDpmdW5jdGlvbih0LGUsaSxyLG4pe3ZhciBzPXQueC1lLG89aS10LngsYT1yKyhvPnN8fG88MD8wOjEpO3JldHVybiB0aGlzLmZsaXBYJiYoYT1uLWEpLGE+dGhpcy5fdGV4dC5sZW5ndGgmJihhPXRoaXMuX3RleHQubGVuZ3RoKSxhfX0pLFMudXRpbC5vYmplY3QuZXh0ZW5kKFMuSVRleHQucHJvdG90eXBlLHtpbml0SGlkZGVuVGV4dGFyZWE6ZnVuY3Rpb24oKXt0aGlzLmhpZGRlblRleHRhcmVhPVMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpLHRoaXMuaGlkZGVuVGV4dGFyZWEuc2V0QXR0cmlidXRlKFwiYXV0b2NhcGl0YWxpemVcIixcIm9mZlwiKSx0aGlzLmhpZGRlblRleHRhcmVhLnNldEF0dHJpYnV0ZShcImF1dG9jb3JyZWN0XCIsXCJvZmZcIiksdGhpcy5oaWRkZW5UZXh0YXJlYS5zZXRBdHRyaWJ1dGUoXCJhdXRvY29tcGxldGVcIixcIm9mZlwiKSx0aGlzLmhpZGRlblRleHRhcmVhLnNldEF0dHJpYnV0ZShcInNwZWxsY2hlY2tcIixcImZhbHNlXCIpLHRoaXMuaGlkZGVuVGV4dGFyZWEuc2V0QXR0cmlidXRlKFwiZGF0YS1mYWJyaWMtaGlkZGVudGV4dGFyZWFcIixcIlwiKSx0aGlzLmhpZGRlblRleHRhcmVhLnNldEF0dHJpYnV0ZShcIndyYXBcIixcIm9mZlwiKTt2YXIgdD10aGlzLl9jYWxjVGV4dGFyZWFQb3NpdGlvbigpO3RoaXMuaGlkZGVuVGV4dGFyZWEuc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiBcIit0LnRvcCtcIjsgbGVmdDogXCIrdC5sZWZ0K1wiOyB6LWluZGV4OiAtOTk5OyBvcGFjaXR5OiAwOyB3aWR0aDogMXB4OyBoZWlnaHQ6IDFweDsgZm9udC1zaXplOiAxcHg7IHBhZGRpbmfvvbB0b3A6IFwiK3QuZm9udFNpemUrXCI7XCIsdGhpcy5oaWRkZW5UZXh0YXJlYUNvbnRhaW5lcj90aGlzLmhpZGRlblRleHRhcmVhQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuaGlkZGVuVGV4dGFyZWEpOlMuZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmhpZGRlblRleHRhcmVhKSxTLnV0aWwuYWRkTGlzdGVuZXIodGhpcy5oaWRkZW5UZXh0YXJlYSxcImtleWRvd25cIix0aGlzLm9uS2V5RG93bi5iaW5kKHRoaXMpKSxTLnV0aWwuYWRkTGlzdGVuZXIodGhpcy5oaWRkZW5UZXh0YXJlYSxcImtleXVwXCIsdGhpcy5vbktleVVwLmJpbmQodGhpcykpLFMudXRpbC5hZGRMaXN0ZW5lcih0aGlzLmhpZGRlblRleHRhcmVhLFwiaW5wdXRcIix0aGlzLm9uSW5wdXQuYmluZCh0aGlzKSksUy51dGlsLmFkZExpc3RlbmVyKHRoaXMuaGlkZGVuVGV4dGFyZWEsXCJjb3B5XCIsdGhpcy5jb3B5LmJpbmQodGhpcykpLFMudXRpbC5hZGRMaXN0ZW5lcih0aGlzLmhpZGRlblRleHRhcmVhLFwiY3V0XCIsdGhpcy5jb3B5LmJpbmQodGhpcykpLFMudXRpbC5hZGRMaXN0ZW5lcih0aGlzLmhpZGRlblRleHRhcmVhLFwicGFzdGVcIix0aGlzLnBhc3RlLmJpbmQodGhpcykpLFMudXRpbC5hZGRMaXN0ZW5lcih0aGlzLmhpZGRlblRleHRhcmVhLFwiY29tcG9zaXRpb25zdGFydFwiLHRoaXMub25Db21wb3NpdGlvblN0YXJ0LmJpbmQodGhpcykpLFMudXRpbC5hZGRMaXN0ZW5lcih0aGlzLmhpZGRlblRleHRhcmVhLFwiY29tcG9zaXRpb251cGRhdGVcIix0aGlzLm9uQ29tcG9zaXRpb25VcGRhdGUuYmluZCh0aGlzKSksUy51dGlsLmFkZExpc3RlbmVyKHRoaXMuaGlkZGVuVGV4dGFyZWEsXCJjb21wb3NpdGlvbmVuZFwiLHRoaXMub25Db21wb3NpdGlvbkVuZC5iaW5kKHRoaXMpKSwhdGhpcy5fY2xpY2tIYW5kbGVySW5pdGlhbGl6ZWQmJnRoaXMuY2FudmFzJiYoUy51dGlsLmFkZExpc3RlbmVyKHRoaXMuY2FudmFzLnVwcGVyQ2FudmFzRWwsXCJjbGlja1wiLHRoaXMub25DbGljay5iaW5kKHRoaXMpKSx0aGlzLl9jbGlja0hhbmRsZXJJbml0aWFsaXplZD0hMCl9LGtleXNNYXA6ezk6XCJleGl0RWRpdGluZ1wiLDI3OlwiZXhpdEVkaXRpbmdcIiwzMzpcIm1vdmVDdXJzb3JVcFwiLDM0OlwibW92ZUN1cnNvckRvd25cIiwzNTpcIm1vdmVDdXJzb3JSaWdodFwiLDM2OlwibW92ZUN1cnNvckxlZnRcIiwzNzpcIm1vdmVDdXJzb3JMZWZ0XCIsMzg6XCJtb3ZlQ3Vyc29yVXBcIiwzOTpcIm1vdmVDdXJzb3JSaWdodFwiLDQwOlwibW92ZUN1cnNvckRvd25cIn0sa2V5c01hcFJ0bDp7OTpcImV4aXRFZGl0aW5nXCIsMjc6XCJleGl0RWRpdGluZ1wiLDMzOlwibW92ZUN1cnNvclVwXCIsMzQ6XCJtb3ZlQ3Vyc29yRG93blwiLDM1OlwibW92ZUN1cnNvckxlZnRcIiwzNjpcIm1vdmVDdXJzb3JSaWdodFwiLDM3OlwibW92ZUN1cnNvclJpZ2h0XCIsMzg6XCJtb3ZlQ3Vyc29yVXBcIiwzOTpcIm1vdmVDdXJzb3JMZWZ0XCIsNDA6XCJtb3ZlQ3Vyc29yRG93blwifSxjdHJsS2V5c01hcFVwOns2NzpcImNvcHlcIiw4ODpcImN1dFwifSxjdHJsS2V5c01hcERvd246ezY1Olwic2VsZWN0QWxsXCJ9LG9uQ2xpY2s6ZnVuY3Rpb24oKXt0aGlzLmhpZGRlblRleHRhcmVhJiZ0aGlzLmhpZGRlblRleHRhcmVhLmZvY3VzKCl9LG9uS2V5RG93bjpmdW5jdGlvbih0KXtpZih0aGlzLmlzRWRpdGluZyl7dmFyIGU9XCJydGxcIj09PXRoaXMuZGlyZWN0aW9uP3RoaXMua2V5c01hcFJ0bDp0aGlzLmtleXNNYXA7aWYodC5rZXlDb2RlIGluIGUpdGhpc1tlW3Qua2V5Q29kZV1dKHQpO2Vsc2V7aWYoISh0LmtleUNvZGUgaW4gdGhpcy5jdHJsS2V5c01hcERvd24pfHwhdC5jdHJsS2V5JiYhdC5tZXRhS2V5KXJldHVybjt0aGlzW3RoaXMuY3RybEtleXNNYXBEb3duW3Qua2V5Q29kZV1dKHQpfXQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdC5wcmV2ZW50RGVmYXVsdCgpLHQua2V5Q29kZT49MzMmJnQua2V5Q29kZTw9NDA/KHRoaXMuaW5Db21wb3NpdGlvbk1vZGU9ITEsdGhpcy5jbGVhckNvbnRleHRUb3AoKSx0aGlzLnJlbmRlckN1cnNvck9yU2VsZWN0aW9uKCkpOnRoaXMuY2FudmFzJiZ0aGlzLmNhbnZhcy5yZXF1ZXN0UmVuZGVyQWxsKCl9fSxvbktleVVwOmZ1bmN0aW9uKHQpeyF0aGlzLmlzRWRpdGluZ3x8dGhpcy5fY29weURvbmV8fHRoaXMuaW5Db21wb3NpdGlvbk1vZGU/dGhpcy5fY29weURvbmU9ITE6dC5rZXlDb2RlIGluIHRoaXMuY3RybEtleXNNYXBVcCYmKHQuY3RybEtleXx8dC5tZXRhS2V5KSYmKHRoaXNbdGhpcy5jdHJsS2V5c01hcFVwW3Qua2V5Q29kZV1dKHQpLHQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuY2FudmFzJiZ0aGlzLmNhbnZhcy5yZXF1ZXN0UmVuZGVyQWxsKCkpfSxvbklucHV0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZnJvbVBhc3RlO2lmKHRoaXMuZnJvbVBhc3RlPSExLHQmJnQuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5pc0VkaXRpbmcpe3ZhciBpLHIsbixzLG8sYT10aGlzLl9zcGxpdFRleHRJbnRvTGluZXModGhpcy5oaWRkZW5UZXh0YXJlYS52YWx1ZSkuZ3JhcGhlbWVUZXh0LGg9dGhpcy5fdGV4dC5sZW5ndGgsbD1hLmxlbmd0aCxjPWwtaCx1PXRoaXMuc2VsZWN0aW9uU3RhcnQsZD10aGlzLnNlbGVjdGlvbkVuZCxmPXUhPT1kO2lmKFwiXCI9PT10aGlzLmhpZGRlblRleHRhcmVhLnZhbHVlKXJldHVybiB0aGlzLnN0eWxlcz17fSx0aGlzLnVwZGF0ZUZyb21UZXh0QXJlYSgpLHRoaXMuZmlyZShcImNoYW5nZWRcIiksdm9pZCh0aGlzLmNhbnZhcyYmKHRoaXMuY2FudmFzLmZpcmUoXCJ0ZXh0OmNoYW5nZWRcIix7dGFyZ2V0OnRoaXN9KSx0aGlzLmNhbnZhcy5yZXF1ZXN0UmVuZGVyQWxsKCkpKTt2YXIgZz10aGlzLmZyb21TdHJpbmdUb0dyYXBoZW1lU2VsZWN0aW9uKHRoaXMuaGlkZGVuVGV4dGFyZWEuc2VsZWN0aW9uU3RhcnQsdGhpcy5oaWRkZW5UZXh0YXJlYS5zZWxlY3Rpb25FbmQsdGhpcy5oaWRkZW5UZXh0YXJlYS52YWx1ZSksbT11Pmcuc2VsZWN0aW9uU3RhcnQ7Zj8oaT10aGlzLl90ZXh0LnNsaWNlKHUsZCksYys9ZC11KTpsPGgmJihpPW0/dGhpcy5fdGV4dC5zbGljZShkK2MsZCk6dGhpcy5fdGV4dC5zbGljZSh1LHUtYykpLHI9YS5zbGljZShnLnNlbGVjdGlvbkVuZC1jLGcuc2VsZWN0aW9uRW5kKSxpJiZpLmxlbmd0aCYmKHIubGVuZ3RoJiYobj10aGlzLmdldFNlbGVjdGlvblN0eWxlcyh1LHUrMSwhMSksbj1yLm1hcCgoZnVuY3Rpb24oKXtyZXR1cm4gblswXX0pKSksZj8ocz11LG89ZCk6bT8ocz1kLWkubGVuZ3RoLG89ZCk6KHM9ZCxvPWQraS5sZW5ndGgpLHRoaXMucmVtb3ZlU3R5bGVGcm9tVG8ocyxvKSksci5sZW5ndGgmJihlJiZyLmpvaW4oXCJcIik9PT1TLmNvcGllZFRleHQmJiFTLmRpc2FibGVTdHlsZUNvcHlQYXN0ZSYmKG49Uy5jb3BpZWRUZXh0U3R5bGUpLHRoaXMuaW5zZXJ0TmV3U3R5bGVCbG9jayhyLHUsbikpLHRoaXMudXBkYXRlRnJvbVRleHRBcmVhKCksdGhpcy5maXJlKFwiY2hhbmdlZFwiKSx0aGlzLmNhbnZhcyYmKHRoaXMuY2FudmFzLmZpcmUoXCJ0ZXh0OmNoYW5nZWRcIix7dGFyZ2V0OnRoaXN9KSx0aGlzLmNhbnZhcy5yZXF1ZXN0UmVuZGVyQWxsKCkpfX0sb25Db21wb3NpdGlvblN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5pbkNvbXBvc2l0aW9uTW9kZT0hMH0sb25Db21wb3NpdGlvbkVuZDpmdW5jdGlvbigpe3RoaXMuaW5Db21wb3NpdGlvbk1vZGU9ITF9LG9uQ29tcG9zaXRpb25VcGRhdGU6ZnVuY3Rpb24odCl7dGhpcy5jb21wb3NpdGlvblN0YXJ0PXQudGFyZ2V0LnNlbGVjdGlvblN0YXJ0LHRoaXMuY29tcG9zaXRpb25FbmQ9dC50YXJnZXQuc2VsZWN0aW9uRW5kLHRoaXMudXBkYXRlVGV4dGFyZWFQb3NpdGlvbigpfSxjb3B5OmZ1bmN0aW9uKCl7dGhpcy5zZWxlY3Rpb25TdGFydCE9PXRoaXMuc2VsZWN0aW9uRW5kJiYoUy5jb3BpZWRUZXh0PXRoaXMuZ2V0U2VsZWN0ZWRUZXh0KCksUy5kaXNhYmxlU3R5bGVDb3B5UGFzdGU/Uy5jb3BpZWRUZXh0U3R5bGU9bnVsbDpTLmNvcGllZFRleHRTdHlsZT10aGlzLmdldFNlbGVjdGlvblN0eWxlcyh0aGlzLnNlbGVjdGlvblN0YXJ0LHRoaXMuc2VsZWN0aW9uRW5kLCEwKSx0aGlzLl9jb3B5RG9uZT0hMCl9LHBhc3RlOmZ1bmN0aW9uKCl7dGhpcy5mcm9tUGFzdGU9ITB9LF9nZXRDbGlwYm9hcmREYXRhOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0LmNsaXBib2FyZERhdGF8fFMud2luZG93LmNsaXBib2FyZERhdGF9LF9nZXRXaWR0aEJlZm9yZUN1cnNvcjpmdW5jdGlvbih0LGUpe3ZhciBpLHI9dGhpcy5fZ2V0TGluZUxlZnRPZmZzZXQodCk7cmV0dXJuIGU+MCYmKHIrPShpPXRoaXMuX19jaGFyQm91bmRzW3RdW2UtMV0pLmxlZnQraS53aWR0aCkscn0sZ2V0RG93bkN1cnNvck9mZnNldDpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2dldFNlbGVjdGlvbkZvck9mZnNldCh0LGUpLHI9dGhpcy5nZXQyREN1cnNvckxvY2F0aW9uKGkpLG49ci5saW5lSW5kZXg7aWYobj09PXRoaXMuX3RleHRMaW5lcy5sZW5ndGgtMXx8dC5tZXRhS2V5fHwzND09PXQua2V5Q29kZSlyZXR1cm4gdGhpcy5fdGV4dC5sZW5ndGgtaTt2YXIgcz1yLmNoYXJJbmRleCxvPXRoaXMuX2dldFdpZHRoQmVmb3JlQ3Vyc29yKG4scyksYT10aGlzLl9nZXRJbmRleE9uTGluZShuKzEsbyk7cmV0dXJuIHRoaXMuX3RleHRMaW5lc1tuXS5zbGljZShzKS5sZW5ndGgrYSsxK3RoaXMubWlzc2luZ05ld2xpbmVPZmZzZXQobil9LF9nZXRTZWxlY3Rpb25Gb3JPZmZzZXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zaGlmdEtleSYmdGhpcy5zZWxlY3Rpb25TdGFydCE9PXRoaXMuc2VsZWN0aW9uRW5kJiZlP3RoaXMuc2VsZWN0aW9uRW5kOnRoaXMuc2VsZWN0aW9uU3RhcnR9LGdldFVwQ3Vyc29yT2Zmc2V0OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fZ2V0U2VsZWN0aW9uRm9yT2Zmc2V0KHQsZSkscj10aGlzLmdldDJEQ3Vyc29yTG9jYXRpb24oaSksbj1yLmxpbmVJbmRleDtpZigwPT09bnx8dC5tZXRhS2V5fHwzMz09PXQua2V5Q29kZSlyZXR1cm4taTt2YXIgcz1yLmNoYXJJbmRleCxvPXRoaXMuX2dldFdpZHRoQmVmb3JlQ3Vyc29yKG4scyksYT10aGlzLl9nZXRJbmRleE9uTGluZShuLTEsbyksaD10aGlzLl90ZXh0TGluZXNbbl0uc2xpY2UoMCxzKSxsPXRoaXMubWlzc2luZ05ld2xpbmVPZmZzZXQobi0xKTtyZXR1cm4tdGhpcy5fdGV4dExpbmVzW24tMV0ubGVuZ3RoK2EtaC5sZW5ndGgrKDEtbCl9LF9nZXRJbmRleE9uTGluZTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSxyLG49dGhpcy5fdGV4dExpbmVzW3RdLHM9dGhpcy5fZ2V0TGluZUxlZnRPZmZzZXQodCksbz0wLGE9MCxoPW4ubGVuZ3RoO2E8aDthKyspaWYoKHMrPWk9dGhpcy5fX2NoYXJCb3VuZHNbdF1bYV0ud2lkdGgpPmUpe3I9ITA7dmFyIGw9cy1pLGM9cyx1PU1hdGguYWJzKGwtZSk7bz1NYXRoLmFicyhjLWUpPHU/YTphLTE7YnJlYWt9cmV0dXJuIHJ8fChvPW4ubGVuZ3RoLTEpLG99LG1vdmVDdXJzb3JEb3duOmZ1bmN0aW9uKHQpe3RoaXMuc2VsZWN0aW9uU3RhcnQ+PXRoaXMuX3RleHQubGVuZ3RoJiZ0aGlzLnNlbGVjdGlvbkVuZD49dGhpcy5fdGV4dC5sZW5ndGh8fHRoaXMuX21vdmVDdXJzb3JVcE9yRG93bihcIkRvd25cIix0KX0sbW92ZUN1cnNvclVwOmZ1bmN0aW9uKHQpezA9PT10aGlzLnNlbGVjdGlvblN0YXJ0JiYwPT09dGhpcy5zZWxlY3Rpb25FbmR8fHRoaXMuX21vdmVDdXJzb3JVcE9yRG93bihcIlVwXCIsdCl9LF9tb3ZlQ3Vyc29yVXBPckRvd246ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzW1wiZ2V0XCIrdCtcIkN1cnNvck9mZnNldFwiXShlLFwicmlnaHRcIj09PXRoaXMuX3NlbGVjdGlvbkRpcmVjdGlvbik7ZS5zaGlmdEtleT90aGlzLm1vdmVDdXJzb3JXaXRoU2hpZnQoaSk6dGhpcy5tb3ZlQ3Vyc29yV2l0aG91dFNoaWZ0KGkpLDAhPT1pJiYodGhpcy5zZXRTZWxlY3Rpb25JbkJvdW5kYXJpZXMoKSx0aGlzLmFib3J0Q3Vyc29yQW5pbWF0aW9uKCksdGhpcy5fY3VycmVudEN1cnNvck9wYWNpdHk9MSx0aGlzLmluaXREZWxheWVkQ3Vyc29yKCksdGhpcy5fZmlyZVNlbGVjdGlvbkNoYW5nZWQoKSx0aGlzLl91cGRhdGVUZXh0YXJlYSgpKX0sbW92ZUN1cnNvcldpdGhTaGlmdDpmdW5jdGlvbih0KXt2YXIgZT1cImxlZnRcIj09PXRoaXMuX3NlbGVjdGlvbkRpcmVjdGlvbj90aGlzLnNlbGVjdGlvblN0YXJ0K3Q6dGhpcy5zZWxlY3Rpb25FbmQrdDtyZXR1cm4gdGhpcy5zZXRTZWxlY3Rpb25TdGFydEVuZFdpdGhTaGlmdCh0aGlzLnNlbGVjdGlvblN0YXJ0LHRoaXMuc2VsZWN0aW9uRW5kLGUpLDAhPT10fSxtb3ZlQ3Vyc29yV2l0aG91dFNoaWZ0OmZ1bmN0aW9uKHQpe3JldHVybiB0PDA/KHRoaXMuc2VsZWN0aW9uU3RhcnQrPXQsdGhpcy5zZWxlY3Rpb25FbmQ9dGhpcy5zZWxlY3Rpb25TdGFydCk6KHRoaXMuc2VsZWN0aW9uRW5kKz10LHRoaXMuc2VsZWN0aW9uU3RhcnQ9dGhpcy5zZWxlY3Rpb25FbmQpLDAhPT10fSxtb3ZlQ3Vyc29yTGVmdDpmdW5jdGlvbih0KXswPT09dGhpcy5zZWxlY3Rpb25TdGFydCYmMD09PXRoaXMuc2VsZWN0aW9uRW5kfHx0aGlzLl9tb3ZlQ3Vyc29yTGVmdE9yUmlnaHQoXCJMZWZ0XCIsdCl9LF9tb3ZlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgcjtpZih0LmFsdEtleSlyPXRoaXNbXCJmaW5kV29yZEJvdW5kYXJ5XCIraV0odGhpc1tlXSk7ZWxzZXtpZighdC5tZXRhS2V5JiYzNSE9PXQua2V5Q29kZSYmMzYhPT10LmtleUNvZGUpcmV0dXJuIHRoaXNbZV0rPVwiTGVmdFwiPT09aT8tMToxLCEwO3I9dGhpc1tcImZpbmRMaW5lQm91bmRhcnlcIitpXSh0aGlzW2VdKX1pZih2b2lkIDAhPT10eXBlb2YgciYmdGhpc1tlXSE9PXIpcmV0dXJuIHRoaXNbZV09ciwhMH0sX21vdmVMZWZ0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX21vdmUodCxlLFwiTGVmdFwiKX0sX21vdmVSaWdodDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9tb3ZlKHQsZSxcIlJpZ2h0XCIpfSxtb3ZlQ3Vyc29yTGVmdFdpdGhvdXRTaGlmdDpmdW5jdGlvbih0KXt2YXIgZT0hMDtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uRGlyZWN0aW9uPVwibGVmdFwiLHRoaXMuc2VsZWN0aW9uRW5kPT09dGhpcy5zZWxlY3Rpb25TdGFydCYmMCE9PXRoaXMuc2VsZWN0aW9uU3RhcnQmJihlPXRoaXMuX21vdmVMZWZ0KHQsXCJzZWxlY3Rpb25TdGFydFwiKSksdGhpcy5zZWxlY3Rpb25FbmQ9dGhpcy5zZWxlY3Rpb25TdGFydCxlfSxtb3ZlQ3Vyc29yTGVmdFdpdGhTaGlmdDpmdW5jdGlvbih0KXtyZXR1cm5cInJpZ2h0XCI9PT10aGlzLl9zZWxlY3Rpb25EaXJlY3Rpb24mJnRoaXMuc2VsZWN0aW9uU3RhcnQhPT10aGlzLnNlbGVjdGlvbkVuZD90aGlzLl9tb3ZlTGVmdCh0LFwic2VsZWN0aW9uRW5kXCIpOjAhPT10aGlzLnNlbGVjdGlvblN0YXJ0Pyh0aGlzLl9zZWxlY3Rpb25EaXJlY3Rpb249XCJsZWZ0XCIsdGhpcy5fbW92ZUxlZnQodCxcInNlbGVjdGlvblN0YXJ0XCIpKTp2b2lkIDB9LG1vdmVDdXJzb3JSaWdodDpmdW5jdGlvbih0KXt0aGlzLnNlbGVjdGlvblN0YXJ0Pj10aGlzLl90ZXh0Lmxlbmd0aCYmdGhpcy5zZWxlY3Rpb25FbmQ+PXRoaXMuX3RleHQubGVuZ3RofHx0aGlzLl9tb3ZlQ3Vyc29yTGVmdE9yUmlnaHQoXCJSaWdodFwiLHQpfSxfbW92ZUN1cnNvckxlZnRPclJpZ2h0OmZ1bmN0aW9uKHQsZSl7dmFyIGk9XCJtb3ZlQ3Vyc29yXCIrdCtcIldpdGhcIjt0aGlzLl9jdXJyZW50Q3Vyc29yT3BhY2l0eT0xLGUuc2hpZnRLZXk/aSs9XCJTaGlmdFwiOmkrPVwib3V0U2hpZnRcIix0aGlzW2ldKGUpJiYodGhpcy5hYm9ydEN1cnNvckFuaW1hdGlvbigpLHRoaXMuaW5pdERlbGF5ZWRDdXJzb3IoKSx0aGlzLl9maXJlU2VsZWN0aW9uQ2hhbmdlZCgpLHRoaXMuX3VwZGF0ZVRleHRhcmVhKCkpfSxtb3ZlQ3Vyc29yUmlnaHRXaXRoU2hpZnQ6ZnVuY3Rpb24odCl7cmV0dXJuXCJsZWZ0XCI9PT10aGlzLl9zZWxlY3Rpb25EaXJlY3Rpb24mJnRoaXMuc2VsZWN0aW9uU3RhcnQhPT10aGlzLnNlbGVjdGlvbkVuZD90aGlzLl9tb3ZlUmlnaHQodCxcInNlbGVjdGlvblN0YXJ0XCIpOnRoaXMuc2VsZWN0aW9uRW5kIT09dGhpcy5fdGV4dC5sZW5ndGg/KHRoaXMuX3NlbGVjdGlvbkRpcmVjdGlvbj1cInJpZ2h0XCIsdGhpcy5fbW92ZVJpZ2h0KHQsXCJzZWxlY3Rpb25FbmRcIikpOnZvaWQgMH0sbW92ZUN1cnNvclJpZ2h0V2l0aG91dFNoaWZ0OmZ1bmN0aW9uKHQpe3ZhciBlPSEwO3JldHVybiB0aGlzLl9zZWxlY3Rpb25EaXJlY3Rpb249XCJyaWdodFwiLHRoaXMuc2VsZWN0aW9uU3RhcnQ9PT10aGlzLnNlbGVjdGlvbkVuZD8oZT10aGlzLl9tb3ZlUmlnaHQodCxcInNlbGVjdGlvblN0YXJ0XCIpLHRoaXMuc2VsZWN0aW9uRW5kPXRoaXMuc2VsZWN0aW9uU3RhcnQpOnRoaXMuc2VsZWN0aW9uU3RhcnQ9dGhpcy5zZWxlY3Rpb25FbmQsZX0scmVtb3ZlQ2hhcnM6ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT10KzEpLHRoaXMucmVtb3ZlU3R5bGVGcm9tVG8odCxlKSx0aGlzLl90ZXh0LnNwbGljZSh0LGUtdCksdGhpcy50ZXh0PXRoaXMuX3RleHQuam9pbihcIlwiKSx0aGlzLnNldChcImRpcnR5XCIsITApLHRoaXMuX3Nob3VsZENsZWFyRGltZW5zaW9uQ2FjaGUoKSYmKHRoaXMuaW5pdERpbWVuc2lvbnMoKSx0aGlzLnNldENvb3JkcygpKSx0aGlzLl9yZW1vdmVFeHRyYW5lb3VzU3R5bGVzKCl9LGluc2VydENoYXJzOmZ1bmN0aW9uKHQsZSxpLHIpe3ZvaWQgMD09PXImJihyPWkpLHI+aSYmdGhpcy5yZW1vdmVTdHlsZUZyb21UbyhpLHIpO3ZhciBuPVMudXRpbC5zdHJpbmcuZ3JhcGhlbWVTcGxpdCh0KTt0aGlzLmluc2VydE5ld1N0eWxlQmxvY2sobixpLGUpLHRoaXMuX3RleHQ9W10uY29uY2F0KHRoaXMuX3RleHQuc2xpY2UoMCxpKSxuLHRoaXMuX3RleHQuc2xpY2UocikpLHRoaXMudGV4dD10aGlzLl90ZXh0LmpvaW4oXCJcIiksdGhpcy5zZXQoXCJkaXJ0eVwiLCEwKSx0aGlzLl9zaG91bGRDbGVhckRpbWVuc2lvbkNhY2hlKCkmJih0aGlzLmluaXREaW1lbnNpb25zKCksdGhpcy5zZXRDb29yZHMoKSksdGhpcy5fcmVtb3ZlRXh0cmFuZW91c1N0eWxlcygpfX0pLGZ1bmN0aW9uKCl7dmFyIHQ9Uy51dGlsLnRvRml4ZWQsZT0vICArL2c7Uy51dGlsLm9iamVjdC5leHRlbmQoUy5UZXh0LnByb3RvdHlwZSx7X3RvU1ZHOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZ2V0U1ZHTGVmdFRvcE9mZnNldHMoKSxlPXRoaXMuX2dldFNWR1RleHRBbmRCZyh0LnRleHRUb3AsdC50ZXh0TGVmdCk7cmV0dXJuIHRoaXMuX3dyYXBTVkdUZXh0QW5kQmcoZSl9LHRvU1ZHOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jcmVhdGVCYXNlU1ZHTWFya3VwKHRoaXMuX3RvU1ZHKCkse3Jldml2ZXI6dCxub1N0eWxlOiEwLHdpdGhTaGFkb3c6ITB9KX0sX2dldFNWR0xlZnRUb3BPZmZzZXRzOmZ1bmN0aW9uKCl7cmV0dXJue3RleHRMZWZ0Oi10aGlzLndpZHRoLzIsdGV4dFRvcDotdGhpcy5oZWlnaHQvMixsaW5lVG9wOnRoaXMuZ2V0SGVpZ2h0T2ZMaW5lKDApfX0sX3dyYXBTVkdUZXh0QW5kQmc6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRTdmdUZXh0RGVjb3JhdGlvbih0aGlzKTtyZXR1cm5bdC50ZXh0QmdSZWN0cy5qb2luKFwiXCIpLCdcXHRcXHQ8dGV4dCB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiICcsdGhpcy5mb250RmFtaWx5Pydmb250LWZhbWlseT1cIicrdGhpcy5mb250RmFtaWx5LnJlcGxhY2UoL1wiL2csXCInXCIpKydcIiAnOlwiXCIsdGhpcy5mb250U2l6ZT8nZm9udC1zaXplPVwiJyt0aGlzLmZvbnRTaXplKydcIiAnOlwiXCIsdGhpcy5mb250U3R5bGU/J2ZvbnQtc3R5bGU9XCInK3RoaXMuZm9udFN0eWxlKydcIiAnOlwiXCIsdGhpcy5mb250V2VpZ2h0Pydmb250LXdlaWdodD1cIicrdGhpcy5mb250V2VpZ2h0KydcIiAnOlwiXCIsZT8ndGV4dC1kZWNvcmF0aW9uPVwiJytlKydcIiAnOlwiXCIsJ3N0eWxlPVwiJyx0aGlzLmdldFN2Z1N0eWxlcyghMCksJ1wiJyx0aGlzLmFkZFBhaW50T3JkZXIoKSxcIiA+XCIsdC50ZXh0U3BhbnMuam9pbihcIlwiKSxcIjwvdGV4dD5cXG5cIl19LF9nZXRTVkdUZXh0QW5kQmc6ZnVuY3Rpb24odCxlKXt2YXIgaSxyPVtdLG49W10scz10O3RoaXMuX3NldFNWR0JnKG4pO2Zvcih2YXIgbz0wLGE9dGhpcy5fdGV4dExpbmVzLmxlbmd0aDtvPGE7bysrKWk9dGhpcy5fZ2V0TGluZUxlZnRPZmZzZXQobyksKHRoaXMudGV4dEJhY2tncm91bmRDb2xvcnx8dGhpcy5zdHlsZUhhcyhcInRleHRCYWNrZ3JvdW5kQ29sb3JcIixvKSkmJnRoaXMuX3NldFNWR1RleHRMaW5lQmcobixvLGUraSxzKSx0aGlzLl9zZXRTVkdUZXh0TGluZVRleHQocixvLGUraSxzKSxzKz10aGlzLmdldEhlaWdodE9mTGluZShvKTtyZXR1cm57dGV4dFNwYW5zOnIsdGV4dEJnUmVjdHM6bn19LF9jcmVhdGVUZXh0Q2hhclNwYW46ZnVuY3Rpb24oaSxyLG4scyl7dmFyIG89aSE9PWkudHJpbSgpfHxpLm1hdGNoKGUpLGE9dGhpcy5nZXRTdmdTcGFuU3R5bGVzKHIsbyksaD1hPydzdHlsZT1cIicrYSsnXCInOlwiXCIsbD1yLmRlbHRhWSxjPVwiXCIsdT1TLk9iamVjdC5OVU1fRlJBQ1RJT05fRElHSVRTO3JldHVybiBsJiYoYz0nIGR5PVwiJyt0KGwsdSkrJ1wiICcpLFsnPHRzcGFuIHg9XCInLHQobix1KSwnXCIgeT1cIicsdChzLHUpLCdcIiAnLGMsaCxcIj5cIixTLnV0aWwuc3RyaW5nLmVzY2FwZVhtbChpKSxcIjwvdHNwYW4+XCJdLmpvaW4oXCJcIil9LF9zZXRTVkdUZXh0TGluZVRleHQ6ZnVuY3Rpb24odCxlLGkscil7dmFyIG4scyxvLGEsaCxsPXRoaXMuZ2V0SGVpZ2h0T2ZMaW5lKGUpLGM9LTEhPT10aGlzLnRleHRBbGlnbi5pbmRleE9mKFwianVzdGlmeVwiKSx1PVwiXCIsZD0wLGY9dGhpcy5fdGV4dExpbmVzW2VdO3IrPWwqKDEtdGhpcy5fZm9udFNpemVGcmFjdGlvbikvdGhpcy5saW5lSGVpZ2h0O2Zvcih2YXIgZz0wLG09Zi5sZW5ndGgtMTtnPD1tO2crKyloPWc9PT1tfHx0aGlzLmNoYXJTcGFjaW5nLHUrPWZbZ10sbz10aGlzLl9fY2hhckJvdW5kc1tlXVtnXSwwPT09ZD8oaSs9by5rZXJuZWRXaWR0aC1vLndpZHRoLGQrPW8ud2lkdGgpOmQrPW8ua2VybmVkV2lkdGgsYyYmIWgmJnRoaXMuX3JlU3BhY2VBbmRUYWIudGVzdChmW2ddKSYmKGg9ITApLGh8fChuPW58fHRoaXMuZ2V0Q29tcGxldGVTdHlsZURlY2xhcmF0aW9uKGUsZykscz10aGlzLmdldENvbXBsZXRlU3R5bGVEZWNsYXJhdGlvbihlLGcrMSksaD10aGlzLl9oYXNTdHlsZUNoYW5nZWRGb3JTdmcobixzKSksaCYmKGE9dGhpcy5fZ2V0U3R5bGVEZWNsYXJhdGlvbihlLGcpfHx7fSx0LnB1c2godGhpcy5fY3JlYXRlVGV4dENoYXJTcGFuKHUsYSxpLHIpKSx1PVwiXCIsbj1zLGkrPWQsZD0wKX0sX3B1c2hUZXh0QmdSZWN0OmZ1bmN0aW9uKGUsaSxyLG4scyxvKXt2YXIgYT1TLk9iamVjdC5OVU1fRlJBQ1RJT05fRElHSVRTO2UucHVzaChcIlxcdFxcdDxyZWN0IFwiLHRoaXMuX2dldEZpbGxBdHRyaWJ1dGVzKGkpLCcgeD1cIicsdChyLGEpLCdcIiB5PVwiJyx0KG4sYSksJ1wiIHdpZHRoPVwiJyx0KHMsYSksJ1wiIGhlaWdodD1cIicsdChvLGEpLCdcIj48L3JlY3Q+XFxuJyl9LF9zZXRTVkdUZXh0TGluZUJnOmZ1bmN0aW9uKHQsZSxpLHIpe2Zvcih2YXIgbixzLG89dGhpcy5fdGV4dExpbmVzW2VdLGE9dGhpcy5nZXRIZWlnaHRPZkxpbmUoZSkvdGhpcy5saW5lSGVpZ2h0LGg9MCxsPTAsYz10aGlzLmdldFZhbHVlT2ZQcm9wZXJ0eUF0KGUsMCxcInRleHRCYWNrZ3JvdW5kQ29sb3JcIiksdT0wLGQ9by5sZW5ndGg7dTxkO3UrKyluPXRoaXMuX19jaGFyQm91bmRzW2VdW3VdLChzPXRoaXMuZ2V0VmFsdWVPZlByb3BlcnR5QXQoZSx1LFwidGV4dEJhY2tncm91bmRDb2xvclwiKSkhPT1jPyhjJiZ0aGlzLl9wdXNoVGV4dEJnUmVjdCh0LGMsaStsLHIsaCxhKSxsPW4ubGVmdCxoPW4ud2lkdGgsYz1zKTpoKz1uLmtlcm5lZFdpZHRoO3MmJnRoaXMuX3B1c2hUZXh0QmdSZWN0KHQscyxpK2wscixoLGEpfSxfZ2V0RmlsbEF0dHJpYnV0ZXM6ZnVuY3Rpb24odCl7dmFyIGU9dCYmXCJzdHJpbmdcIj09dHlwZW9mIHQ/bmV3IFMuQ29sb3IodCk6XCJcIjtyZXR1cm4gZSYmZS5nZXRTb3VyY2UoKSYmMSE9PWUuZ2V0QWxwaGEoKT8nb3BhY2l0eT1cIicrZS5nZXRBbHBoYSgpKydcIiBmaWxsPVwiJytlLnNldEFscGhhKDEpLnRvUmdiKCkrJ1wiJzonZmlsbD1cIicrdCsnXCInfSxfZ2V0U1ZHTGluZVRvcE9mZnNldDpmdW5jdGlvbih0KXtmb3IodmFyIGUsaT0wLHI9MDtyPHQ7cisrKWkrPXRoaXMuZ2V0SGVpZ2h0T2ZMaW5lKHIpO3JldHVybiBlPXRoaXMuZ2V0SGVpZ2h0T2ZMaW5lKHIpLHtsaW5lVG9wOmksb2Zmc2V0Oih0aGlzLl9mb250U2l6ZU11bHQtdGhpcy5fZm9udFNpemVGcmFjdGlvbikqZS8odGhpcy5saW5lSGVpZ2h0KnRoaXMuX2ZvbnRTaXplTXVsdCl9fSxnZXRTdmdTdHlsZXM6ZnVuY3Rpb24odCl7cmV0dXJuIFMuT2JqZWN0LnByb3RvdHlwZS5nZXRTdmdTdHlsZXMuY2FsbCh0aGlzLHQpK1wiIHdoaXRlLXNwYWNlOiBwcmU7XCJ9fSl9KCksZnVuY3Rpb24odCl7dmFyIGU9dC5mYWJyaWN8fCh0LmZhYnJpYz17fSk7ZS5UZXh0Ym94PWUudXRpbC5jcmVhdGVDbGFzcyhlLklUZXh0LGUuT2JzZXJ2YWJsZSx7dHlwZTpcInRleHRib3hcIixtaW5XaWR0aDoyMCxkeW5hbWljTWluV2lkdGg6MixfX2NhY2hlZExpbmVzOm51bGwsbG9ja1NjYWxpbmdGbGlwOiEwLG5vU2NhbGVDYWNoZTohMSxfZGltZW5zaW9uQWZmZWN0aW5nUHJvcHM6ZS5UZXh0LnByb3RvdHlwZS5fZGltZW5zaW9uQWZmZWN0aW5nUHJvcHMuY29uY2F0KFwid2lkdGhcIiksX3dvcmRKb2luZXJzOi9bIFxcdFxccl0vLHNwbGl0QnlHcmFwaGVtZTohMSxpbml0RGltZW5zaW9uczpmdW5jdGlvbigpe3RoaXMuX19za2lwRGltZW5zaW9ufHwodGhpcy5pc0VkaXRpbmcmJnRoaXMuaW5pdERlbGF5ZWRDdXJzb3IoKSx0aGlzLmNsZWFyQ29udGV4dFRvcCgpLHRoaXMuX2NsZWFyQ2FjaGUoKSx0aGlzLmR5bmFtaWNNaW5XaWR0aD0wLHRoaXMuX3N0eWxlTWFwPXRoaXMuX2dlbmVyYXRlU3R5bGVNYXAodGhpcy5fc3BsaXRUZXh0KCkpLHRoaXMuZHluYW1pY01pbldpZHRoPnRoaXMud2lkdGgmJnRoaXMuX3NldChcIndpZHRoXCIsdGhpcy5keW5hbWljTWluV2lkdGgpLC0xIT09dGhpcy50ZXh0QWxpZ24uaW5kZXhPZihcImp1c3RpZnlcIikmJnRoaXMuZW5sYXJnZVNwYWNlcygpLHRoaXMuaGVpZ2h0PXRoaXMuY2FsY1RleHRIZWlnaHQoKSx0aGlzLnNhdmVTdGF0ZSh7cHJvcGVydHlTZXQ6XCJfZGltZW5zaW9uQWZmZWN0aW5nUHJvcHNcIn0pKX0sX2dlbmVyYXRlU3R5bGVNYXA6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsaT0wLHI9MCxuPXt9LHM9MDtzPHQuZ3JhcGhlbWVMaW5lcy5sZW5ndGg7cysrKVwiXFxuXCI9PT10LmdyYXBoZW1lVGV4dFtyXSYmcz4wPyhpPTAscisrLGUrKyk6IXRoaXMuc3BsaXRCeUdyYXBoZW1lJiZ0aGlzLl9yZVNwYWNlQW5kVGFiLnRlc3QodC5ncmFwaGVtZVRleHRbcl0pJiZzPjAmJihpKysscisrKSxuW3NdPXtsaW5lOmUsb2Zmc2V0Oml9LHIrPXQuZ3JhcGhlbWVMaW5lc1tzXS5sZW5ndGgsaSs9dC5ncmFwaGVtZUxpbmVzW3NdLmxlbmd0aDtyZXR1cm4gbn0sc3R5bGVIYXM6ZnVuY3Rpb24odCxpKXtpZih0aGlzLl9zdHlsZU1hcCYmIXRoaXMuaXNXcmFwcGluZyl7dmFyIHI9dGhpcy5fc3R5bGVNYXBbaV07ciYmKGk9ci5saW5lKX1yZXR1cm4gZS5UZXh0LnByb3RvdHlwZS5zdHlsZUhhcy5jYWxsKHRoaXMsdCxpKX0saXNFbXB0eVN0eWxlczpmdW5jdGlvbih0KXtpZighdGhpcy5zdHlsZXMpcmV0dXJuITA7dmFyIGUsaSxyPTAsbj0hMSxzPXRoaXMuX3N0eWxlTWFwW3RdLG89dGhpcy5fc3R5bGVNYXBbdCsxXTtmb3IodmFyIGEgaW4gcyYmKHQ9cy5saW5lLHI9cy5vZmZzZXQpLG8mJihuPW8ubGluZT09PXQsZT1vLm9mZnNldCksaT12b2lkIDA9PT10P3RoaXMuc3R5bGVzOntsaW5lOnRoaXMuc3R5bGVzW3RdfSlmb3IodmFyIGggaW4gaVthXSlpZihoPj1yJiYoIW58fGg8ZSkpZm9yKHZhciBsIGluIGlbYV1baF0pcmV0dXJuITE7cmV0dXJuITB9LF9nZXRTdHlsZURlY2xhcmF0aW9uOmZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fc3R5bGVNYXAmJiF0aGlzLmlzV3JhcHBpbmcpe3ZhciBpPXRoaXMuX3N0eWxlTWFwW3RdO2lmKCFpKXJldHVybiBudWxsO3Q9aS5saW5lLGU9aS5vZmZzZXQrZX1yZXR1cm4gdGhpcy5jYWxsU3VwZXIoXCJfZ2V0U3R5bGVEZWNsYXJhdGlvblwiLHQsZSl9LF9zZXRTdHlsZURlY2xhcmF0aW9uOmZ1bmN0aW9uKHQsZSxpKXt2YXIgcj10aGlzLl9zdHlsZU1hcFt0XTt0PXIubGluZSxlPXIub2Zmc2V0K2UsdGhpcy5zdHlsZXNbdF1bZV09aX0sX2RlbGV0ZVN0eWxlRGVjbGFyYXRpb246ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9zdHlsZU1hcFt0XTt0PWkubGluZSxlPWkub2Zmc2V0K2UsZGVsZXRlIHRoaXMuc3R5bGVzW3RdW2VdfSxfZ2V0TGluZVN0eWxlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3N0eWxlTWFwW3RdO3JldHVybiEhdGhpcy5zdHlsZXNbZS5saW5lXX0sX3NldExpbmVTdHlsZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9zdHlsZU1hcFt0XTt0aGlzLnN0eWxlc1tlLmxpbmVdPXt9fSxfd3JhcFRleHQ6ZnVuY3Rpb24odCxlKXt2YXIgaSxyPVtdO2Zvcih0aGlzLmlzV3JhcHBpbmc9ITAsaT0wO2k8dC5sZW5ndGg7aSsrKXI9ci5jb25jYXQodGhpcy5fd3JhcExpbmUodFtpXSxpLGUpKTtyZXR1cm4gdGhpcy5pc1dyYXBwaW5nPSExLHJ9LF9tZWFzdXJlV29yZDpmdW5jdGlvbih0LGUsaSl7dmFyIHIsbj0wO2k9aXx8MDtmb3IodmFyIHM9MCxvPXQubGVuZ3RoO3M8bztzKyspbis9dGhpcy5fZ2V0R3JhcGhlbWVCb3godFtzXSxlLHMraSxyLCEwKS5rZXJuZWRXaWR0aCxyPXRbc107cmV0dXJuIG59LF93cmFwTGluZTpmdW5jdGlvbih0LGkscixuKXt2YXIgcz0wLG89dGhpcy5zcGxpdEJ5R3JhcGhlbWUsYT1bXSxoPVtdLGw9bz9lLnV0aWwuc3RyaW5nLmdyYXBoZW1lU3BsaXQodCk6dC5zcGxpdCh0aGlzLl93b3JkSm9pbmVycyksYz1cIlwiLHU9MCxkPW8/XCJcIjpcIiBcIixmPTAsZz0wLG09MCxwPSEwLHY9dGhpcy5fZ2V0V2lkdGhPZkNoYXJTcGFjaW5nKCk7bj1ufHwwLDA9PT1sLmxlbmd0aCYmbC5wdXNoKFtdKSxyLT1uO2Zvcih2YXIgXz0wO188bC5sZW5ndGg7XysrKWM9bz9sW19dOmUudXRpbC5zdHJpbmcuZ3JhcGhlbWVTcGxpdChsW19dKSxmPXRoaXMuX21lYXN1cmVXb3JkKGMsaSx1KSx1Kz1jLmxlbmd0aCwocys9ZytmLXYpPnImJiFwPyhhLnB1c2goaCksaD1bXSxzPWYscD0hMCk6cys9dixwfHxvfHxoLnB1c2goZCksaD1oLmNvbmNhdChjKSxnPW8/MDp0aGlzLl9tZWFzdXJlV29yZChbZF0saSx1KSx1KysscD0hMSxmPm0mJihtPWYpO3JldHVybiBfJiZhLnB1c2goaCksbStuPnRoaXMuZHluYW1pY01pbldpZHRoJiYodGhpcy5keW5hbWljTWluV2lkdGg9bS12K24pLGF9LGlzRW5kT2ZXcmFwcGluZzpmdW5jdGlvbih0KXtyZXR1cm4hdGhpcy5fc3R5bGVNYXBbdCsxXXx8dGhpcy5fc3R5bGVNYXBbdCsxXS5saW5lIT09dGhpcy5fc3R5bGVNYXBbdF0ubGluZX0sbWlzc2luZ05ld2xpbmVPZmZzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc3BsaXRCeUdyYXBoZW1lP3RoaXMuaXNFbmRPZldyYXBwaW5nKHQpPzE6MDoxfSxfc3BsaXRUZXh0SW50b0xpbmVzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgaT1lLlRleHQucHJvdG90eXBlLl9zcGxpdFRleHRJbnRvTGluZXMuY2FsbCh0aGlzLHQpLHI9dGhpcy5fd3JhcFRleHQoaS5saW5lcyx0aGlzLndpZHRoKSxuPW5ldyBBcnJheShyLmxlbmd0aCkscz0wO3M8ci5sZW5ndGg7cysrKW5bc109cltzXS5qb2luKFwiXCIpO3JldHVybiBpLmxpbmVzPW4saS5ncmFwaGVtZUxpbmVzPXIsaX0sZ2V0TWluV2lkdGg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXgodGhpcy5taW5XaWR0aCx0aGlzLmR5bmFtaWNNaW5XaWR0aCl9LF9yZW1vdmVFeHRyYW5lb3VzU3R5bGVzOmZ1bmN0aW9uKCl7dmFyIHQ9e307Zm9yKHZhciBlIGluIHRoaXMuX3N0eWxlTWFwKXRoaXMuX3RleHRMaW5lc1tlXSYmKHRbdGhpcy5fc3R5bGVNYXBbZV0ubGluZV09MSk7Zm9yKHZhciBlIGluIHRoaXMuc3R5bGVzKXRbZV18fGRlbGV0ZSB0aGlzLnN0eWxlc1tlXX0sdG9PYmplY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2FsbFN1cGVyKFwidG9PYmplY3RcIixbXCJtaW5XaWR0aFwiLFwic3BsaXRCeUdyYXBoZW1lXCJdLmNvbmNhdCh0KSl9fSksZS5UZXh0Ym94LmZyb21PYmplY3Q9ZnVuY3Rpb24odCxpKXtyZXR1cm4gZS5PYmplY3QuX2Zyb21PYmplY3QoXCJUZXh0Ym94XCIsdCxpLFwidGV4dFwiKX19KGUpLGZ1bmN0aW9uKCl7dmFyIHQ9Uy5jb250cm9sc1V0aWxzLGU9dC5zY2FsZVNrZXdDdXJzb3JTdHlsZUhhbmRsZXIsaT10LnNjYWxlQ3Vyc29yU3R5bGVIYW5kbGVyLHI9dC5zY2FsaW5nRXF1YWxseSxuPXQuc2NhbGluZ1lPclNrZXdpbmdYLHM9dC5zY2FsaW5nWE9yU2tld2luZ1ksbz10LnNjYWxlT3JTa2V3QWN0aW9uTmFtZSxhPVMuT2JqZWN0LnByb3RvdHlwZS5jb250cm9scztpZihhLm1sPW5ldyBTLkNvbnRyb2woe3g6LS41LHk6MCxjdXJzb3JTdHlsZUhhbmRsZXI6ZSxhY3Rpb25IYW5kbGVyOnMsZ2V0QWN0aW9uTmFtZTpvfSksYS5tcj1uZXcgUy5Db250cm9sKHt4Oi41LHk6MCxjdXJzb3JTdHlsZUhhbmRsZXI6ZSxhY3Rpb25IYW5kbGVyOnMsZ2V0QWN0aW9uTmFtZTpvfSksYS5tYj1uZXcgUy5Db250cm9sKHt4OjAseTouNSxjdXJzb3JTdHlsZUhhbmRsZXI6ZSxhY3Rpb25IYW5kbGVyOm4sZ2V0QWN0aW9uTmFtZTpvfSksYS5tdD1uZXcgUy5Db250cm9sKHt4OjAseTotLjUsY3Vyc29yU3R5bGVIYW5kbGVyOmUsYWN0aW9uSGFuZGxlcjpuLGdldEFjdGlvbk5hbWU6b30pLGEudGw9bmV3IFMuQ29udHJvbCh7eDotLjUseTotLjUsY3Vyc29yU3R5bGVIYW5kbGVyOmksYWN0aW9uSGFuZGxlcjpyfSksYS50cj1uZXcgUy5Db250cm9sKHt4Oi41LHk6LS41LGN1cnNvclN0eWxlSGFuZGxlcjppLGFjdGlvbkhhbmRsZXI6cn0pLGEuYmw9bmV3IFMuQ29udHJvbCh7eDotLjUseTouNSxjdXJzb3JTdHlsZUhhbmRsZXI6aSxhY3Rpb25IYW5kbGVyOnJ9KSxhLmJyPW5ldyBTLkNvbnRyb2woe3g6LjUseTouNSxjdXJzb3JTdHlsZUhhbmRsZXI6aSxhY3Rpb25IYW5kbGVyOnJ9KSxhLm10cj1uZXcgUy5Db250cm9sKHt4OjAseTotLjUsYWN0aW9uSGFuZGxlcjp0LnJvdGF0aW9uV2l0aFNuYXBwaW5nLGN1cnNvclN0eWxlSGFuZGxlcjp0LnJvdGF0aW9uU3R5bGVIYW5kbGVyLG9mZnNldFk6LTQwLHdpdGhDb25uZWN0aW9uOiEwLGFjdGlvbk5hbWU6XCJyb3RhdGVcIn0pLFMuVGV4dGJveCl7dmFyIGg9Uy5UZXh0Ym94LnByb3RvdHlwZS5jb250cm9scz17fTtoLm10cj1hLm10cixoLnRyPWEudHIsaC5icj1hLmJyLGgudGw9YS50bCxoLmJsPWEuYmwsaC5tdD1hLm10LGgubWI9YS5tYixoLm1yPW5ldyBTLkNvbnRyb2woe3g6LjUseTowLGFjdGlvbkhhbmRsZXI6dC5jaGFuZ2VXaWR0aCxjdXJzb3JTdHlsZUhhbmRsZXI6ZSxhY3Rpb25OYW1lOlwicmVzaXppbmdcIn0pLGgubWw9bmV3IFMuQ29udHJvbCh7eDotLjUseTowLGFjdGlvbkhhbmRsZXI6dC5jaGFuZ2VXaWR0aCxjdXJzb3JTdHlsZUhhbmRsZXI6ZSxhY3Rpb25OYW1lOlwicmVzaXppbmdcIn0pfX0oKX0sMTkyOigpPT57fSw4OTg6KCk9Pnt9LDI0NTooKT0+e319LFA9e307ZnVuY3Rpb24gayh0KXt2YXIgZT1QW3RdO2lmKHZvaWQgMCE9PWUpcmV0dXJuIGUuZXhwb3J0czt2YXIgaT1QW3RdPXtleHBvcnRzOnt9fTtyZXR1cm4gRlt0XShpLGkuZXhwb3J0cyxrKSxpLmV4cG9ydHN9ay5kPSh0LGUpPT57Zm9yKHZhciBpIGluIGUpay5vKGUsaSkmJiFrLm8odCxpKSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsaSx7ZW51bWVyYWJsZTohMCxnZXQ6ZVtpXX0pfSxrLm89KHQsZSk9Pk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpO3ZhciBSPXt9OygoKT0+e2xldCB0O2suZChSLHtSOigpPT50fSksdD1cInVuZGVmaW5lZFwiIT10eXBlb2YgZG9jdW1lbnQmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/ayg2NTMpLmZhYnJpYzp7dmVyc2lvbjpcIjUuMi4xXCJ9fSkoKTt2YXIgQixqLFcsVSxWPVIuUjshZnVuY3Rpb24odCl7dFt0LkRJTVRfUkVDVEFOR0xFPTFdPVwiRElNVF9SRUNUQU5HTEVcIix0W3QuRElNVF9RVUFEUklMQVRFUkFMPTJdPVwiRElNVF9RVUFEUklMQVRFUkFMXCIsdFt0LkRJTVRfVEVYVD00XT1cIkRJTVRfVEVYVFwiLHRbdC5ESU1UX0FSQz04XT1cIkRJTVRfQVJDXCIsdFt0LkRJTVRfSU1BR0U9MTZdPVwiRElNVF9JTUFHRVwiLHRbdC5ESU1UX1BPTFlHT049MzJdPVwiRElNVF9QT0xZR09OXCIsdFt0LkRJTVRfTElORT02NF09XCJESU1UX0xJTkVcIix0W3QuRElNVF9HUk9VUD0xMjhdPVwiRElNVF9HUk9VUFwifShCfHwoQj17fSkpLGZ1bmN0aW9uKHQpe3RbdC5ESVNfREVGQVVMVD0xXT1cIkRJU19ERUZBVUxUXCIsdFt0LkRJU19TRUxFQ1RFRD0yXT1cIkRJU19TRUxFQ1RFRFwifShqfHwoaj17fSkpLGZ1bmN0aW9uKHQpe3RbdC5FRl9FTkhBTkNFRF9GT0NVUz00XT1cIkVGX0VOSEFOQ0VEX0ZPQ1VTXCIsdFt0LkVGX0FVVE9fWk9PTT0xNl09XCJFRl9BVVRPX1pPT01cIix0W3QuRUZfVEFQX1RPX0ZPQ1VTPTY0XT1cIkVGX1RBUF9UT19GT0NVU1wifShXfHwoVz17fSkpLGZ1bmN0aW9uKHQpe3QuR1JFWT1cImdyZXlcIix0LkdSRVkzMj1cImdyZXkzMlwiLHQuUkdCQT1cInJnYmFcIix0LlJCR0E9XCJyYmdhXCIsdC5HUkJBPVwiZ3JiYVwiLHQuR0JSQT1cImdicmFcIix0LkJSR0E9XCJicmdhXCIsdC5CR1JBPVwiYmdyYVwifShVfHwoVT17fSkpO2NvbnN0IEc9dD0+XCJudW1iZXJcIj09dHlwZW9mIHQmJiFOdW1iZXIuaXNOYU4odCksTj10PT5cInN0cmluZ1wiPT10eXBlb2YgdDt2YXIgWSxILFgseixxLEs7IWZ1bmN0aW9uKHQpe3RbdC5BUkM9MF09XCJBUkNcIix0W3QuSU1BR0U9MV09XCJJTUFHRVwiLHRbdC5MSU5FPTJdPVwiTElORVwiLHRbdC5QT0xZR09OPTNdPVwiUE9MWUdPTlwiLHRbdC5RVUFEPTRdPVwiUVVBRFwiLHRbdC5SRUNUPTVdPVwiUkVDVFwiLHRbdC5URVhUPTZdPVwiVEVYVFwiLHRbdC5HUk9VUD03XT1cIkdST1VQXCJ9KHF8fChxPXt9KSksZnVuY3Rpb24odCl7dFt0LkRFRkFVTFQ9MF09XCJERUZBVUxUXCIsdFt0LlNFTEVDVEVEPTFdPVwiU0VMRUNURURcIn0oS3x8KEs9e30pKTtjbGFzcyBae2dldCBtZWRpYVR5cGUoKXtyZXR1cm4gbmV3IE1hcChbW1wicmVjdFwiLEIuRElNVF9SRUNUQU5HTEVdLFtcInF1YWRcIixCLkRJTVRfUVVBRFJJTEFURVJBTF0sW1widGV4dFwiLEIuRElNVF9URVhUXSxbXCJhcmNcIixCLkRJTVRfQVJDXSxbXCJpbWFnZVwiLEIuRElNVF9JTUFHRV0sW1wicG9seWdvblwiLEIuRElNVF9QT0xZR09OXSxbXCJsaW5lXCIsQi5ESU1UX0xJTkVdLFtcImdyb3VwXCIsQi5ESU1UX0dST1VQXV0pLmdldCh0aGlzLl9tZWRpYVR5cGUpfWdldCBzdHlsZVNlbGVjdG9yKCl7c3dpdGNoKHgodGhpcyxILFwiZlwiKSl7Y2FzZSBqLkRJU19ERUZBVUxUOnJldHVyblwiZGVmYXVsdFwiO2Nhc2Ugai5ESVNfU0VMRUNURUQ6cmV0dXJuXCJzZWxlY3RlZFwifX1zZXQgZHJhd2luZ1N0eWxlSWQodCl7dGhpcy5zdHlsZUlkPXR9Z2V0IGRyYXdpbmdTdHlsZUlkKCl7cmV0dXJuIHRoaXMuc3R5bGVJZH1zZXQgY29vcmRpbmF0ZUJhc2UodCl7aWYoIVtcInZpZXdcIixcImltYWdlXCJdLmluY2x1ZGVzKHQpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ2Nvb3JkaW5hdGVCYXNlJy5cIik7dGhpcy5fZHJhd2luZ0xheWVyJiYoXCJpbWFnZVwiPT09eCh0aGlzLFgsXCJmXCIpJiZcInZpZXdcIj09PXQ/dGhpcy51cGRhdGVDb29yZGluYXRlQmFzZUZyb21JbWFnZVRvVmlldygpOlwidmlld1wiPT09eCh0aGlzLFgsXCJmXCIpJiZcImltYWdlXCI9PT10JiZ0aGlzLnVwZGF0ZUNvb3JkaW5hdGVCYXNlRnJvbVZpZXdUb0ltYWdlKCkpLEModGhpcyxYLHQsXCJmXCIpfWdldCBjb29yZGluYXRlQmFzZSgpe3JldHVybiB4KHRoaXMsWCxcImZcIil9Z2V0IGRyYXdpbmdMYXllcklkKCl7cmV0dXJuIHRoaXMuX2RyYXdpbmdMYXllcklkfWNvbnN0cnVjdG9yKHQsZSl7aWYoWS5hZGQodGhpcyksSC5zZXQodGhpcyx2b2lkIDApLFguc2V0KHRoaXMsXCJpbWFnZVwiKSx0aGlzLl96SW5kZXg9bnVsbCx0aGlzLl9kcmF3aW5nTGF5ZXI9bnVsbCx0aGlzLl9kcmF3aW5nTGF5ZXJJZD1udWxsLHRoaXMuX21hcFN0YXRlX1N0eWxlSWQ9bmV3IE1hcCx0aGlzLm1hcEV2ZW50X0NhbGxiYWNrcz1uZXcgTWFwKFtbXCJzZWxlY3RlZFwiLG5ldyBNYXBdLFtcImRlc2VsZWN0ZWRcIixuZXcgTWFwXSxbXCJtb3VzZWRvd25cIixuZXcgTWFwXSxbXCJtb3VzZXVwXCIsbmV3IE1hcF0sW1wiZGJsY2xpY2tcIixuZXcgTWFwXSxbXCJtb3VzZW92ZXJcIixuZXcgTWFwXSxbXCJtb3VzZW91dFwiLG5ldyBNYXBdXSksdGhpcy5tYXBOb3RlTmFtZV9Db250ZW50PW5ldyBNYXAoW10pLHRoaXMuaXNEcmF3aW5nSXRlbT0hMCxudWxsIT1lJiYhRyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAnZHJhd2luZ1N0eWxlSWQnLlwiKTt0JiZ0aGlzLl9zZXRGYWJyaWNPYmplY3QodCksdGhpcy5zZXRTdGF0ZShqLkRJU19ERUZBVUxUKSx0aGlzLnN0eWxlSWQ9ZX1fc2V0RmFicmljT2JqZWN0KHQpe3RoaXMuX2ZhYnJpY09iamVjdD10LHRoaXMuX2ZhYnJpY09iamVjdC5vbihcInNlbGVjdGVkXCIsKCgpPT57dGhpcy5zZXRTdGF0ZShqLkRJU19TRUxFQ1RFRCl9KSksdGhpcy5fZmFicmljT2JqZWN0Lm9uKFwiZGVzZWxlY3RlZFwiLCgoKT0+e3RoaXMuX2ZhYnJpY09iamVjdC5jYW52YXMmJnRoaXMuX2ZhYnJpY09iamVjdC5jYW52YXMuZ2V0QWN0aXZlT2JqZWN0cygpLmluY2x1ZGVzKHRoaXMuX2ZhYnJpY09iamVjdCk/dGhpcy5zZXRTdGF0ZShqLkRJU19TRUxFQ1RFRCk6dGhpcy5zZXRTdGF0ZShqLkRJU19ERUZBVUxUKSxcInRleHRib3hcIj09PXRoaXMuX2ZhYnJpY09iamVjdC50eXBlJiYodGhpcy5fZmFicmljT2JqZWN0LmlzRWRpdGluZyYmdGhpcy5fZmFicmljT2JqZWN0LmV4aXRFZGl0aW5nKCksdGhpcy5fZmFicmljT2JqZWN0LnNlbGVjdGVkPSExKX0pKSx0LmdldERyYXdpbmdJdGVtPSgpPT50aGlzfV9nZXRGYWJyaWNPYmplY3QoKXtyZXR1cm4gdGhpcy5fZmFicmljT2JqZWN0fXNldFN0YXRlKHQpe0ModGhpcyxILHQsXCJmXCIpfWdldFN0YXRlKCl7cmV0dXJuIHgodGhpcyxILFwiZlwiKX1fb24odCxlKXtpZighZSlyZXR1cm47Y29uc3QgaT10LnRvTG93ZXJDYXNlKCkscj10aGlzLm1hcEV2ZW50X0NhbGxiYWNrcy5nZXQoaSk7aWYoIXIpdGhyb3cgbmV3IEVycm9yKGBFdmVudCAnJHt0fScgZG9lcyBub3QgZXhpc3QuYCk7bGV0IG49ci5nZXQoZSk7bnx8KG49dD0+e2NvbnN0IGk9dC5lO2lmKCFpKXJldHVybiB2b2lkKGUmJmUuYXBwbHkodGhpcyxbe3RhcmdldEl0ZW06dGhpcyxpdGVtQ2xpZW50WDpudWxsLGl0ZW1DbGllbnRZOm51bGwsaXRlbVBhZ2VYOm51bGwsaXRlbVBhZ2VZOm51bGx9XSkpO2NvbnN0IHI9e3RhcmdldEl0ZW06dGhpcyxpdGVtQ2xpZW50WDpudWxsLGl0ZW1DbGllbnRZOm51bGwsaXRlbVBhZ2VYOm51bGwsaXRlbVBhZ2VZOm51bGx9O2lmKHRoaXMuX2RyYXdpbmdMYXllcil7bGV0IHQsZSxuLHM7Y29uc3Qgbz1pLnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt0PW8ubGVmdCxlPW8udG9wLG49dCt3aW5kb3cuc2Nyb2xsWCxzPWUrd2luZG93LnNjcm9sbFk7Y29uc3R7d2lkdGg6YSxoZWlnaHQ6aH09dGhpcy5fZHJhd2luZ0xheWVyLmZhYnJpY0NhbnZhcy5sb3dlckNhbnZhc0VsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGw9dGhpcy5fZHJhd2luZ0xheWVyLndpZHRoLGM9dGhpcy5fZHJhd2luZ0xheWVyLmhlaWdodCx1PWEvaCxkPWwvYyxmPXRoaXMuX2RyYXdpbmdMYXllci5fZ2V0T2JqZWN0Rml0KCk7bGV0IGcsbSxwLHYsXz0xO2lmKFwiY29udGFpblwiPT09Zil1PGQ/KF89YS9sLGc9dCt0aGlzLmdldChcInhcIikqXyxtPWUrdGhpcy5nZXQoXCJ5XCIpKl8rKGgtYypfKS8yLHA9bit0aGlzLmdldChcInhcIikqXyx2PXMrdGhpcy5nZXQoXCJ5XCIpKl8rKGgtYypfKS8yKTooXz1oL2MsZz10K3RoaXMuZ2V0KFwieFwiKSpfKyhhLWwqXykvMixtPWUrdGhpcy5nZXQoXCJ5XCIpKl8scD1uK3RoaXMuZ2V0KFwieFwiKSpfKyhhLWwqXykvMix2PXMrdGhpcy5nZXQoXCJ5XCIpKl8pO2Vsc2UgaWYoXCJjb3ZlclwiPT09ZilpZih1PGQpe189aC9jO2xldCBpPXRoaXMuZ2V0KFwieFwiKSpfLShsKl8tYSkvMjtpPU1hdGgubWF4KGksMCksaT1NYXRoLm1pbihpLGEpLGc9dCtpLG09ZSt0aGlzLmdldChcInlcIikqXyxwPW4raSx2PXMrdGhpcy5nZXQoXCJ5XCIpKl99ZWxzZXtfPWEvbDtsZXQgaT10aGlzLmdldChcInlcIikqXy0oYypfLWgpLzI7aT1NYXRoLm1heChpLDApLGk9TWF0aC5taW4oaSxoKSxnPXQrdGhpcy5nZXQoXCJ4XCIpKl8sbT1lK2kscD1uK3RoaXMuZ2V0KFwieFwiKSpfLHY9cytpfXIuaXRlbUNsaWVudFg9TWF0aC5yb3VuZChnKSxyLml0ZW1DbGllbnRZPU1hdGgucm91bmQobSksci5pdGVtUGFnZVg9TWF0aC5yb3VuZChwKSxyLml0ZW1QYWdlWT1NYXRoLnJvdW5kKHYpfWZvcihsZXQgdCBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhyKSlPYmplY3QuZGVmaW5lUHJvcGVydHkoaSx0LHt2YWx1ZTpyW3RdLHdyaXRhYmxlOiEwfSk7ZSYmZS5hcHBseSh0aGlzLFtpXSl9LHIuc2V0KGUsbiksdGhpcy5fZmFicmljT2JqZWN0Lm9uKFwiZGJsY2xpY2tcIj09PWk/XCJtb3VzZWRibGNsaWNrXCI6aSxuKSl9b24odCxlKXt0aGlzLl9vbih0LGUpfV9vZmYodCxlKXtjb25zdCBpPXQudG9Mb3dlckNhc2UoKSxyPXRoaXMubWFwRXZlbnRfQ2FsbGJhY2tzLmdldChpKTtpZighcil0aHJvdyBuZXcgRXJyb3IoYEV2ZW50ICcke3R9JyBkb2VzIG5vdCBleGlzdC5gKTtsZXQgbj1yLmdldChlKTtuJiYoci5kZWxldGUoZSksdGhpcy5fZmFicmljT2JqZWN0Lm9mZihcImRibGNsaWNrXCI9PT1pP1wibW91c2VkYmxjbGlja1wiOmksbikpfW9mZih0LGUpe3RoaXMuX29mZih0LGUpfV9zZXRFZGl0YWJsZSh0KXtjb25zdCBlPXRoaXMuX2ZhYnJpY09iamVjdDt0PyhlLnNlbGVjdGFibGU9ITAsZS5oYXNDb250cm9scz0hMCxlLmhvdmVyQ3Vyc29yPW51bGwpOihlLnNlbGVjdGFibGU9ITEsZS5oYXNDb250cm9scz0hMSxlLmhvdmVyQ3Vyc29yPVwiZGVmYXVsdFwiKX1oYXNOb3RlKHQpe3JldHVybiB0aGlzLm1hcE5vdGVOYW1lX0NvbnRlbnQuaGFzKHQpfWFkZE5vdGUodCxlKXtpZih0aGlzLmhhc05vdGUodC5uYW1lKSYmIWUpdGhyb3cgbmV3IEVycm9yKFwiQSBub3RlIHdpdGggdGhlIHNhbWUgbmFtZSBhbHJlYWR5IGV4aXN0cywgcGxlYXNlIHVzZSBhIGRpZmZlcmVudCBuYW1lLlwiKTtjb25zdCBpPXQuY29udGVudD9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQuY29udGVudCkpOnQuY29udGVudDt0aGlzLm1hcE5vdGVOYW1lX0NvbnRlbnQuc2V0KHQubmFtZSxbaV0pfWdldE5vdGUodCl7Y29uc3QgZT10aGlzLm1hcE5vdGVOYW1lX0NvbnRlbnQuZ2V0KHQpO3JldHVybiBlPzE9PT1lLmxlbmd0aD97bmFtZTp0LGNvbnRlbnQ6ZVswXT9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGVbMF0pKTplWzBdfTp7bmFtZTp0LGNvbnRlbnQ6SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSl9Om51bGx9Z2V0Tm90ZXMoKXtjb25zdCB0PVtdO2ZvcihsZXQgZSBvZiB0aGlzLm1hcE5vdGVOYW1lX0NvbnRlbnQpe2xldCBpPTE9PT1lWzFdLmxlbmd0aD9lWzFdWzBdOmVbMV07aT1pP0pTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaSkpOmksdC5wdXNoKHtuYW1lOmVbMF0sY29udGVudDppfSl9cmV0dXJuIHR9dXBkYXRlTm90ZSh0LGUsaSl7Y29uc3Qgcj10aGlzLm1hcE5vdGVOYW1lX0NvbnRlbnQuZ2V0KHQpO2lmKCFyKXRocm93IG5ldyBFcnJvcihcIlRoZSBub3RlIG5hbWUgZG9lcyBub3QgZXhpc3QuXCIpO2l8fChyLmxlbmd0aD0wKSxlPWU/SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlKSk6ZSxyLnB1c2goZSl9ZGVsZXRlTm90ZSh0KXt0aGlzLm1hcE5vdGVOYW1lX0NvbnRlbnQuZGVsZXRlKHQpfWNsZWFyTm90ZXMoKXt0aGlzLm1hcE5vdGVOYW1lX0NvbnRlbnQuY2xlYXIoKX1zZXQodCxlKXtpZighdGhpcy5leHRlbmRTZXQodCxlKSlpZihcInhcIj09PXQpe2NvbnN0IHQ9dGhpcy5fZmFicmljT2JqZWN0Lmdyb3VwO3Q/KHRoaXMuX2ZhYnJpY09iamVjdC5zZXQoXCJsZWZ0XCIsZS10LmxlZnQtdC53aWR0aC8yKSx0LmFkZFdpdGhVcGRhdGUoKSk6dGhpcy5fZmFicmljT2JqZWN0LnNldChcImxlZnRcIixlKX1lbHNlIGlmKFwieVwiPT09dCl7Y29uc3QgdD10aGlzLl9mYWJyaWNPYmplY3QuZ3JvdXA7dD8odGhpcy5fZmFicmljT2JqZWN0LnNldChcInRvcFwiLGUtdC50b3AtdC5oZWlnaHQvMiksdC5hZGRXaXRoVXBkYXRlKCkpOnRoaXMuX2ZhYnJpY09iamVjdC5zZXQoXCJ0b3BcIixlKX1lbHNlXCJzdHlsZUlkXCI9PT10P3RoaXMuc3R5bGVJZD1lOnRoaXMuX2ZhYnJpY09iamVjdC5zZXQodCxlKTtbXCJ2ZXJ0aWNlc1wiLFwic3RhcnRQb2ludFwiLFwiZW5kUG9pbnRcIixcInhcIixcInlcIixcImxlZnRcIixcInRvcFwiLFwid2lkdGhcIixcImhlaWdodFwiLFwic2NhbGVYXCIsXCJzY2FsZVlcIixcInNrZXdYXCIsXCJza2V3WVwiLFwicGFkZGluZ1wiLFwiYW5nbGVcIixcInN0cm9rZVdpZHRoXCJdLmluY2x1ZGVzKHQpJiZ0aGlzLl9mYWJyaWNPYmplY3Quc2V0Q29vcmRzKCl9Z2V0KHQpe2xldCBlPXRoaXMuZXh0ZW5kR2V0KHQpO2lmKHZvaWQgMD09PWUpaWYoXCJ4XCI9PT10KXtjb25zdCB0PXRoaXMuX2ZhYnJpY09iamVjdC5ncm91cDtlPXQ/dGhpcy5fZmFicmljT2JqZWN0LmdldChcImxlZnRcIikrdC5sZWZ0K3Qud2lkdGgvMjp0aGlzLl9mYWJyaWNPYmplY3QuZ2V0KFwibGVmdFwiKX1lbHNlIGlmKFwieVwiPT09dCl7Y29uc3QgdD10aGlzLl9mYWJyaWNPYmplY3QuZ3JvdXA7ZT10P3RoaXMuX2ZhYnJpY09iamVjdC5nZXQoXCJ0b3BcIikrdC50b3ArdC5oZWlnaHQvMjp0aGlzLl9mYWJyaWNPYmplY3QuZ2V0KFwidG9wXCIpfWVsc2UgZT1cInNjYWxlZFdpZHRoXCI9PT10P3RoaXMuX2ZhYnJpY09iamVjdC5nZXRTY2FsZWRXaWR0aCgpOlwic2NhbGVkSGVpZ2h0XCI9PT10P3RoaXMuX2ZhYnJpY09iamVjdC5nZXRTY2FsZWRIZWlnaHQoKTpbXCJ0eXBlXCIsXCJtZWRpYVR5cGVcIl0uaW5jbHVkZXModCk/dGhpcy5tZWRpYVR5cGU6XCJzdGF0ZVwiPT09dD90aGlzLmdldFN0YXRlKCk6XCJzdHlsZUlkXCI9PT10P3RoaXMuc3R5bGVJZDpcImRyYXdpbmdMYXllcklkXCI9PT10P3RoaXMuZHJhd2luZ0xheWVySWQ6dGhpcy5fZmFicmljT2JqZWN0LmdldCh0KTtyZXR1cm4gZX1yZW1vdmUoKXt0aGlzLl9kcmF3aW5nTGF5ZXImJnRoaXMuX2RyYXdpbmdMYXllci5yZW1vdmVEcmF3aW5nSXRlbXMoW3RoaXNdKX1jb252ZXJ0UHJvcEZyb21JbWFnZVRvVmlldyh0KXtpZihcIm51bWJlclwiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB2YWx1ZS5cIik7cmV0dXJuIHQqeCh0aGlzLFksXCJtXCIseikuY2FsbCh0aGlzKX1jb252ZXJ0UHJvcEZyb21WaWV3VG9JbWFnZSh0KXtpZihcIm51bWJlclwiIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCB2YWx1ZS5cIik7cmV0dXJuIHQveCh0aGlzLFksXCJtXCIseikuY2FsbCh0aGlzKX1fc2V0TGluZVdpZHRoKHQpe2lmKHRoaXMuX2RyYXdpbmdMYXllcilpZihcInZpZXdcIj09PXRoaXMuY29vcmRpbmF0ZUJhc2UpdGhpcy5zZXQoXCJzdHJva2VXaWR0aFwiLHRoaXMuY29udmVydFByb3BGcm9tVmlld1RvSW1hZ2UodCkpO2Vsc2V7aWYoXCJpbWFnZVwiIT09dGhpcy5jb29yZGluYXRlQmFzZSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdjb29yZGluYXRlQmFzZScuXCIpO3RoaXMuc2V0KFwic3Ryb2tlV2lkdGhcIix0KX19X2dldExpbmVXaWR0aCgpe2lmKHRoaXMuX2RyYXdpbmdMYXllcil7aWYoXCJ2aWV3XCI9PT10aGlzLmNvb3JkaW5hdGVCYXNlKXJldHVybiB0aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHRoaXMuZ2V0KFwic3Ryb2tlV2lkdGhcIikpO2lmKFwiaW1hZ2VcIj09PXRoaXMuY29vcmRpbmF0ZUJhc2UpcmV0dXJuIHRoaXMuZ2V0KFwic3Ryb2tlV2lkdGhcIik7dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCAnY29vcmRpbmF0ZUJhc2UnLlwiKX19X3NldEZvbnRTaXplKHQpe2lmKHRoaXMuX2RyYXdpbmdMYXllcilpZihcInZpZXdcIj09PXRoaXMuY29vcmRpbmF0ZUJhc2UpdGhpcy5zZXQoXCJmb250U2l6ZVwiLHRoaXMuY29udmVydFByb3BGcm9tVmlld1RvSW1hZ2UodCkpO2Vsc2V7aWYoXCJpbWFnZVwiIT09dGhpcy5jb29yZGluYXRlQmFzZSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdjb29yZGluYXRlQmFzZScuXCIpO3RoaXMuc2V0KFwiZm9udFNpemVcIix0KX19X2dldEZvbnRTaXplKCl7aWYodGhpcy5fZHJhd2luZ0xheWVyKXtpZihcInZpZXdcIj09PXRoaXMuY29vcmRpbmF0ZUJhc2UpcmV0dXJuIHRoaXMuY29udmVydFByb3BGcm9tSW1hZ2VUb1ZpZXcodGhpcy5nZXQoXCJmb250U2l6ZVwiKSk7aWYoXCJpbWFnZVwiPT09dGhpcy5jb29yZGluYXRlQmFzZSlyZXR1cm4gdGhpcy5nZXQoXCJmb250U2l6ZVwiKTt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdjb29yZGluYXRlQmFzZScuXCIpfX19SD1uZXcgV2Vha01hcCxYPW5ldyBXZWFrTWFwLFk9bmV3IFdlYWtTZXQsej1mdW5jdGlvbigpe2NvbnN0IHQ9dGhpcy5fZHJhd2luZ0xheWVyO2lmKCF0KXJldHVybiAxO2NvbnN0IGU9dC53aWR0aCxpPXQuaGVpZ2h0LHt3aWR0aDpyLGhlaWdodDpufT10LmZhYnJpY0NhbnZhcy53cmFwcGVyRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYocjw9MHx8bjw9MCl0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZ2V0IGRyYXdpbmcgbGF5ZXIgZGltZW5zaW9ucy4gTGF5ZXIgbWF5IG5vdCBiZSByZW5kZXJlZCBvbiB0aGUgcGFnZS5cIik7Y29uc3Qgcz1yL2Usbz1uL2ksYT10Ll9nZXRPYmplY3RGaXQoKTtsZXQgaD0xO2lmKFwiY29udGFpblwiPT09YSlpZihzPG8pe2g9ci9lfWVsc2V7aD1uL2l9ZWxzZSBpZihcImNvdmVyXCI9PT1hKWlmKHM8byl7aD1uL2l9ZWxzZXtoPXIvZX1yZXR1cm4gaH0sWi5hcnJNZWRpYVR5cGVzPVtcInJlY3RcIixcImFyY1wiLFwicG9seWdvblwiLFwiaW1hZ2VcIixcInRleHRcIixcImxpbmVcIixcInF1YWRcIl0sWi5tYXBJdGVtVHlwZT1uZXcgTWFwKFtbcS5BUkMsXCJhcmNcIl0sW3EuSU1BR0UsXCJpbWFnZVwiXSxbcS5MSU5FLFwibGluZVwiXSxbcS5QT0xZR09OLFwicG9seWdvblwiXSxbcS5RVUFELFwicXVhZFwiXSxbcS5SRUNULFwicmVjdFwiXSxbcS5URVhULFwidGV4dFwiXSxbcS5HUk9VUCxcImdyb3VwXCJdXSksWi5hcnJTdHlsZVNlbGVjdG9ycz1bXCJkZWZhdWx0XCIsXCJzZWxlY3RlZFwiXSxaLm1hcEl0ZW1TdGF0ZT1uZXcgTWFwKFtbSy5ERUZBVUxULFwiZGVmYXVsdFwiXSxbSy5TRUxFQ1RFRCxcInNlbGVjdGVkXCJdXSk7Y29uc3QgSj10PT5udWxsIT09dCYmXCJvYmplY3RcIj09dHlwZW9mIHQmJiFBcnJheS5pc0FycmF5KHQpLFE9dD0+ISFOKHQpJiZcIlwiIT09dCwkPXIsdHQ9bixldD1zLGl0PWgscnQ9bCxudD1vLHN0PWEsb3Q9dD0+ISFKKHQpJiYoIShcImlkXCJpbiB0JiYhRyh0LmlkKSkmJighKFwibGluZVdpZHRoXCJpbiB0JiYhRyh0LmxpbmVXaWR0aCkpJiYoIShcImZpbGxTdHlsZVwiaW4gdCYmIVEodC5maWxsU3R5bGUpKSYmKCEoXCJzdHJva2VTdHlsZVwiaW4gdCYmIVEodC5zdHJva2VTdHlsZSkpJiYoIShcInBhaW50TW9kZVwiaW4gdCYmIVtcImZpbGxcIixcInN0cm9rZVwiLFwic3Ryb2tlQW5kRmlsbFwiXS5pbmNsdWRlcyh0LnBhaW50TW9kZSkpJiYoIShcImZvbnRGYW1pbHlcImluIHQmJiFRKHQuZm9udEZhbWlseSkpJiYhKFwiZm9udFNpemVcImluIHQmJiFHKHQuZm9udFNpemUpKSkpKSkpKTtjbGFzcyBhdHtzdGF0aWMgY29udmVydCh0LGUsaSl7Y29uc3Qgcj17eDowLHk6MCx3aWR0aDplLGhlaWdodDppfTtpZighdClyZXR1cm4gcjtpZihzdCh0KSl0LmlzTWVhc3VyZWRJblBlcmNlbnRhZ2U/KHIueD10LngvMTAwKmUsci55PXQueS8xMDAqaSxyLndpZHRoPXQud2lkdGgvMTAwKmUsci5oZWlnaHQ9dC5oZWlnaHQvMTAwKmkpOihyLng9dC54LHIueT10Lnksci53aWR0aD10LndpZHRoLHIuaGVpZ2h0PXQuaGVpZ2h0KTtlbHNle2lmKCF0dCh0KSl0aHJvdyBUeXBlRXJyb3IoXCJJbnZhbGlkIHJlZ2lvbi5cIik7dC5pc01lYXN1cmVkSW5QZXJjZW50YWdlPyhyLng9dC5sZWZ0LzEwMCplLHIueT10LnRvcC8xMDAqaSxyLndpZHRoPSh0LnJpZ2h0LXQubGVmdCkvMTAwKmUsci5oZWlnaHQ9KHQuYm90dG9tLXQudG9wKS8xMDAqaSk6KHIueD10LmxlZnQsci55PXQudG9wLHIud2lkdGg9dC5yaWdodC10LmxlZnQsci5oZWlnaHQ9dC5ib3R0b20tdC50b3ApfXJldHVybiByLng9TWF0aC5yb3VuZChyLngpLHIueT1NYXRoLnJvdW5kKHIueSksci53aWR0aD1NYXRoLnJvdW5kKHIud2lkdGgpLHIuaGVpZ2h0PU1hdGgucm91bmQoci5oZWlnaHQpLHJ9fXZhciBodCxsdDtjbGFzcyBjdHtjb25zdHJ1Y3Rvcigpe2h0LnNldCh0aGlzLG5ldyBNYXApLGx0LnNldCh0aGlzLCExKX1nZXQgZGlzcG9zZWQoKXtyZXR1cm4geCh0aGlzLGx0LFwiZlwiKX1vbih0LGUpe3Q9dC50b0xvd2VyQ2FzZSgpO2NvbnN0IGk9eCh0aGlzLGh0LFwiZlwiKS5nZXQodCk7aWYoaSl7aWYoaS5pbmNsdWRlcyhlKSlyZXR1cm47aS5wdXNoKGUpfWVsc2UgeCh0aGlzLGh0LFwiZlwiKS5zZXQodCxbZV0pfW9mZih0LGUpe3Q9dC50b0xvd2VyQ2FzZSgpO2NvbnN0IGk9eCh0aGlzLGh0LFwiZlwiKS5nZXQodCk7aWYoIWkpcmV0dXJuO2NvbnN0IHI9aS5pbmRleE9mKGUpOy0xIT09ciYmaS5zcGxpY2UociwxKX1vZmZBbGwodCl7dD10LnRvTG93ZXJDYXNlKCk7Y29uc3QgZT14KHRoaXMsaHQsXCJmXCIpLmdldCh0KTtlJiYoZS5sZW5ndGg9MCl9ZmlyZSh0LGU9W10saT17YXN5bmM6ITEsY29weTohMH0pe2V8fChlPVtdKSx0PXQudG9Mb3dlckNhc2UoKTtjb25zdCByPXgodGhpcyxodCxcImZcIikuZ2V0KHQpO2lmKHImJnIubGVuZ3RoKXtpPU9iamVjdC5hc3NpZ24oe2FzeW5jOiExLGNvcHk6ITB9LGkpO2ZvcihsZXQgdCBvZiByKXtpZighdCljb250aW51ZTtsZXQgbj1bXTtpZihpLmNvcHkpZm9yKGxldCB0IG9mIGUpe3RyeXt0PUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodCkpfWNhdGNoKHQpe31uLnB1c2godCl9ZWxzZSBuPWU7bGV0IHM9ITE7aWYoaS5hc3luYylzZXRUaW1lb3V0KCgoKT0+e3RoaXMuZGlzcG9zZWR8fHIuaW5jbHVkZXModCkmJnQuYXBwbHkoaS50YXJnZXQsbil9KSwwKTtlbHNlIHRyeXtzPXQuYXBwbHkoaS50YXJnZXQsbil9Y2F0Y2godCl7fWlmKCEwPT09cylicmVha319fWRpc3Bvc2UoKXtDKHRoaXMsbHQsITAsXCJmXCIpfX1mdW5jdGlvbiB1dCh0LGUsaSl7cmV0dXJuKGkueC10LngpKihlLnktdC55KT09KGUueC10LngpKihpLnktdC55KSYmTWF0aC5taW4odC54LGUueCk8PWkueCYmaS54PD1NYXRoLm1heCh0LngsZS54KSYmTWF0aC5taW4odC55LGUueSk8PWkueSYmaS55PD1NYXRoLm1heCh0LnksZS55KX1mdW5jdGlvbiBkdCh0KXtyZXR1cm4gTWF0aC5hYnModCk8MWUtNj8wOnQ8MD8tMToxfWZ1bmN0aW9uIGZ0KHQsZSxpLHIpe2xldCBuPXRbMF0qKGlbMV0tZVsxXSkrZVswXSoodFsxXS1pWzFdKStpWzBdKihlWzFdLXRbMV0pLHM9dFswXSooclsxXS1lWzFdKStlWzBdKih0WzFdLXJbMV0pK3JbMF0qKGVbMV0tdFsxXSk7cmV0dXJuISgobl5zKT49MCYmMCE9PW4mJjAhPT1zKSYmKG49aVswXSoodFsxXS1yWzFdKStyWzBdKihpWzFdLXRbMV0pK3RbMF0qKHJbMV0taVsxXSkscz1pWzBdKihlWzFdLXJbMV0pK3JbMF0qKGlbMV0tZVsxXSkrZVswXSooclsxXS1pWzFdKSwhKChuXnMpPj0wJiYwIT09biYmMCE9PXMpKX1odD1uZXcgV2Vha01hcCxsdD1uZXcgV2Vha01hcDtjb25zdCBndD1hc3luYyB0PT57aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdXJsLlwiKTtjb25zdCBlPWF3YWl0IGZldGNoKHQpO2lmKCFlLm9rKXRocm93IEVycm9yKFwiTmV0d29yayBFcnJvcjogXCIrZS5zdGF0dXNUZXh0KTtjb25zdCBpPWF3YWl0IGUudGV4dCgpO2lmKCFpLnRyaW0oKS5zdGFydHNXaXRoKFwiPFwiKSl0aHJvdyBFcnJvcihcIlVuYWJsZSB0byBnZXQgdmFsaWQgSFRNTEVsZW1lbnQuXCIpO2NvbnN0IHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihyLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLGkpLDE9PT1yLmNoaWxkRWxlbWVudENvdW50JiZyLmZpcnN0Q2hpbGQgaW5zdGFuY2VvZiBIVE1MVGVtcGxhdGVFbGVtZW50KXJldHVybiByLmZpcnN0Q2hpbGQuY29udGVudDtjb25zdCBuPW5ldyBEb2N1bWVudEZyYWdtZW50O2ZvcihsZXQgdCBvZiByLmNoaWxkcmVuKW4uYXBwZW5kKHQpO3JldHVybiBufTt2YXIgbXQscHQsdnQsX3QseXQ7Y2xhc3Mgd3QgZXh0ZW5kcyBae2NvbnN0cnVjdG9yKHQsZSl7aWYoc3VwZXIobnVsbCxlKSxtdC5zZXQodGhpcyx2b2lkIDApLCFzdCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAncmVjdCcuXCIpO3RoaXMuX3NldEZhYnJpY09iamVjdChuZXcgVi5SZWN0KHtsZWZ0OnQueCx0b3A6dC55LHdpZHRoOnQud2lkdGgsaGVpZ2h0OnQuaGVpZ2h0fSkpLEModGhpcyxtdCxKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQpKSxcImZcIiksdGhpcy5fbWVkaWFUeXBlPVwicmVjdFwifWV4dGVuZFNldCh0LGUpe3JldHVybiExfWV4dGVuZEdldCh0KXt9dXBkYXRlQ29vcmRpbmF0ZUJhc2VGcm9tSW1hZ2VUb1ZpZXcoKXt0aGlzLnNldChcImxlZnRcIix0aGlzLmNvbnZlcnRQcm9wRnJvbVZpZXdUb0ltYWdlKHRoaXMuZ2V0KFwibGVmdFwiKSkpLHRoaXMuc2V0KFwidG9wXCIsdGhpcy5jb252ZXJ0UHJvcEZyb21WaWV3VG9JbWFnZSh0aGlzLmdldChcInRvcFwiKSkpLHRoaXMuc2V0KFwid2lkdGhcIix0aGlzLmNvbnZlcnRQcm9wRnJvbVZpZXdUb0ltYWdlKHRoaXMuZ2V0KFwic2NhbGVkV2lkdGhcIikpKSx0aGlzLnNldChcImhlaWdodFwiLHRoaXMuY29udmVydFByb3BGcm9tVmlld1RvSW1hZ2UodGhpcy5nZXQoXCJzY2FsZWRIZWlnaHRcIikpKX11cGRhdGVDb29yZGluYXRlQmFzZUZyb21WaWV3VG9JbWFnZSgpe3RoaXMuc2V0KFwibGVmdFwiLHRoaXMuY29udmVydFByb3BGcm9tSW1hZ2VUb1ZpZXcodGhpcy5nZXQoXCJsZWZ0XCIpKSksdGhpcy5zZXQoXCJ0b3BcIix0aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHRoaXMuZ2V0KFwidG9wXCIpKSksdGhpcy5zZXQoXCJ3aWR0aFwiLHRoaXMuY29udmVydFByb3BGcm9tSW1hZ2VUb1ZpZXcodGhpcy5nZXQoXCJzY2FsZWRXaWR0aFwiKSkpLHRoaXMuc2V0KFwiaGVpZ2h0XCIsdGhpcy5jb252ZXJ0UHJvcEZyb21JbWFnZVRvVmlldyh0aGlzLmdldChcInNjYWxlZEhlaWdodFwiKSkpfXNldFBvc2l0aW9uKHQpe3RoaXMuc2V0UmVjdCh0KX1nZXRQb3NpdGlvbigpe3JldHVybiB0aGlzLmdldFJlY3QoKX11cGRhdGVQb3NpdGlvbigpe3godGhpcyxtdCxcImZcIikmJnRoaXMuc2V0UmVjdCh4KHRoaXMsbXQsXCJmXCIpKX1zZXRSZWN0KHQpe2lmKCFzdCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAncmVjdCcuXCIpO2lmKHRoaXMuX2RyYXdpbmdMYXllcil7aWYoXCJ2aWV3XCI9PT10aGlzLmNvb3JkaW5hdGVCYXNlKXRoaXMuc2V0KFwibGVmdFwiLHRoaXMuY29udmVydFByb3BGcm9tVmlld1RvSW1hZ2UodC54KSksdGhpcy5zZXQoXCJ0b3BcIix0aGlzLmNvbnZlcnRQcm9wRnJvbVZpZXdUb0ltYWdlKHQueSkpLHRoaXMuc2V0KFwid2lkdGhcIix0aGlzLmNvbnZlcnRQcm9wRnJvbVZpZXdUb0ltYWdlKHQud2lkdGgpKSx0aGlzLnNldChcImhlaWdodFwiLHRoaXMuY29udmVydFByb3BGcm9tVmlld1RvSW1hZ2UodC5oZWlnaHQpKTtlbHNle2lmKFwiaW1hZ2VcIiE9PXRoaXMuY29vcmRpbmF0ZUJhc2UpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCAnY29vcmRpbmF0ZUJhc2UnLlwiKTt0aGlzLnNldChcImxlZnRcIix0LngpLHRoaXMuc2V0KFwidG9wXCIsdC55KSx0aGlzLnNldChcIndpZHRoXCIsdC53aWR0aCksdGhpcy5zZXQoXCJoZWlnaHRcIix0LmhlaWdodCl9dGhpcy5fZHJhd2luZ0xheWVyLnJlbmRlckFsbCgpfWVsc2UgQyh0aGlzLG10LEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodCkpLFwiZlwiKX1nZXRSZWN0KCl7aWYodGhpcy5fZHJhd2luZ0xheWVyKXtpZihcInZpZXdcIj09PXRoaXMuY29vcmRpbmF0ZUJhc2UpcmV0dXJue3g6dGhpcy5jb252ZXJ0UHJvcEZyb21JbWFnZVRvVmlldyh0aGlzLmdldChcImxlZnRcIikpLHk6dGhpcy5jb252ZXJ0UHJvcEZyb21JbWFnZVRvVmlldyh0aGlzLmdldChcInRvcFwiKSksd2lkdGg6dGhpcy5jb252ZXJ0UHJvcEZyb21JbWFnZVRvVmlldyh0aGlzLmdldChcInNjYWxlZFdpZHRoXCIpKSxoZWlnaHQ6dGhpcy5jb252ZXJ0UHJvcEZyb21JbWFnZVRvVmlldyh0aGlzLmdldChcInNjYWxlZEhlaWdodFwiKSl9O2lmKFwiaW1hZ2VcIj09PXRoaXMuY29vcmRpbmF0ZUJhc2UpcmV0dXJue3g6dGhpcy5nZXQoXCJsZWZ0XCIpLHk6dGhpcy5nZXQoXCJ0b3BcIiksd2lkdGg6dGhpcy5nZXQoXCJzY2FsZWRXaWR0aFwiKSxoZWlnaHQ6dGhpcy5nZXQoXCJzY2FsZWRIZWlnaHRcIil9O3Rocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ2Nvb3JkaW5hdGVCYXNlJy5cIil9cmV0dXJuIHgodGhpcyxtdCxcImZcIik/SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh4KHRoaXMsbXQsXCJmXCIpKSk6bnVsbH19ZnVuY3Rpb24gYnQodCxlLGkpe2xldCByPWkucG9pbnRzW3RoaXMucG9pbnRJbmRleF0ueC1pLnBhdGhPZmZzZXQueCxuPWkucG9pbnRzW3RoaXMucG9pbnRJbmRleF0ueS1pLnBhdGhPZmZzZXQueTtyZXR1cm4gVi51dGlsLnRyYW5zZm9ybVBvaW50KHt4OnIseTpufSxpLmNhbGNUcmFuc2Zvcm1NYXRyaXgoKSl9ZnVuY3Rpb24geHQodCl7bGV0IGU9bmV3IFYuUG9pbnQodC5zdHJva2VVbmlmb3JtPzEvdC5zY2FsZVg6MSx0LnN0cm9rZVVuaWZvcm0/MS90LnNjYWxlWToxKS5tdWx0aXBseSh0LnN0cm9rZVdpZHRoKTtyZXR1cm4gbmV3IFYuUG9pbnQodC53aWR0aCtlLngsdC5oZWlnaHQrZS55KX1mdW5jdGlvbiBDdCh0LGUsaSxyKXtsZXQgbj1lLnRhcmdldCxzPW4uY29udHJvbHNbbi5fX2Nvcm5lcl0sbz1uLnRvTG9jYWxQb2ludChuZXcgVi5Qb2ludChpLHIpLFwiY2VudGVyXCIsXCJjZW50ZXJcIiksYT14dChuKSxoPW4uX2dldFRyYW5zZm9ybWVkRGltZW5zaW9ucygwLDApLGw9e3g6by54KmEueC9oLngrbi5wYXRoT2Zmc2V0LngseTpvLnkqYS55L2gueStuLnBhdGhPZmZzZXQueX07cmV0dXJuIG4ucG9pbnRzW3MucG9pbnRJbmRleF09bCxWLmNvbnRyb2xzVXRpbHMuZmlyZUV2ZW50KFwic2NhbGluZ1wiLHtlOnQsdHJhbnNmb3JtOmUscG9pbnRlcjp7eDppLHk6cn19KSwhMH1mdW5jdGlvbiBTdCh0LGUpe3JldHVybiBmdW5jdGlvbihpLHIsbixzKXtsZXQgbz1yLnRhcmdldCxhPVYudXRpbC50cmFuc2Zvcm1Qb2ludCh7eDpvLnBvaW50c1t0XS54LW8ucGF0aE9mZnNldC54LHk6by5wb2ludHNbdF0ueS1vLnBhdGhPZmZzZXQueX0sby5jYWxjVHJhbnNmb3JtTWF0cml4KCkpLGg9ZShpLHIsbixzKTtvLl9zZXRQb3NpdGlvbkRpbWVuc2lvbnMoe30pO2xldCBsPXh0KG8pLGM9KG8ucG9pbnRzW3RdLngtby5wYXRoT2Zmc2V0LngpL2wueCx1PShvLnBvaW50c1t0XS55LW8ucGF0aE9mZnNldC55KS9sLnk7cmV0dXJuIG8uc2V0UG9zaXRpb25CeU9yaWdpbihhLGMrLjUsdSsuNSksaH19bXQ9bmV3IFdlYWtNYXA7Y2xhc3MgVHQgZXh0ZW5kcyBae2NvbnN0cnVjdG9yKHQsZSl7aWYoc3VwZXIobnVsbCxlKSxwdC5zZXQodGhpcyx2b2lkIDApLCFpdCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAncG9seWdvbicuXCIpO3RoaXMuX3NldEZhYnJpY09iamVjdChuZXcgVi5Qb2x5Z29uKHQucG9pbnRzLHtvYmplY3RDYWNoaW5nOiExfSkpO2NvbnN0IGk9dGhpcy5fZmFicmljT2JqZWN0O2xldCByPWkucG9pbnRzLmxlbmd0aC0xO2kuY29udHJvbHM9aS5wb2ludHMucmVkdWNlKChmdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRbXCJwXCIraV09bmV3IFYuQ29udHJvbCh7cG9zaXRpb25IYW5kbGVyOmJ0LGFjdGlvbkhhbmRsZXI6U3QoaT4wP2ktMTpyLEN0KSxhY3Rpb25OYW1lOlwibW9kaWZ5UG9seWdvblwiLHBvaW50SW5kZXg6aX0pLHR9KSx7fSksQyh0aGlzLHB0LEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodCkpLFwiZlwiKSx0aGlzLl9tZWRpYVR5cGU9XCJwb2x5Z29uXCJ9ZXh0ZW5kU2V0KHQsZSl7aWYoXCJ2ZXJ0aWNlc1wiPT09dCl7Y29uc3QgdD10aGlzLl9mYWJyaWNPYmplY3Q7aWYodC5ncm91cCl7Y29uc3QgaT10Lmdyb3VwO3QucG9pbnRzPWUubWFwKCh0PT4oe3g6dC54LWkubGVmdC1pLndpZHRoLzIseTp0LnktaS50b3AtaS5oZWlnaHQvMn0pKSksaS5hZGRXaXRoVXBkYXRlKCl9ZWxzZSB0LnBvaW50cz1lO2NvbnN0IGk9dC5wb2ludHMubGVuZ3RoLTE7cmV0dXJuIHQuY29udHJvbHM9dC5wb2ludHMucmVkdWNlKChmdW5jdGlvbih0LGUscil7cmV0dXJuIHRbXCJwXCIrcl09bmV3IFYuQ29udHJvbCh7cG9zaXRpb25IYW5kbGVyOmJ0LGFjdGlvbkhhbmRsZXI6U3Qocj4wP3ItMTppLEN0KSxhY3Rpb25OYW1lOlwibW9kaWZ5UG9seWdvblwiLHBvaW50SW5kZXg6cn0pLHR9KSx7fSksdC5fc2V0UG9zaXRpb25EaW1lbnNpb25zKHt9KSwhMH19ZXh0ZW5kR2V0KHQpe2lmKFwidmVydGljZXNcIj09PXQpe2NvbnN0IHQ9W10sZT10aGlzLl9mYWJyaWNPYmplY3Q7aWYoZS5zZWxlY3RhYmxlJiYhZS5ncm91cClmb3IobGV0IGkgaW4gZS5vQ29vcmRzKXQucHVzaCh7eDplLm9Db29yZHNbaV0ueCx5OmUub0Nvb3Jkc1tpXS55fSk7ZWxzZSBmb3IobGV0IGkgb2YgZS5wb2ludHMpe2xldCByPWkueC1lLnBhdGhPZmZzZXQueCxuPWkueS1lLnBhdGhPZmZzZXQueTtjb25zdCBzPVYudXRpbC50cmFuc2Zvcm1Qb2ludCh7eDpyLHk6bn0sZS5jYWxjVHJhbnNmb3JtTWF0cml4KCkpO3QucHVzaCh7eDpzLngseTpzLnl9KX1yZXR1cm4gdH19dXBkYXRlQ29vcmRpbmF0ZUJhc2VGcm9tSW1hZ2VUb1ZpZXcoKXtjb25zdCB0PXRoaXMuZ2V0KFwidmVydGljZXNcIikubWFwKCh0PT4oe3g6dGhpcy5jb252ZXJ0UHJvcEZyb21WaWV3VG9JbWFnZSh0LngpLHk6dGhpcy5jb252ZXJ0UHJvcEZyb21WaWV3VG9JbWFnZSh0LnkpfSkpKTt0aGlzLnNldChcInZlcnRpY2VzXCIsdCl9dXBkYXRlQ29vcmRpbmF0ZUJhc2VGcm9tVmlld1RvSW1hZ2UoKXtjb25zdCB0PXRoaXMuZ2V0KFwidmVydGljZXNcIikubWFwKCh0PT4oe3g6dGhpcy5jb252ZXJ0UHJvcEZyb21JbWFnZVRvVmlldyh0LngpLHk6dGhpcy5jb252ZXJ0UHJvcEZyb21JbWFnZVRvVmlldyh0LnkpfSkpKTt0aGlzLnNldChcInZlcnRpY2VzXCIsdCl9c2V0UG9zaXRpb24odCl7dGhpcy5zZXRQb2x5Z29uKHQpfWdldFBvc2l0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UG9seWdvbigpfXVwZGF0ZVBvc2l0aW9uKCl7eCh0aGlzLHB0LFwiZlwiKSYmdGhpcy5zZXRQb2x5Z29uKHgodGhpcyxwdCxcImZcIikpfXNldFBvbHlnb24odCl7aWYoIWl0KHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdwb2x5Z29uJy5cIik7aWYodGhpcy5fZHJhd2luZ0xheWVyKXtpZihcInZpZXdcIj09PXRoaXMuY29vcmRpbmF0ZUJhc2Upe2NvbnN0IGU9dC5wb2ludHMubWFwKCh0PT4oe3g6dGhpcy5jb252ZXJ0UHJvcEZyb21WaWV3VG9JbWFnZSh0LngpLHk6dGhpcy5jb252ZXJ0UHJvcEZyb21WaWV3VG9JbWFnZSh0LnkpfSkpKTt0aGlzLnNldChcInZlcnRpY2VzXCIsZSl9ZWxzZXtpZihcImltYWdlXCIhPT10aGlzLmNvb3JkaW5hdGVCYXNlKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ2Nvb3JkaW5hdGVCYXNlJy5cIik7dGhpcy5zZXQoXCJ2ZXJ0aWNlc1wiLHQucG9pbnRzKX10aGlzLl9kcmF3aW5nTGF5ZXIucmVuZGVyQWxsKCl9ZWxzZSBDKHRoaXMscHQsSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0KSksXCJmXCIpfWdldFBvbHlnb24oKXtpZih0aGlzLl9kcmF3aW5nTGF5ZXIpe2lmKFwidmlld1wiPT09dGhpcy5jb29yZGluYXRlQmFzZSl7cmV0dXJue3BvaW50czp0aGlzLmdldChcInZlcnRpY2VzXCIpLm1hcCgodD0+KHt4OnRoaXMuY29udmVydFByb3BGcm9tSW1hZ2VUb1ZpZXcodC54KSx5OnRoaXMuY29udmVydFByb3BGcm9tSW1hZ2VUb1ZpZXcodC55KX0pKSl9fWlmKFwiaW1hZ2VcIj09PXRoaXMuY29vcmRpbmF0ZUJhc2UpcmV0dXJue3BvaW50czp0aGlzLmdldChcInZlcnRpY2VzXCIpfTt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdjb29yZGluYXRlQmFzZScuXCIpfXJldHVybiB4KHRoaXMscHQsXCJmXCIpP0pTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoeCh0aGlzLHB0LFwiZlwiKSkpOm51bGx9fXB0PW5ldyBXZWFrTWFwO2NsYXNzIEV0IGV4dGVuZHMgWntzZXQgbWFpbnRhaW5Bc3BlY3RSYXRpbyh0KXt0JiZ0aGlzLnNldChcInNjYWxlWVwiLHRoaXMuZ2V0KFwic2NhbGVYXCIpKX1nZXQgbWFpbnRhaW5Bc3BlY3RSYXRpbygpe3JldHVybiB4KHRoaXMsX3QsXCJmXCIpfWNvbnN0cnVjdG9yKHQsZSxpLHIpe2lmKHN1cGVyKG51bGwsciksdnQuc2V0KHRoaXMsdm9pZCAwKSxfdC5zZXQodGhpcyx2b2lkIDApLCFzdChlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAncmVjdCcuXCIpO2lmKHQgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50fHx0IGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnR8fHQgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50KXRoaXMuX3NldEZhYnJpY09iamVjdChuZXcgVi5JbWFnZSh0LHtsZWZ0OmUueCx0b3A6ZS55fSkpO2Vsc2V7aWYoISQodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgJ2ltYWdlJy5cIik7e2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtsZXQgcjtpLndpZHRoPXQud2lkdGgsaS5oZWlnaHQ9dC5oZWlnaHQ7aWYodC5mb3JtYXQ9PT1jLklQRl9HUkFZU0NBTEVEKXtyPW5ldyBVaW50OENsYW1wZWRBcnJheSh0LndpZHRoKnQuaGVpZ2h0KjQpO2ZvcihsZXQgZT0wO2U8ci5sZW5ndGg7ZSs9NClyW2VdPXQuYnl0ZXNbZS80XSxyW2UrMV09dC5ieXRlc1tlLzRdLHJbZSsyXT10LmJ5dGVzW2UvNF0scltlKzNdPTI1NX1lbHNlIHI9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHQuYnl0ZXMuYnVmZmVyKTtpLmdldENvbnRleHQoXCIyZFwiKS5wdXRJbWFnZURhdGEobmV3IEltYWdlRGF0YShyLHQud2lkdGgsdC5oZWlnaHQpLDAsMCksdGhpcy5fc2V0RmFicmljT2JqZWN0KG5ldyBWLkltYWdlKGkse2xlZnQ6ZS54LHRvcDplLnl9KSl9fWlmKGkpe2NvbnN0IHQ9ZS53aWR0aC90aGlzLmdldChcIndpZHRoXCIpO3RoaXMuc2V0KFwic2NhbGVYXCIsdCksdGhpcy5zZXQoXCJzY2FsZVlcIix0KX1lbHNlIHRoaXMuc2V0KFwic2NhbGVYXCIsZS53aWR0aC90aGlzLmdldChcIndpZHRoXCIpKSx0aGlzLnNldChcInNjYWxlWVwiLGUuaGVpZ2h0L3RoaXMuZ2V0KFwiaGVpZ2h0XCIpKTt0aGlzLmltYWdlPXQsQyh0aGlzLHZ0LEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpLFwiZlwiKSxDKHRoaXMsX3QsaSxcImZcIiksdGhpcy5fbWVkaWFUeXBlPVwiaW1hZ2VcIn1leHRlbmRTZXQodCxlKXtpZihcImltYWdlXCI9PT10KXtpZihlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudClyZXR1cm4gdGhpcy5fZmFicmljT2JqZWN0LnNldEVsZW1lbnQoZSksdGhpcy5pbWFnZT1lLCEwO2lmKGUgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCl7Y29uc3QgdD1uZXcgSW1hZ2U7cmV0dXJuIHQuc3JjPWUudG9EYXRhVVJMKCksdGhpcy5fZmFicmljT2JqZWN0LnNldEVsZW1lbnQodCksdGhpcy5pbWFnZT1lLCEwfXRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIHZhbHVlLlwiKX19ZXh0ZW5kR2V0KHQpe2lmKFwiaW1hZ2VcIj09PXQpcmV0dXJuIHRoaXMuaW1hZ2V9dXBkYXRlQ29vcmRpbmF0ZUJhc2VGcm9tSW1hZ2VUb1ZpZXcoKXtpZih0aGlzLnNldChcImxlZnRcIix0aGlzLmNvbnZlcnRQcm9wRnJvbVZpZXdUb0ltYWdlKHRoaXMuZ2V0KFwibGVmdFwiKSkpLHRoaXMuc2V0KFwidG9wXCIsdGhpcy5jb252ZXJ0UHJvcEZyb21WaWV3VG9JbWFnZSh0aGlzLmdldChcInRvcFwiKSkpLHgodGhpcyxfdCxcImZcIikpe2NvbnN0IHQ9dGhpcy5jb252ZXJ0UHJvcEZyb21WaWV3VG9JbWFnZSh0aGlzLmdldChcIndpZHRoXCIpKS90aGlzLmdldChcIndpZHRoXCIpO3RoaXMuc2V0KFwic2NhbGVYXCIsdCksdGhpcy5zZXQoXCJzY2FsZVlcIix0KX1lbHNlIHRoaXMuc2V0KFwic2NhbGVYXCIsdGhpcy5jb252ZXJ0UHJvcEZyb21WaWV3VG9JbWFnZSh0aGlzLmdldChcIndpZHRoXCIpKS90aGlzLmdldChcIndpZHRoXCIpKSx0aGlzLnNldChcInNjYWxlWVwiLHRoaXMuY29udmVydFByb3BGcm9tVmlld1RvSW1hZ2UodGhpcy5nZXQoXCJoZWlnaHRcIikpL3RoaXMuZ2V0KFwiaGVpZ2h0XCIpKX11cGRhdGVDb29yZGluYXRlQmFzZUZyb21WaWV3VG9JbWFnZSgpe2lmKHRoaXMuc2V0KFwibGVmdFwiLHRoaXMuY29udmVydFByb3BGcm9tSW1hZ2VUb1ZpZXcodGhpcy5nZXQoXCJsZWZ0XCIpKSksdGhpcy5zZXQoXCJ0b3BcIix0aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHRoaXMuZ2V0KFwidG9wXCIpKSkseCh0aGlzLF90LFwiZlwiKSl7Y29uc3QgdD10aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHRoaXMuZ2V0KFwid2lkdGhcIikpL3RoaXMuZ2V0KFwid2lkdGhcIik7dGhpcy5zZXQoXCJzY2FsZVhcIix0KSx0aGlzLnNldChcInNjYWxlWVwiLHQpfWVsc2UgdGhpcy5zZXQoXCJzY2FsZVhcIix0aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHRoaXMuZ2V0KFwid2lkdGhcIikpL3RoaXMuZ2V0KFwid2lkdGhcIikpLHRoaXMuc2V0KFwic2NhbGVZXCIsdGhpcy5jb252ZXJ0UHJvcEZyb21JbWFnZVRvVmlldyh0aGlzLmdldChcImhlaWdodFwiKSkvdGhpcy5nZXQoXCJoZWlnaHRcIikpfXNldFBvc2l0aW9uKHQpe3RoaXMuc2V0SW1hZ2VSZWN0KHQpfWdldFBvc2l0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0SW1hZ2VSZWN0KCl9dXBkYXRlUG9zaXRpb24oKXt4KHRoaXMsdnQsXCJmXCIpJiZ0aGlzLnNldEltYWdlUmVjdCh4KHRoaXMsdnQsXCJmXCIpKX1zZXRJbWFnZSh0KXtjb25zdCBlPXRoaXMuZ2V0SW1hZ2VSZWN0KCk7aWYodCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnR8fHQgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudHx8dCBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpdGhpcy5zZXQoXCJpbWFnZVwiLHQpO2Vsc2V7aWYoISQodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgJ2ltYWdlJy5cIik7e2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtsZXQgaTtlLndpZHRoPXQud2lkdGgsZS5oZWlnaHQ9dC5oZWlnaHQ7aWYodC5mb3JtYXQ9PT1jLklQRl9HUkFZU0NBTEVEKXtpPW5ldyBVaW50OENsYW1wZWRBcnJheSh0LndpZHRoKnQuaGVpZ2h0KjQpO2ZvcihsZXQgZT0wO2U8aS5sZW5ndGg7ZSs9NClpW2VdPXQuYnl0ZXNbZS80XSxpW2UrMV09dC5ieXRlc1tlLzRdLGlbZSsyXT10LmJ5dGVzW2UvNF0saVtlKzNdPTI1NX1lbHNlIGk9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHQuYnl0ZXMuYnVmZmVyKTtlLmdldENvbnRleHQoXCIyZFwiKS5wdXRJbWFnZURhdGEobmV3IEltYWdlRGF0YShpLHQud2lkdGgsdC5oZWlnaHQpLDAsMCksdGhpcy5zZXQoXCJpbWFnZVwiLGUpfX1pZih4KHRoaXMsX3QsXCJmXCIpKXtjb25zdCB0PWUud2lkdGgvdGhpcy5nZXQoXCJ3aWR0aFwiKTt0aGlzLnNldChcInNjYWxlWFwiLHQpLHRoaXMuc2V0KFwic2NhbGVZXCIsdCl9ZWxzZSB0aGlzLnNldChcInNjYWxlWFwiLGUud2lkdGgvdGhpcy5nZXQoXCJ3aWR0aFwiKSksdGhpcy5zZXQoXCJzY2FsZVlcIixlLmhlaWdodC90aGlzLmdldChcImhlaWdodFwiKSl9Z2V0SW1hZ2UoKXtyZXR1cm4gdGhpcy5pbWFnZX1zZXRJbWFnZVJlY3QodCl7aWYoIXN0KHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdyZWN0Jy5cIik7aWYodGhpcy5fZHJhd2luZ0xheWVyKXtpZihcInZpZXdcIj09PXRoaXMuY29vcmRpbmF0ZUJhc2UpaWYodGhpcy5zZXQoXCJsZWZ0XCIsdGhpcy5jb252ZXJ0UHJvcEZyb21WaWV3VG9JbWFnZSh0LngpKSx0aGlzLnNldChcInRvcFwiLHRoaXMuY29udmVydFByb3BGcm9tVmlld1RvSW1hZ2UodC55KSkseCh0aGlzLF90LFwiZlwiKSl7Y29uc3QgZT10aGlzLmNvbnZlcnRQcm9wRnJvbVZpZXdUb0ltYWdlKHQud2lkdGgpL3RoaXMuZ2V0KFwid2lkdGhcIik7dGhpcy5zZXQoXCJzY2FsZVhcIixlKSx0aGlzLnNldChcInNjYWxlWVwiLGUpfWVsc2UgdGhpcy5zZXQoXCJzY2FsZVhcIix0aGlzLmNvbnZlcnRQcm9wRnJvbVZpZXdUb0ltYWdlKHQud2lkdGgpL3RoaXMuZ2V0KFwid2lkdGhcIikpLHRoaXMuc2V0KFwic2NhbGVZXCIsdGhpcy5jb252ZXJ0UHJvcEZyb21WaWV3VG9JbWFnZSh0LmhlaWdodCkvdGhpcy5nZXQoXCJoZWlnaHRcIikpO2Vsc2V7aWYoXCJpbWFnZVwiIT09dGhpcy5jb29yZGluYXRlQmFzZSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdjb29yZGluYXRlQmFzZScuXCIpO2lmKHRoaXMuc2V0KFwibGVmdFwiLHQueCksdGhpcy5zZXQoXCJ0b3BcIix0LnkpLHgodGhpcyxfdCxcImZcIikpe2NvbnN0IGU9dC53aWR0aC90aGlzLmdldChcIndpZHRoXCIpO3RoaXMuc2V0KFwic2NhbGVYXCIsZSksdGhpcy5zZXQoXCJzY2FsZVlcIixlKX1lbHNlIHRoaXMuc2V0KFwic2NhbGVYXCIsdC53aWR0aC90aGlzLmdldChcIndpZHRoXCIpKSx0aGlzLnNldChcInNjYWxlWVwiLHQuaGVpZ2h0L3RoaXMuZ2V0KFwiaGVpZ2h0XCIpKX10aGlzLl9kcmF3aW5nTGF5ZXIucmVuZGVyQWxsKCl9ZWxzZSBDKHRoaXMsdnQsSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0KSksXCJmXCIpfWdldEltYWdlUmVjdCgpe2lmKHRoaXMuX2RyYXdpbmdMYXllcil7aWYoXCJ2aWV3XCI9PT10aGlzLmNvb3JkaW5hdGVCYXNlKXJldHVybnt4OnRoaXMuY29udmVydFByb3BGcm9tSW1hZ2VUb1ZpZXcodGhpcy5nZXQoXCJsZWZ0XCIpKSx5OnRoaXMuY29udmVydFByb3BGcm9tSW1hZ2VUb1ZpZXcodGhpcy5nZXQoXCJ0b3BcIikpLHdpZHRoOnRoaXMuY29udmVydFByb3BGcm9tSW1hZ2VUb1ZpZXcodGhpcy5nZXQoXCJzY2FsZWRXaWR0aFwiKSksaGVpZ2h0OnRoaXMuY29udmVydFByb3BGcm9tSW1hZ2VUb1ZpZXcodGhpcy5nZXQoXCJzY2FsZWRIZWlnaHRcIikpfTtpZihcImltYWdlXCI9PT10aGlzLmNvb3JkaW5hdGVCYXNlKXJldHVybnt4OnRoaXMuZ2V0KFwibGVmdFwiKSx5OnRoaXMuZ2V0KFwidG9wXCIpLHdpZHRoOnRoaXMuZ2V0KFwic2NhbGVkV2lkdGhcIiksaGVpZ2h0OnRoaXMuZ2V0KFwic2NhbGVkSGVpZ2h0XCIpfTt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdjb29yZGluYXRlQmFzZScuXCIpfXJldHVybiB4KHRoaXMsdnQsXCJmXCIpP0pTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoeCh0aGlzLHZ0LFwiZlwiKSkpOm51bGx9fXZ0PW5ldyBXZWFrTWFwLF90PW5ldyBXZWFrTWFwO2NvbnN0IE90PXQ9PntsZXQgZT0odD0+dC5zcGxpdChcIlxcblwiKS5tYXAoKHQ9PnQuc3BsaXQoXCJcXHRcIikpKSkodCk7cmV0dXJuKHQ9Pntmb3IobGV0IGU9MDs7ZSsrKXtsZXQgaT0tMTtmb3IobGV0IHI9MDtyPHQubGVuZ3RoO3IrKyl7bGV0IG49dFtyXVtlXTt2b2lkIDAhPT1uJiYobi5sZW5ndGg+aSYmKGk9bi5sZW5ndGgpKX1pZigtMT09PWkpYnJlYWs7Zm9yKGxldCByPTA7cjx0Lmxlbmd0aDtyKyspe2lmKGU+PXRbcl0ubGVuZ3RoLTEpY29udGludWU7bGV0IG49XCIgXCIucmVwZWF0KGkrMi10W3JdW2VdLmxlbmd0aCk7dFtyXVtlXT10W3JdW2VdLmNvbmNhdChuKX19fSkoZSksKHQ9PntsZXQgZT1cIlwiO2ZvcihsZXQgaT0wO2k8dC5sZW5ndGg7aSsrKWU9ZS5jb25jYXQoLi4udFtpXSxpPT09dC5sZW5ndGgtMT9cIlwiOlwiXFxuXCIpO3JldHVybiBlfSkoZSl9O2NsYXNzIEF0IGV4dGVuZHMgWntjb25zdHJ1Y3Rvcih0LGUsaSl7aWYoc3VwZXIobnVsbCxpKSx5dC5zZXQodGhpcyx2b2lkIDApLCFOKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICd0ZXh0Jy5cIik7aWYoIXN0KGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdyZWN0Jy5cIik7dGhpcy5fc2V0RmFicmljT2JqZWN0KG5ldyBWLlRleHRib3goT3QodCkse2xlZnQ6ZS54LHRvcDplLnksd2lkdGg6ZS53aWR0aH0pKSx0aGlzLl90ZXh0PXQsQyh0aGlzLHl0LEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZSkpLFwiZlwiKSx0aGlzLl9tZWRpYVR5cGU9XCJ0ZXh0XCJ9ZXh0ZW5kU2V0KHQsZSl7aWYoXCJ0ZXh0XCI9PT10KXJldHVybiB0aGlzLl90ZXh0PWUsdGhpcy5fZmFicmljT2JqZWN0LnNldChcInRleHRcIixPdChlKSksITB9ZXh0ZW5kR2V0KHQpe2lmKFwidGV4dFwiPT09dClyZXR1cm4gdGhpcy5fdGV4dH11cGRhdGVDb29yZGluYXRlQmFzZUZyb21JbWFnZVRvVmlldygpe3RoaXMuc2V0KFwibGVmdFwiLHRoaXMuY29udmVydFByb3BGcm9tVmlld1RvSW1hZ2UodGhpcy5nZXQoXCJsZWZ0XCIpKSksdGhpcy5zZXQoXCJ0b3BcIix0aGlzLmNvbnZlcnRQcm9wRnJvbVZpZXdUb0ltYWdlKHRoaXMuZ2V0KFwidG9wXCIpKSksdGhpcy5zZXQoXCJ3aWR0aFwiLHRoaXMuY29udmVydFByb3BGcm9tVmlld1RvSW1hZ2UodGhpcy5nZXQoXCJzY2FsZWRXaWR0aFwiKSkpfXVwZGF0ZUNvb3JkaW5hdGVCYXNlRnJvbVZpZXdUb0ltYWdlKCl7dGhpcy5zZXQoXCJsZWZ0XCIsdGhpcy5jb252ZXJ0UHJvcEZyb21JbWFnZVRvVmlldyh0aGlzLmdldChcImxlZnRcIikpKSx0aGlzLnNldChcInRvcFwiLHRoaXMuY29udmVydFByb3BGcm9tSW1hZ2VUb1ZpZXcodGhpcy5nZXQoXCJ0b3BcIikpKSx0aGlzLnNldChcIndpZHRoXCIsdGhpcy5jb252ZXJ0UHJvcEZyb21JbWFnZVRvVmlldyh0aGlzLmdldChcInNjYWxlZFdpZHRoXCIpKSl9c2V0UG9zaXRpb24odCl7dGhpcy5zZXRUZXh0UmVjdCh0KX1nZXRQb3NpdGlvbigpe3JldHVybiB0aGlzLmdldFRleHRSZWN0KCl9dXBkYXRlUG9zaXRpb24oKXt4KHRoaXMseXQsXCJmXCIpJiZ0aGlzLnNldFRleHRSZWN0KHgodGhpcyx5dCxcImZcIikpfXNldFRleHQodCl7aWYoIU4odCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgJ3RleHQnLlwiKTt0aGlzLnNldChcInRleHRcIix0KX1nZXRUZXh0KCl7cmV0dXJuIHRoaXMuZ2V0KFwidGV4dFwiKX1zZXRUZXh0UmVjdCh0KXtpZighc3QodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgJ3JlY3QnLlwiKTtpZih0aGlzLl9kcmF3aW5nTGF5ZXIpe2lmKFwidmlld1wiPT09dGhpcy5jb29yZGluYXRlQmFzZSl0aGlzLnNldChcImxlZnRcIix0aGlzLmNvbnZlcnRQcm9wRnJvbVZpZXdUb0ltYWdlKHQueCkpLHRoaXMuc2V0KFwidG9wXCIsdGhpcy5jb252ZXJ0UHJvcEZyb21WaWV3VG9JbWFnZSh0LnkpKSx0aGlzLnNldChcIndpZHRoXCIsdGhpcy5jb252ZXJ0UHJvcEZyb21WaWV3VG9JbWFnZSh0LndpZHRoKSk7ZWxzZXtpZihcImltYWdlXCIhPT10aGlzLmNvb3JkaW5hdGVCYXNlKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ2Nvb3JkaW5hdGVCYXNlJy5cIik7dGhpcy5zZXQoXCJsZWZ0XCIsdC54KSx0aGlzLnNldChcInRvcFwiLHQueSksdGhpcy5zZXQoXCJ3aWR0aFwiLHQud2lkdGgpfXRoaXMuX2RyYXdpbmdMYXllci5yZW5kZXJBbGwoKX1lbHNlIEModGhpcyx5dCxKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQpKSxcImZcIil9Z2V0VGV4dFJlY3QoKXtpZih0aGlzLl9kcmF3aW5nTGF5ZXIpe2lmKFwidmlld1wiPT09dGhpcy5jb29yZGluYXRlQmFzZSlyZXR1cm57eDp0aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHRoaXMuZ2V0KFwibGVmdFwiKSkseTp0aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHRoaXMuZ2V0KFwidG9wXCIpKSx3aWR0aDp0aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHRoaXMuZ2V0KFwic2NhbGVkV2lkdGhcIikpLGhlaWdodDp0aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHRoaXMuZ2V0KFwic2NhbGVkSGVpZ2h0XCIpKX07aWYoXCJpbWFnZVwiPT09dGhpcy5jb29yZGluYXRlQmFzZSlyZXR1cm57eDp0aGlzLmdldChcImxlZnRcIikseTp0aGlzLmdldChcInRvcFwiKSx3aWR0aDp0aGlzLmdldChcInNjYWxlZFdpZHRoXCIpLGhlaWdodDp0aGlzLmdldChcInNjYWxlZEhlaWdodFwiKX07dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCAnY29vcmRpbmF0ZUJhc2UnLlwiKX1yZXR1cm4geCh0aGlzLHl0LFwiZlwiKT9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHgodGhpcyx5dCxcImZcIikpKTpudWxsfX12YXIgSXQsTHQsRHQsTXQsRnQsUHQsa3QsUnQsQnQsanQsV3QsVXQsVnQsR3QsTnQsWXQsSHQsWHQsenQscXQsS3QsWnQsSnQsUXQsJHQsdGUsZWUsaWUscmUsbmUsc2Usb2UsYWUsaGUsbGUsY2U7eXQ9bmV3IFdlYWtNYXA7Y2xhc3MgdWUgZXh0ZW5kcyBUdHtjb25zdHJ1Y3Rvcih0LGUpe2lmKHN1cGVyKHtwb2ludHM6W251bGw9PXQ/dm9pZCAwOnQuc3RhcnRQb2ludCxudWxsPT10P3ZvaWQgMDp0LmVuZFBvaW50XX0sZSksSXQuc2V0KHRoaXMsdm9pZCAwKSwhZXQodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgJ2xpbmUnLlwiKTtDKHRoaXMsSXQsSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0KSksXCJmXCIpLHRoaXMuX21lZGlhVHlwZT1cImxpbmVcIn1leHRlbmRTZXQodCxlKXtpZihcInN0YXJ0UG9pbnRcIj09PXR8fFwiZW5kUG9pbnRcIj09PXQpe2U9XCJzdGFydFBvaW50XCI9PT10P1tlLHRoaXMuZ2V0KFwiZW5kUG9pbnRcIildOlt0aGlzLmdldChcInN0YXJ0UG9pbnRcIiksZV07Y29uc3QgaT10aGlzLl9mYWJyaWNPYmplY3Q7aWYoaS5ncm91cCl7Y29uc3QgdD1pLmdyb3VwO2kucG9pbnRzPWUubWFwKChlPT4oe3g6ZS54LXQubGVmdC10LndpZHRoLzIseTplLnktdC50b3AtdC5oZWlnaHQvMn0pKSksdC5hZGRXaXRoVXBkYXRlKCl9ZWxzZSBpLnBvaW50cz1lO2NvbnN0IHI9aS5wb2ludHMubGVuZ3RoLTE7cmV0dXJuIGkuY29udHJvbHM9aS5wb2ludHMucmVkdWNlKChmdW5jdGlvbih0LGUsaSl7cmV0dXJuIHRbXCJwXCIraV09bmV3IFYuQ29udHJvbCh7cG9zaXRpb25IYW5kbGVyOmJ0LGFjdGlvbkhhbmRsZXI6U3QoaT4wP2ktMTpyLEN0KSxhY3Rpb25OYW1lOlwibW9kaWZ5UG9seWdvblwiLHBvaW50SW5kZXg6aX0pLHR9KSx7fSksaS5fc2V0UG9zaXRpb25EaW1lbnNpb25zKHt9KSwhMH19ZXh0ZW5kR2V0KHQpe2lmKFwic3RhcnRQb2ludFwiPT09dHx8XCJlbmRQb2ludFwiPT09dCl7Y29uc3QgZT1bXSxpPXRoaXMuX2ZhYnJpY09iamVjdDtpZihpLnNlbGVjdGFibGUmJiFpLmdyb3VwKWZvcihsZXQgdCBpbiBpLm9Db29yZHMpZS5wdXNoKHt4Omkub0Nvb3Jkc1t0XS54LHk6aS5vQ29vcmRzW3RdLnl9KTtlbHNlIGZvcihsZXQgdCBvZiBpLnBvaW50cyl7bGV0IHI9dC54LWkucGF0aE9mZnNldC54LG49dC55LWkucGF0aE9mZnNldC55O2NvbnN0IHM9Vi51dGlsLnRyYW5zZm9ybVBvaW50KHt4OnIseTpufSxpLmNhbGNUcmFuc2Zvcm1NYXRyaXgoKSk7ZS5wdXNoKHt4OnMueCx5OnMueX0pfXJldHVyblwic3RhcnRQb2ludFwiPT09dD9lWzBdOmVbMV19fXVwZGF0ZUNvb3JkaW5hdGVCYXNlRnJvbUltYWdlVG9WaWV3KCl7Y29uc3QgdD10aGlzLmdldChcInN0YXJ0UG9pbnRcIiksZT10aGlzLmdldChcImVuZFBvaW50XCIpO3RoaXMuc2V0KFwic3RhcnRQb2ludFwiLHt4OnRoaXMuY29udmVydFByb3BGcm9tVmlld1RvSW1hZ2UodC54KSx5OnRoaXMuY29udmVydFByb3BGcm9tVmlld1RvSW1hZ2UodC55KX0pLHRoaXMuc2V0KFwiZW5kUG9pbnRcIix7eDp0aGlzLmNvbnZlcnRQcm9wRnJvbVZpZXdUb0ltYWdlKGUueCkseTp0aGlzLmNvbnZlcnRQcm9wRnJvbVZpZXdUb0ltYWdlKGUueSl9KX11cGRhdGVDb29yZGluYXRlQmFzZUZyb21WaWV3VG9JbWFnZSgpe2NvbnN0IHQ9dGhpcy5nZXQoXCJzdGFydFBvaW50XCIpLGU9dGhpcy5nZXQoXCJlbmRQb2ludFwiKTt0aGlzLnNldChcInN0YXJ0UG9pbnRcIix7eDp0aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHQueCkseTp0aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHQueSl9KSx0aGlzLnNldChcImVuZFBvaW50XCIse3g6dGhpcy5jb252ZXJ0UHJvcEZyb21JbWFnZVRvVmlldyhlLngpLHk6dGhpcy5jb252ZXJ0UHJvcEZyb21JbWFnZVRvVmlldyhlLnkpfSl9c2V0UG9zaXRpb24odCl7dGhpcy5zZXRMaW5lKHQpfWdldFBvc2l0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TGluZSgpfXVwZGF0ZVBvc2l0aW9uKCl7eCh0aGlzLEl0LFwiZlwiKSYmdGhpcy5zZXRMaW5lKHgodGhpcyxJdCxcImZcIikpfXNldFBvbHlnb24oKXt9Z2V0UG9seWdvbigpe3JldHVybiBudWxsfXNldExpbmUodCl7aWYoIWV0KHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdsaW5lJy5cIik7aWYodGhpcy5fZHJhd2luZ0xheWVyKXtpZihcInZpZXdcIj09PXRoaXMuY29vcmRpbmF0ZUJhc2UpdGhpcy5zZXQoXCJzdGFydFBvaW50XCIse3g6dGhpcy5jb252ZXJ0UHJvcEZyb21WaWV3VG9JbWFnZSh0LnN0YXJ0UG9pbnQueCkseTp0aGlzLmNvbnZlcnRQcm9wRnJvbVZpZXdUb0ltYWdlKHQuc3RhcnRQb2ludC55KX0pLHRoaXMuc2V0KFwiZW5kUG9pbnRcIix7eDp0aGlzLmNvbnZlcnRQcm9wRnJvbVZpZXdUb0ltYWdlKHQuZW5kUG9pbnQueCkseTp0aGlzLmNvbnZlcnRQcm9wRnJvbVZpZXdUb0ltYWdlKHQuZW5kUG9pbnQueSl9KTtlbHNle2lmKFwiaW1hZ2VcIiE9PXRoaXMuY29vcmRpbmF0ZUJhc2UpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCAnY29vcmRpbmF0ZUJhc2UnLlwiKTt0aGlzLnNldChcInN0YXJ0UG9pbnRcIix0LnN0YXJ0UG9pbnQpLHRoaXMuc2V0KFwiZW5kUG9pbnRcIix0LmVuZFBvaW50KX10aGlzLl9kcmF3aW5nTGF5ZXIucmVuZGVyQWxsKCl9ZWxzZSBDKHRoaXMsSXQsSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0KSksXCJmXCIpfWdldExpbmUoKXtpZih0aGlzLl9kcmF3aW5nTGF5ZXIpe2lmKFwidmlld1wiPT09dGhpcy5jb29yZGluYXRlQmFzZSlyZXR1cm57c3RhcnRQb2ludDp7eDp0aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHRoaXMuZ2V0KFwic3RhcnRQb2ludFwiKS54KSx5OnRoaXMuY29udmVydFByb3BGcm9tSW1hZ2VUb1ZpZXcodGhpcy5nZXQoXCJzdGFydFBvaW50XCIpLnkpfSxlbmRQb2ludDp7eDp0aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHRoaXMuZ2V0KFwiZW5kUG9pbnRcIikueCkseTp0aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHRoaXMuZ2V0KFwiZW5kUG9pbnRcIikueSl9fTtpZihcImltYWdlXCI9PT10aGlzLmNvb3JkaW5hdGVCYXNlKXJldHVybntzdGFydFBvaW50OnRoaXMuZ2V0KFwic3RhcnRQb2ludFwiKSxlbmRQb2ludDp0aGlzLmdldChcImVuZFBvaW50XCIpfTt0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdjb29yZGluYXRlQmFzZScuXCIpfXJldHVybiB4KHRoaXMsSXQsXCJmXCIpP0pTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoeCh0aGlzLEl0LFwiZlwiKSkpOm51bGx9fUl0PW5ldyBXZWFrTWFwO2NsYXNzIGRlIGV4dGVuZHMgVHR7Y29uc3RydWN0b3IodCxlKXtpZihzdXBlcih7cG9pbnRzOm51bGw9PXQ/dm9pZCAwOnQucG9pbnRzfSxlKSxMdC5zZXQodGhpcyx2b2lkIDApLCFudCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAncXVhZCcuXCIpO0ModGhpcyxMdCxKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQpKSxcImZcIiksdGhpcy5fbWVkaWFUeXBlPVwicXVhZFwifXNldFBvc2l0aW9uKHQpe3RoaXMuc2V0UXVhZCh0KX1nZXRQb3NpdGlvbigpe3JldHVybiB0aGlzLmdldFF1YWQoKX11cGRhdGVQb3NpdGlvbigpe3godGhpcyxMdCxcImZcIikmJnRoaXMuc2V0UXVhZCh4KHRoaXMsTHQsXCJmXCIpKX1zZXRQb2x5Z29uKCl7fWdldFBvbHlnb24oKXtyZXR1cm4gbnVsbH1zZXRRdWFkKHQpe2lmKCFudCh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAncXVhZCcuXCIpO2lmKHRoaXMuX2RyYXdpbmdMYXllcil7aWYoXCJ2aWV3XCI9PT10aGlzLmNvb3JkaW5hdGVCYXNlKXtjb25zdCBlPXQucG9pbnRzLm1hcCgodD0+KHt4OnRoaXMuY29udmVydFByb3BGcm9tVmlld1RvSW1hZ2UodC54KSx5OnRoaXMuY29udmVydFByb3BGcm9tVmlld1RvSW1hZ2UodC55KX0pKSk7dGhpcy5zZXQoXCJ2ZXJ0aWNlc1wiLGUpfWVsc2V7aWYoXCJpbWFnZVwiIT09dGhpcy5jb29yZGluYXRlQmFzZSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdjb29yZGluYXRlQmFzZScuXCIpO3RoaXMuc2V0KFwidmVydGljZXNcIix0LnBvaW50cyl9dGhpcy5fZHJhd2luZ0xheWVyLnJlbmRlckFsbCgpfWVsc2UgQyh0aGlzLEx0LEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodCkpLFwiZlwiKX1nZXRRdWFkKCl7aWYodGhpcy5fZHJhd2luZ0xheWVyKXtpZihcInZpZXdcIj09PXRoaXMuY29vcmRpbmF0ZUJhc2Upe3JldHVybntwb2ludHM6dGhpcy5nZXQoXCJ2ZXJ0aWNlc1wiKS5tYXAoKHQ9Pih7eDp0aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHQueCkseTp0aGlzLmNvbnZlcnRQcm9wRnJvbUltYWdlVG9WaWV3KHQueSl9KSkpfX1pZihcImltYWdlXCI9PT10aGlzLmNvb3JkaW5hdGVCYXNlKXJldHVybntwb2ludHM6dGhpcy5nZXQoXCJ2ZXJ0aWNlc1wiKX07dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCAnY29vcmRpbmF0ZUJhc2UnLlwiKX1yZXR1cm4geCh0aGlzLEx0LFwiZlwiKT9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHgodGhpcyxMdCxcImZcIikpKTpudWxsfX1MdD1uZXcgV2Vha01hcDtjbGFzcyBmZSBleHRlbmRzIFp7Y29uc3RydWN0b3IodCl7c3VwZXIobmV3IFYuR3JvdXAodC5tYXAoKHQ9PnQuX2dldEZhYnJpY09iamVjdCgpKSkpKSx0aGlzLl9mYWJyaWNPYmplY3Qub24oXCJzZWxlY3RlZFwiLCgoKT0+e3RoaXMuc2V0U3RhdGUoai5ESVNfU0VMRUNURUQpO2NvbnN0IHQ9dGhpcy5fZmFicmljT2JqZWN0Ll9vYmplY3RzO2ZvcihsZXQgZSBvZiB0KXNldFRpbWVvdXQoKCgpPT57ZSYmZS5maXJlKFwic2VsZWN0ZWRcIil9KSwwKTtzZXRUaW1lb3V0KCgoKT0+e3RoaXMuX2ZhYnJpY09iamVjdCYmdGhpcy5fZmFicmljT2JqZWN0LmNhbnZhcyYmKHRoaXMuX2ZhYnJpY09iamVjdC5kaXJ0eT0hMCx0aGlzLl9mYWJyaWNPYmplY3QuY2FudmFzLnJlbmRlckFsbCgpKX0pLDApfSkpLHRoaXMuX2ZhYnJpY09iamVjdC5vbihcImRlc2VsZWN0ZWRcIiwoKCk9Pnt0aGlzLnNldFN0YXRlKGouRElTX0RFRkFVTFQpO2NvbnN0IHQ9dGhpcy5fZmFicmljT2JqZWN0Ll9vYmplY3RzO2ZvcihsZXQgZSBvZiB0KXNldFRpbWVvdXQoKCgpPT57ZSYmZS5maXJlKFwiZGVzZWxlY3RlZFwiKX0pLDApO3NldFRpbWVvdXQoKCgpPT57dGhpcy5fZmFicmljT2JqZWN0JiZ0aGlzLl9mYWJyaWNPYmplY3QuY2FudmFzJiYodGhpcy5fZmFicmljT2JqZWN0LmRpcnR5PSEwLHRoaXMuX2ZhYnJpY09iamVjdC5jYW52YXMucmVuZGVyQWxsKCkpfSksMCl9KSksdGhpcy5fbWVkaWFUeXBlPVwiZ3JvdXBcIn1leHRlbmRTZXQodCxlKXtyZXR1cm4hMX1leHRlbmRHZXQodCl7fXVwZGF0ZUNvb3JkaW5hdGVCYXNlRnJvbUltYWdlVG9WaWV3KCl7fXVwZGF0ZUNvb3JkaW5hdGVCYXNlRnJvbVZpZXdUb0ltYWdlKCl7fXNldFBvc2l0aW9uKCl7fWdldFBvc2l0aW9uKCl7fXVwZGF0ZVBvc2l0aW9uKCl7fWdldENoaWxkRHJhd2luZ0l0ZW1zKCl7cmV0dXJuIHRoaXMuX2ZhYnJpY09iamVjdC5fb2JqZWN0cy5tYXAoKHQ9PnQuZ2V0RHJhd2luZ0l0ZW0oKSkpfXNldENoaWxkRHJhd2luZ0l0ZW1zKHQpe2lmKCF0fHwhdC5pc0RyYXdpbmdJdGVtKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZHJhd2luZyBpdGVtLlwiKTt0aGlzLl9kcmF3aW5nTGF5ZXI/dGhpcy5fZHJhd2luZ0xheWVyLl91cGRhdGVHcm91cEl0ZW0odGhpcyx0LFwiYWRkXCIpOnRoaXMuX2ZhYnJpY09iamVjdC5hZGRXaXRoVXBkYXRlKHQuX2dldEZhYnJpY09iamVjdCgpKX1yZW1vdmVDaGlsZEl0ZW0odCl7dCYmdC5pc0RyYXdpbmdJdGVtJiYodGhpcy5fZHJhd2luZ0xheWVyP3RoaXMuX2RyYXdpbmdMYXllci5fdXBkYXRlR3JvdXBJdGVtKHRoaXMsdCxcInJlbW92ZVwiKTp0aGlzLl9mYWJyaWNPYmplY3QucmVtb3ZlV2l0aFVwZGF0ZSh0Ll9nZXRGYWJyaWNPYmplY3QoKSkpfX1jbGFzcyBnZXtzdGF0aWMgY3JlYXRlRHJhd2luZ1N0eWxlKHQpe2lmKCFvdCh0KSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0eWxlIGRlZmluaXRpb24uXCIpO2xldCBlLGk9Z2UuVVNFUl9TVEFSVF9TVFlMRV9JRDtmb3IoO3goZ2UsRHQsXCJmXCIsTXQpLmhhcyhpKTspaSsrO2U9aTtjb25zdCByPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodCkpO3IuaWQ9ZTtmb3IobGV0IHQgaW4geChnZSxEdCxcImZcIixGdCkpci5oYXNPd25Qcm9wZXJ0eSh0KXx8KHJbdF09eChnZSxEdCxcImZcIixGdClbdF0pO3JldHVybiB4KGdlLER0LFwiZlwiLE10KS5zZXQoZSxyKSxyLmlkfXN0YXRpYyBfZ2V0RHJhd2luZ1N0eWxlKHQsZSl7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzdHlsZSBpZC5cIik7Y29uc3QgaT14KGdlLER0LFwiZlwiLE10KS5nZXQodCk7cmV0dXJuIGk/ZT9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGkpKTppOm51bGx9c3RhdGljIGdldERyYXdpbmdTdHlsZSh0KXtyZXR1cm4gdGhpcy5fZ2V0RHJhd2luZ1N0eWxlKHQsITApfXN0YXRpYyBnZXRBbGxEcmF3aW5nU3R5bGVzKCl7cmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbSh4KGdlLER0LFwiZlwiLE10KS52YWx1ZXMoKSkpKX1zdGF0aWMgX3VwZGF0ZURyYXdpbmdTdHlsZSh0LGUpe2lmKCFvdChlKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHN0eWxlIGRlZmluaXRpb24uXCIpO2NvbnN0IGk9eChnZSxEdCxcImZcIixNdCkuZ2V0KHQpO2lmKGkpZm9yKGxldCB0IGluIGUpaS5oYXNPd25Qcm9wZXJ0eSh0KSYmKGlbdF09ZVt0XSl9c3RhdGljIHVwZGF0ZURyYXdpbmdTdHlsZSh0LGUpe3RoaXMuX3VwZGF0ZURyYXdpbmdTdHlsZSh0LGUpfX1EdD1nZSxnZS5TVFlMRV9CTFVFX1NUUk9LRT0xLGdlLlNUWUxFX0dSRUVOX1NUUk9LRT0yLGdlLlNUWUxFX09SQU5HRV9TVFJPS0U9MyxnZS5TVFlMRV9ZRUxMT1dfU1RST0tFPTQsZ2UuU1RZTEVfQkxVRV9TVFJPS0VfRklMTD01LGdlLlNUWUxFX0dSRUVOX1NUUk9LRV9GSUxMPTYsZ2UuU1RZTEVfT1JBTkdFX1NUUk9LRV9GSUxMPTcsZ2UuU1RZTEVfWUVMTE9XX1NUUk9LRV9GSUxMPTgsZ2UuU1RZTEVfQkxVRV9TVFJPS0VfVFJBTlNQQVJFTlQ9OSxnZS5TVFlMRV9HUkVFTl9TVFJPS0VfVFJBTlNQQVJFTlQ9MTAsZ2UuU1RZTEVfT1JBTkdFX1NUUk9LRV9UUkFOU1BBUkVOVD0xMSxnZS5VU0VSX1NUQVJUX1NUWUxFX0lEPTEwMjQsTXQ9e3ZhbHVlOm5ldyBNYXAoW1tnZS5TVFlMRV9CTFVFX1NUUk9LRSx7aWQ6Z2UuU1RZTEVfQkxVRV9TVFJPS0UsbGluZVdpZHRoOjQsZmlsbFN0eWxlOlwicmdiYSg3MywgMTczLCAyNDUsIDAuMylcIixzdHJva2VTdHlsZTpcInJnYmEoNzMsIDE3MywgMjQ1LCAxKVwiLHBhaW50TW9kZTpcInN0cm9rZVwiLGZvbnRGYW1pbHk6XCJjb25zb2xhc1wiLGZvbnRTaXplOjQwfV0sW2dlLlNUWUxFX0dSRUVOX1NUUk9LRSx7aWQ6Z2UuU1RZTEVfR1JFRU5fU1RST0tFLGxpbmVXaWR0aDoyLGZpbGxTdHlsZTpcInJnYmEoNzMsIDI0NSwgNzMsIDAuMylcIixzdHJva2VTdHlsZTpcInJnYmEoNzMsIDI0NSwgNzMsIDAuOSlcIixwYWludE1vZGU6XCJzdHJva2VBbmRGaWxsXCIsZm9udEZhbWlseTpcImNvbnNvbGFzXCIsZm9udFNpemU6NDB9XSxbZ2UuU1RZTEVfT1JBTkdFX1NUUk9LRSx7aWQ6Z2UuU1RZTEVfT1JBTkdFX1NUUk9LRSxsaW5lV2lkdGg6MixmaWxsU3R5bGU6XCJyZ2JhKDI1NCwgMTgwLCAzMiwgMC4zKVwiLHN0cm9rZVN0eWxlOlwicmdiYSgyNTQsIDE4MCwgMzIsIDAuOSlcIixwYWludE1vZGU6XCJzdHJva2VBbmRGaWxsXCIsZm9udEZhbWlseTpcImNvbnNvbGFzXCIsZm9udFNpemU6NDB9XSxbZ2UuU1RZTEVfWUVMTE9XX1NUUk9LRSx7aWQ6Z2UuU1RZTEVfWUVMTE9XX1NUUk9LRSxsaW5lV2lkdGg6MixmaWxsU3R5bGU6XCJyZ2JhKDI0NSwgMjM2LCA3MywgMC4zKVwiLHN0cm9rZVN0eWxlOlwicmdiYSgyNDUsIDIzNiwgNzMsIDEpXCIscGFpbnRNb2RlOlwic3Ryb2tlXCIsZm9udEZhbWlseTpcImNvbnNvbGFzXCIsZm9udFNpemU6NDB9XSxbZ2UuU1RZTEVfQkxVRV9TVFJPS0VfRklMTCx7aWQ6Z2UuU1RZTEVfQkxVRV9TVFJPS0VfRklMTCxsaW5lV2lkdGg6NCxmaWxsU3R5bGU6XCJyZ2JhKDczLCAxNzMsIDI0NSwgMC4zKVwiLHN0cm9rZVN0eWxlOlwicmdiYSg3MywgMTczLCAyNDUsIDEpXCIscGFpbnRNb2RlOlwic3Ryb2tlQW5kRmlsbFwiLGZvbnRGYW1pbHk6XCJjb25zb2xhc1wiLGZvbnRTaXplOjQwfV0sW2dlLlNUWUxFX0dSRUVOX1NUUk9LRV9GSUxMLHtpZDpnZS5TVFlMRV9HUkVFTl9TVFJPS0VfRklMTCxsaW5lV2lkdGg6MixmaWxsU3R5bGU6XCJyZ2JhKDczLCAyNDUsIDczLCAwLjMpXCIsc3Ryb2tlU3R5bGU6XCJyZ2JhKDczLCAyNDUsIDczLCAwLjkpXCIscGFpbnRNb2RlOlwic3Ryb2tlQW5kRmlsbFwiLGZvbnRGYW1pbHk6XCJjb25zb2xhc1wiLGZvbnRTaXplOjQwfV0sW2dlLlNUWUxFX09SQU5HRV9TVFJPS0VfRklMTCx7aWQ6Z2UuU1RZTEVfT1JBTkdFX1NUUk9LRV9GSUxMLGxpbmVXaWR0aDoyLGZpbGxTdHlsZTpcInJnYmEoMjU0LCAxODAsIDMyLCAwLjMpXCIsc3Ryb2tlU3R5bGU6XCJyZ2JhKDI1NCwgMTgwLCAzMiwgMSlcIixwYWludE1vZGU6XCJzdHJva2VBbmRGaWxsXCIsZm9udEZhbWlseTpcImNvbnNvbGFzXCIsZm9udFNpemU6NDB9XSxbZ2UuU1RZTEVfWUVMTE9XX1NUUk9LRV9GSUxMLHtpZDpnZS5TVFlMRV9ZRUxMT1dfU1RST0tFX0ZJTEwsbGluZVdpZHRoOjIsZmlsbFN0eWxlOlwicmdiYSgyNDUsIDIzNiwgNzMsIDAuMylcIixzdHJva2VTdHlsZTpcInJnYmEoMjQ1LCAyMzYsIDczLCAxKVwiLHBhaW50TW9kZTpcInN0cm9rZUFuZEZpbGxcIixmb250RmFtaWx5OlwiY29uc29sYXNcIixmb250U2l6ZTo0MH1dLFtnZS5TVFlMRV9CTFVFX1NUUk9LRV9UUkFOU1BBUkVOVCx7aWQ6Z2UuU1RZTEVfQkxVRV9TVFJPS0VfVFJBTlNQQVJFTlQsbGluZVdpZHRoOjQsZmlsbFN0eWxlOlwicmdiYSg3MywgMjQ1LCA3MywgMC4yKVwiLHN0cm9rZVN0eWxlOlwidHJhbnNwYXJlbnRcIixwYWludE1vZGU6XCJzdHJva2VBbmRGaWxsXCIsZm9udEZhbWlseTpcImNvbnNvbGFzXCIsZm9udFNpemU6NDB9XSxbZ2UuU1RZTEVfR1JFRU5fU1RST0tFX1RSQU5TUEFSRU5ULHtpZDpnZS5TVFlMRV9HUkVFTl9TVFJPS0VfVFJBTlNQQVJFTlQsbGluZVdpZHRoOjIsZmlsbFN0eWxlOlwicmdiYSg3MywgMjQ1LCA3MywgMC4yKVwiLHN0cm9rZVN0eWxlOlwidHJhbnNwYXJlbnRcIixwYWludE1vZGU6XCJzdHJva2VBbmRGaWxsXCIsZm9udEZhbWlseTpcImNvbnNvbGFzXCIsZm9udFNpemU6NDB9XSxbZ2UuU1RZTEVfT1JBTkdFX1NUUk9LRV9UUkFOU1BBUkVOVCx7aWQ6Z2UuU1RZTEVfT1JBTkdFX1NUUk9LRV9UUkFOU1BBUkVOVCxsaW5lV2lkdGg6MixmaWxsU3R5bGU6XCJyZ2JhKDI1NCwgMTgwLCAzMiwgMC4yKVwiLHN0cm9rZVN0eWxlOlwidHJhbnNwYXJlbnRcIixwYWludE1vZGU6XCJzdHJva2VBbmRGaWxsXCIsZm9udEZhbWlseTpcImNvbnNvbGFzXCIsZm9udFNpemU6NDB9XV0pfSxGdD17dmFsdWU6e2xpbmVXaWR0aDoyLGZpbGxTdHlsZTpcInJnYmEoMjQ1LCAyMzYsIDczLCAwLjMpXCIsc3Ryb2tlU3R5bGU6XCJyZ2JhKDI0NSwgMjM2LCA3MywgMSlcIixwYWludE1vZGU6XCJzdHJva2VcIixmb250RmFtaWx5OlwiY29uc29sYXNcIixmb250U2l6ZTo0MH19LFwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmKFYuU3RhdGljQ2FudmFzLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNSZW5kZXJpbmcmJihWLnV0aWwuY2FuY2VsQW5pbUZyYW1lKHRoaXMuaXNSZW5kZXJpbmcpLHRoaXMuaXNSZW5kZXJpbmc9MCksdGhpcy5mb3JFYWNoT2JqZWN0KChmdW5jdGlvbih0KXt0LmRpc3Bvc2UmJnQuZGlzcG9zZSgpfSkpLHRoaXMuX29iamVjdHM9W10sdGhpcy5iYWNrZ3JvdW5kSW1hZ2UmJnRoaXMuYmFja2dyb3VuZEltYWdlLmRpc3Bvc2UmJnRoaXMuYmFja2dyb3VuZEltYWdlLmRpc3Bvc2UoKSx0aGlzLmJhY2tncm91bmRJbWFnZT1udWxsLHRoaXMub3ZlcmxheUltYWdlJiZ0aGlzLm92ZXJsYXlJbWFnZS5kaXNwb3NlJiZ0aGlzLm92ZXJsYXlJbWFnZS5kaXNwb3NlKCksdGhpcy5vdmVybGF5SW1hZ2U9bnVsbCx0aGlzLl9pVGV4dEluc3RhbmNlcz1udWxsLHRoaXMuY29udGV4dENvbnRhaW5lcj1udWxsLHRoaXMubG93ZXJDYW52YXNFbC5jbGFzc0xpc3QucmVtb3ZlKFwibG93ZXItY2FudmFzXCIpLGRlbGV0ZSB0aGlzLl9vcmlnaW5hbENhbnZhc1N0eWxlLHRoaXMubG93ZXJDYW52YXNFbC5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLHRoaXMud2lkdGgpLHRoaXMubG93ZXJDYW52YXNFbC5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIix0aGlzLmhlaWdodCksVi51dGlsLmNsZWFuVXBKc2RvbU5vZGUodGhpcy5sb3dlckNhbnZhc0VsKSx0aGlzLmxvd2VyQ2FudmFzRWw9dm9pZCAwLHRoaXN9LFYuT2JqZWN0LnByb3RvdHlwZS50cmFuc3BhcmVudENvcm5lcnM9ITEsVi5PYmplY3QucHJvdG90eXBlLmNvcm5lclNpemU9MjAsVi5PYmplY3QucHJvdG90eXBlLnRvdWNoQ29ybmVyU2l6ZT0xMDAsVi5PYmplY3QucHJvdG90eXBlLmNvcm5lckNvbG9yPVwicmdiKDI1NCwxNDIsMjApXCIsVi5PYmplY3QucHJvdG90eXBlLmNvcm5lclN0eWxlPVwiY2lyY2xlXCIsVi5PYmplY3QucHJvdG90eXBlLnN0cm9rZVVuaWZvcm09ITAsVi5PYmplY3QucHJvdG90eXBlLmhhc0JvcmRlcnM9ITEsVi5DYW52YXMucHJvdG90eXBlLmNvbnRhaW5lckNsYXNzPVwiXCIsVi5DYW52YXMucHJvdG90eXBlLmdldFBvaW50ZXI9ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9hYnNvbHV0ZVBvaW50ZXImJiFlKXJldHVybiB0aGlzLl9hYnNvbHV0ZVBvaW50ZXI7aWYodGhpcy5fcG9pbnRlciYmZSlyZXR1cm4gdGhpcy5fcG9pbnRlcjt2YXIgaSxyPXRoaXMudXBwZXJDYW52YXNFbCxuPVYudXRpbC5nZXRQb2ludGVyKHQscikscz1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG89cy53aWR0aHx8MCxhPXMuaGVpZ2h0fHwwO28mJmF8fChcInRvcFwiaW4gcyYmXCJib3R0b21cImluIHMmJihhPU1hdGguYWJzKHMudG9wLXMuYm90dG9tKSksXCJyaWdodFwiaW4gcyYmXCJsZWZ0XCJpbiBzJiYobz1NYXRoLmFicyhzLnJpZ2h0LXMubGVmdCkpKSx0aGlzLmNhbGNPZmZzZXQoKSxuLng9bi54LXRoaXMuX29mZnNldC5sZWZ0LG4ueT1uLnktdGhpcy5fb2Zmc2V0LnRvcCxlfHwobj10aGlzLnJlc3RvcmVQb2ludGVyVnB0KG4pKTt2YXIgaD10aGlzLmdldFJldGluYVNjYWxpbmcoKTtpZigxIT09aCYmKG4ueC89aCxuLnkvPWgpLDAhPT1vJiYwIT09YSl7dmFyIGw9d2luZG93LmdldENvbXB1dGVkU3R5bGUocikub2JqZWN0Rml0LGM9ci53aWR0aCx1PXIuaGVpZ2h0LGQ9byxmPWE7aT17d2lkdGg6Yy9kLGhlaWdodDp1L2Z9O3ZhciBnLG0scD1jL3Usdj1kL2Y7cmV0dXJuXCJjb250YWluXCI9PT1sP3A+dj8oZz1kLG09ZC9wLHt4Om4ueCppLndpZHRoLHk6KG4ueS0oZi1tKS8yKSppLndpZHRofSk6KGc9ZipwLG09Zix7eDoobi54LShkLWcpLzIpKmkuaGVpZ2h0LHk6bi55KmkuaGVpZ2h0fSk6XCJjb3ZlclwiPT09bD9wPnY/e3g6KGMtaS5oZWlnaHQqZCkvMituLngqaS5oZWlnaHQseTpuLnkqaS5oZWlnaHR9Ont4Om4ueCppLndpZHRoLHk6KHUtaS53aWR0aCpmKS8yK24ueSppLndpZHRofTp7eDpuLngqaS53aWR0aCx5Om4ueSppLmhlaWdodH19cmV0dXJuIGk9e3dpZHRoOjEsaGVpZ2h0OjF9LHt4Om4ueCppLndpZHRoLHk6bi55KmkuaGVpZ2h0fX0sVi5DYW52YXMucHJvdG90eXBlLl9vblRvdWNoU3RhcnQ9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5maW5kVGFyZ2V0KHQpOyF0aGlzLmFsbG93VG91Y2hTY3JvbGxpbmcmJnQuY2FuY2VsYWJsZSYmdC5wcmV2ZW50RGVmYXVsdCYmdC5wcmV2ZW50RGVmYXVsdCgpLGUmJnQuY2FuY2VsYWJsZSYmdC5wcmV2ZW50RGVmYXVsdCYmdC5wcmV2ZW50RGVmYXVsdCgpLG51bGw9PT10aGlzLm1haW5Ub3VjaElkJiYodGhpcy5tYWluVG91Y2hJZD10aGlzLmdldFBvaW50ZXJJZCh0KSksdGhpcy5fX29uTW91c2VEb3duKHQpLHRoaXMuX3Jlc2V0VHJhbnNmb3JtRXZlbnREYXRhKCk7dmFyIGk9dGhpcy51cHBlckNhbnZhc0VsLHI9dGhpcy5fZ2V0RXZlbnRQcmVmaXgoKTtWLnV0aWwuYWRkTGlzdGVuZXIoVi5kb2N1bWVudCxcInRvdWNoZW5kXCIsdGhpcy5fb25Ub3VjaEVuZCx7cGFzc2l2ZTohMX0pLFYudXRpbC5hZGRMaXN0ZW5lcihWLmRvY3VtZW50LFwidG91Y2htb3ZlXCIsdGhpcy5fb25Nb3VzZU1vdmUse3Bhc3NpdmU6ITF9KSxWLnV0aWwucmVtb3ZlTGlzdGVuZXIoaSxyK1wiZG93blwiLHRoaXMuX29uTW91c2VEb3duKX0sVi5UZXh0Ym94LnByb3RvdHlwZS5fd3JhcExpbmU9ZnVuY3Rpb24odCxlLGkscil7Y29uc3Qgbj10Lm1hdGNoKC9bXFx1MzA0MC1cXHUzMGZmXFx1MzQwMC1cXHU0ZGJmXFx1NGUwMC1cXHU5ZmZmXFx1ZjkwMC1cXHVmYWZmXFx1ZmY2Ni1cXHVmZjlmXS9nKSxzPSEoIW58fCFuLmxlbmd0aCk7dmFyIG89MCxhPXRoaXMuc3BsaXRCeUdyYXBoZW1lfHxzLGg9W10sbD1bXSxjPWE/Vi51dGlsLnN0cmluZy5ncmFwaGVtZVNwbGl0KHQpOnQuc3BsaXQodGhpcy5fd29yZEpvaW5lcnMpLHU9XCJcIixkPTAsZj1hP1wiXCI6XCIgXCIsZz0wLG09MCxwPTAsdj0hMCxfPXRoaXMuX2dldFdpZHRoT2ZDaGFyU3BhY2luZygpO3I9cnx8MDswPT09Yy5sZW5ndGgmJmMucHVzaChbXSksaS09cjtmb3IodmFyIHk9MDt5PGMubGVuZ3RoO3krKyl1PWE/Y1t5XTpWLnV0aWwuc3RyaW5nLmdyYXBoZW1lU3BsaXQoY1t5XSksZz10aGlzLl9tZWFzdXJlV29yZCh1LGUsZCksZCs9dS5sZW5ndGgsKG8rPW0rZy1fKT5pJiYhdj8oaC5wdXNoKGwpLGw9W10sbz1nLHY9ITApOm8rPV8sdnx8YXx8bC5wdXNoKGYpLGw9bC5jb25jYXQodSksbT1hPzA6dGhpcy5fbWVhc3VyZVdvcmQoW2ZdLGUsZCksZCsrLHY9ITEsZz5wJiYocD1nKTtyZXR1cm4geSYmaC5wdXNoKGwpLHArcj50aGlzLmR5bmFtaWNNaW5XaWR0aCYmKHRoaXMuZHluYW1pY01pbldpZHRoPXAtXytyKSxofSk7Y2xhc3MgbWV7Z2V0IHdpZHRoKCl7cmV0dXJuIHRoaXMuZmFicmljQ2FudmFzLndpZHRofWdldCBoZWlnaHQoKXtyZXR1cm4gdGhpcy5mYWJyaWNDYW52YXMuaGVpZ2h0fXNldCBfYWxsb3dNdWx0aVNlbGVjdCh0KXt0aGlzLmZhYnJpY0NhbnZhcy5zZWxlY3Rpb249dCx0aGlzLmZhYnJpY0NhbnZhcy5yZW5kZXJBbGwoKX1nZXQgX2FsbG93TXVsdGlTZWxlY3QoKXtyZXR1cm4gdGhpcy5mYWJyaWNDYW52YXMuc2VsZWN0aW9ufWNvbnN0cnVjdG9yKHQsZSxpKXtpZih0aGlzLm1hcFR5cGVfU3RhdGVBbmRTdHlsZUlkPW5ldyBNYXAsdGhpcy5tb2RlPVwidmlld2VyXCIsdGhpcy5vblNlbGVjdGlvbkNoYW5nZWQ9bnVsbCx0aGlzLl9hcnJEcndhaW5nSXRlbT1bXSx0aGlzLl9hcnJGYWJyaWNPYmplY3Q9W10sdGhpcy5fdmlzaWJsZT0hMCx0Lmhhc093blByb3BlcnR5KFwiZ2V0RmFicmljQ2FudmFzXCIpKXRoaXMuZmFicmljQ2FudmFzPXQuZ2V0RmFicmljQ2FudmFzKCk7ZWxzZXtsZXQgZT10aGlzLmZhYnJpY0NhbnZhcz1uZXcgVi5DYW52YXModCxPYmplY3QuYXNzaWduKGkse2FsbG93VG91Y2hTY3JvbGxpbmc6ITAsc2VsZWN0aW9uOiExfSkpO2Uuc2V0RGltZW5zaW9ucyh7d2lkdGg6XCIxMDAlXCIsaGVpZ2h0OlwiMTAwJVwifSx7Y3NzT25seTohMH0pLGUubG93ZXJDYW52YXNFbC5jbGFzc05hbWU9XCJcIixlLnVwcGVyQ2FudmFzRWwuY2xhc3NOYW1lPVwiXCIsZS5vbihcInNlbGVjdGlvbjpjcmVhdGVkXCIsKGZ1bmN0aW9uKHQpe2NvbnN0IGU9dC5zZWxlY3RlZCxpPVtdO2ZvcihsZXQgdCBvZiBlKXtjb25zdCBlPXQuZ2V0RHJhd2luZ0l0ZW0oKS5fZHJhd2luZ0xheWVyO2UmJiFpLmluY2x1ZGVzKGUpJiZpLnB1c2goZSl9Zm9yKGxldCB0IG9mIGkpe2NvbnN0IGk9W107Zm9yKGxldCByIG9mIGUpe2NvbnN0IGU9ci5nZXREcmF3aW5nSXRlbSgpO2UuX2RyYXdpbmdMYXllcj09PXQmJmkucHVzaChlKX1zZXRUaW1lb3V0KCgoKT0+e3Qub25TZWxlY3Rpb25DaGFuZ2VkJiZ0Lm9uU2VsZWN0aW9uQ2hhbmdlZChpLFtdKX0pLDApfX0pKSxlLm9uKFwiYmVmb3JlOnNlbGVjdGlvbjpjbGVhcmVkXCIsKGZ1bmN0aW9uKHQpe2NvbnN0IGU9dGhpcy5nZXRBY3RpdmVPYmplY3RzKCksaT1bXTtmb3IobGV0IHQgb2YgZSl7Y29uc3QgZT10LmdldERyYXdpbmdJdGVtKCkuX2RyYXdpbmdMYXllcjtlJiYhaS5pbmNsdWRlcyhlKSYmaS5wdXNoKGUpfWZvcihsZXQgdCBvZiBpKXtjb25zdCBpPVtdO2ZvcihsZXQgciBvZiBlKXtjb25zdCBlPXIuZ2V0RHJhd2luZ0l0ZW0oKTtlLl9kcmF3aW5nTGF5ZXI9PT10JiZpLnB1c2goZSl9c2V0VGltZW91dCgoKCk9Pntjb25zdCBlPVtdO2ZvcihsZXQgciBvZiBpKXQuaGFzRHJhd2luZ0l0ZW0ocikmJmUucHVzaChyKTtlLmxlbmd0aD4wJiZ0Lm9uU2VsZWN0aW9uQ2hhbmdlZCYmdC5vblNlbGVjdGlvbkNoYW5nZWQoW10sZSl9KSwwKX19KSksZS5vbihcInNlbGVjdGlvbjp1cGRhdGVkXCIsKGZ1bmN0aW9uKHQpe2NvbnN0IGU9dC5zZWxlY3RlZCxpPXQuZGVzZWxlY3RlZCxyPVtdO2ZvcihsZXQgdCBvZiBlKXtjb25zdCBlPXQuZ2V0RHJhd2luZ0l0ZW0oKS5fZHJhd2luZ0xheWVyO2UmJiFyLmluY2x1ZGVzKGUpJiZyLnB1c2goZSl9Zm9yKGxldCB0IG9mIGkpe2NvbnN0IGU9dC5nZXREcmF3aW5nSXRlbSgpLl9kcmF3aW5nTGF5ZXI7ZSYmIXIuaW5jbHVkZXMoZSkmJnIucHVzaChlKX1mb3IobGV0IHQgb2Ygcil7Y29uc3Qgcj1bXSxuPVtdO2ZvcihsZXQgaSBvZiBlKXtjb25zdCBlPWkuZ2V0RHJhd2luZ0l0ZW0oKTtlLl9kcmF3aW5nTGF5ZXI9PT10JiZyLnB1c2goZSl9Zm9yKGxldCBlIG9mIGkpe2NvbnN0IGk9ZS5nZXREcmF3aW5nSXRlbSgpO2kuX2RyYXdpbmdMYXllcj09PXQmJm4ucHVzaChpKX1zZXRUaW1lb3V0KCgoKT0+e3Qub25TZWxlY3Rpb25DaGFuZ2VkJiZ0Lm9uU2VsZWN0aW9uQ2hhbmdlZChyLG4pfSksMCl9fSkpLGUud3JhcHBlckVsLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIix0LmdldEZhYnJpY0NhbnZhcz0oKT0+dGhpcy5mYWJyaWNDYW52YXN9bGV0IHIsbjtzd2l0Y2godGhpcy5pZD1lLGUpe2Nhc2UgbWUuREROX0xBWUVSX0lEOnI9Z2UuZ2V0RHJhd2luZ1N0eWxlKGdlLlNUWUxFX0JMVUVfU1RST0tFKSxuPWdlLmdldERyYXdpbmdTdHlsZShnZS5TVFlMRV9CTFVFX1NUUk9LRV9GSUxMKTticmVhaztjYXNlIG1lLkRCUl9MQVlFUl9JRDpyPWdlLmdldERyYXdpbmdTdHlsZShnZS5TVFlMRV9PUkFOR0VfU1RST0tFKSxuPWdlLmdldERyYXdpbmdTdHlsZShnZS5TVFlMRV9PUkFOR0VfU1RST0tFX0ZJTEwpO2JyZWFrO2Nhc2UgbWUuRExSX0xBWUVSX0lEOnI9Z2UuZ2V0RHJhd2luZ1N0eWxlKGdlLlNUWUxFX0dSRUVOX1NUUk9LRSksbj1nZS5nZXREcmF3aW5nU3R5bGUoZ2UuU1RZTEVfR1JFRU5fU1RST0tFX0ZJTEwpO2JyZWFrO2RlZmF1bHQ6cj1nZS5nZXREcmF3aW5nU3R5bGUoZ2UuU1RZTEVfWUVMTE9XX1NUUk9LRSksbj1nZS5nZXREcmF3aW5nU3R5bGUoZ2UuU1RZTEVfWUVMTE9XX1NUUk9LRV9GSUxMKX1mb3IobGV0IHQgb2YgWi5hcnJNZWRpYVR5cGVzKXRoaXMubWFwVHlwZV9TdGF0ZUFuZFN0eWxlSWQuc2V0KHQse2RlZmF1bHQ6ci5pZCxzZWxlY3RlZDpuLmlkfSl9Z2V0SWQoKXtyZXR1cm4gdGhpcy5pZH1zZXRWaXNpYmxlKHQpe2lmKHQpe2ZvcihsZXQgdCBvZiB0aGlzLl9hcnJGYWJyaWNPYmplY3QpdC52aXNpYmxlPSEwLHQuaGFzQ29udHJvbHM9ITA7dGhpcy5fdmlzaWJsZT0hMH1lbHNle2ZvcihsZXQgdCBvZiB0aGlzLl9hcnJGYWJyaWNPYmplY3QpdC52aXNpYmxlPSExLHQuaGFzQ29udHJvbHM9ITE7dGhpcy5fdmlzaWJsZT0hMX10aGlzLmZhYnJpY0NhbnZhcy5yZW5kZXJBbGwoKX1pc1Zpc2libGUoKXtyZXR1cm4gdGhpcy5fdmlzaWJsZX1fZ2V0SXRlbUN1cnJlbnRTdHlsZSh0KXtpZih0LnN0eWxlSWQpcmV0dXJuIGdlLmdldERyYXdpbmdTdHlsZSh0LnN0eWxlSWQpO2NvbnN0IGU9Z2UuZ2V0RHJhd2luZ1N0eWxlKHQuX21hcFN0YXRlX1N0eWxlSWQuZ2V0KHQuc3R5bGVTZWxlY3RvcikpO3JldHVybiBlfHxudWxsfV9jaGFuZ2VNZWRpYVR5cGVDdXJTdHlsZUluU3R5bGVTZWxlY3Rvcih0LGUsaSxyKXtjb25zdCBuPXRoaXMuZ2V0RHJhd2luZ0l0ZW1zKChlPT5lLl9tZWRpYVR5cGU9PT10KSk7Zm9yKGxldCB0IG9mIG4pdC5zdHlsZVNlbGVjdG9yPT09ZSYmdGhpcy5fY2hhbmdlSXRlbVN0eWxlKHQsaSwhMCk7cnx8dGhpcy5mYWJyaWNDYW52YXMucmVuZGVyQWxsKCl9X2NoYW5nZUl0ZW1TdHlsZSh0LGUsaSl7aWYoIXR8fCFlKXJldHVybjtjb25zdCByPXQuX2dldEZhYnJpY09iamVjdCgpO1wibnVtYmVyXCI9PXR5cGVvZiB0LnN0eWxlSWQmJihlPWdlLmdldERyYXdpbmdTdHlsZSh0LnN0eWxlSWQpKSxyLnN0cm9rZVdpZHRoPWUubGluZVdpZHRoLFwiZmlsbFwiPT09ZS5wYWludE1vZGU/KHIuZmlsbD1lLmZpbGxTdHlsZSxyLnN0cm9rZT1lLmZpbGxTdHlsZSk6XCJzdHJva2VcIj09PWUucGFpbnRNb2RlPyhyLmZpbGw9XCJ0cmFuc3BhcmVudFwiLHIuc3Ryb2tlPWUuc3Ryb2tlU3R5bGUpOlwic3Ryb2tlQW5kRmlsbFwiPT09ZS5wYWludE1vZGUmJihyLmZpbGw9ZS5maWxsU3R5bGUsci5zdHJva2U9ZS5zdHJva2VTdHlsZSksci5mb250RmFtaWx5JiYoci5mb250RmFtaWx5PWUuZm9udEZhbWlseSksci5mb250U2l6ZSYmKHIuZm9udFNpemU9ZS5mb250U2l6ZSksci5ncm91cHx8KHIuZGlydHk9ITApLGl8fHRoaXMuZmFicmljQ2FudmFzLnJlbmRlckFsbCgpfV91cGRhdGVHcm91cEl0ZW0odCxlLGkpe2lmKCF0fHwhZSlyZXR1cm47Y29uc3Qgcj10LmdldENoaWxkRHJhd2luZ0l0ZW1zKCk7aWYoXCJhZGRcIj09PWkpe2lmKHIuaW5jbHVkZXMoZSkpcmV0dXJuO2NvbnN0IGk9ZS5fZ2V0RmFicmljT2JqZWN0KCk7aWYodGhpcy5mYWJyaWNDYW52YXMuZ2V0T2JqZWN0cygpLmluY2x1ZGVzKGkpKXtpZighdGhpcy5fYXJyRmFicmljT2JqZWN0LmluY2x1ZGVzKGkpKXRocm93IG5ldyBFcnJvcihcIkV4aXN0ZWQgaW4gb3RoZXIgZHJhd2luZyBsYXllcnMuXCIpO2UuX3pJbmRleD1udWxsfWVsc2V7bGV0IGk7aWYoZS5zdHlsZUlkKWk9Z2UuZ2V0RHJhd2luZ1N0eWxlKGUuc3R5bGVJZCk7ZWxzZXtjb25zdCByPXRoaXMubWFwVHlwZV9TdGF0ZUFuZFN0eWxlSWQuZ2V0KGUuX21lZGlhVHlwZSk7aT1nZS5nZXREcmF3aW5nU3R5bGUoclt0LnN0eWxlU2VsZWN0b3JdKTtjb25zdCBuPSgpPT57dGhpcy5fY2hhbmdlSXRlbVN0eWxlKGUsZ2UuZ2V0RHJhd2luZ1N0eWxlKHRoaXMubWFwVHlwZV9TdGF0ZUFuZFN0eWxlSWQuZ2V0KGUuX21lZGlhVHlwZSkuc2VsZWN0ZWQpLCEwKX0scz0oKT0+e3RoaXMuX2NoYW5nZUl0ZW1TdHlsZShlLGdlLmdldERyYXdpbmdTdHlsZSh0aGlzLm1hcFR5cGVfU3RhdGVBbmRTdHlsZUlkLmdldChlLl9tZWRpYVR5cGUpLmRlZmF1bHQpLCEwKX07ZS5fb24oXCJzZWxlY3RlZFwiLG4pLGUuX29uKFwiZGVzZWxlY3RlZFwiLHMpLGUuX2Z1bmNDaGFuZ2VTdHlsZVRvU2VsZWN0ZWQ9bixlLl9mdW5jQ2hhbmdlU3R5bGVUb0RlZmF1bHQ9c31lLl9kcmF3aW5nTGF5ZXI9dGhpcyxlLl9kcmF3aW5nTGF5ZXJJZD10aGlzLmlkLHRoaXMuX2NoYW5nZUl0ZW1TdHlsZShlLGksITApfXQuX2ZhYnJpY09iamVjdC5hZGRXaXRoVXBkYXRlKGUuX2dldEZhYnJpY09iamVjdCgpKX1lbHNle2lmKFwicmVtb3ZlXCIhPT1pKXJldHVybjtpZighci5pbmNsdWRlcyhlKSlyZXR1cm47ZS5fekluZGV4PW51bGwsZS5fZHJhd2luZ0xheWVyPW51bGwsZS5fZHJhd2luZ0xheWVySWQ9bnVsbCxlLl9vZmYoXCJzZWxlY3RlZFwiLGUuX2Z1bmNDaGFuZ2VTdHlsZVRvU2VsZWN0ZWQpLGUuX29mZihcImRlc2VsZWN0ZWRcIixlLl9mdW5jQ2hhbmdlU3R5bGVUb0RlZmF1bHQpLGUuX2Z1bmNDaGFuZ2VTdHlsZVRvU2VsZWN0ZWQ9bnVsbCxlLl9mdW5jQ2hhbmdlU3R5bGVUb0RlZmF1bHQ9bnVsbCx0Ll9mYWJyaWNPYmplY3QucmVtb3ZlV2l0aFVwZGF0ZShlLl9nZXRGYWJyaWNPYmplY3QoKSl9dGhpcy5mYWJyaWNDYW52YXMucmVuZGVyQWxsKCl9X2FkZERyYXdpbmdJdGVtKHQsZSl7aWYoISh0IGluc3RhbmNlb2YgWikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgJ2RyYXdpbmdJdGVtJy5cIik7aWYodC5fZHJhd2luZ0xheWVyKXtpZih0Ll9kcmF3aW5nTGF5ZXI9PXRoaXMpcmV0dXJuO3Rocm93IG5ldyBFcnJvcihcIlRoaXMgZHJhd2luZyBpdGVtIGhhcyBleGlzdGVkIGluIG90aGVyIGxheWVyLlwiKX1sZXQgaT10Ll9nZXRGYWJyaWNPYmplY3QoKTtjb25zdCByPXRoaXMuZmFicmljQ2FudmFzLmdldE9iamVjdHMoKTtsZXQgbixzO2lmKHIuaW5jbHVkZXMoaSkpe2lmKHRoaXMuX2FyckZhYnJpY09iamVjdC5pbmNsdWRlcyhpKSlyZXR1cm47dGhyb3cgbmV3IEVycm9yKFwiRXhpc3RlZCBpbiBvdGhlciBkcmF3aW5nIGxheWVycy5cIil9aWYoXCJncm91cFwiPT09dC5fbWVkaWFUeXBlKXtuPXQuZ2V0Q2hpbGREcmF3aW5nSXRlbXMoKTtmb3IobGV0IHQgb2YgbilpZih0Ll9kcmF3aW5nTGF5ZXImJnQuX2RyYXdpbmdMYXllciE9PXRoaXMpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGNoaWxkSXRlbXMgb2YgRFRfR3JvdXAgaGF2ZSBleGlzdGVkIGluIG90aGVyIGRyYXdpbmcgbGF5ZXJzLlwiKX1pZihlJiZcIm9iamVjdFwiPT10eXBlb2YgZSYmIUFycmF5LmlzQXJyYXkoZSkpZm9yKGxldCB0IGluIGUpaS5zZXQodCxlW3RdKTtpZihuKXtmb3IobGV0IHQgb2Ygbil7Y29uc3QgZT10aGlzLm1hcFR5cGVfU3RhdGVBbmRTdHlsZUlkLmdldCh0Ll9tZWRpYVR5cGUpO2ZvcihsZXQgaSBvZiBaLmFyclN0eWxlU2VsZWN0b3JzKXQuX21hcFN0YXRlX1N0eWxlSWQuc2V0KGksZVtpXSk7aWYodC5zdHlsZUlkKXM9Z2UuZ2V0RHJhd2luZ1N0eWxlKHQuc3R5bGVJZCk7ZWxzZXtzPWdlLmdldERyYXdpbmdTdHlsZShlLmRlZmF1bHQpO2NvbnN0IGk9KCk9Pnt0aGlzLl9jaGFuZ2VJdGVtU3R5bGUodCxnZS5nZXREcmF3aW5nU3R5bGUodGhpcy5tYXBUeXBlX1N0YXRlQW5kU3R5bGVJZC5nZXQodC5fbWVkaWFUeXBlKS5zZWxlY3RlZCksITApfSxyPSgpPT57dGhpcy5fY2hhbmdlSXRlbVN0eWxlKHQsZ2UuZ2V0RHJhd2luZ1N0eWxlKHRoaXMubWFwVHlwZV9TdGF0ZUFuZFN0eWxlSWQuZ2V0KHQuX21lZGlhVHlwZSkuZGVmYXVsdCksITApfTt0Ll9vbihcInNlbGVjdGVkXCIsaSksdC5fb24oXCJkZXNlbGVjdGVkXCIsciksdC5fZnVuY0NoYW5nZVN0eWxlVG9TZWxlY3RlZD1pLHQuX2Z1bmNDaGFuZ2VTdHlsZVRvRGVmYXVsdD1yfXQuX2RyYXdpbmdMYXllcj10aGlzLHQuX2RyYXdpbmdMYXllcklkPXRoaXMuaWQsdGhpcy5fY2hhbmdlSXRlbVN0eWxlKHQscywhMCl9aS5kaXJ0eT0hMCx0aGlzLmZhYnJpY0NhbnZhcy5yZW5kZXJBbGwoKX1lbHNle2NvbnN0IGU9dGhpcy5tYXBUeXBlX1N0YXRlQW5kU3R5bGVJZC5nZXQodC5fbWVkaWFUeXBlKTtmb3IobGV0IGkgb2YgWi5hcnJTdHlsZVNlbGVjdG9ycyl0Ll9tYXBTdGF0ZV9TdHlsZUlkLnNldChpLGVbaV0pO2lmKHQuc3R5bGVJZClzPWdlLmdldERyYXdpbmdTdHlsZSh0LnN0eWxlSWQpO2Vsc2V7cz1nZS5nZXREcmF3aW5nU3R5bGUoZS5kZWZhdWx0KTtjb25zdCBpPSgpPT57dGhpcy5fY2hhbmdlSXRlbVN0eWxlKHQsZ2UuZ2V0RHJhd2luZ1N0eWxlKHRoaXMubWFwVHlwZV9TdGF0ZUFuZFN0eWxlSWQuZ2V0KHQuX21lZGlhVHlwZSkuc2VsZWN0ZWQpKX0scj0oKT0+e3RoaXMuX2NoYW5nZUl0ZW1TdHlsZSh0LGdlLmdldERyYXdpbmdTdHlsZSh0aGlzLm1hcFR5cGVfU3RhdGVBbmRTdHlsZUlkLmdldCh0Ll9tZWRpYVR5cGUpLmRlZmF1bHQpKX07dC5fb24oXCJzZWxlY3RlZFwiLGkpLHQuX29uKFwiZGVzZWxlY3RlZFwiLHIpLHQuX2Z1bmNDaGFuZ2VTdHlsZVRvU2VsZWN0ZWQ9aSx0Ll9mdW5jQ2hhbmdlU3R5bGVUb0RlZmF1bHQ9cn10aGlzLl9jaGFuZ2VJdGVtU3R5bGUodCxzKX10Ll96SW5kZXg9dGhpcy5pZCx0Ll9kcmF3aW5nTGF5ZXI9dGhpcyx0Ll9kcmF3aW5nTGF5ZXJJZD10aGlzLmlkO2NvbnN0IG89dGhpcy5fYXJyRmFicmljT2JqZWN0Lmxlbmd0aDtsZXQgYT1yLmxlbmd0aDtpZihvKWE9ci5pbmRleE9mKHRoaXMuX2FyckZhYnJpY09iamVjdFtvLTFdKSsxO2Vsc2UgZm9yKGxldCBlPTA7ZTxyLmxlbmd0aDtlKyspaWYodC5fekluZGV4PHJbZV0uZ2V0RHJhd2luZ0l0ZW0oKS5fekluZGV4KXthPWU7YnJlYWt9dGhpcy5fYXJyRHJ3YWluZ0l0ZW0ucHVzaCh0KSx0aGlzLl9hcnJGYWJyaWNPYmplY3QucHVzaChpKSx0aGlzLl92aXNpYmxlP2kudmlzaWJsZT0hMDppLnZpc2libGU9ITEsdGhpcy5mYWJyaWNDYW52YXMuaW5zZXJ0QXQoaSxhLCExKX1hZGREcmF3aW5nSXRlbSh0KXtpZighdHx8IXQuaXNEcmF3aW5nSXRlbSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGRyYXdpbmcgaXRlbS5cIik7aWYoXCJ2aWV3ZXJcIj09PXRoaXMubW9kZSl0Ll9zZXRFZGl0YWJsZSghMSk7ZWxzZXtpZihcImVkaXRvclwiIT09dGhpcy5tb2RlKXRocm93IG5ldyBFcnJvcihcIklsbGVnYWwgJ21vZGUnLlwiKTt0Ll9zZXRFZGl0YWJsZSghMCl9dGhpcy5fYWRkRHJhd2luZ0l0ZW0odCksdC51cGRhdGVQb3NpdGlvbigpfWFkZERyYXdpbmdJdGVtcyh0KXtmb3IobGV0IGUgb2YgdCl0aGlzLmFkZERyYXdpbmdJdGVtKGUpfXJlbW92ZURyYXdpbmdJdGVtKHQpe2lmKCF0fHwhdC5pc0RyYXdpbmdJdGVtKXRocm93IFR5cGVFcnJvcihcIklsbGVnYWwgZHJhd2luZyBpdGVtLlwiKTtpZighdGhpcy5oYXNEcmF3aW5nSXRlbSh0KSlyZXR1cm47aWYodC5fekluZGV4PW51bGwsdC5fZHJhd2luZ0xheWVyPW51bGwsdC5fZHJhd2luZ0xheWVySWQ9bnVsbCxcImdyb3VwXCI9PT10Ll9tZWRpYVR5cGUpe2NvbnN0IGU9dC5nZXRDaGlsZERyYXdpbmdJdGVtcygpO2ZvcihsZXQgdCBvZiBlKXQuX3pJbmRleD1udWxsLHQuX2RyYXdpbmdMYXllcj1udWxsLHQuX2RyYXdpbmdMYXllcklkPW51bGwsdC5fb2ZmKFwic2VsZWN0ZWRcIix0Ll9mdW5jQ2hhbmdlU3R5bGVUb1NlbGVjdGVkKSx0Ll9vZmYoXCJkZXNlbGVjdGVkXCIsdC5fZnVuY0NoYW5nZVN0eWxlVG9EZWZhdWx0KSx0Ll9mdW5jQ2hhbmdlU3R5bGVUb1NlbGVjdGVkPW51bGwsdC5fZnVuY0NoYW5nZVN0eWxlVG9EZWZhdWx0PW51bGwsdC5fbWFwU3RhdGVfU3R5bGVJZC5jbGVhcigpfWVsc2UgdC5fb2ZmKFwic2VsZWN0ZWRcIix0Ll9mdW5jQ2hhbmdlU3R5bGVUb1NlbGVjdGVkKSx0Ll9vZmYoXCJkZXNlbGVjdGVkXCIsdC5fZnVuY0NoYW5nZVN0eWxlVG9EZWZhdWx0KSx0Ll9mdW5jQ2hhbmdlU3R5bGVUb1NlbGVjdGVkPW51bGwsdC5fZnVuY0NoYW5nZVN0eWxlVG9EZWZhdWx0PW51bGwsdC5fbWFwU3RhdGVfU3R5bGVJZC5jbGVhcigpO2NvbnN0IGU9dC5fZ2V0RmFicmljT2JqZWN0KCk7XCJzZWxlY3RlZFwiPT09dC5zdHlsZVNlbGVjdG9yJiYoZS5ncm91cD9lLmdyb3VwLnJlbW92ZVdpdGhVcGRhdGUoZSk6dGhpcy5mYWJyaWNDYW52YXMuX2FjdGl2ZU9iamVjdD1udWxsLHQuc2V0U3RhdGUoai5ESVNfREVGQVVMVCkpLHRoaXMuZmFicmljQ2FudmFzLnJlbW92ZShlKSx0aGlzLl9hcnJEcndhaW5nSXRlbS5zcGxpY2UodGhpcy5fYXJyRHJ3YWluZ0l0ZW0uaW5kZXhPZih0KSwxKSx0aGlzLl9hcnJGYWJyaWNPYmplY3Quc3BsaWNlKHRoaXMuX2FyckZhYnJpY09iamVjdC5pbmRleE9mKGUpLDEpfXJlbW92ZURyYXdpbmdJdGVtcyh0KXtmb3IobGV0IGUgb2YgdCl0aGlzLnJlbW92ZURyYXdpbmdJdGVtKGUpfXNldERyYXdpbmdJdGVtcyh0KXt0aGlzLmNsZWFyRHJhd2luZ0l0ZW1zKCksdGhpcy5hZGREcmF3aW5nSXRlbXModCl9Z2V0RHJhd2luZ0l0ZW1zKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3RoaXMuX2FyckRyd2FpbmdJdGVtLmZpbHRlcih0KTpBcnJheS5mcm9tKHRoaXMuX2FyckRyd2FpbmdJdGVtKX1nZXRTZWxlY3RlZERyYXdpbmdJdGVtcygpe2NvbnN0IHQ9dGhpcy5mYWJyaWNDYW52YXMuZ2V0QWN0aXZlT2JqZWN0cygpLGU9W107Zm9yKGxldCBpIG9mIHQpdGhpcy5fYXJyRmFicmljT2JqZWN0LmluY2x1ZGVzKGkpJiZlLnB1c2goaS5nZXREcmF3aW5nSXRlbSgpKTtyZXR1cm4gZX1oYXNEcmF3aW5nSXRlbSh0KXtpZighdHx8IXQuaXNEcmF3aW5nSXRlbSl0aHJvdyBUeXBlRXJyb3IoXCJJbGxlZ2FsIGRyYXdpbmcgaXRlbS5cIik7cmV0dXJuIHRoaXMuX2FyckRyd2FpbmdJdGVtLmluY2x1ZGVzKHQpfWNsZWFyRHJhd2luZ0l0ZW1zKCl7dGhpcy5yZW1vdmVEcmF3aW5nSXRlbXMoQXJyYXkuZnJvbSh0aGlzLl9hcnJEcndhaW5nSXRlbSkpfV9zZXREZWZhdWx0U3R5bGUodCxlLGkpe2U/ZS5mb3JFYWNoKCh0PT50LnRvTG93ZXJDYXNlKCkpKTplPVouYXJyTWVkaWFUeXBlcyxpP2kuZm9yRWFjaCgodD0+dC50b0xvd2VyQ2FzZSgpKSk6aT1aLmFyclN0eWxlU2VsZWN0b3JzO2NvbnN0IHI9Z2UuZ2V0RHJhd2luZ1N0eWxlKHQpO2lmKCFyKXRocm93IG5ldyBFcnJvcihgVGhlICdkcmF3aW5nU3R5bGUnIHdpdGggaWQgJyR7dH0nIGRvZXNuJ3QgZXhpc3QuYCk7bGV0IG47Zm9yKGxldCBzIG9mIGUpaWYobj10aGlzLm1hcFR5cGVfU3RhdGVBbmRTdHlsZUlkLmdldChzKSxuKWZvcihsZXQgZSBvZiBpKXt0aGlzLl9jaGFuZ2VNZWRpYVR5cGVDdXJTdHlsZUluU3R5bGVTZWxlY3RvcihzLGUsciwhMCksbltlXT10O2ZvcihsZXQgaSBvZiB0aGlzLl9hcnJEcndhaW5nSXRlbSlpLl9tZWRpYVR5cGU9PT1zJiZpLl9tYXBTdGF0ZV9TdHlsZUlkLnNldChlLHQpfXRoaXMuZmFicmljQ2FudmFzLnJlbmRlckFsbCgpfXNldERlZmF1bHRTdHlsZSh0LGUsaSl7Y29uc3Qgcj1bXTtpJkIuRElNVF9SRUNUQU5HTEUmJnIucHVzaChcInJlY3RcIiksaSZCLkRJTVRfUVVBRFJJTEFURVJBTCYmci5wdXNoKFwicXVhZFwiKSxpJkIuRElNVF9URVhUJiZyLnB1c2goXCJ0ZXh0XCIpLGkmQi5ESU1UX0FSQyYmci5wdXNoKFwiYXJjXCIpLGkmQi5ESU1UX0lNQUdFJiZyLnB1c2goXCJpbWFnZVwiKSxpJkIuRElNVF9QT0xZR09OJiZyLnB1c2goXCJwb2x5Z29uXCIpLGkmQi5ESU1UX0xJTkUmJnIucHVzaChcImxpbmVcIik7Y29uc3Qgbj1bXTtlJmouRElTX0RFRkFVTFQmJm4ucHVzaChcImRlZmF1bHRcIiksZSZqLkRJU19TRUxFQ1RFRCYmbi5wdXNoKFwic2VsZWN0ZWRcIiksdGhpcy5fc2V0RGVmYXVsdFN0eWxlKHQsci5sZW5ndGg/cjpudWxsLG4ubGVuZ3RoP246bnVsbCl9c2V0TW9kZSh0KXtpZihcInZpZXdlclwiPT09KHQ9dC50b0xvd2VyQ2FzZSgpKSl7Zm9yKGxldCB0IG9mIHRoaXMuX2FyckRyd2FpbmdJdGVtKXQuX3NldEVkaXRhYmxlKCExKTt0aGlzLmZhYnJpY0NhbnZhcy5kaXNjYXJkQWN0aXZlT2JqZWN0KCksdGhpcy5mYWJyaWNDYW52YXMucmVuZGVyQWxsKCksdGhpcy5tb2RlPVwidmlld2VyXCJ9ZWxzZXtpZihcImVkaXRvclwiIT09dCl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgdmFsdWUuXCIpO2ZvcihsZXQgdCBvZiB0aGlzLl9hcnJEcndhaW5nSXRlbSl0Ll9zZXRFZGl0YWJsZSghMCk7dGhpcy5tb2RlPVwiZWRpdG9yXCJ9dGhpcy5fbWFuYWdlci5fc3dpdGNoUG9pbnRlckV2ZW50KCl9Z2V0TW9kZSgpe3JldHVybiB0aGlzLm1vZGV9X3NldERpbWVuc2lvbnModCxlKXt0aGlzLmZhYnJpY0NhbnZhcy5zZXREaW1lbnNpb25zKHQsZSl9X3NldE9iamVjdEZpdCh0KXtpZih0PXQudG9Mb3dlckNhc2UoKSwhW1wiY29udGFpblwiLFwiY292ZXJcIl0uaW5jbHVkZXModCkpdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCB2YWx1ZSAnJHt0fScuYCk7dGhpcy5mYWJyaWNDYW52YXMubG93ZXJDYW52YXNFbC5zdHlsZS5vYmplY3RGaXQ9dCx0aGlzLmZhYnJpY0NhbnZhcy51cHBlckNhbnZhc0VsLnN0eWxlLm9iamVjdEZpdD10fV9nZXRPYmplY3RGaXQoKXtyZXR1cm4gdGhpcy5mYWJyaWNDYW52YXMubG93ZXJDYW52YXNFbC5zdHlsZS5vYmplY3RGaXR9cmVuZGVyQWxsKCl7Zm9yKGxldCB0IG9mIHRoaXMuX2FyckRyd2FpbmdJdGVtKXtjb25zdCBlPXRoaXMuX2dldEl0ZW1DdXJyZW50U3R5bGUodCk7dGhpcy5fY2hhbmdlSXRlbVN0eWxlKHQsZSwhMCl9dGhpcy5mYWJyaWNDYW52YXMucmVuZGVyQWxsKCl9ZGlzcG9zZSgpe3RoaXMuY2xlYXJEcmF3aW5nSXRlbXMoKSwxPT09dGhpcy5fbWFuYWdlci5fYXJyRHJhd2luZ0xheWVyLmxlbmd0aCYmKHRoaXMuZmFicmljQ2FudmFzLndyYXBwZXJFbC5zdHlsZS5wb2ludGVyRXZlbnRzPVwibm9uZVwiLHRoaXMuZmFicmljQ2FudmFzLmRpc3Bvc2UoKSx0aGlzLl9hcnJEcndhaW5nSXRlbS5sZW5ndGg9MCx0aGlzLl9hcnJGYWJyaWNPYmplY3QubGVuZ3RoPTApfX1tZS5ERE5fTEFZRVJfSUQ9MSxtZS5EQlJfTEFZRVJfSUQ9MixtZS5ETFJfTEFZRVJfSUQ9MyxtZS5VU0VSX0RFRklORURfTEFZRVJfQkFTRV9JRD0xMDAsbWUuVElQX0xBWUVSX0lEPTk5OTtjbGFzcyBwZXtjb25zdHJ1Y3Rvcigpe3RoaXMuX2FyckRyYXdpbmdMYXllcj1bXX1jcmVhdGVEcmF3aW5nTGF5ZXIodCxlKXtpZih0aGlzLmdldERyYXdpbmdMYXllcihlKSl0aHJvdyBuZXcgRXJyb3IoXCJFeGlzdGVkIGRyYXdpbmcgbGF5ZXIgaWQuXCIpO2NvbnN0IGk9bmV3IG1lKHQsZSx7ZW5hYmxlUmV0aW5hU2NhbGluZzohMX0pO3JldHVybiBpLl9tYW5hZ2VyPXRoaXMsdGhpcy5fYXJyRHJhd2luZ0xheWVyLnB1c2goaSksdGhpcy5fc3dpdGNoUG9pbnRlckV2ZW50KCksaX1kZWxldGVEcmF3aW5nTGF5ZXIodCl7Y29uc3QgZT10aGlzLmdldERyYXdpbmdMYXllcih0KTtpZighZSlyZXR1cm47Y29uc3QgaT10aGlzLl9hcnJEcmF3aW5nTGF5ZXI7ZS5kaXNwb3NlKCksaS5zcGxpY2UoaS5pbmRleE9mKGUpLDEpLHRoaXMuX3N3aXRjaFBvaW50ZXJFdmVudCgpfWNsZWFyRHJhd2luZ0xheWVycygpe2ZvcihsZXQgdCBvZiB0aGlzLl9hcnJEcmF3aW5nTGF5ZXIpdC5kaXNwb3NlKCk7dGhpcy5fYXJyRHJhd2luZ0xheWVyLmxlbmd0aD0wfWdldERyYXdpbmdMYXllcih0KXtmb3IobGV0IGUgb2YgdGhpcy5fYXJyRHJhd2luZ0xheWVyKWlmKGUuZ2V0SWQoKT09PXQpcmV0dXJuIGU7cmV0dXJuIG51bGx9Z2V0QWxsRHJhd2luZ0xheWVycygpe3JldHVybiBBcnJheS5mcm9tKHRoaXMuX2FyckRyYXdpbmdMYXllcil9Z2V0U2VsZWN0ZWREcmF3aW5nSXRlbXMoKXtpZighdGhpcy5fYXJyRHJhd2luZ0xheWVyLmxlbmd0aClyZXR1cm47Y29uc3QgdD10aGlzLl9nZXRGYWJyaWNDYW52YXMoKS5nZXRBY3RpdmVPYmplY3RzKCksZT1bXTtmb3IobGV0IGkgb2YgdCllLnB1c2goaS5nZXREcmF3aW5nSXRlbSgpKTtyZXR1cm4gZX1zZXREaW1lbnNpb25zKHQsZSl7dGhpcy5fYXJyRHJhd2luZ0xheWVyLmxlbmd0aCYmdGhpcy5fYXJyRHJhd2luZ0xheWVyWzBdLl9zZXREaW1lbnNpb25zKHQsZSl9c2V0T2JqZWN0Rml0KHQpe2ZvcihsZXQgZSBvZiB0aGlzLl9hcnJEcmF3aW5nTGF5ZXIpZSYmZS5fc2V0T2JqZWN0Rml0KHQpfWdldE9iamVjdEZpdCgpe3JldHVybiB0aGlzLl9hcnJEcmF3aW5nTGF5ZXIubGVuZ3RoP3RoaXMuX2FyckRyYXdpbmdMYXllclswXS5fZ2V0T2JqZWN0Rml0KCk6bnVsbH1zZXRWaXNpYmxlKHQpe2lmKCF0aGlzLl9hcnJEcmF3aW5nTGF5ZXIubGVuZ3RoKXJldHVybjtjb25zdCBlPXRoaXMuX2dldEZhYnJpY0NhbnZhcygpO2Uud3JhcHBlckVsLnN0eWxlLmRpc3BsYXk9dD9cImJsb2NrXCI6XCJub25lXCJ9X2dldEZhYnJpY0NhbnZhcygpe3JldHVybiB0aGlzLl9hcnJEcmF3aW5nTGF5ZXIubGVuZ3RoP3RoaXMuX2FyckRyYXdpbmdMYXllclswXS5mYWJyaWNDYW52YXM6bnVsbH1fc3dpdGNoUG9pbnRlckV2ZW50KCl7aWYodGhpcy5fYXJyRHJhd2luZ0xheWVyLmxlbmd0aClmb3IobGV0IHQgb2YgdGhpcy5fYXJyRHJhd2luZ0xheWVyKXQuZ2V0TW9kZSgpfX1jbGFzcyB2ZSBleHRlbmRzIEF0e2NvbnN0cnVjdG9yKHQsZSxpLHIsbil7c3VwZXIodCx7eDplLHk6aSx3aWR0aDpyLGhlaWdodDowfSxuKSxQdC5zZXQodGhpcyx2b2lkIDApLGt0LnNldCh0aGlzLHZvaWQgMCksdGhpcy5fZmFicmljT2JqZWN0LnBhZGRpbmdUb3A9MTUsdGhpcy5fZmFicmljT2JqZWN0LmNhbGNUZXh0SGVpZ2h0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT0wLGk9dGhpcy5fdGV4dExpbmVzLmxlbmd0aDtlPGk7ZSsrKXQrPXRoaXMuZ2V0SGVpZ2h0T2ZMaW5lKGUpO3JldHVybiB0Kz0yKnRoaXMucGFkZGluZ1RvcH0sdGhpcy5fZmFicmljT2JqZWN0Ll9nZXRUb3BPZmZzZXQ9ZnVuY3Rpb24oKXtyZXR1cm4tdGhpcy5oZWlnaHQvMit0aGlzLmdldEhlaWdodE9mTGluZSgwKSooMS0xL3RoaXMubGluZUhlaWdodCkvMit0aGlzLnBhZGRpbmdUb3B9LHRoaXMuc2V0KFwiYmFja2dyb3VuZENvbG9yXCIsXCJyZ2JhKDUwLCA1MCwgNTIsIC44KVwiKSx0aGlzLnNldChcImxpbmVIZWlnaHRcIiwxLjMpLHRoaXMuc2V0KFwidGV4dEFsaWduXCIsXCJjZW50ZXJcIil9c2V0RHVyYXRpb24odCl7Qyh0aGlzLFB0LHQsXCJmXCIpLHgodGhpcyxrdCxcImZcIikmJmNsZWFyVGltZW91dCh4KHRoaXMsa3QsXCJmXCIpKSx4KHRoaXMsUHQsXCJmXCIpPj0wJiZDKHRoaXMsa3Qsc2V0VGltZW91dCgoKCk9Pnt0aGlzLnNldChcInZpc2libGVcIiwhMSksdGhpcy5fZHJhd2luZ0xheWVyJiZ0aGlzLl9kcmF3aW5nTGF5ZXIucmVuZGVyQWxsKCl9KSx4KHRoaXMsUHQsXCJmXCIpKSxcImZcIil9Z2V0RHVyYXRpb24oKXtyZXR1cm4geCh0aGlzLFB0LFwiZlwiKX19UHQ9bmV3IFdlYWtNYXAsa3Q9bmV3IFdlYWtNYXA7Y2xhc3MgX2V7Y29uc3RydWN0b3IoKXtSdC5hZGQodGhpcyksQnQuc2V0KHRoaXMsdm9pZCAwKSxqdC5zZXQodGhpcyx2b2lkIDApLFd0LnNldCh0aGlzLHZvaWQgMCksVXQuc2V0KHRoaXMsITApLHRoaXMuX2RyYXdpbmdMYXllck1hbmFnZXI9bmV3IHBlfWNyZWF0ZURyYXdpbmdMYXllckJhc2VDdnModCxlLGk9XCJjb250YWluXCIpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0PD0xKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ3dpZHRoJy5cIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGV8fGU8PTEpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCAnaGVpZ2h0Jy5cIik7aWYoIVtcImNvbnRhaW5cIixcImNvdmVyXCJdLmluY2x1ZGVzKGkpKXRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkICdvYmplY3RGaXQnLlwiKTtjb25zdCByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7cmV0dXJuIHIud2lkdGg9PXQmJnIuaGVpZ2h0PT1lfHwoci53aWR0aD10LHIuaGVpZ2h0PWUpLHIuc3R5bGUub2JqZWN0Rml0PWkscn1fY3JlYXRlRHJhd2luZ0xheWVyKHQsZSxpLHIpe2lmKCF0aGlzLl9sYXllckJhc2VDdnMpe2xldCB0O3RyeXt0PXRoaXMuZ2V0Q29udGVudERpbWVuc2lvbnMoKX1jYXRjaCh0KXtpZihcIkludmFsaWQgY29udGVudCBkaW1lbnNpb25zLlwiIT09KHQubWVzc2FnZXx8dCkpdGhyb3cgdH1lfHwoZT0obnVsbD09dD92b2lkIDA6dC53aWR0aCl8fDEyODApLGl8fChpPShudWxsPT10P3ZvaWQgMDp0LmhlaWdodCl8fDcyMCkscnx8KHI9KG51bGw9PXQ/dm9pZCAwOnQub2JqZWN0Rml0KXx8XCJjb250YWluXCIpLHRoaXMuX2xheWVyQmFzZUN2cz10aGlzLmNyZWF0ZURyYXdpbmdMYXllckJhc2VDdnMoZSxpLHIpfWNvbnN0IG49dGhpcy5fbGF5ZXJCYXNlQ3ZzLHM9dGhpcy5fZHJhd2luZ0xheWVyTWFuYWdlci5jcmVhdGVEcmF3aW5nTGF5ZXIobix0KTtyZXR1cm4gdGhpcy5faW5uZXJDb21wb25lbnQuZ2V0RWxlbWVudChcImRyYXdpbmctbGF5ZXJcIil8fHRoaXMuX2lubmVyQ29tcG9uZW50LnNldEVsZW1lbnQoXCJkcmF3aW5nLWxheWVyXCIsbi5wYXJlbnRFbGVtZW50KSxzfWNyZWF0ZURyYXdpbmdMYXllcigpe2xldCB0O2ZvcihsZXQgZT1tZS5VU0VSX0RFRklORURfTEFZRVJfQkFTRV9JRDs7ZSsrKWlmKCF0aGlzLl9kcmF3aW5nTGF5ZXJNYW5hZ2VyLmdldERyYXdpbmdMYXllcihlKSYmZSE9PW1lLlRJUF9MQVlFUl9JRCl7dD1lO2JyZWFrfXJldHVybiB0aGlzLl9jcmVhdGVEcmF3aW5nTGF5ZXIodCl9ZGVsZXRlRHJhd2luZ0xheWVyKHQpe3ZhciBlO3RoaXMuX2RyYXdpbmdMYXllck1hbmFnZXIuZGVsZXRlRHJhd2luZ0xheWVyKHQpLHRoaXMuX2RyYXdpbmdMYXllck1hbmFnZXIuZ2V0QWxsRHJhd2luZ0xheWVycygpLmxlbmd0aHx8KG51bGw9PT0oZT10aGlzLl9pbm5lckNvbXBvbmVudCl8fHZvaWQgMD09PWV8fGUucmVtb3ZlRWxlbWVudChcImRyYXdpbmctbGF5ZXJcIiksdGhpcy5fbGF5ZXJCYXNlQ3ZzPW51bGwpfWRlbGV0ZVVzZXJEZWZpbmVkRHJhd2luZ0xheWVyKHQpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGlkLlwiKTtpZih0PG1lLlVTRVJfREVGSU5FRF9MQVlFUl9CQVNFX0lEKXRocm93IG5ldyBFcnJvcihgVGhlIGRyYXdpbmcgbGF5ZXIgd2l0aCBpZCAke3R9IGlzIG5vdCBkZWZpbmVkIGJ5IHVzZXJzLmApO3RoaXMuZGVsZXRlRHJhd2luZ0xheWVyKHQpfV9jbGVhckRyYXdpbmdMYXllcnMoKXtjb25zdCB0PXRoaXMuZ2V0QWxsRHJhd2luZ0xheWVycygpO2ZvcihsZXQgZSBvZiB0KXRoaXMuZGVsZXRlRHJhd2luZ0xheWVyKGUuZ2V0SWQoKSl9Y2xlYXJVc2VyRGVmaW5lZERyYXdpbmdMYXllcnMoKXtjb25zdCB0PXRoaXMuZ2V0QWxsRHJhd2luZ0xheWVycygpO2ZvcihsZXQgZSBvZiB0KXtjb25zdCB0PWUuZ2V0SWQoKTt0PG1lLlVTRVJfREVGSU5FRF9MQVlFUl9CQVNFX0lEfHx0aGlzLmRlbGV0ZVVzZXJEZWZpbmVkRHJhd2luZ0xheWVyKHQpfX1nZXREcmF3aW5nTGF5ZXIodCl7aWYodD09bWUuVElQX0xBWUVSX0lEKXJldHVybiBudWxsO2NvbnN0IGU9dGhpcy5fZHJhd2luZ0xheWVyTWFuYWdlci5nZXREcmF3aW5nTGF5ZXIodCk7cmV0dXJuIGV8fChbbWUuREROX0xBWUVSX0lELG1lLkRCUl9MQVlFUl9JRCxtZS5ETFJfTEFZRVJfSURdLmluY2x1ZGVzKHQpP3RoaXMuX2NyZWF0ZURyYXdpbmdMYXllcih0KTpudWxsKX1nZXRBbGxEcmF3aW5nTGF5ZXJzKCl7cmV0dXJuIHRoaXMuX2RyYXdpbmdMYXllck1hbmFnZXIuZ2V0QWxsRHJhd2luZ0xheWVycygpLmZpbHRlcigodD0+dC5nZXRJZCgpPj0wJiZ0LmdldElkKCkhPT1tZS5USVBfTEFZRVJfSUQpKX11cGRhdGVEcmF3aW5nTGF5ZXJzKHQpeygodCxlLGkpPT57aWYoISh0PD0xfHxlPD0xKSl7aWYoIVtcImNvbnRhaW5cIixcImNvdmVyXCJdLmluY2x1ZGVzKGkpKXRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkICdvYmplY3RGaXQnLlwiKTt0aGlzLl9kcmF3aW5nTGF5ZXJNYW5hZ2VyLnNldERpbWVuc2lvbnMoe3dpZHRoOnQsaGVpZ2h0OmV9LHtiYWNrc3RvcmVPbmx5OiEwfSksdGhpcy5fZHJhd2luZ0xheWVyTWFuYWdlci5zZXRPYmplY3RGaXQoaSl9fSkodC53aWR0aCx0LmhlaWdodCx0Lm9iamVjdEZpdCl9Z2V0U2VsZWN0ZWREcmF3aW5nSXRlbXMoKXtyZXR1cm4gdGhpcy5fZHJhd2luZ0xheWVyTWFuYWdlci5nZXRTZWxlY3RlZERyYXdpbmdJdGVtcygpfXNldFRpcENvbmZpZyh0KXtpZighKEooZT10KSYmcnQoZS50b3BMZWZ0UG9pbnQpJiZHKGUud2lkdGgpKXx8ZS53aWR0aDw9MHx8IUcoZS5kdXJhdGlvbil8fFwiY29vcmRpbmF0ZUJhc2VcImluIGUmJiFbXCJ2aWV3XCIsXCJpbWFnZVwiXS5pbmNsdWRlcyhlLmNvb3JkaW5hdGVCYXNlKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHRpcCBjb25maWcuXCIpO3ZhciBlO0ModGhpcyxCdCxKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQpKSxcImZcIikseCh0aGlzLEJ0LFwiZlwiKS5jb29yZGluYXRlQmFzZXx8KHgodGhpcyxCdCxcImZcIikuY29vcmRpbmF0ZUJhc2U9XCJ2aWV3XCIpLEModGhpcyxXdCx0LmR1cmF0aW9uLFwiZlwiKSx4KHRoaXMsUnQsXCJtXCIsWXQpLmNhbGwodGhpcyl9Z2V0VGlwQ29uZmlnKCl7cmV0dXJuIHgodGhpcyxCdCxcImZcIik/eCh0aGlzLEJ0LFwiZlwiKTpudWxsfXNldFRpcFZpc2libGUodCl7aWYoXCJib29sZWFuXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHZhbHVlLlwiKTt0aGlzLl90aXAmJih0aGlzLl90aXAuc2V0KFwidmlzaWJsZVwiLHQpLHRoaXMuX2RyYXdpbmdMYXllck9mVGlwJiZ0aGlzLl9kcmF3aW5nTGF5ZXJPZlRpcC5yZW5kZXJBbGwoKSksQyh0aGlzLFV0LHQsXCJmXCIpfWlzVGlwVmlzaWJsZSgpe3JldHVybiB4KHRoaXMsVXQsXCJmXCIpfXVwZGF0ZVRpcE1lc3NhZ2UodCl7aWYoIXgodGhpcyxCdCxcImZcIikpdGhyb3cgbmV3IEVycm9yKFwiVGlwIGNvbmZpZyBpcyBub3Qgc2V0LlwiKTt0aGlzLl90aXBTdHlsZUlkfHwodGhpcy5fdGlwU3R5bGVJZD1nZS5jcmVhdGVEcmF3aW5nU3R5bGUoe2ZpbGxTdHlsZTpcIiNGRkZGRkZcIixwYWludE1vZGU6XCJmaWxsXCIsZm9udEZhbWlseTpcIk9wZW4gU2Fuc1wiLGZvbnRTaXplOjQwfSkpLHRoaXMuX2RyYXdpbmdMYXllck9mVGlwfHwodGhpcy5fZHJhd2luZ0xheWVyT2ZUaXA9dGhpcy5fZHJhd2luZ0xheWVyTWFuYWdlci5nZXREcmF3aW5nTGF5ZXIobWUuVElQX0xBWUVSX0lEKXx8dGhpcy5fY3JlYXRlRHJhd2luZ0xheWVyKG1lLlRJUF9MQVlFUl9JRCkpLHRoaXMuX3RpcD90aGlzLl90aXAuc2V0KFwidGV4dFwiLHQpOnRoaXMuX3RpcD14KHRoaXMsUnQsXCJtXCIsVnQpLmNhbGwodGhpcyx0LHgodGhpcyxCdCxcImZcIikudG9wTGVmdFBvaW50LngseCh0aGlzLEJ0LFwiZlwiKS50b3BMZWZ0UG9pbnQueSx4KHRoaXMsQnQsXCJmXCIpLndpZHRoLHgodGhpcyxCdCxcImZcIikuY29vcmRpbmF0ZUJhc2UsdGhpcy5fdGlwU3R5bGVJZCkseCh0aGlzLFJ0LFwibVwiLEd0KS5jYWxsKHRoaXMsdGhpcy5fdGlwLHRoaXMuX2RyYXdpbmdMYXllck9mVGlwKSx0aGlzLl90aXAuc2V0KFwidmlzaWJsZVwiLHgodGhpcyxVdCxcImZcIikpLHRoaXMuX2RyYXdpbmdMYXllck9mVGlwJiZ0aGlzLl9kcmF3aW5nTGF5ZXJPZlRpcC5yZW5kZXJBbGwoKSx4KHRoaXMsanQsXCJmXCIpJiZjbGVhclRpbWVvdXQoeCh0aGlzLGp0LFwiZlwiKSkseCh0aGlzLFd0LFwiZlwiKT49MCYmQyh0aGlzLGp0LHNldFRpbWVvdXQoKCgpPT57eCh0aGlzLFJ0LFwibVwiLE50KS5jYWxsKHRoaXMpfSkseCh0aGlzLFd0LFwiZlwiKSksXCJmXCIpfX1CdD1uZXcgV2Vha01hcCxqdD1uZXcgV2Vha01hcCxXdD1uZXcgV2Vha01hcCxVdD1uZXcgV2Vha01hcCxSdD1uZXcgV2Vha1NldCxWdD1mdW5jdGlvbih0LGUsaSxyLG4scyl7Y29uc3Qgbz1uZXcgdmUodCxlLGkscixzKTtyZXR1cm4gby5jb29yZGluYXRlQmFzZT1uLG99LEd0PWZ1bmN0aW9uKHQsZSl7ZS5oYXNEcmF3aW5nSXRlbSh0KXx8ZS5hZGREcmF3aW5nSXRlbXMoW3RdKX0sTnQ9ZnVuY3Rpb24oKXt0aGlzLl90aXAmJnRoaXMuX2RyYXdpbmdMYXllck9mVGlwLnJlbW92ZURyYXdpbmdJdGVtcyhbdGhpcy5fdGlwXSl9LFl0PWZ1bmN0aW9uKCl7aWYoIXRoaXMuX3RpcClyZXR1cm47Y29uc3QgdD14KHRoaXMsQnQsXCJmXCIpO3RoaXMuX3RpcC5jb29yZGluYXRlQmFzZT10LmNvb3JkaW5hdGVCYXNlLHRoaXMuX3RpcC5zZXRUZXh0UmVjdCh7eDp0LnRvcExlZnRQb2ludC54LHk6dC50b3BMZWZ0UG9pbnQueSx3aWR0aDp0LndpZHRoLGhlaWdodDowfSksdGhpcy5fdGlwLnNldChcIndpZHRoXCIsdGhpcy5fdGlwLmdldChcIndpZHRoXCIpKSx0aGlzLl90aXAuX2RyYXdpbmdMYXllciYmdGhpcy5fdGlwLl9kcmF3aW5nTGF5ZXIucmVuZGVyQWxsKCl9O2NsYXNzIHllIGV4dGVuZHMgSFRNTEVsZW1lbnR7Y29uc3RydWN0b3IoKXtzdXBlcigpLEh0LnNldCh0aGlzLHZvaWQgMCk7Y29uc3QgdD1uZXcgRG9jdW1lbnRGcmFnbWVudCxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFwid3JhcHBlclwiKSx0LmFwcGVuZENoaWxkKGUpLEModGhpcyxIdCxlLFwiZlwiKTtjb25zdCBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzbG90XCIpO2kuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwic2luZ2xlLWZyYW1lLWlucHV0LWNvbnRhaW5lclwiKSxlLmFwcGVuZChpKTtjb25zdCByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzbG90XCIpO3Iuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwiY29udGVudFwiKSxlLmFwcGVuZChyKTtjb25zdCBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzbG90XCIpO24uc2V0QXR0cmlidXRlKFwibmFtZVwiLFwiZHJhd2luZy1sYXllclwiKSxlLmFwcGVuZChuKTtjb25zdCBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtzLnRleHRDb250ZW50PSdcXG4ud3JhcHBlciB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogMTAwJTtcXG59XFxuOjpzbG90dGVkKGNhbnZhc1tzbG90PVwiY29udGVudFwiXSkge1xcbiAgb2JqZWN0LWZpdDogY29udGFpbjtcXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbn1cXG46OnNsb3R0ZWQoZGl2W3Nsb3Q9XCJzaW5nbGUtZnJhbWUtaW5wdXQtY29udGFpbmVyXCJdKSB7XFxuICB3aWR0aDogMXB4O1xcbiAgaGVpZ2h0OiAxcHg7XFxuICBvdmVyZmxvdzogaGlkZGVuO1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxufVxcbjo6c2xvdHRlZCgqKSB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBsZWZ0OiAwO1xcbiAgdG9wOiAwO1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IDEwMCU7XFxufVxcbiAgICAnLHQuYXBwZW5kQ2hpbGQocyksdGhpcy5hdHRhY2hTaGFkb3coe21vZGU6XCJvcGVuXCJ9KS5hcHBlbmRDaGlsZCh0KX1nZXRXcmFwcGVyKCl7cmV0dXJuIHgodGhpcyxIdCxcImZcIil9c2V0RWxlbWVudCh0LGUpe2lmKCEoZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAnZWwnLlwiKTtpZighW1wiY29udGVudFwiLFwic2luZ2xlLWZyYW1lLWlucHV0LWNvbnRhaW5lclwiLFwiZHJhd2luZy1sYXllclwiXS5pbmNsdWRlcyh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAnc2xvdCcuXCIpO3RoaXMucmVtb3ZlRWxlbWVudCh0KSxlLnNldEF0dHJpYnV0ZShcInNsb3RcIix0KSx0aGlzLmFwcGVuZENoaWxkKGUpfWdldEVsZW1lbnQodCl7aWYoIVtcImNvbnRlbnRcIixcInNpbmdsZS1mcmFtZS1pbnB1dC1jb250YWluZXJcIixcImRyYXdpbmctbGF5ZXJcIl0uaW5jbHVkZXModCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgJ3Nsb3QnLlwiKTtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKGBbc2xvdD1cIiR7dH1cIl1gKX1yZW1vdmVFbGVtZW50KHQpe3ZhciBlO2lmKCFbXCJjb250ZW50XCIsXCJzaW5nbGUtZnJhbWUtaW5wdXQtY29udGFpbmVyXCIsXCJkcmF3aW5nLWxheWVyXCJdLmluY2x1ZGVzKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdzbG90Jy5cIik7bnVsbD09PShlPXRoaXMucXVlcnlTZWxlY3RvckFsbChgW3Nsb3Q9XCIke3R9XCJdYCkpfHx2b2lkIDA9PT1lfHxlLmZvckVhY2goKHQ9PnQucmVtb3ZlKCkpKX19SHQ9bmV3IFdlYWtNYXAsY3VzdG9tRWxlbWVudHMuZ2V0KFwiZGNlLWNvbXBvbmVudFwiKXx8Y3VzdG9tRWxlbWVudHMuZGVmaW5lKFwiZGNlLWNvbXBvbmVudFwiLHllKTtjbGFzcyB3ZSBleHRlbmRzIF9le3N0YXRpYyBnZXQgZW5naW5lUmVzb3VyY2VQYXRoKCl7cmV0dXJuIHUoZC5lbmdpbmVSZXNvdXJjZVBhdGhzLHQpLmRjZX1zdGF0aWMgc2V0IGRlZmF1bHRVSUVsZW1lbnRVUkwodCl7d2UuX2RlZmF1bHRVSUVsZW1lbnRVUkw9dH1zdGF0aWMgZ2V0IGRlZmF1bHRVSUVsZW1lbnRVUkwoKXt2YXIgdDtyZXR1cm4gbnVsbD09PSh0PXdlLl9kZWZhdWx0VUlFbGVtZW50VVJMKXx8dm9pZCAwPT09dD92b2lkIDA6dC5yZXBsYWNlKFwiQGVuZ2luZVJlc291cmNlUGF0aC9cIix3ZS5lbmdpbmVSZXNvdXJjZVBhdGgpfXN0YXRpYyBhc3luYyBjcmVhdGVJbnN0YW5jZSh0KXtjb25zdCBlPW5ldyB3ZTtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9dC5yZXBsYWNlKFwiQGVuZ2luZVJlc291cmNlUGF0aC9cIix3ZS5lbmdpbmVSZXNvdXJjZVBhdGgpKSxhd2FpdCBlLnNldFVJRWxlbWVudCh0fHx3ZS5kZWZhdWx0VUlFbGVtZW50VVJMKSxlfXN0YXRpYyBfdHJhbnNmb3JtQ29vcmRpbmF0ZXModCxlLGkscixuLHMsbyl7Y29uc3QgYT1zL3IsaD1vL247dC54PU1hdGgucm91bmQodC54L2ErZSksdC55PU1hdGgucm91bmQodC55L2graSl9c2V0IF9zaW5nbGVGcmFtZU1vZGUodCl7aWYoIVtcImRpc2FibGVkXCIsXCJpbWFnZVwiLFwiY2FtZXJhXCJdLmluY2x1ZGVzKHQpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgdmFsdWUuXCIpO2lmKHQhPT14KHRoaXMsZWUsXCJmXCIpKXtpZihDKHRoaXMsZWUsdCxcImZcIikseCh0aGlzLFh0LFwibVwiLG5lKS5jYWxsKHRoaXMpKUModGhpcyxadCxudWxsLFwiZlwiKSx0aGlzLl92aWRlb0NvbnRhaW5lcj1udWxsLHRoaXMuX2lubmVyQ29tcG9uZW50LnJlbW92ZUVsZW1lbnQoXCJjb250ZW50XCIpLHRoaXMuX2lubmVyQ29tcG9uZW50JiYodGhpcy5faW5uZXJDb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fY2xpY2tJcHRTaW5nbGVGcmFtZU1vZGUpLHRoaXMuX2lubmVyQ29tcG9uZW50LnNldEF0dHJpYnV0ZShcInRpdGxlXCIsXCJUYWtlIGEgcGhvdG9cIikpLHRoaXMuX2JnQ2FtZXJhJiYodGhpcy5fYmdDYW1lcmEuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIpO2Vsc2UgaWYodGhpcy5faW5uZXJDb21wb25lbnQmJih0aGlzLl9pbm5lckNvbXBvbmVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9jbGlja0lwdFNpbmdsZUZyYW1lTW9kZSksdGhpcy5faW5uZXJDb21wb25lbnQucmVtb3ZlQXR0cmlidXRlKFwidGl0bGVcIikpLHRoaXMuX2JnQ2FtZXJhJiYodGhpcy5fYmdDYW1lcmEuc3R5bGUuZGlzcGxheT1cIm5vbmVcIiksIXgodGhpcyxadCxcImZcIikpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpO3Quc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLHQuc3R5bGUubGVmdD1cIjBcIix0LnN0eWxlLnRvcD1cIjBcIix0LnN0eWxlLndpZHRoPVwiMTAwJVwiLHQuc3R5bGUuaGVpZ2h0PVwiMTAwJVwiLHQuc3R5bGUub2JqZWN0Rml0PXRoaXMuZ2V0VmlkZW9GaXQoKSx0LnNldEF0dHJpYnV0ZShcImF1dG9wbGF5XCIsXCJ0cnVlXCIpLHQuc2V0QXR0cmlidXRlKFwicGxheXNpbmxpbmVcIixcInRydWVcIiksdC5zZXRBdHRyaWJ1dGUoXCJtdXRlZFwiLFwidHJ1ZVwiKSxbXCJpUGhvbmVcIixcImlQYWRcIixcIk1hY1wiXS5pbmNsdWRlcyhBLk9TKSYmdC5zZXRBdHRyaWJ1dGUoXCJwb3N0ZXJcIixcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUVBQUFBQUFBQUFBQUFBQUFBQUFDSDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBZ0VBQUVFQkFBN1wiKSxDKHRoaXMsWnQsdCxcImZcIik7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuYXBwZW5kKHQpLGUuc3R5bGUub3ZlcmZsb3c9XCJoaWRkZW5cIix0aGlzLl92aWRlb0NvbnRhaW5lcj1lLHRoaXMuX2lubmVyQ29tcG9uZW50LnNldEVsZW1lbnQoXCJjb250ZW50XCIsZSl9eCh0aGlzLFh0LFwibVwiLG5lKS5jYWxsKHRoaXMpfHx0aGlzLl9oaWRlRGVmYXVsdFNlbGVjdGlvbj8odGhpcy5fc2VsQ2FtJiYodGhpcy5fc2VsQ2FtLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLHRoaXMuX3NlbFJzbCYmKHRoaXMuX3NlbFJzbC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKSx0aGlzLl9zZWxNaW5MdHImJih0aGlzLl9zZWxNaW5MdHIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIikpOih0aGlzLl9zZWxDYW0mJih0aGlzLl9zZWxDYW0uc3R5bGUuZGlzcGxheT1cImJsb2NrXCIpLHRoaXMuX3NlbFJzbCYmKHRoaXMuX3NlbFJzbC5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIiksdGhpcy5fc2VsTWluTHRyJiYodGhpcy5fc2VsTWluTHRyLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiKSx0aGlzLl9zdG9wTG9hZGluZygpKX19Z2V0IF9zaW5nbGVGcmFtZU1vZGUoKXtyZXR1cm4geCh0aGlzLGVlLFwiZlwiKX1nZXQgZGlzcG9zZWQoKXtyZXR1cm4geCh0aGlzLHJlLFwiZlwiKX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksWHQuYWRkKHRoaXMpLHp0LnNldCh0aGlzLHZvaWQgMCkscXQuc2V0KHRoaXMsdm9pZCAwKSxLdC5zZXQodGhpcyx2b2lkIDApLHRoaXMuY29udGFpbmVyQ2xhc3NOYW1lPVwiZGNlLXZpZGVvLWNvbnRhaW5lclwiLFp0LnNldCh0aGlzLHZvaWQgMCksdGhpcy52aWRlb0ZpdD1cImNvbnRhaW5cIix0aGlzLl9oaWRlRGVmYXVsdFNlbGVjdGlvbj0hMSx0aGlzLl9kaXZTY2FuQXJlYT1udWxsLHRoaXMuX2RpdlNjYW5MaWdodD1udWxsLHRoaXMuX2JnTG9hZGluZz1udWxsLHRoaXMuX3NlbENhbT1udWxsLHRoaXMuX2JnQ2FtZXJhPW51bGwsdGhpcy5fc2VsUnNsPW51bGwsdGhpcy5fb3B0R290UnNsPW51bGwsdGhpcy5fYnRuQ2xvc2U9bnVsbCx0aGlzLl9zZWxNaW5MdHI9bnVsbCx0aGlzLl9vcHRHb3RNaW5MdHI9bnVsbCxKdC5zZXQodGhpcyxudWxsKSx0aGlzLnJlZ2lvbk1hc2tGaWxsU3R5bGU9XCJyZ2JhKDAsMCwwLDAuNSlcIix0aGlzLnJlZ2lvbk1hc2tTdHJva2VTdHlsZT1cInJnYigyNTQsMTQyLDIwKVwiLHRoaXMucmVnaW9uTWFza0xpbmVXaWR0aD02LFF0LnNldCh0aGlzLCExKSwkdC5zZXQodGhpcywhMSksdGUuc2V0KHRoaXMse3dpZHRoOjAsaGVpZ2h0OjB9KSx0aGlzLl91cGRhdGVMYXllcnNUaW1lb3V0PTUwMCx0aGlzLl92aWRlb1Jlc2l6ZUxpc3RlbmVyPSgpPT57eCh0aGlzLFh0LFwibVwiLGxlKS5jYWxsKHRoaXMpLHRoaXMuX3VwZGF0ZUxheWVyc1RpbWVvdXRJZCYmY2xlYXJUaW1lb3V0KHRoaXMuX3VwZGF0ZUxheWVyc1RpbWVvdXRJZCksdGhpcy5fdXBkYXRlTGF5ZXJzVGltZW91dElkPXNldFRpbWVvdXQoKCgpPT57dGhpcy5kaXNwb3NlZHx8KHRoaXMuZXZlbnRIYW5kbGVyLmZpcmUoXCJ2aWRlb0VsOnJlc2l6ZWRcIixudWxsLHthc3luYzohMX0pLHRoaXMuZXZlbnRIYW5kbGVyLmZpcmUoXCJjb250ZW50OnVwZGF0ZWRcIixudWxsLHthc3luYzohMX0pLHRoaXMuaXNTY2FuTGFzZXJWaXNpYmxlKCkmJngodGhpcyxYdCxcIm1cIixoZSkuY2FsbCh0aGlzKSl9KSx0aGlzLl91cGRhdGVMYXllcnNUaW1lb3V0KX0sdGhpcy5fd2luZG93UmVzaXplTGlzdGVuZXI9KCk9Pnt3ZS5fb25Mb2cmJndlLl9vbkxvZyhcIndpbmRvdyByZXNpemUgZXZlbnQgdHJpZ2dlcmVkLlwiKSx4KHRoaXMsdGUsXCJmXCIpLndpZHRoPT09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoJiZ4KHRoaXMsdGUsXCJmXCIpLmhlaWdodD09PWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHR8fCh4KHRoaXMsdGUsXCJmXCIpLndpZHRoPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCx4KHRoaXMsdGUsXCJmXCIpLmhlaWdodD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LHRoaXMuX3ZpZGVvUmVzaXplTGlzdGVuZXIoKSl9LGVlLnNldCh0aGlzLFwiZGlzYWJsZWRcIiksdGhpcy5fY2xpY2tJcHRTaW5nbGVGcmFtZU1vZGU9KCk9PntpZigheCh0aGlzLFh0LFwibVwiLG5lKS5jYWxsKHRoaXMpKXJldHVybjtsZXQgdDtpZih0aGlzLl9zaW5nbGVGcmFtZUlucHV0Q29udGFpbmVyKXQ9dGhpcy5fc2luZ2xlRnJhbWVJbnB1dENvbnRhaW5lci5maXJzdEVsZW1lbnRDaGlsZDtlbHNle3Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLHQuc2V0QXR0cmlidXRlKFwidHlwZVwiLFwiZmlsZVwiKSxcImNhbWVyYVwiPT09dGhpcy5fc2luZ2xlRnJhbWVNb2RlPyh0LnNldEF0dHJpYnV0ZShcImNhcHR1cmVcIixcIlwiKSx0LnNldEF0dHJpYnV0ZShcImFjY2VwdFwiLFwiaW1hZ2UvKlwiKSk6XCJpbWFnZVwiPT09dGhpcy5fc2luZ2xlRnJhbWVNb2RlJiYodC5yZW1vdmVBdHRyaWJ1dGUoXCJjYXB0dXJlXCIpLHQuc2V0QXR0cmlidXRlKFwiYWNjZXB0XCIsXCIuanBnLC5qcGVnLC5pY29uLC5naWYsLnN2Zywud2VicCwucG5nLC5ibXBcIikpLHQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLChhc3luYygpPT57Y29uc3QgZT10LmZpbGVzWzBdO3QudmFsdWU9XCJcIjt7Y29uc3QgdD1hc3luYyB0PT57bGV0IGU9bnVsbCxpPW51bGw7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNyZWF0ZUltYWdlQml0bWFwKXRyeXtpZihlPWF3YWl0IGNyZWF0ZUltYWdlQml0bWFwKHQpLGUpcmV0dXJuIGV9Y2F0Y2godCl7fXZhciByO3JldHVybiBlfHwoaT1hd2FpdChyPXQsbmV3IFByb21pc2UoKCh0LGUpPT57bGV0IGk9VVJMLmNyZWF0ZU9iamVjdFVSTChyKSxuPW5ldyBJbWFnZTtuLnNyYz1pLG4ub25sb2FkPSgpPT57VVJMLnJldm9rZU9iamVjdFVSTChuLnNyYyksdChuKX0sbi5vbmVycm9yPXQ9PntlKG5ldyBFcnJvcihcIkNhbid0IGNvbnZlcnQgYmxvYiB0byBpbWFnZSA6IFwiKyh0IGluc3RhbmNlb2YgRXZlbnQ/dC50eXBlOnQpKSl9fSkpKSksaX0saT0odCxlLGkscik9Pnt0LndpZHRoPT1pJiZ0LmhlaWdodD09cnx8KHQud2lkdGg9aSx0LmhlaWdodD1yKTtjb25zdCBuPXQuZ2V0Q29udGV4dChcIjJkXCIpO24uY2xlYXJSZWN0KDAsMCx0LndpZHRoLHQuaGVpZ2h0KSxuLmRyYXdJbWFnZShlLDAsMCl9LHI9YXdhaXQgdChlKSxuPXIgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50P3IubmF0dXJhbFdpZHRoOnIud2lkdGgscz1yIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudD9yLm5hdHVyYWxIZWlnaHQ6ci5oZWlnaHQ7bGV0IG89dGhpcy5fY3ZzU2luZ2xlRnJhbWVNb2RlO2NvbnN0IGE9bnVsbD09bz92b2lkIDA6by53aWR0aCxoPW51bGw9PW8/dm9pZCAwOm8uaGVpZ2h0O298fChvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksdGhpcy5fY3ZzU2luZ2xlRnJhbWVNb2RlPW8pLGkobyxyLG4scyksdGhpcy5faW5uZXJDb21wb25lbnQuc2V0RWxlbWVudChcImNvbnRlbnRcIixvKSxhPT09by53aWR0aCYmaD09PW8uaGVpZ2h0fHx0aGlzLmV2ZW50SGFuZGxlci5maXJlKFwiY29udGVudDp1cGRhdGVkXCIsbnVsbCx7YXN5bmM6ITF9KX10aGlzLl9vblNpbmdsZUZyYW1lQWNxdWlyZWQmJnNldFRpbWVvdXQoKCgpPT57dGhpcy5fb25TaW5nbGVGcmFtZUFjcXVpcmVkKHRoaXMuX2N2c1NpbmdsZUZyYW1lTW9kZSl9KSwwKX0pKSx0LnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIix0LnN0eWxlLnRvcD1cIi05OTk5cHhcIix0LnN0eWxlLmJhY2tncm91bmRDb2xvcj1cInRyYW5zcGFyZW50XCIsdC5zdHlsZS5jb2xvcj1cInRyYW5zcGFyZW50XCI7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuYXBwZW5kKHQpLHRoaXMuX2lubmVyQ29tcG9uZW50LnNldEVsZW1lbnQoXCJzaW5nbGUtZnJhbWUtaW5wdXQtY29udGFpbmVyXCIsZSksdGhpcy5fc2luZ2xlRnJhbWVJbnB1dENvbnRhaW5lcj1lfW51bGw9PXR8fHQuY2xpY2soKX0saWUuc2V0KHRoaXMsW10pLHRoaXMuX2NhcHR1cmVkUmVzdWx0UmVjZWl2ZXI9e29uQ2FwdHVyZWRSZXN1bHRSZWNlaXZlZDoodCxlKT0+e3ZhciBpLHIsbixzO2lmKHRoaXMuZGlzcG9zZWQpcmV0dXJuO2lmKHRoaXMuY2xlYXJBbGxJbm5lckRyYXdpbmdJdGVtcygpLCF0KXJldHVybjtjb25zdCBvPXQub3JpZ2luYWxJbWFnZVRhZztpZighbylyZXR1cm47Y29uc3QgYT10Lml0ZW1zO2lmKCEobnVsbD09YT92b2lkIDA6YS5sZW5ndGgpKXJldHVybjtjb25zdCBoPShudWxsPT09KGk9by5jcm9wUmVnaW9uKXx8dm9pZCAwPT09aT92b2lkIDA6aS5sZWZ0KXx8MCxsPShudWxsPT09KHI9by5jcm9wUmVnaW9uKXx8dm9pZCAwPT09cj92b2lkIDA6ci50b3ApfHwwLGM9KG51bGw9PT0obj1vLmNyb3BSZWdpb24pfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnJpZ2h0KT9vLmNyb3BSZWdpb24ucmlnaHQtaDpvLm9yaWdpbmFsV2lkdGgsdT0obnVsbD09PShzPW8uY3JvcFJlZ2lvbil8fHZvaWQgMD09PXM/dm9pZCAwOnMuYm90dG9tKT9vLmNyb3BSZWdpb24uYm90dG9tLWw6by5vcmlnaW5hbEhlaWdodCxkPW8uY3VycmVudFdpZHRoLGc9by5jdXJyZW50SGVpZ2h0LG09KHQsZSxpLHIsbixzLG8sYSxoPVtdLGwpPT57ZS5mb3JFYWNoKCh0PT53ZS5fdHJhbnNmb3JtQ29vcmRpbmF0ZXModCxpLHIsbixzLG8sYSkpKTtjb25zdCBjPW5ldyBkZSh7cG9pbnRzOlt7eDplWzBdLngseTplWzBdLnl9LHt4OmVbMV0ueCx5OmVbMV0ueX0se3g6ZVsyXS54LHk6ZVsyXS55fSx7eDplWzNdLngseTplWzNdLnl9XX0sbCk7Zm9yKGxldCB0IG9mIGgpYy5hZGROb3RlKHQpO3QuYWRkRHJhd2luZ0l0ZW1zKFtjXSkseCh0aGlzLGllLFwiZlwiKS5wdXNoKGMpfTtsZXQgcCx2O2ZvcihsZXQgdCBvZiBhKXN3aXRjaCh0LnR5cGUpe2Nhc2UgZi5DUklUX09SSUdJTkFMX0lNQUdFOmJyZWFrO2Nhc2UgZi5DUklUX0JBUkNPREU6cD10aGlzLmdldERyYXdpbmdMYXllcihtZS5EQlJfTEFZRVJfSUQpLHY9W3tuYW1lOlwiZm9ybWF0XCIsY29udGVudDp0LmZvcm1hdFN0cmluZ30se25hbWU6XCJ0ZXh0XCIsY29udGVudDp0LnRleHR9XSwobnVsbD09ZT92b2lkIDA6ZS5pc0JhcmNvZGVWZXJpZnlPcGVuKT90LnZlcmlmaWVkP20ocCx0LmxvY2F0aW9uLnBvaW50cyxoLGwsYyx1LGQsZyx2KTptKHAsdC5sb2NhdGlvbi5wb2ludHMsaCxsLGMsdSxkLGcsdixnZS5TVFlMRV9PUkFOR0VfU1RST0tFX1RSQU5TUEFSRU5UKTptKHAsdC5sb2NhdGlvbi5wb2ludHMsaCxsLGMsdSxkLGcsdik7YnJlYWs7Y2FzZSBmLkNSSVRfVEVYVF9MSU5FOnA9dGhpcy5nZXREcmF3aW5nTGF5ZXIobWUuRExSX0xBWUVSX0lEKSx2PVt7bmFtZTpcInRleHRcIixjb250ZW50OnQudGV4dH1dLGUuaXNMYWJlbFZlcmlmeU9wZW4/dC52ZXJpZmllZD9tKHAsdC5sb2NhdGlvbi5wb2ludHMsaCxsLGMsdSxkLGcsdik6bShwLHQubG9jYXRpb24ucG9pbnRzLGgsbCxjLHUsZCxnLHYsZ2UuU1RZTEVfR1JFRU5fU1RST0tFX1RSQU5TUEFSRU5UKTptKHAsdC5sb2NhdGlvbi5wb2ludHMsaCxsLGMsdSxkLGcsdik7YnJlYWs7Y2FzZSBmLkNSSVRfREVURUNURURfUVVBRDpwPXRoaXMuZ2V0RHJhd2luZ0xheWVyKG1lLkRETl9MQVlFUl9JRCksKG51bGw9PWU/dm9pZCAwOmUuaXNEZXRlY3RWZXJpZnlPcGVuKT90LnZlcmlmaWVkP20ocCx0LmxvY2F0aW9uLnBvaW50cyxoLGwsYyx1LGQsZyxbXSk6bShwLHQubG9jYXRpb24ucG9pbnRzLGgsbCxjLHUsZCxnLFtdLGdlLlNUWUxFX0JMVUVfU1RST0tFX1RSQU5TUEFSRU5UKTptKHAsdC5sb2NhdGlvbi5wb2ludHMsaCxsLGMsdSxkLGcsW10pO2JyZWFrO2Nhc2UgZi5DUklUX05PUk1BTElaRURfSU1BR0U6cD10aGlzLmdldERyYXdpbmdMYXllcihtZS5ERE5fTEFZRVJfSUQpLChudWxsPT1lP3ZvaWQgMDplLmlzTm9ybWFsaXplVmVyaWZ5T3Blbik/dC52ZXJpZmllZD9tKHAsdC5sb2NhdGlvbi5wb2ludHMsaCxsLGMsdSxkLGcsW10pOm0ocCx0LmxvY2F0aW9uLnBvaW50cyxoLGwsYyx1LGQsZyxbXSxnZS5TVFlMRV9CTFVFX1NUUk9LRV9UUkFOU1BBUkVOVCk6bShwLHQubG9jYXRpb24ucG9pbnRzLGgsbCxjLHUsZCxnLFtdKTticmVhaztjYXNlIGYuQ1JJVF9QQVJTRURfUkVTVUxUOmJyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiSWxsZWdhbCBpdGVtIHR5cGUuXCIpfX19LHJlLnNldCh0aGlzLCExKSx0aGlzLmV2ZW50SGFuZGxlcj1uZXcgY3QsdGhpcy5ldmVudEhhbmRsZXIub24oXCJjb250ZW50OnVwZGF0ZWRcIiwoKCk9Pnt4KHRoaXMsenQsXCJmXCIpJiZjbGVhclRpbWVvdXQoeCh0aGlzLHp0LFwiZlwiKSksQyh0aGlzLHp0LHNldFRpbWVvdXQoKCgpPT57aWYodGhpcy5kaXNwb3NlZClyZXR1cm47bGV0IHQ7dGhpcy5fdXBkYXRlVmlkZW9Db250YWluZXIoKTt0cnl7dD10aGlzLmdldENvbnRlbnREaW1lbnNpb25zKCl9Y2F0Y2godCl7aWYoXCJJbnZhbGlkIGNvbnRlbnQgZGltZW5zaW9ucy5cIj09PSh0Lm1lc3NhZ2V8fHQpKXJldHVybjt0aHJvdyB0fXRoaXMudXBkYXRlRHJhd2luZ0xheWVycyh0KSx0aGlzLnVwZGF0ZUNvbnZlcnRlZFJlZ2lvbih0KX0pLDApLFwiZlwiKX0pKSx0aGlzLmV2ZW50SGFuZGxlci5vbihcInZpZGVvRWw6cmVzaXplZFwiLCgoKT0+e3godGhpcyxxdCxcImZcIikmJmNsZWFyVGltZW91dCh4KHRoaXMscXQsXCJmXCIpKSxDKHRoaXMscXQsc2V0VGltZW91dCgoKCk9Pnt0aGlzLmRpc3Bvc2VkfHx0aGlzLl91cGRhdGVWaWRlb0NvbnRhaW5lcigpfSksMCksXCJmXCIpfSkpfV9zZXRVSUVsZW1lbnQodCl7dGhpcy5VSUVsZW1lbnQ9dCx0aGlzLl91bmJpbmRVSSgpLHRoaXMuX2JpbmRVSSgpfWFzeW5jIHNldFVJRWxlbWVudCh0KXtsZXQgZTtpZihcInN0cmluZ1wiPT10eXBlb2YgdCl7bGV0IGk9YXdhaXQgZ3QodCk7ZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLE9iamVjdC5hc3NpZ24oZS5zdHlsZSx7d2lkdGg6XCIxMDAlXCIsaGVpZ2h0OlwiMTAwJVwifSksZS5hdHRhY2hTaGFkb3coe21vZGU6XCJvcGVuXCJ9KS5hcHBlbmRDaGlsZChpLmNsb25lTm9kZSghMCkpfWVsc2UgZT10O3RoaXMuX3NldFVJRWxlbWVudChlKX1nZXRVSUVsZW1lbnQoKXtyZXR1cm4gdGhpcy5VSUVsZW1lbnR9X2JpbmRVSSgpe3ZhciB0LGU7aWYoIXRoaXMuVUlFbGVtZW50KXRocm93IG5ldyBFcnJvcihcIk5lZWQgdG8gc2V0ICdVSUVsZW1lbnQnLlwiKTtpZih0aGlzLl9pbm5lckNvbXBvbmVudClyZXR1cm47bGV0IGk9dGhpcy5VSUVsZW1lbnQ7aT1pLnNoYWRvd1Jvb3R8fGk7bGV0IHI9KG51bGw9PT0odD1pLmNsYXNzTGlzdCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY29udGFpbnModGhpcy5jb250YWluZXJDbGFzc05hbWUpKT9pOmkucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5jb250YWluZXJDbGFzc05hbWV9YCk7aWYoIXIpdGhyb3cgRXJyb3IoYENhbiBub3QgZmluZCB0aGUgZWxlbWVudCB3aXRoIGNsYXNzICcke3RoaXMuY29udGFpbmVyQ2xhc3NOYW1lfScuYCk7aWYodGhpcy5faW5uZXJDb21wb25lbnQ9bmV3IHllLHIuYXBwZW5kQ2hpbGQodGhpcy5faW5uZXJDb21wb25lbnQpLHgodGhpcyxYdCxcIm1cIixuZSkuY2FsbCh0aGlzKSk7ZWxzZXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKTtPYmplY3QuYXNzaWduKHQuc3R5bGUse3Bvc2l0aW9uOlwiYWJzb2x1dGVcIixsZWZ0OlwiMFwiLHRvcDpcIjBcIix3aWR0aDpcIjEwMCVcIixoZWlnaHQ6XCIxMDAlXCIsb2JqZWN0Rml0OnRoaXMuZ2V0VmlkZW9GaXQoKX0pLHQuc2V0QXR0cmlidXRlKFwiYXV0b3BsYXlcIixcInRydWVcIiksdC5zZXRBdHRyaWJ1dGUoXCJwbGF5c2lubGluZVwiLFwidHJ1ZVwiKSx0LnNldEF0dHJpYnV0ZShcIm11dGVkXCIsXCJ0cnVlXCIpLFtcImlQaG9uZVwiLFwiaVBhZFwiLFwiTWFjXCJdLmluY2x1ZGVzKEEuT1MpJiZ0LnNldEF0dHJpYnV0ZShcInBvc3RlclwiLFwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJRUFBQUFBQUFBQUFBQUFBQUFBQUNINUJBRUFBQUFBTEFBQUFBQUJBQUVBQUFnRUFBRUVCQUE3XCIpLEModGhpcyxadCx0LFwiZlwiKTtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5hcHBlbmQodCksZS5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwiLHRoaXMuX3ZpZGVvQ29udGFpbmVyPWUsdGhpcy5faW5uZXJDb21wb25lbnQuc2V0RWxlbWVudChcImNvbnRlbnRcIixlKX1pZih0aGlzLl9zZWxSc2w9aS5xdWVyeVNlbGVjdG9yKFwiLmRjZS1zZWwtcmVzb2x1dGlvblwiKSx0aGlzLl9zZWxNaW5MdHI9aS5xdWVyeVNlbGVjdG9yKFwiLmRsci1zZWwtbWlubGV0dGVyXCIpLHRoaXMuX2RpdlNjYW5BcmVhPWkucXVlcnlTZWxlY3RvcihcIi5kY2Utc2NhbmFyZWFcIiksdGhpcy5fZGl2U2NhbkxpZ2h0PWkucXVlcnlTZWxlY3RvcihcIi5kY2Utc2NhbmxpZ2h0XCIpLHRoaXMuX2JnTG9hZGluZz1pLnF1ZXJ5U2VsZWN0b3IoXCIuZGNlLWJnLWxvYWRpbmdcIiksdGhpcy5fYmdDYW1lcmE9aS5xdWVyeVNlbGVjdG9yKFwiLmRjZS1iZy1jYW1lcmFcIiksdGhpcy5fc2VsQ2FtPWkucXVlcnlTZWxlY3RvcihcIi5kY2Utc2VsLWNhbWVyYVwiKSx0aGlzLl9vcHRHb3RSc2w9aS5xdWVyeVNlbGVjdG9yKFwiLmRjZS1vcHQtZ290UmVzb2x1dGlvblwiKSx0aGlzLl9idG5DbG9zZT1pLnF1ZXJ5U2VsZWN0b3IoXCIuZGNlLWJ0bi1jbG9zZVwiKSx0aGlzLl9vcHRHb3RNaW5MdHI9aS5xdWVyeVNlbGVjdG9yKFwiLmRsci1vcHQtZ290TWluTHRyXCIpLHRoaXMuX3NlbFJzbCYmKHRoaXMuX2hpZGVEZWZhdWx0U2VsZWN0aW9ufHx4KHRoaXMsWHQsXCJtXCIsbmUpLmNhbGwodGhpcyl8fHRoaXMuX3NlbFJzbC5vcHRpb25zLmxlbmd0aHx8KHRoaXMuX3NlbFJzbC5pbm5lckhUTUw9Wyc8b3B0aW9uIGNsYXNzPVwiZGNlLW9wdC1nb3RSZXNvbHV0aW9uXCIgdmFsdWU9XCJnb3RcIj48L29wdGlvbj4nLCc8b3B0aW9uIGRhdGEtd2lkdGg9XCIxOTIwXCIgZGF0YS1oZWlnaHQ9XCIxMDgwXCI+YXNrIDE5MjB4MTA4MDwvb3B0aW9uPicsJzxvcHRpb24gZGF0YS13aWR0aD1cIjEyODBcIiBkYXRhLWhlaWdodD1cIjcyMFwiPmFzayAxMjgweDcyMDwvb3B0aW9uPicsJzxvcHRpb24gZGF0YS13aWR0aD1cIjY0MFwiIGRhdGEtaGVpZ2h0PVwiNDgwXCI+YXNrIDY0MHg0ODA8L29wdGlvbj4nXS5qb2luKFwiXCIpLHRoaXMuX29wdEdvdFJzbD10aGlzLl9zZWxSc2wub3B0aW9uc1swXSkpLHRoaXMuX3NlbE1pbkx0ciYmKHRoaXMuX2hpZGVEZWZhdWx0U2VsZWN0aW9ufHx4KHRoaXMsWHQsXCJtXCIsbmUpLmNhbGwodGhpcyl8fHRoaXMuX3NlbE1pbkx0ci5vcHRpb25zLmxlbmd0aHx8KHRoaXMuX3NlbE1pbkx0ci5pbm5lckhUTUw9Wyc8b3B0aW9uIGNsYXNzPVwiZGxyLW9wdC1nb3RNaW5MdHJcIiB2YWx1ZT1cImdvdFwiPjwvb3B0aW9uPicsJzxvcHRpb24gdmFsdWU9XCIwXCIgc2VsZWN0ZWQ+YW55IGxldHRlcjwvb3B0aW9uPicsJzxvcHRpb24gdmFsdWU9XCIzXCI+MysgbGV0dGVyczwvb3B0aW9uPicsJzxvcHRpb24gdmFsdWU9XCI1XCI+NSsgbGV0dGVyczwvb3B0aW9uPicsJzxvcHRpb24gdmFsdWU9XCI4XCI+OCsgbGV0dGVyczwvb3B0aW9uPicsJzxvcHRpb24gdmFsdWU9XCIxMlwiPjEyKyBsZXR0ZXJzPC9vcHRpb24+JywnPG9wdGlvbiB2YWx1ZT1cIjE3XCI+MTcrIGxldHRlcnM8L29wdGlvbj4nLCc8b3B0aW9uIHZhbHVlPVwiMzBcIj4zMCsgbGV0dGVyczwvb3B0aW9uPicsJzxvcHRpb24gdmFsdWU9XCI1MFwiPjUwKyBsZXR0ZXJzPC9vcHRpb24+JywnPG9wdGlvbiB2YWx1ZT1cIjgwXCI+ODArIGxldHRlcnM8L29wdGlvbj4nLCc8b3B0aW9uIHZhbHVlPVwiMTIwXCI+MTIwKyBsZXR0ZXJzPC9vcHRpb24+J10uam9pbihcIlwiKSx0aGlzLl9vcHRHb3RNaW5MdHI9dGhpcy5fc2VsTWluTHRyLm9wdGlvbnNbMF0pKSx0aGlzLmlzU2Nhbkxhc2VyVmlzaWJsZSgpfHx4KHRoaXMsWHQsXCJtXCIsbGUpLmNhbGwodGhpcykseCh0aGlzLFh0LFwibVwiLG5lKS5jYWxsKHRoaXMpJiYodGhpcy5faW5uZXJDb21wb25lbnQmJih0aGlzLl9pbm5lckNvbXBvbmVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9jbGlja0lwdFNpbmdsZUZyYW1lTW9kZSksdGhpcy5faW5uZXJDb21wb25lbnQuc2V0QXR0cmlidXRlKFwidGl0bGVcIixcIlRha2UgYSBwaG90b1wiKSksdGhpcy5fYmdDYW1lcmEmJih0aGlzLl9iZ0NhbWVyYS5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIikpLHgodGhpcyxYdCxcIm1cIixuZSkuY2FsbCh0aGlzKXx8dGhpcy5faGlkZURlZmF1bHRTZWxlY3Rpb24/KHRoaXMuX3NlbENhbSYmKHRoaXMuX3NlbENhbS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKSx0aGlzLl9zZWxSc2wmJih0aGlzLl9zZWxSc2wuc3R5bGUuZGlzcGxheT1cIm5vbmVcIiksdGhpcy5fc2VsTWluTHRyJiYodGhpcy5fc2VsTWluTHRyLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpKToodGhpcy5fc2VsQ2FtJiYodGhpcy5fc2VsQ2FtLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiKSx0aGlzLl9zZWxSc2wmJih0aGlzLl9zZWxSc2wuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIpLHRoaXMuX3NlbE1pbkx0ciYmKHRoaXMuX3NlbE1pbkx0ci5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIiksdGhpcy5fc3RvcExvYWRpbmcoKSksd2luZG93LlJlc2l6ZU9ic2VydmVyKXt0aGlzLl9yZXNpemVPYnNlcnZlcnx8KHRoaXMuX3Jlc2l6ZU9ic2VydmVyPW5ldyBSZXNpemVPYnNlcnZlcigodD0+e3ZhciBlO3dlLl9vbkxvZyYmd2UuX29uTG9nKFwicmVzaXplIG9ic2VydmVyIHRyaWdnZXJlZC5cIik7Zm9yKGxldCBpIG9mIHQpaS50YXJnZXQ9PT0obnVsbD09PShlPXRoaXMuX2lubmVyQ29tcG9uZW50KXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5nZXRXcmFwcGVyKCkpJiZ0aGlzLl92aWRlb1Jlc2l6ZUxpc3RlbmVyKCl9KSkpO2NvbnN0IHQ9bnVsbD09PShlPXRoaXMuX2lubmVyQ29tcG9uZW50KXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5nZXRXcmFwcGVyKCk7dCYmdGhpcy5fcmVzaXplT2JzZXJ2ZXIub2JzZXJ2ZSh0KX14KHRoaXMsdGUsXCJmXCIpLndpZHRoPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCx4KHRoaXMsdGUsXCJmXCIpLmhlaWdodD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fd2luZG93UmVzaXplTGlzdGVuZXIpfV91bmJpbmRVSSgpe3ZhciB0LGUsaSxyO3godGhpcyxYdCxcIm1cIixuZSkuY2FsbCh0aGlzKT8odGhpcy5faW5uZXJDb21wb25lbnQmJih0aGlzLl9pbm5lckNvbXBvbmVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9jbGlja0lwdFNpbmdsZUZyYW1lTW9kZSksdGhpcy5faW5uZXJDb21wb25lbnQucmVtb3ZlQXR0cmlidXRlKFwidGl0bGVcIikpLHRoaXMuX2JnQ2FtZXJhJiYodGhpcy5fYmdDYW1lcmEuc3R5bGUuZGlzcGxheT1cIm5vbmVcIikpOnRoaXMuX3N0b3BMb2FkaW5nKCkseCh0aGlzLFh0LFwibVwiLGxlKS5jYWxsKHRoaXMpLG51bGw9PT0odD10aGlzLl9kcmF3aW5nTGF5ZXJNYW5hZ2VyKXx8dm9pZCAwPT09dHx8dC5jbGVhckRyYXdpbmdMYXllcnMoKSxudWxsPT09KGU9dGhpcy5faW5uZXJDb21wb25lbnQpfHx2b2lkIDA9PT1lfHxlLnJlbW92ZUVsZW1lbnQoXCJkcmF3aW5nLWxheWVyXCIpLHRoaXMuX2xheWVyQmFzZUN2cz1udWxsLHRoaXMuX2RyYXdpbmdMYXllck9mTWFzaz1udWxsLHRoaXMuX2RyYXdpbmdMYXllck9mVGlwPW51bGwsbnVsbD09PShpPXRoaXMuX2lubmVyQ29tcG9uZW50KXx8dm9pZCAwPT09aXx8aS5yZW1vdmUoKSx0aGlzLl9pbm5lckNvbXBvbmVudD1udWxsLEModGhpcyxadCxudWxsLFwiZlwiKSxudWxsPT09KHI9dGhpcy5fdmlkZW9Db250YWluZXIpfHx2b2lkIDA9PT1yfHxyLnJlbW92ZSgpLHRoaXMuX3ZpZGVvQ29udGFpbmVyPW51bGwsdGhpcy5fc2VsQ2FtPW51bGwsdGhpcy5fc2VsUnNsPW51bGwsdGhpcy5fb3B0R290UnNsPW51bGwsdGhpcy5fYnRuQ2xvc2U9bnVsbCx0aGlzLl9zZWxNaW5MdHI9bnVsbCx0aGlzLl9vcHRHb3RNaW5MdHI9bnVsbCx0aGlzLl9kaXZTY2FuQXJlYT1udWxsLHRoaXMuX2RpdlNjYW5MaWdodD1udWxsLHRoaXMuX3NpbmdsZUZyYW1lSW5wdXRDb250YWluZXImJih0aGlzLl9zaW5nbGVGcmFtZUlucHV0Q29udGFpbmVyLnJlbW92ZSgpLHRoaXMuX3NpbmdsZUZyYW1lSW5wdXRDb250YWluZXI9bnVsbCksd2luZG93LlJlc2l6ZU9ic2VydmVyJiZ0aGlzLl9yZXNpemVPYnNlcnZlciYmdGhpcy5fcmVzaXplT2JzZXJ2ZXIuZGlzY29ubmVjdCgpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fd2luZG93UmVzaXplTGlzdGVuZXIpfV9zdGFydExvYWRpbmcoKXt0aGlzLl9iZ0xvYWRpbmcmJih0aGlzLl9iZ0xvYWRpbmcuc3R5bGUuZGlzcGxheT1cIlwiLHRoaXMuX2JnTG9hZGluZy5zdHlsZS5hbmltYXRpb25QbGF5U3RhdGU9XCJcIil9X3N0b3BMb2FkaW5nKCl7dGhpcy5fYmdMb2FkaW5nJiYodGhpcy5fYmdMb2FkaW5nLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5fYmdMb2FkaW5nLnN0eWxlLmFuaW1hdGlvblBsYXlTdGF0ZT1cInBhdXNlZFwiKX1fcmVuZGVyQ2FtZXJhc0luZm8odCxlKXtpZih0aGlzLl9zZWxDYW0pe2xldCBpO3RoaXMuX3NlbENhbS50ZXh0Q29udGVudD1cIlwiO2ZvcihsZXQgciBvZiBlKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7ZS52YWx1ZT1yLmRldmljZUlkLGUuaW5uZXJUZXh0PXIubGFiZWwsdGhpcy5fc2VsQ2FtLmFwcGVuZChlKSxyLmRldmljZUlkJiZ0JiZ0LmRldmljZUlkPT1yLmRldmljZUlkJiYoaT1lKX10aGlzLl9zZWxDYW0udmFsdWU9aT9pLnZhbHVlOlwiXCJ9bGV0IGk9dGhpcy5VSUVsZW1lbnQ7aWYoaT1pLnNoYWRvd1Jvb3R8fGksaS5xdWVyeVNlbGVjdG9yKFwiLmRjZS1tYWNyby11c2UtbW9iaWxlLW5hdGl2ZS1saWtlLXVpXCIpKXtsZXQgdD1pLnF1ZXJ5U2VsZWN0b3IoXCIuZGNlLW1uLWNhbWVyYXNcIik7aWYodCl7dC50ZXh0Q29udGVudD1cIlwiO2ZvcihsZXQgaSBvZiBlKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5jbGFzc0xpc3QuYWRkKFwiZGNlLW1uLWNhbWVyYS1vcHRpb25cIiksZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWRhdmljZS1pZFwiLGkuZGV2aWNlSWQpLGUudGV4dENvbnRlbnQ9aS5sYWJlbCx0LmFwcGVuZChlKX19fX1fcmVuZGVyUmVzb2x1dGlvbkluZm8odCl7dGhpcy5fb3B0R290UnNsJiYodGhpcy5fb3B0R290UnNsLnNldEF0dHJpYnV0ZShcImRhdGEtd2lkdGhcIix0LndpZHRoKSx0aGlzLl9vcHRHb3RSc2wuc2V0QXR0cmlidXRlKFwiZGF0YS1oZWlnaHRcIix0LmhlaWdodCksdGhpcy5fb3B0R290UnNsLmlubmVyVGV4dD1cImdvdCBcIit0LndpZHRoK1wieFwiK3QuaGVpZ2h0LHRoaXMuX3NlbFJzbCYmdGhpcy5fb3B0R290UnNsLnBhcmVudE5vZGU9PXRoaXMuX3NlbFJzbCYmKHRoaXMuX3NlbFJzbC52YWx1ZT1cImdvdFwiKSk7e2xldCBlPXRoaXMuVUlFbGVtZW50O2U9KG51bGw9PWU/dm9pZCAwOmUuc2hhZG93Um9vdCl8fGU7bGV0IGk9bnVsbD09ZT92b2lkIDA6ZS5xdWVyeVNlbGVjdG9yKFwiLmRjZS1tbi1yZXNvbHV0aW9uLWJveFwiKTtpZihpKXtsZXQgZT1cIlwiO2lmKHQmJnQud2lkdGgmJnQuaGVpZ2h0KXtsZXQgaT1NYXRoLm1heCh0LndpZHRoLHQuaGVpZ2h0KSxyPU1hdGgubWluKHQud2lkdGgsdC5oZWlnaHQpO2U9cjw9MTA4MD9yK1wiUFwiOmk8M2UzP1wiMktcIjpNYXRoLnJvdW5kKGkvMWUzKStcIktcIn1pLnRleHRDb250ZW50PWV9fX1nZXRWaWRlb0VsZW1lbnQoKXtyZXR1cm4geCh0aGlzLFp0LFwiZlwiKX1pc1ZpZGVvTG9hZGVkKCl7cmV0dXJuISgheCh0aGlzLFp0LFwiZlwiKXx8IXRoaXMuY2FtZXJhRW5oYW5jZXIpJiZ0aGlzLmNhbWVyYUVuaGFuY2VyLmlzT3BlbigpfXNldFZpZGVvRml0KHQpe2lmKHQ9dC50b0xvd2VyQ2FzZSgpLCFbXCJjb250YWluXCIsXCJjb3ZlclwiXS5pbmNsdWRlcyh0KSl0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIHZhbHVlICcke3R9Jy5gKTtpZih0aGlzLnZpZGVvRml0PXQsIXgodGhpcyxadCxcImZcIikpcmV0dXJuO2lmKHgodGhpcyxadCxcImZcIikuc3R5bGUub2JqZWN0Rml0PXQseCh0aGlzLFh0LFwibVwiLG5lKS5jYWxsKHRoaXMpKXJldHVybjtsZXQgZTt0aGlzLl91cGRhdGVWaWRlb0NvbnRhaW5lcigpO3RyeXtlPXRoaXMuZ2V0Q29udGVudERpbWVuc2lvbnMoKX1jYXRjaCh0KXtpZihcIkludmFsaWQgY29udGVudCBkaW1lbnNpb25zLlwiPT09KHQubWVzc2FnZXx8dCkpcmV0dXJuO3Rocm93IHR9eCh0aGlzLFh0LFwibVwiLGNlKS5jYWxsKHRoaXMsZSx0aGlzLmdldENvbnZlcnRlZFJlZ2lvbigpKSx0aGlzLnVwZGF0ZURyYXdpbmdMYXllcnMoZSl9Z2V0VmlkZW9GaXQoKXtyZXR1cm4gdGhpcy52aWRlb0ZpdH1nZXRDb250ZW50RGltZW5zaW9ucygpe3ZhciB0LGUsaSxyO2xldCBuLHMsbztpZih4KHRoaXMsWHQsXCJtXCIsbmUpLmNhbGwodGhpcyk/KG49bnVsbD09PShpPXRoaXMuX2N2c1NpbmdsZUZyYW1lTW9kZSl8fHZvaWQgMD09PWk/dm9pZCAwOmkud2lkdGgscz1udWxsPT09KHI9dGhpcy5fY3ZzU2luZ2xlRnJhbWVNb2RlKXx8dm9pZCAwPT09cj92b2lkIDA6ci5oZWlnaHQsbz1cImNvbnRhaW5cIik6KG49bnVsbD09PSh0PXgodGhpcyxadCxcImZcIikpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnZpZGVvV2lkdGgscz1udWxsPT09KGU9eCh0aGlzLFp0LFwiZlwiKSl8fHZvaWQgMD09PWU/dm9pZCAwOmUudmlkZW9IZWlnaHQsbz10aGlzLmdldFZpZGVvRml0KCkpLCFufHwhcyl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNvbnRlbnQgZGltZW5zaW9ucy5cIik7cmV0dXJue3dpZHRoOm4saGVpZ2h0OnMsb2JqZWN0Rml0Om99fXVwZGF0ZUNvbnZlcnRlZFJlZ2lvbih0KXtjb25zdCBlPWF0LmNvbnZlcnQodGhpcy5zY2FuUmVnaW9uLHQud2lkdGgsdC5oZWlnaHQpO0ModGhpcyxKdCxlLFwiZlwiKSx4KHRoaXMsS3QsXCJmXCIpJiZjbGVhclRpbWVvdXQoeCh0aGlzLEt0LFwiZlwiKSksQyh0aGlzLEt0LHNldFRpbWVvdXQoKCgpPT57bGV0IHQ7dHJ5e3Q9dGhpcy5nZXRDb250ZW50RGltZW5zaW9ucygpfWNhdGNoKHQpe2lmKFwiSW52YWxpZCBjb250ZW50IGRpbWVuc2lvbnMuXCI9PT0odC5tZXNzYWdlfHx0KSlyZXR1cm47dGhyb3cgdH14KHRoaXMsWHQsXCJtXCIsc2UpLmNhbGwodGhpcyx0LGUpLHgodGhpcyxYdCxcIm1cIixjZSkuY2FsbCh0aGlzLHQsZSl9KSwwKSxcImZcIil9Z2V0Q29udmVydGVkUmVnaW9uKCl7cmV0dXJuIHgodGhpcyxKdCxcImZcIil9c2V0U2NhblJlZ2lvbih0KXtpZihudWxsIT10JiYhdHQodCkmJiFzdCh0KSl0aHJvdyBUeXBlRXJyb3IoXCJJbnZhbGlkICdyZWdpb24nLlwiKTtsZXQgZTt0aGlzLnNjYW5SZWdpb249dD9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQpKTpudWxsO3RyeXtlPXRoaXMuZ2V0Q29udGVudERpbWVuc2lvbnMoKX1jYXRjaCh0KXtpZihcIkludmFsaWQgY29udGVudCBkaW1lbnNpb25zLlwiPT09KHQubWVzc2FnZXx8dCkpcmV0dXJuO3Rocm93IHR9dGhpcy51cGRhdGVDb252ZXJ0ZWRSZWdpb24oZSl9Z2V0U2NhblJlZ2lvbigpe3JldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuc2NhblJlZ2lvbikpfWdldFZpc2libGVSZWdpb25PZlZpZGVvKHQpe2lmKCF0aGlzLmlzVmlkZW9Mb2FkZWQoKSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgdmlkZW8gaXMgbm90IGxvYWRlZC5cIik7Y29uc3QgZT14KHRoaXMsWnQsXCJmXCIpLnZpZGVvV2lkdGgsaT14KHRoaXMsWnQsXCJmXCIpLnZpZGVvSGVpZ2h0LHI9dGhpcy5nZXRWaWRlb0ZpdCgpLHt3aWR0aDpuLGhlaWdodDpzfT10aGlzLl9pbm5lckNvbXBvbmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihuPD0wfHxzPD0wKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBnZXQgdmlkZW8gZGltZW5zaW9ucy4gVmlkZW8gbWF5IG5vdCBiZSByZW5kZXJlZCBvbiB0aGUgcGFnZS5cIik7bGV0IG87Y29uc3QgYT17eDowLHk6MCx3aWR0aDplLGhlaWdodDppLGlzTWVhc3VyZWRJblBlcmNlbnRhZ2U6ITF9O2lmKFwiY292ZXJcIj09PXImJihuL3M8ZS9pPyhvPXMvaSxhLng9TWF0aC5mbG9vcigoZS1uL28pLzIpLGEueT0wLGEud2lkdGg9TWF0aC5jZWlsKG4vbyksYS5oZWlnaHQ9aSk6KG89bi9lLGEueD0wLGEueT1NYXRoLmZsb29yKChpLXMvbykvMiksYS53aWR0aD1lLGEuaGVpZ2h0PU1hdGguY2VpbChzL28pKSksbnVsbD09dD92b2lkIDA6dC5pblBpeGVscylyZXR1cm4gYTtjb25zdCBoPWE7cmV0dXJuIGgueD1NYXRoLmNlaWwoaC54L2kqMTAwKSxoLnk9TWF0aC5jZWlsKGgueS9lKjEwMCksaC53aWR0aD1NYXRoLmZsb29yKGgud2lkdGgvZSoxMDApLGguaGVpZ2h0PU1hdGguZmxvb3IoaC5oZWlnaHQvaSoxMDApLGguaXNNZWFzdXJlZEluUGVyY2VudGFnZT0hMCxhfXNldFNjYW5SZWdpb25NYXNrKHQsZSxpLHIpe3RoaXMuX2RyYXdpbmdMYXllck9mTWFza3x8KHRoaXMuX2RyYXdpbmdMYXllck9mTWFzaz10aGlzLl9jcmVhdGVEcmF3aW5nTGF5ZXIoLTIpLHRoaXMuaXNTY2FuUmVnaW9uTWFza1Zpc2libGUoKXx8eCh0aGlzLFh0LFwibVwiLGFlKS5jYWxsKHRoaXMpKSx0aGlzLmNsZWFyU2NhblJlZ2lvbk1hc2soKSx0aGlzLl9tYXNrQmFja1JlY3RTdHlsZUlkfHwodGhpcy5fbWFza0JhY2tSZWN0U3R5bGVJZD1nZS5jcmVhdGVEcmF3aW5nU3R5bGUoe3BhaW50TW9kZTpcImZpbGxcIixmaWxsU3R5bGU6dGhpcy5yZWdpb25NYXNrRmlsbFN0eWxlLGxpbmVXaWR0aDowfSkpLHRoaXMuX21hc2tDZW50ZXJSZWN0U3R5bGVJZHx8KHRoaXMuX21hc2tDZW50ZXJSZWN0U3R5bGVJZD1nZS5jcmVhdGVEcmF3aW5nU3R5bGUoe3BhaW50TW9kZTpcInN0cm9rZVwiLHN0cm9rZVN0eWxlOnRoaXMucmVnaW9uTWFza1N0cm9rZVN0eWxlLGxpbmVXaWR0aDp0aGlzLnJlZ2lvbk1hc2tMaW5lV2lkdGh9KSk7Y29uc3Qgbj10aGlzLl9kcmF3aW5nTGF5ZXJPZk1hc2sud2lkdGgscz10aGlzLl9kcmF3aW5nTGF5ZXJPZk1hc2suaGVpZ2h0LG89bmV3IHd0KHt4OjAseTowLHdpZHRoOm4saGVpZ2h0OnN9LHRoaXMuX21hc2tCYWNrUmVjdFN0eWxlSWQpLGE9bmV3IHd0KHt4Oi1uLzIseTotcy8yK2Usd2lkdGg6dCxoZWlnaHQ6cn0pLGg9bmV3IHd0KHt4Oi1uLzIrdCtpLHk6LXMvMitlLHdpZHRoOm4tdC1pPDA/MDpuLXQtaSxoZWlnaHQ6cn0pLGw9bmV3IHd0KHt4Oi1uLzIseTotcy8yLHdpZHRoOm4saGVpZ2h0OmV9KSxjPW5ldyB3dCh7eDotbi8yLHk6LXMvMitlK3Isd2lkdGg6bixoZWlnaHQ6cy1lLXI8MD8wOnMtZS1yfSk7YS5zZXQoXCJzdHJva2VXaWR0aFwiLDApLGguc2V0KFwic3Ryb2tlV2lkdGhcIiwwKSxsLnNldChcInN0cm9rZVdpZHRoXCIsMCksYy5zZXQoXCJzdHJva2VXaWR0aFwiLDApO2NvbnN0IHU9bmV3IGZlKFthLGgsbCxjXSkuX2dldEZhYnJpY09iamVjdCgpO28uc2V0KFwiY2xpcFBhdGhcIix1KTtjb25zdCBkPW5ldyB3dCh7eDp0LHk6ZSx3aWR0aDppLGhlaWdodDpyfSx0aGlzLl9tYXNrQ2VudGVyUmVjdFN0eWxlSWQpO3RoaXMuX2RyYXdpbmdMYXllck9mTWFzay5hZGREcmF3aW5nSXRlbXMoW28sZF0pfWNsZWFyU2NhblJlZ2lvbk1hc2soKXt0aGlzLl9kcmF3aW5nTGF5ZXJPZk1hc2smJnRoaXMuX2RyYXdpbmdMYXllck9mTWFzay5jbGVhckRyYXdpbmdJdGVtcygpfWRlbGV0ZVNjYW5SZWdpb25NYXNrKCl7dGhpcy5fZHJhd2luZ0xheWVyT2ZNYXNrJiZ0aGlzLmRlbGV0ZURyYXdpbmdMYXllcih0aGlzLl9kcmF3aW5nTGF5ZXJPZk1hc2suZ2V0SWQoKSl9X3NldFNjYW5SZWdpb25NYXNrVmlzaWJsZSh0KXtDKHRoaXMsUXQsdCxcImZcIiksdD94KHRoaXMsWHQsXCJtXCIsb2UpLmNhbGwodGhpcyk6eCh0aGlzLFh0LFwibVwiLGFlKS5jYWxsKHRoaXMpfXNldFNjYW5SZWdpb25NYXNrVmlzaWJsZSh0KXt0aGlzLl9zZXRTY2FuUmVnaW9uTWFza1Zpc2libGUodCksdGhpcy5fdXNlclNldE1hc2tWaXNpYmxlPXR9aXNTY2FuUmVnaW9uTWFza1Zpc2libGUoKXtyZXR1cm4geCh0aGlzLFF0LFwiZlwiKX1zZXRTY2FuUmVnaW9uTWFza1N0eWxlKHQpe2lmKCF0KXJldHVybjtsZXQgZTt0LmZpbGxTdHlsZSYmKHRoaXMucmVnaW9uTWFza0ZpbGxTdHlsZT10LmZpbGxTdHlsZSksdC5zdHJva2VTdHlsZSYmKHRoaXMucmVnaW9uTWFza1N0cm9rZVN0eWxlPXQuc3Ryb2tlU3R5bGUpLHQubGluZVdpZHRoJiYodGhpcy5yZWdpb25NYXNrTGluZVdpZHRoPXQubGluZVdpZHRoKSx0aGlzLl9tYXNrQmFja1JlY3RTdHlsZUlkJiZnZS51cGRhdGVEcmF3aW5nU3R5bGUodGhpcy5fbWFza0JhY2tSZWN0U3R5bGVJZCx7ZmlsbFN0eWxlOnRoaXMucmVnaW9uTWFza0ZpbGxTdHlsZX0pLHRoaXMuX21hc2tDZW50ZXJSZWN0U3R5bGVJZCYmZ2UudXBkYXRlRHJhd2luZ1N0eWxlKHRoaXMuX21hc2tDZW50ZXJSZWN0U3R5bGVJZCx7c3Ryb2tlU3R5bGU6dGhpcy5yZWdpb25NYXNrU3Ryb2tlU3R5bGUsbGluZVdpZHRoOnRoaXMucmVnaW9uTWFza0xpbmVXaWR0aH0pO3RyeXtlPXRoaXMuZ2V0Q29udGVudERpbWVuc2lvbnMoKX1jYXRjaCh0KXtpZihcIkludmFsaWQgY29udGVudCBkaW1lbnNpb25zLlwiPT09KHQubWVzc2FnZXx8dCkpcmV0dXJuO3Rocm93IHR9eCh0aGlzLFh0LFwibVwiLHNlKS5jYWxsKHRoaXMsZSx0aGlzLmdldENvbnZlcnRlZFJlZ2lvbigpKX1nZXRTY2FuUmVnaW9uTWFza1N0eWxlKCl7cmV0dXJue2ZpbGxTdHlsZTp0aGlzLnJlZ2lvbk1hc2tGaWxsU3R5bGUsc3Ryb2tlU3R5bGU6dGhpcy5yZWdpb25NYXNrU3Ryb2tlU3R5bGUsbGluZVdpZHRoOnRoaXMucmVnaW9uTWFza0xpbmVXaWR0aH19X3NldFNjYW5MYXNlclZpc2libGUodCl7Qyh0aGlzLCR0LHQsXCJmXCIpLHQ/eCh0aGlzLFh0LFwibVwiLGhlKS5jYWxsKHRoaXMpOngodGhpcyxYdCxcIm1cIixsZSkuY2FsbCh0aGlzKX1zZXRTY2FuTGFzZXJWaXNpYmxlKHQpe3RoaXMuX3NldFNjYW5MYXNlclZpc2libGUodCksdGhpcy5fdXNlclNldExhc2VyVmlzaWJsZT10fWlzU2Nhbkxhc2VyVmlzaWJsZSgpe3JldHVybiB4KHRoaXMsJHQsXCJmXCIpfV91cGRhdGVWaWRlb0NvbnRhaW5lcigpe2lmKCF4KHRoaXMsWnQsXCJmXCIpKXJldHVybjtpZih4KHRoaXMsWHQsXCJtXCIsbmUpLmNhbGwodGhpcykpcmV0dXJuO2xldCB0PTE7Y29uc3QgZT14KHRoaXMsWnQsXCJmXCIpLnN0eWxlLnRyYW5zZm9ybS5tYXRjaCgvc2NhbGVcXCgoLispXFwpLyk7ZSYmKHQ9cGFyc2VGbG9hdChlWzFdKSk7Y29uc3QgaT10aGlzLl92aWRlb0NvbnRhaW5lcjtpZihcImNvbnRhaW5cIj09PXRoaXMudmlkZW9GaXQmJnQ+MSl7Y29uc3QgdD14KHRoaXMsWnQsXCJmXCIpLnZpZGVvV2lkdGgsZT14KHRoaXMsWnQsXCJmXCIpLnZpZGVvSGVpZ2h0LHt3aWR0aDpyLGhlaWdodDpufT10aGlzLl9pbm5lckNvbXBvbmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxzPXQvZTtpZihyL248cyl7bGV0IHQ9ci9zO2kuc3R5bGUubGVmdD1cIjBcIixpLnN0eWxlLnRvcD0obi10KS8yL24qMTAwK1wiJVwiLGkuc3R5bGUud2lkdGg9XCIxMDAlXCIsaS5zdHlsZS5oZWlnaHQ9dC9uKjEwMCtcIiVcIn1lbHNle2xldCB0PW4qcztpLnN0eWxlLmxlZnQ9KHItdCkvMi9yKjEwMCtcIiVcIixpLnN0eWxlLnRvcD1cIjBcIixpLnN0eWxlLndpZHRoPXQvcioxMDArXCIlXCIsaS5zdHlsZS5oZWlnaHQ9XCIxMDAlXCJ9fWVsc2UgaS5zdHlsZS5sZWZ0PVwiMFwiLGkuc3R5bGUudG9wPVwiMFwiLGkuc3R5bGUud2lkdGg9XCIxMDAlXCIsaS5zdHlsZS5oZWlnaHQ9XCIxMDAlXCJ9dXBkYXRlTGF5ZXJzKCl7bGV0IHQ7dGhpcy5fdXBkYXRlVmlkZW9Db250YWluZXIoKTt0cnl7dD10aGlzLmdldENvbnRlbnREaW1lbnNpb25zKCl9Y2F0Y2godCl7aWYoXCJJbnZhbGlkIGNvbnRlbnQgZGltZW5zaW9ucy5cIj09PSh0Lm1lc3NhZ2V8fHQpKXJldHVybjt0aHJvdyB0fWNvbnN0IGU9dGhpcy5nZXRDb252ZXJ0ZWRSZWdpb24oKTt4KHRoaXMsWHQsXCJtXCIsY2UpLmNhbGwodGhpcyx0LGUpLHRoaXMudXBkYXRlRHJhd2luZ0xheWVycyh0KSx4KHRoaXMsWHQsXCJtXCIsc2UpLmNhbGwodGhpcyx0LGUpfWNsZWFyQWxsSW5uZXJEcmF3aW5nSXRlbXMoKXt4KHRoaXMsaWUsXCJmXCIpLmZvckVhY2goKHQ9PnQucmVtb3ZlKCkpKSx4KHRoaXMsaWUsXCJmXCIpLmxlbmd0aD0wfWRpc3Bvc2UoKXt0aGlzLl91bmJpbmRVSSgpLHRoaXMuX19wcm90b19fPW51bGw7Zm9yKGxldCB0IGluIHRoaXMpZGVsZXRlIHRoaXNbdF07T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJkaXNwb3NlZFwiLHt2YWx1ZTohMH0pfX1mdW5jdGlvbiBiZSh0LGUsaSxyKXtpZihcImFcIj09PWkmJiFyKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZT90IT09ZXx8IXI6IWUuaGFzKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7cmV0dXJuXCJtXCI9PT1pP3I6XCJhXCI9PT1pP3IuY2FsbCh0KTpyP3IudmFsdWU6ZS5nZXQodCl9ZnVuY3Rpb24geGUodCxlLGkscixuKXtpZihcIm1cIj09PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtpZihcImFcIj09PXImJiFuKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZT90IT09ZXx8IW46IWUuaGFzKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtyZXR1cm5cImFcIj09PXI/bi5jYWxsKHQsaSk6bj9uLnZhbHVlPWk6ZS5zZXQodCxpKSxpfXp0PW5ldyBXZWFrTWFwLHF0PW5ldyBXZWFrTWFwLEt0PW5ldyBXZWFrTWFwLFp0PW5ldyBXZWFrTWFwLEp0PW5ldyBXZWFrTWFwLFF0PW5ldyBXZWFrTWFwLCR0PW5ldyBXZWFrTWFwLHRlPW5ldyBXZWFrTWFwLGVlPW5ldyBXZWFrTWFwLGllPW5ldyBXZWFrTWFwLHJlPW5ldyBXZWFrTWFwLFh0PW5ldyBXZWFrU2V0LG5lPWZ1bmN0aW9uKCl7cmV0dXJuXCJkaXNhYmxlZFwiIT09dGhpcy5fc2luZ2xlRnJhbWVNb2RlfSxzZT1mdW5jdGlvbih0LGUpe2UmJigwIT09ZS54fHwwIT09ZS55fHxlLndpZHRoIT09dC53aWR0aHx8ZS5oZWlnaHQhPT10LmhlaWdodCk/dGhpcy5zZXRTY2FuUmVnaW9uTWFzayhlLngsZS55LGUud2lkdGgsZS5oZWlnaHQpOnRoaXMuY2xlYXJTY2FuUmVnaW9uTWFzaygpfSxvZT1mdW5jdGlvbigpe3RoaXMuX2RyYXdpbmdMYXllck9mTWFzayYmdGhpcy5fZHJhd2luZ0xheWVyT2ZNYXNrLnNldFZpc2libGUoITApfSxhZT1mdW5jdGlvbigpe3RoaXMuX2RyYXdpbmdMYXllck9mTWFzayYmdGhpcy5fZHJhd2luZ0xheWVyT2ZNYXNrLnNldFZpc2libGUoITEpfSxoZT1mdW5jdGlvbigpe3RoaXMuX2RpdlNjYW5MaWdodCYmXCJub25lXCI9PXRoaXMuX2RpdlNjYW5MaWdodC5zdHlsZS5kaXNwbGF5JiYodGhpcy5fZGl2U2NhbkxpZ2h0LnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiKX0sbGU9ZnVuY3Rpb24oKXt0aGlzLl9kaXZTY2FuTGlnaHQmJih0aGlzLl9kaXZTY2FuTGlnaHQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIil9LGNlPWZ1bmN0aW9uKHQsZSl7aWYoIXRoaXMuX2RpdlNjYW5BcmVhKXJldHVybjtpZighdGhpcy5faW5uZXJDb21wb25lbnQuZ2V0RWxlbWVudChcImNvbnRlbnRcIikpcmV0dXJuO2NvbnN0e3dpZHRoOmksaGVpZ2h0OnIsb2JqZWN0Rml0Om59PXQ7ZXx8KGU9e3g6MCx5OjAsd2lkdGg6aSxoZWlnaHQ6cn0pO2NvbnN0e3dpZHRoOnMsaGVpZ2h0Om99PXRoaXMuX2lubmVyQ29tcG9uZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKHM8PTB8fG88PTApcmV0dXJuO2NvbnN0IGE9cy9vLGg9aS9yO2xldCBsLGMsdSxkLGY9MTtpZihcImNvbnRhaW5cIj09PW4pYTxoPyhmPXMvaSxsPTAsYz0oby1yKmYpLzIpOihmPW8vcixsPShzLWkqZikvMixjPTApLGwrPWUueCpmLGMrPWUueSpmLHU9ZS53aWR0aCpmLGQ9ZS5oZWlnaHQqZjtlbHNlIGlmKFwiY292ZXJcIj09PW4paWYoYTxoKXtmPW8vcixsPWUueCpmLShpKmYtcykvMixsPU1hdGgubWF4KGwsMCksbD1NYXRoLm1pbihsLHMpLGM9ZS55KmY7bGV0IHQ9KGUueCtlLndpZHRoKSpmLShpKmYtcykvMjt0PU1hdGgubWF4KHQsMCksdD1NYXRoLm1pbih0LHMpLHU9dC1sLGQ9ZS5oZWlnaHQqZn1lbHNle2Y9cy9pLGw9ZS54KmYsYz1lLnkqZi0ocipmLW8pLzIsYz1NYXRoLm1heChjLDApLGM9TWF0aC5taW4oYyxvKTtsZXQgdD0oZS55K2UuaGVpZ2h0KSpmLShyKmYtbykvMjt0PU1hdGgubWF4KHQsMCksdD1NYXRoLm1pbih0LG8pLHU9ZS53aWR0aCpmLGQ9dC1jfWVsc2UgbD0wLGM9MCx1PTAsZD0wO3RoaXMuX2RpdlNjYW5BcmVhLnN0eWxlLmxlZnQ9bCtcInB4XCIsdGhpcy5fZGl2U2NhbkFyZWEuc3R5bGUudG9wPWMrXCJweFwiLHRoaXMuX2RpdlNjYW5BcmVhLnN0eWxlLndpZHRoPXUrXCJweFwiLHRoaXMuX2RpdlNjYW5BcmVhLnN0eWxlLmhlaWdodD1kK1wicHhcIn0sd2UuX2RlZmF1bHRVSUVsZW1lbnRVUkw9XCJAZW5naW5lUmVzb3VyY2VQYXRoL2RjZS51aS5odG1sXCIsXCJmdW5jdGlvblwiPT10eXBlb2YgU3VwcHJlc3NlZEVycm9yJiZTdXBwcmVzc2VkRXJyb3I7Y29uc3QgQ2U9XCJ1bmRlZmluZWRcIj09dHlwZW9mIHNlbGY7bGV0IFNlLFRlLEVlLE9lLEFlO2Z1bmN0aW9uIEllKHQsZSxpLHIpe2lmKFwiYVwiPT09aSYmIXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlP3QhPT1lfHwhcjohZS5oYXModCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtyZXR1cm5cIm1cIj09PWk/cjpcImFcIj09PWk/ci5jYWxsKHQpOnI/ci52YWx1ZTplLmdldCh0KX1mdW5jdGlvbiBMZSh0LGUsaSxyLG4pe2lmKFwibVwiPT09cil0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO2lmKFwiYVwiPT09ciYmIW4pdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlP3QhPT1lfHwhbjohZS5oYXModCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO3JldHVyblwiYVwiPT09cj9uLmNhbGwodCxpKTpuP24udmFsdWU9aTplLnNldCh0LGkpLGl9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG5hdmlnYXRvciYmKFNlPW5hdmlnYXRvcixUZT1TZS51c2VyQWdlbnQsRWU9U2UucGxhdGZvcm0sT2U9U2UubWVkaWFEZXZpY2VzKSxmdW5jdGlvbigpe2lmKCFDZSl7Y29uc3QgdD17RWRnZTp7c2VhcmNoOlwiRWRnXCIsdmVyU2VhcmNoOlwiRWRnXCJ9LE9QUjpudWxsLENocm9tZTpudWxsLFNhZmFyaTp7c3RyOlNlLnZlbmRvcixzZWFyY2g6XCJBcHBsZVwiLHZlclNlYXJjaDpbXCJWZXJzaW9uXCIsXCJpUGhvbmUgT1NcIixcIkNQVSBPU1wiXX0sRmlyZWZveDpudWxsLEV4cGxvcmVyOntzZWFyY2g6XCJNU0lFXCIsdmVyU2VhcmNoOlwiTVNJRVwifX0sZT17SGFybW9ueU9TOm51bGwsQW5kcm9pZDpudWxsLGlQaG9uZTpudWxsLGlQYWQ6bnVsbCxXaW5kb3dzOntzdHI6RWUsc2VhcmNoOlwiV2luXCJ9LE1hYzp7c3RyOkVlfSxMaW51eDp7c3RyOkVlfX07bGV0IGk9XCJ1bmtub3duQnJvd3NlclwiLHI9MCxuPVwidW5rbm93bk9TXCI7Zm9yKGxldCBlIGluIHQpe2NvbnN0IG49dFtlXXx8e307bGV0IHM9bi5zdHJ8fFRlLG89bi5zZWFyY2h8fGUsYT1uLnZlclN0cnx8VGUsaD1uLnZlclNlYXJjaHx8ZTtpZihoIGluc3RhbmNlb2YgQXJyYXl8fChoPVtoXSksLTEhPXMuaW5kZXhPZihvKSl7aT1lO2ZvcihsZXQgdCBvZiBoKXtsZXQgZT1hLmluZGV4T2YodCk7aWYoLTEhPWUpe3I9cGFyc2VGbG9hdChhLnN1YnN0cmluZyhlK3QubGVuZ3RoKzEpKTticmVha319YnJlYWt9fWZvcihsZXQgdCBpbiBlKXtjb25zdCBpPWVbdF18fHt9O2xldCByPWkuc3RyfHxUZSxzPWkuc2VhcmNofHx0O2lmKC0xIT1yLmluZGV4T2Yocykpe249dDticmVha319XCJMaW51eFwiPT1uJiYtMSE9VGUuaW5kZXhPZihcIldpbmRvd3MgTlRcIikmJihuPVwiSGFybW9ueU9TXCIpLEFlPXticm93c2VyOmksdmVyc2lvbjpyLE9TOm59fUNlJiYoQWU9e2Jyb3dzZXI6XCJzc3JcIix2ZXJzaW9uOjAsT1M6XCJzc3JcIn0pfSgpLE9lJiZPZS5nZXRVc2VyTWVkaWEsXCJDaHJvbWVcIj09PUFlLmJyb3dzZXImJkFlLnZlcnNpb24+NjZ8fFwiU2FmYXJpXCI9PT1BZS5icm93c2VyJiZBZS52ZXJzaW9uPjEzfHxcIk9QUlwiPT09QWUuYnJvd3NlciYmQWUudmVyc2lvbj40M3x8XCJFZGdlXCI9PT1BZS5icm93c2VyJiZBZS52ZXJzaW9uLFwiZnVuY3Rpb25cIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2xldCBEZT1jbGFzcyB0e3N0YXRpYyBtdWx0aXBseSh0LGUpe2NvbnN0IGk9W107Zm9yKGxldCByPTA7cjwzO3IrKyl7Y29uc3Qgbj1lLnNsaWNlKDMqciwzKnIrMyk7Zm9yKGxldCBlPTA7ZTwzO2UrKyl7Y29uc3Qgcj1bdFtlXSx0W2UrM10sdFtlKzZdXS5yZWR1Y2UoKCh0LGUsaSk9PnQrZSpuW2ldKSwwKTtpLnB1c2gocil9fXJldHVybiBpfXN0YXRpYyBpZGVudGl0eSgpe3JldHVyblsxLDAsMCwwLDEsMCwwLDAsMV19c3RhdGljIHRyYW5zbGF0ZShlLGkscil7cmV0dXJuIHQubXVsdGlwbHkoZSxbMSwwLDAsMCwxLDAsaSxyLDFdKX1zdGF0aWMgcm90YXRlKGUsaSl7dmFyIHI9TWF0aC5jb3MoaSksbj1NYXRoLnNpbihpKTtyZXR1cm4gdC5tdWx0aXBseShlLFtyLC1uLDAsbixyLDAsMCwwLDFdKX1zdGF0aWMgc2NhbGUoZSxpLHIpe3JldHVybiB0Lm11bHRpcGx5KGUsW2ksMCwwLDAsciwwLDAsMCwxXSl9fTt2YXIgTWUsRmUsUGUsa2UsUmUsQmUsamUsV2UsVWU7IWZ1bmN0aW9uKHQpe3QuR1JFWT1cImdyZXlcIix0LkdSRVkzMj1cImdyZXkzMlwiLHQuUkdCQT1cInJnYmFcIix0LlJCR0E9XCJyYmdhXCIsdC5HUkJBPVwiZ3JiYVwiLHQuR0JSQT1cImdicmFcIix0LkJSR0E9XCJicmdhXCIsdC5CR1JBPVwiYmdyYVwifShNZXx8KE1lPXt9KSk7Y2xhc3MgVmV7c3RhdGljIGdldCB2ZXJzaW9uKCl7cmV0dXJuXCIxLjEuMFwifXN0YXRpYyBjaGVja1dlYkdMU3VwcG9ydCgpe3JldHVybiBudWxsPT09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0KFwid2ViZ2xcIik/KExlKFZlLEZlLCExLFwiZlwiLFBlKSwhMSk6KExlKFZlLEZlLCEwLFwiZlwiLFBlKSwhMCl9Z2V0IGRpc3Bvc2VkKCl7cmV0dXJuIEllKHRoaXMsVWUsXCJmXCIpfWNvbnN0cnVjdG9yKCl7a2Uuc2V0KHRoaXMsTWUuUkdCQSksUmUuc2V0KHRoaXMsbnVsbCksQmUuc2V0KHRoaXMsbnVsbCksamUuc2V0KHRoaXMsbnVsbCksdGhpcy51c2VXZWJHTEJ5RGVmYXVsdD0hMCx0aGlzLl9yZXVzZWRDdnM9bnVsbCx0aGlzLl9yZXVzZWRXZWJHTEN2cz1udWxsLFdlLnNldCh0aGlzLG51bGwpLFVlLnNldCh0aGlzLCExKX1kcmF3SW1hZ2UodCxlLGkscixuLHMpe2lmKHRoaXMuZGlzcG9zZWQpdGhyb3cgRXJyb3IoXCJUaGUgJ0ltYWdlRGF0YUdldHRlcicgaW5zdGFuY2UgaGFzIGJlZW4gZGlzcG9zZWQuXCIpO2lmKCFpfHwhcil0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdzb3VyY2VXaWR0aCcgb3IgJ3NvdXJjZUhlaWdodCcuXCIpO2lmKG51bGw9PUllKFZlLEZlLFwiZlwiLFBlKSYmVmUuY2hlY2tXZWJHTFN1cHBvcnQoKSwobnVsbD09cz92b2lkIDA6cy5iVXNlV2ViR0wpJiYhSWUoVmUsRmUsXCJmXCIsUGUpKXRocm93IG5ldyBFcnJvcihcIllvdXIgYnJvd3NlciBvciBtYWNoaW5lIG1heSBub3Qgc3VwcG9ydCBXZWJHTC5cIik7aWYoZSBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQmJjQhPT1lLnJlYWR5U3RhdGV8fGUgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50JiYhZS5jb21wbGV0ZSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc291cmNlIGlzIG5vdCBsb2FkZWQuXCIpO2xldCBvO1ZlLl9vbkxvZyYmKG89RGF0ZS5ub3coKSxWZS5fb25Mb2coXCJkcmF3SW1hZ2UoKSwgU1RBUlQ6IFwiK28pKTtsZXQgYT0wLGg9MCxsPWksYz1yLHU9MCxkPTAsZj1pLGc9cjtuJiYobi5zeCYmKGE9TWF0aC5yb3VuZChuLnN4KSksbi5zeSYmKGg9TWF0aC5yb3VuZChuLnN5KSksbi5zV2lkdGgmJihsPU1hdGgucm91bmQobi5zV2lkdGgpKSxuLnNIZWlnaHQmJihjPU1hdGgucm91bmQobi5zSGVpZ2h0KSksbi5keCYmKHU9TWF0aC5yb3VuZChuLmR4KSksbi5keSYmKGQ9TWF0aC5yb3VuZChuLmR5KSksbi5kV2lkdGgmJihmPU1hdGgucm91bmQobi5kV2lkdGgpKSxuLmRIZWlnaHQmJihnPU1hdGgucm91bmQobi5kSGVpZ2h0KSkpO2xldCBtLHA9TWUuUkdCQTtpZigobnVsbD09cz92b2lkIDA6cy5waXhlbEZvcm1hdCkmJihwPXMucGl4ZWxGb3JtYXQpLChudWxsPT1zP3ZvaWQgMDpzLmJ1ZmZlckNvbnRhaW5lcikmJihtPXMuYnVmZmVyQ29udGFpbmVyLG0ubGVuZ3RoPDQqZipnKSl0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHNpemUgb2YgdGhlICdidWZmZXJDb250YWluZXInLlwiKTtjb25zdCB2PXQ7aWYoIUllKFZlLEZlLFwiZlwiLFBlKXx8ISh0aGlzLnVzZVdlYkdMQnlEZWZhdWx0JiZudWxsPT0obnVsbD09cz92b2lkIDA6cy5iVXNlV2ViR0wpfHwobnVsbD09cz92b2lkIDA6cy5iVXNlV2ViR0wpKSl7VmUuX29uTG9nJiZWZS5fb25Mb2coXCJkcmF3SW1hZ2UoKSBpbiBjb250ZXh0MmQuXCIpLHYuY3R4MmR8fCh2LmN0eDJkPXYuZ2V0Q29udGV4dChcIjJkXCIse3dpbGxSZWFkRnJlcXVlbnRseTohMH0pKTtjb25zdCB0PXYuY3R4MmQ7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGdldCAnQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEJyBmcm9tIGNhbnZhcy5cIik7cmV0dXJuKHYud2lkdGg8dStmfHx2LmhlaWdodDxkK2cpJiYodi53aWR0aD11K2Ysdi5oZWlnaHQ9ZCtnKSx0LmRyYXdJbWFnZShlLGEsaCxsLGMsdSxkLGYsZyksVmUuX29uTG9nJiZWZS5fb25Mb2coXCJkcmF3SW1hZ2UoKSBpbiBjb250ZXh0MmQgZW5kLiBDb3N0czogXCIrKERhdGUubm93KCktbykpLHtjb250ZXh0OnQscGl4ZWxGb3JtYXQ6TWUuUkdCQSxiVXNlV2ViR0w6ITF9fVZlLl9vbkxvZyYmVmUuX29uTG9nKFwiZHJhd0ltYWdlKCkgaW4gV2ViR0wuXCIpO3RyeXsodi53aWR0aDx1K2Z8fHYuaGVpZ2h0PGQrZykmJih2LndpZHRoPXUrZix2LmhlaWdodD1kK2csdi5jdHhXZWJHTCYmdi5jdHhXZWJHTC52aWV3cG9ydCgwLDAsdStmLGQrZykpO2NvbnN0IHQ9di5jdHhXZWJHTHx8di5nZXRDb250ZXh0KFwid2ViZ2xcIix7YW50aWFsaWFzOiExfSl8fHYuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLHthbnRpYWxpYXM6ITF9KTtpZighdCl7VmUuX29uTG9nJiZWZS5fb25Mb2coXCJCcm93c2VyIG9yIG1hY2hpbmUgbWF5IG5vdCBzdXBwb3J0IFdlYkdMLCBvciB0aGUgY2FudmFzIGhhcyBhbHJlYWR5IGJlZW4gc2V0IHRvIGEgZGlmZmVyZW50IGNvbnRleHQgbW9kZS5cIik7Y29uc3QgdD1uZXcgRXJyb3IoXCJVbmFibGUgdG8gZ2V0ICdXZWJHTFJlbmRlcmluZ0NvbnRleHQnLiBZb3VyIGJyb3dzZXIgb3IgbWFjaGluZSBtYXkgbm90IHN1cHBvcnQgV2ViR0wsIG9yIHRoZSBjYW52YXMgaGFzIGFscmVhZHkgYmVlbiBzZXQgdG8gYSBkaWZmZXJlbnQgY29udGV4dCBtb2RlLlwiKTt0aHJvdyB0Lm5hbWU9XCJXZWJHTEVycm9yXCIsdH1pZighdi5jdHhXZWJHTHx8cCE9PUllKHRoaXMsa2UsXCJmXCIpKXt2LmN0eFdlYkdMPXQ7Y29uc3QgZT10PT57Y29uc3QgZT10LmNyZWF0ZUJ1ZmZlcigpO3QuYmluZEJ1ZmZlcih0LkFSUkFZX0JVRkZFUixlKSx0LmJ1ZmZlckRhdGEodC5BUlJBWV9CVUZGRVIsbmV3IEZsb2F0MzJBcnJheShbMCwwLDAsMSwxLDAsMSwwLDAsMSwxLDFdKSx0LlNUQVRJQ19EUkFXKTtjb25zdCBpPXQuY3JlYXRlQnVmZmVyKCk7cmV0dXJuIHQuYmluZEJ1ZmZlcih0LkFSUkFZX0JVRkZFUixpKSx0LmJ1ZmZlckRhdGEodC5BUlJBWV9CVUZGRVIsbmV3IEZsb2F0MzJBcnJheShbMCwwLDAsMSwxLDAsMSwwLDAsMSwxLDFdKSx0LlNUQVRJQ19EUkFXKSx7cG9zaXRpb25zOmUsdGV4Q29vcmRzOml9fSxpPXQ9Pntjb25zdCBlPXQuY3JlYXRlVGV4dHVyZSgpO3JldHVybiB0LmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxlKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9NQUdfRklMVEVSLHQuTElORUFSKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9NSU5fRklMVEVSLHQuTElORUFSKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9XUkFQX1MsdC5DTEFNUF9UT19FREdFKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9XUkFQX1QsdC5DTEFNUF9UT19FREdFKSxlfSxyPSh0LGUpPT57Y29uc3QgaT10LmNyZWF0ZVByb2dyYW0oKTtpZihlLmZvckVhY2goKGU9PnQuYXR0YWNoU2hhZGVyKGksZSkpKSx0LmxpbmtQcm9ncmFtKGkpLCF0LmdldFByb2dyYW1QYXJhbWV0ZXIoaSx0LkxJTktfU1RBVFVTKSl7Y29uc3QgZT1uZXcgRXJyb3IoYEFuIGVycm9yIG9jY3VyZWQgbGlua2luZyB0aGUgcHJvZ3JhbTogJHt0LmdldFByb2dyYW1JbmZvTG9nKGkpfS5gKTt0aHJvdyBlLm5hbWU9XCJXZWJHTEVycm9yXCIsZX1yZXR1cm4gdC51c2VQcm9ncmFtKGkpLGl9LG49KHQsZSxpKT0+e2NvbnN0IHI9dC5jcmVhdGVTaGFkZXIoZSk7aWYodC5zaGFkZXJTb3VyY2UocixpKSx0LmNvbXBpbGVTaGFkZXIociksIXQuZ2V0U2hhZGVyUGFyYW1ldGVyKHIsdC5DT01QSUxFX1NUQVRVUykpe2NvbnN0IGU9bmV3IEVycm9yKGBBbiBlcnJvciBvY2N1cmVkIGNvbXBpbGluZyB0aGUgc2hhZGVyOiAke3QuZ2V0U2hhZGVySW5mb0xvZyhyKX0uYCk7dGhyb3cgZS5uYW1lPVwiV2ViR0xFcnJvclwiLGV9cmV0dXJuIHJ9LHM9XCJcXG4gICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUgdmVjMiBhX3Bvc2l0aW9uO1xcbiAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSB2ZWMyIGFfdGV4Q29vcmQ7XFxuICBcXG4gICAgICAgICAgICAgICAgICB1bmlmb3JtIG1hdDMgdV9tYXRyaXg7XFxuICAgICAgICAgICAgICAgICAgdW5pZm9ybSBtYXQzIHVfdGV4dHVyZU1hdHJpeDtcXG4gIFxcbiAgICAgICAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2X3RleENvb3JkO1xcbiAgICAgICAgICAgICAgICAgIHZvaWQgbWFpbih2b2lkKSB7XFxuICAgICAgICAgICAgICAgICAgZ2xfUG9zaXRpb24gPSB2ZWM0KCh1X21hdHJpeCAqIHZlYzMoYV9wb3NpdGlvbiwgMSkpLnh5LCAwLCAxLjApO1xcbiAgICAgICAgICAgICAgICAgIHZfdGV4Q29vcmQgPSB2ZWM0KCh1X3RleHR1cmVNYXRyaXggKiB2ZWMzKGFfdGV4Q29vcmQsIDEpKS54eSwgMCwgMS4wKS54eTtcXG4gICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICBcIjtsZXQgbz1cInJnYlwiO1tcInJnYmFcIixcInJiZ2FcIixcImdyYmFcIixcImdicmFcIixcImJyZ2FcIixcImJncmFcIl0uaW5jbHVkZXMocCkmJihvPXAuc2xpY2UoMCwzKSk7Y29uc3QgYT1gXFxuICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XFxuICAgICAgICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7XFxuICAgICAgICAgICAgICAgICAgdW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTtcXG4gICAgICAgICAgICAgICAgICB1bmlmb3JtIGZsb2F0IHVDb2xvckZhY3RvcjtcXG4gIFxcbiAgICAgICAgICAgICAgICAgIHZvaWQgbWFpbigpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgdmVjNCBzYW1wbGUgPSB0ZXh0dXJlMkQodV9pbWFnZSwgdl90ZXhDb29yZCk7XFxuICAgICAgICAgICAgICAgICAgICAgIGZsb2F0IGdyZXkgPSAwLjIxICogc2FtcGxlLnIgKyAwLjcxICogc2FtcGxlLmcgKyAwLjA3ICogc2FtcGxlLmI7XFxuICAgICAgICAgICAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoc2FtcGxlLiR7b30gKiAoMS4wIC0gdUNvbG9yRmFjdG9yKSArIChncmV5ICogdUNvbG9yRmFjdG9yKSwgc2FtcGxlLmEpO1xcbiAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgIGAsaD1yKHQsW24odCx0LlZFUlRFWF9TSEFERVIscyksbih0LHQuRlJBR01FTlRfU0hBREVSLGEpXSk7TGUodGhpcyxCZSx7cHJvZ3JhbTpoLGF0dHJpYkxvY2F0aW9uczp7dmVydGV4UG9zaXRpb246dC5nZXRBdHRyaWJMb2NhdGlvbihoLFwiYV9wb3NpdGlvblwiKSx0ZXhQb3NpdGlvbjp0LmdldEF0dHJpYkxvY2F0aW9uKGgsXCJhX3RleENvb3JkXCIpfSx1bmlmb3JtTG9jYXRpb25zOnt1U2FtcGxlcjp0LmdldFVuaWZvcm1Mb2NhdGlvbihoLFwidV9pbWFnZVwiKSx1Q29sb3JGYWN0b3I6dC5nZXRVbmlmb3JtTG9jYXRpb24oaCxcInVDb2xvckZhY3RvclwiKSx1TWF0cml4OnQuZ2V0VW5pZm9ybUxvY2F0aW9uKGgsXCJ1X21hdHJpeFwiKSx1VGV4dHVyZU1hdHJpeDp0LmdldFVuaWZvcm1Mb2NhdGlvbihoLFwidV90ZXh0dXJlTWF0cml4XCIpfX0sXCJmXCIpLExlKHRoaXMsamUsZSh0KSxcImZcIiksTGUodGhpcyxSZSxpKHQpLFwiZlwiKSxMZSh0aGlzLGtlLHAsXCJmXCIpfWNvbnN0IG49KHQsZSxpKT0+e3QuYmluZEJ1ZmZlcih0LkFSUkFZX0JVRkZFUixlKSx0LmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGkpLHQudmVydGV4QXR0cmliUG9pbnRlcihpLDIsdC5GTE9BVCwhMSwwLDApfSxzPSh0LGUsaSk9Pntjb25zdCByPXQuUkdCQSxuPXQuUkdCQSxzPXQuVU5TSUdORURfQllURTt0LmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxlKSx0LnRleEltYWdlMkQodC5URVhUVVJFXzJELDAscixuLHMsaSl9LF89KHQsZSxzLG8pPT57dC5jbGVhckNvbG9yKDAsMCwwLDEpLHQuY2xlYXJEZXB0aCgxKSx0LmVuYWJsZSh0LkRFUFRIX1RFU1QpLHQuZGVwdGhGdW5jKHQuTEVRVUFMKSx0LmNsZWFyKHQuQ09MT1JfQlVGRkVSX0JJVHx0LkRFUFRIX0JVRkZFUl9CSVQpLG4odCxzLnBvc2l0aW9ucyxlLmF0dHJpYkxvY2F0aW9ucy52ZXJ0ZXhQb3NpdGlvbiksbih0LHMudGV4Q29vcmRzLGUuYXR0cmliTG9jYXRpb25zLnRleFBvc2l0aW9uKSx0LmFjdGl2ZVRleHR1cmUodC5URVhUVVJFMCksdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsbyksdC51bmlmb3JtMWkoZS51bmlmb3JtTG9jYXRpb25zLnVTYW1wbGVyLDApLHQudW5pZm9ybTFmKGUudW5pZm9ybUxvY2F0aW9ucy51Q29sb3JGYWN0b3IsW01lLkdSRVksTWUuR1JFWTMyXS5pbmNsdWRlcyhwKT8xOjApO2xldCBtLHYsXz1EZS50cmFuc2xhdGUoRGUuaWRlbnRpdHkoKSwtMSwtMSk7Xz1EZS5zY2FsZShfLDIsMiksXz1EZS5zY2FsZShfLDEvdC5jYW52YXMud2lkdGgsMS90LmNhbnZhcy5oZWlnaHQpLG09RGUudHJhbnNsYXRlKF8sdSxkKSxtPURlLnNjYWxlKG0sZixnKSx0LnVuaWZvcm1NYXRyaXgzZnYoZS51bmlmb3JtTG9jYXRpb25zLnVNYXRyaXgsITEsbSksdj1EZS50cmFuc2xhdGUoRGUuaWRlbnRpdHkoKSxhL2ksaC9yKSx2PURlLnNjYWxlKHYsbC9pLGMvciksdC51bmlmb3JtTWF0cml4M2Z2KGUudW5pZm9ybUxvY2F0aW9ucy51VGV4dHVyZU1hdHJpeCwhMSx2KSx0LmRyYXdBcnJheXModC5UUklBTkdMRVMsMCw2KX07cyh0LEllKHRoaXMsUmUsXCJmXCIpLGUpLF8odCxJZSh0aGlzLEJlLFwiZlwiKSxJZSh0aGlzLGplLFwiZlwiKSxJZSh0aGlzLFJlLFwiZlwiKSk7Y29uc3QgeT1tfHxuZXcgVWludDhBcnJheSg0KmYqZyk7aWYodC5yZWFkUGl4ZWxzKHUsZCxmLGcsdC5SR0JBLHQuVU5TSUdORURfQllURSx5KSwyNTUhPT15WzNdKXtWZS5fb25Mb2cmJlZlLl9vbkxvZyhcIkluY29ycmVjdCBXZWJHTCBkcmF3aW5nIC5cIik7Y29uc3QgdD1uZXcgRXJyb3IoXCJXZWJHTCBlcnJvcjogaW5jb3JyZWN0IGRyYXdpbmcuXCIpO3Rocm93IHQubmFtZT1cIldlYkdMRXJyb3JcIix0fXJldHVybiBWZS5fb25Mb2cmJlZlLl9vbkxvZyhcImRyYXdJbWFnZSgpIGluIFdlYkdMIGVuZC4gQ29zdHM6IFwiKyhEYXRlLm5vdygpLW8pKSx7Y29udGV4dDp0LHBpeGVsRm9ybWF0OnA9PT1NZS5HUkVZP01lLkdSRVkzMjpwLGJVc2VXZWJHTDohMH19Y2F0Y2gobyl7aWYodGhpcy5mb3JjZUxvc2VDb250ZXh0KCksbnVsbD09KG51bGw9PXM/dm9pZCAwOnMuYlVzZVdlYkdMKSlyZXR1cm4gVmUuX29uTG9nJiZWZS5fb25Mb2coXCInZHJhd0ltYWdlKCknIGluIFdlYkdMIGZhaWxlZCwgdHJ5IGFnYWluIGluIGNvbnRleHQyZC5cIiksdGhpcy51c2VXZWJHTEJ5RGVmYXVsdD0hMSx0aGlzLmRyYXdJbWFnZSh0LGUsaSxyLG4sT2JqZWN0LmFzc2lnbih7fSxzLHtiVXNlV2ViR0w6ITF9KSk7dGhyb3cgby5uYW1lPVwiV2ViR0xFcnJvclwiLG99fXJlYWRDdnNEYXRhKHQsZSxpKXtpZighKHQgaW5zdGFuY2VvZiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8fHQgaW5zdGFuY2VvZiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ2NvbnRleHQnLlwiKTtsZXQgcixuPTAscz0wLG89dC5jYW52YXMud2lkdGgsYT10LmNhbnZhcy5oZWlnaHQ7aWYoZSYmKGUueCYmKG49ZS54KSxlLnkmJihzPWUueSksZS53aWR0aCYmKG89ZS53aWR0aCksZS5oZWlnaHQmJihhPWUuaGVpZ2h0KSksKG51bGw9PWk/dm9pZCAwOmkubGVuZ3RoKTw0Km8qYSl0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHNpemUgb2YgdGhlICdidWZmZXJDb250YWluZXInLlwiKTtpZih0IGluc3RhbmNlb2YgV2ViR0xSZW5kZXJpbmdDb250ZXh0KXtjb25zdCBlPXQ7aT8oZS5yZWFkUGl4ZWxzKG4scyxvLGEsZS5SR0JBLGUuVU5TSUdORURfQllURSxpKSxyPW5ldyBVaW50OEFycmF5KGkuYnVmZmVyLDAsNCpvKmEpKToocj1uZXcgVWludDhBcnJheSg0Km8qYSksZS5yZWFkUGl4ZWxzKG4scyxvLGEsZS5SR0JBLGUuVU5TSUdORURfQllURSxyKSl9ZWxzZSBpZih0IGluc3RhbmNlb2YgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKXtsZXQgZTtlPXQuZ2V0SW1hZ2VEYXRhKG4scyxvLGEpLHI9bmV3IFVpbnQ4QXJyYXkoZS5kYXRhLmJ1ZmZlciksbnVsbD09aXx8aS5zZXQocil9cmV0dXJuIHJ9dHJhbnNmb3JtUGl4ZWxGb3JtYXQodCxlLGkscil7bGV0IG4scztpZihWZS5fb25Mb2cmJihuPURhdGUubm93KCksVmUuX29uTG9nKFwidHJhbnNmb3JtUGl4ZWxGb3JtYXQoKSwgU1RBUlQ6IFwiK24pKSxlPT09aSlyZXR1cm4gVmUuX29uTG9nJiZWZS5fb25Mb2coXCJ0cmFuc2Zvcm1QaXhlbEZvcm1hdCgpIGVuZC4gQ29zdHM6IFwiKyhEYXRlLm5vdygpLW4pKSxyP25ldyBVaW50OEFycmF5KHQpOnQ7Y29uc3Qgbz1bTWUuUkdCQSxNZS5SQkdBLE1lLkdSQkEsTWUuR0JSQSxNZS5CUkdBLE1lLkJHUkFdO2lmKG8uaW5jbHVkZXMoZSkpaWYoaT09PU1lLkdSRVkpe3M9bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgvNCk7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKz00KXtjb25zdCBpPS4yMSp0W2VdKy43MSp0W2UrMV0rLjA3KnRbZSsyXTtzW2UvNF09aX19ZWxzZSBpZihpPT09TWUuR1JFWTMyKXtzPXI/bmV3IFVpbnQ4QXJyYXkodCk6dDtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrPTQpe2NvbnN0IGk9LjIxKnRbZV0rLjcxKnRbZSsxXSsuMDcqdFtlKzJdO3NbZV09aSxzW2UrMV09aSxzW2UrMl09aX19ZWxzZXtpZighby5pbmNsdWRlcyhpKSl0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gdHJhbnNmb3JtLlwiKTtpZihyKXtzPW5ldyBVaW50OEFycmF5KHQpO2NvbnN0IHI9ZS5pbmRleE9mKFwiclwiKSxuPWUuaW5kZXhPZihcImdcIiksbz1lLmluZGV4T2YoXCJiXCIpLGE9aS5pbmRleE9mKFwiclwiKSxoPWkuaW5kZXhPZihcImdcIiksbD1pLmluZGV4T2YoXCJiXCIpO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSs9NClzW2UrYV09dFtlK3JdLHNbZStoXT10W2Urbl0sc1tlK2xdPXRbZStvXX1lbHNle3M9dDtjb25zdCByPWUuaW5kZXhPZihcInJcIiksbj1lLmluZGV4T2YoXCJnXCIpLG89ZS5pbmRleE9mKFwiYlwiKSxhPWkuaW5kZXhPZihcInJcIiksaD1pLmluZGV4T2YoXCJnXCIpLGw9aS5pbmRleE9mKFwiYlwiKTtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrPTQpe2xldCBpPVt0W2VdLHRbZSsxXSx0W2UrMl1dO3NbZSthXT1pW3JdLHNbZStoXT1pW25dLHNbZStsXT1pW29dfX19ZWxzZSBpZihlPT09TWUuR1JFWSl7aWYoaSE9PU1lLkdSRVkzMil0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gdHJhbnNmb3JtLlwiKTtzPW5ldyBVaW50OEFycmF5KDQqdC5sZW5ndGgpO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSsrKXNbNCplXT10W2VdLHNbNCplKzFdPXRbZV0sc1s0KmUrMl09dFtlXSxzWzQqZSszXT0yNTV9ZWxzZXtpZihlIT09TWUuR1JFWTMyKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byB0cmFuc2Zvcm0uXCIpO2lmKGkhPT1NZS5HUkVZKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byB0cmFuc2Zvcm0uXCIpO3M9bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgvNCk7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKz00KXNbZS80XT10W2VdfXJldHVybiBWZS5fb25Mb2cmJlZlLl9vbkxvZyhcInRyYW5zZm9ybVBpeGVsRm9ybWF0KCkgZW5kLiBDb3N0czogXCIrKERhdGUubm93KCktbikpLHN9Z2V0SW1hZ2VEYXRhKHQsZSxpLHIsbil7aWYodGhpcy5kaXNwb3NlZCl0aHJvdyBFcnJvcihcIlRoZSAnSW1hZ2VEYXRhR2V0dGVyJyBpbnN0YW5jZSBoYXMgYmVlbiBkaXNwb3NlZC5cIik7aWYoIWV8fCFpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ3NvdXJjZVdpZHRoJyBvciAnc291cmNlSGVpZ2h0Jy5cIik7aWYobnVsbD09SWUoVmUsRmUsXCJmXCIsUGUpJiZWZS5jaGVja1dlYkdMU3VwcG9ydCgpLChudWxsPT1uP3ZvaWQgMDpuLmJVc2VXZWJHTCkmJiFJZShWZSxGZSxcImZcIixQZSkpdGhyb3cgbmV3IEVycm9yKFwiWW91ciBicm93c2VyIG9yIG1hY2hpbmUgbWF5IG5vdCBzdXBwb3J0IFdlYkdMLlwiKTtpZihyLnN4PmV8fHIuc3k+aXx8ci5zeCtyLnNXaWR0aD5lfHxyLnN5K3Iuc0hlaWdodD5pKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcG9zaXRpb24uXCIpO2lmKHQgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50JiY0IT09dC5yZWFkeVN0YXRlfHx0IGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCYmIXQuY29tcGxldGUpdGhyb3cgbmV3IEVycm9yKFwiVGhlIHNvdXJjZSBpcyBub3QgbG9hZGVkLlwiKTtsZXQgcztWZS5fb25Mb2cmJihzPURhdGUubm93KCksVmUuX29uTG9nKFwiZ2V0SW1hZ2VEYXRhKCksIFNUQVJUOiBcIitzKSk7Y29uc3Qgbz1NYXRoLnJvdW5kKHIuc3gpLGE9TWF0aC5yb3VuZChyLnN5KSxoPU1hdGgucm91bmQoci5zV2lkdGgpLGw9TWF0aC5yb3VuZChyLnNIZWlnaHQpLGM9TWF0aC5yb3VuZChyLmRXaWR0aCksdT1NYXRoLnJvdW5kKHIuZEhlaWdodCk7bGV0IGQ9TWUuUkdCQTsobnVsbD09bj92b2lkIDA6bi5waXhlbEZvcm1hdCkmJihkPW4ucGl4ZWxGb3JtYXQpO2xldCBmLGcsbSxwPW51bGw7aWYoKG51bGw9PW4/dm9pZCAwOm4uYnVmZmVyQ29udGFpbmVyKSYmKHA9bi5idWZmZXJDb250YWluZXIpLEllKFZlLEZlLFwiZlwiLFBlKSYmKHRoaXMudXNlV2ViR0xCeURlZmF1bHQmJm51bGw9PShudWxsPT1uP3ZvaWQgMDpuLmJVc2VXZWJHTCl8fChudWxsPT1uP3ZvaWQgMDpuLmJVc2VXZWJHTCkpKXtWZS5fb25Mb2cmJlZlLl9vbkxvZyhcImdldEltYWdlRGF0YSgpIGluIFdlYkdMLlwiKSx0aGlzLl9yZXVzZWRXZWJHTEN2c3x8KHRoaXMuX3JldXNlZFdlYkdMQ3ZzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikpLGY9dGhpcy5fcmV1c2VkV2ViR0xDdnM7dHJ5e2lmKHApaWYoZD09PU1lLkdSRVkpe2lmKG09bmV3IFVpbnQ4QXJyYXkoNCpjKnUpLGc9dGhpcy5kcmF3SW1hZ2UoZix0LGUsaSx7c3g6byxzeTphLHNXaWR0aDpoLHNIZWlnaHQ6bCxkV2lkdGg6YyxkSGVpZ2h0OnV9LHtwaXhlbEZvcm1hdDpkLGJVc2VXZWJHTDohMCxidWZmZXJDb250YWluZXI6bX0pLG09dGhpcy50cmFuc2Zvcm1QaXhlbEZvcm1hdChtLGcucGl4ZWxGb3JtYXQsZCkscCl7aWYocC5sZW5ndGg8bS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBzaXplIG9mIHRoZSAnYnVmZmVyQ29udGFpbmVyJy5cIik7cC5zZXQobSl9fWVsc2UgZz10aGlzLmRyYXdJbWFnZShmLHQsZSxpLHtzeDpvLHN5OmEsc1dpZHRoOmgsc0hlaWdodDpsLGRXaWR0aDpjLGRIZWlnaHQ6dX0se3BpeGVsRm9ybWF0OmQsYlVzZVdlYkdMOiEwLGJ1ZmZlckNvbnRhaW5lcjpwfSksbT1uZXcgVWludDhBcnJheShwLmJ1ZmZlciwwLDQqYyp1KSxtPXRoaXMudHJhbnNmb3JtUGl4ZWxGb3JtYXQobSxnLnBpeGVsRm9ybWF0LGQpO2Vsc2UgZD09PU1lLkdSRVk/KCghSWUodGhpcyxXZSxcImZcIil8fEllKHRoaXMsV2UsXCJmXCIpLmxlbmd0aDw0KmMqdSkmJkxlKHRoaXMsV2UsbmV3IFVpbnQ4QXJyYXkoNCpjKnUpLFwiZlwiKSxtPW5ldyBVaW50OEFycmF5KEllKHRoaXMsV2UsXCJmXCIpLmJ1ZmZlciwwLDQqYyp1KSk6bT1uZXcgVWludDhBcnJheSg0KmMqdSksZz10aGlzLmRyYXdJbWFnZShmLHQsZSxpLHtzeDpvLHN5OmEsc1dpZHRoOmgsc0hlaWdodDpsLGRXaWR0aDpjLGRIZWlnaHQ6dX0se3BpeGVsRm9ybWF0OmQsYlVzZVdlYkdMOiEwLGJ1ZmZlckNvbnRhaW5lcjptfSksbT10aGlzLnRyYW5zZm9ybVBpeGVsRm9ybWF0KG0sZy5waXhlbEZvcm1hdCxkKX1jYXRjaChyKXtpZihcIldlYkdMRXJyb3JcIj09PXIubmFtZSYmKHRoaXMuZm9yY2VMb3NlQ29udGV4dCgpLG51bGw9PShudWxsPT1uP3ZvaWQgMDpuLmJVc2VXZWJHTCkpKXJldHVybiBWZS5fb25Mb2cmJlZlLl9vbkxvZyhcImdldEltYWdlRGF0YSgpIGluIFdlYkdMIGZhaWxlZCwgdHJ5IGFnYWluIGluIGNvbnRleHQyZC5cIiksdGhpcy51c2VXZWJHTEJ5RGVmYXVsdD0hMSx0aGlzLmdldEltYWdlRGF0YSh0LGUsaSx7c3g6byxzeTphLHNXaWR0aDpoLHNIZWlnaHQ6bCxkV2lkdGg6YyxkSGVpZ2h0OnV9LE9iamVjdC5hc3NpZ24oe30sbix7YlVzZVdlYkdMOiExfSkpO3Rocm93IHJ9fWVsc2UgaWYoVmUuX29uTG9nJiZWZS5fb25Mb2coXCJnZXRJbWFnZURhdGEoKSBpbiBjb250ZXh0MmQuXCIpLHRoaXMuX3JldXNlZEN2c3x8KHRoaXMuX3JldXNlZEN2cz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpKSxmPXRoaXMuX3JldXNlZEN2cyxnPXRoaXMuZHJhd0ltYWdlKGYsdCxlLGkse3N4Om8sc3k6YSxzV2lkdGg6aCxzSGVpZ2h0OmwsZFdpZHRoOmMsZEhlaWdodDp1fSx7cGl4ZWxGb3JtYXQ6TWUuUkdCQSxiVXNlV2ViR0w6ITF9KSxtPXRoaXMucmVhZEN2c0RhdGEoZy5jb250ZXh0LHt3aWR0aDpjLGhlaWdodDp1fSxudWxsKSxtPXRoaXMudHJhbnNmb3JtUGl4ZWxGb3JtYXQobSxnLnBpeGVsRm9ybWF0LGQpLHApe2lmKHAubGVuZ3RoPG0ubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgc2l6ZSBvZiB0aGUgJ2J1ZmZlckNvbnRhaW5lcicuXCIpO3Auc2V0KG0pfXJldHVybiBWZS5fb25Mb2cmJlZlLl9vbkxvZyhcImdldEltYWdlRGF0YSgpIGVuZC4gQ29zdHM6IFwiKyhEYXRlLm5vdygpLXMpKSx7ZGF0YTptLHBpeGVsRm9ybWF0OmQsd2lkdGg6YyxoZWlnaHQ6dSxiVXNlV2ViR0w6Zy5iVXNlV2ViR0x9fWNvbnZlcnREYXRhVG9DdnModCxlLGkscil7aWYoISh0IGluc3RhbmNlb2YgVWludDhBcnJheXx8dCBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAnZGF0YScuXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlPD0wKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ3dpZHRoJy5cIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGl8fGk8PTApdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCAnaGVpZ2h0Jy5cIik7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO2xldCBzO2lmKG4ud2lkdGg9ZSxuLmhlaWdodD1pLHI9PT1NZS5HUkVZKXtzPW5ldyBVaW50OENsYW1wZWRBcnJheSg0KmUqaSk7Zm9yKGxldCBlPTA7ZTxzLmxlbmd0aDtlKz00KXNbZV09dFtlLzRdLHNbZSsxXT10W2UvNF0sc1tlKzJdPXRbZS80XSxzW2UrM109MjU1fWVsc2Ugcz1uZXcgVWludDhDbGFtcGVkQXJyYXkodC5idWZmZXIpO2NvbnN0IG89bmV3IEltYWdlRGF0YShzLGUsaSk7cmV0dXJuIG4uZ2V0Q29udGV4dChcIjJkXCIpLnB1dEltYWdlRGF0YShvLDAsMCksbn1mb3JjZUxvc2VDb250ZXh0KCl7aWYoIXRoaXMuX3JldXNlZFdlYkdMQ3ZzKXJldHVybjtjb25zdCB0PXRoaXMuX3JldXNlZFdlYkdMQ3ZzLmN0eFdlYkdMO3QmJiF0LmlzQ29udGV4dExvc3QoKSYmdC5nZXRFeHRlbnNpb24oXCJXRUJHTF9sb3NlX2NvbnRleHRcIikmJnQuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfbG9zZV9jb250ZXh0XCIpLmxvc2VDb250ZXh0KCksTGUodGhpcyxSZSxudWxsLFwiZlwiKSxMZSh0aGlzLEJlLG51bGwsXCJmXCIpLExlKHRoaXMsamUsbnVsbCxcImZcIiksdGhpcy5fcmV1c2VkV2ViR0xDdnM9bnVsbH1kaXNwb3NlKCl7dGhpcy5mb3JjZUxvc2VDb250ZXh0KCksTGUodGhpcyxVZSwhMCxcImZcIil9fUZlPVZlLGtlPW5ldyBXZWFrTWFwLFJlPW5ldyBXZWFrTWFwLEJlPW5ldyBXZWFrTWFwLGplPW5ldyBXZWFrTWFwLFdlPW5ldyBXZWFrTWFwLFVlPW5ldyBXZWFrTWFwLFBlPXt2YWx1ZTp2b2lkIDB9O3ZhciBHZSxOZSxZZSxIZSxYZSx6ZSxxZSxLZSxaZSxKZSxRZSwkZSx0aSxlaSxpaSxyaSxuaSxzaSxvaSxhaSxoaSxsaSxjaSx1aSxkaSxmaSxnaSxtaSxwaSx2aSxfaSx5aSx3aSxiaSx4aSxDaSxTaSxUaSxFaSxPaSxBaSxJaSxMaTtjbGFzcyBEaXtjb25zdHJ1Y3Rvcigpe0dlLnNldCh0aGlzLG5ldyBNYXApLE5lLnNldCh0aGlzLCExKX1nZXQgZGlzcG9zZWQoKXtyZXR1cm4gYmUodGhpcyxOZSxcImZcIil9b24odCxlKXt0PXQudG9Mb3dlckNhc2UoKTtjb25zdCBpPWJlKHRoaXMsR2UsXCJmXCIpLmdldCh0KTtpZihpKXtpZihpLmluY2x1ZGVzKGUpKXJldHVybjtpLnB1c2goZSl9ZWxzZSBiZSh0aGlzLEdlLFwiZlwiKS5zZXQodCxbZV0pfW9mZih0LGUpe3Q9dC50b0xvd2VyQ2FzZSgpO2NvbnN0IGk9YmUodGhpcyxHZSxcImZcIikuZ2V0KHQpO2lmKCFpKXJldHVybjtjb25zdCByPWkuaW5kZXhPZihlKTstMSE9PXImJmkuc3BsaWNlKHIsMSl9b2ZmQWxsKHQpe3Q9dC50b0xvd2VyQ2FzZSgpO2NvbnN0IGU9YmUodGhpcyxHZSxcImZcIikuZ2V0KHQpO2UmJihlLmxlbmd0aD0wKX1maXJlKHQsZT1bXSxpPXthc3luYzohMSxjb3B5OiEwfSl7ZXx8KGU9W10pLHQ9dC50b0xvd2VyQ2FzZSgpO2NvbnN0IHI9YmUodGhpcyxHZSxcImZcIikuZ2V0KHQpO2lmKHImJnIubGVuZ3RoKXtpPU9iamVjdC5hc3NpZ24oe2FzeW5jOiExLGNvcHk6ITB9LGkpO2ZvcihsZXQgdCBvZiByKXtpZighdCljb250aW51ZTtsZXQgbj1bXTtpZihpLmNvcHkpZm9yKGxldCB0IG9mIGUpe3RyeXt0PUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodCkpfWNhdGNoKHQpe31uLnB1c2godCl9ZWxzZSBuPWU7bGV0IHM9ITE7aWYoaS5hc3luYylzZXRUaW1lb3V0KCgoKT0+e3RoaXMuZGlzcG9zZWR8fHIuaW5jbHVkZXModCkmJnQuYXBwbHkoaS50YXJnZXQsbil9KSwwKTtlbHNlIHRyeXtzPXQuYXBwbHkoaS50YXJnZXQsbil9Y2F0Y2godCl7fWlmKCEwPT09cylicmVha319fWRpc3Bvc2UoKXt4ZSh0aGlzLE5lLCEwLFwiZlwiKX19R2U9bmV3IFdlYWtNYXAsTmU9bmV3IFdlYWtNYXA7Y29uc3QgTWk9KHQsZSxpLHIpPT57aWYoIWkpcmV0dXJuIHQ7bGV0IG49ZStNYXRoLnJvdW5kKCh0LWUpL2kpKmk7cmV0dXJuIHImJihuPU1hdGgubWluKG4scikpLG59O2NsYXNzIEZpe3N0YXRpYyBnZXQgdmVyc2lvbigpe3JldHVyblwiMi4wLjEzXCJ9c3RhdGljIGlzU3RvcmFnZUF2YWlsYWJsZSh0KXtsZXQgZTt0cnl7ZT13aW5kb3dbdF07Y29uc3QgaT1cIl9fc3RvcmFnZV90ZXN0X19cIjtyZXR1cm4gZS5zZXRJdGVtKGksaSksZS5yZW1vdmVJdGVtKGkpLCEwfWNhdGNoKHQpe3JldHVybiB0IGluc3RhbmNlb2YgRE9NRXhjZXB0aW9uJiYoMjI9PT10LmNvZGV8fDEwMTQ9PT10LmNvZGV8fFwiUXVvdGFFeGNlZWRlZEVycm9yXCI9PT10Lm5hbWV8fFwiTlNfRVJST1JfRE9NX1FVT1RBX1JFQUNIRURcIj09PXQubmFtZSkmJmUmJjAhPT1lLmxlbmd0aH19c3RhdGljIGZpbmRCZXN0UmVhckNhbWVyYUluSU9TKHQsZSl7aWYoIXR8fCF0Lmxlbmd0aClyZXR1cm4gbnVsbDtsZXQgaT0hMTtpZigobnVsbD09ZT92b2lkIDA6ZS5nZXRNYWluQ2FtZXJhKSYmKGk9ITApLGkpe2NvbnN0IGU9W1wi7ZuE66m0IOy5tOuplOudvFwiLFwi6IOM6Z2i44Kr44Oh44OpXCIsXCLlvoznva7pj6HpoK1cIixcIuWQjue9ruebuOaculwiLFwi4LiB4Lil4LmJ4Lit4LiH4LiU4LmJ4Liy4LiZ4Lir4Lil4Lix4LiHXCIsXCLgpKzgpYjgpJUg4KSV4KWI4KSu4KSw4KS+XCIsXCLYp9mE2YPYp9mF2YrYsdinINin2YTYrtmE2YHZitipXCIsXCLXntem15zXnteUINeQ15fXldeo15nXqlwiLFwi0LrQsNC80LXRgNCwINC90LAg0LfQsNC00L3QtdC5INC/0LDQvdC10LvQuFwiLFwi0LfQsNC00L3RjyDQutCw0LzQtdGA0LBcIixcItC30LDQtNC90LAg0LrQsNC80LXRgNCwXCIsXCLQsNGA0YLSm9GLINC60LDQvNC10YDQsFwiLFwiz4DOr8+Dz4kgzrrOrM68zrXPgc6xXCIsXCJ6YWRuw60gZm90b2FwYXLDoXRcIixcInphZG7DoSBrYW1lcmFcIixcInR5bG55IGFwYXJhdFwiLFwidGFrYWthbWVyYVwiLFwic3RyYcW+bmphIGthbWVyYVwiLFwicsO8Y2trYW1lcmFcIixcImthbWVyYSBww6UgYmFrc2lkYW5cIixcImthbWVyYSBiZWxha2FuZ1wiLFwia2FtZXJhIGJha1wiLFwiaMOhdHPDsyBrYW1lcmFcIixcImZvdG9jYW1lcmEgKHBvc3RlcmlvcmUpXCIsXCJjw6JtZXJhIHRyYXNlaXJhXCIsXCJjw6JtYXJhIHRyYXNlaXJhXCIsXCJjw6FtYXJhIHRyYXNlcmFcIixcImPDoG1lcmEgcG9zdGVyaW9yXCIsXCJjYW3DqXJhIGFycmnDqHJlXCIsXCJjYW1lcsSDIHNwYXRlXCIsXCJjYW1lcmEgbeG6t3Qgc2F1XCIsXCJjYW1lcmEgYWFuIGFjaHRlcnppamRlXCIsXCJiYWdzaWRla2FtZXJhXCIsXCJiYWNrIGNhbWVyYVwiLFwiYXJrYSBrYW1lcmFcIl0saT10LmZpbmQoKHQ9PmUuaW5jbHVkZXModC5sYWJlbC50b0xvd2VyQ2FzZSgpKSkpO3JldHVybiBudWxsPT1pP3ZvaWQgMDppLmRldmljZUlkfXtjb25zdCBlPVtcIu2bhOuptFwiLFwi6IOM6Z2iXCIsXCLlvoznva5cIixcIuWQjue9rlwiLFwi4Liy4LiZ4Lir4Lil4Lix4LiHXCIsXCLgpKzgpYjgpJVcIixcItiu2YTZgdmK2KlcIixcIteQ15fXldeo15nXqlwiLFwi0LfQsNC00L3Rj9GPXCIsXCLQt9Cw0LTQvdC10LlcIixcItC30LDQtNC90LBcIixcIs+Azq/Pg8+JXCIsXCJ6YWRuw61cIixcInphZG7DoVwiLFwidHlsbnlcIixcInRyYXNlcmFcIixcInRyYXNlaXJhXCIsXCJ0YWthXCIsXCJzdHJhxb5uamFcIixcInNwYXRlXCIsXCJzYXVcIixcInLDvGNrXCIsXCJwb3N0ZXJpb3JlXCIsXCJwb3N0ZXJpb3JcIixcImjDoXRzw7NcIixcImJlbGFrYW5nXCIsXCJiYWtzaWRhblwiLFwiYmFrcmVcIixcImJha1wiLFwiYmFnc2lkZVwiLFwiYmFja1wiLFwiYdGA0YLSm9GLXCIsXCJhcnJpw6hyZVwiLFwiYXJrYVwiLFwiYWNodGVyemlqZGVcIl0saT1bXCLtirjrpqztlIxcIixcIuS4iemVnOWktFwiLFwi5LiJ6Y+h6aCtXCIsXCLjg4jjg6rjg5fjg6tcIixcIuC4quC4suC4oVwiLFwi4KSf4KWN4KSw4KS/4KSq4KSyXCIsXCLYq9mE2KfYq9mK2KlcIixcItee16nXldec16nXqlwiLFwi0q/RiNGC0ZbQulwiLFwi0YLRgNC+0LnQvdCw0Y9cIixcItGC0YDQvtC50L3QsFwiLFwi0L/QvtGC0YDQvtGU0L3QsFwiLFwiz4TPgc65z4DOu86uXCIsXCLDvMOnbMO8XCIsXCJ0csOzam9iaWVrdHl3b3d5XCIsXCJ0cm9zdHJ1a2FcIixcInRyb2puw71cIixcInRyb2ppdMOhXCIsXCJ0cmlwcGVsdFwiLFwidHJpcHBlbFwiLFwidHJpcGzEg1wiLFwidHJpcGxlXCIsXCJ0cmlwbGFcIixcInRpZ2FcIixcImtvbG1vaXNcIixcImJhIGNhbWVyYVwiXSxyPVtcIuuTgOyWvCDsmYDsnbTrk5xcIixcIumbmeW7o+inklwiLFwi5Y+M5bm/6KeSXCIsXCLjg4fjg6XjgqLjg6vluoPop5JcIixcIuC4hOC4ueC5iOC4lOC5ieC4suC4meC4q+C4peC4seC4h+C4oeC4uOC4oeC4geC4p+C5ieC4suC4h1wiLFwi4KSh4KWN4KSv4KWB4KSF4KSyIOCkteCkvuCkh+CkoVwiLFwi2YXYstiv2YjYrNipINi52LHZiti22KlcIixcIteb16TXldec15Qg16jXl9eR15RcIixcItKb0L7RgSDQutC10qMg0LHSsdGA0YvRiNGC0YtcIixcItC30LTQstC+0ZTQvdCwINGI0LjRgNC+0LrQvtC60YPRgtC90LBcIixcItC00LLQvtC50L3QsNGPINGI0LjRgNC+0LrQvtGD0LPQvtC70YzQvdCw0Y9cIixcItC00LLQvtC50L3QsCDRiNC40YDQvtC60L7RitCz0YrQu9C90LBcIixcIs60zrnPgM67zq4gzrXPhc+BzrXOr86xXCIsXCLDp2lmdCBnZW5pxZ9cIixcImxhYWpha3VsbWFpbmVuIGtha3NvaXNcIixcImvDqXAgcuG7mW5nIG3hurd0IHNhdVwiLFwia2V0dMWRcywgc3rDqWxlcyBsw6F0w7NzesO2Z8WxXCIsXCJncmFuZGUgYW5ndWxhciBkdXBsYVwiLFwiZ2FuZGFcIixcImR3dW9iaWVrdHl3b3d5XCIsXCJkd2lrYW1lcmFcIixcImR2b3N0cnVrYSDFoWlyb2thXCIsXCJkdcOhbG7DrSDFoWlyb2tvw7pobMO9XCIsXCJkdcOhbG5hIMWhaXJva291aGzDoVwiLFwiZHVwbGEgZ3JhbmRlLWFuZ3VsYXJcIixcImR1YmzEg1wiLFwiZHViYmVsIHZpZHZpbmtlbFwiLFwiZHVhbC13ZWl0d2lua2VsXCIsXCJkdWFsIHdpZGVcIixcImR1YWwgY29uIGdyYW4gYW5ndWxhclwiLFwiZHVhbFwiLFwiZG91YmxlXCIsXCJkb3BwaWEgY29uIGdyYW5kYW5nb2xvXCIsXCJkb2JsZVwiLFwiZG9iYmVsdCB2aWR2aW5rZWxrYW1lcmFcIl0sbj10LmZpbHRlcigodD0+e2NvbnN0IGk9dC5sYWJlbC50b0xvd2VyQ2FzZSgpO3JldHVybiBlLnNvbWUoKHQ9PmkuaW5jbHVkZXModCkpKX0pKTtpZighbi5sZW5ndGgpcmV0dXJuIG51bGw7Y29uc3Qgcz1uLmZpbmQoKHQ9Pntjb25zdCBlPXQubGFiZWwudG9Mb3dlckNhc2UoKTtyZXR1cm4gaS5zb21lKCh0PT5lLmluY2x1ZGVzKHQpKSl9KSk7aWYocylyZXR1cm4gcy5kZXZpY2VJZDtjb25zdCBvPW4uZmluZCgodD0+e2NvbnN0IGU9dC5sYWJlbC50b0xvd2VyQ2FzZSgpO3JldHVybiByLnNvbWUoKHQ9PmUuaW5jbHVkZXModCkpKX0pKTtyZXR1cm4gbz9vLmRldmljZUlkOm5bMF0uZGV2aWNlSWR9fXN0YXRpYyBmaW5kQmVzdFJlYXJDYW1lcmEodCxlKXtpZighdHx8IXQubGVuZ3RoKXJldHVybiBudWxsO2lmKFtcImlQaG9uZVwiLFwiaVBhZFwiLFwiTWFjXCJdLmluY2x1ZGVzKEFlLk9TKSlyZXR1cm4gRmkuZmluZEJlc3RSZWFyQ2FtZXJhSW5JT1ModCx7Z2V0TWFpbkNhbWVyYTpudWxsPT1lP3ZvaWQgMDplLmdldE1haW5DYW1lcmFJbklPU30pO2NvbnN0IGk9W1wi7ZuEXCIsXCLog4zpnaJcIixcIuiDjOe9rlwiLFwi5b6M6Z2iXCIsXCLlvoznva5cIixcIuWQjumdolwiLFwi5ZCO572uXCIsXCLguLLguJnguKvguKXguLHguIdcIixcIuC4q+C4peC4seC4h1wiLFwi4KSs4KWI4KSVXCIsXCLYrtmE2YHZitipXCIsXCLXkNeX15XXqNeZ16pcIixcItC30LDQtNC90Y/Rj1wiLFwi0LfQsNC00L3Rj1wiLFwi0LfQsNC00L3QtdC5XCIsXCLQt9Cw0LTQvdCwXCIsXCLPgM6vz4PPiVwiLFwiemFkbsOtXCIsXCJ6YWRuw6FcIixcInR5bG55XCIsXCJ0csOhc1wiLFwidHJhc2VyYVwiLFwidHJhc2VpcmFcIixcInRha2FcIixcInN0cmHFvm5qYVwiLFwic3BhdGVcIixcInNhdVwiLFwicsO8Y2tcIixcInJlYXJcIixcInBvc3RlcmlvcmVcIixcInBvc3RlcmlvclwiLFwiaMOhdHPDs1wiLFwiZGFycmVyZVwiLFwiYmVsYWthbmdcIixcImJha3NpZGFuXCIsXCJiYWtyZVwiLFwiYmFrXCIsXCJiYWdzaWRlXCIsXCJiYWNrXCIsXCJh0YDRgtKb0YtcIixcImFycmnDqHJlXCIsXCJhcmthXCIsXCJhY2h0ZXJ6aWpkZVwiXTtmb3IobGV0IGUgb2YgdCl7Y29uc3QgdD1lLmxhYmVsLnRvTG93ZXJDYXNlKCk7aWYodCYmaS5zb21lKChlPT50LmluY2x1ZGVzKGUpKSkmJi9cXGIwKFxcYik/Ly50ZXN0KHQpKXJldHVybiBlLmRldmljZUlkfXJldHVybltcIkFuZHJvaWRcIixcIkhhcm1vbnlPU1wiXS5pbmNsdWRlcyhBZS5PUyk/dFt0Lmxlbmd0aC0xXS5kZXZpY2VJZDpudWxsfXN0YXRpYyBmaW5kQmVzdENhbWVyYSh0LGUsaSl7cmV0dXJuIHQmJnQubGVuZ3RoP1wiZW52aXJvbm1lbnRcIj09PWU/dGhpcy5maW5kQmVzdFJlYXJDYW1lcmEodCxpKTpcInVzZXJcIj09PWU/bnVsbDplP3ZvaWQgMDpudWxsOm51bGx9c3RhdGljIGFzeW5jIHBsYXlWaWRlbyh0LGUsaSl7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCAndmlkZW9FbCcuXCIpO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ3NvdXJjZScuXCIpO3JldHVybiBuZXcgUHJvbWlzZSgoYXN5bmMocixuKT0+e2xldCBzO2NvbnN0IG89KCk9Pnt0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2Fkc3RhcnRcIixjKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLHUpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBsYXlcIixkKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGYpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRlZG1ldGFkYXRhXCIscCl9O2xldCBhPSExO2NvbnN0IGg9KCk9PnthPSEwLHMmJmNsZWFyVGltZW91dChzKSxvKCkscih0KX0sbD10PT57cyYmY2xlYXJUaW1lb3V0KHMpLG8oKSxuKHQpfSxjPSgpPT57dC5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIix1LHtvbmNlOiEwfSl9LHU9KCk9Pntjb25zdCB0PW5ldyBFcnJvcihcIlZpZGVvIHBsYXlpbmcgd2FzIGludGVycnVwdGVkLlwiKTt0Lm5hbWU9XCJBYm9ydEVycm9yXCIsbCh0KX0sZD0oKT0+e2goKX0sZj0oKT0+e2wobmV3IEVycm9yKGBWaWRlbyBlcnJvciAke3QuZXJyb3IuY29kZX06ICR7dC5lcnJvci5tZXNzYWdlfS5gKSl9O2xldCBnO2NvbnN0IG09bmV3IFByb21pc2UoKHQ9PntnPXR9KSkscD0oKT0+e2coKX07aWYodC5hZGRFdmVudExpc3RlbmVyKFwibG9hZHN0YXJ0XCIsYyx7b25jZTohMH0pLHQuYWRkRXZlbnRMaXN0ZW5lcihcInBsYXlcIixkLHtvbmNlOiEwfSksdC5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixmLHtvbmNlOiEwfSksdC5hZGRFdmVudExpc3RlbmVyKFwibG9hZGVkbWV0YWRhdGFcIixwLHtvbmNlOiEwfSksXCJzdHJpbmdcIj09dHlwZW9mIGV8fGUgaW5zdGFuY2VvZiBTdHJpbmc/dC5zcmM9ZTp0LnNyY09iamVjdD1lLHQuYXV0b3BsYXkmJmF3YWl0IG5ldyBQcm9taXNlKCh0PT57c2V0VGltZW91dCh0LDFlMyl9KSksIWEpe2kmJihzPXNldFRpbWVvdXQoKCgpPT57bygpLG4obmV3IEVycm9yKFwiRmFpbGVkIHRvIHBsYXkgdmlkZW8uIFRpbWVvdXQuXCIpKX0pLGkpKTt0cnl7dC5zcmMmJmF3YWl0IHQubG9hZCgpLGF3YWl0IHQucGxheSgpLGgoKX1jYXRjaCh0KXtjb25zb2xlLndhcm4oXCIxc3QgcGxheSBlcnJvcjogXCIrKChudWxsPT10P3ZvaWQgMDp0Lm1lc3NhZ2UpfHx0KSl9aWYoIWEpe2F3YWl0IG07dHJ5e2F3YWl0IHQucGxheSgpLGgoKX1jYXRjaCh0KXtjb25zb2xlLndhcm4oXCIycmQgcGxheSBlcnJvcjogXCIrKChudWxsPT10P3ZvaWQgMDp0Lm1lc3NhZ2UpfHx0KSksbCh0KX19fX0pKX1zdGF0aWMgYXN5bmMgdGVzdENhbWVyYUFjY2Vzcyh0KXt2YXIgZSxpO2lmKCEobnVsbD09PShpPW51bGw9PT0oZT1udWxsPT09d2luZG93fHx2b2lkIDA9PT13aW5kb3c/dm9pZCAwOndpbmRvdy5uYXZpZ2F0b3IpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLm1lZGlhRGV2aWNlcyl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZ2V0VXNlck1lZGlhKSlyZXR1cm57b2s6ITEsZXJyb3JOYW1lOlwiSW5zZWN1cmVDb250ZXh0XCIsZXJyb3JNZXNzYWdlOlwiSW5zZWN1cmUgY29udGV4dC5cIn07bGV0IHI7dHJ5e3I9dD9hd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh0KTphd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7dmlkZW86ITB9KX1jYXRjaCh0KXtyZXR1cm57b2s6ITEsZXJyb3JOYW1lOnQubmFtZSxlcnJvck1lc3NhZ2U6dC5tZXNzYWdlfX1maW5hbGx5e251bGw9PXJ8fHIuZ2V0VHJhY2tzKCkuZm9yRWFjaCgodD0+e3Quc3RvcCgpfSkpfXJldHVybntvazohMH19Z2V0IHN0YXRlKCl7aWYoIWJlKHRoaXMscmksXCJmXCIpKXJldHVyblwiY2xvc2VkXCI7aWYoXCJwZW5kaW5nXCI9PT1iZSh0aGlzLHJpLFwiZlwiKSlyZXR1cm5cIm9wZW5pbmdcIjtpZihcImZ1bGZpbGxlZFwiPT09YmUodGhpcyxyaSxcImZcIikpcmV0dXJuXCJvcGVuZWRcIjt0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHN0YXRlLlwiKX1zZXQgaWZTYXZlTGFzdFVzZWRDYW1lcmEodCl7dD9GaS5pc1N0b3JhZ2VBdmFpbGFibGUoXCJsb2NhbFN0b3JhZ2VcIik/eGUodGhpcywkZSwhMCxcImZcIik6KHhlKHRoaXMsJGUsITEsXCJmXCIpLGNvbnNvbGUud2FybihcIkxvY2FsIHN0b3JhZ2UgaXMgdW5hdmFpbGFibGVcIikpOnhlKHRoaXMsJGUsITEsXCJmXCIpfWdldCBpZlNhdmVMYXN0VXNlZENhbWVyYSgpe3JldHVybiBiZSh0aGlzLCRlLFwiZlwiKX1nZXQgaXNWaWRlb1BsYXlpbmcoKXtyZXR1cm4hKCFiZSh0aGlzLFhlLFwiZlwiKXx8YmUodGhpcyxYZSxcImZcIikucGF1c2VkKSYmXCJvcGVuZWRcIj09PXRoaXMuc3RhdGV9c2V0IHRhcEZvY3VzRXZlbnRCb3VuZEVsKHQpe3ZhciBlLGkscjtpZighKHQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkmJm51bGwhPXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgJ2VsZW1lbnQnLlwiKTtudWxsPT09KGU9YmUodGhpcyxsaSxcImZcIikpfHx2b2lkIDA9PT1lfHxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGJlKHRoaXMsaGksXCJmXCIpKSxudWxsPT09KGk9YmUodGhpcyxsaSxcImZcIikpfHx2b2lkIDA9PT1pfHxpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLGJlKHRoaXMsaGksXCJmXCIpKSxudWxsPT09KHI9YmUodGhpcyxsaSxcImZcIikpfHx2b2lkIDA9PT1yfHxyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixiZSh0aGlzLGFpLFwiZlwiKSkseGUodGhpcyxsaSx0LFwiZlwiKSx0JiYod2luZG93LlRvdWNoRXZlbnQmJltcIkFuZHJvaWRcIixcIkhhcm1vbnlPU1wiLFwiaVBob25lXCIsXCJpUGFkXCJdLmluY2x1ZGVzKEFlLk9TKT8odC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIixiZSh0aGlzLGhpLFwiZlwiKSksdC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsYmUodGhpcyxhaSxcImZcIikpKTp0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGJlKHRoaXMsaGksXCJmXCIpKSl9Z2V0IHRhcEZvY3VzRXZlbnRCb3VuZEVsKCl7cmV0dXJuIGJlKHRoaXMsbGksXCJmXCIpfWdldCBkaXNwb3NlZCgpe3JldHVybiBiZSh0aGlzLF9pLFwiZlwiKX1jb25zdHJ1Y3Rvcih0KXt2YXIgZSxpO0hlLmFkZCh0aGlzKSxYZS5zZXQodGhpcyxudWxsKSx6ZS5zZXQodGhpcyx2b2lkIDApLHFlLnNldCh0aGlzLCgoKT0+e1wib3BlbmVkXCI9PT10aGlzLnN0YXRlJiZiZSh0aGlzLGZpLFwiZlwiKS5maXJlKFwicmVzdW1lZFwiLG51bGwse3RhcmdldDp0aGlzLGFzeW5jOiExfSl9KSksS2Uuc2V0KHRoaXMsKCgpPT57YmUodGhpcyxmaSxcImZcIikuZmlyZShcInBhdXNlZFwiLG51bGwse3RhcmdldDp0aGlzLGFzeW5jOiExfSl9KSksWmUuc2V0KHRoaXMsdm9pZCAwKSxKZS5zZXQodGhpcyx2b2lkIDApLHRoaXMuY2FtZXJhT3BlblRpbWVvdXQ9MTVlMyx0aGlzLl9hcnJDYW1lcmFzPVtdLFFlLnNldCh0aGlzLHZvaWQgMCksJGUuc2V0KHRoaXMsITEpLHRoaXMuaWZTa2lwQ2FtZXJhSW5zcGVjdGlvbj0hMSx0aGlzLnNlbGVjdElPU1JlYXJNYWluQ2FtZXJhQXNEZWZhdWx0PSExLHRpLnNldCh0aGlzLHZvaWQgMCksZWkuc2V0KHRoaXMsITApLGlpLnNldCh0aGlzLHZvaWQgMCkscmkuc2V0KHRoaXMsdm9pZCAwKSxuaS5zZXQodGhpcywhMSksdGhpcy5fZm9jdXNQYXJhbWV0ZXJzPXttYXhUaW1lb3V0OjQwMCxtaW5UaW1lb3V0OjMwMCxrVGltZW91dDp2b2lkIDAsb2xkRGlzdGFuY2U6bnVsbCxmZHM6bnVsbCxpc0RvaW5nRm9jdXM6MCx0YXNrQmFja1RvQ29udGlub3VzOm51bGwsY3VyRm9jdXNUYXNrSWQ6MCxmb2N1c0NhbmNlbGFibGVUaW1lOjE1MDAsZGVmYXVsdEZvY3VzQXJlYVNpemVSYXRpbzo2LGZvY3VzQmFja1RvQ29udGlub3VzVGltZTo1ZTMsdGFwRm9jdXNNaW5EaXN0YW5jZTpudWxsLHRhcEZvY3VzTWF4RGlzdGFuY2U6bnVsbCxmb2N1c0FyZWE6bnVsbCx0ZW1wQnVmZmVyQ29udGFpbmVyOm51bGwsZGVmYXVsdFRlbXBCdWZmZXJDb250YWluZXJMZW5SYXRpbzoxLzR9LHNpLnNldCh0aGlzLCExKSx0aGlzLl9mb2N1c1N1cHBvcnRlZD0hMCx0aGlzLmNhbGN1bGF0ZUNvb3JkSW5WaWRlbz0odCxlKT0+e2xldCBpLHI7Y29uc3Qgbj13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShiZSh0aGlzLFhlLFwiZlwiKSkub2JqZWN0Rml0LHM9dGhpcy5nZXRSZXNvbHV0aW9uKCksbz1iZSh0aGlzLFhlLFwiZlwiKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxhPW8ubGVmdCxoPW8udG9wLHt3aWR0aDpsLGhlaWdodDpjfT1iZSh0aGlzLFhlLFwiZlwiKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihsPD0wfHxjPD0wKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBnZXQgdmlkZW8gZGltZW5zaW9ucy4gVmlkZW8gbWF5IG5vdCBiZSByZW5kZXJlZCBvbiB0aGUgcGFnZS5cIik7Y29uc3QgdT1sL2MsZD1zLndpZHRoL3MuaGVpZ2h0O2xldCBmPTE7aWYoXCJjb250YWluXCI9PT1uKWQ+dT8oZj1sL3Mud2lkdGgsaT0odC1hKS9mLHI9KGUtaC0oYy1sL2QpLzIpL2YpOihmPWMvcy5oZWlnaHQscj0oZS1oKS9mLGk9KHQtYS0obC1jKmQpLzIpL2YpO2Vsc2V7aWYoXCJjb3ZlclwiIT09bil0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBvYmplY3QtZml0LlwiKTtkPnU/KGY9Yy9zLmhlaWdodCxyPShlLWgpL2YsaT0odC1hKyhjKmQtbCkvMikvZik6KGY9bC9zLndpZHRoLGk9KHQtYSkvZixyPShlLWgrKGwvZC1jKS8yKS9mKX1yZXR1cm57eDppLHk6cn19LG9pLnNldCh0aGlzLCExKSxhaS5zZXQodGhpcywoKCk9Pnt4ZSh0aGlzLG9pLCEwLFwiZlwiKX0pKSxoaS5zZXQodGhpcywoYXN5bmMgdD0+e3ZhciBlO2lmKGJlKHRoaXMsb2ksXCJmXCIpKXJldHVybiB2b2lkIHhlKHRoaXMsb2ksITEsXCJmXCIpO2lmKCFiZSh0aGlzLHNpLFwiZlwiKSlyZXR1cm47aWYoIXRoaXMuaXNWaWRlb1BsYXlpbmcpcmV0dXJuO2lmKCFiZSh0aGlzLHplLFwiZlwiKSlyZXR1cm47aWYoIXRoaXMuX2ZvY3VzU3VwcG9ydGVkKXJldHVybjtpZighdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZkcyYmKHRoaXMuX2ZvY3VzUGFyYW1ldGVycy5mZHM9bnVsbD09PShlPXRoaXMuZ2V0Q2FtZXJhQ2FwYWJpbGl0aWVzKCkpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmZvY3VzRGlzdGFuY2UsIXRoaXMuX2ZvY3VzUGFyYW1ldGVycy5mZHMpKXJldHVybiB2b2lkKHRoaXMuX2ZvY3VzU3VwcG9ydGVkPSExKTtpZihudWxsPT10aGlzLl9mb2N1c1BhcmFtZXRlcnMua1RpbWVvdXQmJih0aGlzLl9mb2N1c1BhcmFtZXRlcnMua1RpbWVvdXQ9KHRoaXMuX2ZvY3VzUGFyYW1ldGVycy5tYXhUaW1lb3V0LXRoaXMuX2ZvY3VzUGFyYW1ldGVycy5taW5UaW1lb3V0KS8oMS90aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLm1pbi0xL3RoaXMuX2ZvY3VzUGFyYW1ldGVycy5mZHMubWF4KSksMT09dGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmlzRG9pbmdGb2N1cylyZXR1cm47bGV0IGkscjtpZih0aGlzLl9mb2N1c1BhcmFtZXRlcnMudGFza0JhY2tUb0NvbnRpbm91cyYmKGNsZWFyVGltZW91dCh0aGlzLl9mb2N1c1BhcmFtZXRlcnMudGFza0JhY2tUb0NvbnRpbm91cyksdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLnRhc2tCYWNrVG9Db250aW5vdXM9bnVsbCksdCBpbnN0YW5jZW9mIE1vdXNlRXZlbnQpaT10LmNsaWVudFgscj10LmNsaWVudFk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBUb3VjaEV2ZW50KSl0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGV2ZW50IHR5cGUuXCIpO2lmKCF0LmNoYW5nZWRUb3VjaGVzLmxlbmd0aClyZXR1cm47aT10LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgscj10LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFl9Y29uc3Qgbj10aGlzLmdldFJlc29sdXRpb24oKSxzPTIqTWF0aC5yb3VuZChNYXRoLm1pbihuLndpZHRoLG4uaGVpZ2h0KS90aGlzLl9mb2N1c1BhcmFtZXRlcnMuZGVmYXVsdEZvY3VzQXJlYVNpemVSYXRpby8yKTtsZXQgbzt0cnl7bz10aGlzLmNhbGN1bGF0ZUNvb3JkSW5WaWRlbyhpLHIpfWNhdGNoKHQpe31pZihvLng8MHx8by54Pm4ud2lkdGh8fG8ueTwwfHxvLnk+bi5oZWlnaHQpcmV0dXJuO2NvbnN0IGE9e3g6by54K1wicHhcIix5Om8ueStcInB4XCJ9LGg9cytcInB4XCIsbD1oO2xldCBjO0ZpLl9vbkxvZyYmKGM9RGF0ZS5ub3coKSk7dHJ5e2F3YWl0IGJlKHRoaXMsSGUsXCJtXCIsQWkpLmNhbGwodGhpcyxhLGgsbCx0aGlzLl9mb2N1c1BhcmFtZXRlcnMudGFwRm9jdXNNaW5EaXN0YW5jZSx0aGlzLl9mb2N1c1BhcmFtZXRlcnMudGFwRm9jdXNNYXhEaXN0YW5jZSl9Y2F0Y2godCl7aWYoRmkuX29uTG9nKXRocm93IEZpLl9vbkxvZyh0KSx0fUZpLl9vbkxvZyYmRmkuX29uTG9nKGBUYXAgZm9jdXMgY29zdHM6ICR7RGF0ZS5ub3coKS1jfSBtc2ApLHRoaXMuX2ZvY3VzUGFyYW1ldGVycy50YXNrQmFja1RvQ29udGlub3VzPXNldFRpbWVvdXQoKCgpPT57dmFyIHQ7RmkuX29uTG9nJiZGaS5fb25Mb2coXCJCYWNrIHRvIGNvbnRpbnVvdXMgZm9jdXMuXCIpLG51bGw9PT0odD1iZSh0aGlzLHplLFwiZlwiKSl8fHZvaWQgMD09PXR8fHQuYXBwbHlDb25zdHJhaW50cyh7YWR2YW5jZWQ6W3tmb2N1c01vZGU6XCJjb250aW51b3VzXCJ9XX0pLmNhdGNoKCgoKT0+e30pKX0pLHRoaXMuX2ZvY3VzUGFyYW1ldGVycy5mb2N1c0JhY2tUb0NvbnRpbm91c1RpbWUpLGJlKHRoaXMsZmksXCJmXCIpLmZpcmUoXCJ0YXBmb2N1c1wiLG51bGwse3RhcmdldDp0aGlzLGFzeW5jOiExfSl9KSksbGkuc2V0KHRoaXMsbnVsbCksY2kuc2V0KHRoaXMsMSksdWkuc2V0KHRoaXMse3g6MCx5OjB9KSx0aGlzLnVwZGF0ZVZpZGVvRWxXaGVuU29mdHdhcmVTY2FsZWQ9KCk9PntpZighYmUodGhpcyxYZSxcImZcIikpcmV0dXJuO2NvbnN0IHQ9YmUodGhpcyxjaSxcImZcIik7aWYodDwxKXRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBzY2FsZSB2YWx1ZS5cIik7aWYoMT09PXQpYmUodGhpcyxYZSxcImZcIikuc3R5bGUudHJhbnNmb3JtPVwiXCI7ZWxzZXtjb25zdCBlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGJlKHRoaXMsWGUsXCJmXCIpKS5vYmplY3RGaXQsaT1iZSh0aGlzLFhlLFwiZlwiKS52aWRlb1dpZHRoLHI9YmUodGhpcyxYZSxcImZcIikudmlkZW9IZWlnaHQse3dpZHRoOm4saGVpZ2h0OnN9PWJlKHRoaXMsWGUsXCJmXCIpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2lmKG48PTB8fHM8PTApdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGdldCB2aWRlbyBkaW1lbnNpb25zLiBWaWRlbyBtYXkgbm90IGJlIHJlbmRlcmVkIG9uIHRoZSBwYWdlLlwiKTtjb25zdCBvPW4vcyxhPWkvcjtsZXQgaD0xO1wiY29udGFpblwiPT09ZT9oPW88YT9uLyhpL3QpOnMvKHIvdCk6XCJjb3ZlclwiPT09ZSYmKGg9YT5vP3MvKGkvdCk6bi8oci90KSk7Y29uc3QgbD1oKigxLTEvdCkqKGkvMi1iZSh0aGlzLHVpLFwiZlwiKS54KSxjPWgqKDEtMS90KSooci8yLWJlKHRoaXMsdWksXCJmXCIpLnkpO2JlKHRoaXMsWGUsXCJmXCIpLnN0eWxlLnRyYW5zZm9ybT1gdHJhbnNsYXRlKCR7bH1weCwgJHtjfXB4KSBzY2FsZSgke3R9KWB9fSxkaS5zZXQodGhpcywoZnVuY3Rpb24oKXtpZighKHRoaXMuZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXl8fHRoaXMuZGF0YSBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBkYXRhLlwiKTtpZihcIm51bWJlclwiIT10eXBlb2YgdGhpcy53aWR0aHx8dGhpcy53aWR0aDw9MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHdpZHRoLlwiKTtpZihcIm51bWJlclwiIT10eXBlb2YgdGhpcy5oZWlnaHR8fHRoaXMuaGVpZ2h0PD0wKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaGVpZ2h0LlwiKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7bGV0IGU7aWYodC53aWR0aD10aGlzLndpZHRoLHQuaGVpZ2h0PXRoaXMuaGVpZ2h0LHRoaXMucGl4ZWxGb3JtYXQ9PT1NZS5HUkVZKXtlPW5ldyBVaW50OENsYW1wZWRBcnJheSh0aGlzLndpZHRoKnRoaXMuaGVpZ2h0KjQpO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7dCs9NCllW3RdPXRoaXMuZGF0YVt0LzRdLGVbdCsxXT10aGlzLmRhdGFbdC80XSxlW3QrMl09dGhpcy5kYXRhW3QvNF0sZVt0KzNdPTI1NX1lbHNlIGU9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMuZGF0YS5idWZmZXIpO2NvbnN0IGk9bmV3IEltYWdlRGF0YShlLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpO3JldHVybiB0LmdldENvbnRleHQoXCIyZFwiKS5wdXRJbWFnZURhdGEoaSwwLDApLHR9KSksZmkuc2V0KHRoaXMsdm9pZCAwKSxnaS5zZXQodGhpcyxbXCJiZWZvcmU6b3BlblwiLFwib3BlbmVkXCIsXCJiZWZvcmU6Y2xvc2VcIixcImNsb3NlZFwiLFwiYmVmb3JlOmNhbWVyYTpjaGFuZ2VcIixcImNhbWVyYTpjaGFuZ2VkXCIsXCJiZWZvcmU6cmVzb2x1dGlvbjpjaGFuZ2VcIixcInJlc29sdXRpb246Y2hhbmdlZFwiLFwicGxheWVkXCIsXCJwYXVzZWRcIixcInJlc3VtZWRcIixcInRhcGZvY3VzXCJdKSx0aGlzLmRldGVjdGVkUmVzb2x1dGlvbnM9W3t3aWR0aDoxNjAsaGVpZ2h0OjEyMH0se3dpZHRoOjMyMCxoZWlnaHQ6MjQwfSx7d2lkdGg6NDgwLGhlaWdodDozNjB9LHt3aWR0aDo2NDAsaGVpZ2h0OjQ4MH0se3dpZHRoOjgwMCxoZWlnaHQ6NjAwfSx7d2lkdGg6OTYwLGhlaWdodDo3MjB9LHt3aWR0aDoxMjgwLGhlaWdodDo3MjB9LHt3aWR0aDoxOTIwLGhlaWdodDoxMDgwfSx7d2lkdGg6MjU2MCxoZWlnaHQ6MTQ0MH0se3dpZHRoOjM4NDAsaGVpZ2h0OjIxNjB9XSxtaS5zZXQodGhpcyxuZXcgTWFwKSxwaS5zZXQodGhpcywhMSksdmkuc2V0KHRoaXMsKGFzeW5jKCk9Pnt2YXIgdCxlO2lmKFwidmlzaWJsZVwiPT09ZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlKXtpZihGaS5fb25Mb2cmJkZpLl9vbkxvZyhcImRvY3VtZW50IHZpc2libGUuIHZpZGVvIHBhdXNlZDogXCIrKG51bGw9PT0odD1iZSh0aGlzLFhlLFwiZlwiKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQucGF1c2VkKSksXCJvcGVuaW5nXCI9PXRoaXMuc3RhdGV8fFwib3BlbmVkXCI9PXRoaXMuc3RhdGUpe2xldCB0PSExO2lmKCF0aGlzLmlzVmlkZW9QbGF5aW5nKXtGaS5fb25Mb2cmJkZpLl9vbkxvZyhcImRvY3VtZW50IHZpc2libGUuIE5vdCBhdXRvIHJlc3VtZS4gMXN0IHJlc3VtZSBzdGFydC5cIik7dHJ5e2F3YWl0IHRoaXMucmVzdW1lKCksdD0hMH1jYXRjaCh0KXtGaS5fb25Mb2cmJkZpLl9vbkxvZyhcImRvY3VtZW50IHZpc2libGUuIDFzdCByZXN1bWUgdmlkZW8gZmFpbGVkLCB0cnkgb3BlbiBpbnN0ZWFkLlwiKX10fHxhd2FpdCBiZSh0aGlzLEhlLFwibVwiLENpKS5jYWxsKHRoaXMpfWlmKGF3YWl0IG5ldyBQcm9taXNlKCh0PT5zZXRUaW1lb3V0KHQsMzAwKSkpLCF0aGlzLmlzVmlkZW9QbGF5aW5nKXtGaS5fb25Mb2cmJkZpLl9vbkxvZyhcImRvY3VtZW50IHZpc2libGUuIDFzdCBvcGVuIGZhaWxlZC4gMnJkIHJlc3VtZSBzdGFydC5cIiksdD0hMTt0cnl7YXdhaXQgdGhpcy5yZXN1bWUoKSx0PSEwfWNhdGNoKHQpe0ZpLl9vbkxvZyYmRmkuX29uTG9nKFwiZG9jdW1lbnQgdmlzaWJsZS4gMnJkIHJlc3VtZSB2aWRlbyBmYWlsZWQsIHRyeSBvcGVuIGluc3RlYWQuXCIpfXR8fGF3YWl0IGJlKHRoaXMsSGUsXCJtXCIsQ2kpLmNhbGwodGhpcyl9fX1lbHNlXCJoaWRkZW5cIj09PWRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSYmKEZpLl9vbkxvZyYmRmkuX29uTG9nKFwiZG9jdW1lbnQgaGlkZGVuLiB2aWRlbyBwYXVzZWQ6IFwiKyhudWxsPT09KGU9YmUodGhpcyxYZSxcImZcIikpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnBhdXNlZCkpLFwib3BlbmluZ1wiPT10aGlzLnN0YXRlfHxcIm9wZW5lZFwiPT10aGlzLnN0YXRlJiZ0aGlzLmlzVmlkZW9QbGF5aW5nJiZ0aGlzLnBhdXNlKCkpfSkpLF9pLnNldCh0aGlzLCExKSwobnVsbD09PShpPW51bGw9PT0oZT1udWxsPT09d2luZG93fHx2b2lkIDA9PT13aW5kb3c/dm9pZCAwOndpbmRvdy5uYXZpZ2F0b3IpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLm1lZGlhRGV2aWNlcyl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZ2V0VXNlck1lZGlhKXx8c2V0VGltZW91dCgoKCk9PntGaS5vbldhcm5pbmcmJkZpLm9uV2FybmluZyhcIlRoZSBicm93c2VyIGlzIHRvbyBvbGQgb3IgdGhlIHBhZ2UgaXMgbG9hZGVkIGZyb20gYW4gaW5zZWN1cmUgb3JpZ2luLlwiKX0pLDApLHRoaXMuZGVmYXVsdENvbnN0cmFpbnRzPXt2aWRlbzp7ZmFjaW5nTW9kZTp7aWRlYWw6XCJlbnZpcm9ubWVudFwifX19LHRoaXMucmVzZXRNZWRpYVN0cmVhbUNvbnN0cmFpbnRzKCksdCBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQmJnRoaXMuc2V0VmlkZW9FbCh0KSx4ZSh0aGlzLGZpLG5ldyBEaSxcImZcIiksdGhpcy5pbWFnZURhdGFHZXR0ZXI9bmV3IFZlLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsYmUodGhpcyx2aSxcImZcIikpfXNldFZpZGVvRWwodCl7aWYoISh0JiZ0IGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCAndmlkZW9FbCcuXCIpO3QuYWRkRXZlbnRMaXN0ZW5lcihcInBsYXlcIixiZSh0aGlzLHFlLFwiZlwiKSksdC5hZGRFdmVudExpc3RlbmVyKFwicGF1c2VcIixiZSh0aGlzLEtlLFwiZlwiKSkseGUodGhpcyxYZSx0LFwiZlwiKX1nZXRWaWRlb0VsKCl7cmV0dXJuIGJlKHRoaXMsWGUsXCJmXCIpfXJlbGVhc2VWaWRlb0VsKCl7dmFyIHQsZTtudWxsPT09KHQ9YmUodGhpcyxYZSxcImZcIikpfHx2b2lkIDA9PT10fHx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwbGF5XCIsYmUodGhpcyxxZSxcImZcIikpLG51bGw9PT0oZT1iZSh0aGlzLFhlLFwiZlwiKSl8fHZvaWQgMD09PWV8fGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBhdXNlXCIsYmUodGhpcyxLZSxcImZcIikpLHhlKHRoaXMsWGUsbnVsbCxcImZcIil9aXNWaWRlb0xvYWRlZCgpe3JldHVybiEhYmUodGhpcyxYZSxcImZcIikmJjQ9PWJlKHRoaXMsWGUsXCJmXCIpLnJlYWR5U3RhdGV9YXN5bmMgb3Blbigpe2lmKGJlKHRoaXMsaWksXCJmXCIpJiYhYmUodGhpcyxlaSxcImZcIikpe2lmKFwicGVuZGluZ1wiPT09YmUodGhpcyxyaSxcImZcIikpcmV0dXJuIGJlKHRoaXMsaWksXCJmXCIpO2lmKFwiZnVsZmlsbGVkXCI9PT1iZSh0aGlzLHJpLFwiZlwiKSlyZXR1cm59YmUodGhpcyxmaSxcImZcIikuZmlyZShcImJlZm9yZTpvcGVuXCIsbnVsbCx7dGFyZ2V0OnRoaXN9KSxhd2FpdCBiZSh0aGlzLEhlLFwibVwiLENpKS5jYWxsKHRoaXMpLGJlKHRoaXMsZmksXCJmXCIpLmZpcmUoXCJwbGF5ZWRcIixudWxsLHt0YXJnZXQ6dGhpcyxhc3luYzohMX0pLGJlKHRoaXMsZmksXCJmXCIpLmZpcmUoXCJvcGVuZWRcIixudWxsLHt0YXJnZXQ6dGhpcyxhc3luYzohMX0pfWFzeW5jIGNsb3NlKCl7aWYoXCJjbG9zZWRcIj09PXRoaXMuc3RhdGUpcmV0dXJuO2JlKHRoaXMsZmksXCJmXCIpLmZpcmUoXCJiZWZvcmU6Y2xvc2VcIixudWxsLHt0YXJnZXQ6dGhpc30pO2NvbnN0IHQ9YmUodGhpcyxpaSxcImZcIik7aWYoYmUodGhpcyxIZSxcIm1cIixUaSkuY2FsbCh0aGlzKSx0JiZcInBlbmRpbmdcIj09PWJlKHRoaXMscmksXCJmXCIpKXt0cnl7YXdhaXQgdH1jYXRjaCh0KXt9aWYoITE9PT1iZSh0aGlzLGVpLFwiZlwiKSl7Y29uc3QgdD1uZXcgRXJyb3IoXCInY2xvc2UoKScgd2FzIGludGVycnVwdGVkLlwiKTt0aHJvdyB0Lm5hbWU9XCJBYm9ydEVycm9yXCIsdH19eGUodGhpcyxpaSxudWxsLFwiZlwiKSx4ZSh0aGlzLHJpLG51bGwsXCJmXCIpLGJlKHRoaXMsZmksXCJmXCIpLmZpcmUoXCJjbG9zZWRcIixudWxsLHt0YXJnZXQ6dGhpcyxhc3luYzohMX0pfXBhdXNlKCl7aWYoIXRoaXMuaXNWaWRlb0xvYWRlZCgpKXRocm93IG5ldyBFcnJvcihcIlZpZGVvIGlzIG5vdCBsb2FkZWQuXCIpO2lmKFwib3BlbmVkXCIhPT10aGlzLnN0YXRlKXRocm93IG5ldyBFcnJvcihcIkNhbWVyYSBvciB2aWRlbyBpcyBub3Qgb3Blbi5cIik7YmUodGhpcyxYZSxcImZcIikucGF1c2UoKX1hc3luYyByZXN1bWUoKXtpZighdGhpcy5pc1ZpZGVvTG9hZGVkKCkpdGhyb3cgbmV3IEVycm9yKFwiVmlkZW8gaXMgbm90IGxvYWRlZC5cIik7aWYoXCJvcGVuZWRcIiE9PXRoaXMuc3RhdGUpdGhyb3cgbmV3IEVycm9yKFwiQ2FtZXJhIG9yIHZpZGVvIGlzIG5vdCBvcGVuLlwiKTthd2FpdCBiZSh0aGlzLFhlLFwiZlwiKS5wbGF5KCl9YXN5bmMgc2V0Q2FtZXJhKHQpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdkZXZpY2VJZCcuXCIpO2lmKFwib2JqZWN0XCIhPXR5cGVvZiBiZSh0aGlzLFplLFwiZlwiKS52aWRlbyYmKGJlKHRoaXMsWmUsXCJmXCIpLnZpZGVvPXt9KSxkZWxldGUgYmUodGhpcyxaZSxcImZcIikudmlkZW8uZmFjaW5nTW9kZSxiZSh0aGlzLFplLFwiZlwiKS52aWRlby5kZXZpY2VJZD17ZXhhY3Q6dH0sIShcImNsb3NlZFwiPT09dGhpcy5zdGF0ZXx8dGhpcy52aWRlb1NyY3x8XCJvcGVuaW5nXCI9PT10aGlzLnN0YXRlJiZiZSh0aGlzLGVpLFwiZlwiKSkpe2JlKHRoaXMsZmksXCJmXCIpLmZpcmUoXCJiZWZvcmU6Y2FtZXJhOmNoYW5nZVwiLFtdLHt0YXJnZXQ6dGhpcyxhc3luYzohMX0pLGF3YWl0IGJlKHRoaXMsSGUsXCJtXCIsU2kpLmNhbGwodGhpcyk7dHJ5e3RoaXMucmVzZXRTb2Z0d2FyZVNjYWxlKCl9Y2F0Y2godCl7fXJldHVybiBiZSh0aGlzLEplLFwiZlwiKX19YXN5bmMgc3dpdGNoVG9Gcm9udENhbWVyYSh0KXtpZihcIm9iamVjdFwiIT10eXBlb2YgYmUodGhpcyxaZSxcImZcIikudmlkZW8mJihiZSh0aGlzLFplLFwiZlwiKS52aWRlbz17fSksKG51bGw9PXQ/dm9pZCAwOnQucmVzb2x1dGlvbikmJihiZSh0aGlzLFplLFwiZlwiKS52aWRlby53aWR0aD17aWRlYWw6dC5yZXNvbHV0aW9uLndpZHRofSxiZSh0aGlzLFplLFwiZlwiKS52aWRlby5oZWlnaHQ9e2lkZWFsOnQucmVzb2x1dGlvbi5oZWlnaHR9KSxkZWxldGUgYmUodGhpcyxaZSxcImZcIikudmlkZW8uZGV2aWNlSWQsYmUodGhpcyxaZSxcImZcIikudmlkZW8uZmFjaW5nTW9kZT17ZXhhY3Q6XCJ1c2VyXCJ9LHhlKHRoaXMsUWUsbnVsbCxcImZcIiksIShcImNsb3NlZFwiPT09dGhpcy5zdGF0ZXx8dGhpcy52aWRlb1NyY3x8XCJvcGVuaW5nXCI9PT10aGlzLnN0YXRlJiZiZSh0aGlzLGVpLFwiZlwiKSkpe2JlKHRoaXMsZmksXCJmXCIpLmZpcmUoXCJiZWZvcmU6Y2FtZXJhOmNoYW5nZVwiLFtdLHt0YXJnZXQ6dGhpcyxhc3luYzohMX0pLGJlKHRoaXMsSGUsXCJtXCIsU2kpLmNhbGwodGhpcyk7dHJ5e3RoaXMucmVzZXRTb2Z0d2FyZVNjYWxlKCl9Y2F0Y2godCl7fXJldHVybiBiZSh0aGlzLEplLFwiZlwiKX19Z2V0Q2FtZXJhKCl7dmFyIHQ7aWYoYmUodGhpcyxKZSxcImZcIikpcmV0dXJuIGJlKHRoaXMsSmUsXCJmXCIpO3tsZXQgZT0obnVsbD09PSh0PWJlKHRoaXMsWmUsXCJmXCIpLnZpZGVvKXx8dm9pZCAwPT09dD92b2lkIDA6dC5kZXZpY2VJZCl8fFwiXCI7aWYoZSl7ZT1lLmV4YWN0fHxlLmlkZWFsfHxlO2ZvcihsZXQgdCBvZiB0aGlzLl9hcnJDYW1lcmFzKWlmKHQuZGV2aWNlSWQ9PT1lKXJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQpKX1yZXR1cm57ZGV2aWNlSWQ6XCJcIixsYWJlbDpcIlwiLF9jaGVja2VkOiExfX19YXN5bmMgX2dldENhbWVyYXModCl7dmFyIGUsaTtpZighKG51bGw9PT0oaT1udWxsPT09KGU9bnVsbD09PXdpbmRvd3x8dm9pZCAwPT09d2luZG93P3ZvaWQgMDp3aW5kb3cubmF2aWdhdG9yKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5tZWRpYURldmljZXMpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmdldFVzZXJNZWRpYSkpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGFjY2VzcyB0aGUgY2FtZXJhIGJlY2F1c2UgdGhlIGJyb3dzZXIgaXMgdG9vIG9sZCBvciB0aGUgcGFnZSBpcyBsb2FkZWQgZnJvbSBhbiBpbnNlY3VyZSBvcmlnaW4uXCIpO2xldCByO2lmKHQpe2xldCB0PWF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHt2aWRlbzohMH0pO3I9KGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpKS5maWx0ZXIoKHQ9PlwidmlkZW9pbnB1dFwiPT09dC5raW5kKSksdC5nZXRUcmFja3MoKS5mb3JFYWNoKCh0PT57dC5zdG9wKCl9KSl9ZWxzZSByPShhd2FpdCBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMoKSkuZmlsdGVyKCh0PT5cInZpZGVvaW5wdXRcIj09PXQua2luZCkpO2NvbnN0IG49W10scz1bXTtpZih0aGlzLl9hcnJDYW1lcmFzKWZvcihsZXQgdCBvZiB0aGlzLl9hcnJDYW1lcmFzKXQuX2NoZWNrZWQmJnMucHVzaCh0KTtmb3IobGV0IHQ9MDt0PHIubGVuZ3RoO3QrKyl7bGV0IGUsaT1yW3RdO2ZvcihsZXQgdCBvZiBzKWlmKGkuZGV2aWNlSWQ9PXQuZGV2aWNlSWQpe2U9dDticmVha31lfHwoZT17ZGV2aWNlSWQ6aS5kZXZpY2VJZCxsYWJlbDppLmxhYmVsP2kubGFiZWw6XCJjYW1lcmEgXCIrdCxfY2hlY2tlZDohMX0pLGUuZGV2aWNlSWQmJm4ucHVzaChlKX1yZXR1cm4gdGhpcy5fYXJyQ2FtZXJhcz1uLEZpLl9vbkxvZyYmRmkuX29uTG9nKEpTT04uc3RyaW5naWZ5KHRoaXMuX2FyckNhbWVyYXMpKSxufWFzeW5jIGdldENhbWVyYXMoKXt2YXIgdCxlO2lmKCEobnVsbD09PShlPW51bGw9PT0odD1udWxsPT09d2luZG93fHx2b2lkIDA9PT13aW5kb3c/dm9pZCAwOndpbmRvdy5uYXZpZ2F0b3IpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lm1lZGlhRGV2aWNlcyl8fHZvaWQgMD09PWU/dm9pZCAwOmUuZW51bWVyYXRlRGV2aWNlcykpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGFjY2VzcyB0aGUgY2FtZXJhIGJlY2F1c2UgdGhlIGJyb3dzZXIgaXMgdG9vIG9sZCBvciB0aGUgcGFnZSBpcyBsb2FkZWQgZnJvbSBhbiBpbnNlY3VyZSBvcmlnaW4uXCIpO2NvbnN0IGk9KGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpKS5maWx0ZXIoKHQ9PlwidmlkZW9pbnB1dFwiPT09dC5raW5kKSk7cmV0dXJuIGkmJmkubGVuZ3RoJiYhaVswXS5kZXZpY2VJZD90aGlzLl9nZXRDYW1lcmFzKCEwKTp0aGlzLl9nZXRDYW1lcmFzKCExKX1hc3luYyBnZXRBbGxDYW1lcmFzKCl7cmV0dXJuIHRoaXMuZ2V0Q2FtZXJhcygpfWFzeW5jIHNldFJlc29sdXRpb24odCxlLGkpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0PD0wKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICd3aWR0aCcuXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlPD0wKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdoZWlnaHQnLlwiKTtpZihcIm9iamVjdFwiIT10eXBlb2YgYmUodGhpcyxaZSxcImZcIikudmlkZW8mJihiZSh0aGlzLFplLFwiZlwiKS52aWRlbz17fSksaT8oYmUodGhpcyxaZSxcImZcIikudmlkZW8ud2lkdGg9e2V4YWN0OnR9LGJlKHRoaXMsWmUsXCJmXCIpLnZpZGVvLmhlaWdodD17ZXhhY3Q6ZX0pOihiZSh0aGlzLFplLFwiZlwiKS52aWRlby53aWR0aD17aWRlYWw6dH0sYmUodGhpcyxaZSxcImZcIikudmlkZW8uaGVpZ2h0PXtpZGVhbDplfSksXCJjbG9zZWRcIj09PXRoaXMuc3RhdGV8fHRoaXMudmlkZW9TcmN8fFwib3BlbmluZ1wiPT09dGhpcy5zdGF0ZSYmYmUodGhpcyxlaSxcImZcIikpcmV0dXJuIG51bGw7YmUodGhpcyxmaSxcImZcIikuZmlyZShcImJlZm9yZTpyZXNvbHV0aW9uOmNoYW5nZVwiLFtdLHt0YXJnZXQ6dGhpcyxhc3luYzohMX0pLGF3YWl0IGJlKHRoaXMsSGUsXCJtXCIsU2kpLmNhbGwodGhpcyk7dHJ5e3RoaXMucmVzZXRTb2Z0d2FyZVNjYWxlKCl9Y2F0Y2godCl7fWNvbnN0IHI9dGhpcy5nZXRSZXNvbHV0aW9uKCk7cmV0dXJue3dpZHRoOnIud2lkdGgsaGVpZ2h0OnIuaGVpZ2h0fX1nZXRSZXNvbHV0aW9uKCl7aWYoXCJvcGVuZWRcIj09PXRoaXMuc3RhdGUmJnRoaXMudmlkZW9TcmMmJmJlKHRoaXMsWGUsXCJmXCIpKXJldHVybnt3aWR0aDpiZSh0aGlzLFhlLFwiZlwiKS52aWRlb1dpZHRoLGhlaWdodDpiZSh0aGlzLFhlLFwiZlwiKS52aWRlb0hlaWdodH07aWYoYmUodGhpcyx6ZSxcImZcIikpe2NvbnN0IHQ9YmUodGhpcyx6ZSxcImZcIikuZ2V0U2V0dGluZ3MoKTtyZXR1cm57d2lkdGg6dC53aWR0aCxoZWlnaHQ6dC5oZWlnaHR9fWlmKHRoaXMuaXNWaWRlb0xvYWRlZCgpKXJldHVybnt3aWR0aDpiZSh0aGlzLFhlLFwiZlwiKS52aWRlb1dpZHRoLGhlaWdodDpiZSh0aGlzLFhlLFwiZlwiKS52aWRlb0hlaWdodH07e2NvbnN0IHQ9e3dpZHRoOjAsaGVpZ2h0OjB9O2xldCBlPWJlKHRoaXMsWmUsXCJmXCIpLnZpZGVvLndpZHRofHwwLGk9YmUodGhpcyxaZSxcImZcIikudmlkZW8uaGVpZ2h0fHwwO3JldHVybiBlJiYodC53aWR0aD1lLmV4YWN0fHxlLmlkZWFsfHxlKSxpJiYodC5oZWlnaHQ9aS5leGFjdHx8aS5pZGVhbHx8aSksdH19YXN5bmMgZ2V0UmVzb2x1dGlvbnModCl7dmFyIGUsaSxyLG4scyxvLGEsaCxsLGMsdTtpZighKG51bGw9PT0oaT1udWxsPT09KGU9bnVsbD09PXdpbmRvd3x8dm9pZCAwPT09d2luZG93P3ZvaWQgMDp3aW5kb3cubmF2aWdhdG9yKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5tZWRpYURldmljZXMpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmdldFVzZXJNZWRpYSkpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGFjY2VzcyB0aGUgY2FtZXJhIGJlY2F1c2UgdGhlIGJyb3dzZXIgaXMgdG9vIG9sZCBvciB0aGUgcGFnZSBpcyBsb2FkZWQgZnJvbSBhbiBpbnNlY3VyZSBvcmlnaW4uXCIpO2xldCBkPVwiXCI7Y29uc3QgZj0odCxlKT0+e2NvbnN0IGk9YmUodGhpcyxtaSxcImZcIikuZ2V0KHQpO2lmKCFpfHwhaS5sZW5ndGgpcmV0dXJuITE7Zm9yKGxldCB0IG9mIGkpaWYodC53aWR0aD09PWUud2lkdGgmJnQuaGVpZ2h0PT09ZS5oZWlnaHQpcmV0dXJuITA7cmV0dXJuITF9O2lmKHRoaXMuX21lZGlhU3RyZWFtKXtkPW51bGw9PT0odT1iZSh0aGlzLEplLFwiZlwiKSl8fHZvaWQgMD09PXU/dm9pZCAwOnUuZGV2aWNlSWQ7bGV0IGU9YmUodGhpcyxtaSxcImZcIikuZ2V0KGQpO2lmKGUmJiF0KXJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKTtlPVtdLGJlKHRoaXMsbWksXCJmXCIpLnNldChkLGUpLHhlKHRoaXMsbmksITAsXCJmXCIpO3RyeXtmb3IobGV0IHQgb2YgdGhpcy5kZXRlY3RlZFJlc29sdXRpb25zKXthd2FpdCBiZSh0aGlzLHplLFwiZlwiKS5hcHBseUNvbnN0cmFpbnRzKHt3aWR0aDp7aWRlYWw6dC53aWR0aH0saGVpZ2h0OntpZGVhbDp0LmhlaWdodH19KSxiZSh0aGlzLEhlLFwibVwiLHdpKS5jYWxsKHRoaXMpO2NvbnN0IGk9YmUodGhpcyx6ZSxcImZcIikuZ2V0U2V0dGluZ3MoKSxyPXt3aWR0aDppLndpZHRoLGhlaWdodDppLmhlaWdodH07ZihkLHIpfHxlLnB1c2goe3dpZHRoOnIud2lkdGgsaGVpZ2h0OnIuaGVpZ2h0fSl9fWNhdGNoKHQpe3Rocm93IGJlKHRoaXMsSGUsXCJtXCIsVGkpLmNhbGwodGhpcykseGUodGhpcyxuaSwhMSxcImZcIiksdH10cnl7YXdhaXQgYmUodGhpcyxIZSxcIm1cIixDaSkuY2FsbCh0aGlzKX1jYXRjaCh0KXtpZihcIkFib3J0RXJyb3JcIj09PXQubmFtZSlyZXR1cm4gZTt0aHJvdyB0fWZpbmFsbHl7eGUodGhpcyxuaSwhMSxcImZcIil9cmV0dXJuIGV9e2NvbnN0IGU9YXN5bmModCxlLGkpPT57Y29uc3Qgcj17dmlkZW86e2RldmljZUlkOntleGFjdDp0fSx3aWR0aDp7aWRlYWw6ZX0saGVpZ2h0OntpZGVhbDppfX19O2xldCBuPW51bGw7dHJ5e249YXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEocil9Y2F0Y2godCl7cmV0dXJuIG51bGx9aWYoIW4pcmV0dXJuIG51bGw7Y29uc3Qgcz1uLmdldFZpZGVvVHJhY2tzKCk7bGV0IG89bnVsbDt0cnl7Y29uc3QgdD1zWzBdLmdldFNldHRpbmdzKCk7bz17d2lkdGg6dC53aWR0aCxoZWlnaHQ6dC5oZWlnaHR9fWNhdGNoKHQpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpO2Uuc3JjT2JqZWN0PW4sbz17d2lkdGg6ZS52aWRlb1dpZHRoLGhlaWdodDplLnZpZGVvSGVpZ2h0fSxlLnNyY09iamVjdD1udWxsfXJldHVybiBzLmZvckVhY2goKHQ9Pnt0LnN0b3AoKX0pKSxvfTtsZXQgaT0obnVsbD09PShzPW51bGw9PT0obj1udWxsPT09KHI9YmUodGhpcyxaZSxcImZcIikpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnZpZGVvKXx8dm9pZCAwPT09bj92b2lkIDA6bi5kZXZpY2VJZCl8fHZvaWQgMD09PXM/dm9pZCAwOnMuZXhhY3QpfHwobnVsbD09PShoPW51bGw9PT0oYT1udWxsPT09KG89YmUodGhpcyxaZSxcImZcIikpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLnZpZGVvKXx8dm9pZCAwPT09YT92b2lkIDA6YS5kZXZpY2VJZCl8fHZvaWQgMD09PWg/dm9pZCAwOmguaWRlYWwpfHwobnVsbD09PShjPW51bGw9PT0obD1iZSh0aGlzLFplLFwiZlwiKSl8fHZvaWQgMD09PWw/dm9pZCAwOmwudmlkZW8pfHx2b2lkIDA9PT1jP3ZvaWQgMDpjLmRldmljZUlkKTtpZighaSlyZXR1cm5bXTtsZXQgdT1iZSh0aGlzLG1pLFwiZlwiKS5nZXQoaSk7aWYodSYmIXQpcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodSkpO3U9W10sYmUodGhpcyxtaSxcImZcIikuc2V0KGksdSk7Zm9yKGxldCB0IG9mIHRoaXMuZGV0ZWN0ZWRSZXNvbHV0aW9ucyl7Y29uc3Qgcj1hd2FpdCBlKGksdC53aWR0aCx0LmhlaWdodCk7ciYmIWYoaSxyKSYmdS5wdXNoKHt3aWR0aDpyLndpZHRoLGhlaWdodDpyLmhlaWdodH0pfXJldHVybiB1fX1hc3luYyBzZXRNZWRpYVN0cmVhbUNvbnN0cmFpbnRzKHQsZSl7aWYoISh0PT57cmV0dXJuIG51bGwhPT10JiZcIltvYmplY3QgT2JqZWN0XVwiPT09KGU9dCxPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkpO3ZhciBlfSkodCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgJ21lZGlhU3RyZWFtQ29uc3RyYWludHMnLlwiKTt4ZSh0aGlzLFplLEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodCkpLFwiZlwiKSx4ZSh0aGlzLFFlLG51bGwsXCJmXCIpLGUmJmJlKHRoaXMsSGUsXCJtXCIsU2kpLmNhbGwodGhpcyl9Z2V0TWVkaWFTdHJlYW1Db25zdHJhaW50cygpe3JldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGJlKHRoaXMsWmUsXCJmXCIpKSl9cmVzZXRNZWRpYVN0cmVhbUNvbnN0cmFpbnRzKCl7eGUodGhpcyxaZSx0aGlzLmRlZmF1bHRDb25zdHJhaW50cz9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuZGVmYXVsdENvbnN0cmFpbnRzKSk6bnVsbCxcImZcIil9Z2V0Q2FtZXJhQ2FwYWJpbGl0aWVzKCl7aWYoIWJlKHRoaXMsemUsXCJmXCIpfHxcIm9wZW5lZFwiIT09dGhpcy5zdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJDYW1lcmEgaXMgbm90IG9wZW4uXCIpO3JldHVybiBiZSh0aGlzLHplLFwiZlwiKS5nZXRDYXBhYmlsaXRpZXM/YmUodGhpcyx6ZSxcImZcIikuZ2V0Q2FwYWJpbGl0aWVzKCk6e319Z2V0Q2FtZXJhU2V0dGluZ3MoKXtpZighYmUodGhpcyx6ZSxcImZcIil8fFwib3BlbmVkXCIhPT10aGlzLnN0YXRlKXRocm93IG5ldyBFcnJvcihcIkNhbWVyYSBpcyBub3Qgb3Blbi5cIik7cmV0dXJuIGJlKHRoaXMsemUsXCJmXCIpLmdldFNldHRpbmdzKCl9YXN5bmMgdHVybk9uVG9yY2goKXtpZighYmUodGhpcyx6ZSxcImZcIil8fFwib3BlbmVkXCIhPT10aGlzLnN0YXRlKXRocm93IG5ldyBFcnJvcihcIkNhbWVyYSBpcyBub3Qgb3Blbi5cIik7Y29uc3QgdD10aGlzLmdldENhbWVyYUNhcGFiaWxpdGllcygpO2lmKCEobnVsbD09dD92b2lkIDA6dC50b3JjaCkpdGhyb3cgRXJyb3IoXCJOb3Qgc3VwcG9ydGVkLlwiKTthd2FpdCBiZSh0aGlzLHplLFwiZlwiKS5hcHBseUNvbnN0cmFpbnRzKHthZHZhbmNlZDpbe3RvcmNoOiEwfV19KX1hc3luYyB0dXJuT2ZmVG9yY2goKXtpZighYmUodGhpcyx6ZSxcImZcIil8fFwib3BlbmVkXCIhPT10aGlzLnN0YXRlKXRocm93IG5ldyBFcnJvcihcIkNhbWVyYSBpcyBub3Qgb3Blbi5cIik7Y29uc3QgdD10aGlzLmdldENhbWVyYUNhcGFiaWxpdGllcygpO2lmKCEobnVsbD09dD92b2lkIDA6dC50b3JjaCkpdGhyb3cgRXJyb3IoXCJOb3Qgc3VwcG9ydGVkLlwiKTthd2FpdCBiZSh0aGlzLHplLFwiZlwiKS5hcHBseUNvbnN0cmFpbnRzKHthZHZhbmNlZDpbe3RvcmNoOiExfV19KX1hc3luYyBzZXRDb2xvclRlbXBlcmF0dXJlKHQsZSl7dmFyIGk7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgJ3ZhbHVlJy5cIik7aWYoIWJlKHRoaXMsemUsXCJmXCIpfHxcIm9wZW5lZFwiIT09dGhpcy5zdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJDYW1lcmEgaXMgbm90IG9wZW4uXCIpO2NvbnN0IHI9bnVsbD09PShpPXRoaXMuZ2V0Q2FtZXJhQ2FwYWJpbGl0aWVzKCkpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmNvbG9yVGVtcGVyYXR1cmU7aWYoIXIpdGhyb3cgRXJyb3IoXCJOb3Qgc3VwcG9ydGVkLlwiKTtyZXR1cm4gZSYmKHQ8ci5taW4/dD1yLm1pbjp0PnIubWF4JiYodD1yLm1heCksdD1NaSh0LHIubWluLHIuc3RlcCxyLm1heCkpLGF3YWl0IGJlKHRoaXMsemUsXCJmXCIpLmFwcGx5Q29uc3RyYWludHMoe2FkdmFuY2VkOlt7Y29sb3JUZW1wZXJhdHVyZTp0LHdoaXRlQmFsYW5jZU1vZGU6XCJtYW51YWxcIn1dfSksdH1nZXRDb2xvclRlbXBlcmF0dXJlKCl7cmV0dXJuIHRoaXMuZ2V0Q2FtZXJhU2V0dGluZ3MoKS5jb2xvclRlbXBlcmF0dXJlfHwwfWFzeW5jIHNldEV4cG9zdXJlQ29tcGVuc2F0aW9uKHQsZSl7dmFyIGk7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgJ3ZhbHVlJy5cIik7aWYoIWJlKHRoaXMsemUsXCJmXCIpfHxcIm9wZW5lZFwiIT09dGhpcy5zdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJDYW1lcmEgaXMgbm90IG9wZW4uXCIpO2NvbnN0IHI9bnVsbD09PShpPXRoaXMuZ2V0Q2FtZXJhQ2FwYWJpbGl0aWVzKCkpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmV4cG9zdXJlQ29tcGVuc2F0aW9uO2lmKCFyKXRocm93IEVycm9yKFwiTm90IHN1cHBvcnRlZC5cIik7cmV0dXJuIGUmJih0PHIubWluP3Q9ci5taW46dD5yLm1heCYmKHQ9ci5tYXgpLHQ9TWkodCxyLm1pbixyLnN0ZXAsci5tYXgpKSxhd2FpdCBiZSh0aGlzLHplLFwiZlwiKS5hcHBseUNvbnN0cmFpbnRzKHthZHZhbmNlZDpbe2V4cG9zdXJlQ29tcGVuc2F0aW9uOnR9XX0pLHR9Z2V0RXhwb3N1cmVDb21wZW5zYXRpb24oKXtyZXR1cm4gdGhpcy5nZXRDYW1lcmFTZXR0aW5ncygpLmV4cG9zdXJlQ29tcGVuc2F0aW9ufHwwfWFzeW5jIHNldEZyYW1lUmF0ZSh0LGUpe3ZhciBpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICd2YWx1ZScuXCIpO2lmKCFiZSh0aGlzLHplLFwiZlwiKXx8XCJvcGVuZWRcIiE9PXRoaXMuc3RhdGUpdGhyb3cgbmV3IEVycm9yKFwiQ2FtZXJhIGlzIG5vdCBvcGVuLlwiKTtsZXQgcj1udWxsPT09KGk9dGhpcy5nZXRDYW1lcmFDYXBhYmlsaXRpZXMoKSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZnJhbWVSYXRlO2lmKCFyKXRocm93IEVycm9yKFwiTm90IHN1cHBvcnRlZC5cIik7ZSYmKHQ8ci5taW4/dD1yLm1pbjp0PnIubWF4JiYodD1yLm1heCkpO2NvbnN0IG49dGhpcy5nZXRSZXNvbHV0aW9uKCk7cmV0dXJuIGF3YWl0IGJlKHRoaXMsemUsXCJmXCIpLmFwcGx5Q29uc3RyYWludHMoe3dpZHRoOntpZGVhbDpNYXRoLm1heChuLndpZHRoLG4uaGVpZ2h0KX0sZnJhbWVSYXRlOnR9KSx0fWdldEZyYW1lUmF0ZSgpe3JldHVybiB0aGlzLmdldENhbWVyYVNldHRpbmdzKCkuZnJhbWVSYXRlfWFzeW5jIHNldEZvY3VzKHQsZSl7aWYoXCJvYmplY3RcIiE9dHlwZW9mIHR8fEFycmF5LmlzQXJyYXkodCl8fG51bGw9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgJ3NldHRpbmdzJy5cIik7aWYoIWJlKHRoaXMsemUsXCJmXCIpfHxcIm9wZW5lZFwiIT09dGhpcy5zdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJDYW1lcmEgaXMgbm90IG9wZW4uXCIpO2NvbnN0IGk9dGhpcy5nZXRDYW1lcmFDYXBhYmlsaXRpZXMoKSxyPW51bGw9PWk/dm9pZCAwOmkuZm9jdXNNb2RlLG49bnVsbD09aT92b2lkIDA6aS5mb2N1c0Rpc3RhbmNlO2lmKCFyKXRocm93IEVycm9yKFwiTm90IHN1cHBvcnRlZC5cIik7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIHQubW9kZSl0aHJvdyBUeXBlRXJyb3IoXCJJbnZhbGlkICdtb2RlJy5cIik7Y29uc3Qgcz10Lm1vZGUudG9Mb3dlckNhc2UoKTtpZighci5pbmNsdWRlcyhzKSl0aHJvdyBFcnJvcihcIlVuc3VwcG9ydGVkIGZvY3VzIG1vZGUuXCIpO2lmKFwibWFudWFsXCI9PT1zKXtpZighbil0aHJvdyBFcnJvcihcIk1hbnVhbCBmb2N1cyB1bnN1cHBvcnRlZC5cIik7aWYodC5oYXNPd25Qcm9wZXJ0eShcImRpc3RhbmNlXCIpKXtsZXQgaT10LmRpc3RhbmNlO2UmJihpPG4ubWluP2k9bi5taW46aT5uLm1heCYmKGk9bi5tYXgpLGk9TWkoaSxuLm1pbixuLnN0ZXAsbi5tYXgpKSx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZm9jdXNBcmVhPW51bGwsYXdhaXQgYmUodGhpcyx6ZSxcImZcIikuYXBwbHlDb25zdHJhaW50cyh7YWR2YW5jZWQ6W3tmb2N1c01vZGU6cyxmb2N1c0Rpc3RhbmNlOml9XX0pfWVsc2V7aWYoIXQuYXJlYSl0aHJvdyBuZXcgRXJyb3IoXCInZGlzdGFuY2UnIG9yICdhcmVhJyBzaG91bGQgYmUgc3BlY2lmaWVkIGluICdtYW51YWwnIG1vZGUuXCIpO3tjb25zdCBlPXQuYXJlYS5jZW50ZXJQb2ludDtsZXQgaT10LmFyZWEud2lkdGgscj10LmFyZWEuaGVpZ2h0O2lmKCFpfHwhcil7Y29uc3QgdD10aGlzLmdldFJlc29sdXRpb24oKTtpfHwoaT0yKk1hdGgucm91bmQoTWF0aC5taW4odC53aWR0aCx0LmhlaWdodCkvdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmRlZmF1bHRGb2N1c0FyZWFTaXplUmF0aW8vMikrXCJweFwiKSxyfHwocj0yKk1hdGgucm91bmQoTWF0aC5taW4odC53aWR0aCx0LmhlaWdodCkvdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmRlZmF1bHRGb2N1c0FyZWFTaXplUmF0aW8vMikrXCJweFwiKX10aGlzLl9mb2N1c1BhcmFtZXRlcnMuZm9jdXNBcmVhPXtjZW50ZXJQb2ludDp7eDplLngseTplLnl9LHdpZHRoOmksaGVpZ2h0OnJ9LGF3YWl0IGJlKHRoaXMsSGUsXCJtXCIsQWkpLmNhbGwodGhpcyxlLGkscil9fX1lbHNlIHRoaXMuX2ZvY3VzUGFyYW1ldGVycy5mb2N1c0FyZWE9bnVsbCxhd2FpdCBiZSh0aGlzLHplLFwiZlwiKS5hcHBseUNvbnN0cmFpbnRzKHthZHZhbmNlZDpbe2ZvY3VzTW9kZTpzfV19KX1nZXRGb2N1cygpe2NvbnN0IHQ9dGhpcy5nZXRDYW1lcmFTZXR0aW5ncygpLGU9dC5mb2N1c01vZGU7cmV0dXJuIGU/XCJtYW51YWxcIj09PWU/dGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZvY3VzQXJlYT97bW9kZTpcIm1hbnVhbFwiLGFyZWE6SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZm9jdXNBcmVhKSl9Onttb2RlOlwibWFudWFsXCIsZGlzdGFuY2U6dC5mb2N1c0Rpc3RhbmNlfTp7bW9kZTplfTpudWxsfWFzeW5jIGVuYWJsZVRhcFRvRm9jdXMoKXt4ZSh0aGlzLHNpLCEwLFwiZlwiKX1kaXNhYmxlVGFwVG9Gb2N1cygpe3hlKHRoaXMsc2ksITEsXCJmXCIpfWlzVGFwVG9Gb2N1c0VuYWJsZWQoKXtyZXR1cm4gYmUodGhpcyxzaSxcImZcIil9YXN5bmMgc2V0Wm9vbSh0KXtpZihcIm9iamVjdFwiIT10eXBlb2YgdHx8QXJyYXkuaXNBcnJheSh0KXx8bnVsbD09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAnc2V0dGluZ3MnLlwiKTtpZihcIm51bWJlclwiIT10eXBlb2YgdC5mYWN0b3IpdGhyb3cgbmV3IFR5cGVFcnJvcihcIklsbGVnYWwgdHlwZSBvZiAnZmFjdG9yJy5cIik7aWYodC5mYWN0b3I8MSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgJ2ZhY3RvcicuXCIpO2lmKFwib3BlbmVkXCIhPT10aGlzLnN0YXRlKXRocm93IG5ldyBFcnJvcihcIlZpZGVvIGlzIG5vdCBwbGF5aW5nLlwiKTt0LmNlbnRlclBvaW50P2JlKHRoaXMsSGUsXCJtXCIsSWkpLmNhbGwodGhpcyx0LmNlbnRlclBvaW50KTp0aGlzLnJlc2V0U2NhbGVDZW50ZXIoKTt0cnl7aWYoYmUodGhpcyxIZSxcIm1cIixMaSkuY2FsbCh0aGlzLGJlKHRoaXMsdWksXCJmXCIpKSl7Y29uc3QgZT1hd2FpdCB0aGlzLnNldEhhcmR3YXJlU2NhbGUodC5mYWN0b3IsITApO2xldCBpPXRoaXMuZ2V0SGFyZHdhcmVTY2FsZSgpOzE9PWkmJjEhPWUmJihpPWUpLHQuZmFjdG9yPmk/dGhpcy5zZXRTb2Z0d2FyZVNjYWxlKHQuZmFjdG9yL2kpOnRoaXMuc2V0U29mdHdhcmVTY2FsZSgxKX1lbHNlIGF3YWl0IHRoaXMuc2V0SGFyZHdhcmVTY2FsZSgxKSx0aGlzLnNldFNvZnR3YXJlU2NhbGUodC5mYWN0b3IpfWNhdGNoKGUpe2NvbnN0IGk9ZS5tZXNzYWdlfHxlO2lmKFwiTm90IHN1cHBvcnRlZC5cIiE9PWkmJlwiQ2FtZXJhIGlzIG5vdCBvcGVuLlwiIT09aSl0aHJvdyBlO3RoaXMuc2V0U29mdHdhcmVTY2FsZSh0LmZhY3Rvcil9fWdldFpvb20oKXtpZihcIm9wZW5lZFwiIT09dGhpcy5zdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJWaWRlbyBpcyBub3QgcGxheWluZy5cIik7bGV0IHQ9MTt0cnl7dD10aGlzLmdldEhhcmR3YXJlU2NhbGUoKX1jYXRjaCh0KXtpZihcIkNhbWVyYSBpcyBub3Qgb3Blbi5cIiE9PSh0Lm1lc3NhZ2V8fHQpKXRocm93IHR9cmV0dXJue2ZhY3Rvcjp0KmJlKHRoaXMsY2ksXCJmXCIpfX1hc3luYyByZXNldFpvb20oKXthd2FpdCB0aGlzLnNldFpvb20oe2ZhY3RvcjoxfSl9YXN5bmMgc2V0SGFyZHdhcmVTY2FsZSh0LGUpe3ZhciBpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICd2YWx1ZScuXCIpO2lmKHQ8MSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgJ3ZhbHVlJy5cIik7aWYoIWJlKHRoaXMsemUsXCJmXCIpfHxcIm9wZW5lZFwiIT09dGhpcy5zdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJDYW1lcmEgaXMgbm90IG9wZW4uXCIpO2NvbnN0IHI9bnVsbD09PShpPXRoaXMuZ2V0Q2FtZXJhQ2FwYWJpbGl0aWVzKCkpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnpvb207aWYoIXIpdGhyb3cgRXJyb3IoXCJOb3Qgc3VwcG9ydGVkLlwiKTtyZXR1cm4gZSYmKHQ8ci5taW4/dD1yLm1pbjp0PnIubWF4JiYodD1yLm1heCksdD1NaSh0LHIubWluLHIuc3RlcCxyLm1heCkpLGF3YWl0IGJlKHRoaXMsemUsXCJmXCIpLmFwcGx5Q29uc3RyYWludHMoe2FkdmFuY2VkOlt7em9vbTp0fV19KSx0fWdldEhhcmR3YXJlU2NhbGUoKXtyZXR1cm4gdGhpcy5nZXRDYW1lcmFTZXR0aW5ncygpLnpvb218fDF9c2V0U29mdHdhcmVTY2FsZSh0LGUpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICd2YWx1ZScuXCIpO2lmKHQ8MSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgJ3ZhbHVlJy5cIik7aWYoXCJvcGVuZWRcIiE9PXRoaXMuc3RhdGUpdGhyb3cgbmV3IEVycm9yKFwiVmlkZW8gaXMgbm90IHBsYXlpbmcuXCIpO2UmJmJlKHRoaXMsSGUsXCJtXCIsSWkpLmNhbGwodGhpcyxlKSx4ZSh0aGlzLGNpLHQsXCJmXCIpLHRoaXMudXBkYXRlVmlkZW9FbFdoZW5Tb2Z0d2FyZVNjYWxlZCgpfWdldFNvZnR3YXJlU2NhbGUoKXtyZXR1cm4gYmUodGhpcyxjaSxcImZcIil9cmVzZXRTY2FsZUNlbnRlcigpe2lmKFwib3BlbmVkXCIhPT10aGlzLnN0YXRlKXRocm93IG5ldyBFcnJvcihcIlZpZGVvIGlzIG5vdCBwbGF5aW5nLlwiKTtjb25zdCB0PXRoaXMuZ2V0UmVzb2x1dGlvbigpO3hlKHRoaXMsdWkse3g6dC53aWR0aC8yLHk6dC5oZWlnaHQvMn0sXCJmXCIpfXJlc2V0U29mdHdhcmVTY2FsZSgpe3RoaXMuc2V0U29mdHdhcmVTY2FsZSgxKSx0aGlzLnJlc2V0U2NhbGVDZW50ZXIoKX1nZXRGcmFtZURhdGEodCl7aWYodGhpcy5kaXNwb3NlZCl0aHJvdyBFcnJvcihcIlRoZSAnQ2FtZXJhJyBpbnN0YW5jZSBoYXMgYmVlbiBkaXNwb3NlZC5cIik7aWYoIXRoaXMuaXNWaWRlb0xvYWRlZCgpKXJldHVybiBudWxsO2lmKGJlKHRoaXMsbmksXCJmXCIpKXJldHVybiBudWxsO2NvbnN0IGU9RGF0ZS5ub3coKTtGaS5fb25Mb2cmJkZpLl9vbkxvZyhcImdldEZyYW1lRGF0YSgpIFNUQVJUOiBcIitlKTtjb25zdCBpPWJlKHRoaXMsWGUsXCJmXCIpLnZpZGVvV2lkdGgscj1iZSh0aGlzLFhlLFwiZlwiKS52aWRlb0hlaWdodDtsZXQgbj17c3g6MCxzeTowLHNXaWR0aDppLHNIZWlnaHQ6cixkV2lkdGg6aSxkSGVpZ2h0OnJ9OyhudWxsPT10P3ZvaWQgMDp0LnBvc2l0aW9uKSYmKG49SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0LnBvc2l0aW9uKSkpO2xldCBzPU1lLlJHQkE7KG51bGw9PXQ/dm9pZCAwOnQucGl4ZWxGb3JtYXQpJiYocz10LnBpeGVsRm9ybWF0KTtsZXQgbz1iZSh0aGlzLGNpLFwiZlwiKTsobnVsbD09dD92b2lkIDA6dC5zY2FsZSkmJihvPXQuc2NhbGUpO2xldCBhPWJlKHRoaXMsdWksXCJmXCIpO2lmKG51bGw9PXQ/dm9pZCAwOnQuc2NhbGVDZW50ZXIpe2lmKFwic3RyaW5nXCIhPXR5cGVvZiB0LnNjYWxlQ2VudGVyLnh8fFwic3RyaW5nXCIhPXR5cGVvZiB0LnNjYWxlQ2VudGVyLnkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzY2FsZSBjZW50ZXIuXCIpO2xldCBlPTAsbj0wO2lmKHQuc2NhbGVDZW50ZXIueC5lbmRzV2l0aChcInB4XCIpKWU9cGFyc2VGbG9hdCh0LnNjYWxlQ2VudGVyLngpO2Vsc2V7aWYoIXQuc2NhbGVDZW50ZXIueC5lbmRzV2l0aChcIiVcIikpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzY2FsZSBjZW50ZXIuXCIpO2U9cGFyc2VGbG9hdCh0LnNjYWxlQ2VudGVyLngpLzEwMCppfWlmKHQuc2NhbGVDZW50ZXIueS5lbmRzV2l0aChcInB4XCIpKW49cGFyc2VGbG9hdCh0LnNjYWxlQ2VudGVyLnkpO2Vsc2V7aWYoIXQuc2NhbGVDZW50ZXIueS5lbmRzV2l0aChcIiVcIikpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzY2FsZSBjZW50ZXIuXCIpO249cGFyc2VGbG9hdCh0LnNjYWxlQ2VudGVyLnkpLzEwMCpyfWlmKGlzTmFOKGUpfHxpc05hTihuKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHNjYWxlIGNlbnRlci5cIik7YS54PU1hdGgucm91bmQoZSksYS55PU1hdGgucm91bmQobil9bGV0IGg9bnVsbDtpZigobnVsbD09dD92b2lkIDA6dC5idWZmZXJDb250YWluZXIpJiYoaD10LmJ1ZmZlckNvbnRhaW5lciksMD09aXx8MD09cilyZXR1cm4gbnVsbDsxIT09byYmKG4uc1dpZHRoPU1hdGgucm91bmQobi5zV2lkdGgvbyksbi5zSGVpZ2h0PU1hdGgucm91bmQobi5zSGVpZ2h0L28pLG4uc3g9TWF0aC5yb3VuZCgoMS0xL28pKmEueCtuLnN4L28pLG4uc3k9TWF0aC5yb3VuZCgoMS0xL28pKmEueStuLnN5L28pKTtjb25zdCBsPXRoaXMuaW1hZ2VEYXRhR2V0dGVyLmdldEltYWdlRGF0YShiZSh0aGlzLFhlLFwiZlwiKSxpLHIsbix7cGl4ZWxGb3JtYXQ6cyxidWZmZXJDb250YWluZXI6aH0pO2lmKCFsKXJldHVybiBudWxsO2NvbnN0IGM9RGF0ZS5ub3coKTtyZXR1cm4gRmkuX29uTG9nJiZGaS5fb25Mb2coXCJnZXRGcmFtZURhdGEoKSBFTkQ6IFwiK2MpLHtkYXRhOmwuZGF0YSx3aWR0aDpsLndpZHRoLGhlaWdodDpsLmhlaWdodCxwaXhlbEZvcm1hdDpsLnBpeGVsRm9ybWF0LHRpbWVTcGVudDpjLWUsdGltZVN0YW1wOmMsdG9DYW52YXM6YmUodGhpcyxkaSxcImZcIil9fW9uKHQsZSl7aWYoIWJlKHRoaXMsZ2ksXCJmXCIpLmluY2x1ZGVzKHQudG9Mb3dlckNhc2UoKSkpdGhyb3cgbmV3IEVycm9yKGBFdmVudCAnJHt0fScgZG9lcyBub3QgZXhpc3QuYCk7YmUodGhpcyxmaSxcImZcIikub24odCxlKX1vZmYodCxlKXtiZSh0aGlzLGZpLFwiZlwiKS5vZmYodCxlKX1hc3luYyBkaXNwb3NlKCl7dGhpcy50YXBGb2N1c0V2ZW50Qm91bmRFbD1udWxsLGF3YWl0IHRoaXMuY2xvc2UoKSx0aGlzLnJlbGVhc2VWaWRlb0VsKCksYmUodGhpcyxmaSxcImZcIikuZGlzcG9zZSgpLHRoaXMuaW1hZ2VEYXRhR2V0dGVyLmRpc3Bvc2UoKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLGJlKHRoaXMsdmksXCJmXCIpKSx4ZSh0aGlzLF9pLCEwLFwiZlwiKX19dmFyIFBpLGtpLFJpLEJpLGppLFdpLFVpLFZpLEdpLE5pLFlpLEhpLFhpLHppLHFpLEtpLFppLEppLFFpLCRpLHRyLGVyLGlyLHJyLG5yLHNyLG9yLGFyLGhyLGxyLGNyLHVyLGRyLGZyLGdyO1hlPW5ldyBXZWFrTWFwLHplPW5ldyBXZWFrTWFwLHFlPW5ldyBXZWFrTWFwLEtlPW5ldyBXZWFrTWFwLFplPW5ldyBXZWFrTWFwLEplPW5ldyBXZWFrTWFwLFFlPW5ldyBXZWFrTWFwLCRlPW5ldyBXZWFrTWFwLHRpPW5ldyBXZWFrTWFwLGVpPW5ldyBXZWFrTWFwLGlpPW5ldyBXZWFrTWFwLHJpPW5ldyBXZWFrTWFwLG5pPW5ldyBXZWFrTWFwLHNpPW5ldyBXZWFrTWFwLG9pPW5ldyBXZWFrTWFwLGFpPW5ldyBXZWFrTWFwLGhpPW5ldyBXZWFrTWFwLGxpPW5ldyBXZWFrTWFwLGNpPW5ldyBXZWFrTWFwLHVpPW5ldyBXZWFrTWFwLGRpPW5ldyBXZWFrTWFwLGZpPW5ldyBXZWFrTWFwLGdpPW5ldyBXZWFrTWFwLG1pPW5ldyBXZWFrTWFwLHBpPW5ldyBXZWFrTWFwLHZpPW5ldyBXZWFrTWFwLF9pPW5ldyBXZWFrTWFwLEhlPW5ldyBXZWFrU2V0LHlpPWFzeW5jIGZ1bmN0aW9uKCl7Y29uc3QgdD10aGlzLmdldE1lZGlhU3RyZWFtQ29uc3RyYWludHMoKTtpZihcImJvb2xlYW5cIj09dHlwZW9mIHQudmlkZW8mJih0LnZpZGVvPXt9KSx0LnZpZGVvLmRldmljZUlkKTtlbHNlIGlmKGJlKHRoaXMsUWUsXCJmXCIpKWRlbGV0ZSB0LnZpZGVvLmZhY2luZ01vZGUsdC52aWRlby5kZXZpY2VJZD17ZXhhY3Q6YmUodGhpcyxRZSxcImZcIil9O2Vsc2UgaWYodGhpcy5pZlNhdmVMYXN0VXNlZENhbWVyYSYmRmkuaXNTdG9yYWdlQXZhaWxhYmxlJiZ3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJkY2VfbGFzdF9jYW1lcmFfaWRcIikpe2RlbGV0ZSB0LnZpZGVvLmZhY2luZ01vZGUsdC52aWRlby5kZXZpY2VJZD17aWRlYWw6d2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZGNlX2xhc3RfY2FtZXJhX2lkXCIpfTtjb25zdCBlPUpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZGNlX2xhc3RfYXBwbHlfd2lkdGhcIikpLGk9SlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJkY2VfbGFzdF9hcHBseV9oZWlnaHRcIikpO2UmJmkmJih0LnZpZGVvLndpZHRoPWUsdC52aWRlby5oZWlnaHQ9aSl9ZWxzZSBpZih0aGlzLmlmU2tpcENhbWVyYUluc3BlY3Rpb24pO2Vsc2V7Y29uc3QgZT1hc3luYyB0PT57bGV0IGU9bnVsbDtyZXR1cm5cImVudmlyb25tZW50XCI9PT10JiZbXCJBbmRyb2lkXCIsXCJIYXJtb255T1NcIixcImlQaG9uZVwiLFwiaVBhZFwiXS5pbmNsdWRlcyhBZS5PUyk/KGF3YWl0IHRoaXMuX2dldENhbWVyYXMoITEpLGJlKHRoaXMsSGUsXCJtXCIsd2kpLmNhbGwodGhpcyksZT1GaS5maW5kQmVzdENhbWVyYSh0aGlzLl9hcnJDYW1lcmFzLFwiZW52aXJvbm1lbnRcIix7Z2V0TWFpbkNhbWVyYUluSU9TOnRoaXMuc2VsZWN0SU9TUmVhck1haW5DYW1lcmFBc0RlZmF1bHR9KSk6dHx8W1wiQW5kcm9pZFwiLFwiSGFybW9ueU9TXCIsXCJpUGhvbmVcIixcImlQYWRcIl0uaW5jbHVkZXMoQWUuT1MpfHwoYXdhaXQgdGhpcy5fZ2V0Q2FtZXJhcyghMSksYmUodGhpcyxIZSxcIm1cIix3aSkuY2FsbCh0aGlzKSxlPUZpLmZpbmRCZXN0Q2FtZXJhKHRoaXMuX2FyckNhbWVyYXMsbnVsbCx7Z2V0TWFpbkNhbWVyYUluSU9TOnRoaXMuc2VsZWN0SU9TUmVhck1haW5DYW1lcmFBc0RlZmF1bHR9KSksZX07bGV0IGk9dC52aWRlby5mYWNpbmdNb2RlO2kgaW5zdGFuY2VvZiBBcnJheSYmaS5sZW5ndGgmJihpPWlbMF0pLFwib2JqZWN0XCI9PXR5cGVvZiBpJiYoaT1pLmV4YWN0fHxpLmlkZWFsKTtjb25zdCByPWF3YWl0IGUoaSk7ciYmKGRlbGV0ZSB0LnZpZGVvLmZhY2luZ01vZGUsdC52aWRlby5kZXZpY2VJZD17ZXhhY3Q6cn0pfXJldHVybiB0fSx3aT1mdW5jdGlvbigpe2lmKGJlKHRoaXMsZWksXCJmXCIpKXtjb25zdCB0PW5ldyBFcnJvcihcIlRoZSBvcGVyYXRpb24gd2FzIGludGVycnVwdGVkLlwiKTt0aHJvdyB0Lm5hbWU9XCJBYm9ydEVycm9yXCIsdH19LGJpPWFzeW5jIGZ1bmN0aW9uKHQpe3ZhciBlLGk7aWYoIShudWxsPT09KGk9bnVsbD09PShlPW51bGw9PT13aW5kb3d8fHZvaWQgMD09PXdpbmRvdz92b2lkIDA6d2luZG93Lm5hdmlnYXRvcil8fHZvaWQgMD09PWU/dm9pZCAwOmUubWVkaWFEZXZpY2VzKXx8dm9pZCAwPT09aT92b2lkIDA6aS5nZXRVc2VyTWVkaWEpKXRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBhY2Nlc3MgdGhlIGNhbWVyYSBiZWNhdXNlIHRoZSBicm93c2VyIGlzIHRvbyBvbGQgb3IgdGhlIHBhZ2UgaXMgbG9hZGVkIGZyb20gYW4gaW5zZWN1cmUgb3JpZ2luLlwiKTtsZXQgcjt0cnl7RmkuX29uTG9nJiZGaS5fb25Mb2coXCI9PT09PT10cnkgZ2V0VXNlck1lZGlhPT09PT09PT1cIik7bGV0IGU9WzAsNTAwLDFlMywyZTNdLGk9bnVsbDtjb25zdCBuPWFzeW5jIHQ9Pntmb3IobGV0IG4gb2YgZSl7biYmKGF3YWl0IG5ldyBQcm9taXNlKCh0PT5zZXRUaW1lb3V0KHQsbikpKSxiZSh0aGlzLEhlLFwibVwiLHdpKS5jYWxsKHRoaXMpKTt0cnl7RmkuX29uTG9nJiZGaS5fb25Mb2coXCJhc2sgXCIrSlNPTi5zdHJpbmdpZnkodCkpLHI9YXdhaXQgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEodCksYmUodGhpcyxIZSxcIm1cIix3aSkuY2FsbCh0aGlzKTticmVha31jYXRjaCh0KXtpZihcIk5vdEZvdW5kRXJyb3JcIj09PXQubmFtZXx8XCJOb3RBbGxvd2VkRXJyb3JcIj09PXQubmFtZXx8XCJBYm9ydEVycm9yXCI9PT10Lm5hbWV8fFwiT3ZlcmNvbnN0cmFpbmVkRXJyb3JcIj09PXQubmFtZSl0aHJvdyB0O2k9dCxGaS5fb25Mb2cmJkZpLl9vbkxvZyh0Lm1lc3NhZ2V8fHQpfX19O2lmKGF3YWl0IG4odCkscnx8XCJvYmplY3RcIiE9dHlwZW9mIHQudmlkZW98fCh0LnZpZGVvLmRldmljZUlkJiYoZGVsZXRlIHQudmlkZW8uZGV2aWNlSWQsYXdhaXQgbih0KSksIXImJnQudmlkZW8uZmFjaW5nTW9kZSYmKGRlbGV0ZSB0LnZpZGVvLmZhY2luZ01vZGUsYXdhaXQgbih0KSkscnx8IXQudmlkZW8ud2lkdGgmJiF0LnZpZGVvLmhlaWdodHx8KGRlbGV0ZSB0LnZpZGVvLndpZHRoLGRlbGV0ZSB0LnZpZGVvLmhlaWdodCxhd2FpdCBuKHQpKSksIXIpdGhyb3cgaTtyZXR1cm4gcn1jYXRjaCh0KXt0aHJvdyBudWxsPT1yfHxyLmdldFRyYWNrcygpLmZvckVhY2goKHQ9Pnt0LnN0b3AoKX0pKSxcIk5vdEZvdW5kRXJyb3JcIj09PXQubmFtZSYmKERPTUV4Y2VwdGlvbj90PW5ldyBET01FeGNlcHRpb24oXCJObyBjYW1lcmEgYXZhaWxhYmxlLCBwbGVhc2UgdXNlIGEgZGV2aWNlIHdpdGggYW4gYWNjZXNzaWJsZSBjYW1lcmEuXCIsdC5uYW1lKToodD1uZXcgRXJyb3IoXCJObyBjYW1lcmEgYXZhaWxhYmxlLCBwbGVhc2UgdXNlIGEgZGV2aWNlIHdpdGggYW4gYWNjZXNzaWJsZSBjYW1lcmEuXCIpKS5uYW1lPVwiTm90Rm91bmRFcnJvclwiKSx0fX0seGk9ZnVuY3Rpb24oKXt0aGlzLl9tZWRpYVN0cmVhbSYmKHRoaXMuX21lZGlhU3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goKHQ9Pnt0LnN0b3AoKX0pKSx0aGlzLl9tZWRpYVN0cmVhbT1udWxsKSx4ZSh0aGlzLHplLG51bGwsXCJmXCIpfSxDaT1hc3luYyBmdW5jdGlvbigpe3hlKHRoaXMsZWksITEsXCJmXCIpO2NvbnN0IHQ9eGUodGhpcyx0aSxTeW1ib2woKSxcImZcIik7aWYoYmUodGhpcyxpaSxcImZcIikmJlwicGVuZGluZ1wiPT09YmUodGhpcyxyaSxcImZcIikpe3RyeXthd2FpdCBiZSh0aGlzLGlpLFwiZlwiKX1jYXRjaCh0KXt9YmUodGhpcyxIZSxcIm1cIix3aSkuY2FsbCh0aGlzKX1pZih0IT09YmUodGhpcyx0aSxcImZcIikpcmV0dXJuO2NvbnN0IGU9eGUodGhpcyxpaSwoYXN5bmMoKT0+e3hlKHRoaXMscmksXCJwZW5kaW5nXCIsXCJmXCIpO3RyeXtpZih0aGlzLnZpZGVvU3JjKXtpZighYmUodGhpcyxYZSxcImZcIikpdGhyb3cgbmV3IEVycm9yKFwiJ3ZpZGVvRWwnIHNob3VsZCBiZSBzZXQuXCIpO2F3YWl0IEZpLnBsYXlWaWRlbyhiZSh0aGlzLFhlLFwiZlwiKSx0aGlzLnZpZGVvU3JjLHRoaXMuY2FtZXJhT3BlblRpbWVvdXQpLGJlKHRoaXMsSGUsXCJtXCIsd2kpLmNhbGwodGhpcyl9ZWxzZXtsZXQgdD1hd2FpdCBiZSh0aGlzLEhlLFwibVwiLHlpKS5jYWxsKHRoaXMpO2JlKHRoaXMsSGUsXCJtXCIseGkpLmNhbGwodGhpcyk7bGV0IGU9YXdhaXQgYmUodGhpcyxIZSxcIm1cIixiaSkuY2FsbCh0aGlzLHQpO2F3YWl0IHRoaXMuX2dldENhbWVyYXMoITEpLGJlKHRoaXMsSGUsXCJtXCIsd2kpLmNhbGwodGhpcyk7Y29uc3QgaT0oKT0+e2NvbnN0IHQ9ZS5nZXRWaWRlb1RyYWNrcygpO2xldCBpLHI7aWYodC5sZW5ndGgmJihpPXRbMF0pLGkpe2NvbnN0IHQ9aS5nZXRTZXR0aW5ncygpO2lmKHQpZm9yKGxldCBlIG9mIHRoaXMuX2FyckNhbWVyYXMpaWYodC5kZXZpY2VJZD09PWUuZGV2aWNlSWQpe2UuX2NoZWNrZWQ9ITAsZS5sYWJlbD1pLmxhYmVsLHI9ZTticmVha319cmV0dXJuIHJ9LHI9YmUodGhpcyxaZSxcImZcIik7aWYoXCJvYmplY3RcIj09dHlwZW9mIHIudmlkZW8pe2xldCBuPXIudmlkZW8uZmFjaW5nTW9kZTtpZihuIGluc3RhbmNlb2YgQXJyYXkmJm4ubGVuZ3RoJiYobj1uWzBdKSxcIm9iamVjdFwiPT10eXBlb2YgbiYmKG49bi5leGFjdHx8bi5pZGVhbCksIShiZSh0aGlzLFFlLFwiZlwiKXx8dGhpcy5pZlNhdmVMYXN0VXNlZENhbWVyYSYmRmkuaXNTdG9yYWdlQXZhaWxhYmxlJiZ3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJkY2VfbGFzdF9jYW1lcmFfaWRcIil8fHRoaXMuaWZTa2lwQ2FtZXJhSW5zcGVjdGlvbnx8ci52aWRlby5kZXZpY2VJZCkpe2NvbnN0IHI9aSgpLHM9RmkuZmluZEJlc3RDYW1lcmEodGhpcy5fYXJyQ2FtZXJhcyxuLHtnZXRNYWluQ2FtZXJhSW5JT1M6dGhpcy5zZWxlY3RJT1NSZWFyTWFpbkNhbWVyYUFzRGVmYXVsdH0pO3MmJnMhPShudWxsPT1yP3ZvaWQgMDpyLmRldmljZUlkKSYmKGUuZ2V0VHJhY2tzKCkuZm9yRWFjaCgodD0+e3Quc3RvcCgpfSkpLHQudmlkZW8uZGV2aWNlSWQ9e2V4YWN0OnN9LGU9YXdhaXQgYmUodGhpcyxIZSxcIm1cIixiaSkuY2FsbCh0aGlzLHQpLGJlKHRoaXMsSGUsXCJtXCIsd2kpLmNhbGwodGhpcykpfX1jb25zdCBuPWkoKTsobnVsbD09bj92b2lkIDA6bi5kZXZpY2VJZCkmJih4ZSh0aGlzLFFlLG4mJm4uZGV2aWNlSWQsXCJmXCIpLHRoaXMuaWZTYXZlTGFzdFVzZWRDYW1lcmEmJkZpLmlzU3RvcmFnZUF2YWlsYWJsZSYmKHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImRjZV9sYXN0X2NhbWVyYV9pZFwiLGJlKHRoaXMsUWUsXCJmXCIpKSxcIm9iamVjdFwiPT10eXBlb2YgdC52aWRlbyYmdC52aWRlby53aWR0aCYmdC52aWRlby5oZWlnaHQmJih3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJkY2VfbGFzdF9hcHBseV93aWR0aFwiLEpTT04uc3RyaW5naWZ5KHQudmlkZW8ud2lkdGgpKSx3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJkY2VfbGFzdF9hcHBseV9oZWlnaHRcIixKU09OLnN0cmluZ2lmeSh0LnZpZGVvLmhlaWdodCkpKSkpLGJlKHRoaXMsWGUsXCJmXCIpJiYoYXdhaXQgRmkucGxheVZpZGVvKGJlKHRoaXMsWGUsXCJmXCIpLGUsdGhpcy5jYW1lcmFPcGVuVGltZW91dCksYmUodGhpcyxIZSxcIm1cIix3aSkuY2FsbCh0aGlzKSksdGhpcy5fbWVkaWFTdHJlYW09ZTtjb25zdCBzPWUuZ2V0VmlkZW9UcmFja3MoKTsobnVsbD09cz92b2lkIDA6cy5sZW5ndGgpJiZ4ZSh0aGlzLHplLHNbMF0sXCJmXCIpLHhlKHRoaXMsSmUsbixcImZcIil9fWNhdGNoKHQpe3Rocm93IGJlKHRoaXMsSGUsXCJtXCIsVGkpLmNhbGwodGhpcykseGUodGhpcyxyaSxudWxsLFwiZlwiKSx0fXhlKHRoaXMscmksXCJmdWxmaWxsZWRcIixcImZcIil9KSgpLFwiZlwiKTtyZXR1cm4gZX0sU2k9YXN5bmMgZnVuY3Rpb24oKXt2YXIgdDtpZihcImNsb3NlZFwiPT09dGhpcy5zdGF0ZXx8dGhpcy52aWRlb1NyYylyZXR1cm47Y29uc3QgZT1udWxsPT09KHQ9YmUodGhpcyxKZSxcImZcIikpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmRldmljZUlkLGk9dGhpcy5nZXRSZXNvbHV0aW9uKCk7YXdhaXQgYmUodGhpcyxIZSxcIm1cIixDaSkuY2FsbCh0aGlzKTtjb25zdCByPXRoaXMuZ2V0UmVzb2x1dGlvbigpO2UmJmUhPT1iZSh0aGlzLEplLFwiZlwiKS5kZXZpY2VJZCYmYmUodGhpcyxmaSxcImZcIikuZmlyZShcImNhbWVyYTpjaGFuZ2VkXCIsW2JlKHRoaXMsSmUsXCJmXCIpLmRldmljZUlkLGVdLHt0YXJnZXQ6dGhpcyxhc3luYzohMX0pLGkud2lkdGg9PXIud2lkdGgmJmkuaGVpZ2h0PT1yLmhlaWdodHx8YmUodGhpcyxmaSxcImZcIikuZmlyZShcInJlc29sdXRpb246Y2hhbmdlZFwiLFt7d2lkdGg6ci53aWR0aCxoZWlnaHQ6ci5oZWlnaHR9LHt3aWR0aDppLndpZHRoLGhlaWdodDppLmhlaWdodH1dLHt0YXJnZXQ6dGhpcyxhc3luYzohMX0pLGJlKHRoaXMsZmksXCJmXCIpLmZpcmUoXCJwbGF5ZWRcIixudWxsLHt0YXJnZXQ6dGhpcyxhc3luYzohMX0pfSxUaT1mdW5jdGlvbigpe2JlKHRoaXMsSGUsXCJtXCIseGkpLmNhbGwodGhpcykseGUodGhpcyxKZSxudWxsLFwiZlwiKSxiZSh0aGlzLFhlLFwiZlwiKSYmKGJlKHRoaXMsWGUsXCJmXCIpLnNyY09iamVjdD1udWxsLHRoaXMudmlkZW9TcmMmJihiZSh0aGlzLFhlLFwiZlwiKS5wYXVzZSgpLGJlKHRoaXMsWGUsXCJmXCIpLmN1cnJlbnRUaW1lPTApKSx4ZSh0aGlzLGVpLCEwLFwiZlwiKTt0cnl7dGhpcy5yZXNldFNvZnR3YXJlU2NhbGUoKX1jYXRjaCh0KXt9fSxFaT1hc3luYyBmdW5jdGlvbiB0KGUsaSl7Y29uc3Qgcj10PT57aWYoIWJlKHRoaXMsemUsXCJmXCIpfHwhdGhpcy5pc1ZpZGVvUGxheWluZ3x8dC5mb2N1c1Rhc2tJZCE9dGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmN1ckZvY3VzVGFza0lkKXtiZSh0aGlzLHplLFwiZlwiKSYmdGhpcy5pc1ZpZGVvUGxheWluZ3x8KHRoaXMuX2ZvY3VzUGFyYW1ldGVycy5pc0RvaW5nRm9jdXM9MCk7Y29uc3QgZT1uZXcgRXJyb3IoYEZvY3VzIHRhc2sgJHt0LmZvY3VzVGFza0lkfSBjYW5jZWxlZC5gKTt0aHJvdyBlLm5hbWU9XCJEZXByZWNhdGVkVGFza0Vycm9yXCIsZX0xPT09dGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmlzRG9pbmdGb2N1cyYmRGF0ZS5ub3coKS10LnRpbWVTdGFydD50aGlzLl9mb2N1c1BhcmFtZXRlcnMuZm9jdXNDYW5jZWxhYmxlVGltZSYmKHRoaXMuX2ZvY3VzUGFyYW1ldGVycy5pc0RvaW5nRm9jdXM9LTEpfTtsZXQgbjtpPU1pKGksdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZkcy5taW4sdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZkcy5zdGVwLHRoaXMuX2ZvY3VzUGFyYW1ldGVycy5mZHMubWF4KSxhd2FpdCBiZSh0aGlzLHplLFwiZlwiKS5hcHBseUNvbnN0cmFpbnRzKHthZHZhbmNlZDpbe2ZvY3VzTW9kZTpcIm1hbnVhbFwiLGZvY3VzRGlzdGFuY2U6aX1dfSkscihlKSxuPW51bGw9PXRoaXMuX2ZvY3VzUGFyYW1ldGVycy5vbGREaXN0YW5jZT90aGlzLl9mb2N1c1BhcmFtZXRlcnMua1RpbWVvdXQqTWF0aC5tYXgoTWF0aC5hYnMoMS90aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLm1pbi0xL2kpLE1hdGguYWJzKDEvdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZkcy5tYXgtMS9pKSkrdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLm1pblRpbWVvdXQ6dGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmtUaW1lb3V0Kk1hdGguYWJzKDEvdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLm9sZERpc3RhbmNlLTEvaSkrdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLm1pblRpbWVvdXQsdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLm9sZERpc3RhbmNlPWksYXdhaXQgbmV3IFByb21pc2UoKHQ9PntzZXRUaW1lb3V0KHQsbil9KSkscihlKTtsZXQgcz1lLmZvY3VzTC1lLmZvY3VzVy8yLG89ZS5mb2N1c1QtZS5mb2N1c0gvMixhPWUuZm9jdXNXLGg9ZS5mb2N1c0g7Y29uc3QgbD10aGlzLmdldFJlc29sdXRpb24oKTtzPU1hdGgucm91bmQocyksbz1NYXRoLnJvdW5kKG8pLGE9TWF0aC5yb3VuZChhKSxoPU1hdGgucm91bmQoaCksYT5sLndpZHRoJiYoYT1sLndpZHRoKSxoPmwuaGVpZ2h0JiYoaD1sLmhlaWdodCksczwwP3M9MDpzK2E+bC53aWR0aCYmKHM9bC53aWR0aC1hKSxvPDA/bz0wOm8raD5sLmhlaWdodCYmKG89bC5oZWlnaHQtaCk7Y29uc3QgYz00Kmwud2lkdGgqbC5oZWlnaHQqdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmRlZmF1bHRUZW1wQnVmZmVyQ29udGFpbmVyTGVuUmF0aW8sdT00KmEqaDtsZXQgZD10aGlzLl9mb2N1c1BhcmFtZXRlcnMudGVtcEJ1ZmZlckNvbnRhaW5lcjtpZihkKXtjb25zdCB0PWQubGVuZ3RoO2M+dCYmYz49dT9kPW5ldyBVaW50OEFycmF5KGMpOnU+dCYmdT49YyYmKGQ9bmV3IFVpbnQ4QXJyYXkodSkpfWVsc2UgZD10aGlzLl9mb2N1c1BhcmFtZXRlcnMudGVtcEJ1ZmZlckNvbnRhaW5lcj1uZXcgVWludDhBcnJheShNYXRoLm1heChjLHUpKTtpZighdGhpcy5pbWFnZURhdGFHZXR0ZXIuZ2V0SW1hZ2VEYXRhKGJlKHRoaXMsWGUsXCJmXCIpLGwud2lkdGgsbC5oZWlnaHQse3N4OnMsc3k6byxzV2lkdGg6YSxzSGVpZ2h0OmgsZFdpZHRoOmEsZEhlaWdodDpofSx7cGl4ZWxGb3JtYXQ6TWUuUkdCQSxidWZmZXJDb250YWluZXI6ZH0pKXJldHVybiBiZSh0aGlzLEhlLFwibVwiLHQpLmNhbGwodGhpcyxlLGkpO2NvbnN0IGY9ZDtsZXQgZz0wO2ZvcihsZXQgdD0wLGU9dS04O3Q8ZTsrK3Qpe2xldCBlPWZbdF0tZlt0KzhdOysrdDtsZXQgaT1mW3RdLWZbdCs4XTsrK3Q7bGV0IHI9Zlt0XS1mW3QrOF07Kyt0LGcrPWUqZStpKmkrcipyfXJldHVybi1nfSxPaT1hc3luYyBmdW5jdGlvbiB0KGUsaSxyLG4scyxvLGEpe2xldCBoO2lmKGk9TWkoaSx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLm1pbix0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLnN0ZXAsdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZkcy5tYXgpLG49TWkobix0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLm1pbix0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLnN0ZXAsdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZkcy5tYXgpLG8/bz1NaShvLHRoaXMuX2ZvY3VzUGFyYW1ldGVycy5mZHMubWluLHRoaXMuX2ZvY3VzUGFyYW1ldGVycy5mZHMuc3RlcCx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLm1heCk6KG89TWkoTWF0aC5zcXJ0KChpfHx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLnN0ZXApKihufHx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLnN0ZXApKSx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLm1pbix0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLnN0ZXAsdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZkcy5tYXgpLGE9YXdhaXQgYmUodGhpcyxIZSxcIm1cIixFaSkuY2FsbCh0aGlzLGUsbykpLGE8PXImJmE8PXM/aD0zOnI8cyYmcjxhP2g9MTpzPHImJnM8YSYmKGg9MiksKG4taSkvMjw9dGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZkcy5zdGVwKXJldHVybiAzPT09aHx8KDE9PT1oP2F3YWl0IGJlKHRoaXMsemUsXCJmXCIpLmFwcGx5Q29uc3RyYWludHMoe2FkdmFuY2VkOlt7Zm9jdXNNb2RlOlwibWFudWFsXCIsZm9jdXNEaXN0YW5jZTppfV19KToyPT09aCYmYXdhaXQgYmUodGhpcyx6ZSxcImZcIikuYXBwbHlDb25zdHJhaW50cyh7YWR2YW5jZWQ6W3tmb2N1c01vZGU6XCJtYW51YWxcIixmb2N1c0Rpc3RhbmNlOm59XX0pKSwhMDtpZigxPT09aClyZXR1cm4gYXdhaXQgYmUodGhpcyxIZSxcIm1cIix0KS5jYWxsKHRoaXMsZSxpLHIsbyxhKTtpZigyPT09aClyZXR1cm4gYXdhaXQgYmUodGhpcyxIZSxcIm1cIix0KS5jYWxsKHRoaXMsZSxvLGEsbixzKTtpZigzIT09aClyZXR1cm4gcj1hd2FpdCBiZSh0aGlzLEhlLFwibVwiLEVpKS5jYWxsKHRoaXMsZSxpKSxzPWF3YWl0IGJlKHRoaXMsSGUsXCJtXCIsRWkpLmNhbGwodGhpcyxlLG4pLGF3YWl0IGJlKHRoaXMsSGUsXCJtXCIsdCkuY2FsbCh0aGlzLGUsaSxyLG4scyk7bGV0IGw9TWkoTWF0aC5zcXJ0KChpfHx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLnN0ZXApKihvfHx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLnN0ZXApKSx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLm1pbix0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLnN0ZXAsdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZkcy5tYXgpLGM9TWkoTWF0aC5zcXJ0KChufHx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLnN0ZXApKihvfHx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLnN0ZXApKSx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLm1pbix0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLnN0ZXAsdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZkcy5tYXgpO2lmKE1hdGguYWJzKDEvdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLm9sZERpc3RhbmNlLTEvbCk8PU1hdGguYWJzKDEvdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLm9sZERpc3RhbmNlLTEvYykpe2xldCBoPWF3YWl0IGJlKHRoaXMsSGUsXCJtXCIsRWkpLmNhbGwodGhpcyxlLGwpO2lmKGg8YSlyZXR1cm4gYXdhaXQgYmUodGhpcyxIZSxcIm1cIix0KS5jYWxsKHRoaXMsZSxpLHIsbyxhLGwsaCk7aWYoaD09YSlyZXR1cm4gYXdhaXQgYmUodGhpcyxIZSxcIm1cIix0KS5jYWxsKHRoaXMsZSxsLGgsbyxhKTtsZXQgdT1hd2FpdCBiZSh0aGlzLEhlLFwibVwiLEVpKS5jYWxsKHRoaXMsZSxjKTtpZihoPmEmJmE8dSlyZXR1cm4gYXdhaXQgYmUodGhpcyxIZSxcIm1cIix0KS5jYWxsKHRoaXMsZSxsLGgsYyx1LG8sYSk7aWYoYT09dSlyZXR1cm4gYXdhaXQgYmUodGhpcyxIZSxcIm1cIix0KS5jYWxsKHRoaXMsZSxvLGEsYyx1KTtpZihhPnUpcmV0dXJuIGF3YWl0IGJlKHRoaXMsSGUsXCJtXCIsdCkuY2FsbCh0aGlzLGUsbyxhLG4scyxjLHUpfWVsc2V7bGV0IGg9YXdhaXQgYmUodGhpcyxIZSxcIm1cIixFaSkuY2FsbCh0aGlzLGUsYyk7aWYoYT5oKXJldHVybiBhd2FpdCBiZSh0aGlzLEhlLFwibVwiLHQpLmNhbGwodGhpcyxlLG8sYSxuLHMsYyxoKTtpZihhPT1oKXJldHVybiBhd2FpdCBiZSh0aGlzLEhlLFwibVwiLHQpLmNhbGwodGhpcyxlLG8sYSxjLGgpO2xldCB1PWF3YWl0IGJlKHRoaXMsSGUsXCJtXCIsRWkpLmNhbGwodGhpcyxlLGwpO2lmKHU+YSYmYTxoKXJldHVybiBhd2FpdCBiZSh0aGlzLEhlLFwibVwiLHQpLmNhbGwodGhpcyxlLGwsdSxjLGgsbyxhKTtpZih1PT1hKXJldHVybiBhd2FpdCBiZSh0aGlzLEhlLFwibVwiLHQpLmNhbGwodGhpcyxlLGwsdSxvLGEpO2lmKHU8YSlyZXR1cm4gYXdhaXQgYmUodGhpcyxIZSxcIm1cIix0KS5jYWxsKHRoaXMsZSxpLHIsbyxhLGwsdSl9cmV0dXJuITF9LEFpPWFzeW5jIGZ1bmN0aW9uKHQsZSxpLHIsbil7dmFyIHM7aWYoMT09dGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmlzRG9pbmdGb2N1cylyZXR1cm4hMTtpZighdHx8XCJzdHJpbmdcIiE9dHlwZW9mIHQueHx8XCJzdHJpbmdcIiE9dHlwZW9mIHQueSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdjZW50ZXJQb2ludCcuXCIpO2lmKCFlfHxcInN0cmluZ1wiIT10eXBlb2YgZSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICd3aWR0aCcuXCIpO2lmKCFpfHxcInN0cmluZ1wiIT10eXBlb2YgaSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdoZWlnaHQnLlwiKTtjb25zdCBvPXRoaXMuZ2V0UmVzb2x1dGlvbigpO2xldCBhPTAsaD0wO2lmKHQueC5lbmRzV2l0aChcInB4XCIpKWE9cGFyc2VGbG9hdCh0LngpO2Vsc2V7aWYoIXQueC5lbmRzV2l0aChcIiVcIikpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCAnY2VudGVyUG9pbnQnLlwiKTthPXBhcnNlRmxvYXQodC54KS8xMDAqby53aWR0aH1pZih0LnkuZW5kc1dpdGgoXCJweFwiKSloPXBhcnNlRmxvYXQodC55KTtlbHNle2lmKCF0LnkuZW5kc1dpdGgoXCIlXCIpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ2NlbnRlclBvaW50Jy5cIik7aD1wYXJzZUZsb2F0KHQueSkvMTAwKm8uaGVpZ2h0fWlmKGlzTmFOKGEpfHxpc05hTihoKXx8YTwwfHxhPm8ud2lkdGh8fGg8MHx8aD5vLmhlaWdodCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdjZW50ZXJQb2ludCcuXCIpO2xldCBsPTA7aWYoZS5lbmRzV2l0aChcInB4XCIpKWw9cGFyc2VGbG9hdChlKTtlbHNle2lmKCFlLmVuZHNXaXRoKFwiJVwiKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICd3aWR0aCcuXCIpO2w9cGFyc2VGbG9hdChlKS8xMDAqby53aWR0aH1pZihpc05hTihsKXx8bDwwKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ3dpZHRoJy5cIik7bGV0IGM9MDtpZihpLmVuZHNXaXRoKFwicHhcIikpYz1wYXJzZUZsb2F0KGkpO2Vsc2V7aWYoIWkuZW5kc1dpdGgoXCIlXCIpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ2hlaWdodCcuXCIpO2M9cGFyc2VGbG9hdChpKS8xMDAqby5oZWlnaHR9aWYoaXNOYU4oYyl8fGM8MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdoZWlnaHQnLlwiKTtpZigxIT09YmUodGhpcyxjaSxcImZcIikpe2NvbnN0IHQ9YmUodGhpcyxjaSxcImZcIiksZT1iZSh0aGlzLHVpLFwiZlwiKTtsLz10LGMvPXQsYT0oMS0xL3QpKmUueCthL3QsaD0oMS0xL3QpKmUueStoL3R9aWYoIXRoaXMuX2ZvY3VzU3VwcG9ydGVkKXRocm93IG5ldyBFcnJvcihcIk1hbnVhbCBmb2N1cyB1bnN1cHBvcnRlZC5cIik7aWYoIXRoaXMuX2ZvY3VzUGFyYW1ldGVycy5mZHMmJih0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzPW51bGw9PT0ocz10aGlzLmdldENhbWVyYUNhcGFiaWxpdGllcygpKXx8dm9pZCAwPT09cz92b2lkIDA6cy5mb2N1c0Rpc3RhbmNlLCF0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzKSl0aHJvdyB0aGlzLl9mb2N1c1N1cHBvcnRlZD0hMSxuZXcgRXJyb3IoXCJNYW51YWwgZm9jdXMgdW5zdXBwb3J0ZWQuXCIpO251bGw9PXRoaXMuX2ZvY3VzUGFyYW1ldGVycy5rVGltZW91dCYmKHRoaXMuX2ZvY3VzUGFyYW1ldGVycy5rVGltZW91dD0odGhpcy5fZm9jdXNQYXJhbWV0ZXJzLm1heFRpbWVvdXQtdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLm1pblRpbWVvdXQpLygxL3RoaXMuX2ZvY3VzUGFyYW1ldGVycy5mZHMubWluLTEvdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZkcy5tYXgpKSx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuaXNEb2luZ0ZvY3VzPTE7Y29uc3QgdT17Zm9jdXNMOmEsZm9jdXNUOmgsZm9jdXNXOmwsZm9jdXNIOmMsZm9jdXNUYXNrSWQ6Kyt0aGlzLl9mb2N1c1BhcmFtZXRlcnMuY3VyRm9jdXNUYXNrSWQsdGltZVN0YXJ0OkRhdGUubm93KCl9LGQ9YXN5bmModCxlLGkpPT57dHJ5eyhudWxsPT1lfHxlPHRoaXMuX2ZvY3VzUGFyYW1ldGVycy5mZHMubWluKSYmKGU9dGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZkcy5taW4pLChudWxsPT1pfHxpPnRoaXMuX2ZvY3VzUGFyYW1ldGVycy5mZHMubWF4KSYmKGk9dGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZkcy5tYXgpLHRoaXMuX2ZvY3VzUGFyYW1ldGVycy5vbGREaXN0YW5jZT1udWxsO2xldCByPU1pKE1hdGguc3FydChpKihlfHx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLnN0ZXApKSx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLm1pbix0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLnN0ZXAsdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZkcy5tYXgpLG49TWkoTWF0aC5zcXJ0KChlfHx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLnN0ZXApKnIpLHRoaXMuX2ZvY3VzUGFyYW1ldGVycy5mZHMubWluLHRoaXMuX2ZvY3VzUGFyYW1ldGVycy5mZHMuc3RlcCx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLm1heCkscz1NaShNYXRoLnNxcnQocippKSx0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLm1pbix0aGlzLl9mb2N1c1BhcmFtZXRlcnMuZmRzLnN0ZXAsdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmZkcy5tYXgpLG89YXdhaXQgYmUodGhpcyxIZSxcIm1cIixFaSkuY2FsbCh0aGlzLHQscyksYT1hd2FpdCBiZSh0aGlzLEhlLFwibVwiLEVpKS5jYWxsKHRoaXMsdCxuKSxoPWF3YWl0IGJlKHRoaXMsSGUsXCJtXCIsRWkpLmNhbGwodGhpcyx0LHIpO2lmKGE+aCYmaDxvKXtjb25zdCBlPWF3YWl0IGJlKHRoaXMsSGUsXCJtXCIsT2kpLmNhbGwodGhpcyx0LG4sYSxzLG8scixoKTtyZXR1cm4gdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmlzRG9pbmdGb2N1cz0wLGV9aWYoYTxoJiZhPG8pe2xldCBpPWF3YWl0IGJlKHRoaXMsSGUsXCJtXCIsRWkpLmNhbGwodGhpcyx0LGUpO2NvbnN0IHM9YXdhaXQgYmUodGhpcyxIZSxcIm1cIixPaSkuY2FsbCh0aGlzLHQsZSxpLHIsaCxuLGEpO3JldHVybiB0aGlzLl9mb2N1c1BhcmFtZXRlcnMuaXNEb2luZ0ZvY3VzPTAsc31pZihoPm8mJmE+byl7bGV0IGU9YXdhaXQgYmUodGhpcyxIZSxcIm1cIixFaSkuY2FsbCh0aGlzLHQsaSk7Y29uc3Qgbj1hd2FpdCBiZSh0aGlzLEhlLFwibVwiLE9pKS5jYWxsKHRoaXMsdCxyLGgsaSxlLHMsbyk7cmV0dXJuIHRoaXMuX2ZvY3VzUGFyYW1ldGVycy5pc0RvaW5nRm9jdXM9MCxufWlmKGE9PWgmJmg8byl7Y29uc3QgZT1hd2FpdCBiZSh0aGlzLEhlLFwibVwiLE9pKS5jYWxsKHRoaXMsdCxuLGEscixoKTtyZXR1cm4gdGhpcy5fZm9jdXNQYXJhbWV0ZXJzLmlzRG9pbmdGb2N1cz0wLGV9aWYoaD09byYmYT5oKXtjb25zdCBlPWF3YWl0IGJlKHRoaXMsSGUsXCJtXCIsT2kpLmNhbGwodGhpcyx0LHIsaCxzLG8pO3JldHVybiB0aGlzLl9mb2N1c1BhcmFtZXRlcnMuaXNEb2luZ0ZvY3VzPTAsZX1yZXR1cm4gZCh0LGUsaSl9Y2F0Y2godCl7aWYoXCJEZXByZWNhdGVkVGFza0Vycm9yXCIhPT10Lm5hbWUpdGhyb3cgdH19O3JldHVybiBkKHUscixuKX0sSWk9ZnVuY3Rpb24odCl7aWYoXCJvcGVuZWRcIiE9PXRoaXMuc3RhdGUpdGhyb3cgbmV3IEVycm9yKFwiVmlkZW8gaXMgbm90IHBsYXlpbmcuXCIpO2lmKCF0fHxcInN0cmluZ1wiIT10eXBlb2YgdC54fHxcInN0cmluZ1wiIT10eXBlb2YgdC55KXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ2NlbnRlcicuXCIpO2NvbnN0IGU9dGhpcy5nZXRSZXNvbHV0aW9uKCk7bGV0IGk9MCxyPTA7aWYodC54LmVuZHNXaXRoKFwicHhcIikpaT1wYXJzZUZsb2F0KHQueCk7ZWxzZXtpZighdC54LmVuZHNXaXRoKFwiJVwiKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHNjYWxlIGNlbnRlci5cIik7aT1wYXJzZUZsb2F0KHQueCkvMTAwKmUud2lkdGh9aWYodC55LmVuZHNXaXRoKFwicHhcIikpcj1wYXJzZUZsb2F0KHQueSk7ZWxzZXtpZighdC55LmVuZHNXaXRoKFwiJVwiKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHNjYWxlIGNlbnRlci5cIik7cj1wYXJzZUZsb2F0KHQueSkvMTAwKmUuaGVpZ2h0fWlmKGlzTmFOKGkpfHxpc05hTihyKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHNjYWxlIGNlbnRlci5cIik7eGUodGhpcyx1aSx7eDppLHk6cn0sXCJmXCIpfSxMaT1mdW5jdGlvbih0KXtpZihcIm9wZW5lZFwiIT09dGhpcy5zdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJWaWRlbyBpcyBub3QgcGxheWluZy5cIik7Y29uc3QgZT10aGlzLmdldFJlc29sdXRpb24oKTtyZXR1cm4gdCYmdC54PT1lLndpZHRoLzImJnQueT09ZS5oZWlnaHQvMn0sRmkuYnJvd3NlckluZm89QWUsRmkub25XYXJuaW5nPW51bGw9PT0oWWU9bnVsbD09PXdpbmRvd3x8dm9pZCAwPT09d2luZG93P3ZvaWQgMDp3aW5kb3cuY29uc29sZSl8fHZvaWQgMD09PVllP3ZvaWQgMDpZZS53YXJuO2NsYXNzIG1ye2NvbnN0cnVjdG9yKHQpe1BpLmFkZCh0aGlzKSxraS5zZXQodGhpcyx2b2lkIDApLFJpLnNldCh0aGlzLDApLEJpLnNldCh0aGlzLHZvaWQgMCksamkuc2V0KHRoaXMsMCksV2kuc2V0KHRoaXMsITEpLEModGhpcyxraSx0LFwiZlwiKX1zdGFydENoYXJnaW5nKCl7eCh0aGlzLFdpLFwiZlwiKXx8KG1yLl9vbkxvZyYmbXIuX29uTG9nKFwic3RhcnQgY2hhcmdpbmcuXCIpLHgodGhpcyxQaSxcIm1cIixWaSkuY2FsbCh0aGlzKSxDKHRoaXMsV2ksITAsXCJmXCIpKX1zdG9wQ2hhcmdpbmcoKXt4KHRoaXMsQmksXCJmXCIpJiZjbGVhclRpbWVvdXQoeCh0aGlzLEJpLFwiZlwiKSkseCh0aGlzLFdpLFwiZlwiKSYmKG1yLl9vbkxvZyYmbXIuX29uTG9nKFwic3RvcCBjaGFyZ2luZy5cIiksQyh0aGlzLFJpLERhdGUubm93KCkteCh0aGlzLGppLFwiZlwiKSxcImZcIiksQyh0aGlzLFdpLCExLFwiZlwiKSl9fWtpPW5ldyBXZWFrTWFwLFJpPW5ldyBXZWFrTWFwLEJpPW5ldyBXZWFrTWFwLGppPW5ldyBXZWFrTWFwLFdpPW5ldyBXZWFrTWFwLFBpPW5ldyBXZWFrU2V0LFVpPWZ1bmN0aW9uKCl7ZC5jZmQoMSksbXIuX29uTG9nJiZtci5fb25Mb2coXCJjaGFyZ2UgMS5cIil9LFZpPWZ1bmN0aW9uIHQoKXswPT14KHRoaXMsUmksXCJmXCIpJiZ4KHRoaXMsUGksXCJtXCIsVWkpLmNhbGwodGhpcyksQyh0aGlzLGppLERhdGUubm93KCksXCJmXCIpLHgodGhpcyxCaSxcImZcIikmJmNsZWFyVGltZW91dCh4KHRoaXMsQmksXCJmXCIpKSxDKHRoaXMsQmksc2V0VGltZW91dCgoKCk9PntDKHRoaXMsUmksMCxcImZcIikseCh0aGlzLFBpLFwibVwiLHQpLmNhbGwodGhpcyl9KSx4KHRoaXMsa2ksXCJmXCIpLXgodGhpcyxSaSxcImZcIikpLFwiZlwiKX07Y2xhc3MgcHJ7c3RhdGljIGJlZXAoKXtpZighdGhpcy5hbGxvd0JlZXApcmV0dXJuO2lmKCF0aGlzLmJlZXBTb3VuZFNvdXJjZSlyZXR1cm47bGV0IHQsZT1EYXRlLm5vdygpO2lmKCEoZS14KHRoaXMsR2ksXCJmXCIsSGkpPDEwMCkpe2lmKEModGhpcyxHaSxlLFwiZlwiLEhpKSx4KHRoaXMsR2ksXCJmXCIsTmkpLnNpemUmJih0PXgodGhpcyxHaSxcImZcIixOaSkudmFsdWVzKCkubmV4dCgpLnZhbHVlLHRoaXMuYmVlcFNvdW5kU291cmNlPT10LnNyYz8oeCh0aGlzLEdpLFwiZlwiLE5pKS5kZWxldGUodCksdC5wbGF5KCkpOnQ9bnVsbCksIXQpaWYoeCh0aGlzLEdpLFwiZlwiLFlpKS5zaXplPDE2KXt0PW5ldyBBdWRpbyh0aGlzLmJlZXBTb3VuZFNvdXJjZSk7bGV0IGU9bnVsbCxpPSgpPT57dC5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZGVkbWV0YWRhdGFcIixpKSx0LnBsYXkoKSxlPXNldFRpbWVvdXQoKCgpPT57eCh0aGlzLEdpLFwiZlwiLFlpKS5kZWxldGUodCl9KSwyZTMqdC5kdXJhdGlvbil9O3QuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlZG1ldGFkYXRhXCIsaSksdC5hZGRFdmVudExpc3RlbmVyKFwiZW5kZWRcIiwoKCk9PntudWxsIT1lJiYoY2xlYXJUaW1lb3V0KGUpLGU9bnVsbCksdC5wYXVzZSgpLHQuY3VycmVudFRpbWU9MCx4KHRoaXMsR2ksXCJmXCIsWWkpLmRlbGV0ZSh0KSx4KHRoaXMsR2ksXCJmXCIsTmkpLmFkZCh0KX0pKX1lbHNlIHgodGhpcyxHaSxcImZcIixYaSl8fChDKHRoaXMsR2ksITAsXCJmXCIsWGkpLGNvbnNvbGUud2FybihcIlRoZSByZXF1ZXN0ZWQgYXVkaW8gdHJhY2tzIGV4Y2VlZCAxNiBhbmQgd2lsbCBub3QgYmUgcGxheWVkLlwiKSk7dCYmeCh0aGlzLEdpLFwiZlwiLFlpKS5hZGQodCl9fXN0YXRpYyB2aWJyYXRlKCl7aWYodGhpcy5hbGxvd1ZpYnJhdGUpe2lmKCFuYXZpZ2F0b3J8fCFuYXZpZ2F0b3IudmlicmF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJOb3Qgc3VwcG9ydGVkLlwiKTtuYXZpZ2F0b3IudmlicmF0ZShwci52aWJyYXRlRHVyYXRpb24pfX19R2k9cHIsTmk9e3ZhbHVlOm5ldyBTZXR9LFlpPXt2YWx1ZTpuZXcgU2V0fSxIaT17dmFsdWU6MH0sWGk9e3ZhbHVlOiExfSxwci5hbGxvd0JlZXA9ITAscHIuYmVlcFNvdW5kU291cmNlPVwiZGF0YTphdWRpby9tcGVnO2Jhc2U2NCxTVVF6QkFBQUFBQUFJMVJUVTBVQUFBQVBBQUFEVEdGMlpqVTRMakk1TGpFd01BQUFBQUFBQUFBQUFBQUEvK000d0FBQUFBQUFBQUFBQUVsdVptOEFBQUFQQUFBQUJRQUFBa0FBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0tDZ29LQ2dvS0Nnb0tDZ29LQ2dvS0Nnb0tDZ3dNREF3TURBd01EQXdNREF3TURBd01EQXdNRGc0T0RnNE9EZzRPRGc0T0RnNE9EZzRPRGc0UC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vQUFBQUFFeGhkbU0xT0M0MU5BQUFBQUFBQUFBQUFBQUFBQ1FFVVFBQUFBQUFBQUpBazB1WFJRQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEvK01ZeEFBTlFBYkdlVUVRQUFIWllaM2ZBU3FENFA1VEtCZ29jZytCdy84K0NBWUJBNFhCOS80RUJBRVA0bkI5K1VPZi82Z2ZVQ0FJS3lqZ1EvS2YvL3dmc3dBQUF3UUEvK01ZeEFZT3FyYmRrWkdRQU1BN0RKTENzUXhOT2lqLy8vLy8vLy8vLy8rdHYvLy8zUldpWkdCRWhzZi9GTy8rTG9DU0ZzMWRGVlMvZzhmLzRNaHYwbmhxQWllSGxlTHkvK01ZeEFZT09yYk1BWTJnQUJmLy8vLy8vLy8vLy8vLy8vLy91c1BKNjZSMHdJNGJvWTkvOGpRWWcvL2cyU1B4MU0wTjNaMGtWSkxJcy8vL1V3NGFNeXZISkpZbVBCWUcvK01ZeEFnUE1BTEJ1Y0FRQW9HZ2FCb0ZRVkJVRlFXRHY2Z1pCVUZRVkJVR2dhQnI1WVNncUNvS2hJR2c3K0lRVkJVRlFWQm9HZ2EvL1NzRlNvS25mL2lWVEVGTlJUTXUvK01ZeEFZQUFBTklBQUFBQURFd01GVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZWVlZcIixwci5hbGxvd1ZpYnJhdGU9ITAscHIudmlicmF0ZUR1cmF0aW9uPTMwMDtjb25zdCB2cj1uZXcgTWFwKFtbYy5JUEZfR1JBWVNDQUxFRCxNZS5HUkVZXSxbYy5JUEZfQUJHUl84ODg4LE1lLlJHQkFdLFtjLklQRl9BUkdCXzg4ODgsTWUuQkdSQV1dKSxfcj1uZXcgTWFwKFtbTWUuR1JFWSxjLklQRl9HUkFZU0NBTEVEXSxbTWUuUkdCQSxjLklQRl9BQkdSXzg4ODhdLFtNZS5CR1JBLGMuSVBGX0FSR0JfODg4OF1dKSx5cj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBCaWdJbnQ/e0JGX05VTEw6QmlnSW50KDApLEJGX0FMTDpCaWdJbnQoMHgxMDAwMDAwMDAwMDAwMDAwMCksQkZfREVGQVVMVDpCaWdJbnQoNDI2NTM0NTAyMyksQkZfT05FRDpCaWdJbnQoMzE0Nzc3NSksQkZfR1MxX0RBVEFCQVI6QmlnSW50KDI2MDA5NiksQkZfQ09ERV8zOTpCaWdJbnQoMSksQkZfQ09ERV8xMjg6QmlnSW50KDIpLEJGX0NPREVfOTM6QmlnSW50KDQpLEJGX0NPREFCQVI6QmlnSW50KDgpLEJGX0lURjpCaWdJbnQoMTYpLEJGX0VBTl8xMzpCaWdJbnQoMzIpLEJGX0VBTl84OkJpZ0ludCg2NCksQkZfVVBDX0E6QmlnSW50KDEyOCksQkZfVVBDX0U6QmlnSW50KDI1NiksQkZfSU5EVVNUUklBTF8yNTpCaWdJbnQoNTEyKSxCRl9DT0RFXzM5X0VYVEVOREVEOkJpZ0ludCgxMDI0KSxCRl9HUzFfREFUQUJBUl9PTU5JRElSRUNUSU9OQUw6QmlnSW50KDIwNDgpLEJGX0dTMV9EQVRBQkFSX1RSVU5DQVRFRDpCaWdJbnQoNDA5NiksQkZfR1MxX0RBVEFCQVJfU1RBQ0tFRDpCaWdJbnQoODE5MiksQkZfR1MxX0RBVEFCQVJfU1RBQ0tFRF9PTU5JRElSRUNUSU9OQUw6QmlnSW50KDE2Mzg0KSxCRl9HUzFfREFUQUJBUl9FWFBBTkRFRDpCaWdJbnQoMzI3NjgpLEJGX0dTMV9EQVRBQkFSX0VYUEFOREVEX1NUQUNLRUQ6QmlnSW50KDY1NTM2KSxCRl9HUzFfREFUQUJBUl9MSU1JVEVEOkJpZ0ludCgxMzEwNzIpLEJGX1BBVENIQ09ERTpCaWdJbnQoMjYyMTQ0KSxCRl9DT0RFXzMyOkJpZ0ludCgxNjc3NzIxNiksQkZfUERGNDE3OkJpZ0ludCgzMzU1NDQzMiksQkZfUVJfQ09ERTpCaWdJbnQoNjcxMDg4NjQpLEJGX0RBVEFNQVRSSVg6QmlnSW50KDEzNDIxNzcyOCksQkZfQVpURUM6QmlnSW50KDI2ODQzNTQ1NiksQkZfTUFYSUNPREU6QmlnSW50KDUzNjg3MDkxMiksQkZfTUlDUk9fUVI6QmlnSW50KDEwNzM3NDE4MjQpLEJGX01JQ1JPX1BERjQxNzpCaWdJbnQoNTI0Mjg4KSxCRl9HUzFfQ09NUE9TSVRFOkJpZ0ludCgyMTQ3NDgzNjQ4KSxCRl9NU0lfQ09ERTpCaWdJbnQoMTA0ODU3NiksQkZfQ09ERV8xMTpCaWdJbnQoMjA5NzE1MiksQkZfVFdPX0RJR0lUX0FERF9PTjpCaWdJbnQoNDE5NDMwNCksQkZfRklWRV9ESUdJVF9BRERfT046QmlnSW50KDgzODg2MDgpLEJGX01BVFJJWF8yNTpCaWdJbnQoNjg3MTk0NzY3MzYpLEJGX1BPU1RBTENPREU6QmlnSW50KDB4M2YwMDAwMDAwMDAwMDAwKSxCRl9OT05TVEFOREFSRF9CQVJDT0RFOkJpZ0ludCg0Mjk0OTY3Mjk2KSxCRl9VU1BTSU5URUxMSUdFTlRNQUlMOkJpZ0ludCg0NTAzNTk5NjI3MzcwNDk2KSxCRl9QT1NUTkVUOkJpZ0ludCg5MDA3MTk5MjU0NzQwOTkyKSxCRl9QTEFORVQ6QmlnSW50KDB4NDAwMDAwMDAwMDAwMDApLEJGX0FVU1RSQUxJQU5QT1NUOkJpZ0ludCgweDgwMDAwMDAwMDAwMDAwKSxCRl9STTRTQ0M6QmlnSW50KDcyMDU3NTk0MDM3OTI3OTQwKSxCRl9LSVg6QmlnSW50KDB4MjAwMDAwMDAwMDAwMDAwKSxCRl9ET1RDT0RFOkJpZ0ludCg4NTg5OTM0NTkyKSxCRl9QSEFSTUFDT0RFX09ORV9UUkFDSzpCaWdJbnQoMTcxNzk4NjkxODQpLEJGX1BIQVJNQUNPREVfVFdPX1RSQUNLOkJpZ0ludCgzNDM1OTczODM2OCksQkZfUEhBUk1BQ09ERTpCaWdJbnQoNTE1Mzk2MDc1NTIpfTp7QkZfTlVMTDpcIjB4MDBcIixCRl9BTEw6XCIweEZGRkZGRkZGRkZGRkZGRkZcIixCRl9ERUZBVUxUOlwiMHhGRTNCRkZGRlwiLEJGX09ORUQ6XCIweDAwMzAwN0ZGXCIsQkZfR1MxX0RBVEFCQVI6XCIweDAwMDNGODAwXCIsQkZfQ09ERV8zOTpcIjB4MVwiLEJGX0NPREVfMTI4OlwiMHgyXCIsQkZfQ09ERV85MzpcIjB4NFwiLEJGX0NPREFCQVI6XCIweDhcIixCRl9JVEY6XCIweDEwXCIsQkZfRUFOXzEzOlwiMHgyMFwiLEJGX0VBTl84OlwiMHg0MFwiLEJGX1VQQ19BOlwiMHg4MFwiLEJGX1VQQ19FOlwiMHgxMDBcIixCRl9JTkRVU1RSSUFMXzI1OlwiMHgyMDBcIixCRl9DT0RFXzM5X0VYVEVOREVEOlwiMHg0MDBcIixCRl9HUzFfREFUQUJBUl9PTU5JRElSRUNUSU9OQUw6XCIweDgwMFwiLEJGX0dTMV9EQVRBQkFSX1RSVU5DQVRFRDpcIjB4MTAwMFwiLEJGX0dTMV9EQVRBQkFSX1NUQUNLRUQ6XCIweDIwMDBcIixCRl9HUzFfREFUQUJBUl9TVEFDS0VEX09NTklESVJFQ1RJT05BTDpcIjB4NDAwMFwiLEJGX0dTMV9EQVRBQkFSX0VYUEFOREVEOlwiMHg4MDAwXCIsQkZfR1MxX0RBVEFCQVJfRVhQQU5ERURfU1RBQ0tFRDpcIjB4MTAwMDBcIixCRl9HUzFfREFUQUJBUl9MSU1JVEVEOlwiMHgyMDAwMFwiLEJGX1BBVENIQ09ERTpcIjB4MDAwNDAwMDBcIixCRl9DT0RFXzMyOlwiMHgwMTAwMDAwMFwiLEJGX1BERjQxNzpcIjB4MDIwMDAwMDBcIixCRl9RUl9DT0RFOlwiMHgwNDAwMDAwMFwiLEJGX0RBVEFNQVRSSVg6XCIweDA4MDAwMDAwXCIsQkZfQVpURUM6XCIweDEwMDAwMDAwXCIsQkZfTUFYSUNPREU6XCIweDIwMDAwMDAwXCIsQkZfTUlDUk9fUVI6XCIweDQwMDAwMDAwXCIsQkZfTUlDUk9fUERGNDE3OlwiMHgwMDA4MDAwMFwiLEJGX0dTMV9DT01QT1NJVEU6XCIweDgwMDAwMDAwXCIsQkZfTVNJX0NPREU6XCIweDEwMDAwMFwiLEJGX0NPREVfMTE6XCIweDIwMDAwMFwiLEJGX1RXT19ESUdJVF9BRERfT046XCIweDQwMDAwMFwiLEJGX0ZJVkVfRElHSVRfQUREX09OOlwiMHg4MDAwMDBcIixCRl9NQVRSSVhfMjU6XCIweDEwMDAwMDAwMDBcIixCRl9QT1NUQUxDT0RFOlwiMHgzRjAwMDAwMDAwMDAwMDBcIixCRl9OT05TVEFOREFSRF9CQVJDT0RFOlwiMHgxMDAwMDAwMDBcIixCRl9VU1BTSU5URUxMSUdFTlRNQUlMOlwiMHgxMDAwMDAwMDAwMDAwMFwiLEJGX1BPU1RORVQ6XCIweDIwMDAwMDAwMDAwMDAwXCIsQkZfUExBTkVUOlwiMHg0MDAwMDAwMDAwMDAwMFwiLEJGX0FVU1RSQUxJQU5QT1NUOlwiMHg4MDAwMDAwMDAwMDAwMFwiLEJGX1JNNFNDQzpcIjB4MTAwMDAwMDAwMDAwMDAwXCIsQkZfS0lYOlwiMHgyMDAwMDAwMDAwMDAwMDBcIixCRl9ET1RDT0RFOlwiMHgyMDAwMDAwMDBcIixCRl9QSEFSTUFDT0RFX09ORV9UUkFDSzpcIjB4NDAwMDAwMDAwXCIsQkZfUEhBUk1BQ09ERV9UV09fVFJBQ0s6XCIweDgwMDAwMDAwMFwiLEJGX1BIQVJNQUNPREU6XCIweEMwMDAwMDAwMFwifTtjbGFzcyB3ciBleHRlbmRzIGd7c3RhdGljIHNldCBfb25Mb2codCl7Qyh3cixxaSx0LFwiZlwiLEtpKSxGaS5fb25Mb2c9dCxtci5fb25Mb2c9dH1zdGF0aWMgZ2V0IF9vbkxvZygpe3JldHVybiB4KHdyLHFpLFwiZlwiLEtpKX1zdGF0aWMgYXN5bmMgZGV0ZWN0RW52aXJvbm1lbnQoKXtyZXR1cm4gYXdhaXQoYXN5bmMoKT0+KHt3YXNtOkksd29ya2VyOkwsZ2V0VXNlck1lZGlhOkQsY2FtZXJhOmF3YWl0IE0oKSxicm93c2VyOkEuYnJvd3Nlcix2ZXJzaW9uOkEudmVyc2lvbixPUzpBLk9TfSkpKCl9c3RhdGljIGFzeW5jIHRlc3RDYW1lcmFBY2Nlc3MoKXtjb25zdCB0PWF3YWl0IEZpLnRlc3RDYW1lcmFBY2Nlc3MoKTtyZXR1cm4gdC5vaz97b2s6ITAsbWVzc2FnZTpcIlN1Y2Nlc3NmdWxseSBhY2Nlc3NlZCB0aGUgY2FtZXJhLlwifTpcIkluc2VjdXJlQ29udGV4dFwiPT09dC5lcnJvck5hbWU/e29rOiExLG1lc3NhZ2U6XCJJbnNlY3VyZSBjb250ZXh0LlwifTpcIk92ZXJjb25zdHJhaW5lZEVycm9yXCI9PT10LmVycm9yTmFtZXx8XCJOb3RGb3VuZEVycm9yXCI9PT10LmVycm9yTmFtZT97b2s6ITEsbWVzc2FnZTpcIk5vIGNhbWVyYSBkZXRlY3RlZC5cIn06XCJOb3RBbGxvd2VkRXJyb3JcIj09PXQuZXJyb3JOYW1lP3tvazohMSxtZXNzYWdlOlwiTm8gcGVybWlzc2lvbiB0byBhY2Nlc3MgY2FtZXJhLlwifTpcIkFib3J0RXJyb3JcIj09PXQuZXJyb3JOYW1lP3tvazohMSxtZXNzYWdlOlwiU29tZSBwcm9ibGVtIG9jY3VycmVkIHdoaWNoIHByZXZlbnRlZCB0aGUgZGV2aWNlIGZyb20gYmVpbmcgdXNlZC5cIn06XCJOb3RSZWFkYWJsZUVycm9yXCI9PT10LmVycm9yTmFtZT97b2s6ITEsbWVzc2FnZTpcIkEgaGFyZHdhcmUgZXJyb3Igb2NjdXJyZWQuXCJ9OlwiU2VjdXJpdHlFcnJvclwiPT09dC5lcnJvck5hbWU/e29rOiExLG1lc3NhZ2U6XCJVc2VyIG1lZGlhIHN1cHBvcnQgaXMgZGlzYWJsZWQuXCJ9OntvazohMSxtZXNzYWdlOnQuZXJyb3JNZXNzYWdlfX1zdGF0aWMgYXN5bmMgY3JlYXRlSW5zdGFuY2UodCl7dmFyIGUscjtpZih0JiYhKHQgaW5zdGFuY2VvZiB3ZSkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgdmlldy5cIik7aWYobnVsbD09PShlPWkubGljZW5zZSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuTGljZW5zZU1hbmFnZXIpe2lmKCEobnVsbD09PShyPWkubGljZW5zZSl8fHZvaWQgMD09PXI/dm9pZCAwOnIuTGljZW5zZU1hbmFnZXIuYkNhbGxJbml0TGljZW5zZSkpdGhyb3cgbmV3IEVycm9yKFwiTGljZW5zZSBpcyBub3Qgc2V0LlwiKTthd2FpdCBkLmxvYWRXYXNtKFtcImxpY2Vuc2VcIl0pLGF3YWl0IGkubGljZW5zZS5keW5hbXNvZnQoKX1jb25zdCBuPW5ldyB3cih0KTtyZXR1cm4gd3Iub25XYXJuaW5nJiYobG9jYXRpb24mJlwiZmlsZTpcIj09PWxvY2F0aW9uLnByb3RvY29sP3NldFRpbWVvdXQoKCgpPT57d3Iub25XYXJuaW5nJiZ3ci5vbldhcm5pbmcoe2lkOjEsbWVzc2FnZTpcIlRoZSBwYWdlIGlzIG9wZW5lZCBvdmVyIGZpbGU6Ly8gYW5kIER5bmFtc29mdCBDYW1lcmEgRW5oYW5jZXIgbWF5IG5vdCB3b3JrIHByb3Blcmx5LiBQbGVhc2Ugb3BlbiB0aGUgcGFnZSB2aWEgaHR0cHM6Ly8uXCJ9KX0pLDApOiExIT09d2luZG93LmlzU2VjdXJlQ29udGV4dCYmbmF2aWdhdG9yJiZuYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiZuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYXx8c2V0VGltZW91dCgoKCk9Pnt3ci5vbldhcm5pbmcmJndyLm9uV2FybmluZyh7aWQ6MixtZXNzYWdlOlwiRHluYW1zb2Z0IENhbWVyYSBFbmhhbmNlciBtYXkgbm90IHdvcmsgcHJvcGVybHkgaW4gYSBub24tc2VjdXJlIGNvbnRleHQuIFBsZWFzZSBvcGVuIHRoZSBwYWdlIHZpYSBodHRwczovLy5cIn0pfSksMCkpLG59Z2V0IHZpZGVvKCl7cmV0dXJuIHRoaXMuY2FtZXJhTWFuYWdlci5nZXRWaWRlb0VsKCl9c2V0IHZpZGVvU3JjKHQpe2lmKCF0aGlzLmNhbWVyYU1hbmFnZXIpdGhyb3cgbmV3IEVycm9yKFwiQ2FtZXJhIG1hbmFnZXIgaXMgbnVsbC5cIik7dGhpcy5jYW1lcmFWaWV3JiYodGhpcy5jYW1lcmFWaWV3Ll9oaWRlRGVmYXVsdFNlbGVjdGlvbj0hMCksdGhpcy5jYW1lcmFNYW5hZ2VyLnZpZGVvU3JjPXR9Z2V0IHZpZGVvU3JjKCl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD10aGlzLmNhbWVyYU1hbmFnZXIpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnZpZGVvU3JjfXNldCBpZlNhdmVMYXN0VXNlZENhbWVyYSh0KXtpZighdGhpcy5jYW1lcmFNYW5hZ2VyKXRocm93IG5ldyBFcnJvcihcIkNhbWVyYSBtYW5hZ2VyIGlzIG51bGwuXCIpO3RoaXMuY2FtZXJhTWFuYWdlci5pZlNhdmVMYXN0VXNlZENhbWVyYT10fWdldCBpZlNhdmVMYXN0VXNlZENhbWVyYSgpe3ZhciB0O3JldHVybiBudWxsPT09KHQ9dGhpcy5jYW1lcmFNYW5hZ2VyKXx8dm9pZCAwPT09dD92b2lkIDA6dC5pZlNhdmVMYXN0VXNlZENhbWVyYX1zZXQgaWZTa2lwQ2FtZXJhSW5zcGVjdGlvbih0KXtpZighdGhpcy5jYW1lcmFNYW5hZ2VyKXRocm93IG5ldyBFcnJvcihcIkNhbWVyYSBtYW5hZ2VyIGlzIG51bGwuXCIpO3RoaXMuY2FtZXJhTWFuYWdlci5pZlNraXBDYW1lcmFJbnNwZWN0aW9uPXR9Z2V0IGlmU2tpcENhbWVyYUluc3BlY3Rpb24oKXt2YXIgdDtyZXR1cm4gbnVsbD09PSh0PXRoaXMuY2FtZXJhTWFuYWdlcil8fHZvaWQgMD09PXQ/dm9pZCAwOnQuaWZTa2lwQ2FtZXJhSW5zcGVjdGlvbn1zZXQgY2FtZXJhT3BlblRpbWVvdXQodCl7aWYoIXRoaXMuY2FtZXJhTWFuYWdlcil0aHJvdyBuZXcgRXJyb3IoXCJDYW1lcmEgbWFuYWdlciBpcyBudWxsLlwiKTt0aGlzLmNhbWVyYU1hbmFnZXIuY2FtZXJhT3BlblRpbWVvdXQ9dH1nZXQgY2FtZXJhT3BlblRpbWVvdXQoKXt2YXIgdDtyZXR1cm4gbnVsbD09PSh0PXRoaXMuY2FtZXJhTWFuYWdlcil8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY2FtZXJhT3BlblRpbWVvdXR9c2V0IHNpbmdsZUZyYW1lTW9kZSh0KXtpZighW1wiZGlzYWJsZWRcIixcImltYWdlXCIsXCJjYW1lcmFcIl0uaW5jbHVkZXModCkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2YWx1ZS5cIik7aWYodGhpcy5pc09wZW4oKSl0aHJvdyBuZXcgRXJyb3IoXCJJdCBpcyBub3QgYWxsb3dlZCB0byBjaGFuZ2UgYHNpbmdsZUZyYW1lTW9kZWAgd2hlbiB0aGUgY2FtZXJhIGlzIG9wZW4uXCIpO0ModGhpcyxRaSx0LFwiZlwiKX1nZXQgc2luZ2xlRnJhbWVNb2RlKCl7cmV0dXJuIHgodGhpcyxRaSxcImZcIil9Z2V0IF9pc0ZldGNoaW5nU3RhcnRlZCgpe3JldHVybiB4KHRoaXMsbnIsXCJmXCIpfWdldCBkaXNwb3NlZCgpe3JldHVybiB4KHRoaXMsbHIsXCJmXCIpfWNvbnN0cnVjdG9yKHQpe2lmKHN1cGVyKCksemkuYWRkKHRoaXMpLFppLnNldCh0aGlzLFwiY2xvc2VkXCIpLEppLnNldCh0aGlzLHZvaWQgMCksdGhpcy5pc1RvcmNoT249dm9pZCAwLFFpLnNldCh0aGlzLHZvaWQgMCksdGhpcy5fb25DYW1lcmFTZWxDaGFuZ2U9YXN5bmMoKT0+e3RoaXMuaXNPcGVuKCkmJnRoaXMuY2FtZXJhVmlldyYmIXRoaXMuY2FtZXJhVmlldy5kaXNwb3NlZCYmYXdhaXQgdGhpcy5zZWxlY3RDYW1lcmEodGhpcy5jYW1lcmFWaWV3Ll9zZWxDYW0udmFsdWUpfSx0aGlzLl9vblJlc29sdXRpb25TZWxDaGFuZ2U9YXN5bmMoKT0+e2lmKCF0aGlzLmlzT3BlbigpKXJldHVybjtpZighdGhpcy5jYW1lcmFWaWV3fHx0aGlzLmNhbWVyYVZpZXcuZGlzcG9zZWQpcmV0dXJuO2xldCB0LGU7aWYodGhpcy5jYW1lcmFWaWV3Ll9zZWxSc2wmJi0xIT10aGlzLmNhbWVyYVZpZXcuX3NlbFJzbC5zZWxlY3RlZEluZGV4KXtsZXQgaT10aGlzLmNhbWVyYVZpZXcuX3NlbFJzbC5vcHRpb25zW3RoaXMuY2FtZXJhVmlldy5fc2VsUnNsLnNlbGVjdGVkSW5kZXhdO3Q9cGFyc2VJbnQoaS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXdpZHRoXCIpKSxlPXBhcnNlSW50KGkuZ2V0QXR0cmlidXRlKFwiZGF0YS1oZWlnaHRcIikpfWF3YWl0IHRoaXMuc2V0UmVzb2x1dGlvbih7d2lkdGg6dCxoZWlnaHQ6ZX0pfSx0aGlzLl9vbkNsb3NlQnRuQ2xpY2s9YXN5bmMoKT0+e3RoaXMuaXNPcGVuKCkmJnRoaXMuY2FtZXJhVmlldyYmIXRoaXMuY2FtZXJhVmlldy5kaXNwb3NlZCYmdGhpcy5jbG9zZSgpfSwkaS5zZXQodGhpcywoKHQsZSxpLHIpPT57Y29uc3Qgbj1EYXRlLm5vdygpLHM9e3N4OnIueCxzeTpyLnksc1dpZHRoOnIud2lkdGgsc0hlaWdodDpyLmhlaWdodCxkV2lkdGg6ci53aWR0aCxkSGVpZ2h0OnIuaGVpZ2h0fSxvPU1hdGgubWF4KHMuZFdpZHRoLHMuZEhlaWdodCk7aWYodGhpcy5jYW52YXNTaXplTGltaXQmJm8+dGhpcy5jYW52YXNTaXplTGltaXQpe2NvbnN0IHQ9dGhpcy5jYW52YXNTaXplTGltaXQvbztzLmRXaWR0aD5zLmRIZWlnaHQ/KHMuZFdpZHRoPXRoaXMuY2FudmFzU2l6ZUxpbWl0LHMuZEhlaWdodD1NYXRoLnJvdW5kKHMuZEhlaWdodCp0KSk6KHMuZFdpZHRoPU1hdGgucm91bmQocy5kV2lkdGgqdCkscy5kSGVpZ2h0PXRoaXMuY2FudmFzU2l6ZUxpbWl0KX1jb25zdCBhPXRoaXMuY2FtZXJhTWFuYWdlci5pbWFnZURhdGFHZXR0ZXIuZ2V0SW1hZ2VEYXRhKHQsZSxpLHMse3BpeGVsRm9ybWF0OnZyLmdldCh0aGlzLmdldFBpeGVsRm9ybWF0KCkpfSk7bGV0IGg9bnVsbDtpZihhKXtjb25zdCB0PURhdGUubm93KCk7bGV0IG87aWYoYS5waXhlbEZvcm1hdD09PU1lLkdSRVkpbz1hLndpZHRoO2Vsc2Ugbz00KmEud2lkdGg7bGV0IGw9ITA7MD09PXMuc3gmJjA9PT1zLnN5JiZzLnNXaWR0aD09PWUmJnMuc0hlaWdodD09PWkmJihsPSExKSxoPXtieXRlczphLmRhdGEsd2lkdGg6YS53aWR0aCxoZWlnaHQ6YS5oZWlnaHQsc3RyaWRlOm8sZm9ybWF0Ol9yLmdldChhLnBpeGVsRm9ybWF0KSx0YWc6e2ltYWdlSWQ6dGhpcy5faW1hZ2VJZD09TnVtYmVyLk1BWF9WQUxVRT90aGlzLl9pbWFnZUlkPTA6Kyt0aGlzLl9pbWFnZUlkLHR5cGU6bS5JVFRfRklMRV9JTUFHRSxpc0Nyb3BwZWQ6bCxjcm9wUmVnaW9uOntsZWZ0OnIueCx0b3A6ci55LHJpZ2h0OnIueCtyLndpZHRoLGJvdHRvbTpyLnkrci5oZWlnaHQsaXNNZWFzdXJlZEluUGVyY2VudGFnZTohMX0sb3JpZ2luYWxXaWR0aDplLG9yaWdpbmFsSGVpZ2h0OmksY3VycmVudFdpZHRoOmEud2lkdGgsY3VycmVudEhlaWdodDphLmhlaWdodCx0aW1lU3BlbnQ6dC1uLHRpbWVTdGFtcDp0fSx0b0NhbnZhczp4KHRoaXMsdHIsXCJmXCIpLGlzRENFRnJhbWU6ITB9fXJldHVybiBofSkpLHRoaXMuX29uU2luZ2xlRnJhbWVBY3F1aXJlZD10PT57bGV0IGU7ZT10aGlzLmNhbWVyYVZpZXc/dGhpcy5jYW1lcmFWaWV3LmdldENvbnZlcnRlZFJlZ2lvbigpOmF0LmNvbnZlcnQoeCh0aGlzLGlyLFwiZlwiKSx0LndpZHRoLHQuaGVpZ2h0KSxlfHwoZT17eDowLHk6MCx3aWR0aDp0LndpZHRoLGhlaWdodDp0LmhlaWdodH0pO2NvbnN0IGk9eCh0aGlzLCRpLFwiZlwiKS5jYWxsKHRoaXMsdCx0LndpZHRoLHQuaGVpZ2h0LGUpO3godGhpcyxKaSxcImZcIikuZmlyZShcInNpbmdsZUZyYW1lQWNxdWlyZWRcIixbaV0se2FzeW5jOiExLGNvcHk6ITF9KX0sdHIuc2V0KHRoaXMsKGZ1bmN0aW9uKCl7aWYoISh0aGlzLmJ5dGVzIGluc3RhbmNlb2YgVWludDhBcnJheXx8dGhpcy5ieXRlcyBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBieXRlcy5cIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHRoaXMud2lkdGh8fHRoaXMud2lkdGg8PTApdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB3aWR0aC5cIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIHRoaXMuaGVpZ2h0fHx0aGlzLmhlaWdodDw9MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGhlaWdodC5cIik7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO2xldCBlO3Qud2lkdGg9dGhpcy53aWR0aCx0LmhlaWdodD10aGlzLmhlaWdodDtpZih0aGlzLmZvcm1hdD09PWMuSVBGX0dSQVlTQ0FMRUQpe2U9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgqdGhpcy5oZWlnaHQqNCk7Zm9yKGxldCB0PTA7dDxlLmxlbmd0aDt0Kz00KWVbdF09dGhpcy5ieXRlc1t0LzRdLGVbdCsxXT10aGlzLmJ5dGVzW3QvNF0sZVt0KzJdPXRoaXMuYnl0ZXNbdC80XSxlW3QrM109MjU1fWVsc2UgZT1uZXcgVWludDhDbGFtcGVkQXJyYXkodGhpcy5ieXRlcy5idWZmZXIpO3JldHVybiB0LmdldENvbnRleHQoXCIyZFwiKS5wdXRJbWFnZURhdGEobmV3IEltYWdlRGF0YShlLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpLDAsMCksdH0pKSxlci5zZXQodGhpcyx2b2lkIDApLGlyLnNldCh0aGlzLHZvaWQgMCkscnIuc2V0KHRoaXMsYy5JUEZfQUJHUl84ODg4KSxuci5zZXQodGhpcywhMSksdGhpcy5faW1hZ2VJZD0tMSxzci5zZXQodGhpcyx2b2lkIDApLHRoaXMuZmV0Y2hJbnRlcnZhbD0wLG9yLnNldCh0aGlzLHtlbmhhbmNlZEZvY3VzOiExLGF1dG9ab29tOiExLHRhcFRvRm9jdXM6ITF9KSxhci5zZXQodGhpcyx7bWluVmFsdWU6MSxtYXhWYWx1ZTo5OTksYXV0b0ZvY3VzRnJhbWVBcnJheTpbXSxhdXRvRm9jdXNGcmFtZUxpbWl0Ols1LDNdLGF1dG9ab29tRGV0ZWN0aW9uQXJlYTouNSxhdXRvWm9vbVRhcmdldEJvcmRlcjouOSxhdXRvWm9vbUlkZWFsQXJlYTpbMCwuMDVdLGF1dG9ab29tSW5GcmFtZUFycmF5OltdLGF1dG9ab29tSW5GcmFtZUxpbWl0Ols1LDNdLGF1dG9ab29tSW5NYXhUaW1lczo1LGF1dG9ab29tSW5NaW5TdGVwOk1hdGgucG93KDEwLC4yKSxhdXRvWm9vbUluSWRlYWxNb2R1bGVTaXplOjYsYXV0b1pvb21PdXRGcmFtZUNvdW50OjAsYXV0b1pvb21PdXRGcmFtZUxpbWl0OjMsYXV0b1pvb21PdXRTdGVwUmF0ZToxLzMsYXV0b1pvb21PdXRTdGVwUmF0ZV8yOi4wNSxhdXRvWm9vbU91dE1pblN0ZXA6MixmcmFtZUFycmF5SW5JZGVhbFpvb206W10sZnJhbWVMaW1pdEluSWRlYWxab29tOls1LDNdfSksaHIuc2V0KHRoaXMsdm9pZCAwKSxsci5zZXQodGhpcywhMSksdGhpcy5pc0NhbWVyYUVuaGFuY2VyPSEwLHRoaXMuX3Rhc2tpZDRBdXRvVG9yY2g9bnVsbCx0aGlzLl9kZWxheTRBdXRvVG9yY2g9MjUwLHRoaXMuZ3JheVRocmVzaG9sZDRBdXRvVG9yY2g9MjAsdGhpcy5tYXhEYXJrQ291bnQ0QXV0b1Ryb2NoPTMsdCYmISh0IGluc3RhbmNlb2Ygd2UpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHZpZXcuXCIpO0ModGhpcyxKaSxuZXcgY3QsXCJmXCIpLHRoaXMuY2FtZXJhTWFuYWdlcj1uZXcgRmksdGhpcy5faW1hZ2VEYXRhR2V0dGVyPXRoaXMuY2FtZXJhTWFuYWdlci5pbWFnZURhdGFHZXR0ZXI7dGhpcy5jYW1lcmFNYW5hZ2VyLnVwZGF0ZVZpZGVvRWxXaGVuU29mdHdhcmVTY2FsZWQ9KCk9PntpZighdGhpcy52aWRlbylyZXR1cm47Y29uc3QgdD10aGlzLmNhbWVyYU1hbmFnZXIuZ2V0U29mdHdhcmVTY2FsZSgpO2lmKHQ8MSl0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgc2NhbGUgdmFsdWUuXCIpO3RoaXMuY2FtZXJhVmlldyYmIXRoaXMuY2FtZXJhVmlldy5kaXNwb3NlZD8odGhpcy52aWRlby5zdHlsZS50cmFuc2Zvcm09MT09PXQ/XCJcIjpgc2NhbGUoJHt0fSlgLHRoaXMuY2FtZXJhVmlldy5fdXBkYXRlVmlkZW9Db250YWluZXIoKSk6dGhpcy52aWRlby5zdHlsZS50cmFuc2Zvcm09MT09PXQ/XCJcIjpgc2NhbGUoJHt0fSlgfSxbXCJpUGhvbmVcIixcImlQYWRcIixcIkFuZHJvaWRcIixcIkhhcm1vbnlPU1wiXS5pbmNsdWRlcyhBLk9TKT90aGlzLmNhbWVyYU1hbmFnZXIuc2V0UmVzb2x1dGlvbigxMjgwLDcyMCk6dGhpcy5jYW1lcmFNYW5hZ2VyLnNldFJlc29sdXRpb24oMTkyMCwxMDgwKSxuYXZpZ2F0b3ImJm5hdmlnYXRvci5tZWRpYURldmljZXMmJm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhP3RoaXMuc2luZ2xlRnJhbWVNb2RlPVwiZGlzYWJsZWRcIjp0aGlzLnNpbmdsZUZyYW1lTW9kZT1cImltYWdlXCIsdCYmKHRoaXMuc2V0Q2FtZXJhVmlldyh0KSx0LmNhbWVyYUVuaGFuY2VyPXRoaXMpLHRoaXMuX29uKFwiYmVmb3JlOmNhbWVyYTpjaGFuZ2VcIiwoKCk9Pnt4KHRoaXMsaHIsXCJmXCIpLnN0b3BDaGFyZ2luZygpO2NvbnN0IHQ9dGhpcy5jYW1lcmFWaWV3O3QmJiF0LmRpc3Bvc2VkJiYodC5fc3RhcnRMb2FkaW5nKCksdC5jbGVhckFsbElubmVyRHJhd2luZ0l0ZW1zKCkpfSkpLHRoaXMuX29uKFwiY2FtZXJhOmNoYW5nZWRcIiwoKCk9Pnt0aGlzLmNsZWFyQnVmZmVyKCl9KSksdGhpcy5fb24oXCJiZWZvcmU6cmVzb2x1dGlvbjpjaGFuZ2VcIiwoKCk9Pntjb25zdCB0PXRoaXMuY2FtZXJhVmlldzt0JiYhdC5kaXNwb3NlZCYmKHQuX3N0YXJ0TG9hZGluZygpLHQuY2xlYXJBbGxJbm5lckRyYXdpbmdJdGVtcygpKX0pKSx0aGlzLl9vbihcInJlc29sdXRpb246Y2hhbmdlZFwiLCgoKT0+e3RoaXMuY2xlYXJCdWZmZXIoKSx0LmV2ZW50SGFuZGxlci5maXJlKFwiY29udGVudDp1cGRhdGVkXCIsbnVsbCx7YXN5bmM6ITF9KX0pKSx0aGlzLl9vbihcInBhdXNlZFwiLCgoKT0+e3godGhpcyxocixcImZcIikuc3RvcENoYXJnaW5nKCk7Y29uc3QgdD10aGlzLmNhbWVyYVZpZXc7dCYmdC5kaXNwb3NlZH0pKSx0aGlzLl9vbihcInJlc3VtZWRcIiwoKCk9Pntjb25zdCB0PXRoaXMuY2FtZXJhVmlldzt0JiZ0LmRpc3Bvc2VkfSkpLHRoaXMuX29uKFwidGFwZm9jdXNcIiwoKCk9Pnt4KHRoaXMsb3IsXCJmXCIpLnRhcFRvRm9jdXMmJngodGhpcyxocixcImZcIikuc3RhcnRDaGFyZ2luZygpfSkpLHRoaXMuX2ludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyPXt9LHRoaXMuX2ludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyLm9uVGFza1Jlc3VsdHNSZWNlaXZlZD1hc3luYyh0LGUpPT57dmFyIGkscixuLHM7aWYoeCh0aGlzLHppLFwibVwiLGNyKS5jYWxsKHRoaXMpfHwhdGhpcy5pc09wZW4oKXx8dGhpcy5pc1BhdXNlZCgpKXJldHVybjtjb25zdCBvPXQuaW50ZXJtZWRpYXRlUmVzdWx0VW5pdHM7d3IuX29uTG9nJiYod3IuX29uTG9nKFwiaW50ZXJtZWRpYXRlUmVzdWx0VW5pdHM6XCIpLHdyLl9vbkxvZyhvKSk7bGV0IGE9ITEsaD0hMTtmb3IobGV0IHQgb2Ygbyl7aWYodC51bml0VHlwZT09PXAuSVJVVF9ERUNPREVEX0JBUkNPREVTJiZ0LmRlY29kZWRCYXJjb2Rlcy5sZW5ndGgpe2E9ITA7YnJlYWt9dC51bml0VHlwZT09PXAuSVJVVF9MT0NBTElaRURfQkFSQ09ERVMmJnQubG9jYWxpemVkQmFyY29kZXMubGVuZ3RoJiYoaD0hMCl9aWYod3IuX29uTG9nJiYod3IuX29uTG9nKFwiaGFzTG9jYWxpemVkQmFyY29kZXM6XCIpLHdyLl9vbkxvZyhoKSkseCh0aGlzLG9yLFwiZlwiKS5hdXRvWm9vbXx8eCh0aGlzLG9yLFwiZlwiKS5lbmhhbmNlZEZvY3VzKWlmKGEpeCh0aGlzLGFyLFwiZlwiKS5hdXRvWm9vbUluRnJhbWVBcnJheS5sZW5ndGg9MCx4KHRoaXMsYXIsXCJmXCIpLmF1dG9ab29tT3V0RnJhbWVDb3VudD0wLHgodGhpcyxhcixcImZcIikuZnJhbWVBcnJheUluSWRlYWxab29tLmxlbmd0aD0wLHgodGhpcyxhcixcImZcIikuYXV0b0ZvY3VzRnJhbWVBcnJheS5sZW5ndGg9MDtlbHNle2NvbnN0IHQ9YXN5bmMgdD0+e2F3YWl0IHRoaXMuc2V0Wm9vbSh0KSx4KHRoaXMsb3IsXCJmXCIpLmF1dG9ab29tJiZ4KHRoaXMsaHIsXCJmXCIpLnN0YXJ0Q2hhcmdpbmcoKX0sZT1hc3luYyB0PT57YXdhaXQgdGhpcy5zZXRGb2N1cyh0KSx4KHRoaXMsb3IsXCJmXCIpLmVuaGFuY2VkRm9jdXMmJngodGhpcyxocixcImZcIikuc3RhcnRDaGFyZ2luZygpfTtpZihoKXtjb25zdCBhPW9bMF0ub3JpZ2luYWxJbWFnZVRhZyxoPShudWxsPT09KGk9YS5jcm9wUmVnaW9uKXx8dm9pZCAwPT09aT92b2lkIDA6aS5sZWZ0KXx8MCxsPShudWxsPT09KHI9YS5jcm9wUmVnaW9uKXx8dm9pZCAwPT09cj92b2lkIDA6ci50b3ApfHwwLGM9KG51bGw9PT0obj1hLmNyb3BSZWdpb24pfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnJpZ2h0KT9hLmNyb3BSZWdpb24ucmlnaHQtaDphLm9yaWdpbmFsV2lkdGgsdT0obnVsbD09PShzPWEuY3JvcFJlZ2lvbil8fHZvaWQgMD09PXM/dm9pZCAwOnMuYm90dG9tKT9hLmNyb3BSZWdpb24uYm90dG9tLWw6YS5vcmlnaW5hbEhlaWdodCxkPWEuY3VycmVudFdpZHRoLGY9YS5jdXJyZW50SGVpZ2h0O2xldCBnO3tsZXQgdCxlLGkscixuO3tjb25zdCB0PXRoaXMudmlkZW8udmlkZW9XaWR0aCooMS14KHRoaXMsYXIsXCJmXCIpLmF1dG9ab29tRGV0ZWN0aW9uQXJlYSkvMixlPXRoaXMudmlkZW8udmlkZW9XaWR0aCooMSt4KHRoaXMsYXIsXCJmXCIpLmF1dG9ab29tRGV0ZWN0aW9uQXJlYSkvMixpPWUscj10LHM9dGhpcy52aWRlby52aWRlb0hlaWdodCooMS14KHRoaXMsYXIsXCJmXCIpLmF1dG9ab29tRGV0ZWN0aW9uQXJlYSkvMixvPXMsYT10aGlzLnZpZGVvLnZpZGVvSGVpZ2h0KigxK3godGhpcyxhcixcImZcIikuYXV0b1pvb21EZXRlY3Rpb25BcmVhKS8yO249W3t4OnQseTpzfSx7eDplLHk6b30se3g6aSx5OmF9LHt4OnIseTphfV19d3IuX29uTG9nJiYod3IuX29uTG9nKFwiZGV0ZWN0aW9uQXJlYTpcIiksd3IuX29uTG9nKG4pKTtjb25zdCBzPVtdO3tjb25zdCB0PSh0LGUpPT57Y29uc3QgaT0odCxlKT0+e2lmKCF0JiYhZSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50cy5cIik7cmV0dXJuIGZ1bmN0aW9uKHQsZSxpKXtsZXQgcj0hMTtjb25zdCBuPXQubGVuZ3RoO2lmKG48PTIpcmV0dXJuITE7Zm9yKGxldCBzPTA7czxuO3MrKyl7Y29uc3Qgbz10W3NdLGE9dFsocysxKSVuXTtpZih1dChvLGEse3g6ZSx5Oml9KSlyZXR1cm4hMDtkdChvLnktaSk+MCE9ZHQoYS55LWkpPjAmJmR0KGUtKGktby55KSooby54LWEueCkvKG8ueS1hLnkpLW8ueCk8MCYmKHI9IXIpfXJldHVybiByfShlLHQueCx0LnkpfSxyPSh0LGUpPT4hIShmdChbdFswXSx0WzFdXSxbdFsyXSx0WzNdXSxbZVswXS54LGVbMF0ueV0sW2VbMV0ueCxlWzFdLnldKXx8ZnQoW3RbMF0sdFsxXV0sW3RbMl0sdFszXV0sW2VbMV0ueCxlWzFdLnldLFtlWzJdLngsZVsyXS55XSl8fGZ0KFt0WzBdLHRbMV1dLFt0WzJdLHRbM11dLFtlWzJdLngsZVsyXS55XSxbZVszXS54LGVbM10ueV0pfHxmdChbdFswXSx0WzFdXSxbdFsyXSx0WzNdXSxbZVszXS54LGVbM10ueV0sW2VbMF0ueCxlWzBdLnldKSk7cmV0dXJuISEoaSh7eDp0WzBdLngseTp0WzBdLnl9LGUpfHxpKHt4OnRbMV0ueCx5OnRbMV0ueX0sZSl8fGkoe3g6dFsyXS54LHk6dFsyXS55fSxlKXx8aSh7eDp0WzNdLngseTp0WzNdLnl9LGUpKXx8KCEhKGkoe3g6ZVswXS54LHk6ZVswXS55fSx0KXx8aSh7eDplWzFdLngseTplWzFdLnl9LHQpfHxpKHt4OmVbMl0ueCx5OmVbMl0ueX0sdCl8fGkoe3g6ZVszXS54LHk6ZVszXS55fSx0KSl8fCEhKHIoW2VbMF0ueCxlWzBdLnksZVsxXS54LGVbMV0ueV0sdCl8fHIoW2VbMV0ueCxlWzFdLnksZVsyXS54LGVbMl0ueV0sdCl8fHIoW2VbMl0ueCxlWzJdLnksZVszXS54LGVbM10ueV0sdCl8fHIoW2VbM10ueCxlWzNdLnksZVswXS54LGVbMF0ueV0sdCkpKX07Zm9yKGxldCBlIG9mIG8paWYoZS51bml0VHlwZT09PXAuSVJVVF9MT0NBTElaRURfQkFSQ09ERVMpZm9yKGxldCBpIG9mIGUubG9jYWxpemVkQmFyY29kZXMpe2lmKCFpKWNvbnRpbnVlO2NvbnN0IGU9aS5sb2NhdGlvbi5wb2ludHM7ZS5mb3JFYWNoKCh0PT57d2UuX3RyYW5zZm9ybUNvb3JkaW5hdGVzKHQsaCxsLGMsdSxkLGYpfSkpLHQobixlKSYmcy5wdXNoKGkpfWlmKHdyLl9kZWJ1ZyYmdGhpcy5jYW1lcmFWaWV3KXtjb25zdCB0PXRoaXMuX19sYXllcnx8KHRoaXMuX19sYXllcj10aGlzLmNhbWVyYVZpZXcuX2NyZWF0ZURyYXdpbmdMYXllcig5OSkpO3QuY2xlYXJEcmF3aW5nSXRlbXMoKTtjb25zdCBlPXRoaXMuX19zdHlsZUlkMnx8KHRoaXMuX19zdHlsZUlkMj1nZS5jcmVhdGVEcmF3aW5nU3R5bGUoe3N0cm9rZVN0eWxlOlwicmVkXCJ9KSk7Zm9yKGxldCBpIG9mIG8paWYoaS51bml0VHlwZT09PXAuSVJVVF9MT0NBTElaRURfQkFSQ09ERVMpZm9yKGxldCByIG9mIGkubG9jYWxpemVkQmFyY29kZXMpe2lmKCFyKWNvbnRpbnVlO2NvbnN0IGk9ci5sb2NhdGlvbi5wb2ludHMsbj1uZXcgVHQoe3BvaW50czppfSxlKTt0LmFkZERyYXdpbmdJdGVtcyhbbl0pfX19aWYod3IuX29uTG9nJiYod3IuX29uTG9nKFwiaW50ZXJzZWN0ZWRSZXN1bHRzOlwiKSx3ci5fb25Mb2cocykpLCFzLmxlbmd0aClyZXR1cm47bGV0IGE7aWYocy5sZW5ndGgpe2xldCB0PXMuZmlsdGVyKCh0PT50LnBvc3NpYmxlRm9ybWF0cz09eXIuQkZfUVJfQ09ERXx8dC5wb3NzaWJsZUZvcm1hdHM9PXlyLkJGX0RBVEFNQVRSSVgpKTtpZih0Lmxlbmd0aHx8KHQ9cy5maWx0ZXIoKHQ9PnQucG9zc2libGVGb3JtYXRzPT15ci5CRl9PTkVEKSksdC5sZW5ndGh8fCh0PXMpKSx0Lmxlbmd0aCl7Y29uc3QgZT10PT57Y29uc3QgZT10LmxvY2F0aW9uLnBvaW50cyxpPShlWzBdLngrZVsxXS54K2VbMl0ueCtlWzNdLngpLzQscj0oZVswXS55K2VbMV0ueStlWzJdLnkrZVszXS55KS80O3JldHVybihpLWQvMikqKGktZC8yKSsoci1mLzIpKihyLWYvMil9O2E9dFswXTtsZXQgaT1lKGEpO2lmKDEhPXQubGVuZ3RoKWZvcihsZXQgcj0xO3I8dC5sZW5ndGg7cisrKXtjb25zdCBuPWUodFtyXSk7dFtyXS5jb25maWRlbmNlPjEuMSphLmNvbmZpZGVuY2U/KGE9dFtyXSxpPW4pOnRbcl0uY29uZmlkZW5jZT4uOSphLmNvbmZpZGVuY2UmJm48aSYmKGE9dFtyXSxpPW4pfX19aWYod3IuX29uTG9nJiYod3IuX29uTG9nKFwiaGlnaFByaW9yaXR5UmVzdWx0OlwiKSx3ci5fb25Mb2coYSkpLGEpe2NvbnN0IG49YS5sb2NhdGlvbi5wb2ludHM7dD1NYXRoLm1pbihuWzBdLngsblsxXS54LG5bMl0ueCxuWzNdLngpLGU9TWF0aC5tYXgoblswXS54LG5bMV0ueCxuWzJdLngsblszXS54KSxpPU1hdGgubWluKG5bMF0ueSxuWzFdLnksblsyXS55LG5bM10ueSkscj1NYXRoLm1heChuWzBdLnksblsxXS55LG5bMl0ueSxuWzNdLnkpLGc9e3BvaW50czpbe3g6dCx5Oml9LHt4OmUseTppfSx7eDplLHk6cn0se3g6dCx5OnJ9XSxyZXN1bHQ6YX19fWlmKHdyLl9vbkxvZyYmKHdyLl9vbkxvZyhcImJvdW5kaW5nUmVjdDpcIiksd3IuX29uTG9nKGcpKSwhZylyZXR1cm47aWYod3IuX2RlYnVnJiZ0aGlzLmNhbWVyYVZpZXcmJihudWxsPT1nP3ZvaWQgMDpnLnBvaW50cykpe2NvbnN0IHQ9dGhpcy5fX2xheWVyfHwodGhpcy5fX2xheWVyPXRoaXMuY2FtZXJhVmlldy5fY3JlYXRlRHJhd2luZ0xheWVyKDk5KSksZT10aGlzLl9fc3R5bGVJZDF8fCh0aGlzLl9fc3R5bGVJZDE9Z2UuY3JlYXRlRHJhd2luZ1N0eWxlKHtzdHJva2VTdHlsZTpcImJsdWVcIn0pKSxpPW5ldyBUdCh7cG9pbnRzOmcucG9pbnRzfSxlKTt0LmFkZERyYXdpbmdJdGVtcyhbaV0pfWlmKHgodGhpcyxhcixcImZcIikuYXV0b1pvb21PdXRGcmFtZUNvdW50PTAseCh0aGlzLG9yLFwiZlwiKS5hdXRvWm9vbSl7Y29uc3QgaT14KHRoaXMsYXIsXCJmXCIpLmF1dG9ab29tSWRlYWxBcmVhWzFdO2xldCByPSgxLXgodGhpcyxhcixcImZcIikuYXV0b1pvb21UYXJnZXRCb3JkZXIpLzI7Y29uc3Qgbj1nLnBvaW50c1swXS54L2Mscz0oYy1nLnBvaW50c1syXS54KS9jLG89Zy5wb2ludHNbMF0ueS91LGE9KHUtZy5wb2ludHNbMl0ueSkvdTtpZihuPmkmJnM+aSYmbz5pJiZhPmkmJmcucmVzdWx0Lm1vZHVsZVNpemU8eCh0aGlzLGFyLFwiZlwiKS5hdXRvWm9vbUluSWRlYWxNb2R1bGVTaXplKXtpZih4KHRoaXMsYXIsXCJmXCIpLmF1dG9ab29tSW5GcmFtZUFycmF5LnB1c2goITApLHgodGhpcyxhcixcImZcIikuYXV0b1pvb21JbkZyYW1lQXJyYXkuc3BsaWNlKDAseCh0aGlzLGFyLFwiZlwiKS5hdXRvWm9vbUluRnJhbWVBcnJheS5sZW5ndGgteCh0aGlzLGFyLFwiZlwiKS5hdXRvWm9vbUluRnJhbWVMaW1pdFswXSkseCh0aGlzLGFyLFwiZlwiKS5mcmFtZUFycmF5SW5JZGVhbFpvb20ubGVuZ3RoPTAseCh0aGlzLG9yLFwiZlwiKS5lbmhhbmNlZEZvY3VzJiZlKHttb2RlOlwiY29udGludW91c1wifSkuY2F0Y2goKCgpPT57fSkpLHgodGhpcyxhcixcImZcIikuYXV0b1pvb21JbkZyYW1lQXJyYXkuZmlsdGVyKCh0PT4hMD09PXQpKS5sZW5ndGg+PXgodGhpcyxhcixcImZcIikuYXV0b1pvb21JbkZyYW1lTGltaXRbMV0pe3godGhpcyxhcixcImZcIikuYXV0b1pvb21JbkZyYW1lQXJyYXkubGVuZ3RoPTA7Y29uc3QgZT1bKC41LXIpLyguNS1uKSwoLjUtcikvKC41LXMpLCguNS1yKS8oLjUtbyksKC41LXIpLyguNS1hKV0uZmlsdGVyKCh0PT50PjApKSxpPU1hdGgubWluKC4uLmUseCh0aGlzLGFyLFwiZlwiKS5hdXRvWm9vbUluSWRlYWxNb2R1bGVTaXplL2cucmVzdWx0Lm1vZHVsZVNpemUpLGg9dGhpcy5nZXRab29tU2V0dGluZ3MoKS5mYWN0b3I7bGV0IGw9TWF0aC5tYXgoTWF0aC5wb3coaCppLDEveCh0aGlzLGFyLFwiZlwiKS5hdXRvWm9vbUluTWF4VGltZXMpLHgodGhpcyxhcixcImZcIikuYXV0b1pvb21Jbk1pblN0ZXApO2w9TWF0aC5taW4obCxpKTtsZXQgYz1oKmw7Yz1NYXRoLm1heCh4KHRoaXMsYXIsXCJmXCIpLm1pblZhbHVlLGMpLGM9TWF0aC5taW4oeCh0aGlzLGFyLFwiZlwiKS5tYXhWYWx1ZSxjKTt0cnl7YXdhaXQgdCh7ZmFjdG9yOmN9KX1jYXRjaCh0KXtjb25zdCBlPXQubWVzc2FnZXx8dDtjb25zb2xlLndhcm4oZSl9dGhpcy5jbGVhckJ1ZmZlcigpfX1lbHNlIGlmKHgodGhpcyxhcixcImZcIikuYXV0b1pvb21JbkZyYW1lQXJyYXkubGVuZ3RoPTAseCh0aGlzLGFyLFwiZlwiKS5mcmFtZUFycmF5SW5JZGVhbFpvb20ucHVzaCghMCkseCh0aGlzLGFyLFwiZlwiKS5mcmFtZUFycmF5SW5JZGVhbFpvb20uc3BsaWNlKDAseCh0aGlzLGFyLFwiZlwiKS5mcmFtZUFycmF5SW5JZGVhbFpvb20ubGVuZ3RoLXgodGhpcyxhcixcImZcIikuZnJhbWVMaW1pdEluSWRlYWxab29tWzBdKSx4KHRoaXMsYXIsXCJmXCIpLmZyYW1lQXJyYXlJbklkZWFsWm9vbS5maWx0ZXIoKHQ9PiEwPT09dCkpLmxlbmd0aD49eCh0aGlzLGFyLFwiZlwiKS5mcmFtZUxpbWl0SW5JZGVhbFpvb21bMV0mJih4KHRoaXMsYXIsXCJmXCIpLmZyYW1lQXJyYXlJbklkZWFsWm9vbS5sZW5ndGg9MCx4KHRoaXMsb3IsXCJmXCIpLmVuaGFuY2VkRm9jdXMpKXtjb25zdCB0PWcucG9pbnRzO3RyeXthd2FpdCBlKHttb2RlOlwibWFudWFsXCIsYXJlYTp7Y2VudGVyUG9pbnQ6e3g6KHRbMF0ueCt0WzJdLngpLzIrXCJweFwiLHk6KHRbMF0ueSt0WzJdLnkpLzIrXCJweFwifSx3aWR0aDp0WzJdLngtdFswXS54K1wicHhcIixoZWlnaHQ6dFsyXS55LXRbMF0ueStcInB4XCJ9fSl9Y2F0Y2godCl7Y29uc3QgZT10Lm1lc3NhZ2V8fHQ7Y29uc29sZS53YXJuKGUpfXRoaXMuY2xlYXJCdWZmZXIoKX19aWYoIXgodGhpcyxvcixcImZcIikuYXV0b1pvb20mJngodGhpcyxvcixcImZcIikuZW5oYW5jZWRGb2N1cyYmKHgodGhpcyxhcixcImZcIikuYXV0b0ZvY3VzRnJhbWVBcnJheS5wdXNoKCEwKSx4KHRoaXMsYXIsXCJmXCIpLmF1dG9Gb2N1c0ZyYW1lQXJyYXkuc3BsaWNlKDAseCh0aGlzLGFyLFwiZlwiKS5hdXRvRm9jdXNGcmFtZUFycmF5Lmxlbmd0aC14KHRoaXMsYXIsXCJmXCIpLmF1dG9Gb2N1c0ZyYW1lTGltaXRbMF0pLHgodGhpcyxhcixcImZcIikuYXV0b0ZvY3VzRnJhbWVBcnJheS5maWx0ZXIoKHQ9PiEwPT09dCkpLmxlbmd0aD49eCh0aGlzLGFyLFwiZlwiKS5hdXRvRm9jdXNGcmFtZUxpbWl0WzFdKSl7eCh0aGlzLGFyLFwiZlwiKS5hdXRvRm9jdXNGcmFtZUFycmF5Lmxlbmd0aD0wO3RyeXtjb25zdCB0PWcucG9pbnRzO2F3YWl0IGUoe21vZGU6XCJtYW51YWxcIixhcmVhOntjZW50ZXJQb2ludDp7eDoodFswXS54K3RbMl0ueCkvMitcInB4XCIseToodFswXS55K3RbMl0ueSkvMitcInB4XCJ9LHdpZHRoOnRbMl0ueC10WzBdLngrXCJweFwiLGhlaWdodDp0WzJdLnktdFswXS55K1wicHhcIn19KX1jYXRjaCh0KXtjb25zdCBlPXQubWVzc2FnZXx8dDtjb25zb2xlLndhcm4oZSl9dGhpcy5jbGVhckJ1ZmZlcigpfX1lbHNle2lmKHgodGhpcyxvcixcImZcIikuYXV0b1pvb20pe2lmKHgodGhpcyxhcixcImZcIikuYXV0b1pvb21JbkZyYW1lQXJyYXkucHVzaCghMSkseCh0aGlzLGFyLFwiZlwiKS5hdXRvWm9vbUluRnJhbWVBcnJheS5zcGxpY2UoMCx4KHRoaXMsYXIsXCJmXCIpLmF1dG9ab29tSW5GcmFtZUFycmF5Lmxlbmd0aC14KHRoaXMsYXIsXCJmXCIpLmF1dG9ab29tSW5GcmFtZUxpbWl0WzBdKSx4KHRoaXMsYXIsXCJmXCIpLmF1dG9ab29tT3V0RnJhbWVDb3VudCsrLHgodGhpcyxhcixcImZcIikuZnJhbWVBcnJheUluSWRlYWxab29tLnB1c2goITEpLHgodGhpcyxhcixcImZcIikuZnJhbWVBcnJheUluSWRlYWxab29tLnNwbGljZSgwLHgodGhpcyxhcixcImZcIikuZnJhbWVBcnJheUluSWRlYWxab29tLmxlbmd0aC14KHRoaXMsYXIsXCJmXCIpLmZyYW1lTGltaXRJbklkZWFsWm9vbVswXSkseCh0aGlzLGFyLFwiZlwiKS5hdXRvWm9vbU91dEZyYW1lQ291bnQ+PXgodGhpcyxhcixcImZcIikuYXV0b1pvb21PdXRGcmFtZUxpbWl0KXt4KHRoaXMsYXIsXCJmXCIpLmF1dG9ab29tT3V0RnJhbWVDb3VudD0wO2NvbnN0IGU9dGhpcy5nZXRab29tU2V0dGluZ3MoKS5mYWN0b3I7bGV0IGk9ZS1NYXRoLm1heCgoZS0xKSp4KHRoaXMsYXIsXCJmXCIpLmF1dG9ab29tT3V0U3RlcFJhdGUseCh0aGlzLGFyLFwiZlwiKS5hdXRvWm9vbU91dE1pblN0ZXApO2k9TWF0aC5tYXgoeCh0aGlzLGFyLFwiZlwiKS5taW5WYWx1ZSxpKSxpPU1hdGgubWluKHgodGhpcyxhcixcImZcIikubWF4VmFsdWUsaSk7dHJ5e2F3YWl0IHQoe2ZhY3RvcjppfSl9Y2F0Y2godCl7Y29uc3QgZT10Lm1lc3NhZ2V8fHQ7Y29uc29sZS53YXJuKGUpfXRoaXMuY2xlYXJCdWZmZXIoKX14KHRoaXMsb3IsXCJmXCIpLmVuaGFuY2VkRm9jdXMmJmUoe21vZGU6XCJjb250aW51b3VzXCJ9KS5jYXRjaCgoKCk9Pnt9KSl9IXgodGhpcyxvcixcImZcIikuYXV0b1pvb20mJngodGhpcyxvcixcImZcIikuZW5oYW5jZWRGb2N1cyYmKHgodGhpcyxhcixcImZcIikuYXV0b0ZvY3VzRnJhbWVBcnJheS5sZW5ndGg9MCxlKHttb2RlOlwiY29udGludW91c1wifSkuY2F0Y2goKCgpPT57fSkpKX19fSxDKHRoaXMsaHIsbmV3IG1yKDFlNCksXCJmXCIpfXNldENhbWVyYVZpZXcodCl7aWYoISh0IGluc3RhbmNlb2Ygd2UpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIHZpZXcuXCIpO2lmKHQuZGlzcG9zZWQpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGNhbWVyYSB2aWV3IGhhcyBiZWVuIGRpc3Bvc2VkLlwiKTtpZih0aGlzLmlzT3BlbigpKXRocm93IG5ldyBFcnJvcihcIkl0IGlzIG5vdCBhbGxvd2VkIHRvIGNoYW5nZSBjYW1lcmEgdmlldyB3aGVuIHRoZSBjYW1lcmEgaXMgb3Blbi5cIik7dGhpcy5yZWxlYXNlQ2FtZXJhVmlldygpLHQuX3NpbmdsZUZyYW1lTW9kZT10aGlzLnNpbmdsZUZyYW1lTW9kZSx0Ll9vblNpbmdsZUZyYW1lQWNxdWlyZWQ9dGhpcy5fb25TaW5nbGVGcmFtZUFjcXVpcmVkLHRoaXMudmlkZW9TcmMmJih0aGlzLmNhbWVyYVZpZXcuX2hpZGVEZWZhdWx0U2VsZWN0aW9uPSEwKSx4KHRoaXMsemksXCJtXCIsY3IpLmNhbGwodGhpcyl8fHRoaXMuY2FtZXJhTWFuYWdlci5zZXRWaWRlb0VsKHQuZ2V0VmlkZW9FbGVtZW50KCkpLHRoaXMuY2FtZXJhVmlldz10LHRoaXMuYWRkTGlzdGVuZXJUb1ZpZXcoKX1nZXRDYW1lcmFWaWV3KCl7cmV0dXJuIHRoaXMuY2FtZXJhVmlld31yZWxlYXNlQ2FtZXJhVmlldygpe3RoaXMuY2FtZXJhVmlldyYmKHRoaXMucmVtb3ZlTGlzdGVuZXJGcm9tVmlldygpLHRoaXMuY2FtZXJhVmlldy5kaXNwb3NlZHx8KHRoaXMuY2FtZXJhVmlldy5fc2luZ2xlRnJhbWVNb2RlPVwiZGlzYWJsZWRcIix0aGlzLmNhbWVyYVZpZXcuX29uU2luZ2xlRnJhbWVBY3F1aXJlZD1udWxsLHRoaXMuY2FtZXJhVmlldy5faGlkZURlZmF1bHRTZWxlY3Rpb249ITEpLHRoaXMuY2FtZXJhTWFuYWdlci5yZWxlYXNlVmlkZW9FbCgpLHRoaXMuY2FtZXJhVmlldz1udWxsKX1hZGRMaXN0ZW5lclRvVmlldygpe2lmKCF0aGlzLmNhbWVyYVZpZXcpcmV0dXJuO2lmKHRoaXMuY2FtZXJhVmlldy5kaXNwb3NlZCl0aHJvdyBuZXcgRXJyb3IoXCInY2FtZXJhVmlldycgaGFzIGJlZW4gZGlzcG9zZWQuXCIpO2NvbnN0IHQ9dGhpcy5jYW1lcmFWaWV3O3godGhpcyx6aSxcIm1cIixjcikuY2FsbCh0aGlzKXx8dGhpcy52aWRlb1NyY3x8KHQuX2lubmVyQ29tcG9uZW50JiYodGhpcy5jYW1lcmFNYW5hZ2VyLnRhcEZvY3VzRXZlbnRCb3VuZEVsPXQuX2lubmVyQ29tcG9uZW50KSx0Ll9zZWxDYW0mJnQuX3NlbENhbS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsdGhpcy5fb25DYW1lcmFTZWxDaGFuZ2UpLHQuX3NlbFJzbCYmdC5fc2VsUnNsLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIix0aGlzLl9vblJlc29sdXRpb25TZWxDaGFuZ2UpKSx0Ll9idG5DbG9zZSYmdC5fYnRuQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fb25DbG9zZUJ0bkNsaWNrKX1yZW1vdmVMaXN0ZW5lckZyb21WaWV3KCl7aWYoIXRoaXMuY2FtZXJhVmlld3x8dGhpcy5jYW1lcmFWaWV3LmRpc3Bvc2VkKXJldHVybjtjb25zdCB0PXRoaXMuY2FtZXJhVmlldzt0aGlzLmNhbWVyYU1hbmFnZXIudGFwRm9jdXNFdmVudEJvdW5kRWw9bnVsbCx0Ll9zZWxDYW0mJnQuX3NlbENhbS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsdGhpcy5fb25DYW1lcmFTZWxDaGFuZ2UpLHQuX3NlbFJzbCYmdC5fc2VsUnNsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIix0aGlzLl9vblJlc29sdXRpb25TZWxDaGFuZ2UpLHQuX2J0bkNsb3NlJiZ0Ll9idG5DbG9zZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9vbkNsb3NlQnRuQ2xpY2spfWdldENhbWVyYVN0YXRlKCl7cmV0dXJuIHgodGhpcyx6aSxcIm1cIixjcikuY2FsbCh0aGlzKT94KHRoaXMsWmksXCJmXCIpOm5ldyBNYXAoW1tcImNsb3NlZFwiLFwiY2xvc2VkXCJdLFtcIm9wZW5pbmdcIixcIm9wZW5pbmdcIl0sW1wib3BlbmVkXCIsXCJvcGVuXCJdXSkuZ2V0KHRoaXMuY2FtZXJhTWFuYWdlci5zdGF0ZSl9aXNPcGVuKCl7cmV0dXJuXCJvcGVuXCI9PT10aGlzLmdldENhbWVyYVN0YXRlKCl9Z2V0VmlkZW9FbCgpe3JldHVybiB0aGlzLnZpZGVvfWFzeW5jIG9wZW4oKXtjb25zdCB0PXRoaXMuY2FtZXJhVmlldztpZihudWxsPT10P3ZvaWQgMDp0LmRpc3Bvc2VkKXRocm93IG5ldyBFcnJvcihcIidjYW1lcmFWaWV3JyBoYXMgYmVlbiBkaXNwb3NlZC5cIik7dCYmKHQuX3NpbmdsZUZyYW1lTW9kZT10aGlzLnNpbmdsZUZyYW1lTW9kZSx4KHRoaXMsemksXCJtXCIsY3IpLmNhbGwodGhpcyk/dC5fY2xpY2tJcHRTaW5nbGVGcmFtZU1vZGUoKToodGhpcy5jYW1lcmFNYW5hZ2VyLnNldFZpZGVvRWwodC5nZXRWaWRlb0VsZW1lbnQoKSksdC5fc3RhcnRMb2FkaW5nKCkpKTtsZXQgZT17d2lkdGg6MCxoZWlnaHQ6MCxkZXZpY2VJZDpcIlwifTtpZih4KHRoaXMsemksXCJtXCIsY3IpLmNhbGwodGhpcykpO2Vsc2V7dHJ5e2F3YWl0IHRoaXMuY2FtZXJhTWFuYWdlci5vcGVuKCl9Y2F0Y2goZSl7dGhyb3cgdCYmdC5fc3RvcExvYWRpbmcoKSxcIk5vdEZvdW5kRXJyb3JcIj09PWUubmFtZT9uZXcgRXJyb3IoYE5vIGNhbWVyYSBkZXZpY2VzIHdlcmUgZGV0ZWN0ZWQuIFBsZWFzZSBlbnN1cmUgYSBjYW1lcmEgaXMgY29ubmVjdGVkIGFuZCByZWNvZ25pemVkIGJ5IHlvdXIgc3lzdGVtLiAke251bGw9PWU/dm9pZCAwOmUubmFtZX06ICR7bnVsbD09ZT92b2lkIDA6ZS5tZXNzYWdlfWApOlwiTm90QWxsb3dlZEVycm9yXCI9PT1lLm5hbWU/bmV3IEVycm9yKGBDYW1lcmEgYWNjZXNzIGlzIGJsb2NrZWQuIFBsZWFzZSBjaGVjayB5b3VyIGJyb3dzZXIgc2V0dGluZ3Mgb3IgZ3JhbnQgcGVybWlzc2lvbiB0byB1c2UgdGhlIGNhbWVyYS4gJHtudWxsPT1lP3ZvaWQgMDplLm5hbWV9OiAke251bGw9PWU/dm9pZCAwOmUubWVzc2FnZX1gKTplfWxldCBpLHI9dC5nZXRVSUVsZW1lbnQoKTtpZihyPXIuc2hhZG93Um9vdHx8cixpPXIucXVlcnlTZWxlY3RvcihcIi5kY2UtbWFjcm8tdXNlLW1vYmlsZS1uYXRpdmUtbGlrZS11aVwiKSl7bGV0IHQ9ci5lbFRvcmNoQXV0bz1yLnF1ZXJ5U2VsZWN0b3IoXCIuZGNlLW1uLXRvcmNoLWF1dG9cIiksZT1yLmVsVG9yY2hPbj1yLnF1ZXJ5U2VsZWN0b3IoXCIuZGNlLW1uLXRvcmNoLW9uXCIpLG49ci5lbFRvcmNoT2ZmPXIucXVlcnlTZWxlY3RvcihcIi5kY2UtbW4tdG9yY2gtb2ZmXCIpO3QmJihlLnN0eWxlLmRpc3BsYXk9bnVsbD09dGhpcy5pc1RvcmNoT24/XCJcIjpcIm5vbmVcIiksZSYmKGUuc3R5bGUuZGlzcGxheT0xPT10aGlzLmlzVG9yY2hPbj9cIlwiOlwibm9uZVwiKSxuJiYobi5zdHlsZS5kaXNwbGF5PTA9PXRoaXMuaXNUb3JjaE9uP1wiXCI6XCJub25lXCIpO2xldCBzPXIuZWxCZWVwT249ci5xdWVyeVNlbGVjdG9yKFwiLmRjZS1tbi1iZWVwLW9uXCIpLG89ci5lbEJlZXBPZmY9ci5xdWVyeVNlbGVjdG9yKFwiLmRjZS1tbi1iZWVwLW9mZlwiKTtzJiYocy5zdHlsZS5kaXNwbGF5PXByLmFsbG93QmVlcD9cIlwiOlwibm9uZVwiKSxvJiYoby5zdHlsZS5kaXNwbGF5PXByLmFsbG93QmVlcD9cIm5vbmVcIjpcIlwiKTtsZXQgYT1yLmVsVmlicmF0ZU9uPXIucXVlcnlTZWxlY3RvcihcIi5kY2UtbW4tdmlicmF0ZS1vblwiKSxoPXIuZWxWaWJyYXRlT2ZmPXIucXVlcnlTZWxlY3RvcihcIi5kY2UtbW4tdmlicmF0ZS1vZmZcIik7YSYmKGEuc3R5bGUuZGlzcGxheT1wci5hbGxvd1ZpYnJhdGU/XCJcIjpcIm5vbmVcIiksaCYmKGguc3R5bGUuZGlzcGxheT1wci5hbGxvd1ZpYnJhdGU/XCJub25lXCI6XCJcIiksci5lbFJlc29sdXRpb25Cb3g9ci5xdWVyeVNlbGVjdG9yKFwiLmRjZS1tbi1yZXNvbHV0aW9uLWJveFwiKTtsZXQgbCxjPXIuZWxab29tPXIucXVlcnlTZWxlY3RvcihcIi5kY2UtbW4tem9vbVwiKTtjJiYoYy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGw9ci5lbFpvb21TcGFuPWMucXVlcnlTZWxlY3RvcihcInNwYW5cIikpO2xldCB1PXIuZWxUb2FzdD1yLnF1ZXJ5U2VsZWN0b3IoXCIuZGNlLW1uLXRvYXN0XCIpLGQ9ci5lbENhbWVyYUNsb3NlPXIucXVlcnlTZWxlY3RvcihcIi5kY2UtbW4tY2FtZXJhLWNsb3NlXCIpLGY9ci5lbFRha2VQaG90bz1yLnF1ZXJ5U2VsZWN0b3IoXCIuZGNlLW1uLXRha2UtcGhvdG9cIiksZz1yLmVsQ2FtZXJhU3dpdGNoPXIucXVlcnlTZWxlY3RvcihcIi5kY2UtbW4tY2FtZXJhLXN3aXRjaFwiKSxtPXIuZWxDYW1lcmFBbmRSZXNvbHV0aW9uU2V0dGluZ3M9ci5xdWVyeVNlbGVjdG9yKFwiLmRjZS1tbi1jYW1lcmEtYW5kLXJlc29sdXRpb24tc2V0dGluZ3NcIik7bSYmKG0uc3R5bGUuZGlzcGxheT1cIm5vbmVcIik7Y29uc3QgcD1yLmRjZU1uRnM9e30sdj0oKT0+e3RoaXMudHVybk9uVG9yY2goKX07bnVsbD09dHx8dC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIix2KTtjb25zdCBfPSgpPT57dGhpcy50dXJuT2ZmVG9yY2goKX07bnVsbD09ZXx8ZS5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIixfKTtjb25zdCB5PSgpPT57dGhpcy50dXJuQXV0b1RvcmNoKCl9O251bGw9PW58fG4uYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIseSk7Y29uc3Qgdz0oKT0+e3ByLmFsbG93QmVlcD0hcHIuYWxsb3dCZWVwLHMmJihzLnN0eWxlLmRpc3BsYXk9cHIuYWxsb3dCZWVwP1wiXCI6XCJub25lXCIpLG8mJihvLnN0eWxlLmRpc3BsYXk9cHIuYWxsb3dCZWVwP1wibm9uZVwiOlwiXCIpfTtmb3IobGV0IHQgb2ZbbyxzXSludWxsPT10fHx0LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLHcpO2NvbnN0IGI9KCk9Pntwci5hbGxvd1ZpYnJhdGU9IXByLmFsbG93VmlicmF0ZSxhJiYoYS5zdHlsZS5kaXNwbGF5PXByLmFsbG93VmlicmF0ZT9cIlwiOlwibm9uZVwiKSxoJiYoaC5zdHlsZS5kaXNwbGF5PXByLmFsbG93VmlicmF0ZT9cIm5vbmVcIjpcIlwiKX07Zm9yKGxldCB0IG9mW2gsYV0pbnVsbD09dHx8dC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIixiKTtjb25zdCB4PWFzeW5jIHQ9PntsZXQgZSxpPXQudGFyZ2V0O2lmKGU9aS5jbG9zZXN0KFwiLmRjZS1tbi1jYW1lcmEtb3B0aW9uXCIpKXRoaXMuc2VsZWN0Q2FtZXJhKGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1kYXZpY2UtaWRcIikpO2Vsc2UgaWYoZT1pLmNsb3Nlc3QoXCIuZGNlLW1uLXJlc29sdXRpb24tb3B0aW9uXCIpKXtsZXQgdCxpPXBhcnNlSW50KGUuZ2V0QXR0cmlidXRlKFwiZGF0YS13aWR0aFwiKSkscj1wYXJzZUludChlLmdldEF0dHJpYnV0ZShcImRhdGEtaGVpZ2h0XCIpKSxuPWF3YWl0IHRoaXMuc2V0UmVzb2x1dGlvbih7d2lkdGg6aSxoZWlnaHQ6cn0pO3tsZXQgZT1NYXRoLm1heChuLndpZHRoLG4uaGVpZ2h0KSxpPU1hdGgubWluKG4ud2lkdGgsbi5oZWlnaHQpO3Q9aTw9MTA4MD9pK1wiUFwiOmU8M2UzP1wiMktcIjpNYXRoLnJvdW5kKGUvMWUzKStcIktcIn10IT1lLnRleHRDb250ZW50JiZUKGBGYWxsYmFjayB0byAke3R9YCl9ZWxzZSBpLmNsb3Nlc3QoXCIuZGNlLW1uLWNhbWVyYS1hbmQtcmVzb2x1dGlvbi1zZXR0aW5nc1wiKXx8KGkuY2xvc2VzdChcIi5kY2UtbW4tcmVzb2x1dGlvbi1ib3hcIik/bSYmKG0uc3R5bGUuZGlzcGxheT1tLnN0eWxlLmRpc3BsYXk/XCJcIjpcIm5vbmVcIik6bSYmXCJcIj09PW0uc3R5bGUuZGlzcGxheSYmKG0uc3R5bGUuZGlzcGxheT1cIm5vbmVcIikpfTtyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHgpO2xldCBDPW51bGw7cC5mdW5jSW5mb1pvb21DaGFuZ2U9KHQsZT0zZTMpPT57YyYmbCYmKGwudGV4dENvbnRlbnQ9dC50b0ZpeGVkKDEpLGMuc3R5bGUuZGlzcGxheT1cIlwiLG51bGwhPUMmJihjbGVhclRpbWVvdXQoQyksQz1udWxsKSxDPXNldFRpbWVvdXQoKCgpPT57Yy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLEM9bnVsbH0pLGUpKX07bGV0IFM9bnVsbCxUPXAuZnVuY1Nob3dUb2FzdD0odCxlPTNlMyk9Pnt1JiYodS50ZXh0Q29udGVudD10LHUuc3R5bGUuZGlzcGxheT1cIlwiLG51bGwhPVMmJihjbGVhclRpbWVvdXQoUyksUz1udWxsKSxTPXNldFRpbWVvdXQoKCgpPT57dS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLFM9bnVsbH0pLGUpKX07Y29uc3QgRT0oKT0+e3RoaXMuY2xvc2UoKX07bnVsbD09ZHx8ZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixFKTtjb25zdCBPPSgpPT57fTtudWxsPT1mfHxmLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLE8pO2NvbnN0IEk9KCk9Pnt2YXIgdCxlO2xldCBpLHI9dGhpcy5nZXRWaWRlb1NldHRpbmdzKCksbj1yLnZpZGVvLmZhY2luZ01vZGUscz1udWxsPT09KGU9bnVsbD09PSh0PXRoaXMuY2FtZXJhTWFuYWdlci5nZXRDYW1lcmEoKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQubGFiZWwpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnRvTG93ZXJDYXNlKCksbz1udWxsPT1zP3ZvaWQgMDpzLmluZGV4T2YoXCJmcm9udFwiKTstMT09PW8mJihvPW51bGw9PXM/dm9pZCAwOnMuaW5kZXhPZihcIuWJjVwiKSk7bGV0IGE9bnVsbD09cz92b2lkIDA6cy5pbmRleE9mKFwiYmFja1wiKTtpZigtMT09PWEmJihhPW51bGw9PXM/dm9pZCAwOnMuaW5kZXhPZihcIuWQjlwiKSksXCJudW1iZXJcIj09dHlwZW9mIG8mJi0xIT09bz9pPSEwOlwibnVtYmVyXCI9PXR5cGVvZiBhJiYtMSE9PWEmJihpPSExKSx2b2lkIDA9PT1pKXtpPVwidXNlclwiPT09KChudWxsPT1uP3ZvaWQgMDpuLmlkZWFsKXx8KG51bGw9PW4/dm9pZCAwOm4uZXhhY3QpfHxuKX1yLnZpZGVvLmZhY2luZ01vZGU9e2lkZWFsOmk/XCJlbnZpcm9ubWVudFwiOlwidXNlclwifSxkZWxldGUgci52aWRlby5kZXZpY2VJZCx0aGlzLnVwZGF0ZVZpZGVvU2V0dGluZ3Mocil9O251bGw9PWd8fGcuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsSSk7bGV0IEw9LTEvMCxEPTE7Y29uc3QgTT10PT57bGV0IGU9RGF0ZS5ub3coKTtlLUw+MWUzJiYoRD10aGlzLmdldFpvb21TZXR0aW5ncygpLmZhY3RvciksRC09dC5kZWx0YVkvMjAwLEQ+MjAmJihEPTIwKSxEPDEmJihEPTEpLHRoaXMuc2V0Wm9vbSh7ZmFjdG9yOkR9KSxMPWV9O2kuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsTSk7Y29uc3QgRj1uZXcgTWFwO2xldCBQPSExO2NvbnN0IGs9YXN5bmMgdD0+e3ZhciBlO2Zvcih0LnRvdWNoZXMubGVuZ3RoPj0yJiZcInRvdWNobW92ZVwiPT10LnR5cGUmJnQucHJldmVudERlZmF1bHQoKTt0LmNoYW5nZWRUb3VjaGVzLmxlbmd0aD4xJiYyPT10LnRvdWNoZXMubGVuZ3RoOyl7bGV0IGk9dC50b3VjaGVzWzBdLHI9dC50b3VjaGVzWzFdLG49Ri5nZXQoaS5pZGVudGlmaWVyKSxzPUYuZ2V0KHIuaWRlbnRpZmllcik7aWYoIW58fCFzKWJyZWFrO2xldCBvPU1hdGgucG93KE1hdGgucG93KG4ueC1zLngsMikrTWF0aC5wb3cobi55LXMueSwyKSwuNSksYT1NYXRoLnBvdyhNYXRoLnBvdyhpLmNsaWVudFgtci5jbGllbnRYLDIpK01hdGgucG93KGkuY2xpZW50WS1yLmNsaWVudFksMiksLjUpLGg9RGF0ZS5ub3coKTtpZihQfHxoLUw8MTAwKXJldHVybjtoLUw+MWUzJiYoRD10aGlzLmdldFpvb21TZXR0aW5ncygpLmZhY3RvciksRCo9YS9vLEQ+MjAmJihEPTIwKSxEPDEmJihEPTEpO2xldCBsPSExO1wic2FmYXJpXCI9PShudWxsPT09KGU9bnVsbD09QT92b2lkIDA6QS5icm93c2VyKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS50b0xvY2FsZUxvd2VyQ2FzZSgpKSYmKGEvbz4xJiZEPDI/KEQ9MixsPSEwKTphL288MSYmRDwyJiYoRD0xLGw9ITApKSxQPSEwLGwmJlQoXCJ6b29taW5nLi4uXCIpLGF3YWl0IHRoaXMuc2V0Wm9vbSh7ZmFjdG9yOkR9KSxsJiYodS50ZXh0Q29udGVudD1cIlwiKSxQPSExLEw9RGF0ZS5ub3coKTticmVha31GLmNsZWFyKCk7Zm9yKGxldCBlIG9mIHQudG91Y2hlcylGLnNldChlLmlkZW50aWZpZXIse3g6ZS5jbGllbnRYLHk6ZS5jbGllbnRZfSl9O3IuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixrKSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixrKSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLGspLHIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsaykscC51bmJpbmQ9KCk9PntudWxsPT10fHx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLHYpLG51bGw9PWV8fGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsXyksbnVsbD09bnx8bi5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIix5KTtmb3IobGV0IHQgb2ZbbyxzXSludWxsPT10fHx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLHcpO2ZvcihsZXQgdCBvZltoLGFdKW51bGw9PXR8fHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsYik7ci5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix4KSxudWxsPT1kfHxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLEUpLG51bGw9PWZ8fGYucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsTyksbnVsbD09Z3x8Zy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIixJKSxpLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLE0pLHIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIixrKSxyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIixrKSxyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLGspLHIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsayksZGVsZXRlIHIuZGNlTW5GcyxpLnN0eWxlLmRpc3BsYXk9XCJub25lXCJ9LGkuc3R5bGUuZGlzcGxheT1cIlwiLHQmJm51bGw9PXRoaXMuaXNUb3JjaE9uJiZzZXRUaW1lb3V0KCgoKT0+e3RoaXMudHVybkF1dG9Ub3JjaCgxZTMpfSksMCl9dGhpcy5pc1RvcmNoT24mJnRoaXMudHVybk9uVG9yY2goKS5jYXRjaCgoKCk9Pnt9KSk7Y29uc3Qgbj10aGlzLmdldFJlc29sdXRpb24oKTtlLndpZHRoPW4ud2lkdGgsZS5oZWlnaHQ9bi5oZWlnaHQsZS5kZXZpY2VJZD10aGlzLmdldFNlbGVjdGVkQ2FtZXJhKCkuZGV2aWNlSWR9cmV0dXJuIEModGhpcyxaaSxcIm9wZW5cIixcImZcIiksdCYmKHQuX2lubmVyQ29tcG9uZW50LnN0eWxlLmRpc3BsYXk9XCJcIix4KHRoaXMsemksXCJtXCIsY3IpLmNhbGwodGhpcyl8fCh0Ll9zdG9wTG9hZGluZygpLHQuX3JlbmRlckNhbWVyYXNJbmZvKHRoaXMuZ2V0U2VsZWN0ZWRDYW1lcmEoKSx0aGlzLmNhbWVyYU1hbmFnZXIuX2FyckNhbWVyYXMpLHQuX3JlbmRlclJlc29sdXRpb25JbmZvKHt3aWR0aDplLndpZHRoLGhlaWdodDplLmhlaWdodH0pLHQuZXZlbnRIYW5kbGVyLmZpcmUoXCJjb250ZW50OnVwZGF0ZWRcIixudWxsLHthc3luYzohMX0pLHQuZXZlbnRIYW5kbGVyLmZpcmUoXCJ2aWRlb0VsOnJlc2l6ZWRcIixudWxsLHthc3luYzohMX0pKSkseCh0aGlzLEppLFwiZlwiKS5maXJlKFwib3BlbmVkXCIsbnVsbCx7dGFyZ2V0OnRoaXMsYXN5bmM6ITF9KSxlfWNsb3NlKCl7dmFyIHQ7Y29uc3QgZT10aGlzLmNhbWVyYVZpZXc7aWYobnVsbD09ZT92b2lkIDA6ZS5kaXNwb3NlZCl0aHJvdyBuZXcgRXJyb3IoXCInY2FtZXJhVmlldycgaGFzIGJlZW4gZGlzcG9zZWQuXCIpO2lmKHRoaXMuc3RvcEZldGNoaW5nKCksdGhpcy5jbGVhckJ1ZmZlcigpLHgodGhpcyx6aSxcIm1cIixjcikuY2FsbCh0aGlzKSk7ZWxzZXt0aGlzLmNhbWVyYU1hbmFnZXIuY2xvc2UoKTtsZXQgaT1lLmdldFVJRWxlbWVudCgpO2k9aS5zaGFkb3dSb290fHxpLGkucXVlcnlTZWxlY3RvcihcIi5kY2UtbWFjcm8tdXNlLW1vYmlsZS1uYXRpdmUtbGlrZS11aVwiKSYmKG51bGw9PT0odD1pLmRjZU1uRnMpfHx2b2lkIDA9PT10fHx0LnVuYmluZCgpKX1DKHRoaXMsWmksXCJjbG9zZWRcIixcImZcIikseCh0aGlzLGhyLFwiZlwiKS5zdG9wQ2hhcmdpbmcoKSxlJiYoZS5faW5uZXJDb21wb25lbnQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix4KHRoaXMsemksXCJtXCIsY3IpLmNhbGwodGhpcykmJmUuX2lubmVyQ29tcG9uZW50LnJlbW92ZUVsZW1lbnQoXCJjb250ZW50XCIpLGUuX3N0b3BMb2FkaW5nKCkpLHgodGhpcyxKaSxcImZcIikuZmlyZShcImNsb3NlZFwiLG51bGwse3RhcmdldDp0aGlzLGFzeW5jOiExfSl9cGF1c2UoKXtpZih4KHRoaXMsemksXCJtXCIsY3IpLmNhbGwodGhpcykpdGhyb3cgbmV3IEVycm9yKFwiJ3BhdXNlKCknIGlzIGludmFsaWQgaW4gJ3NpbmdsZUZyYW1lTW9kZScuXCIpO3RoaXMuY2FtZXJhTWFuYWdlci5wYXVzZSgpfWlzUGF1c2VkKCl7dmFyIHQ7cmV0dXJuIXgodGhpcyx6aSxcIm1cIixjcikuY2FsbCh0aGlzKSYmITA9PT0obnVsbD09PSh0PXRoaXMudmlkZW8pfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnBhdXNlZCl9YXN5bmMgcmVzdW1lKCl7aWYoeCh0aGlzLHppLFwibVwiLGNyKS5jYWxsKHRoaXMpKXRocm93IG5ldyBFcnJvcihcIidyZXN1bWUoKScgaXMgaW52YWxpZCBpbiAnc2luZ2xlRnJhbWVNb2RlJy5cIik7YXdhaXQgdGhpcy5jYW1lcmFNYW5hZ2VyLnJlc3VtZSgpfWFzeW5jIHNlbGVjdENhbWVyYSh0KXtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlLlwiKTtsZXQgZTtlPVwic3RyaW5nXCI9PXR5cGVvZiB0P3Q6dC5kZXZpY2VJZCxhd2FpdCB0aGlzLmNhbWVyYU1hbmFnZXIuc2V0Q2FtZXJhKGUpLHRoaXMuaXNUb3JjaE9uPSExO2NvbnN0IGk9dGhpcy5nZXRSZXNvbHV0aW9uKCkscj10aGlzLmNhbWVyYVZpZXc7cmV0dXJuIHImJiFyLmRpc3Bvc2VkJiYoci5fc3RvcExvYWRpbmcoKSxyLl9yZW5kZXJDYW1lcmFzSW5mbyh0aGlzLmdldFNlbGVjdGVkQ2FtZXJhKCksdGhpcy5jYW1lcmFNYW5hZ2VyLl9hcnJDYW1lcmFzKSxyLl9yZW5kZXJSZXNvbHV0aW9uSW5mbyh7d2lkdGg6aS53aWR0aCxoZWlnaHQ6aS5oZWlnaHR9KSkse3dpZHRoOmkud2lkdGgsaGVpZ2h0OmkuaGVpZ2h0LGRldmljZUlkOnRoaXMuZ2V0U2VsZWN0ZWRDYW1lcmEoKS5kZXZpY2VJZH19Z2V0U2VsZWN0ZWRDYW1lcmEoKXtyZXR1cm4gdGhpcy5jYW1lcmFNYW5hZ2VyLmdldENhbWVyYSgpfWFzeW5jIGdldEFsbENhbWVyYXMoKXtyZXR1cm4gdGhpcy5jYW1lcmFNYW5hZ2VyLmdldENhbWVyYXMoKX1hc3luYyBzZXRSZXNvbHV0aW9uKHQpe2F3YWl0IHRoaXMuY2FtZXJhTWFuYWdlci5zZXRSZXNvbHV0aW9uKHQud2lkdGgsdC5oZWlnaHQpLHRoaXMuaXNUb3JjaE9uJiZ0aGlzLnR1cm5PblRvcmNoKCkuY2F0Y2goKCgpPT57fSkpO2NvbnN0IGU9dGhpcy5nZXRSZXNvbHV0aW9uKCksaT10aGlzLmNhbWVyYVZpZXc7cmV0dXJuIGkmJiFpLmRpc3Bvc2VkJiYoaS5fc3RvcExvYWRpbmcoKSxpLl9yZW5kZXJSZXNvbHV0aW9uSW5mbyh7d2lkdGg6ZS53aWR0aCxoZWlnaHQ6ZS5oZWlnaHR9KSkse3dpZHRoOmUud2lkdGgsaGVpZ2h0OmUuaGVpZ2h0LGRldmljZUlkOnRoaXMuZ2V0U2VsZWN0ZWRDYW1lcmEoKS5kZXZpY2VJZH19Z2V0UmVzb2x1dGlvbigpe3JldHVybiB0aGlzLmNhbWVyYU1hbmFnZXIuZ2V0UmVzb2x1dGlvbigpfWdldEF2YWlsYWJsZVJlc29sdXRpb25zKCl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD10aGlzLmNhbWVyYU1hbmFnZXIpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmdldFJlc29sdXRpb25zKCl9X29uKHQsZSl7W1wib3BlbmVkXCIsXCJjbG9zZWRcIixcInNpbmdsZWZyYW1lYWNxdWlyZWRcIixcImZyYW1lYWRkZWR0b2J1ZmZlclwiXS5pbmNsdWRlcyh0LnRvTG93ZXJDYXNlKCkpP3godGhpcyxKaSxcImZcIikub24odCxlKTp0aGlzLmNhbWVyYU1hbmFnZXIub24odCxlKX1fb2ZmKHQsZSl7W1wib3BlbmVkXCIsXCJjbG9zZWRcIixcInNpbmdsZWZyYW1lYWNxdWlyZWRcIixcImZyYW1lYWRkZWR0b2J1ZmZlclwiXS5pbmNsdWRlcyh0LnRvTG93ZXJDYXNlKCkpP3godGhpcyxKaSxcImZcIikub2ZmKHQsZSk6dGhpcy5jYW1lcmFNYW5hZ2VyLm9mZih0LGUpfW9uKHQsZSl7Y29uc3QgaT10LnRvTG93ZXJDYXNlKCkscj1uZXcgTWFwKFtbXCJjYW1lcmFvcGVuXCIsXCJvcGVuZWRcIl0sW1wiY2FtZXJhY2xvc2VcIixcImNsb3NlZFwiXSxbXCJjYW1lcmFjaGFuZ2VcIixcImNhbWVyYTpjaGFuZ2VkXCJdLFtcInJlc29sdXRpb25jaGFuZ2VcIixcInJlc29sdXRpb246Y2hhbmdlZFwiXSxbXCJwbGF5ZWRcIixcInBsYXllZFwiXSxbXCJzaW5nbGVmcmFtZWFjcXVpcmVkXCIsXCJzaW5nbGVGcmFtZUFjcXVpcmVkXCJdLFtcImZyYW1lYWRkZWR0b2J1ZmZlclwiLFwiZnJhbWVBZGRlZFRvQnVmZmVyXCJdXSkuZ2V0KGkpO2lmKCFyKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZXZlbnQuXCIpO3RoaXMuX29uKHIsZSl9b2ZmKHQsZSl7Y29uc3QgaT10LnRvTG93ZXJDYXNlKCkscj1uZXcgTWFwKFtbXCJjYW1lcmFvcGVuXCIsXCJvcGVuZWRcIl0sW1wiY2FtZXJhY2xvc2VcIixcImNsb3NlZFwiXSxbXCJjYW1lcmFjaGFuZ2VcIixcImNhbWVyYTpjaGFuZ2VkXCJdLFtcInJlc29sdXRpb25jaGFuZ2VcIixcInJlc29sdXRpb246Y2hhbmdlZFwiXSxbXCJwbGF5ZWRcIixcInBsYXllZFwiXSxbXCJzaW5nbGVmcmFtZWFjcXVpcmVkXCIsXCJzaW5nbGVGcmFtZUFjcXVpcmVkXCJdLFtcImZyYW1lYWRkZWR0b2J1ZmZlclwiLFwiZnJhbWVBZGRlZFRvQnVmZmVyXCJdXSkuZ2V0KGkpO2lmKCFyKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZXZlbnQuXCIpO3RoaXMuX29mZihyLGUpfWdldFZpZGVvU2V0dGluZ3MoKXt2YXIgdDtyZXR1cm4gbnVsbD09PSh0PXRoaXMuY2FtZXJhTWFuYWdlcil8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZ2V0TWVkaWFTdHJlYW1Db25zdHJhaW50cygpfWFzeW5jIHVwZGF0ZVZpZGVvU2V0dGluZ3ModCl7dmFyIGU7YXdhaXQobnVsbD09PShlPXRoaXMuY2FtZXJhTWFuYWdlcil8fHZvaWQgMD09PWU/dm9pZCAwOmUuc2V0TWVkaWFTdHJlYW1Db25zdHJhaW50cyh0LCEwKSl9Z2V0Q2FwYWJpbGl0aWVzKCl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD10aGlzLmNhbWVyYU1hbmFnZXIpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmdldENhbWVyYUNhcGFiaWxpdGllcygpfWdldENhbWVyYVNldHRpbmdzKCl7cmV0dXJuIHRoaXMuY2FtZXJhTWFuYWdlci5nZXRDYW1lcmFTZXR0aW5ncygpfWFzeW5jIHR1cm5PblRvcmNoKCl7dmFyIHQsZTtpZih4KHRoaXMsemksXCJtXCIsY3IpLmNhbGwodGhpcykpdGhyb3cgbmV3IEVycm9yKFwiJ3R1cm5PblRvcmNoKCknIGlzIGludmFsaWQgaW4gJ3NpbmdsZUZyYW1lTW9kZScuXCIpO3RyeXthd2FpdChudWxsPT09KHQ9dGhpcy5jYW1lcmFNYW5hZ2VyKXx8dm9pZCAwPT09dD92b2lkIDA6dC50dXJuT25Ub3JjaCgpKX1jYXRjaCh0KXtsZXQgaT10aGlzLmNhbWVyYVZpZXcuZ2V0VUlFbGVtZW50KCk7dGhyb3cgaT1pLnNoYWRvd1Jvb3R8fGksbnVsbD09PShlPW51bGw9PWk/dm9pZCAwOmkuZGNlTW5Gcyl8fHZvaWQgMD09PWV8fGUuZnVuY1Nob3dUb2FzdChcIlRvcmNoIE5vdCBTdXBwb3J0ZWRcIiksdH10aGlzLmlzVG9yY2hPbj0hMDtsZXQgaT10aGlzLmNhbWVyYVZpZXcuZ2V0VUlFbGVtZW50KCk7aT1pLnNoYWRvd1Jvb3R8fGksaS5lbFRvcmNoQXV0byYmKGkuZWxUb3JjaEF1dG8uc3R5bGUuZGlzcGxheT1cIm5vbmVcIiksaS5lbFRvcmNoT24mJihpLmVsVG9yY2hPbi5zdHlsZS5kaXNwbGF5PVwiXCIpLGkuZWxUb3JjaE9mZiYmKGkuZWxUb3JjaE9mZi5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKX1hc3luYyB0dXJuT2ZmVG9yY2goKXt2YXIgdDtpZih4KHRoaXMsemksXCJtXCIsY3IpLmNhbGwodGhpcykpdGhyb3cgbmV3IEVycm9yKFwiJ3R1cm5PZmZUb3JjaCgpJyBpcyBpbnZhbGlkIGluICdzaW5nbGVGcmFtZU1vZGUnLlwiKTthd2FpdChudWxsPT09KHQ9dGhpcy5jYW1lcmFNYW5hZ2VyKXx8dm9pZCAwPT09dD92b2lkIDA6dC50dXJuT2ZmVG9yY2goKSksdGhpcy5pc1RvcmNoT249ITE7bGV0IGU9dGhpcy5jYW1lcmFWaWV3LmdldFVJRWxlbWVudCgpO2U9ZS5zaGFkb3dSb290fHxlLGUuZWxUb3JjaEF1dG8mJihlLmVsVG9yY2hBdXRvLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLGUuZWxUb3JjaE9uJiYoZS5lbFRvcmNoT24uc3R5bGUuZGlzcGxheT1cIm5vbmVcIiksZS5lbFRvcmNoT2ZmJiYoZS5lbFRvcmNoT2ZmLnN0eWxlLmRpc3BsYXk9XCJcIil9YXN5bmMgdHVybkF1dG9Ub3JjaCh0PTI1MCl7aWYobnVsbCE9dGhpcy5fdGFza2lkNEF1dG9Ub3JjaCl7aWYoISh0PHRoaXMuX2RlbGF5NEF1dG9Ub3JjaCkpcmV0dXJuO2NsZWFySW50ZXJ2YWwodGhpcy5fdGFza2lkNEF1dG9Ub3JjaCksdGhpcy5fdGFza2lkNEF1dG9Ub3JjaD1udWxsfXRoaXMuX2RlbGF5NEF1dG9Ub3JjaD10O2xldCBlPSExLGk9MCxyPTA7Y29uc3Qgbj1hc3luYygpPT57dmFyIHQsbjtpZihlfHxudWxsIT10aGlzLmlzVG9yY2hPbnx8IXRoaXMuaXNPcGVuKCkpcmV0dXJuIGNsZWFySW50ZXJ2YWwodGhpcy5fdGFza2lkNEF1dG9Ub3JjaCksdm9pZCh0aGlzLl90YXNraWQ0QXV0b1RvcmNoPW51bGwpO2lmKCsrcj4xMCYmdGhpcy5fZGVsYXk0QXV0b1RvcmNoPDFlMylyZXR1cm4gY2xlYXJJbnRlcnZhbCh0aGlzLl90YXNraWQ0QXV0b1RvcmNoKSx0aGlzLl90YXNraWQ0QXV0b1RvcmNoPW51bGwsdm9pZCB0aGlzLnR1cm5BdXRvVG9yY2goMWUzKTtsZXQgczt0cnl7cz10aGlzLmZldGNoSW1hZ2UoKX1jYXRjaCh0KXt9aWYoIXN8fCFzLndpZHRofHwhcy5oZWlnaHQpcmV0dXJuO2xldCBvPTA7aWYoYy5JUEZfR1JBWVNDQUxFRD09PXMuZm9ybWF0KXtmb3IobGV0IHQ9MDt0PHMuYnl0ZXMubGVuZ3RoOysrdClvKz1zLmJ5dGVzW3RdO28vPXMuYnl0ZXMubGVuZ3RofWVsc2V7aWYoYy5JUEZfQUJHUl84ODg4IT09cy5mb3JtYXQpcmV0dXJuO2ZvcihsZXQgdD0wO3Q8cy5ieXRlcy5sZW5ndGg7dCs9NClvKz1zLmJ5dGVzW3RdLG8rPXMuYnl0ZXNbdCsxXSxvKz1zLmJ5dGVzW3QrMl07by89cy5ieXRlcy5sZW5ndGgvNCozfWlmKG88dGhpcy5ncmF5VGhyZXNob2xkNEF1dG9Ub3JjaCl7aWYoKytpPj10aGlzLm1heERhcmtDb3VudDRBdXRvVHJvY2gpe2NvbnNvbGUubG9nKGBkYXJrQ291bnQgJHtpfWApO3RyeXthd2FpdCB0aGlzLnR1cm5PblRvcmNoKCksdGhpcy5pc1RvcmNoT249ITA7bGV0IGU9dGhpcy5jYW1lcmFWaWV3LmdldFVJRWxlbWVudCgpO2U9ZS5zaGFkb3dSb290fHxlLG51bGw9PT0odD1udWxsPT1lP3ZvaWQgMDplLmRjZU1uRnMpfHx2b2lkIDA9PT10fHx0LmZ1bmNTaG93VG9hc3QoXCJUb3JjaCBBdXRvIE9uXCIpfWNhdGNoKHQpe2NvbnNvbGUuZXJyb3IodCksZT0hMDtsZXQgaT10aGlzLmNhbWVyYVZpZXcuZ2V0VUlFbGVtZW50KCk7aT1pLnNoYWRvd1Jvb3R8fGksbnVsbD09PShuPW51bGw9PWk/dm9pZCAwOmkuZGNlTW5Gcyl8fHZvaWQgMD09PW58fG4uZnVuY1Nob3dUb2FzdChcIlRvcmNoIE5vdCBTdXBwb3J0ZWRcIil9fX1lbHNlIGk9MH07dGhpcy5fdGFza2lkNEF1dG9Ub3JjaD1zZXRJbnRlcnZhbChuLHQpLHRoaXMuaXNUb3JjaE9uPXZvaWQgMCxuKCk7bGV0IHM9dGhpcy5jYW1lcmFWaWV3LmdldFVJRWxlbWVudCgpO3M9cy5zaGFkb3dSb290fHxzLHMuZWxUb3JjaEF1dG8mJihzLmVsVG9yY2hBdXRvLnN0eWxlLmRpc3BsYXk9XCJcIikscy5lbFRvcmNoT24mJihzLmVsVG9yY2hPbi5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKSxzLmVsVG9yY2hPZmYmJihzLmVsVG9yY2hPZmYuc3R5bGUuZGlzcGxheT1cIm5vbmVcIil9YXN5bmMgc2V0Q29sb3JUZW1wZXJhdHVyZSh0KXtpZih4KHRoaXMsemksXCJtXCIsY3IpLmNhbGwodGhpcykpdGhyb3cgbmV3IEVycm9yKFwiJ3NldENvbG9yVGVtcGVyYXR1cmUoKScgaXMgaW52YWxpZCBpbiAnc2luZ2xlRnJhbWVNb2RlJy5cIik7YXdhaXQgdGhpcy5jYW1lcmFNYW5hZ2VyLnNldENvbG9yVGVtcGVyYXR1cmUodCwhMCl9Z2V0Q29sb3JUZW1wZXJhdHVyZSgpe3JldHVybiB0aGlzLmNhbWVyYU1hbmFnZXIuZ2V0Q29sb3JUZW1wZXJhdHVyZSgpfWFzeW5jIHNldEV4cG9zdXJlQ29tcGVuc2F0aW9uKHQpe3ZhciBlO2lmKHgodGhpcyx6aSxcIm1cIixjcikuY2FsbCh0aGlzKSl0aHJvdyBuZXcgRXJyb3IoXCInc2V0RXhwb3N1cmVDb21wZW5zYXRpb24oKScgaXMgaW52YWxpZCBpbiAnc2luZ2xlRnJhbWVNb2RlJy5cIik7YXdhaXQobnVsbD09PShlPXRoaXMuY2FtZXJhTWFuYWdlcil8fHZvaWQgMD09PWU/dm9pZCAwOmUuc2V0RXhwb3N1cmVDb21wZW5zYXRpb24odCwhMCkpfWdldEV4cG9zdXJlQ29tcGVuc2F0aW9uKCl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD10aGlzLmNhbWVyYU1hbmFnZXIpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmdldEV4cG9zdXJlQ29tcGVuc2F0aW9uKCl9YXN5bmMgX3NldFpvb20odCl7dmFyIGUsaSxyO2lmKHgodGhpcyx6aSxcIm1cIixjcikuY2FsbCh0aGlzKSl0aHJvdyBuZXcgRXJyb3IoXCInc2V0Wm9vbSgpJyBpcyBpbnZhbGlkIGluICdzaW5nbGVGcmFtZU1vZGUnLlwiKTthd2FpdChudWxsPT09KGU9dGhpcy5jYW1lcmFNYW5hZ2VyKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5zZXRab29tKHQpKTt7bGV0IGU9bnVsbD09PShpPXRoaXMuY2FtZXJhVmlldyl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZ2V0VUlFbGVtZW50KCk7ZT0obnVsbD09ZT92b2lkIDA6ZS5zaGFkb3dSb290KXx8ZSxudWxsPT09KHI9bnVsbD09ZT92b2lkIDA6ZS5kY2VNbkZzKXx8dm9pZCAwPT09cnx8ci5mdW5jSW5mb1pvb21DaGFuZ2UodC5mYWN0b3IpfX1hc3luYyBzZXRab29tKHQpe2F3YWl0IHRoaXMuX3NldFpvb20odCl9Z2V0Wm9vbVNldHRpbmdzKCl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD10aGlzLmNhbWVyYU1hbmFnZXIpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmdldFpvb20oKX1hc3luYyByZXNldFpvb20oKXt2YXIgdDtpZih4KHRoaXMsemksXCJtXCIsY3IpLmNhbGwodGhpcykpdGhyb3cgbmV3IEVycm9yKFwiJ3Jlc2V0Wm9vbSgpJyBpcyBpbnZhbGlkIGluICdzaW5nbGVGcmFtZU1vZGUnLlwiKTthd2FpdChudWxsPT09KHQ9dGhpcy5jYW1lcmFNYW5hZ2VyKXx8dm9pZCAwPT09dD92b2lkIDA6dC5yZXNldFpvb20oKSl9YXN5bmMgc2V0RnJhbWVSYXRlKHQpe3ZhciBlO2lmKHgodGhpcyx6aSxcIm1cIixjcikuY2FsbCh0aGlzKSl0aHJvdyBuZXcgRXJyb3IoXCInc2V0RnJhbWVSYXRlKCknIGlzIGludmFsaWQgaW4gJ3NpbmdsZUZyYW1lTW9kZScuXCIpO2F3YWl0KG51bGw9PT0oZT10aGlzLmNhbWVyYU1hbmFnZXIpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnNldEZyYW1lUmF0ZSh0LCEwKSl9Z2V0RnJhbWVSYXRlKCl7dmFyIHQ7cmV0dXJuIG51bGw9PT0odD10aGlzLmNhbWVyYU1hbmFnZXIpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmdldEZyYW1lUmF0ZSgpfWFzeW5jIHNldEZvY3VzKHQpe3ZhciBlO2lmKHgodGhpcyx6aSxcIm1cIixjcikuY2FsbCh0aGlzKSl0aHJvdyBuZXcgRXJyb3IoXCInc2V0Rm9jdXMoKScgaXMgaW52YWxpZCBpbiAnc2luZ2xlRnJhbWVNb2RlJy5cIik7YXdhaXQobnVsbD09PShlPXRoaXMuY2FtZXJhTWFuYWdlcil8fHZvaWQgMD09PWU/dm9pZCAwOmUuc2V0Rm9jdXModCwhMCkpfWdldEZvY3VzU2V0dGluZ3MoKXt2YXIgdDtyZXR1cm4gbnVsbD09PSh0PXRoaXMuY2FtZXJhTWFuYWdlcil8fHZvaWQgMD09PXQ/dm9pZCAwOnQuZ2V0Rm9jdXMoKX1zZXRBdXRvWm9vbVJhbmdlKHQpe3godGhpcyxhcixcImZcIikubWluVmFsdWU9dC5taW4seCh0aGlzLGFyLFwiZlwiKS5tYXhWYWx1ZT10Lm1heH1nZXRBdXRvWm9vbVJhbmdlKCl7cmV0dXJue21pbjp4KHRoaXMsYXIsXCJmXCIpLm1pblZhbHVlLG1heDp4KHRoaXMsYXIsXCJmXCIpLm1heFZhbHVlfX1hc3luYyBlbmFibGVFbmhhbmNlZEZlYXR1cmVzKHQpe3ZhciBlLHI7aWYoIShudWxsPT09KHI9bnVsbD09PShlPWkubGljZW5zZSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuTGljZW5zZU1hbmFnZXIpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmJQYXNzVmFsaWRhdGlvbikpdGhyb3cgbmV3IEVycm9yKFwiTGljZW5zZSBpcyBub3QgdmVyaWZpZWQsIG9yIGxpY2Vuc2UgaXMgaW52YWxpZC5cIik7aWYoMCE9PWQuYlN1cHBvcnREY2U0TW9kdWxlKXRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBzZXQgYSBsaWNlbnNlIGNvbnRhaW5pbmcgdGhlIERDRSBtb2R1bGUuXCIpO3QmVy5FRl9FTkhBTkNFRF9GT0NVUyYmKHgodGhpcyxvcixcImZcIikuZW5oYW5jZWRGb2N1cz0hMCksdCZXLkVGX0FVVE9fWk9PTSYmKHgodGhpcyxvcixcImZcIikuYXV0b1pvb209ITApLHQmVy5FRl9UQVBfVE9fRk9DVVMmJih4KHRoaXMsb3IsXCJmXCIpLnRhcFRvRm9jdXM9ITAsdGhpcy5jYW1lcmFNYW5hZ2VyLmVuYWJsZVRhcFRvRm9jdXMoKSl9ZGlzYWJsZUVuaGFuY2VkRmVhdHVyZXModCl7dCZXLkVGX0VOSEFOQ0VEX0ZPQ1VTJiYoeCh0aGlzLG9yLFwiZlwiKS5lbmhhbmNlZEZvY3VzPSExLHRoaXMuc2V0Rm9jdXMoe21vZGU6XCJjb250aW51b3VzXCJ9KS5jYXRjaCgoKCk9Pnt9KSkpLHQmVy5FRl9BVVRPX1pPT00mJih4KHRoaXMsb3IsXCJmXCIpLmF1dG9ab29tPSExLHRoaXMucmVzZXRab29tKCkuY2F0Y2goKCgpPT57fSkpKSx0JlcuRUZfVEFQX1RPX0ZPQ1VTJiYoeCh0aGlzLG9yLFwiZlwiKS50YXBUb0ZvY3VzPSExLHRoaXMuY2FtZXJhTWFuYWdlci5kaXNhYmxlVGFwVG9Gb2N1cygpKSx4KHRoaXMsemksXCJtXCIsZHIpLmNhbGwodGhpcykmJngodGhpcyx6aSxcIm1cIix1cikuY2FsbCh0aGlzKXx8eCh0aGlzLGhyLFwiZlwiKS5zdG9wQ2hhcmdpbmcoKX1fc2V0U2NhblJlZ2lvbih0KXtpZihudWxsIT10JiYhdHQodCkmJiFzdCh0KSl0aHJvdyBUeXBlRXJyb3IoXCJJbnZhbGlkICdyZWdpb24nLlwiKTtDKHRoaXMsaXIsdD9KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHQpKTpudWxsLFwiZlwiKSx0aGlzLmNhbWVyYVZpZXcmJiF0aGlzLmNhbWVyYVZpZXcuZGlzcG9zZWQmJnRoaXMuY2FtZXJhVmlldy5zZXRTY2FuUmVnaW9uKHQpfXNldFNjYW5SZWdpb24odCl7dGhpcy5fc2V0U2NhblJlZ2lvbih0KSx0aGlzLmNhbWVyYVZpZXcmJiF0aGlzLmNhbWVyYVZpZXcuZGlzcG9zZWQmJihudWxsPT09dD90aGlzLmNhbWVyYVZpZXcuc2V0U2NhblJlZ2lvbk1hc2tWaXNpYmxlKCExKTp0aGlzLmNhbWVyYVZpZXcuc2V0U2NhblJlZ2lvbk1hc2tWaXNpYmxlKCEwKSl9Z2V0U2NhblJlZ2lvbigpe3JldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHgodGhpcyxpcixcImZcIikpKX1zZXRFcnJvckxpc3RlbmVyKHQpe2lmKCF0KXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdsaXN0ZW5lcidcIik7Qyh0aGlzLGVyLHQsXCJmXCIpfWhhc05leHRJbWFnZVRvRmV0Y2goKXtyZXR1cm4hKFwib3BlblwiIT09dGhpcy5nZXRDYW1lcmFTdGF0ZSgpfHwhdGhpcy5jYW1lcmFNYW5hZ2VyLmlzVmlkZW9Mb2FkZWQoKXx8eCh0aGlzLHppLFwibVwiLGNyKS5jYWxsKHRoaXMpKX1zdGFydEZldGNoaW5nKCl7aWYoeCh0aGlzLHppLFwibVwiLGNyKS5jYWxsKHRoaXMpKXRocm93IEVycm9yKFwiJ3N0YXJ0RmV0Y2hpbmcoKScgaXMgdW5hdmFpbGFibGUgaW4gJ3NpbmdsZUZyYW1lTW9kZScuXCIpO3godGhpcyxucixcImZcIil8fChDKHRoaXMsbnIsITAsXCJmXCIpLHgodGhpcyx6aSxcIm1cIixmcikuY2FsbCh0aGlzKSl9c3RvcEZldGNoaW5nKCl7eCh0aGlzLG5yLFwiZlwiKSYmKHdyLl9vbkxvZyYmd3IuX29uTG9nKFwiRENFOiBzdG9wIGZldGNoaW5nIGxvb3A6IFwiK0RhdGUubm93KCkpLHgodGhpcyxzcixcImZcIikmJmNsZWFyVGltZW91dCh4KHRoaXMsc3IsXCJmXCIpKSxDKHRoaXMsbnIsITEsXCJmXCIpKX1mZXRjaEltYWdlKCl7aWYoeCh0aGlzLHppLFwibVwiLGNyKS5jYWxsKHRoaXMpKXRocm93IG5ldyBFcnJvcihcIidmZXRjaEltYWdlKCknIGlzIHVuYXZhaWxhYmxlIGluICdzaW5nbGVGcmFtZU1vZGUnLlwiKTtpZighdGhpcy52aWRlbyl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgdmlkZW8gZWxlbWVudCBkb2VzIG5vdCBleGlzdC5cIik7aWYoNCE9PXRoaXMudmlkZW8ucmVhZHlTdGF0ZSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgdmlkZW8gaXMgbm90IGxvYWRlZC5cIik7Y29uc3QgdD10aGlzLmdldFJlc29sdXRpb24oKTtpZighKG51bGw9PXQ/dm9pZCAwOnQud2lkdGgpfHwhKG51bGw9PXQ/dm9pZCAwOnQuaGVpZ2h0KSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgdmlkZW8gaXMgbm90IGxvYWRlZC5cIik7bGV0IGU7aWYoZT1hdC5jb252ZXJ0KHgodGhpcyxpcixcImZcIiksdC53aWR0aCx0LmhlaWdodCksZXx8KGU9e3g6MCx5OjAsd2lkdGg6dC53aWR0aCxoZWlnaHQ6dC5oZWlnaHR9KSxlLng+dC53aWR0aHx8ZS55PnQuaGVpZ2h0KXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc2NhbiByZWdpb24uXCIpO2UueCtlLndpZHRoPnQud2lkdGgmJihlLndpZHRoPXQud2lkdGgtZS54KSxlLnkrZS5oZWlnaHQ+dC5oZWlnaHQmJihlLmhlaWdodD10LmhlaWdodC1lLnkpO2NvbnN0IGk9e3N4OmUueCxzeTplLnksc1dpZHRoOmUud2lkdGgsc0hlaWdodDplLmhlaWdodCxkV2lkdGg6ZS53aWR0aCxkSGVpZ2h0OmUuaGVpZ2h0fSxyPU1hdGgubWF4KGkuZFdpZHRoLGkuZEhlaWdodCk7aWYodGhpcy5jYW52YXNTaXplTGltaXQmJnI+dGhpcy5jYW52YXNTaXplTGltaXQpe2NvbnN0IHQ9dGhpcy5jYW52YXNTaXplTGltaXQvcjtpLmRXaWR0aD5pLmRIZWlnaHQ/KGkuZFdpZHRoPXRoaXMuY2FudmFzU2l6ZUxpbWl0LGkuZEhlaWdodD1NYXRoLnJvdW5kKGkuZEhlaWdodCp0KSk6KGkuZFdpZHRoPU1hdGgucm91bmQoaS5kV2lkdGgqdCksaS5kSGVpZ2h0PXRoaXMuY2FudmFzU2l6ZUxpbWl0KX1jb25zdCBuPXRoaXMuY2FtZXJhTWFuYWdlci5nZXRGcmFtZURhdGEoe3Bvc2l0aW9uOmkscGl4ZWxGb3JtYXQ6dnIuZ2V0KHRoaXMuZ2V0UGl4ZWxGb3JtYXQoKSl9KTtpZighbilyZXR1cm4gbnVsbDtsZXQgcztpZihuLnBpeGVsRm9ybWF0PT09TWUuR1JFWSlzPW4ud2lkdGg7ZWxzZSBzPTQqbi53aWR0aDtsZXQgbz0hMDswPT09aS5zeCYmMD09PWkuc3kmJmkuc1dpZHRoPT09dC53aWR0aCYmaS5zSGVpZ2h0PT09dC5oZWlnaHQmJihvPSExKTtyZXR1cm57Ynl0ZXM6bi5kYXRhLHdpZHRoOm4ud2lkdGgsaGVpZ2h0Om4uaGVpZ2h0LHN0cmlkZTpzLGZvcm1hdDpfci5nZXQobi5waXhlbEZvcm1hdCksdGFnOntpbWFnZUlkOnRoaXMuX2ltYWdlSWQ9PU51bWJlci5NQVhfVkFMVUU/dGhpcy5faW1hZ2VJZD0wOisrdGhpcy5faW1hZ2VJZCx0eXBlOm0uSVRUX1ZJREVPX0ZSQU1FLGlzQ3JvcHBlZDpvLGNyb3BSZWdpb246e2xlZnQ6ZS54LHRvcDplLnkscmlnaHQ6ZS54K2Uud2lkdGgsYm90dG9tOmUueStlLmhlaWdodCxpc01lYXN1cmVkSW5QZXJjZW50YWdlOiExfSxvcmlnaW5hbFdpZHRoOnQud2lkdGgsb3JpZ2luYWxIZWlnaHQ6dC5oZWlnaHQsY3VycmVudFdpZHRoOm4ud2lkdGgsY3VycmVudEhlaWdodDpuLmhlaWdodCx0aW1lU3BlbnQ6bi50aW1lU3BlbnQsdGltZVN0YW1wOm4udGltZVN0YW1wfSx0b0NhbnZhczp4KHRoaXMsdHIsXCJmXCIpLGlzRENFRnJhbWU6ITB9fXNldEltYWdlRmV0Y2hJbnRlcnZhbCh0KXt0aGlzLmZldGNoSW50ZXJ2YWw9dCx4KHRoaXMsbnIsXCJmXCIpJiYoeCh0aGlzLHNyLFwiZlwiKSYmY2xlYXJUaW1lb3V0KHgodGhpcyxzcixcImZcIikpLEModGhpcyxzcixzZXRUaW1lb3V0KCgoKT0+e3RoaXMuZGlzcG9zZWR8fHgodGhpcyx6aSxcIm1cIixmcikuY2FsbCh0aGlzKX0pLHQpLFwiZlwiKSl9Z2V0SW1hZ2VGZXRjaEludGVydmFsKCl7cmV0dXJuIHRoaXMuZmV0Y2hJbnRlcnZhbH1zZXRQaXhlbEZvcm1hdCh0KXtDKHRoaXMscnIsdCxcImZcIil9Z2V0UGl4ZWxGb3JtYXQoKXtyZXR1cm4geCh0aGlzLHJyLFwiZlwiKX10YWtlUGhvdG8odCl7aWYoIXRoaXMuaXNPcGVuKCkpdGhyb3cgbmV3IEVycm9yKFwiTm90IG9wZW4uXCIpO2lmKHgodGhpcyx6aSxcIm1cIixjcikuY2FsbCh0aGlzKSl0aHJvdyBuZXcgRXJyb3IoXCIndGFrZVBob3RvKCknIGlzIHVuYXZhaWxhYmxlIGluICdzaW5nbGVGcmFtZU1vZGUnLlwiKTtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtlLnNldEF0dHJpYnV0ZShcInR5cGVcIixcImZpbGVcIiksZS5zZXRBdHRyaWJ1dGUoXCJhY2NlcHRcIixcIi5qcGcsLmpwZWcsLmljb24sLmdpZiwuc3ZnLC53ZWJwLC5wbmcsLmJtcFwiKSxlLnNldEF0dHJpYnV0ZShcImNhcHR1cmVcIixcIlwiKSxlLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixlLnN0eWxlLnRvcD1cIi05OTk5cHhcIixlLnN0eWxlLmJhY2tncm91bmRDb2xvcj1cInRyYW5zcGFyZW50XCIsZS5zdHlsZS5jb2xvcj1cInRyYW5zcGFyZW50XCIsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKCk9Pntjb25zdCB0PXRoaXMuaXNPcGVuKCk7dGhpcy5jbG9zZSgpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwoKCk9Pnt0JiZ0aGlzLm9wZW4oKSxlLnJlbW92ZSgpfSkse29uY2U6ITB9KX0pKSxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwoYXN5bmMoKT0+e2NvbnN0IGk9ZS5maWxlc1swXSxyPWF3YWl0KGFzeW5jIHQ9PntsZXQgZT1udWxsLGk9bnVsbDtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgY3JlYXRlSW1hZ2VCaXRtYXApdHJ5e2lmKGU9YXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAodCksZSlyZXR1cm4gZX1jYXRjaCh0KXt9dmFyIHI7cmV0dXJuIGV8fChpPWF3YWl0KHI9dCxuZXcgUHJvbWlzZSgoKHQsZSk9PntsZXQgaT1VUkwuY3JlYXRlT2JqZWN0VVJMKHIpLG49bmV3IEltYWdlO24uc3JjPWksbi5vbmxvYWQ9KCk9PntVUkwucmV2b2tlT2JqZWN0VVJMKG4uc3JjKSx0KG4pfSxuLm9uZXJyb3I9dD0+e2UobmV3IEVycm9yKFwiQ2FuJ3QgY29udmVydCBibG9iIHRvIGltYWdlIDogXCIrKHQgaW5zdGFuY2VvZiBFdmVudD90LnR5cGU6dCkpKX19KSkpKSxpfSkoaSksbj1yIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudD9yLm5hdHVyYWxXaWR0aDpyLndpZHRoLHM9ciBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQ/ci5uYXR1cmFsSGVpZ2h0OnIuaGVpZ2h0O2xldCBvPWF0LmNvbnZlcnQoeCh0aGlzLGlyLFwiZlwiKSxuLHMpO298fChvPXt4OjAseTowLHdpZHRoOm4saGVpZ2h0OnN9KTtjb25zdCBhPXgodGhpcywkaSxcImZcIikuY2FsbCh0aGlzLHIsbixzLG8pO3QmJnQoYSl9KSksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKSxlLmNsaWNrKCl9Y29udmVydFRvUGFnZUNvb3JkaW5hdGVzKHQpe2NvbnN0IGU9eCh0aGlzLHppLFwibVwiLGdyKS5jYWxsKHRoaXMsdCk7cmV0dXJue3g6ZS5wYWdlWCx5OmUucGFnZVl9fWNvbnZlcnRUb0NsaWVudENvb3JkaW5hdGVzKHQpe2NvbnN0IGU9eCh0aGlzLHppLFwibVwiLGdyKS5jYWxsKHRoaXMsdCk7cmV0dXJue3g6ZS5jbGllbnRYLHk6ZS5jbGllbnRZfX1kaXNwb3NlKCl7dGhpcy5jbG9zZSgpLHRoaXMuY2FtZXJhTWFuYWdlci5kaXNwb3NlKCksdGhpcy5yZWxlYXNlQ2FtZXJhVmlldygpLHRoaXMuX19wcm90b19fPW51bGw7Zm9yKGxldCB0IGluIHRoaXMpZGVsZXRlIHRoaXNbdF07T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJpc0NhbWVyYUVuaGFuY2VyXCIse3ZhbHVlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJkaXNwb3NlZFwiLHt2YWx1ZTohMH0pfX1mdW5jdGlvbiBicih0LGUsaSxyKXtpZihcImFcIj09PWkmJiFyKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZT90IT09ZXx8IXI6IWUuaGFzKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7cmV0dXJuXCJtXCI9PT1pP3I6XCJhXCI9PT1pP3IuY2FsbCh0KTpyP3IudmFsdWU6ZS5nZXQodCl9ZnVuY3Rpb24geHIodCxlLGkscixuKXtpZihcIm1cIj09PXIpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtpZihcImFcIj09PXImJiFuKXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZT90IT09ZXx8IW46IWUuaGFzKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtyZXR1cm5cImFcIj09PXI/bi5jYWxsKHQsaSk6bj9uLnZhbHVlPWk6ZS5zZXQodCxpKSxpfXFpPXdyLFppPW5ldyBXZWFrTWFwLEppPW5ldyBXZWFrTWFwLFFpPW5ldyBXZWFrTWFwLCRpPW5ldyBXZWFrTWFwLHRyPW5ldyBXZWFrTWFwLGVyPW5ldyBXZWFrTWFwLGlyPW5ldyBXZWFrTWFwLHJyPW5ldyBXZWFrTWFwLG5yPW5ldyBXZWFrTWFwLHNyPW5ldyBXZWFrTWFwLG9yPW5ldyBXZWFrTWFwLGFyPW5ldyBXZWFrTWFwLGhyPW5ldyBXZWFrTWFwLGxyPW5ldyBXZWFrTWFwLHppPW5ldyBXZWFrU2V0LGNyPWZ1bmN0aW9uKCl7cmV0dXJuXCJkaXNhYmxlZFwiIT09dGhpcy5zaW5nbGVGcmFtZU1vZGV9LHVyPWZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMudmlkZW9TcmMmJlwib3BlbmVkXCI9PT10aGlzLmNhbWVyYU1hbmFnZXIuc3RhdGV9LGRyPWZ1bmN0aW9uKCl7Zm9yKGxldCB0IGluIHgodGhpcyxvcixcImZcIikpaWYoMT09eCh0aGlzLG9yLFwiZlwiKVt0XSlyZXR1cm4hMDtyZXR1cm4hMX0sZnI9ZnVuY3Rpb24gdCgpe2lmKHRoaXMuZGlzcG9zZWQpcmV0dXJuO2lmKFwib3BlblwiIT09dGhpcy5nZXRDYW1lcmFTdGF0ZSgpfHwheCh0aGlzLG5yLFwiZlwiKSlyZXR1cm4geCh0aGlzLHNyLFwiZlwiKSYmY2xlYXJUaW1lb3V0KHgodGhpcyxzcixcImZcIikpLHZvaWQgQyh0aGlzLHNyLHNldFRpbWVvdXQoKCgpPT57dGhpcy5kaXNwb3NlZHx8eCh0aGlzLHppLFwibVwiLHQpLmNhbGwodGhpcyl9KSx0aGlzLmZldGNoSW50ZXJ2YWwpLFwiZlwiKTtjb25zdCBlPSgpPT57dmFyIHQ7bGV0IGU7d3IuX29uTG9nJiZ3ci5fb25Mb2coXCJEQ0U6IHN0YXJ0IGZldGNoaW5nIGEgZnJhbWUgaW50byBidWZmZXI6IFwiK0RhdGUubm93KCkpO3RyeXtlPXRoaXMuZmV0Y2hJbWFnZSgpfWNhdGNoKGUpe2NvbnN0IGk9ZS5tZXNzYWdlfHxlO2lmKFwiVGhlIHZpZGVvIGlzIG5vdCBsb2FkZWQuXCI9PT1pKXJldHVybjtpZihudWxsPT09KHQ9eCh0aGlzLGVyLFwiZlwiKSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQub25FcnJvclJlY2VpdmVkKXJldHVybiB2b2lkIHNldFRpbWVvdXQoKCgpPT57dmFyIHQ7bnVsbD09PSh0PXgodGhpcyxlcixcImZcIikpfHx2b2lkIDA9PT10fHx0Lm9uRXJyb3JSZWNlaXZlZChfLkVDX0lNQUdFX1JFQURfRkFJTEVELGkpfSksMCk7Y29uc29sZS53YXJuKGUpfWU/KHRoaXMuYWRkSW1hZ2VUb0J1ZmZlcihlKSx3ci5fb25Mb2cmJndyLl9vbkxvZyhcIkRDRTogZmluaXNoIGZldGNoaW5nIGEgZnJhbWUgaW50byBidWZmZXI6IFwiK0RhdGUubm93KCkpLHgodGhpcyxKaSxcImZcIikuZmlyZShcImZyYW1lQWRkZWRUb0J1ZmZlclwiLG51bGwse2FzeW5jOiExfSkpOndyLl9vbkxvZyYmd3IuX29uTG9nKFwiRENFOiBnZXQgYSBpbnZhbGlkIGZyYW1lLCBhYmFuZG9uIGl0OiBcIitEYXRlLm5vdygpKX07aWYodGhpcy5nZXRJbWFnZUNvdW50KCk+PXRoaXMuZ2V0TWF4SW1hZ2VDb3VudCgpKXN3aXRjaCh0aGlzLmdldEJ1ZmZlck92ZXJmbG93UHJvdGVjdGlvbk1vZGUoKSl7Y2FzZSB2LkJPUE1fQkxPQ0s6YnJlYWs7Y2FzZSB2LkJPUE1fVVBEQVRFOmUoKX1lbHNlIGUoKTt4KHRoaXMsc3IsXCJmXCIpJiZjbGVhclRpbWVvdXQoeCh0aGlzLHNyLFwiZlwiKSksQyh0aGlzLHNyLHNldFRpbWVvdXQoKCgpPT57dGhpcy5kaXNwb3NlZHx8eCh0aGlzLHppLFwibVwiLHQpLmNhbGwodGhpcyl9KSx0aGlzLmZldGNoSW50ZXJ2YWwpLFwiZlwiKX0sZ3I9ZnVuY3Rpb24odCl7aWYoIXRoaXMuY2FtZXJhVmlldyl0aHJvdyBuZXcgRXJyb3IoXCJDYW1lcmEgdmlldyBpcyBub3Qgc2V0LlwiKTtpZih0aGlzLmNhbWVyYVZpZXcuZGlzcG9zZWQpdGhyb3cgbmV3IEVycm9yKFwiJ2NhbWVyYVZpZXcnIGhhcyBiZWVuIGRpc3Bvc2VkLlwiKTtpZighdGhpcy5pc09wZW4oKSl0aHJvdyBuZXcgRXJyb3IoXCJOb3Qgb3Blbi5cIik7aWYoIXgodGhpcyx6aSxcIm1cIixjcikuY2FsbCh0aGlzKSYmIXRoaXMuY2FtZXJhTWFuYWdlci5pc1ZpZGVvTG9hZGVkKCkpdGhyb3cgbmV3IEVycm9yKFwiVmlkZW8gaXMgbm90IGxvYWRlZC5cIik7aWYoeCh0aGlzLHppLFwibVwiLGNyKS5jYWxsKHRoaXMpJiYhdGhpcy5jYW1lcmFWaWV3Ll9jdnNTaW5nbGVGcmFtZU1vZGUpdGhyb3cgbmV3IEVycm9yKFwiTm8gaW1hZ2UgaXMgc2VsZWN0ZWQuXCIpO2NvbnN0IGU9dGhpcy5jYW1lcmFWaWV3Ll9pbm5lckNvbXBvbmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxpPWUubGVmdCxyPWUudG9wLG49aSt3aW5kb3cuc2Nyb2xsWCxzPXIrd2luZG93LnNjcm9sbFkse3dpZHRoOm8saGVpZ2h0OmF9PXRoaXMuY2FtZXJhVmlldy5faW5uZXJDb21wb25lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYobzw9MHx8YTw9MCl0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZ2V0IGNvbnRlbnQgZGltZW5zaW9ucy4gQ2FtZXJhIHZpZXcgbWF5IG5vdCBiZSByZW5kZXJlZCBvbiB0aGUgcGFnZS5cIik7bGV0IGgsbCxjO2lmKHgodGhpcyx6aSxcIm1cIixjcikuY2FsbCh0aGlzKSl7Y29uc3QgdD10aGlzLmNhbWVyYVZpZXcuX2lubmVyQ29tcG9uZW50LmdldEVsZW1lbnQoXCJjb250ZW50XCIpO2g9dC53aWR0aCxsPXQuaGVpZ2h0LGM9XCJjb250YWluXCJ9ZWxzZXtjb25zdCB0PXRoaXMuZ2V0VmlkZW9FbCgpO2g9dC52aWRlb1dpZHRoLGw9dC52aWRlb0hlaWdodCxjPXRoaXMuY2FtZXJhVmlldy5nZXRWaWRlb0ZpdCgpfWNvbnN0IHU9by9hLGQ9aC9sO2xldCBmLGcsbSxwLHY9MTtpZihcImNvbnRhaW5cIj09PWMpdTxkPyh2PW8vaCxmPWkrdC54KnYsZz1yK3QueSp2KyhhLWwqdikvMixtPW4rdC54KnYscD1zK3QueSp2KyhhLWwqdikvMik6KHY9YS9sLGY9aSt0Lngqdisoby1oKnYpLzIsZz1yK3QueSp2LG09bit0Lngqdisoby1oKnYpLzIscD1zK3QueSp2KTtlbHNlIGlmKFwiY292ZXJcIj09PWMpaWYodTxkKXt2PWEvbDtsZXQgZT10Lngqdi0oaCp2LW8pLzI7ZT1NYXRoLm1heChlLDApLGU9TWF0aC5taW4oZSxvKSxmPWkrZSxnPXIrdC55KnYsbT1uK2UscD1zK3QueSp2fWVsc2V7dj1vL2g7bGV0IGU9dC55KnYtKGwqdi1hKS8yO2U9TWF0aC5tYXgoZSwwKSxlPU1hdGgubWluKGUsYSksZj1pK3QueCp2LGc9citlLG09bit0LngqdixwPXMrZX1yZXR1cm57Y2xpZW50WDpmLGNsaWVudFk6ZyxwYWdlWDptLHBhZ2VZOnB9fSx3ci5fZGVidWc9ITEsS2k9e3ZhbHVlOnZvaWQgMH0sd3IuYnJvd3NlckluZm89QSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTdXBwcmVzc2VkRXJyb3ImJlN1cHByZXNzZWRFcnJvcjtjbGFzcyBDcntzdGF0aWMgbXVsdGlwbHkodCxlKXtjb25zdCBpPVtdO2ZvcihsZXQgcj0wO3I8MztyKyspe2NvbnN0IG49ZS5zbGljZSgzKnIsMypyKzMpO2ZvcihsZXQgZT0wO2U8MztlKyspe2NvbnN0IHI9W3RbZV0sdFtlKzNdLHRbZSs2XV0ucmVkdWNlKCgodCxlLGkpPT50K2UqbltpXSksMCk7aS5wdXNoKHIpfX1yZXR1cm4gaX1zdGF0aWMgaWRlbnRpdHkoKXtyZXR1cm5bMSwwLDAsMCwxLDAsMCwwLDFdfXN0YXRpYyB0cmFuc2xhdGUodCxlLGkpe3JldHVybiBDci5tdWx0aXBseSh0LFsxLDAsMCwwLDEsMCxlLGksMV0pfXN0YXRpYyByb3RhdGUodCxlKXt2YXIgaT1NYXRoLmNvcyhlKSxyPU1hdGguc2luKGUpO3JldHVybiBDci5tdWx0aXBseSh0LFtpLC1yLDAscixpLDAsMCwwLDFdKX1zdGF0aWMgc2NhbGUodCxlLGkpe3JldHVybiBDci5tdWx0aXBseSh0LFtlLDAsMCwwLGksMCwwLDAsMV0pfX12YXIgU3IsVHIsRXIsT3IsQXIsSXIsTHIsRHIsTXIsRnIsUHIsa3IsUnIsQnIsanIsV3IsVXIsVnI7IWZ1bmN0aW9uKHQpe3QuR1JFWT1cImdyZXlcIix0LkdSRVkzMj1cImdyZXkzMlwiLHQuUkdCQT1cInJnYmFcIix0LlJCR0E9XCJyYmdhXCIsdC5HUkJBPVwiZ3JiYVwiLHQuR0JSQT1cImdicmFcIix0LkJSR0E9XCJicmdhXCIsdC5CR1JBPVwiYmdyYVwifShTcnx8KFNyPXt9KSk7Y2xhc3MgR3J7c3RhdGljIGdldCB2ZXJzaW9uKCl7cmV0dXJuXCIxLjEuMFwifXN0YXRpYyBjaGVja1dlYkdMU3VwcG9ydCgpe3JldHVybiBudWxsPT09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0KFwid2ViZ2xcIik/KHhyKEdyLFRyLCExLFwiZlwiLEVyKSwhMSk6KHhyKEdyLFRyLCEwLFwiZlwiLEVyKSwhMCl9Z2V0IGRpc3Bvc2VkKCl7cmV0dXJuIGJyKHRoaXMsTXIsXCJmXCIpfWNvbnN0cnVjdG9yKCl7T3Iuc2V0KHRoaXMsU3IuUkdCQSksQXIuc2V0KHRoaXMsbnVsbCksSXIuc2V0KHRoaXMsbnVsbCksTHIuc2V0KHRoaXMsbnVsbCksdGhpcy51c2VXZWJHTEJ5RGVmYXVsdD0hMCx0aGlzLl9yZXVzZWRDdnM9bnVsbCx0aGlzLl9yZXVzZWRXZWJHTEN2cz1udWxsLERyLnNldCh0aGlzLG51bGwpLE1yLnNldCh0aGlzLCExKX1kcmF3SW1hZ2UodCxlLGkscixuLHMpe2lmKHRoaXMuZGlzcG9zZWQpdGhyb3cgRXJyb3IoXCJUaGUgJ0ltYWdlRGF0YUdldHRlcicgaW5zdGFuY2UgaGFzIGJlZW4gZGlzcG9zZWQuXCIpO2lmKCFpfHwhcil0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkICdzb3VyY2VXaWR0aCcgb3IgJ3NvdXJjZUhlaWdodCcuXCIpO2lmKG51bGw9PWJyKEdyLFRyLFwiZlwiLEVyKSYmR3IuY2hlY2tXZWJHTFN1cHBvcnQoKSwobnVsbD09cz92b2lkIDA6cy5iVXNlV2ViR0wpJiYhYnIoR3IsVHIsXCJmXCIsRXIpKXRocm93IG5ldyBFcnJvcihcIllvdXIgYnJvd3NlciBvciBtYWNoaW5lIG1heSBub3Qgc3VwcG9ydCBXZWJHTC5cIik7aWYoZSBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQmJjQhPT1lLnJlYWR5U3RhdGV8fGUgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50JiYhZS5jb21wbGV0ZSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgc291cmNlIGlzIG5vdCBsb2FkZWQuXCIpO2xldCBvO0dyLl9vbkxvZyYmKG89RGF0ZS5ub3coKSxHci5fb25Mb2coXCJkcmF3SW1hZ2UoKSwgU1RBUlQ6IFwiK28pKTtsZXQgYT0wLGg9MCxsPWksYz1yLHU9MCxkPTAsZj1pLGc9cjtuJiYobi5zeCYmKGE9TWF0aC5yb3VuZChuLnN4KSksbi5zeSYmKGg9TWF0aC5yb3VuZChuLnN5KSksbi5zV2lkdGgmJihsPU1hdGgucm91bmQobi5zV2lkdGgpKSxuLnNIZWlnaHQmJihjPU1hdGgucm91bmQobi5zSGVpZ2h0KSksbi5keCYmKHU9TWF0aC5yb3VuZChuLmR4KSksbi5keSYmKGQ9TWF0aC5yb3VuZChuLmR5KSksbi5kV2lkdGgmJihmPU1hdGgucm91bmQobi5kV2lkdGgpKSxuLmRIZWlnaHQmJihnPU1hdGgucm91bmQobi5kSGVpZ2h0KSkpO2xldCBtLHA9U3IuUkdCQTtpZigobnVsbD09cz92b2lkIDA6cy5waXhlbEZvcm1hdCkmJihwPXMucGl4ZWxGb3JtYXQpLChudWxsPT1zP3ZvaWQgMDpzLmJ1ZmZlckNvbnRhaW5lcikmJihtPXMuYnVmZmVyQ29udGFpbmVyLG0ubGVuZ3RoPDQqZipnKSl0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHNpemUgb2YgdGhlICdidWZmZXJDb250YWluZXInLlwiKTtjb25zdCB2PXQ7aWYoIWJyKEdyLFRyLFwiZlwiLEVyKXx8ISh0aGlzLnVzZVdlYkdMQnlEZWZhdWx0JiZudWxsPT0obnVsbD09cz92b2lkIDA6cy5iVXNlV2ViR0wpfHwobnVsbD09cz92b2lkIDA6cy5iVXNlV2ViR0wpKSl7R3IuX29uTG9nJiZHci5fb25Mb2coXCJkcmF3SW1hZ2UoKSBpbiBjb250ZXh0MmQuXCIpLHYuY3R4MmR8fCh2LmN0eDJkPXYuZ2V0Q29udGV4dChcIjJkXCIse3dpbGxSZWFkRnJlcXVlbnRseTohMH0pKTtjb25zdCB0PXYuY3R4MmQ7aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIGdldCAnQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEJyBmcm9tIGNhbnZhcy5cIik7cmV0dXJuKHYud2lkdGg8dStmfHx2LmhlaWdodDxkK2cpJiYodi53aWR0aD11K2Ysdi5oZWlnaHQ9ZCtnKSx0LmRyYXdJbWFnZShlLGEsaCxsLGMsdSxkLGYsZyksR3IuX29uTG9nJiZHci5fb25Mb2coXCJkcmF3SW1hZ2UoKSBpbiBjb250ZXh0MmQgZW5kLiBDb3N0czogXCIrKERhdGUubm93KCktbykpLHtjb250ZXh0OnQscGl4ZWxGb3JtYXQ6U3IuUkdCQSxiVXNlV2ViR0w6ITF9fUdyLl9vbkxvZyYmR3IuX29uTG9nKFwiZHJhd0ltYWdlKCkgaW4gV2ViR0wuXCIpO3RyeXsodi53aWR0aDx1K2Z8fHYuaGVpZ2h0PGQrZykmJih2LndpZHRoPXUrZix2LmhlaWdodD1kK2csdi5jdHhXZWJHTCYmdi5jdHhXZWJHTC52aWV3cG9ydCgwLDAsdStmLGQrZykpO2NvbnN0IHQ9di5jdHhXZWJHTHx8di5nZXRDb250ZXh0KFwid2ViZ2xcIix7YW50aWFsaWFzOiExfSl8fHYuZ2V0Q29udGV4dChcImV4cGVyaW1lbnRhbC13ZWJnbFwiLHthbnRpYWxpYXM6ITF9KTtpZighdCl7R3IuX29uTG9nJiZHci5fb25Mb2coXCJCcm93c2VyIG9yIG1hY2hpbmUgbWF5IG5vdCBzdXBwb3J0IFdlYkdMLCBvciB0aGUgY2FudmFzIGhhcyBhbHJlYWR5IGJlZW4gc2V0IHRvIGEgZGlmZmVyZW50IGNvbnRleHQgbW9kZS5cIik7Y29uc3QgdD1uZXcgRXJyb3IoXCJVbmFibGUgdG8gZ2V0ICdXZWJHTFJlbmRlcmluZ0NvbnRleHQnLiBZb3VyIGJyb3dzZXIgb3IgbWFjaGluZSBtYXkgbm90IHN1cHBvcnQgV2ViR0wsIG9yIHRoZSBjYW52YXMgaGFzIGFscmVhZHkgYmVlbiBzZXQgdG8gYSBkaWZmZXJlbnQgY29udGV4dCBtb2RlLlwiKTt0aHJvdyB0Lm5hbWU9XCJXZWJHTEVycm9yXCIsdH1pZighdi5jdHhXZWJHTHx8cCE9PWJyKHRoaXMsT3IsXCJmXCIpKXt2LmN0eFdlYkdMPXQ7Y29uc3QgZT10PT57Y29uc3QgZT10LmNyZWF0ZUJ1ZmZlcigpO3QuYmluZEJ1ZmZlcih0LkFSUkFZX0JVRkZFUixlKSx0LmJ1ZmZlckRhdGEodC5BUlJBWV9CVUZGRVIsbmV3IEZsb2F0MzJBcnJheShbMCwwLDAsMSwxLDAsMSwwLDAsMSwxLDFdKSx0LlNUQVRJQ19EUkFXKTtjb25zdCBpPXQuY3JlYXRlQnVmZmVyKCk7cmV0dXJuIHQuYmluZEJ1ZmZlcih0LkFSUkFZX0JVRkZFUixpKSx0LmJ1ZmZlckRhdGEodC5BUlJBWV9CVUZGRVIsbmV3IEZsb2F0MzJBcnJheShbMCwwLDAsMSwxLDAsMSwwLDAsMSwxLDFdKSx0LlNUQVRJQ19EUkFXKSx7cG9zaXRpb25zOmUsdGV4Q29vcmRzOml9fSxpPXQ9Pntjb25zdCBlPXQuY3JlYXRlVGV4dHVyZSgpO3JldHVybiB0LmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxlKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9NQUdfRklMVEVSLHQuTElORUFSKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9NSU5fRklMVEVSLHQuTElORUFSKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9XUkFQX1MsdC5DTEFNUF9UT19FREdFKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9XUkFQX1QsdC5DTEFNUF9UT19FREdFKSxlfSxyPSh0LGUpPT57Y29uc3QgaT10LmNyZWF0ZVByb2dyYW0oKTtpZihlLmZvckVhY2goKGU9PnQuYXR0YWNoU2hhZGVyKGksZSkpKSx0LmxpbmtQcm9ncmFtKGkpLCF0LmdldFByb2dyYW1QYXJhbWV0ZXIoaSx0LkxJTktfU1RBVFVTKSl7Y29uc3QgZT1uZXcgRXJyb3IoYEFuIGVycm9yIG9jY3VyZWQgbGlua2luZyB0aGUgcHJvZ3JhbTogJHt0LmdldFByb2dyYW1JbmZvTG9nKGkpfS5gKTt0aHJvdyBlLm5hbWU9XCJXZWJHTEVycm9yXCIsZX1yZXR1cm4gdC51c2VQcm9ncmFtKGkpLGl9LG49KHQsZSxpKT0+e2NvbnN0IHI9dC5jcmVhdGVTaGFkZXIoZSk7aWYodC5zaGFkZXJTb3VyY2UocixpKSx0LmNvbXBpbGVTaGFkZXIociksIXQuZ2V0U2hhZGVyUGFyYW1ldGVyKHIsdC5DT01QSUxFX1NUQVRVUykpe2NvbnN0IGU9bmV3IEVycm9yKGBBbiBlcnJvciBvY2N1cmVkIGNvbXBpbGluZyB0aGUgc2hhZGVyOiAke3QuZ2V0U2hhZGVySW5mb0xvZyhyKX0uYCk7dGhyb3cgZS5uYW1lPVwiV2ViR0xFcnJvclwiLGV9cmV0dXJuIHJ9LHM9XCJcXG4gICAgICAgICAgICAgICAgICBhdHRyaWJ1dGUgdmVjMiBhX3Bvc2l0aW9uO1xcbiAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSB2ZWMyIGFfdGV4Q29vcmQ7XFxuICBcXG4gICAgICAgICAgICAgICAgICB1bmlmb3JtIG1hdDMgdV9tYXRyaXg7XFxuICAgICAgICAgICAgICAgICAgdW5pZm9ybSBtYXQzIHVfdGV4dHVyZU1hdHJpeDtcXG4gIFxcbiAgICAgICAgICAgICAgICAgIHZhcnlpbmcgdmVjMiB2X3RleENvb3JkO1xcbiAgICAgICAgICAgICAgICAgIHZvaWQgbWFpbih2b2lkKSB7XFxuICAgICAgICAgICAgICAgICAgZ2xfUG9zaXRpb24gPSB2ZWM0KCh1X21hdHJpeCAqIHZlYzMoYV9wb3NpdGlvbiwgMSkpLnh5LCAwLCAxLjApO1xcbiAgICAgICAgICAgICAgICAgIHZfdGV4Q29vcmQgPSB2ZWM0KCh1X3RleHR1cmVNYXRyaXggKiB2ZWMzKGFfdGV4Q29vcmQsIDEpKS54eSwgMCwgMS4wKS54eTtcXG4gICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICBcIjtsZXQgbz1cInJnYlwiO1tcInJnYmFcIixcInJiZ2FcIixcImdyYmFcIixcImdicmFcIixcImJyZ2FcIixcImJncmFcIl0uaW5jbHVkZXMocCkmJihvPXAuc2xpY2UoMCwzKSk7Y29uc3QgYT1gXFxuICAgICAgICAgICAgICAgICAgcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7XFxuICAgICAgICAgICAgICAgICAgdmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7XFxuICAgICAgICAgICAgICAgICAgdW5pZm9ybSBzYW1wbGVyMkQgdV9pbWFnZTtcXG4gICAgICAgICAgICAgICAgICB1bmlmb3JtIGZsb2F0IHVDb2xvckZhY3RvcjtcXG4gIFxcbiAgICAgICAgICAgICAgICAgIHZvaWQgbWFpbigpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgdmVjNCBzYW1wbGUgPSB0ZXh0dXJlMkQodV9pbWFnZSwgdl90ZXhDb29yZCk7XFxuICAgICAgICAgICAgICAgICAgICAgIGZsb2F0IGdyZXkgPSAwLjIxICogc2FtcGxlLnIgKyAwLjcxICogc2FtcGxlLmcgKyAwLjA3ICogc2FtcGxlLmI7XFxuICAgICAgICAgICAgICAgICAgICAgIGdsX0ZyYWdDb2xvciA9IHZlYzQoc2FtcGxlLiR7b30gKiAoMS4wIC0gdUNvbG9yRmFjdG9yKSArIChncmV5ICogdUNvbG9yRmFjdG9yKSwgc2FtcGxlLmEpO1xcbiAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgIGAsaD1yKHQsW24odCx0LlZFUlRFWF9TSEFERVIscyksbih0LHQuRlJBR01FTlRfU0hBREVSLGEpXSk7eHIodGhpcyxJcix7cHJvZ3JhbTpoLGF0dHJpYkxvY2F0aW9uczp7dmVydGV4UG9zaXRpb246dC5nZXRBdHRyaWJMb2NhdGlvbihoLFwiYV9wb3NpdGlvblwiKSx0ZXhQb3NpdGlvbjp0LmdldEF0dHJpYkxvY2F0aW9uKGgsXCJhX3RleENvb3JkXCIpfSx1bmlmb3JtTG9jYXRpb25zOnt1U2FtcGxlcjp0LmdldFVuaWZvcm1Mb2NhdGlvbihoLFwidV9pbWFnZVwiKSx1Q29sb3JGYWN0b3I6dC5nZXRVbmlmb3JtTG9jYXRpb24oaCxcInVDb2xvckZhY3RvclwiKSx1TWF0cml4OnQuZ2V0VW5pZm9ybUxvY2F0aW9uKGgsXCJ1X21hdHJpeFwiKSx1VGV4dHVyZU1hdHJpeDp0LmdldFVuaWZvcm1Mb2NhdGlvbihoLFwidV90ZXh0dXJlTWF0cml4XCIpfX0sXCJmXCIpLHhyKHRoaXMsTHIsZSh0KSxcImZcIikseHIodGhpcyxBcixpKHQpLFwiZlwiKSx4cih0aGlzLE9yLHAsXCJmXCIpfWNvbnN0IG49KHQsZSxpKT0+e3QuYmluZEJ1ZmZlcih0LkFSUkFZX0JVRkZFUixlKSx0LmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGkpLHQudmVydGV4QXR0cmliUG9pbnRlcihpLDIsdC5GTE9BVCwhMSwwLDApfSxzPSh0LGUsaSk9Pntjb25zdCByPXQuUkdCQSxuPXQuUkdCQSxzPXQuVU5TSUdORURfQllURTt0LmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxlKSx0LnRleEltYWdlMkQodC5URVhUVVJFXzJELDAscixuLHMsaSl9LF89KHQsZSxzLG8pPT57dC5jbGVhckNvbG9yKDAsMCwwLDEpLHQuY2xlYXJEZXB0aCgxKSx0LmVuYWJsZSh0LkRFUFRIX1RFU1QpLHQuZGVwdGhGdW5jKHQuTEVRVUFMKSx0LmNsZWFyKHQuQ09MT1JfQlVGRkVSX0JJVHx0LkRFUFRIX0JVRkZFUl9CSVQpLG4odCxzLnBvc2l0aW9ucyxlLmF0dHJpYkxvY2F0aW9ucy52ZXJ0ZXhQb3NpdGlvbiksbih0LHMudGV4Q29vcmRzLGUuYXR0cmliTG9jYXRpb25zLnRleFBvc2l0aW9uKSx0LmFjdGl2ZVRleHR1cmUodC5URVhUVVJFMCksdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsbyksdC51bmlmb3JtMWkoZS51bmlmb3JtTG9jYXRpb25zLnVTYW1wbGVyLDApLHQudW5pZm9ybTFmKGUudW5pZm9ybUxvY2F0aW9ucy51Q29sb3JGYWN0b3IsW1NyLkdSRVksU3IuR1JFWTMyXS5pbmNsdWRlcyhwKT8xOjApO2xldCBtLHYsXz1Dci50cmFuc2xhdGUoQ3IuaWRlbnRpdHkoKSwtMSwtMSk7Xz1Dci5zY2FsZShfLDIsMiksXz1Dci5zY2FsZShfLDEvdC5jYW52YXMud2lkdGgsMS90LmNhbnZhcy5oZWlnaHQpLG09Q3IudHJhbnNsYXRlKF8sdSxkKSxtPUNyLnNjYWxlKG0sZixnKSx0LnVuaWZvcm1NYXRyaXgzZnYoZS51bmlmb3JtTG9jYXRpb25zLnVNYXRyaXgsITEsbSksdj1Dci50cmFuc2xhdGUoQ3IuaWRlbnRpdHkoKSxhL2ksaC9yKSx2PUNyLnNjYWxlKHYsbC9pLGMvciksdC51bmlmb3JtTWF0cml4M2Z2KGUudW5pZm9ybUxvY2F0aW9ucy51VGV4dHVyZU1hdHJpeCwhMSx2KSx0LmRyYXdBcnJheXModC5UUklBTkdMRVMsMCw2KX07cyh0LGJyKHRoaXMsQXIsXCJmXCIpLGUpLF8odCxicih0aGlzLElyLFwiZlwiKSxicih0aGlzLExyLFwiZlwiKSxicih0aGlzLEFyLFwiZlwiKSk7Y29uc3QgeT1tfHxuZXcgVWludDhBcnJheSg0KmYqZyk7aWYodC5yZWFkUGl4ZWxzKHUsZCxmLGcsdC5SR0JBLHQuVU5TSUdORURfQllURSx5KSwyNTUhPT15WzNdKXtHci5fb25Mb2cmJkdyLl9vbkxvZyhcIkluY29ycmVjdCBXZWJHTCBkcmF3aW5nIC5cIik7Y29uc3QgdD1uZXcgRXJyb3IoXCJXZWJHTCBlcnJvcjogaW5jb3JyZWN0IGRyYXdpbmcuXCIpO3Rocm93IHQubmFtZT1cIldlYkdMRXJyb3JcIix0fXJldHVybiBHci5fb25Mb2cmJkdyLl9vbkxvZyhcImRyYXdJbWFnZSgpIGluIFdlYkdMIGVuZC4gQ29zdHM6IFwiKyhEYXRlLm5vdygpLW8pKSx7Y29udGV4dDp0LHBpeGVsRm9ybWF0OnA9PT1Tci5HUkVZP1NyLkdSRVkzMjpwLGJVc2VXZWJHTDohMH19Y2F0Y2gobyl7aWYodGhpcy5mb3JjZUxvc2VDb250ZXh0KCksbnVsbD09KG51bGw9PXM/dm9pZCAwOnMuYlVzZVdlYkdMKSlyZXR1cm4gR3IuX29uTG9nJiZHci5fb25Mb2coXCInZHJhd0ltYWdlKCknIGluIFdlYkdMIGZhaWxlZCwgdHJ5IGFnYWluIGluIGNvbnRleHQyZC5cIiksdGhpcy51c2VXZWJHTEJ5RGVmYXVsdD0hMSx0aGlzLmRyYXdJbWFnZSh0LGUsaSxyLG4sT2JqZWN0LmFzc2lnbih7fSxzLHtiVXNlV2ViR0w6ITF9KSk7dGhyb3cgby5uYW1lPVwiV2ViR0xFcnJvclwiLG99fXJlYWRDdnNEYXRhKHQsZSxpKXtpZighKHQgaW5zdGFuY2VvZiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR8fHQgaW5zdGFuY2VvZiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ2NvbnRleHQnLlwiKTtsZXQgcixuPTAscz0wLG89dC5jYW52YXMud2lkdGgsYT10LmNhbnZhcy5oZWlnaHQ7aWYoZSYmKGUueCYmKG49ZS54KSxlLnkmJihzPWUueSksZS53aWR0aCYmKG89ZS53aWR0aCksZS5oZWlnaHQmJihhPWUuaGVpZ2h0KSksKG51bGw9PWk/dm9pZCAwOmkubGVuZ3RoKTw0Km8qYSl0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHNpemUgb2YgdGhlICdidWZmZXJDb250YWluZXInLlwiKTtpZih0IGluc3RhbmNlb2YgV2ViR0xSZW5kZXJpbmdDb250ZXh0KXtjb25zdCBlPXQ7aT8oZS5yZWFkUGl4ZWxzKG4scyxvLGEsZS5SR0JBLGUuVU5TSUdORURfQllURSxpKSxyPW5ldyBVaW50OEFycmF5KGkuYnVmZmVyLDAsNCpvKmEpKToocj1uZXcgVWludDhBcnJheSg0Km8qYSksZS5yZWFkUGl4ZWxzKG4scyxvLGEsZS5SR0JBLGUuVU5TSUdORURfQllURSxyKSl9ZWxzZSBpZih0IGluc3RhbmNlb2YgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKXtsZXQgZTtlPXQuZ2V0SW1hZ2VEYXRhKG4scyxvLGEpLHI9bmV3IFVpbnQ4QXJyYXkoZS5kYXRhLmJ1ZmZlciksbnVsbD09aXx8aS5zZXQocil9cmV0dXJuIHJ9dHJhbnNmb3JtUGl4ZWxGb3JtYXQodCxlLGkscil7bGV0IG4scztpZihHci5fb25Mb2cmJihuPURhdGUubm93KCksR3IuX29uTG9nKFwidHJhbnNmb3JtUGl4ZWxGb3JtYXQoKSwgU1RBUlQ6IFwiK24pKSxlPT09aSlyZXR1cm4gR3IuX29uTG9nJiZHci5fb25Mb2coXCJ0cmFuc2Zvcm1QaXhlbEZvcm1hdCgpIGVuZC4gQ29zdHM6IFwiKyhEYXRlLm5vdygpLW4pKSxyP25ldyBVaW50OEFycmF5KHQpOnQ7Y29uc3Qgbz1bU3IuUkdCQSxTci5SQkdBLFNyLkdSQkEsU3IuR0JSQSxTci5CUkdBLFNyLkJHUkFdO2lmKG8uaW5jbHVkZXMoZSkpaWYoaT09PVNyLkdSRVkpe3M9bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgvNCk7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKz00KXtjb25zdCBpPS4yMSp0W2VdKy43MSp0W2UrMV0rLjA3KnRbZSsyXTtzW2UvNF09aX19ZWxzZSBpZihpPT09U3IuR1JFWTMyKXtzPXI/bmV3IFVpbnQ4QXJyYXkodCk6dDtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrPTQpe2NvbnN0IGk9LjIxKnRbZV0rLjcxKnRbZSsxXSsuMDcqdFtlKzJdO3NbZV09aSxzW2UrMV09aSxzW2UrMl09aX19ZWxzZXtpZighby5pbmNsdWRlcyhpKSl0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gdHJhbnNmb3JtLlwiKTtpZihyKXtzPW5ldyBVaW50OEFycmF5KHQpO2NvbnN0IHI9ZS5pbmRleE9mKFwiclwiKSxuPWUuaW5kZXhPZihcImdcIiksbz1lLmluZGV4T2YoXCJiXCIpLGE9aS5pbmRleE9mKFwiclwiKSxoPWkuaW5kZXhPZihcImdcIiksbD1pLmluZGV4T2YoXCJiXCIpO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSs9NClzW2UrYV09dFtlK3JdLHNbZStoXT10W2Urbl0sc1tlK2xdPXRbZStvXX1lbHNle3M9dDtjb25zdCByPWUuaW5kZXhPZihcInJcIiksbj1lLmluZGV4T2YoXCJnXCIpLG89ZS5pbmRleE9mKFwiYlwiKSxhPWkuaW5kZXhPZihcInJcIiksaD1pLmluZGV4T2YoXCJnXCIpLGw9aS5pbmRleE9mKFwiYlwiKTtmb3IobGV0IGU9MDtlPHQubGVuZ3RoO2UrPTQpe2xldCBpPVt0W2VdLHRbZSsxXSx0W2UrMl1dO3NbZSthXT1pW3JdLHNbZStoXT1pW25dLHNbZStsXT1pW29dfX19ZWxzZSBpZihlPT09U3IuR1JFWSl7aWYoaSE9PVNyLkdSRVkzMil0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gdHJhbnNmb3JtLlwiKTtzPW5ldyBVaW50OEFycmF5KDQqdC5sZW5ndGgpO2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7ZSsrKXNbNCplXT10W2VdLHNbNCplKzFdPXRbZV0sc1s0KmUrMl09dFtlXSxzWzQqZSszXT0yNTV9ZWxzZXtpZihlIT09U3IuR1JFWTMyKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byB0cmFuc2Zvcm0uXCIpO2lmKGkhPT1Tci5HUkVZKXRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byB0cmFuc2Zvcm0uXCIpO3M9bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgvNCk7Zm9yKGxldCBlPTA7ZTx0Lmxlbmd0aDtlKz00KXNbZS80XT10W2VdfXJldHVybiBHci5fb25Mb2cmJkdyLl9vbkxvZyhcInRyYW5zZm9ybVBpeGVsRm9ybWF0KCkgZW5kLiBDb3N0czogXCIrKERhdGUubm93KCktbikpLHN9Z2V0SW1hZ2VEYXRhKHQsZSxpLHIsbil7aWYodGhpcy5kaXNwb3NlZCl0aHJvdyBFcnJvcihcIlRoZSAnSW1hZ2VEYXRhR2V0dGVyJyBpbnN0YW5jZSBoYXMgYmVlbiBkaXNwb3NlZC5cIik7aWYoIWV8fCFpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ3NvdXJjZVdpZHRoJyBvciAnc291cmNlSGVpZ2h0Jy5cIik7aWYobnVsbD09YnIoR3IsVHIsXCJmXCIsRXIpJiZHci5jaGVja1dlYkdMU3VwcG9ydCgpLChudWxsPT1uP3ZvaWQgMDpuLmJVc2VXZWJHTCkmJiFicihHcixUcixcImZcIixFcikpdGhyb3cgbmV3IEVycm9yKFwiWW91ciBicm93c2VyIG9yIG1hY2hpbmUgbWF5IG5vdCBzdXBwb3J0IFdlYkdMLlwiKTtpZihyLnN4PmV8fHIuc3k+aXx8ci5zeCtyLnNXaWR0aD5lfHxyLnN5K3Iuc0hlaWdodD5pKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcG9zaXRpb24uXCIpO2lmKHQgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50JiY0IT09dC5yZWFkeVN0YXRlfHx0IGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCYmIXQuY29tcGxldGUpdGhyb3cgbmV3IEVycm9yKFwiVGhlIHNvdXJjZSBpcyBub3QgbG9hZGVkLlwiKTtsZXQgcztHci5fb25Mb2cmJihzPURhdGUubm93KCksR3IuX29uTG9nKFwiZ2V0SW1hZ2VEYXRhKCksIFNUQVJUOiBcIitzKSk7Y29uc3Qgbz1NYXRoLnJvdW5kKHIuc3gpLGE9TWF0aC5yb3VuZChyLnN5KSxoPU1hdGgucm91bmQoci5zV2lkdGgpLGw9TWF0aC5yb3VuZChyLnNIZWlnaHQpLGM9TWF0aC5yb3VuZChyLmRXaWR0aCksdT1NYXRoLnJvdW5kKHIuZEhlaWdodCk7bGV0IGQ9U3IuUkdCQTsobnVsbD09bj92b2lkIDA6bi5waXhlbEZvcm1hdCkmJihkPW4ucGl4ZWxGb3JtYXQpO2xldCBmLGcsbSxwPW51bGw7aWYoKG51bGw9PW4/dm9pZCAwOm4uYnVmZmVyQ29udGFpbmVyKSYmKHA9bi5idWZmZXJDb250YWluZXIpLGJyKEdyLFRyLFwiZlwiLEVyKSYmKHRoaXMudXNlV2ViR0xCeURlZmF1bHQmJm51bGw9PShudWxsPT1uP3ZvaWQgMDpuLmJVc2VXZWJHTCl8fChudWxsPT1uP3ZvaWQgMDpuLmJVc2VXZWJHTCkpKXtHci5fb25Mb2cmJkdyLl9vbkxvZyhcImdldEltYWdlRGF0YSgpIGluIFdlYkdMLlwiKSx0aGlzLl9yZXVzZWRXZWJHTEN2c3x8KHRoaXMuX3JldXNlZFdlYkdMQ3ZzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikpLGY9dGhpcy5fcmV1c2VkV2ViR0xDdnM7dHJ5e2lmKHApaWYoZD09PVNyLkdSRVkpe2lmKG09bmV3IFVpbnQ4QXJyYXkoNCpjKnUpLGc9dGhpcy5kcmF3SW1hZ2UoZix0LGUsaSx7c3g6byxzeTphLHNXaWR0aDpoLHNIZWlnaHQ6bCxkV2lkdGg6YyxkSGVpZ2h0OnV9LHtwaXhlbEZvcm1hdDpkLGJVc2VXZWJHTDohMCxidWZmZXJDb250YWluZXI6bX0pLG09dGhpcy50cmFuc2Zvcm1QaXhlbEZvcm1hdChtLGcucGl4ZWxGb3JtYXQsZCkscCl7aWYocC5sZW5ndGg8bS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBzaXplIG9mIHRoZSAnYnVmZmVyQ29udGFpbmVyJy5cIik7cC5zZXQobSl9fWVsc2UgZz10aGlzLmRyYXdJbWFnZShmLHQsZSxpLHtzeDpvLHN5OmEsc1dpZHRoOmgsc0hlaWdodDpsLGRXaWR0aDpjLGRIZWlnaHQ6dX0se3BpeGVsRm9ybWF0OmQsYlVzZVdlYkdMOiEwLGJ1ZmZlckNvbnRhaW5lcjpwfSksbT1uZXcgVWludDhBcnJheShwLmJ1ZmZlciwwLDQqYyp1KSxtPXRoaXMudHJhbnNmb3JtUGl4ZWxGb3JtYXQobSxnLnBpeGVsRm9ybWF0LGQpO2Vsc2UgZD09PVNyLkdSRVk/KCghYnIodGhpcyxEcixcImZcIil8fGJyKHRoaXMsRHIsXCJmXCIpLmxlbmd0aDw0KmMqdSkmJnhyKHRoaXMsRHIsbmV3IFVpbnQ4QXJyYXkoNCpjKnUpLFwiZlwiKSxtPW5ldyBVaW50OEFycmF5KGJyKHRoaXMsRHIsXCJmXCIpLmJ1ZmZlciwwLDQqYyp1KSk6bT1uZXcgVWludDhBcnJheSg0KmMqdSksZz10aGlzLmRyYXdJbWFnZShmLHQsZSxpLHtzeDpvLHN5OmEsc1dpZHRoOmgsc0hlaWdodDpsLGRXaWR0aDpjLGRIZWlnaHQ6dX0se3BpeGVsRm9ybWF0OmQsYlVzZVdlYkdMOiEwLGJ1ZmZlckNvbnRhaW5lcjptfSksbT10aGlzLnRyYW5zZm9ybVBpeGVsRm9ybWF0KG0sZy5waXhlbEZvcm1hdCxkKX1jYXRjaChyKXtpZihcIldlYkdMRXJyb3JcIj09PXIubmFtZSYmKHRoaXMuZm9yY2VMb3NlQ29udGV4dCgpLG51bGw9PShudWxsPT1uP3ZvaWQgMDpuLmJVc2VXZWJHTCkpKXJldHVybiBHci5fb25Mb2cmJkdyLl9vbkxvZyhcImdldEltYWdlRGF0YSgpIGluIFdlYkdMIGZhaWxlZCwgdHJ5IGFnYWluIGluIGNvbnRleHQyZC5cIiksdGhpcy51c2VXZWJHTEJ5RGVmYXVsdD0hMSx0aGlzLmdldEltYWdlRGF0YSh0LGUsaSx7c3g6byxzeTphLHNXaWR0aDpoLHNIZWlnaHQ6bCxkV2lkdGg6YyxkSGVpZ2h0OnV9LE9iamVjdC5hc3NpZ24oe30sbix7YlVzZVdlYkdMOiExfSkpO3Rocm93IHJ9fWVsc2UgaWYoR3IuX29uTG9nJiZHci5fb25Mb2coXCJnZXRJbWFnZURhdGEoKSBpbiBjb250ZXh0MmQuXCIpLHRoaXMuX3JldXNlZEN2c3x8KHRoaXMuX3JldXNlZEN2cz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpKSxmPXRoaXMuX3JldXNlZEN2cyxnPXRoaXMuZHJhd0ltYWdlKGYsdCxlLGkse3N4Om8sc3k6YSxzV2lkdGg6aCxzSGVpZ2h0OmwsZFdpZHRoOmMsZEhlaWdodDp1fSx7cGl4ZWxGb3JtYXQ6U3IuUkdCQSxiVXNlV2ViR0w6ITF9KSxtPXRoaXMucmVhZEN2c0RhdGEoZy5jb250ZXh0LHt3aWR0aDpjLGhlaWdodDp1fSxudWxsKSxtPXRoaXMudHJhbnNmb3JtUGl4ZWxGb3JtYXQobSxnLnBpeGVsRm9ybWF0LGQpLHApe2lmKHAubGVuZ3RoPG0ubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgc2l6ZSBvZiB0aGUgJ2J1ZmZlckNvbnRhaW5lcicuXCIpO3Auc2V0KG0pfXJldHVybiBHci5fb25Mb2cmJkdyLl9vbkxvZyhcImdldEltYWdlRGF0YSgpIGVuZC4gQ29zdHM6IFwiKyhEYXRlLm5vdygpLXMpKSx7ZGF0YTptLHBpeGVsRm9ybWF0OmQsd2lkdGg6YyxoZWlnaHQ6dSxiVXNlV2ViR0w6Zy5iVXNlV2ViR0x9fWNvbnZlcnREYXRhVG9DdnModCxlLGkscil7aWYoISh0IGluc3RhbmNlb2YgVWludDhBcnJheXx8dCBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAnZGF0YScuXCIpO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlfHxlPD0wKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgJ3dpZHRoJy5cIik7aWYoXCJudW1iZXJcIiE9dHlwZW9mIGl8fGk8PTApdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCAnaGVpZ2h0Jy5cIik7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO2xldCBzO2lmKG4ud2lkdGg9ZSxuLmhlaWdodD1pLHI9PT1Tci5HUkVZKXtzPW5ldyBVaW50OENsYW1wZWRBcnJheSg0KmUqaSk7Zm9yKGxldCBlPTA7ZTxzLmxlbmd0aDtlKz00KXNbZV09dFtlLzRdLHNbZSsxXT10W2UvNF0sc1tlKzJdPXRbZS80XSxzW2UrM109MjU1fWVsc2Ugcz1uZXcgVWludDhDbGFtcGVkQXJyYXkodC5idWZmZXIpO2NvbnN0IG89bmV3IEltYWdlRGF0YShzLGUsaSk7cmV0dXJuIG4uZ2V0Q29udGV4dChcIjJkXCIpLnB1dEltYWdlRGF0YShvLDAsMCksbn1mb3JjZUxvc2VDb250ZXh0KCl7aWYoIXRoaXMuX3JldXNlZFdlYkdMQ3ZzKXJldHVybjtjb25zdCB0PXRoaXMuX3JldXNlZFdlYkdMQ3ZzLmN0eFdlYkdMO3QmJiF0LmlzQ29udGV4dExvc3QoKSYmdC5nZXRFeHRlbnNpb24oXCJXRUJHTF9sb3NlX2NvbnRleHRcIikmJnQuZ2V0RXh0ZW5zaW9uKFwiV0VCR0xfbG9zZV9jb250ZXh0XCIpLmxvc2VDb250ZXh0KCkseHIodGhpcyxBcixudWxsLFwiZlwiKSx4cih0aGlzLElyLG51bGwsXCJmXCIpLHhyKHRoaXMsTHIsbnVsbCxcImZcIiksdGhpcy5fcmV1c2VkV2ViR0xDdnM9bnVsbH1kaXNwb3NlKCl7dGhpcy5mb3JjZUxvc2VDb250ZXh0KCkseHIodGhpcyxNciwhMCxcImZcIil9fVRyPUdyLE9yPW5ldyBXZWFrTWFwLEFyPW5ldyBXZWFrTWFwLElyPW5ldyBXZWFrTWFwLExyPW5ldyBXZWFrTWFwLERyPW5ldyBXZWFrTWFwLE1yPW5ldyBXZWFrTWFwLEVyPXt2YWx1ZTp2b2lkIDB9O2NsYXNzIE5ye2dldCBtYWduaWZpZXJDYW52YXMoKXtyZXR1cm4geCh0aGlzLEZyLFwiZlwiKX1jb25zdHJ1Y3Rvcigpe0ZyLnNldCh0aGlzLHZvaWQgMCksUHIuc2V0KHRoaXMsdm9pZCAwKSxDKHRoaXMsRnIsZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxcImZcIikseCh0aGlzLEZyLFwiZlwiKS5zdHlsZS5ib3JkZXJSYWRpdXM9XCI1MCVcIixDKHRoaXMsUHIsbmV3IEdyLFwiZlwiKX11cGRhdGUodCxlLGkscil7aWYoIXRoaXMubWFnbmlmaWVyQ2FudmFzKXRocm93IG5ldyBFcnJvcihcIidtYWduaWZpZXJDYW52YXMnIG5vdCBjcmVhdGVkLlwiKTtjb25zdCBuPXRoaXMubWFnbmlmaWVyQ2FudmFzO24ud2lkdGg9bi5oZWlnaHQ9dDtjb25zdCBzPXtzeDplLngtaS8yLHN5OmUueS1pLzIsc1dpZHRoOmksc0hlaWdodDppLGR4OjAsZHk6MCxkV2lkdGg6bi53aWR0aCxkSGVpZ2h0Om4uaGVpZ2h0fTtmb3IobGV0IHQgb2Ygcil7Y29uc3R7aW1hZ2U6ZSx3aWR0aDppLGhlaWdodDpyfT10O3godGhpcyxQcixcImZcIikuZHJhd0ltYWdlKG4sZSxpLHIscyx7YlVzZVdlYkdMOiExfSl9bi5zdHlsZS53aWR0aD1uLndpZHRoK1wicHhcIixuLnN0eWxlLmhlaWdodD1uLmhlaWdodCtcInB4XCJ9c2hvdygpe2lmKCF0aGlzLm1hZ25pZmllckNhbnZhcyl0aHJvdyBuZXcgRXJyb3IoXCInbWFnbmlmaWVyQ2FudmFzJyBub3QgY3JlYXRlZC5cIik7dGhpcy5tYWduaWZpZXJDYW52YXMuc3R5bGUuZGlzcGxheT1cImJsb2NrXCJ9aGlkZSgpe2lmKCF0aGlzLm1hZ25pZmllckNhbnZhcyl0aHJvdyBuZXcgRXJyb3IoXCInbWFnbmlmaWVyQ2FudmFzJyBub3QgY3JlYXRlZC5cIik7dGhpcy5tYWduaWZpZXJDYW52YXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIn19RnI9bmV3IFdlYWtNYXAsUHI9bmV3IFdlYWtNYXA7Y2xhc3MgWXIgZXh0ZW5kcyBfZXtzdGF0aWMgYXN5bmMgY3JlYXRlSW5zdGFuY2UodCl7Y29uc3QgZT1uZXcgWXI7cmV0dXJuIGF3YWl0IGUuc2V0VUlFbGVtZW50KHR8fHgoZSxrcixcIm1cIixWcikuY2FsbChlKSksZX1nZXQgZGlzcG9zZWQoKXtyZXR1cm4geCh0aGlzLFVyLFwiZlwiKX1jb25zdHJ1Y3Rvcigpe3N1cGVyKCksa3IuYWRkKHRoaXMpLHRoaXMuY29udGFpbmVyQ2xhc3NOYW1lPVwiZGNlLWltYWdlLWNvbnRhaW5lclwiLFJyLnNldCh0aGlzLHZvaWQgMCksQnIuc2V0KHRoaXMsdm9pZCAwKSx0aGlzLmlzVXNlTWFnbmlmaWVyPSEwLGpyLnNldCh0aGlzLCh0PT57dmFyIGU7aWYoIXRoaXMuaXNVc2VNYWduaWZpZXIpcmV0dXJuO2lmKHgodGhpcyxCcixcImZcIil8fEModGhpcyxCcixuZXcgTnIsXCJmXCIpLCF4KHRoaXMsQnIsXCJmXCIpLm1hZ25pZmllckNhbnZhcylyZXR1cm47ZG9jdW1lbnQuYm9keS5jb250YWlucyh4KHRoaXMsQnIsXCJmXCIpLm1hZ25pZmllckNhbnZhcyl8fCh4KHRoaXMsQnIsXCJmXCIpLm1hZ25pZmllckNhbnZhcy5zdHlsZS5wb3NpdGlvbj1cImZpeGVkXCIseCh0aGlzLEJyLFwiZlwiKS5tYWduaWZpZXJDYW52YXMuc3R5bGUuYm94U2l6aW5nPVwiY29udGVudC1ib3hcIix4KHRoaXMsQnIsXCJmXCIpLm1hZ25pZmllckNhbnZhcy5zdHlsZS5ib3JkZXI9XCIycHggc29saWQgI0ZGRkZGRlwiLGRvY3VtZW50LmJvZHkuYXBwZW5kKHgodGhpcyxCcixcImZcIikubWFnbmlmaWVyQ2FudmFzKSk7Y29uc3QgaT10aGlzLl9pbm5lckNvbXBvbmVudC5nZXRFbGVtZW50KFwiY29udGVudFwiKTtpZighaSlyZXR1cm47aWYodC5wb2ludGVyLng8MHx8dC5wb2ludGVyLng+aS53aWR0aHx8dC5wb2ludGVyLnk8MHx8dC5wb2ludGVyLnk+aS5oZWlnaHQpcmV0dXJuIHZvaWQgeCh0aGlzLFdyLFwiZlwiKS5jYWxsKHRoaXMpO2NvbnN0IHI9bnVsbD09PShlPXRoaXMuX2RyYXdpbmdMYXllck1hbmFnZXIuX2dldEZhYnJpY0NhbnZhcygpKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5sb3dlckNhbnZhc0VsO2lmKCFyKXJldHVybjtjb25zdCBuPU1hdGgubWF4KGkuY2xpZW50V2lkdGgvNS8xLjUsaS5jbGllbnRIZWlnaHQvNC8xLjUpLHM9MS41Km4sbz1be2ltYWdlOmksd2lkdGg6aS53aWR0aCxoZWlnaHQ6aS5oZWlnaHR9LHtpbWFnZTpyLHdpZHRoOnIud2lkdGgsaGVpZ2h0OnIuaGVpZ2h0fV07eCh0aGlzLEJyLFwiZlwiKS51cGRhdGUocyx0LnBvaW50ZXIsbixvKTt7bGV0IGU9MCxpPTA7dC5lIGluc3RhbmNlb2YgTW91c2VFdmVudD8oZT10LmUuY2xpZW50WCxpPXQuZS5jbGllbnRZKTp0LmUgaW5zdGFuY2VvZiBUb3VjaEV2ZW50JiZ0LmUuY2hhbmdlZFRvdWNoZXMubGVuZ3RoJiYoZT10LmUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCxpPXQuZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZKSxlPDEuNSpzJiZpPDEuNSpzPyh4KHRoaXMsQnIsXCJmXCIpLm1hZ25pZmllckNhbnZhcy5zdHlsZS5sZWZ0PVwiYXV0b1wiLHgodGhpcyxCcixcImZcIikubWFnbmlmaWVyQ2FudmFzLnN0eWxlLnRvcD1cIjBcIix4KHRoaXMsQnIsXCJmXCIpLm1hZ25pZmllckNhbnZhcy5zdHlsZS5yaWdodD1cIjBcIik6KHgodGhpcyxCcixcImZcIikubWFnbmlmaWVyQ2FudmFzLnN0eWxlLmxlZnQ9XCIwXCIseCh0aGlzLEJyLFwiZlwiKS5tYWduaWZpZXJDYW52YXMuc3R5bGUudG9wPVwiMFwiLHgodGhpcyxCcixcImZcIikubWFnbmlmaWVyQ2FudmFzLnN0eWxlLnJpZ2h0PVwiYXV0b1wiKX14KHRoaXMsQnIsXCJmXCIpLnNob3coKX0pKSxXci5zZXQodGhpcywoKCk9Pnt4KHRoaXMsQnIsXCJmXCIpJiZ4KHRoaXMsQnIsXCJmXCIpLmhpZGUoKX0pKSxVci5zZXQodGhpcywhMSl9X3NldFVJRWxlbWVudCh0KXt0aGlzLlVJRWxlbWVudD10LHRoaXMuX3VuYmluZFVJKCksdGhpcy5fYmluZFVJKCl9YXN5bmMgc2V0VUlFbGVtZW50KHQpe2xldCBlO2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXtsZXQgaT1hd2FpdCBndCh0KTtlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksT2JqZWN0LmFzc2lnbihlLnN0eWxlLHt3aWR0aDpcIjEwMCVcIixoZWlnaHQ6XCIxMDAlXCJ9KSxlLmF0dGFjaFNoYWRvdyh7bW9kZTpcIm9wZW5cIn0pLmFwcGVuZENoaWxkKGkpfWVsc2UgZT10O3RoaXMuX3NldFVJRWxlbWVudChlKX1nZXRVSUVsZW1lbnQoKXtyZXR1cm4gdGhpcy5VSUVsZW1lbnR9X2JpbmRVSSgpe2lmKCF0aGlzLlVJRWxlbWVudCl0aHJvdyBuZXcgRXJyb3IoXCJOZWVkIHRvIHNldCAnVUlFbGVtZW50Jy5cIik7aWYodGhpcy5faW5uZXJDb21wb25lbnQpcmV0dXJuO2NvbnN0IHQ9dGhpcy5VSUVsZW1lbnQ7bGV0IGU9dC5jbGFzc0xpc3QuY29udGFpbnModGhpcy5jb250YWluZXJDbGFzc05hbWUpP3Q6dC5xdWVyeVNlbGVjdG9yKGAuJHt0aGlzLmNvbnRhaW5lckNsYXNzTmFtZX1gKTtlfHwoZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGUuc3R5bGUud2lkdGg9XCIxMDAlXCIsZS5zdHlsZS5oZWlnaHQ9XCIxMDAlXCIsZS5jbGFzc05hbWU9dGhpcy5jb250YWluZXJDbGFzc05hbWUsdC5hcHBlbmQoZSkpLHRoaXMuX2lubmVyQ29tcG9uZW50PW5ldyB5ZSxlLmFwcGVuZENoaWxkKHRoaXMuX2lubmVyQ29tcG9uZW50KX1fdW5iaW5kVUkoKXt2YXIgdCxlLGk7bnVsbD09PSh0PXRoaXMuX2RyYXdpbmdMYXllck1hbmFnZXIpfHx2b2lkIDA9PT10fHx0LmNsZWFyRHJhd2luZ0xheWVycygpLG51bGw9PT0oZT10aGlzLl9pbm5lckNvbXBvbmVudCl8fHZvaWQgMD09PWV8fGUucmVtb3ZlRWxlbWVudChcImRyYXdpbmctbGF5ZXJcIiksdGhpcy5fbGF5ZXJCYXNlQ3ZzPW51bGwsbnVsbD09PShpPXRoaXMuX2lubmVyQ29tcG9uZW50KXx8dm9pZCAwPT09aXx8aS5yZW1vdmUoKSx0aGlzLl9pbm5lckNvbXBvbmVudD1udWxsfXNldEltYWdlKHQsZSxpKXtpZighdGhpcy5faW5uZXJDb21wb25lbnQpdGhyb3cgbmV3IEVycm9yKFwiTmVlZCB0byBzZXQgJ1VJRWxlbWVudCcuXCIpO2xldCByPXRoaXMuX2lubmVyQ29tcG9uZW50LmdldEVsZW1lbnQoXCJjb250ZW50XCIpO3J8fChyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksci5zdHlsZS5vYmplY3RGaXQ9XCJjb250YWluXCIsdGhpcy5faW5uZXJDb21wb25lbnQuc2V0RWxlbWVudChcImNvbnRlbnRcIixyKSksci53aWR0aD09PWUmJnIuaGVpZ2h0PT09aXx8KHIud2lkdGg9ZSxyLmhlaWdodD1pKTtjb25zdCBuPXIuZ2V0Q29udGV4dChcIjJkXCIpO24uY2xlYXJSZWN0KDAsMCxyLndpZHRoLHIuaGVpZ2h0KSx0IGluc3RhbmNlb2YgVWludDhBcnJheXx8dCBpbnN0YW5jZW9mIFVpbnQ4Q2xhbXBlZEFycmF5Pyh0IGluc3RhbmNlb2YgVWludDhBcnJheSYmKHQ9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHQuYnVmZmVyKSksbi5wdXRJbWFnZURhdGEobmV3IEltYWdlRGF0YSh0LGUsaSksMCwwKSk6KHQgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudHx8dCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpJiZuLmRyYXdJbWFnZSh0LDAsMCl9Z2V0SW1hZ2UoKXtyZXR1cm4gdGhpcy5faW5uZXJDb21wb25lbnQuZ2V0RWxlbWVudChcImNvbnRlbnRcIil9Y2xlYXJJbWFnZSgpe2lmKCF0aGlzLl9pbm5lckNvbXBvbmVudClyZXR1cm47bGV0IHQ9dGhpcy5faW5uZXJDb21wb25lbnQuZ2V0RWxlbWVudChcImNvbnRlbnRcIik7dCYmdC5nZXRDb250ZXh0KFwiMmRcIikuY2xlYXJSZWN0KDAsMCx0LndpZHRoLHQuaGVpZ2h0KX1yZW1vdmVJbWFnZSgpe3RoaXMuX2lubmVyQ29tcG9uZW50JiZ0aGlzLl9pbm5lckNvbXBvbmVudC5yZW1vdmVFbGVtZW50KFwiY29udGVudFwiKX1zZXRPcmlnaW5hbEltYWdlKHQpe2lmKCQodCkpe0ModGhpcyxScix0LFwiZlwiKTtjb25zdHt3aWR0aDplLGhlaWdodDppLGJ5dGVzOnIsZm9ybWF0Om59PU9iamVjdC5hc3NpZ24oe30sdCk7bGV0IHM7aWYobj09PWMuSVBGX0dSQVlTQ0FMRUQpe3M9bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGUqaSo0KTtmb3IobGV0IHQ9MDt0PHMubGVuZ3RoO3QrPTQpc1t0XT1yW3QvNF0sc1t0KzFdPXJbdC80XSxzW3QrMl09clt0LzRdLHNbdCszXT0yNTV9ZWxzZSBzPW5ldyBVaW50OENsYW1wZWRBcnJheShyLmJ1ZmZlcik7dGhpcy5zZXRJbWFnZShzLGUsaSl9ZWxzZSBpZih0IGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpQyh0aGlzLFJyLHQsXCJmXCIpLHRoaXMuc2V0SW1hZ2UodCx0LndpZHRoLHQuaGVpZ2h0KTtlbHNle2lmKCEodCBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGltZy5cIik7Qyh0aGlzLFJyLHQsXCJmXCIpLHRoaXMuc2V0SW1hZ2UodCx0Lm5hdHVyYWxXaWR0aCx0Lm5hdHVyYWxIZWlnaHQpfWxldCBlO3RyeXtlPXRoaXMuZ2V0Q29udGVudERpbWVuc2lvbnMoKX1jYXRjaCh0KXtpZihcIkludmFsaWQgY29udGVudCBkaW1lbnNpb25zLlwiPT09KHQubWVzc2FnZXx8dCkpcmV0dXJuO3Rocm93IHR9dGhpcy51cGRhdGVEcmF3aW5nTGF5ZXJzKGUpfWdldE9yaWdpbmFsSW1hZ2UoKXtyZXR1cm4geCh0aGlzLFJyLFwiZlwiKX1nZXRDb250ZW50RGltZW5zaW9ucygpe2xldCB0LGUsaTtpZih0aGlzLl9pbm5lckNvbXBvbmVudCl7Y29uc3Qgcj10aGlzLl9pbm5lckNvbXBvbmVudC5nZXRFbGVtZW50KFwiY29udGVudFwiKTt0PW51bGw9PXI/dm9pZCAwOnIud2lkdGgsZT1udWxsPT1yP3ZvaWQgMDpyLmhlaWdodCxpPVwiY29udGFpblwifWlmKCF0fHwhZSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNvbnRlbnQgZGltZW5zaW9ucy5cIik7cmV0dXJue3dpZHRoOnQsaGVpZ2h0OmUsb2JqZWN0Rml0Oml9fV9jcmVhdGVEcmF3aW5nTGF5ZXIodCxlLGkscil7aWYoIXRoaXMuX2xheWVyQmFzZUN2cyl7bGV0IHQ7dHJ5e3Q9dGhpcy5nZXRDb250ZW50RGltZW5zaW9ucygpfWNhdGNoKHQpe2lmKFwiSW52YWxpZCBjb250ZW50IGRpbWVuc2lvbnMuXCIhPT0odC5tZXNzYWdlfHx0KSl0aHJvdyB0fWV8fChlPShudWxsPT10P3ZvaWQgMDp0LndpZHRoKXx8MzAwKSxpfHwoaT0obnVsbD09dD92b2lkIDA6dC5oZWlnaHQpfHwxNTApLHJ8fChyPShudWxsPT10P3ZvaWQgMDp0Lm9iamVjdEZpdCl8fFwiY29udGFpblwiKSx0aGlzLl9sYXllckJhc2VDdnM9dGhpcy5jcmVhdGVEcmF3aW5nTGF5ZXJCYXNlQ3ZzKGUsaSxyKX1jb25zdCBuPXRoaXMuX2xheWVyQmFzZUN2cyxzPXRoaXMuX2RyYXdpbmdMYXllck1hbmFnZXIuY3JlYXRlRHJhd2luZ0xheWVyKG4sdCk7dGhpcy5faW5uZXJDb21wb25lbnQuZ2V0RWxlbWVudChcImRyYXdpbmctbGF5ZXJcIil8fHRoaXMuX2lubmVyQ29tcG9uZW50LnNldEVsZW1lbnQoXCJkcmF3aW5nLWxheWVyXCIsbi5wYXJlbnRFbGVtZW50KSx0IT1tZS5USVBfTEFZRVJfSUQmJnMuc2V0TW9kZShcImVkaXRvclwiKTtjb25zdCBvPXRoaXMuX2RyYXdpbmdMYXllck1hbmFnZXIuX2dldEZhYnJpY0NhbnZhcygpO3JldHVybiBvJiYoby5vbihcIm9iamVjdDpzY2FsaW5nXCIseCh0aGlzLGpyLFwiZlwiKSksby5vbihcIm9iamVjdDpyb3RhdGluZ1wiLHgodGhpcyxqcixcImZcIikpLG8ub24oXCJvYmplY3Q6c2tld2luZ1wiLHgodGhpcyxqcixcImZcIikpLG8ub24oXCJtb3VzZTp1cFwiLHgodGhpcyxXcixcImZcIikpKSxzfWRpc3Bvc2UoKXt0aGlzLl91bmJpbmRVSSgpLHRoaXMuX19wcm90b19fPW51bGw7Zm9yKGxldCB0IGluIHRoaXMpZGVsZXRlIHRoaXNbdF07T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJkaXNwb3NlZFwiLHt2YWx1ZTohMH0pfX1Scj1uZXcgV2Vha01hcCxCcj1uZXcgV2Vha01hcCxqcj1uZXcgV2Vha01hcCxXcj1uZXcgV2Vha01hcCxVcj1uZXcgV2Vha01hcCxrcj1uZXcgV2Vha1NldCxWcj1mdW5jdGlvbigpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gdC5jbGFzc05hbWU9dGhpcy5jb250YWluZXJDbGFzc05hbWUsdC5zdHlsZS53aWR0aD1cIjEwMCVcIix0LnN0eWxlLmhlaWdodD1cIjEwMCVcIix0fTtleHBvcnR7d3IgYXMgQ2FtZXJhRW5oYW5jZXIsYiBhcyBDYW1lcmFFbmhhbmNlck1vZHVsZSx3ZSBhcyBDYW1lcmFWaWV3LFogYXMgRHJhd2luZ0l0ZW0sZ2UgYXMgRHJhd2luZ1N0eWxlTWFuYWdlcixCIGFzIEVudW1EcmF3aW5nSXRlbU1lZGlhVHlwZSxqIGFzIEVudW1EcmF3aW5nSXRlbVN0YXRlLFcgYXMgRW51bUVuaGFuY2VkRmVhdHVyZXMscHIgYXMgRmVlZGJhY2ssZmUgYXMgR3JvdXBEcmF3aW5nSXRlbSxFdCBhcyBJbWFnZURyYXdpbmdJdGVtLFlyIGFzIEltYWdlRWRpdG9yVmlldyx1ZSBhcyBMaW5lRHJhd2luZ0l0ZW0sZGUgYXMgUXVhZERyYXdpbmdJdGVtLHd0IGFzIFJlY3REcmF3aW5nSXRlbSxBdCBhcyBUZXh0RHJhd2luZ0l0ZW19O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/dynamsoft-camera-enhancer/dist/dce.esm.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/dynamsoft-capture-vision-router/dist/cvr.esm.js":
/*!**********************************************************************!*\
  !*** ./node_modules/dynamsoft-capture-vision-router/dist/cvr.esm.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CaptureVisionRouter: function() { return /* binding */ CaptureVisionRouter; },\n/* harmony export */   CaptureVisionRouterModule: function() { return /* binding */ CaptureVisionRouterModule; },\n/* harmony export */   CapturedResultReceiver: function() { return /* binding */ CapturedResultReceiver; },\n/* harmony export */   EnumImageSourceState: function() { return /* binding */ EnumImageSourceState; },\n/* harmony export */   EnumPresetTemplate: function() { return /* binding */ EnumPresetTemplate; },\n/* harmony export */   IntermediateResultReceiver: function() { return /* binding */ IntermediateResultReceiver; }\n/* harmony export */ });\n/* harmony import */ var dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dynamsoft-core */ \"(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js\");\n/*!\n * Dynamsoft JavaScript Library\n * @product Dynamsoft Capture Vision Router JS Edition\n * @website http://www.dynamsoft.com\n * @copyright Copyright 2024, Dynamsoft Corporation\n * @author Dynamsoft\n * @version \"2.4.21\"\n * @fileoverview Dynamsoft JavaScript Library for Capture Vision\n * More info on cvr JS: https://www.dynamsoft.com/capture-vision/docs/web/programming/javascript/api-reference/capture-vision-router/capture-vision-router-module.html\n */\n\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\n\r\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nfunction __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nconst isPromiseLike = (value) => (value && \"object\" === typeof value && \"function\" === typeof value.then);\nclass MutablePromise extends Promise {\n    get status() { return this._s; }\n    get isPending() { return \"pending\" === this._s; }\n    get isFulfilled() { return \"fulfilled\" === this._s; }\n    get isRejected() { return \"rejected\" === this._s; }\n    get task() { return this._task; }\n    set task(value) {\n        //if(!this.isPending){ return; }\n        this._task = value;\n        let p;\n        if (isPromiseLike(value)) {\n            p = value;\n        }\n        else if (\"function\" === typeof value) {\n            p = new Promise(value);\n        }\n        if (p) {\n            (async () => {\n                try {\n                    const ret = await p;\n                    // make sure task not change\n                    if (value === this._task) {\n                        this.resolve(ret);\n                    }\n                }\n                catch (reason) {\n                    // make sure task not change\n                    if (value === this._task) {\n                        this.reject(reason);\n                    }\n                }\n            })();\n        }\n    }\n    get isEmpty() { return null == this._task; }\n    constructor(executor) {\n        let rs;\n        let rj;\n        const fn = (_rs, _rj) => { rs = _rs; rj = _rj; };\n        super(fn);\n        // walkaround babel which can not extend builtin class\n        // let _this = this;\n        // let then = new Promise(fn).then;\n        // this.then = function(){ then.apply(_this, arguments) } as any;\n        this._s = \"pending\";\n        this.resolve = (value) => {\n            if (this.isPending) {\n                if (isPromiseLike(value)) {\n                    this.task = value;\n                }\n                else {\n                    this._s = \"fulfilled\";\n                    rs(value);\n                }\n            }\n        };\n        this.reject = (reason) => {\n            if (this.isPending) {\n                this._s = \"rejected\";\n                rj(reason);\n            }\n        };\n        this.task = executor;\n    }\n}\n\nclass BufferedItemsManager {\r\n    constructor(cvr) {\r\n        this._cvr = cvr;\r\n    }\r\n    /**\r\n     * Gets the maximum number of buffered items.\r\n     * @returns Returns the maximum number of buffered items.\r\n     */\r\n    async getMaxBufferedItems() {\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    return rs(body.count);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_getMaxBufferedItems\",\r\n                id: taskID,\r\n                instanceID: this._cvr._instanceID\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Sets the maximum number of buffered items.\r\n     * @param count the maximum number of buffered items\r\n     */\r\n    async setMaxBufferedItems(count) {\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    return rs();\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_setMaxBufferedItems\",\r\n                id: taskID,\r\n                instanceID: this._cvr._instanceID,\r\n                body: {\r\n                    count\r\n                }\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Gets the buffered character items.\r\n     * @return the buffered character items\r\n     */\r\n    async getBufferedCharacterItemSet() {\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    return rs(body.itemSet);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_getBufferedCharacterItemSet\",\r\n                id: taskID,\r\n                instanceID: this._cvr._instanceID\r\n            });\r\n        });\r\n    }\r\n    ;\r\n}\n\nvar irrRegistryState = {\r\n    onTaskResultsReceived: false,\r\n    onTaskResultsReceivedForDce: false,\r\n    // section\r\n    onPredetectedRegionsReceived: false,\r\n    onLocalizedBarcodesReceived: false,\r\n    onDecodedBarcodesReceived: false,\r\n    onLocalizedTextLinesReceived: false,\r\n    onRecognizedTextLinesReceived: false,\r\n    onDetectedQuadsReceived: false,\r\n    onNormalizedImagesReceived: false,\r\n    // stage\r\n    onColourImageUnitReceived: false,\r\n    onScaledDownColourImageUnitReceived: false,\r\n    onGrayscaleImageUnitReceived: false,\r\n    onTransformedGrayscaleImageUnitReceived: false,\r\n    onEnhancedGrayscaleImageUnitReceived: false,\r\n    onBinaryImageUnitReceived: false,\r\n    onTextureDetectionResultUnitReceived: false,\r\n    onTextureRemovedGrayscaleImageUnitReceived: false,\r\n    onTextureRemovedBinaryImageUnitReceived: false,\r\n    onContoursUnitReceived: false,\r\n    onLineSegmentsUnitReceived: false,\r\n    onTextZonesUnitReceived: false,\r\n    onTextRemovedBinaryImageUnitReceived: false,\r\n    onRawTextLinesReceived: false,\r\n    onLongLinesUnitReceived: false,\r\n    onCornersUnitReceived: false,\r\n    onCandidateQuadEdgesUnitReceived: false,\r\n    onCandidateBarcodeZonesUnitReceived: false,\r\n    onScaledUpBarcodeImageUnitReceived: false,\r\n    onDeformationResistedBarcodeImageUnitReceived: false,\r\n    onComplementedBarcodeImageUnitReceived: false,\r\n    onShortLinesUnitReceived: false\r\n};\n\nconst _handleIntermediateResultReceiver = (irr) => {\r\n    for (let irs in irr._irrRegistryState) {\r\n        irr._irrRegistryState[irs] = false;\r\n    }\r\n    for (let receiver of irr._intermediateResultReceiverSet) {\r\n        if (receiver.isDce || receiver.isFilter) {\r\n            irr._irrRegistryState.onTaskResultsReceivedForDce = true;\r\n            continue;\r\n        }\r\n        for (let r in receiver) {\r\n            if (!irr._irrRegistryState[r]) {\r\n                irr._irrRegistryState[r] = !!receiver[r];\r\n            }\r\n        }\r\n    }\r\n};\r\nclass IntermediateResultManager {\r\n    constructor(cvr) {\r\n        this._irrRegistryState = irrRegistryState;\r\n        this._intermediateResultReceiverSet = new Set();\r\n        this._cvr = cvr;\r\n    }\r\n    /**\r\n     * Adds a `IntermediateResultReceiver` object as the receiver of intermediate results.\r\n     * @param receiver The receiver object, of type `IntermediateResultReceiver`.\r\n     */\r\n    async addResultReceiver(receiver) {\r\n        if (typeof receiver !== \"object\")\r\n            throw new Error(`Invalid receiver.`);\r\n        this._intermediateResultReceiverSet.add(receiver);\r\n        _handleIntermediateResultReceiver(this);\r\n        let observedResultUnitTypes = -1;\r\n        let observedTaskMap = {};\r\n        if (!receiver.isDce && !receiver.isFilter) {\r\n            if (!receiver._observedResultUnitTypes || !receiver._observedTaskMap) {\r\n                throw new Error(\"Invalid Intermediate Result Receiver.\");\r\n            }\r\n            observedResultUnitTypes = receiver._observedResultUnitTypes;\r\n            receiver._observedTaskMap.forEach((value, key) => {\r\n                observedTaskMap[key] = value;\r\n            });\r\n            receiver._observedTaskMap.clear();\r\n        }\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    return rs();\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_setIrrRegistry\",\r\n                id: taskID,\r\n                instanceID: this._cvr._instanceID,\r\n                body: {\r\n                    receiverObj: this._irrRegistryState,\r\n                    observedResultUnitTypes: observedResultUnitTypes.toString(),\r\n                    observedTaskMap\r\n                }\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Removes the specified `IntermediateResultReceiver` object.\r\n     * @param receiver The receiver object, of type `IntermediateResultReceiver`.\r\n     */\r\n    async removeResultReceiver(receiver) {\r\n        this._intermediateResultReceiverSet.delete(receiver);\r\n        _handleIntermediateResultReceiver(this);\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    return rs();\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_setIrrRegistry\",\r\n                id: taskID,\r\n                instanceID: this._cvr._instanceID,\r\n                body: {\r\n                    receiverObj: this._irrRegistryState\r\n                }\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Retrieves the original image data.\r\n     *\r\n     * @returns A promise that resolves when the operation has successfully completed. It provides the original image upon resolution.\r\n     */\r\n    getOriginalImage() {\r\n        return this._cvr._dsImage;\r\n    }\r\n    ;\r\n}\n\nconst bSSR = \"undefined\" == typeof self;\n\nconst curScriptDir = (() => {\n    if (!bSSR && document.currentScript) {\n        let src = document.currentScript.src, idxSearch = src.indexOf(\"?\");\n        if (-1 != idxSearch) src = src.substring(0, idxSearch); else {\n            let idxHash = src.indexOf(\"#\");\n            -1 != idxHash && (src = src.substring(0, idxHash));\n        }\n        return src.substring(0, src.lastIndexOf(\"/\") + 1);\n    }\n    return \"./\";\n})(), getAbsoluteDir = value => {\n    if (null == value && (value = \"./\"), bSSR) ; else {\n        let a = document.createElement(\"a\");\n        a.href = value, value = a.href;\n    }\n    return value.endsWith(\"/\") || (value += \"/\"), value;\n};\n\nvar _a;\r\ndynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.cvr = { version: \"2.4.21\", path: curScriptDir };\r\ndynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.workerAutoResources.cvr = { js: true, wasm: true, deps: [\"license\", \"dip\"] };\r\ndynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.cvr = {};\r\nconst stdVersion = \"1.4.10\";\r\nif ('string' != typeof dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std && (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.compareVersion)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std.version, stdVersion) < 0) {\r\n    dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std = { version: stdVersion, path: getAbsoluteDir(curScriptDir + `../../dynamsoft-capture-vision-std@${stdVersion}/dist/`) };\r\n}\r\nconst dipVersion = \"2.4.20\";\r\nif (!dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip || 'string' != typeof dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip && (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.compareVersion)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip.version, dipVersion) < 0) {\r\n    dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip = { version: dipVersion, path: getAbsoluteDir(curScriptDir + `../../dynamsoft-image-processing@${dipVersion}/dist/`) };\r\n}\r\nclass CaptureVisionRouterModule {\r\n    static getVersion() {\r\n        return this._version;\r\n    }\r\n}\r\nCaptureVisionRouterModule._version = `${\"2.4.21\"}(Worker: ${(_a = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.cvr) === null || _a === void 0 ? void 0 : _a.worker}, Wasm: loading...`;\n\nvar EnumImageSourceState;\r\n(function (EnumImageSourceState) {\r\n    EnumImageSourceState[EnumImageSourceState[\"ISS_BUFFER_EMPTY\"] = 0] = \"ISS_BUFFER_EMPTY\";\r\n    EnumImageSourceState[EnumImageSourceState[\"ISS_EXHAUSTED\"] = 1] = \"ISS_EXHAUSTED\";\r\n})(EnumImageSourceState || (EnumImageSourceState = {}));\n\n({\r\n    /** No intermediate result. */\r\n    IRUT_NULL: BigInt(0),\r\n    /** A full-color image. */\r\n    IRUT_COLOUR_IMAGE: BigInt(1),\r\n    /** A color image that has been scaled down for efficiency. */\r\n    IRUT_SCALED_DOWN_COLOUR_IMAGE: BigInt(1 << 1),\r\n    /** A grayscale image derived from the original input. */\r\n    IRUT_GRAYSCALE_IMAGE: BigInt(1 << 2),\r\n    /** A grayscale image that has undergone transformation. */\r\n    IRUT_TRANSOFORMED_GRAYSCALE_IMAGE: BigInt(1 << 3),\r\n    /** A grayscale image enhanced for further processing. */\r\n    IRUT_ENHANCED_GRAYSCALE_IMAGE: BigInt(1 << 4),\r\n    /** Regions pre-detected as potentially relevant for further analysis. */\r\n    IRUT_PREDETECTED_REGIONS: BigInt(1 << 5),\r\n    /** A binary (black and white) image. */\r\n    IRUT_BINARY_IMAGE: BigInt(1 << 6),\r\n    /** Results from detecting textures within the image. */\r\n    IRUT_TEXTURE_DETECTION_RESULT: BigInt(1 << 7),\r\n    /** A grayscale image with textures removed to enhance subject details like text or barcodes. */\r\n    IRUT_TEXTURE_REMOVED_GRAYSCALE_IMAGE: BigInt(1 << 8),\r\n    /** A binary image with textures removed), useful for clear detection of subjects without background noise. */\r\n    IRUT_TEXTURE_REMOVED_BINARY_IMAGE: BigInt(1 << 9),\r\n    /** Detected contours within the image), which can help in identifying shapes and objects. */\r\n    IRUT_CONTOURS: BigInt(1 << 10),\r\n    /** Detected line segments), useful in structural analysis of the image content. */\r\n    IRUT_LINE_SEGMENTS: BigInt(1 << 11),\r\n    /** Identified text zones), indicating areas with potential textual content. */\r\n    IRUT_TEXT_ZONES: BigInt(1 << 12),\r\n    /** A binary image with text regions removed. */\r\n    IRUT_TEXT_REMOVED_BINARY_IMAGE: BigInt(1 << 13),\r\n    /** Zones identified as potential barcode areas), aiding in focused barcode detection. */\r\n    IRUT_CANDIDATE_BARCODE_ZONES: BigInt(1 << 14),\r\n    /** Barcodes that have been localized but not yet decoded. */\r\n    IRUT_LOCALIZED_BARCODES: BigInt(1 << 15),\r\n    /** Barcode images scaled up for improved readability or decoding accuracy. */\r\n    IRUT_SCALED_UP_BARCODE_IMAGE: BigInt(1 << 16),\r\n    /** Images of barcodes processed to resist deformation and improve decoding success. */\r\n    IRUT_DEFORMATION_RESISTED_BARCODE_IMAGE: BigInt(1 << 17),\r\n    /** Barcode images that have been complemented. */\r\n    IRUT_COMPLEMENTED_BARCODE_IMAGE: BigInt(1 << 18),\r\n    /** Successfully decoded barcodes. */\r\n    IRUT_DECODED_BARCODES: BigInt(1 << 19),\r\n    /** Detected long lines. */\r\n    IRUT_LONG_LINES: BigInt(1 << 20),\r\n    /** Detected corners within the image. */\r\n    IRUT_CORNERS: BigInt(1 << 21),\r\n    /** Candidate edges identified as potential components of quadrilaterals. */\r\n    IRUT_CANDIDATE_QUAD_EDGES: BigInt(1 << 22),\r\n    /** Successfully detected quadrilaterals. */\r\n    IRUT_DETECTED_QUADS: BigInt(1 << 23),\r\n    /** Text lines that have been localized in preparation for recognition. */\r\n    IRUT_LOCALIZED_TEXT_LINES: BigInt(1 << 24),\r\n    /** Successfully recognized text lines. */\r\n    IRUT_RECOGNIZED_TEXT_LINES: BigInt(1 << 25),\r\n    /** Successfully normalized images. */\r\n    IRUT_NORMALIZED_IMAGES: BigInt(1 << 26),\r\n    /** Successfully detected short lines. */\r\n    IRUT_SHORT_LINES: BigInt(1 << 27),\r\n    IRUT_RAW_TEXT_LINES: BigInt(1 << 28),\r\n    /** A mask to select all types of intermediate results. */\r\n    IRUT_ALL: BigInt(\"0xFFFFFFFFFFFFFFFF\")\r\n});\r\nfunction handleResultForDraw(results) {\r\n    const resultsForDraw = {\r\n        barcodeResultItems: [],\r\n        textLineResultItems: [],\r\n        detectedQuadResultItems: [],\r\n        normalizedImageResultItems: [],\r\n        parsedResultItems: []\r\n    };\r\n    results.items.forEach((item) => {\r\n        if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_BARCODE) {\r\n            resultsForDraw.barcodeResultItems.push(item);\r\n        }\r\n        else if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_TEXT_LINE) {\r\n            resultsForDraw.textLineResultItems.push(item);\r\n        }\r\n        else if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_DETECTED_QUAD) {\r\n            resultsForDraw.detectedQuadResultItems.push(item);\r\n        }\r\n        else if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_NORMALIZED_IMAGE) {\r\n            resultsForDraw.normalizedImageResultItems.push(item);\r\n        }\r\n        else if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_PARSED_RESULT) {\r\n            resultsForDraw.parsedResultItems.push(item);\r\n        }\r\n    });\r\n    return resultsForDraw;\r\n}\r\nfunction convertCoordinates(item, compressRate) {\r\n    if (item && item.location) {\r\n        const points = item.location.points;\r\n        for (let point of points) {\r\n            point.x = point.x / compressRate;\r\n            point.y = point.y / compressRate;\r\n        }\r\n        convertCoordinates(item.referencedItem, compressRate);\r\n    }\r\n}\r\nfunction checkIsDisposed(cvr) {\r\n    if (cvr.disposed) {\r\n        throw new Error(`\"CaptureVisionRouter\" instance has been disposed`);\r\n    }\r\n}\n\nvar _CaptureVisionRouter_isa, _CaptureVisionRouter_canvas, _CaptureVisionRouter_promiseStartScan, _CaptureVisionRouter_intermediateResultManager, _CaptureVisionRouter_bufferdItemsManager, _CaptureVisionRouter_resultReceiverSet, _CaptureVisionRouter_isaStateListenerSet, _CaptureVisionRouter_resultFilterSet, _CaptureVisionRouter_compressRate, _CaptureVisionRouter_isScanner, _CaptureVisionRouter_innerUseTag, _CaptureVisionRouter_isDestroyed;\r\nconst _intermediateResultReceiverOfFilter = {\r\n    onTaskResultsReceived: () => { },\r\n    isFilter: true\r\n};\r\nclass CaptureVisionRouter {\r\n    constructor() {\r\n        this.maxCvsSideLength = [\"iPhone\", \"Android\", \"HarmonyOS\"].includes(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule.browserInfo.OS) ? 2048 : 4096;\r\n        this._instanceID = undefined;\r\n        this._dsImage = null;\r\n        this._isPauseScan = true;\r\n        this._isOutputOriginalImage = false;\r\n        this._isOpenDetectVerify = false;\r\n        this._isOpenNormalizeVerify = false;\r\n        this._isOpenBarcodeVerify = false;\r\n        this._isOpenLabelVerify = false;\r\n        this._minImageCaptureInterval = 0;\r\n        this._averageProcessintTimeArray = [];\r\n        this._averageFetchImageTimeArray = [];\r\n        this._currentSettings = null;\r\n        this._averageTime = 999;\r\n        _CaptureVisionRouter_isa.set(this, null);\r\n        _CaptureVisionRouter_canvas.set(this, null);\r\n        _CaptureVisionRouter_promiseStartScan.set(this, null);\r\n        _CaptureVisionRouter_intermediateResultManager.set(this, null);\r\n        _CaptureVisionRouter_bufferdItemsManager.set(this, null);\r\n        _CaptureVisionRouter_resultReceiverSet.set(this, new Set());\r\n        _CaptureVisionRouter_isaStateListenerSet.set(this, new Set());\r\n        _CaptureVisionRouter_resultFilterSet.set(this, new Set());\r\n        _CaptureVisionRouter_compressRate.set(this, 0);\r\n        _CaptureVisionRouter_isScanner.set(this, false);\r\n        _CaptureVisionRouter_innerUseTag.set(this, false);\r\n        _CaptureVisionRouter_isDestroyed.set(this, false);\r\n        this._singleFrameModeCallbackBind = this._singleFrameModeCallback.bind(this);\r\n    }\r\n    /**\r\n     * Returns whether the `CaptureVisionRouter` instance has been disposed of.\r\n     *\r\n     * @returns Boolean indicating whether the `CaptureVisionRouter` instance has been disposed of.\r\n     */\r\n    get disposed() {\r\n        return __classPrivateFieldGet(this, _CaptureVisionRouter_isDestroyed, \"f\");\r\n    }\r\n    /**\r\n     * Initializes a new instance of the `CaptureVisionRouter` class.\r\n     *\r\n     * @returns A promise that resolves with the initialized `CaptureVisionRouter` instance.\r\n     */\r\n    static async createInstance() {\r\n        if (!dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license) {\r\n            throw Error('Module `license` is not existed.');\r\n        }\r\n        await dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license.dynamsoft();\r\n        await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)([\"cvr\"]);\r\n        const captureVisionRouter = new CaptureVisionRouter();\r\n        const p = new MutablePromise();\r\n        let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n            var _a;\r\n            if (body.success) {\r\n                captureVisionRouter._instanceID = body.instanceID;\r\n                captureVisionRouter._currentSettings = JSON.parse(body.outputSettings);\r\n                CaptureVisionRouterModule._version = `${\"2.4.21\"}(Worker: ${(_a = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.cvr) === null || _a === void 0 ? void 0 : _a.worker}, Wasm: ${body.version})`;\r\n                __classPrivateFieldSet(captureVisionRouter, _CaptureVisionRouter_innerUseTag, true, \"f\");\r\n                __classPrivateFieldSet(captureVisionRouter, _CaptureVisionRouter_intermediateResultManager, captureVisionRouter.getIntermediateResultManager(), \"f\");\r\n                __classPrivateFieldSet(captureVisionRouter, _CaptureVisionRouter_innerUseTag, false, \"f\");\r\n                p.resolve(captureVisionRouter);\r\n            }\r\n            else {\r\n                const err = Error(body.message);\r\n                if (body.stack) {\r\n                    err.stack = body.stack;\r\n                }\r\n                p.reject(err);\r\n            }\r\n        };\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n            type: 'cvr_createInstance',\r\n            id: taskID,\r\n        });\r\n        return p;\r\n    }\r\n    ;\r\n    async _singleFrameModeCallback(dsImage) {\r\n        for (let receiver of __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\")) {\r\n            this._isOutputOriginalImage && receiver.onOriginalImageResultReceived && receiver.onOriginalImageResultReceived({ imageData: dsImage });\r\n        }\r\n        const copyDsImageData = {\r\n            bytes: new Uint8Array(dsImage.bytes),\r\n            width: dsImage.width,\r\n            height: dsImage.height,\r\n            stride: dsImage.stride,\r\n            format: dsImage.format,\r\n            tag: dsImage.tag\r\n        };\r\n        if (!this._templateName)\r\n            this._templateName = this._currentSettings.CaptureVisionTemplates[0].Name;\r\n        const result = await this.capture(copyDsImageData, this._templateName);\r\n        result.originalImageTag = dsImage.tag;\r\n        for (let receiver of __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\")) {\r\n            if (receiver.isDce) {\r\n                receiver.onCapturedResultReceived(result, {\r\n                    isDetectVerifyOpen: false,\r\n                    isNormalizeVerifyOpen: false,\r\n                    isBarcodeVerifyOpen: false,\r\n                    isLabelVerifyOpen: false,\r\n                });\r\n            }\r\n        }\r\n        const resultCommonPart = {\r\n            originalImageHashId: result.originalImageHashId,\r\n            originalImageTag: result.originalImageTag,\r\n            errorCode: result.errorCode,\r\n            errorString: result.errorString\r\n        };\r\n        for (let receiver of __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\")) {\r\n            receiver.onDecodedBarcodesReceived && result.barcodeResultItems && receiver.onDecodedBarcodesReceived(Object.assign(Object.assign({}, resultCommonPart), { barcodeResultItems: result.barcodeResultItems }));\r\n            receiver.onRecognizedTextLinesReceived && result.textLineResultItems && receiver.onRecognizedTextLinesReceived(Object.assign(Object.assign({}, resultCommonPart), { textLineResultItems: result.textLineResultItems }));\r\n            receiver.onDetectedQuadsReceived && result.detectedQuadResultItems && receiver.onDetectedQuadsReceived(Object.assign(Object.assign({}, resultCommonPart), { detectedQuadResultItems: result.detectedQuadResultItems }));\r\n            receiver.onNormalizedImagesReceived && result.normalizedImageResultItems && receiver.onNormalizedImagesReceived(Object.assign(Object.assign({}, resultCommonPart), { normalizedImageResultItems: result.normalizedImageResultItems }));\r\n            receiver.onParsedResultsReceived && result.parsedResultItems && receiver.onParsedResultsReceived(Object.assign(Object.assign({}, resultCommonPart), { parsedResultItems: result.parsedResultItems }));\r\n            if (receiver.onCapturedResultReceived && !receiver.isDce) {\r\n                if (this._isOutputOriginalImage) {\r\n                    const index = result.items.findIndex((item) => { return item.type === 1; });\r\n                    if (index !== -1) {\r\n                        result.items[index].imageData = dsImage;\r\n                    }\r\n                }\r\n                receiver.onCapturedResultReceived(result);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Sets up an image source to provide images for continuous processing.\r\n     * @param imageSource The image source which is compliant with the `ImageSourceAdapter` interface.\r\n     */\r\n    setInput(imageSource) {\r\n        checkIsDisposed(this);\r\n        if (!imageSource) {\r\n            __classPrivateFieldSet(this, _CaptureVisionRouter_isa, null, \"f\");\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _CaptureVisionRouter_isa, imageSource, \"f\");\r\n        if (imageSource.isCameraEnhancer) {\r\n            if (__classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\")) {\r\n                __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\")._intermediateResultReceiver.isDce = true;\r\n                __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\").addResultReceiver(__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\")._intermediateResultReceiver);\r\n            }\r\n            const cameraView = __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").getCameraView();\r\n            if (cameraView) {\r\n                const dceCrr = cameraView._capturedResultReceiver;\r\n                dceCrr.isDce = true;\r\n                __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\").add(dceCrr);\r\n            }\r\n            // TODO: think about off.\r\n            //(imageSource as any).on(\"singleFrameAcquired\", this._singleFrameModeCallback);\r\n        }\r\n    }\r\n    ;\r\n    /**\r\n     * Returns the image source object.\r\n     */\r\n    getInput() {\r\n        return __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\");\r\n    }\r\n    ;\r\n    /**\r\n     * Adds or removes listeners for image source state change.\r\n     */\r\n    addImageSourceStateListener(listener) {\r\n        checkIsDisposed(this);\r\n        if (typeof listener !== \"object\")\r\n            return console.warn(`Invalid ISA state listener.`);\r\n        if (!listener || !Object.keys(listener))\r\n            return;\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_isaStateListenerSet, \"f\").add(listener);\r\n    }\r\n    ;\r\n    removeImageSourceStateListener(listener) {\r\n        checkIsDisposed(this);\r\n        return __classPrivateFieldGet(this, _CaptureVisionRouter_isaStateListenerSet, \"f\").delete(listener);\r\n    }\r\n    /**\r\n     * Adds a `CapturedResultReceiver` object as the receiver of captured results.\r\n     * @param receiver The receiver object, of type `CapturedResultReceiver`.\r\n     */\r\n    addResultReceiver(receiver) {\r\n        checkIsDisposed(this);\r\n        if (typeof receiver !== \"object\")\r\n            throw new Error(`Invalid receiver.`);\r\n        if (!receiver || !Object.keys(receiver).length)\r\n            return;\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\").add(receiver);\r\n        this._setCrrRegistry();\r\n    }\r\n    ;\r\n    /**\r\n     * Removes the specified `CapturedResultReceiver` object.\r\n     * @param receiver The receiver object, of type `CapturedResultReceiver`.\r\n     */\r\n    removeResultReceiver(receiver) {\r\n        checkIsDisposed(this);\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\").delete(receiver);\r\n        this._setCrrRegistry();\r\n    }\r\n    async _setCrrRegistry() {\r\n        const receiver = {\r\n            onCapturedResultReceived: false,\r\n            onDecodedBarcodesReceived: false,\r\n            onRecognizedTextLinesReceived: false,\r\n            onDetectedQuadsReceived: false,\r\n            onNormalizedImagesReceived: false,\r\n            onParsedResultsReceived: false\r\n        };\r\n        for (let r of __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\")) {\r\n            if (r.isDce)\r\n                continue;\r\n            receiver.onCapturedResultReceived = !!r[\"onCapturedResultReceived\"];\r\n            receiver.onDecodedBarcodesReceived = !!r[\"onDecodedBarcodesReceived\"];\r\n            receiver.onRecognizedTextLinesReceived = !!r[\"onRecognizedTextLinesReceived\"];\r\n            receiver.onDetectedQuadsReceived = !!r[\"onDetectedQuadsReceived\"];\r\n            receiver.onNormalizedImagesReceived = !!r[\"onNormalizedImagesReceived\"];\r\n            receiver.onParsedResultsReceived = !!r[\"onParsedResultsReceived\"];\r\n        }\r\n        const p = new MutablePromise();\r\n        let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n            if (body.success) {\r\n                p.resolve();\r\n            }\r\n            else {\r\n                let ex = new Error(body.message);\r\n                ex.stack = body.stack + '\\n' + ex.stack;\r\n                p.reject();\r\n            }\r\n        };\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n            type: \"cvr_setCrrRegistry\",\r\n            id: taskID,\r\n            instanceID: this._instanceID,\r\n            body: {\r\n                receiver: JSON.stringify(receiver)\r\n            }\r\n        });\r\n        return p;\r\n    }\r\n    /**\r\n     * Adds a `MultiFrameResultCrossFilter` object to filter non-essential results.\r\n     * @param filter The filter object, of type `MultiFrameResultCrossFilter`.\r\n     *\r\n     * @returns A promise that resolves when the operation has successfully completed. It does not provide any value upon resolution.\r\n     */\r\n    async addResultFilter(filter) {\r\n        checkIsDisposed(this);\r\n        if (!filter || typeof filter !== \"object\" || !Object.keys(filter).length) {\r\n            return console.warn(`Invalid filter.`);\r\n        }\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\").add(filter);\r\n        // When cvr.addResultFilter is called, this method will automatically be invoked to batch update the filter statuses that were set before calling addResultFilter.\r\n        filter._dynamsoft();\r\n        await this._handleFilterUpdate();\r\n    }\r\n    ;\r\n    /**\r\n     * Removes the specified `MultiFrameResultCrossFilter` object.\r\n     * @param filter The filter object, of type `MultiFrameResultCrossFilter`.\r\n     *\r\n     * @returns A promise that resolves when the operation has successfully completed. It does not provide any value upon resolution.\r\n     */\r\n    async removeResultFilter(filter) {\r\n        checkIsDisposed(this);\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\").delete(filter);\r\n        await this._handleFilterUpdate();\r\n    }\r\n    async _handleFilterUpdate() {\r\n        /**\r\n         * Each time a \"filter\" is added or removed, the \"filter set\" will be re-traversed,\r\n         * and _intermediateResultReceiverOfFilter will be added when necessary.\r\n         * This ensures that _intermediateResultReceiverOfFilter is not left in the \"filter set\" when the \"filter set\" is empty or when no filter in the \"filter set\" has isLatestOverlappingEnabled set to true.\r\n         */\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\").removeResultReceiver(_intermediateResultReceiverOfFilter);\r\n        if (__classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\").size === 0) {\r\n            this._isOpenBarcodeVerify = false;\r\n            this._isOpenLabelVerify = false;\r\n            this._isOpenDetectVerify = false;\r\n            this._isOpenNormalizeVerify = false;\r\n            const _verificationEnabled = {\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_BARCODE]: false,\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_TEXT_LINE]: false,\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_DETECTED_QUAD]: false,\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_NORMALIZED_IMAGE]: false\r\n            };\r\n            const _duplicateFilterEnabled = {\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_BARCODE]: false,\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_TEXT_LINE]: false,\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_DETECTED_QUAD]: false,\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_NORMALIZED_IMAGE]: false\r\n            };\r\n            await _enableResultCrossVerification(this, _verificationEnabled);\r\n            await _enableResultDeduplication(this, _duplicateFilterEnabled);\r\n            return;\r\n        }\r\n        for (let filter of __classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\")) {\r\n            this._isOpenBarcodeVerify = filter.isResultCrossVerificationEnabled(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_BARCODE);\r\n            this._isOpenLabelVerify = filter.isResultCrossVerificationEnabled(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_TEXT_LINE);\r\n            this._isOpenDetectVerify = filter.isResultCrossVerificationEnabled(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_DETECTED_QUAD);\r\n            this._isOpenNormalizeVerify = filter.isResultCrossVerificationEnabled(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_NORMALIZED_IMAGE);\r\n            if (filter.isLatestOverlappingEnabled(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_BARCODE)) {\r\n                const _isExist = [...__classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\")._intermediateResultReceiverSet.values()].find((receiver) => { return receiver.isFilter; });\r\n                if (!_isExist) {\r\n                    __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\").addResultReceiver(_intermediateResultReceiverOfFilter);\r\n                }\r\n            }\r\n            await _enableResultCrossVerification(this, filter.verificationEnabled);\r\n            await _enableResultDeduplication(this, filter.duplicateFilterEnabled);\r\n            await _setDuplicateForgetTime(this, filter.duplicateForgetTime);\r\n        }\r\n    }\r\n    /**\r\n     * Initiates a capturing process based on a specified template. This process is repeated for each image fetched from the source.\r\n     * @param templateName [Optional] Specifies a \"CaptureVisionTemplate\" to use.\r\n     *\r\n     * @returns A promise that resolves when the capturing process has successfully started. It does not provide any value upon resolution.\r\n     */\r\n    async startCapturing(templateName) {\r\n        var _a, _b;\r\n        checkIsDisposed(this);\r\n        if (!this._isPauseScan)\r\n            return;\r\n        if (!__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\"))\r\n            throw new Error(`'ImageSourceAdapter' is not set. call 'setInput' before 'startCapturing'`);\r\n        if (!templateName)\r\n            templateName = this._currentSettings.CaptureVisionTemplates[0].Name;\r\n        const tasks = await this.containsTask(templateName);\r\n        await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)(tasks);\r\n        /*\r\n         * Why do we need to re-add an existing \"filter\" when calling \"startCapturing\"?\r\n         * Because there may be a situation where the corresponding wasm module has not been loaded when adding \"filter\",\r\n         * so after checking the required wasm module in \"startCapturing\", we will add \"filter\" again to ensure that \"filter\" takes effect in wasm.\r\n         *\r\n         * Why not check for the required wasm when adding the \"filter\"?\r\n         * Because each result type has a default value, we cannot know which wasm modules are actually needed through the passed \"filter\"\r\n         *\r\n         * This part of the logic has room for optimization. will do.\r\n         **/\r\n        for (let filter of __classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\")) {\r\n            await this.addResultFilter(filter);\r\n        }\r\n        if (tasks.includes(\"dlr\") && !((_a = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.dlr) === null || _a === void 0 ? void 0 : _a.bLoadConfusableCharsData)) {\r\n            const _engineResourcePaths = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.handleEngineResourcePaths)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule.engineResourcePaths, dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths);\r\n            await ((_b = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.dlr) === null || _b === void 0 ? void 0 : _b.loadRecognitionData(\"ConfusableChars\", _engineResourcePaths.dlr));\r\n        }\r\n        if (__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").isCameraEnhancer) {\r\n            if (tasks.includes(\"ddn\")) {\r\n                __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").setPixelFormat(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_ABGR_8888);\r\n            }\r\n            else {\r\n                __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").setPixelFormat(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_GRAYSCALED);\r\n            }\r\n        }\r\n        if (__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").singleFrameMode !== undefined && __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").singleFrameMode !== \"disabled\") {\r\n            this._templateName = templateName;\r\n            __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").on(\"singleFrameAcquired\", this._singleFrameModeCallbackBind);\r\n            return;\r\n        }\r\n        const colourChannelUsageType = __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").getColourChannelUsageType();\r\n        if (colourChannelUsageType === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumColourChannelUsageType.CCUT_AUTO) {\r\n            __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").setColourChannelUsageType(tasks.includes(\"ddn\") ?\r\n                dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumColourChannelUsageType.CCUT_FULL_CHANNEL\r\n                :\r\n                    dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumColourChannelUsageType.CCUT_Y_CHANNEL_ONLY);\r\n        }\r\n        if (__classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\") && __classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\").isPending)\r\n            return __classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\");\r\n        __classPrivateFieldSet(this, _CaptureVisionRouter_promiseStartScan, new MutablePromise((rs, rj) => {\r\n            if (this.disposed)\r\n                return;\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (!__classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\") || __classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\").isFulfilled)\r\n                    return;\r\n                if (body.success) {\r\n                    this._isPauseScan = false;\r\n                    this._isOutputOriginalImage = body.isOutputOriginalImage;\r\n                    this._loopReadVideoTimeoutId && clearTimeout(this._loopReadVideoTimeoutId);\r\n                    this._loopReadVideoTimeoutId = setTimeout(async () => {\r\n                        if (this._minImageCaptureInterval !== -1) {\r\n                            __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").startFetching();\r\n                        }\r\n                        this._loopReadVideo(templateName);\r\n                        // try {\r\n                        //   await this._loopReadVideo(templateName);\r\n                        // } catch (ex) {\r\n                        //   rj(ex);\r\n                        // }\r\n                        rs();\r\n                    }, 0);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_startCapturing\",\r\n                id: taskID,\r\n                instanceID: this._instanceID,\r\n                body: { templateName }\r\n            });\r\n        }), \"f\");\r\n        return await __classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\");\r\n    }\r\n    /**\r\n     * Stops the capturing process.\r\n     */\r\n    stopCapturing() {\r\n        checkIsDisposed(this);\r\n        if (!__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\"))\r\n            return;\r\n        if (__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").isCameraEnhancer) {\r\n            if (__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").singleFrameMode !== undefined && __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").singleFrameMode !== \"disabled\") {\r\n                __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").off(\"singleFrameAcquired\", this._singleFrameModeCallbackBind);\r\n                return;\r\n            }\r\n        }\r\n        _clearVerifyList(this);\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").stopFetching();\r\n        this._averageProcessintTimeArray = [];\r\n        this._averageTime = 999;\r\n        this._isPauseScan = true;\r\n        __classPrivateFieldSet(this, _CaptureVisionRouter_promiseStartScan, null, \"f\");\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").setColourChannelUsageType(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumColourChannelUsageType.CCUT_AUTO);\r\n    }\r\n    async containsTask(templateName) {\r\n        checkIsDisposed(this);\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    return rs(JSON.parse(body.tasks));\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_containsTask\",\r\n                id: taskID,\r\n                instanceID: this._instanceID,\r\n                body: {\r\n                    templateName\r\n                }\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Video stream capture, recursive call, loop frame capture\r\n     */\r\n    async _loopReadVideo(templateName) {\r\n        if ((this.disposed || this._isPauseScan)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _CaptureVisionRouter_isScanner, true, \"f\");\r\n        if (__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").isBufferEmpty()) {\r\n            if (__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").hasNextImageToFetch()) {\r\n                for (let listener of __classPrivateFieldGet(this, _CaptureVisionRouter_isaStateListenerSet, \"f\")) {\r\n                    listener.onImageSourceStateReceived && listener.onImageSourceStateReceived(EnumImageSourceState.ISS_BUFFER_EMPTY);\r\n                }\r\n            }\r\n            else if (!(__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").hasNextImageToFetch())) {\r\n                for (let listener of __classPrivateFieldGet(this, _CaptureVisionRouter_isaStateListenerSet, \"f\")) {\r\n                    listener.onImageSourceStateReceived && listener.onImageSourceStateReceived(EnumImageSourceState.ISS_EXHAUSTED);\r\n                }\r\n            }\r\n        }\r\n        if (this._minImageCaptureInterval === -1 || __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").isBufferEmpty()) {\r\n            try {\r\n                if (__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").isBufferEmpty() && CaptureVisionRouter._onLog)\r\n                    CaptureVisionRouter._onLog(`buffer is empty so fetch image`);\r\n                if (CaptureVisionRouter._onLog) {\r\n                    CaptureVisionRouter._onLog(`DCE: start fetching a frame: ${Date.now()}`);\r\n                }\r\n                this._dsImage = __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").fetchImage();\r\n                if (CaptureVisionRouter._onLog) {\r\n                    CaptureVisionRouter._onLog(`DCE: finish fetching a frame: ${Date.now()}`);\r\n                }\r\n                __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").setImageFetchInterval(this._averageTime);\r\n            }\r\n            catch (e) {\r\n                this._reRunCurrnetFunc(templateName);\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").setImageFetchInterval(this._averageTime - (this._dsImage && this._dsImage.tag ? this._dsImage.tag.timeSpent : 0));\r\n            this._dsImage = __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").getImage();\r\n            if (this._dsImage.tag) {\r\n                if (Date.now() - this._dsImage.tag.timeStamp > 200) {\r\n                    this._reRunCurrnetFunc(templateName);\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        if (!this._dsImage) {\r\n            this._reRunCurrnetFunc(templateName);\r\n            return;\r\n        }\r\n        for (let receiver of __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\")) {\r\n            this._isOutputOriginalImage && receiver.onOriginalImageResultReceived && receiver.onOriginalImageResultReceived({ imageData: this._dsImage });\r\n        }\r\n        // capture\r\n        // try {\r\n        //   const captureStartTime = Date.now();\r\n        //   const result = await this._captureDsimage(this._dsImage, templateName);\r\n        //   if (CaptureVisionRouter._onLog) CaptureVisionRouter._onLog(`no js handle time: ${Date.now() - captureStartTime}`);\r\n        //   if (this._isPauseScan) {\r\n        //     this._reRunCurrnetFunc(templateName);\r\n        //     return;\r\n        //   }\r\n        //   (result as any).originalImageTag = this._dsImage.tag ? this._dsImage.tag : null;\r\n        //   const resultCommonPart = {\r\n        //     originalImageHashId: result.originalImageHashId,\r\n        //     originalImageTag: result.originalImageTag,\r\n        //     errorCode: result.errorCode,\r\n        //     errorString: result.errorString\r\n        //   }\r\n        //   for (let receiver of this.#resultReceiverSet) {\r\n        //     if ((receiver as any).isDce) {\r\n        //       const drawTime = Date.now();\r\n        //       (receiver as any).onCapturedResultReceived(result, {\r\n        //         isDetectVerifyOpen: this._isOpenDetectVerify,\r\n        //         isNormalizeVerifyOpen: this._isOpenNormalizeVerify,\r\n        //         isBarcodeVerifyOpen: this._isOpenBarcodeVerify,\r\n        //         isLabelVerifyOpen: this._isOpenLabelVerify,\r\n        //       });\r\n        //       if (CaptureVisionRouter._onLog) {\r\n        //         const time = Date.now() - drawTime;\r\n        //         if (time > 10) CaptureVisionRouter._onLog(`draw result time: ${time}`)\r\n        //       };\r\n        //     }\r\n        //     receiver.onDecodedBarcodesReceived && result.barcodeResultItems && receiver.onDecodedBarcodesReceived({\r\n        //       ...resultCommonPart,\r\n        //       barcodeResultItems: result.barcodeResultItems.filter((item: any) => { return !item.isFilter })\r\n        //     } as DecodedBarcodesResult);\r\n        //     receiver.onRecognizedTextLinesReceived && result.textLineResultItems && receiver.onRecognizedTextLinesReceived({\r\n        //       ...resultCommonPart,\r\n        //       textLineResultItems: result.textLineResultItems.filter((item: any) => { return !item.isFilter })\r\n        //     } as RecognizedTextLinesResult);\r\n        //     receiver.onDetectedQuadsReceived && result.detectedQuadResultItems && receiver.onDetectedQuadsReceived({\r\n        //       ...resultCommonPart,\r\n        //       detectedQuadResultItems: result.detectedQuadResultItems.filter((item: any) => { return !item.isFilter })\r\n        //     } as DetectedQuadsResult);\r\n        //     receiver.onNormalizedImagesReceived && result.normalizedImageResultItems && receiver.onNormalizedImagesReceived({\r\n        //       ...resultCommonPart,\r\n        //       normalizedImageResultItems: result.normalizedImageResultItems.filter((item: any) => { return !item.isFilter })\r\n        //     } as NormalizedImagesResult);\r\n        //     receiver.onParsedResultsReceived && result.parsedResultItems && receiver.onParsedResultsReceived({\r\n        //       ...resultCommonPart,\r\n        //       parsedResultItems: result.parsedResultItems.filter((item: any) => { return !item.isFilter })\r\n        //     } as ParsedResult);\r\n        //     if (receiver.onCapturedResultReceived && !(receiver as any).isDce) {\r\n        //       (result as any).items = result.items.filter((item: any) => { return !item.isFilter });\r\n        //       if ((result as any).barcodeResultItems) (result as any).barcodeResultItems = result.barcodeResultItems.filter((item: any) => { return !item.isFilter });\r\n        //       if ((result as any).textLineResultItems) (result as any).textLineResultItems = result.textLineResultItems.filter((item: any) => { return !item.isFilter });\r\n        //       if ((result as any).detectedQuadResultItems) (result as any).detectedQuadResultItems = result.detectedQuadResultItems.filter((item: any) => { return !item.isFilter });\r\n        //       if ((result as any).normalizedImageResultItems) (result as any).normalizedImageResultItems = result.normalizedImageResultItems.filter((item: any) => { return !item.isFilter });\r\n        //       if ((result as any).parsedResultItems) (result as any).parsedResultItems = result.parsedResultItems.filter((item: any) => { return !item.isFilter });\r\n        //       receiver.onCapturedResultReceived(result);\r\n        //     }\r\n        //   }\r\n        //   const fetchImageCalculateStartTime = Date.now();\r\n        //   if (this._minImageCaptureInterval > -1) {\r\n        //     if (this._averageProcessintTimeArray.length === 5) this._averageProcessintTimeArray.shift();\r\n        //     if (this._averageFetchImageTimeArray.length === 5) this._averageFetchImageTimeArray.shift();\r\n        //     this._averageProcessintTimeArray.push(Date.now() - captureStartTime);\r\n        //     //this._averageTime = this._averageProcessintTimeArray.reduce((time, value) => time + value, 0) / this._averageProcessintTimeArray.length;\r\n        //     this._averageFetchImageTimeArray.push((this._dsImage && this._dsImage.tag ? (this._dsImage.tag as any).timeSpent : 0));\r\n        //     this._averageTime = Math.min(...this._averageProcessintTimeArray) - Math.max(...this._averageFetchImageTimeArray);\r\n        //     this._averageTime = this._averageTime > 0 ? this._averageTime : 0;\r\n        //     if (CaptureVisionRouter._onLog) {\r\n        //       CaptureVisionRouter._onLog(`minImageCaptureInterval: ${this._minImageCaptureInterval}`);\r\n        //       CaptureVisionRouter._onLog(`averageProcessintTimeArray: ${this._averageProcessintTimeArray}`);\r\n        //       CaptureVisionRouter._onLog(`averageFetchImageTimeArray: ${this._averageFetchImageTimeArray}`);\r\n        //       CaptureVisionRouter._onLog(`averageTime: ${this._averageTime}`);\r\n        //     };\r\n        //   }\r\n        //   if (CaptureVisionRouter._onLog) {\r\n        //     const time = Date.now() - fetchImageCalculateStartTime;\r\n        //     if (time > 10) CaptureVisionRouter._onLog(`fetch image calculate time: ${time}`)\r\n        //   };\r\n        //   if (CaptureVisionRouter._onLog) CaptureVisionRouter._onLog(`time finish decode: ${Date.now()}`)\r\n        //   if (CaptureVisionRouter._onLog) CaptureVisionRouter._onLog(`main time: ${Date.now() - captureStartTime}`);\r\n        //   if (CaptureVisionRouter._onLog) CaptureVisionRouter._onLog(\"====================================================\");\r\n        //   this._loopReadVideoTimeoutId && clearTimeout(this._loopReadVideoTimeoutId);\r\n        //   if (this._minImageCaptureInterval > 0 && this._minImageCaptureInterval >= this._averageTime) {\r\n        //     this._loopReadVideoTimeoutId = setTimeout(() => {\r\n        //       this._loopReadVideo(templateName);\r\n        //     }, this._minImageCaptureInterval - this._averageTime);\r\n        //   } else {\r\n        //     this._loopReadVideoTimeoutId = setTimeout(() => {\r\n        //       this._loopReadVideo(templateName);\r\n        //     }, Math.max(this._minImageCaptureInterval, 0));\r\n        //   }\r\n        // } catch (ex) {\r\n        //   this.#isa.stopFetching();\r\n        //   this._loopReadVideoTimeoutId && clearTimeout(this._loopReadVideoTimeoutId);\r\n        //   this._loopReadVideoTimeoutId = setTimeout(() => {\r\n        //     this.#isa.startFetching();\r\n        //     this._loopReadVideo(templateName);\r\n        //   }, Math.max(this._minImageCaptureInterval, 1000));\r\n        //   if (!(ex.message === 'platform error')) {\r\n        //     throw ex;\r\n        //   }\r\n        // }\r\n        const captureStartTime = Date.now();\r\n        this._captureDsimage(this._dsImage, templateName).then(async (result) => {\r\n            if (CaptureVisionRouter._onLog)\r\n                CaptureVisionRouter._onLog(`no js handle time: ${Date.now() - captureStartTime}`);\r\n            if (this._isPauseScan) {\r\n                this._reRunCurrnetFunc(templateName);\r\n                return;\r\n            }\r\n            result.originalImageTag = this._dsImage.tag ? this._dsImage.tag : null;\r\n            const resultCommonPart = {\r\n                originalImageHashId: result.originalImageHashId,\r\n                originalImageTag: result.originalImageTag,\r\n                errorCode: result.errorCode,\r\n                errorString: result.errorString\r\n            };\r\n            for (let receiver of __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\")) {\r\n                if (receiver.isDce) {\r\n                    const drawTime = Date.now();\r\n                    receiver.onCapturedResultReceived(result, {\r\n                        isDetectVerifyOpen: this._isOpenDetectVerify,\r\n                        isNormalizeVerifyOpen: this._isOpenNormalizeVerify,\r\n                        isBarcodeVerifyOpen: this._isOpenBarcodeVerify,\r\n                        isLabelVerifyOpen: this._isOpenLabelVerify,\r\n                    });\r\n                    if (CaptureVisionRouter._onLog) {\r\n                        const time = Date.now() - drawTime;\r\n                        if (time > 10)\r\n                            CaptureVisionRouter._onLog(`draw result time: ${time}`);\r\n                    }\r\n                }\r\n                receiver.onDecodedBarcodesReceived && result.barcodeResultItems && receiver.onDecodedBarcodesReceived(Object.assign(Object.assign({}, resultCommonPart), { barcodeResultItems: result.barcodeResultItems.filter((item) => { return !item.isFilter; }) }));\r\n                receiver.onRecognizedTextLinesReceived && result.textLineResultItems && receiver.onRecognizedTextLinesReceived(Object.assign(Object.assign({}, resultCommonPart), { textLineResultItems: result.textLineResultItems.filter((item) => { return !item.isFilter; }) }));\r\n                receiver.onDetectedQuadsReceived && result.detectedQuadResultItems && receiver.onDetectedQuadsReceived(Object.assign(Object.assign({}, resultCommonPart), { detectedQuadResultItems: result.detectedQuadResultItems.filter((item) => { return !item.isFilter; }) }));\r\n                receiver.onNormalizedImagesReceived && result.normalizedImageResultItems && receiver.onNormalizedImagesReceived(Object.assign(Object.assign({}, resultCommonPart), { normalizedImageResultItems: result.normalizedImageResultItems.filter((item) => { return !item.isFilter; }) }));\r\n                receiver.onParsedResultsReceived && result.parsedResultItems && receiver.onParsedResultsReceived(Object.assign(Object.assign({}, resultCommonPart), { parsedResultItems: result.parsedResultItems.filter((item) => { return !item.isFilter; }) }));\r\n                if (receiver.onCapturedResultReceived && !receiver.isDce) {\r\n                    result.items = result.items.filter((item) => { return !item.isFilter; });\r\n                    if (result.barcodeResultItems)\r\n                        result.barcodeResultItems = result.barcodeResultItems.filter((item) => { return !item.isFilter; });\r\n                    if (result.textLineResultItems)\r\n                        result.textLineResultItems = result.textLineResultItems.filter((item) => { return !item.isFilter; });\r\n                    if (result.detectedQuadResultItems)\r\n                        result.detectedQuadResultItems = result.detectedQuadResultItems.filter((item) => { return !item.isFilter; });\r\n                    if (result.normalizedImageResultItems)\r\n                        result.normalizedImageResultItems = result.normalizedImageResultItems.filter((item) => { return !item.isFilter; });\r\n                    if (result.parsedResultItems)\r\n                        result.parsedResultItems = result.parsedResultItems.filter((item) => { return !item.isFilter; });\r\n                    receiver.onCapturedResultReceived(result);\r\n                }\r\n            }\r\n            const fetchImageCalculateStartTime = Date.now();\r\n            if (this._minImageCaptureInterval > -1) {\r\n                if (this._averageProcessintTimeArray.length === 5)\r\n                    this._averageProcessintTimeArray.shift();\r\n                if (this._averageFetchImageTimeArray.length === 5)\r\n                    this._averageFetchImageTimeArray.shift();\r\n                this._averageProcessintTimeArray.push(Date.now() - captureStartTime);\r\n                //this._averageTime = this._averageProcessintTimeArray.reduce((time, value) => time + value, 0) / this._averageProcessintTimeArray.length;\r\n                this._averageFetchImageTimeArray.push((this._dsImage && this._dsImage.tag ? this._dsImage.tag.timeSpent : 0));\r\n                this._averageTime = Math.min(...this._averageProcessintTimeArray) - Math.max(...this._averageFetchImageTimeArray);\r\n                this._averageTime = this._averageTime > 0 ? this._averageTime : 0;\r\n                if (CaptureVisionRouter._onLog) {\r\n                    CaptureVisionRouter._onLog(`minImageCaptureInterval: ${this._minImageCaptureInterval}`);\r\n                    CaptureVisionRouter._onLog(`averageProcessintTimeArray: ${this._averageProcessintTimeArray}`);\r\n                    CaptureVisionRouter._onLog(`averageFetchImageTimeArray: ${this._averageFetchImageTimeArray}`);\r\n                    CaptureVisionRouter._onLog(`averageTime: ${this._averageTime}`);\r\n                }\r\n            }\r\n            if (CaptureVisionRouter._onLog) {\r\n                const time = Date.now() - fetchImageCalculateStartTime;\r\n                if (time > 10)\r\n                    CaptureVisionRouter._onLog(`fetch image calculate time: ${time}`);\r\n            }\r\n            if (CaptureVisionRouter._onLog)\r\n                CaptureVisionRouter._onLog(`time finish decode: ${Date.now()}`);\r\n            if (CaptureVisionRouter._onLog)\r\n                CaptureVisionRouter._onLog(`main time: ${Date.now() - captureStartTime}`);\r\n            if (CaptureVisionRouter._onLog)\r\n                CaptureVisionRouter._onLog(\"====================================================\");\r\n            this._loopReadVideoTimeoutId && clearTimeout(this._loopReadVideoTimeoutId);\r\n            if (this._minImageCaptureInterval > 0 && this._minImageCaptureInterval >= this._averageTime) {\r\n                this._loopReadVideoTimeoutId = setTimeout(() => {\r\n                    this._loopReadVideo(templateName);\r\n                }, this._minImageCaptureInterval - this._averageTime);\r\n            }\r\n            else {\r\n                this._loopReadVideoTimeoutId = setTimeout(() => {\r\n                    this._loopReadVideo(templateName);\r\n                }, Math.max(this._minImageCaptureInterval, 0));\r\n            }\r\n        }).catch((ex) => {\r\n            __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").stopFetching();\r\n            if (ex.errorCode && ex.errorCode === 0) {\r\n                this._loopReadVideoTimeoutId && clearTimeout(this._loopReadVideoTimeoutId);\r\n                this._loopReadVideoTimeoutId = setTimeout(() => {\r\n                    __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").startFetching();\r\n                    this._loopReadVideo(templateName);\r\n                }, Math.max(this._minImageCaptureInterval, 1000));\r\n            }\r\n            if (!(ex.message === 'platform error')) {\r\n                setTimeout(() => { throw ex; }, 0);\r\n            }\r\n        });\r\n    }\r\n    _reRunCurrnetFunc(templateName) {\r\n        this._loopReadVideoTimeoutId && clearTimeout(this._loopReadVideoTimeoutId);\r\n        this._loopReadVideoTimeoutId = setTimeout(() => {\r\n            this._loopReadVideo(templateName);\r\n        }, 0);\r\n    }\r\n    /**\r\n     * Processes a single image or a file containing a single image to derive important information.\r\n     * @param imageOrFile Specifies the image or file to be processed. The following data types are accepted: `Blob`, `HTMLImageElement`, `HTMLCanvasElement`, `HTMLVideoElement`, `DSImageData`, `string`.\r\n     * @param templateName [Optional] Specifies a \"CaptureVisionTemplate\" to use.\r\n     *\r\n     * @returns A promise that resolves with a `CapturedResult` object which contains the derived information from the image processed.\r\n     */\r\n    async capture(imageOrFile, templateName) {\r\n        var _a, _b;\r\n        checkIsDisposed(this);\r\n        if (!templateName)\r\n            templateName = this._currentSettings.CaptureVisionTemplates[0].Name;\r\n        const tasks = await this.containsTask(templateName);\r\n        await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)(tasks);\r\n        if (tasks.includes(\"dlr\") && !((_a = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.dlr) === null || _a === void 0 ? void 0 : _a.bLoadConfusableCharsData)) {\r\n            const _engineResourcePaths = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.handleEngineResourcePaths)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule.engineResourcePaths, dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths);\r\n            await ((_b = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.dlr) === null || _b === void 0 ? void 0 : _b.loadRecognitionData(\"ConfusableChars\", _engineResourcePaths.dlr));\r\n        }\r\n        let result;\r\n        __classPrivateFieldSet(this, _CaptureVisionRouter_isScanner, false, \"f\");\r\n        if ((0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._isDSImageData)(imageOrFile)) {\r\n            result = await this._captureDsimage(imageOrFile, templateName);\r\n        }\r\n        else if (typeof imageOrFile === \"string\") {\r\n            if (imageOrFile.substring(0, 11) == \"data:image/\") {\r\n                result = await this._captureBase64(imageOrFile, templateName);\r\n            }\r\n            else {\r\n                result = await this._captureUrl(imageOrFile, templateName);\r\n            }\r\n        }\r\n        else if (imageOrFile instanceof Blob) {\r\n            result = await this._captureBlob(imageOrFile, templateName);\r\n        }\r\n        else if (imageOrFile instanceof HTMLImageElement) {\r\n            result = await this._captureImage(imageOrFile, templateName);\r\n        }\r\n        else if (imageOrFile instanceof HTMLCanvasElement) {\r\n            result = await this._captureCanvas(imageOrFile, templateName);\r\n        }\r\n        else if (imageOrFile instanceof HTMLVideoElement) {\r\n            result = await this._captureVideo(imageOrFile, templateName);\r\n        }\r\n        else {\r\n            throw new TypeError(\"'capture(imageOrFile, templateName)': Type of 'imageOrFile' should be 'DSImageData', 'Url', 'Base64', 'Blob', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement'.\");\r\n        }\r\n        return result;\r\n    }\r\n    ;\r\n    async _captureDsimage(imageOrFile, templateName) {\r\n        return await this._captureInWorker(imageOrFile, templateName);\r\n    }\r\n    async _captureUrl(imageOrFile, templateName) {\r\n        let blob = await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.requestResource)(imageOrFile, \"blob\");\r\n        return await this._captureBlob(blob, templateName);\r\n    }\r\n    async _captureBase64(base64Str, templateName) {\r\n        base64Str = base64Str.substring(base64Str.indexOf(',') + 1);\r\n        let binaryStr = atob(base64Str);\r\n        let n = binaryStr.length;\r\n        let u8arr = new Uint8Array(n);\r\n        while (n--) {\r\n            u8arr[n] = binaryStr.charCodeAt(n);\r\n        }\r\n        return await this._captureBlob(new Blob([u8arr]), templateName);\r\n    }\r\n    async _captureBlob(imageOrFile, templateName) {\r\n        const useObjurlToDrawBlobToImg = async function (blob) {\r\n            return await new Promise((rs, rj) => {\r\n                let objUrl = URL.createObjectURL(blob);\r\n                let image = new Image();\r\n                image.src = objUrl;\r\n                image.onload = () => {\r\n                    URL.revokeObjectURL(image.dbrObjUrl); // relese memory\r\n                    rs(image);\r\n                };\r\n                image.onerror = ev => {\r\n                    rj(new Error(\"Can't convert blob to image : \" + (ev instanceof Event ? ev.type : ev)));\r\n                };\r\n            });\r\n        };\r\n        let imageBitmap = null;\r\n        let img = null;\r\n        if (typeof createImageBitmap !== \"undefined\") {\r\n            try {\r\n                imageBitmap = await createImageBitmap(imageOrFile);\r\n            }\r\n            catch (ex) {\r\n                // createImageBitmap maybe fail in a lot of sense\r\n                // although objurl can pass\r\n            }\r\n        }\r\n        if (!imageBitmap) {\r\n            img = await useObjurlToDrawBlobToImg(imageOrFile);\r\n        }\r\n        let results = await this._captureImage(imageBitmap || img, templateName);\r\n        if (imageBitmap) {\r\n            imageBitmap.close();\r\n        } // release memory\r\n        return results;\r\n    }\r\n    async _captureImage(image, templateName) {\r\n        let imgW = image instanceof HTMLImageElement ? image.naturalWidth : image.width;\r\n        let imgH = image instanceof HTMLImageElement ? image.naturalHeight : image.height;\r\n        let maxNaturalWH = Math.max(imgW, imgH);\r\n        let acceptW, acceptH;\r\n        if (maxNaturalWH > this.maxCvsSideLength) {\r\n            __classPrivateFieldSet(this, _CaptureVisionRouter_compressRate, this.maxCvsSideLength / maxNaturalWH, \"f\");\r\n            acceptW = Math.round(imgW * __classPrivateFieldGet(this, _CaptureVisionRouter_compressRate, \"f\"));\r\n            acceptH = Math.round(imgH * __classPrivateFieldGet(this, _CaptureVisionRouter_compressRate, \"f\"));\r\n        }\r\n        else {\r\n            acceptW = imgW;\r\n            acceptH = imgH;\r\n        }\r\n        if (!__classPrivateFieldGet(this, _CaptureVisionRouter_canvas, \"f\")) {\r\n            __classPrivateFieldSet(this, _CaptureVisionRouter_canvas, document.createElement('canvas'), \"f\");\r\n        }\r\n        const cvs = __classPrivateFieldGet(this, _CaptureVisionRouter_canvas, \"f\");\r\n        if (cvs.width !== acceptW || cvs.height !== acceptH) {\r\n            cvs.width = acceptW;\r\n            cvs.height = acceptH;\r\n        }\r\n        if (!cvs.ctx2d) {\r\n            cvs.ctx2d = cvs.getContext('2d', { willReadFrequently: true });\r\n        }\r\n        const ctx = cvs.ctx2d;\r\n        ctx.drawImage(image, 0, 0, imgW, imgH, 0, 0, acceptW, acceptH);\r\n        if (image.dbrObjUrl) {\r\n            URL.revokeObjectURL(image.dbrObjUrl); // relese memory\r\n        }\r\n        return await this._captureCanvas(cvs, templateName);\r\n    }\r\n    async _captureCanvas(canvas, templateName) {\r\n        if (canvas.crossOrigin && \"anonymous\" != canvas.crossOrigin) { // canvas has crossOrigin to detect if cors, is native api\r\n            throw \"cors\";\r\n        }\r\n        if ([canvas.width, canvas.height].includes(0)) {\r\n            throw Error(`The width or height of the 'canvas' is 0.`);\r\n        }\r\n        const ctx = canvas.ctx2d || canvas.getContext(\"2d\", { willReadFrequently: true });\r\n        const imgData = Uint8Array.from(ctx.getImageData(0, 0, canvas.width, canvas.height).data);\r\n        const DsImageData = {\r\n            bytes: imgData,\r\n            width: canvas.width,\r\n            height: canvas.height,\r\n            stride: canvas.width * 4,\r\n            format: 10,\r\n        };\r\n        return await this._captureInWorker(DsImageData, templateName);\r\n    }\r\n    async _captureVideo(video, templateName) {\r\n        if (video.crossOrigin && \"anonymous\" != video.crossOrigin) {\r\n            throw \"cors\";\r\n        }\r\n        let imgW = video.videoWidth;\r\n        let imgH = video.videoHeight;\r\n        let maxNaturalWH = Math.max(imgW, imgH);\r\n        let acceptW, acceptH;\r\n        if (maxNaturalWH > this.maxCvsSideLength) {\r\n            __classPrivateFieldSet(this, _CaptureVisionRouter_compressRate, this.maxCvsSideLength / maxNaturalWH, \"f\");\r\n            acceptW = Math.round(imgW * __classPrivateFieldGet(this, _CaptureVisionRouter_compressRate, \"f\"));\r\n            acceptH = Math.round(imgH * __classPrivateFieldGet(this, _CaptureVisionRouter_compressRate, \"f\"));\r\n        }\r\n        else {\r\n            acceptW = imgW;\r\n            acceptH = imgH;\r\n        }\r\n        if (!__classPrivateFieldGet(this, _CaptureVisionRouter_canvas, \"f\")) {\r\n            __classPrivateFieldSet(this, _CaptureVisionRouter_canvas, document.createElement('canvas'), \"f\");\r\n        }\r\n        const cvs = __classPrivateFieldGet(this, _CaptureVisionRouter_canvas, \"f\");\r\n        if (cvs.width !== acceptW || cvs.height !== acceptH) {\r\n            cvs.width = acceptW;\r\n            cvs.height = acceptH;\r\n        }\r\n        if (!cvs.ctx2d) {\r\n            cvs.ctx2d = cvs.getContext('2d', { willReadFrequently: true });\r\n        }\r\n        const ctx = cvs.ctx2d;\r\n        ctx.drawImage(video, 0, 0, imgW, imgH, 0, 0, acceptW, acceptH);\r\n        return await this._captureCanvas(cvs, templateName);\r\n    }\r\n    async _captureInWorker(DsImageData, templateName) {\r\n        const { bytes, width, height, stride, format } = DsImageData;\r\n        let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n        const p = new MutablePromise();\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n            var _a, _b;\r\n            if (body.success) {\r\n                const getResultFromWorkerTime = Date.now();\r\n                if (CaptureVisionRouter._onLog) {\r\n                    CaptureVisionRouter._onLog(`get result time from worker: ${getResultFromWorkerTime}`);\r\n                    CaptureVisionRouter._onLog(`worker to main time consume: ${getResultFromWorkerTime - body.workerReturnMsgTime}`);\r\n                }\r\n                try {\r\n                    const captureResult = body.captureResult;\r\n                    if (captureResult.errorCode !== 0) {\r\n                        let error = new Error(captureResult.errorString);\r\n                        error.errorCode = captureResult.errorCode;\r\n                        return p.reject(error);\r\n                    }\r\n                    DsImageData.bytes = body.bytes;\r\n                    for (let item of captureResult.items) {\r\n                        if (__classPrivateFieldGet(this, _CaptureVisionRouter_compressRate, \"f\") !== 0) {\r\n                            convertCoordinates(item, __classPrivateFieldGet(this, _CaptureVisionRouter_compressRate, \"f\"));\r\n                        }\r\n                        if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_ORIGINAL_IMAGE) {\r\n                            item.imageData = DsImageData;\r\n                        }\r\n                        else if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_NORMALIZED_IMAGE) {\r\n                            (_a = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.ddn) === null || _a === void 0 ? void 0 : _a.handleNormalizedImageResultItem(item);\r\n                        }\r\n                        else if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_PARSED_RESULT) {\r\n                            (_b = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.dcp) === null || _b === void 0 ? void 0 : _b.handleParsedResultItem(item);\r\n                        }\r\n                    }\r\n                    if (__classPrivateFieldGet(this, _CaptureVisionRouter_isScanner, \"f\")) {\r\n                        for (let filter of __classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\")) {\r\n                            filter.onDecodedBarcodesReceived(captureResult);\r\n                            filter.onRecognizedTextLinesReceived(captureResult);\r\n                            filter.onDetectedQuadsReceived(captureResult);\r\n                            filter.onNormalizedImagesReceived(captureResult);\r\n                        }\r\n                    }\r\n                    const resultsForDraw = handleResultForDraw(captureResult);\r\n                    resultsForDraw.barcodeResultItems.length && (captureResult.barcodeResultItems = resultsForDraw.barcodeResultItems);\r\n                    resultsForDraw.textLineResultItems.length && (captureResult.textLineResultItems = resultsForDraw.textLineResultItems);\r\n                    resultsForDraw.detectedQuadResultItems.length && (captureResult.detectedQuadResultItems = resultsForDraw.detectedQuadResultItems);\r\n                    resultsForDraw.normalizedImageResultItems.length && (captureResult.normalizedImageResultItems = resultsForDraw.normalizedImageResultItems);\r\n                    resultsForDraw.parsedResultItems.length && (captureResult.parsedResultItems = resultsForDraw.parsedResultItems);\r\n                    if (!this._isPauseScan || !__classPrivateFieldGet(this, _CaptureVisionRouter_isScanner, \"f\")) {\r\n                        const irs = captureResult.intermediateResult; // irs => intermediateResults\r\n                        if (irs) {\r\n                            let irrSetCount = 0;\r\n                            for (let irr of __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\")._intermediateResultReceiverSet) {\r\n                                irrSetCount++;\r\n                                for (let cb of irs) {\r\n                                    if (cb.info.callbackName === \"onTaskResultsReceived\") {\r\n                                        for (let unit of cb.intermediateResultUnits) {\r\n                                            unit.originalImageTag = DsImageData.tag ? DsImageData.tag : null;\r\n                                        }\r\n                                        if (irr[cb.info.callbackName]) {\r\n                                            irr[cb.info.callbackName]({ intermediateResultUnits: cb.intermediateResultUnits }, cb.info);\r\n                                        }\r\n                                    }\r\n                                    else {\r\n                                        if (irr[cb.info.callbackName]) {\r\n                                            irr[cb.info.callbackName](cb.result, cb.info);\r\n                                        }\r\n                                    }\r\n                                    if (irrSetCount === __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\")._intermediateResultReceiverSet.size) {\r\n                                        delete cb.info.callbackName;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    captureResult && captureResult.hasOwnProperty(\"intermediateResult\") && delete captureResult.intermediateResult;\r\n                    __classPrivateFieldSet(this, _CaptureVisionRouter_compressRate, 0, \"f\");\r\n                    return p.resolve(captureResult);\r\n                }\r\n                catch (ex) {\r\n                    return p.reject(ex);\r\n                }\r\n            }\r\n            else {\r\n                let ex = new Error(body.message);\r\n                ex.stack = body.stack + '\\n' + ex.stack;\r\n                return p.reject(ex);\r\n            }\r\n        };\r\n        if (CaptureVisionRouter._onLog) {\r\n            CaptureVisionRouter._onLog(`send buffer to worker: ${Date.now()}`);\r\n        }\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n            type: \"cvr_capture\",\r\n            id: taskID,\r\n            instanceID: this._instanceID,\r\n            body: {\r\n                bytes,\r\n                width,\r\n                height,\r\n                stride,\r\n                format,\r\n                templateName: templateName ? templateName : \"\",\r\n                isScanner: __classPrivateFieldGet(this, _CaptureVisionRouter_isScanner, \"f\")\r\n            }\r\n        }, [bytes.buffer]);\r\n        return p;\r\n    }\r\n    ;\r\n    /**\r\n     * Configures runtime settings using a provided JSON string, an object, or a URL pointing to an object, which contains settings for one or more `CaptureVisionTemplates`.\r\n     * @param settings A JSON string, an object, or a URL pointing to an object that contains settings for one or more `CaptureVisionTemplates`.\r\n     *\r\n     * @returns A promise that resolves when the operation has completed. It provides an object that describes the result.\r\n     */\r\n    async initSettings(settings) {\r\n        checkIsDisposed(this);\r\n        if (!settings || ![\"string\", \"object\"].includes(typeof settings)) {\r\n            return console.error(\"Invalid template.\");\r\n        }\r\n        if (typeof settings === \"string\") {\r\n            if (!settings.startsWith(\"{\")) {\r\n                settings = await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.requestResource)(settings, \"text\");\r\n            }\r\n            this._currentSettings = JSON.parse(settings);\r\n        }\r\n        else if (typeof settings === \"object\") {\r\n            this._currentSettings = settings;\r\n            settings = JSON.stringify(settings);\r\n        }\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    const response = JSON.parse(body.response);\r\n                    if (response.exception !== 0) {\r\n                        let error = new Error(response.description ? response.description : \"Init Settings Failed.\");\r\n                        error.errorCode = response.exception;\r\n                        return rj(error);\r\n                    }\r\n                    let modules = [];\r\n                    let templateNames = JSON.parse(settings).CaptureVisionTemplates;\r\n                    for (let i = 0; i < templateNames.length; i++) {\r\n                        let tasks = await this.containsTask(templateNames[i].Name);\r\n                        modules = modules.concat(tasks);\r\n                    }\r\n                    await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)([...new Set(modules)]);\r\n                    this._isOutputOriginalImage = (this._currentSettings.CaptureVisionTemplates[0].OutputOriginalImage === 1);\r\n                    return rs(response);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_initSettings\",\r\n                id: taskID,\r\n                instanceID: this._instanceID,\r\n                body: { settings },\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Returns an object that contains settings for the specified `CaptureVisionTemplate`.\r\n     * @param templateName Specifies a `CaptureVisionTemplate` by its name. If passed \"*\", the returned object will contain all templates.\r\n     *\r\n     * @returns A promise that resolves with the object that contains settings for the specified template or all templates.\r\n     */\r\n    async outputSettings(templateName) {\r\n        checkIsDisposed(this);\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    const settings = JSON.parse(body.settings);\r\n                    if (settings.errorCode !== 0) {\r\n                        let error = new Error(settings.errorString);\r\n                        error.errorCode = settings.errorCode;\r\n                        return rj(error);\r\n                    }\r\n                    delete settings.errorCode;\r\n                    delete settings.errorString;\r\n                    return rs(settings);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_outputSettings\",\r\n                id: taskID,\r\n                instanceID: this._instanceID,\r\n                body: {\r\n                    templateName: templateName ? templateName : \"*\"\r\n                }\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Generates a Blob object or initiates a JSON file download containing the settings for the specified `CaptureVisionTemplate`.\r\n     * @param templateName Specifies a `CaptureVisionTemplate` by its name. If passed \"*\", the returned object will contain all templates.\r\n     * @param fileName Specifies the name of the file.\r\n     * @param download Boolean that specifies whether to initiates a file download.\r\n     *\r\n     * @returns A promise that resolves with the Blob object that contains settings for the specified template or all templates.\r\n     */\r\n    async outputSettingsToFile(templateName, fileName, download) {\r\n        const settings = await this.outputSettings(templateName);\r\n        const jsonBlob = new Blob([JSON.stringify(settings, null, 2, function (_, value) {\r\n                if (value instanceof Array) {\r\n                    return JSON.stringify(value);\r\n                }\r\n                else {\r\n                    return value;\r\n                }\r\n            }, 2)], { type: \"application/json\" });\r\n        if (download) {\r\n            const downloadLink = document.createElement(\"a\");\r\n            downloadLink.href = URL.createObjectURL(jsonBlob);\r\n            if (fileName.endsWith(\".json\")) {\r\n                fileName = fileName.replace(\".json\", \"\");\r\n            }\r\n            downloadLink.download = `${fileName}.json`;\r\n            downloadLink.onclick = () => {\r\n                setTimeout(() => {\r\n                    URL.revokeObjectURL(downloadLink.href);\r\n                }, 500);\r\n            };\r\n            downloadLink.click();\r\n        }\r\n        return jsonBlob;\r\n    }\r\n    /**\r\n     * Retrieves a JSON object that contains simplified settings for the specified `CaptureVisionTemplate`.\r\n     * @param templateName Specifies a `CaptureVisionTemplate` by its name.\r\n     *\r\n     * @returns A promise that resolves with a JSON object, of type `SimplifiedCaptureVisionSettings`, which represents the simplified settings for the specified template.\r\n     * @remarks If the settings of the specified template are too complex, we cannot create a SimplifiedCaptureVisionSettings, and as a result, it will return an error.\r\n     */\r\n    async getSimplifiedSettings(templateName) {\r\n        checkIsDisposed(this);\r\n        if (!templateName)\r\n            templateName = this._currentSettings.CaptureVisionTemplates[0].Name;\r\n        const tasks = await this.containsTask(templateName);\r\n        await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)(tasks);\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    const result = JSON.parse(body.settings, (k, v) => {\r\n                        if (k === \"barcodeFormatIds\") {\r\n                            return BigInt(v);\r\n                        }\r\n                        return v;\r\n                    });\r\n                    result.minImageCaptureInterval = this._minImageCaptureInterval;\r\n                    if (result.code !== 0) {\r\n                        let error = new Error(result.codeString);\r\n                        error.errorCode = result.errorCode;\r\n                        return rj(error);\r\n                    }\r\n                    delete result.code;\r\n                    delete result.codeString;\r\n                    return rs(result);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_getSimplifiedSettings\",\r\n                id: taskID,\r\n                instanceID: this._instanceID,\r\n                body: { templateName }\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Updates the specified `CaptureVisionTemplate` with an updated `SimplifiedCaptureVisionSettings` object.\r\n     * @param templateName Specifies a `CaptureVisionTemplate` by its name.\r\n     * @param settings The `SimplifiedCaptureVisionSettings` object that contains updated settings.\r\n     *\r\n     * @returns A promise that resolves when the operation has completed. It provides an object that describes the result.\r\n     */\r\n    async updateSettings(templateName, settings) {\r\n        checkIsDisposed(this);\r\n        const tasks = await this.containsTask(templateName);\r\n        await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)(tasks);\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    const response = JSON.parse(body.response);\r\n                    if (settings.minImageCaptureInterval && settings.minImageCaptureInterval >= -1) {\r\n                        this._minImageCaptureInterval = settings.minImageCaptureInterval;\r\n                    }\r\n                    this._isOutputOriginalImage = body.isOutputOriginalImage;\r\n                    if (response.exception !== 0) {\r\n                        let error = new Error(response.description ? response.description : \"Update Settings Failed.\");\r\n                        error.errorCode = response.exception;\r\n                        return rj(error);\r\n                    }\r\n                    this._currentSettings = await this.outputSettings(\"*\");\r\n                    return rs(response);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_updateSettings\",\r\n                id: taskID,\r\n                instanceID: this._instanceID,\r\n                body: {\r\n                    settings,\r\n                    templateName\r\n                }\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Restores all runtime settings to their original default values.\r\n     *\r\n     * @returns A promise that resolves when the operation has completed. It provides an object that describes the result.\r\n     */\r\n    async resetSettings() {\r\n        checkIsDisposed(this);\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    const response = JSON.parse(body.response);\r\n                    if (response.exception !== 0) {\r\n                        let error = new Error(response.description ? response.description : \"Reset Settings Failed.\");\r\n                        error.errorCode = response.exception;\r\n                        return rj(error);\r\n                    }\r\n                    this._currentSettings = await this.outputSettings(\"*\");\r\n                    return rs(response);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_resetSettings\",\r\n                id: taskID,\r\n                instanceID: this._instanceID\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Returns an object, of type `BufferedItemsManager`, that manages buffered items.\r\n     * @returns The `BufferedItemsManager` object.\r\n     */\r\n    getBufferedItemsManager() {\r\n        if (!__classPrivateFieldGet(this, _CaptureVisionRouter_bufferdItemsManager, \"f\")) {\r\n            __classPrivateFieldSet(this, _CaptureVisionRouter_bufferdItemsManager, new BufferedItemsManager(this), \"f\");\r\n        }\r\n        return __classPrivateFieldGet(this, _CaptureVisionRouter_bufferdItemsManager, \"f\");\r\n    }\r\n    /**\r\n     * Returns an object, of type `IntermediateResultManager`, that manages intermediate results.\r\n     *\r\n     * @returns The `IntermediateResultManager` object.\r\n     */\r\n    getIntermediateResultManager() {\r\n        checkIsDisposed(this);\r\n        if (!__classPrivateFieldGet(this, _CaptureVisionRouter_innerUseTag, \"f\") && dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule.bSupportIRTModule !== 0) {\r\n            throw new Error(\"The current license does not support the use of intermediate results.\");\r\n        }\r\n        if (!__classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\")) {\r\n            __classPrivateFieldSet(this, _CaptureVisionRouter_intermediateResultManager, new IntermediateResultManager(this), \"f\");\r\n        }\r\n        return __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\");\r\n    }\r\n    ;\r\n    async parseRequiredResources(templateName) {\r\n        checkIsDisposed(this);\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    return rs(JSON.parse(body.resources));\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_parseRequiredResources\",\r\n                id: taskID,\r\n                instanceID: this._instanceID,\r\n                body: {\r\n                    templateName\r\n                }\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Releases all resources used by the `CaptureVisionRouter` instance.\r\n     *\r\n     * @returns A promise that resolves when the resources have been successfully released. It does not provide any value upon resolution.\r\n     */\r\n    async dispose() {\r\n        checkIsDisposed(this);\r\n        if (__classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\")) {\r\n            this.stopCapturing();\r\n        }\r\n        __classPrivateFieldSet(this, _CaptureVisionRouter_isa, null, \"f\");\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\").clear();\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_isaStateListenerSet, \"f\").clear();\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\").clear();\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\")._intermediateResultReceiverSet.clear();\r\n        __classPrivateFieldSet(this, _CaptureVisionRouter_isDestroyed, true, \"f\");\r\n        // this._captureStateListenerSet.clear();\r\n        let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = (body) => {\r\n            if (body.success) ;\r\n            else {\r\n                let ex = new Error(body.message);\r\n                ex.stack = body.stack + '\\n' + ex.stack;\r\n                throw ex;\r\n            }\r\n        };\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n            type: 'cvr_dispose',\r\n            id: taskID,\r\n            instanceID: this._instanceID\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * For Debug\r\n     */\r\n    _getInternalData() {\r\n        return {\r\n            isa: __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\"),\r\n            promiseStartScan: __classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\"),\r\n            intermediateResultManager: __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\"),\r\n            bufferdItemsManager: __classPrivateFieldGet(this, _CaptureVisionRouter_bufferdItemsManager, \"f\"),\r\n            resultReceiverSet: __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\"),\r\n            isaStateListenerSet: __classPrivateFieldGet(this, _CaptureVisionRouter_isaStateListenerSet, \"f\"),\r\n            resultFilterSet: __classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\"),\r\n            compressRate: __classPrivateFieldGet(this, _CaptureVisionRouter_compressRate, \"f\"),\r\n            canvas: __classPrivateFieldGet(this, _CaptureVisionRouter_canvas, \"f\"),\r\n            isScanner: __classPrivateFieldGet(this, _CaptureVisionRouter_isScanner, \"f\"),\r\n            innerUseTag: __classPrivateFieldGet(this, _CaptureVisionRouter_innerUseTag, \"f\"),\r\n            isDestroyed: __classPrivateFieldGet(this, _CaptureVisionRouter_isDestroyed, \"f\")\r\n        };\r\n    }\r\n    async _getWasmFilterState() {\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    const response = JSON.parse(body.response);\r\n                    return rs(response);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_getWasmFilterState\",\r\n                id: taskID,\r\n                instanceID: this._instanceID\r\n            });\r\n        });\r\n    }\r\n}\r\n_CaptureVisionRouter_isa = new WeakMap(), _CaptureVisionRouter_canvas = new WeakMap(), _CaptureVisionRouter_promiseStartScan = new WeakMap(), _CaptureVisionRouter_intermediateResultManager = new WeakMap(), _CaptureVisionRouter_bufferdItemsManager = new WeakMap(), _CaptureVisionRouter_resultReceiverSet = new WeakMap(), _CaptureVisionRouter_isaStateListenerSet = new WeakMap(), _CaptureVisionRouter_resultFilterSet = new WeakMap(), _CaptureVisionRouter_compressRate = new WeakMap(), _CaptureVisionRouter_isScanner = new WeakMap(), _CaptureVisionRouter_innerUseTag = new WeakMap(), _CaptureVisionRouter_isDestroyed = new WeakMap();\r\nasync function _enableResultCrossVerification(cvr, verificationEnabled) {\r\n    checkIsDisposed(cvr);\r\n    return await new Promise((rs, rj) => {\r\n        let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n            if (body.success) {\r\n                return rs(body.result);\r\n            }\r\n            else {\r\n                let ex = new Error(body.message);\r\n                ex.stack = body.stack + '\\n' + ex.stack;\r\n                return rj(ex);\r\n            }\r\n        };\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n            type: \"cvr_enableResultCrossVerification\",\r\n            id: taskID,\r\n            instanceID: cvr._instanceID,\r\n            body: {\r\n                verificationEnabled\r\n            }\r\n        });\r\n    });\r\n}\r\nasync function _enableResultDeduplication(cvr, duplicateFilterEnabled) {\r\n    checkIsDisposed(cvr);\r\n    return await new Promise((rs, rj) => {\r\n        let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n            if (body.success) {\r\n                return rs(body.result);\r\n            }\r\n            else {\r\n                let ex = new Error(body.message);\r\n                ex.stack = body.stack + '\\n' + ex.stack;\r\n                return rj(ex);\r\n            }\r\n        };\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n            type: \"cvr_enableResultDeduplication\",\r\n            id: taskID,\r\n            instanceID: cvr._instanceID,\r\n            body: {\r\n                duplicateFilterEnabled\r\n            }\r\n        });\r\n    });\r\n}\r\nasync function _setDuplicateForgetTime(cvr, duplicateForgetTime) {\r\n    checkIsDisposed(cvr);\r\n    return await new Promise((rs, rj) => {\r\n        let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n            if (body.success) {\r\n                return rs(body.result);\r\n            }\r\n            else {\r\n                let ex = new Error(body.message);\r\n                ex.stack = body.stack + '\\n' + ex.stack;\r\n                return rj(ex);\r\n            }\r\n        };\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n            type: \"cvr_setDuplicateForgetTime\",\r\n            id: taskID,\r\n            instanceID: cvr._instanceID,\r\n            body: {\r\n                duplicateForgetTime\r\n            }\r\n        });\r\n    });\r\n}\r\nasync function _clearVerifyList(cvr) {\r\n    let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n    const p = new MutablePromise();\r\n    dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n        if (body.success) {\r\n            return p.resolve();\r\n        }\r\n        else {\r\n            let ex = new Error(body.message);\r\n            ex.stack = body.stack + '\\n' + ex.stack;\r\n            return p.reject(ex);\r\n        }\r\n    };\r\n    dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n        type: \"cvr_clearVerifyList\",\r\n        id: taskID,\r\n        instanceID: cvr._instanceID\r\n    });\r\n    return p;\r\n}\n\n// TODO\r\nclass CapturedResultReceiver {\r\n    constructor() {\r\n        /**\r\n         * Event triggered when a generic captured result is available, occurring each time an image finishes its processing.\r\n         * This event can be used for any result that does not fit into the specific categories of the other callback events.\r\n         * @param result The captured result, an instance of `CapturedResult`.\r\n         */\r\n        this.onCapturedResultReceived = null;\r\n        /**\r\n         * Event triggered when the original image result is available.\r\n         * This event is used to handle the original image captured by an image source such as Dynamsoft Camera Enhancer.\r\n         * @param result The original image result, an instance of `OriginalImageResultItem`.\r\n         */\r\n        this.onOriginalImageResultReceived = null;\r\n    }\r\n}\n\nclass IntermediateResultReceiver {\r\n    constructor() {\r\n        this._observedResultUnitTypes = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumIntermediateResultUnitType.IRUT_ALL;\r\n        this._observedTaskMap = new Map();\r\n        this._parameters = {\r\n            setObservedResultUnitTypes: (types) => {\r\n                this._observedResultUnitTypes = types;\r\n            },\r\n            getObservedResultUnitTypes: () => {\r\n                return this._observedResultUnitTypes;\r\n            },\r\n            isResultUnitTypeObserved: (type) => {\r\n                return !!(type & this._observedResultUnitTypes);\r\n            },\r\n            addObservedTask: (taskName) => {\r\n                this._observedTaskMap.set(taskName, true);\r\n            },\r\n            removeObservedTask: (taskName) => {\r\n                this._observedTaskMap.set(taskName, false);\r\n            },\r\n            isTaskObserved: (taskName) => {\r\n                if (this._observedTaskMap.size === 0)\r\n                    return true;\r\n                return !!(this._observedTaskMap.get(taskName));\r\n            }\r\n        };\r\n        this.onTaskResultsReceived = null;\r\n        // section\r\n        this.onPredetectedRegionsReceived = null;\r\n        // The remaining callback definitions will be automatically injected when imported into other modules\r\n        // stage\r\n        this.onColourImageUnitReceived = null;\r\n        this.onScaledDownColourImageUnitReceived = null;\r\n        this.onGrayscaleImageUnitReceived = null;\r\n        this.onTransformedGrayscaleImageUnitReceived = null;\r\n        this.onEnhancedGrayscaleImageUnitReceived = null;\r\n        this.onBinaryImageUnitReceived = null;\r\n        this.onTextureDetectionResultUnitReceived = null;\r\n        this.onTextureRemovedGrayscaleImageUnitReceived = null;\r\n        this.onTextureRemovedBinaryImageUnitReceived = null;\r\n        this.onContoursUnitReceived = null;\r\n        this.onLineSegmentsUnitReceived = null;\r\n        this.onTextZonesUnitReceived = null;\r\n        this.onTextRemovedBinaryImageUnitReceived = null;\r\n        this.onShortLinesUnitReceived = null;\r\n        // The remaining callback definitions will be automatically injected when imported into other modules\r\n    }\r\n    /**\r\n     * Gets the observed parameters of the intermediate result receiver. Allowing for configuration of intermediate result observation.\r\n     * @return The observed parameters, of type ObservationParameters. The default parameters are to observe all intermediate result unit types and all tasks.\r\n     */\r\n    getObservationParameters() {\r\n        return this._parameters;\r\n    }\r\n}\n\nvar EnumPresetTemplate;\r\n(function (EnumPresetTemplate) {\r\n    /**\r\n     * @brief Versatile function for barcode reading, document detection, or text recognition.\r\n     */\r\n    EnumPresetTemplate[\"PT_DEFAULT\"] = \"Default\";\r\n    /**\r\n     * @brief Scans a single barcode.\r\n     */\r\n    EnumPresetTemplate[\"PT_READ_BARCODES\"] = \"ReadBarcodes_Default\";\r\n    /**\r\n     * @brief Identifies and reads any text present.\r\n     */\r\n    EnumPresetTemplate[\"PT_RECOGNIZE_TEXT_LINES\"] = \"RecognizeTextLines_Default\";\r\n    /**\r\n     * @brief RIdentifies the edges of a document.\r\n     */\r\n    EnumPresetTemplate[\"PT_DETECT_DOCUMENT_BOUNDARIES\"] = \"DetectDocumentBoundaries_Default\";\r\n    /**\r\n     * @brief Detects document edges and standardizes its format.\r\n     */\r\n    EnumPresetTemplate[\"PT_DETECT_AND_NORMALIZE_DOCUMENT\"] = \"DetectAndNormalizeDocument_Default\";\r\n    /**\r\n     * @brief Adjusts a document to a standard format using detected borders.\r\n     */\r\n    EnumPresetTemplate[\"PT_NORMALIZE_DOCUMENT\"] = \"NormalizeDocument_Default\";\r\n    /**\r\n     * @brief Represents a barcode reading mode where speed is prioritized.\r\n     *\r\n     * In this mode, the barcode reader will optimize for faster barcode detection\r\n     * and decoding, sacrificing some level of accuracy and read rate. It is suitable\r\n     * for situations where a quick response time is more important than perfect\r\n     * barcode recognition.\r\n     */\r\n    EnumPresetTemplate[\"PT_READ_BARCODES_SPEED_FIRST\"] = \"ReadBarcodes_SpeedFirst\";\r\n    /**\r\n     * @brief Represents a barcode reading mode where barcode read rate is prioritized.\r\n     *\r\n     * In this mode, the barcode reader will optimize for higher barcode read rates,\r\n     * even if it may sometimes result in reduced accuracy and speed. It is suitable for\r\n     * scenarios where maximizing the number of successfully read barcodes is critical.\r\n     */\r\n    EnumPresetTemplate[\"PT_READ_BARCODES_READ_RATE_FIRST\"] = \"ReadBarcodes_ReadRateFirst\";\r\n    /**\r\n     * @brief Represents a balanced barcode reading mode.\r\n     *\r\n     * This mode aims for a reasonable balance between speed and read rate in barcode\r\n     * recognition. It is suitable for most common use cases where a compromise between\r\n     * speed and read rate is acceptable.\r\n     */\r\n    EnumPresetTemplate[\"PT_READ_BARCODES_BALANCE\"] = \"ReadBarcodes_Balance\";\r\n    /**\r\n    * @brief Represents a barcode reading mode for single barcode code detection.\r\n    *\r\n    * In this mode, the barcode reader will focus on detecting and decoding a single\r\n    * barcode code, ignoring any additional codes in the same image. It is efficient\r\n    * when the target image has only one barcode.\r\n    */\r\n    EnumPresetTemplate[\"PT_READ_SINGLE_BARCODE\"] = \"ReadBarcodes_Balanced\";\r\n    /**\r\n     * @brief Represents a barcode reading mode optimized for dense barcode codes.\r\n     *\r\n     * This mode is designed to handle dense or closely packed barcode codes where\r\n     * accuracy is paramount. It may operate slower than other modes but is suitable\r\n     * for challenging scenarios where code density is high.\r\n     */\r\n    EnumPresetTemplate[\"PT_READ_DENSE_BARCODES\"] = \"ReadDenseBarcodes\";\r\n    /**\r\n     * @brief Represents a barcode reading mode optimized for distant barcode codes.\r\n     *\r\n     * This mode is designed to scanning a barcode that is placed far from the device.\r\n     */\r\n    EnumPresetTemplate[\"PT_READ_DISTANT_BARCODES\"] = \"ReadDistantBarcodes\";\r\n    /**\r\n    * @brief Represents a text recognition mode focused on recognizing numbers.\r\n    */\r\n    EnumPresetTemplate[\"PT_RECOGNIZE_NUMBERS\"] = \"RecognizeNumbers\";\r\n    /**\r\n     * @brief Represents a text recognition mode focused on recognizing alphabetic characters (letters).\r\n     *\r\n     */\r\n    EnumPresetTemplate[\"PT_RECOGNIZE_LETTERS\"] = \"RecognizeLetters\";\r\n    /**\r\n     * @brief Represents a text recognition mode that combines numbers and alphabetic characters (letters) recognition.\r\n     */\r\n    EnumPresetTemplate[\"PT_RECOGNIZE_NUMBERS_AND_LETTERS\"] = \"RecognizeNumbersAndLetters\";\r\n    /**\r\n     * @brief Represents a text recognition mode that combines numbers and uppercase letters recognition.\r\n     */\r\n    EnumPresetTemplate[\"PT_RECOGNIZE_NUMBERS_AND_UPPERCASE_LETTERS\"] = \"RecognizeNumbersAndUppercaseLetters\";\r\n    /**\r\n     * @brief Represents a text recognition mode focused on recognizing uppercase letters.\r\n     */\r\n    EnumPresetTemplate[\"PT_RECOGNIZE_UPPERCASE_LETTERS\"] = \"RecognizeUppercaseLetters\";\r\n})(EnumPresetTemplate || (EnumPresetTemplate = {}));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9keW5hbXNvZnQtY2FwdHVyZS12aXNpb24tcm91dGVyL2Rpc3QvY3ZyLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDb1c7O0FBRXBXO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsc0JBQXNCO0FBQ3RCLHdCQUF3QjtBQUN4Qix1QkFBdUI7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsVUFBVTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywrQkFBK0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDZEQUFhO0FBQ3RDLFlBQVksMkRBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdDQUF3QywwRUFBOEI7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnREFBZ0Q7O0FBRXVHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9keW5hbXNvZnQtY2FwdHVyZS12aXNpb24tcm91dGVyL2Rpc3QvY3ZyLmVzbS5qcz80ZmVkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogRHluYW1zb2Z0IEphdmFTY3JpcHQgTGlicmFyeVxuICogQHByb2R1Y3QgRHluYW1zb2Z0IENhcHR1cmUgVmlzaW9uIFJvdXRlciBKUyBFZGl0aW9uXG4gKiBAd2Vic2l0ZSBodHRwOi8vd3d3LmR5bmFtc29mdC5jb21cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IDIwMjQsIER5bmFtc29mdCBDb3Jwb3JhdGlvblxuICogQGF1dGhvciBEeW5hbXNvZnRcbiAqIEB2ZXJzaW9uIFwiMi40LjIxXCJcbiAqIEBmaWxlb3ZlcnZpZXcgRHluYW1zb2Z0IEphdmFTY3JpcHQgTGlicmFyeSBmb3IgQ2FwdHVyZSBWaXNpb25cbiAqIE1vcmUgaW5mbyBvbiBjdnIgSlM6IGh0dHBzOi8vd3d3LmR5bmFtc29mdC5jb20vY2FwdHVyZS12aXNpb24vZG9jcy93ZWIvcHJvZ3JhbW1pbmcvamF2YXNjcmlwdC9hcGktcmVmZXJlbmNlL2NhcHR1cmUtdmlzaW9uLXJvdXRlci9jYXB0dXJlLXZpc2lvbi1yb3V0ZXItbW9kdWxlLmh0bWxcbiAqL1xuaW1wb3J0IHsgZ2V0TmV4dFRhc2tJRCwgbWFwVGFza0NhbGxCYWNrLCB3b3JrZXIsIGF1dG9EaXNjb3ZlcnlQYXRocywgd29ya2VyQXV0b1Jlc291cmNlcywgbWFwUGFja2FnZVJlZ2lzdGVyLCBjb21wYXJlVmVyc2lvbiwgaW5uZXJWZXJzaW9ucywgRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUsIENvcmVNb2R1bGUsIGxvYWRXYXNtLCBoYW5kbGVFbmdpbmVSZXNvdXJjZVBhdGhzLCBFbnVtSW1hZ2VQaXhlbEZvcm1hdCwgRW51bUNvbG91ckNoYW5uZWxVc2FnZVR5cGUsIF9pc0RTSW1hZ2VEYXRhLCByZXF1ZXN0UmVzb3VyY2UsIEVudW1JbnRlcm1lZGlhdGVSZXN1bHRVbml0VHlwZSB9IGZyb20gJ2R5bmFtc29mdC1jb3JlJztcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCwgSXRlcmF0b3IgKi9cclxuXHJcblxyXG5mdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG5cclxudHlwZW9mIFN1cHByZXNzZWRFcnJvciA9PT0gXCJmdW5jdGlvblwiID8gU3VwcHJlc3NlZEVycm9yIDogZnVuY3Rpb24gKGVycm9yLCBzdXBwcmVzc2VkLCBtZXNzYWdlKSB7XHJcbiAgICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XHJcbn07XG5cbmNvbnN0IGlzUHJvbWlzZUxpa2UgPSAodmFsdWUpID0+ICh2YWx1ZSAmJiBcIm9iamVjdFwiID09PSB0eXBlb2YgdmFsdWUgJiYgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgdmFsdWUudGhlbik7XG5jbGFzcyBNdXRhYmxlUHJvbWlzZSBleHRlbmRzIFByb21pc2Uge1xuICAgIGdldCBzdGF0dXMoKSB7IHJldHVybiB0aGlzLl9zOyB9XG4gICAgZ2V0IGlzUGVuZGluZygpIHsgcmV0dXJuIFwicGVuZGluZ1wiID09PSB0aGlzLl9zOyB9XG4gICAgZ2V0IGlzRnVsZmlsbGVkKCkgeyByZXR1cm4gXCJmdWxmaWxsZWRcIiA9PT0gdGhpcy5fczsgfVxuICAgIGdldCBpc1JlamVjdGVkKCkgeyByZXR1cm4gXCJyZWplY3RlZFwiID09PSB0aGlzLl9zOyB9XG4gICAgZ2V0IHRhc2soKSB7IHJldHVybiB0aGlzLl90YXNrOyB9XG4gICAgc2V0IHRhc2sodmFsdWUpIHtcbiAgICAgICAgLy9pZighdGhpcy5pc1BlbmRpbmcpeyByZXR1cm47IH1cbiAgICAgICAgdGhpcy5fdGFzayA9IHZhbHVlO1xuICAgICAgICBsZXQgcDtcbiAgICAgICAgaWYgKGlzUHJvbWlzZUxpa2UodmFsdWUpKSB7XG4gICAgICAgICAgICBwID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgdmFsdWUpIHtcbiAgICAgICAgICAgIHAgPSBuZXcgUHJvbWlzZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHApIHtcbiAgICAgICAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0ID0gYXdhaXQgcDtcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRhc2sgbm90IGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMuX3Rhc2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZShyZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRhc2sgbm90IGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMuX3Rhc2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KHJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpc0VtcHR5KCkgeyByZXR1cm4gbnVsbCA9PSB0aGlzLl90YXNrOyB9XG4gICAgY29uc3RydWN0b3IoZXhlY3V0b3IpIHtcbiAgICAgICAgbGV0IHJzO1xuICAgICAgICBsZXQgcmo7XG4gICAgICAgIGNvbnN0IGZuID0gKF9ycywgX3JqKSA9PiB7IHJzID0gX3JzOyByaiA9IF9yajsgfTtcbiAgICAgICAgc3VwZXIoZm4pO1xuICAgICAgICAvLyB3YWxrYXJvdW5kIGJhYmVsIHdoaWNoIGNhbiBub3QgZXh0ZW5kIGJ1aWx0aW4gY2xhc3NcbiAgICAgICAgLy8gbGV0IF90aGlzID0gdGhpcztcbiAgICAgICAgLy8gbGV0IHRoZW4gPSBuZXcgUHJvbWlzZShmbikudGhlbjtcbiAgICAgICAgLy8gdGhpcy50aGVuID0gZnVuY3Rpb24oKXsgdGhlbi5hcHBseShfdGhpcywgYXJndW1lbnRzKSB9IGFzIGFueTtcbiAgICAgICAgdGhpcy5fcyA9IFwicGVuZGluZ1wiO1xuICAgICAgICB0aGlzLnJlc29sdmUgPSAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUGVuZGluZykge1xuICAgICAgICAgICAgICAgIGlmIChpc1Byb21pc2VMaWtlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3MgPSBcImZ1bGZpbGxlZFwiO1xuICAgICAgICAgICAgICAgICAgICBycyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlamVjdCA9IChyZWFzb24pID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUGVuZGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3MgPSBcInJlamVjdGVkXCI7XG4gICAgICAgICAgICAgICAgcmoocmVhc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50YXNrID0gZXhlY3V0b3I7XG4gICAgfVxufVxuXG5jbGFzcyBCdWZmZXJlZEl0ZW1zTWFuYWdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihjdnIpIHtcclxuICAgICAgICB0aGlzLl9jdnIgPSBjdnI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIG1heGltdW0gbnVtYmVyIG9mIGJ1ZmZlcmVkIGl0ZW1zLlxyXG4gICAgICogQHJldHVybnMgUmV0dXJucyB0aGUgbWF4aW11bSBudW1iZXIgb2YgYnVmZmVyZWQgaXRlbXMuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldE1heEJ1ZmZlcmVkSXRlbXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChycywgcmopID0+IHtcclxuICAgICAgICAgICAgbGV0IHRhc2tJRCA9IGdldE5leHRUYXNrSUQoKTtcclxuICAgICAgICAgICAgbWFwVGFza0NhbGxCYWNrW3Rhc2tJRF0gPSBhc3luYyAoYm9keSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBycyhib2R5LmNvdW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4LnN0YWNrID0gYm9keS5zdGFjayArICdcXG4nICsgZXguc3RhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJqKGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiY3ZyX2dldE1heEJ1ZmZlcmVkSXRlbXNcIixcclxuICAgICAgICAgICAgICAgIGlkOiB0YXNrSUQsXHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlEOiB0aGlzLl9jdnIuX2luc3RhbmNlSURcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIG1heGltdW0gbnVtYmVyIG9mIGJ1ZmZlcmVkIGl0ZW1zLlxyXG4gICAgICogQHBhcmFtIGNvdW50IHRoZSBtYXhpbXVtIG51bWJlciBvZiBidWZmZXJlZCBpdGVtc1xyXG4gICAgICovXHJcbiAgICBhc3luYyBzZXRNYXhCdWZmZXJlZEl0ZW1zKGNvdW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChycywgcmopID0+IHtcclxuICAgICAgICAgICAgbGV0IHRhc2tJRCA9IGdldE5leHRUYXNrSUQoKTtcclxuICAgICAgICAgICAgbWFwVGFza0NhbGxCYWNrW3Rhc2tJRF0gPSBhc3luYyAoYm9keSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBycygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV4ID0gbmV3IEVycm9yKGJvZHkubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXguc3RhY2sgPSBib2R5LnN0YWNrICsgJ1xcbicgKyBleC5zdGFjaztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmooZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJjdnJfc2V0TWF4QnVmZmVyZWRJdGVtc1wiLFxyXG4gICAgICAgICAgICAgICAgaWQ6IHRhc2tJRCxcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSUQ6IHRoaXMuX2N2ci5faW5zdGFuY2VJRCxcclxuICAgICAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIDtcclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgYnVmZmVyZWQgY2hhcmFjdGVyIGl0ZW1zLlxyXG4gICAgICogQHJldHVybiB0aGUgYnVmZmVyZWQgY2hhcmFjdGVyIGl0ZW1zXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEJ1ZmZlcmVkQ2hhcmFjdGVySXRlbVNldCgpIHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgICAgICBtYXBUYXNrQ2FsbEJhY2tbdGFza0lEXSA9IGFzeW5jIChib2R5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzKGJvZHkuaXRlbVNldCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImN2cl9nZXRCdWZmZXJlZENoYXJhY3Rlckl0ZW1TZXRcIixcclxuICAgICAgICAgICAgICAgIGlkOiB0YXNrSUQsXHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlEOiB0aGlzLl9jdnIuX2luc3RhbmNlSURcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICA7XHJcbn1cblxudmFyIGlyclJlZ2lzdHJ5U3RhdGUgPSB7XHJcbiAgICBvblRhc2tSZXN1bHRzUmVjZWl2ZWQ6IGZhbHNlLFxyXG4gICAgb25UYXNrUmVzdWx0c1JlY2VpdmVkRm9yRGNlOiBmYWxzZSxcclxuICAgIC8vIHNlY3Rpb25cclxuICAgIG9uUHJlZGV0ZWN0ZWRSZWdpb25zUmVjZWl2ZWQ6IGZhbHNlLFxyXG4gICAgb25Mb2NhbGl6ZWRCYXJjb2Rlc1JlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uRGVjb2RlZEJhcmNvZGVzUmVjZWl2ZWQ6IGZhbHNlLFxyXG4gICAgb25Mb2NhbGl6ZWRUZXh0TGluZXNSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvblJlY29nbml6ZWRUZXh0TGluZXNSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbkRldGVjdGVkUXVhZHNSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbk5vcm1hbGl6ZWRJbWFnZXNSZWNlaXZlZDogZmFsc2UsXHJcbiAgICAvLyBzdGFnZVxyXG4gICAgb25Db2xvdXJJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvblNjYWxlZERvd25Db2xvdXJJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbkdyYXlzY2FsZUltYWdlVW5pdFJlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uVHJhbnNmb3JtZWRHcmF5c2NhbGVJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbkVuaGFuY2VkR3JheXNjYWxlSW1hZ2VVbml0UmVjZWl2ZWQ6IGZhbHNlLFxyXG4gICAgb25CaW5hcnlJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvblRleHR1cmVEZXRlY3Rpb25SZXN1bHRVbml0UmVjZWl2ZWQ6IGZhbHNlLFxyXG4gICAgb25UZXh0dXJlUmVtb3ZlZEdyYXlzY2FsZUltYWdlVW5pdFJlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uVGV4dHVyZVJlbW92ZWRCaW5hcnlJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbkNvbnRvdXJzVW5pdFJlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uTGluZVNlZ21lbnRzVW5pdFJlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uVGV4dFpvbmVzVW5pdFJlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uVGV4dFJlbW92ZWRCaW5hcnlJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvblJhd1RleHRMaW5lc1JlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uTG9uZ0xpbmVzVW5pdFJlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uQ29ybmVyc1VuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbkNhbmRpZGF0ZVF1YWRFZGdlc1VuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbkNhbmRpZGF0ZUJhcmNvZGVab25lc1VuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvblNjYWxlZFVwQmFyY29kZUltYWdlVW5pdFJlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uRGVmb3JtYXRpb25SZXNpc3RlZEJhcmNvZGVJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbkNvbXBsZW1lbnRlZEJhcmNvZGVJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvblNob3J0TGluZXNVbml0UmVjZWl2ZWQ6IGZhbHNlXHJcbn07XG5cbmNvbnN0IF9oYW5kbGVJbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlciA9IChpcnIpID0+IHtcclxuICAgIGZvciAobGV0IGlycyBpbiBpcnIuX2lyclJlZ2lzdHJ5U3RhdGUpIHtcclxuICAgICAgICBpcnIuX2lyclJlZ2lzdHJ5U3RhdGVbaXJzXSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgcmVjZWl2ZXIgb2YgaXJyLl9pbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlclNldCkge1xyXG4gICAgICAgIGlmIChyZWNlaXZlci5pc0RjZSB8fCByZWNlaXZlci5pc0ZpbHRlcikge1xyXG4gICAgICAgICAgICBpcnIuX2lyclJlZ2lzdHJ5U3RhdGUub25UYXNrUmVzdWx0c1JlY2VpdmVkRm9yRGNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IHIgaW4gcmVjZWl2ZXIpIHtcclxuICAgICAgICAgICAgaWYgKCFpcnIuX2lyclJlZ2lzdHJ5U3RhdGVbcl0pIHtcclxuICAgICAgICAgICAgICAgIGlyci5faXJyUmVnaXN0cnlTdGF0ZVtyXSA9ICEhcmVjZWl2ZXJbcl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbmNsYXNzIEludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IoY3ZyKSB7XHJcbiAgICAgICAgdGhpcy5faXJyUmVnaXN0cnlTdGF0ZSA9IGlyclJlZ2lzdHJ5U3RhdGU7XHJcbiAgICAgICAgdGhpcy5faW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXJTZXQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgdGhpcy5fY3ZyID0gY3ZyO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgYEludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyYCBvYmplY3QgYXMgdGhlIHJlY2VpdmVyIG9mIGludGVybWVkaWF0ZSByZXN1bHRzLlxyXG4gICAgICogQHBhcmFtIHJlY2VpdmVyIFRoZSByZWNlaXZlciBvYmplY3QsIG9mIHR5cGUgYEludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyYC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgYWRkUmVzdWx0UmVjZWl2ZXIocmVjZWl2ZXIpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHJlY2VpdmVyICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcmVjZWl2ZXIuYCk7XHJcbiAgICAgICAgdGhpcy5faW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXJTZXQuYWRkKHJlY2VpdmVyKTtcclxuICAgICAgICBfaGFuZGxlSW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXIodGhpcyk7XHJcbiAgICAgICAgbGV0IG9ic2VydmVkUmVzdWx0VW5pdFR5cGVzID0gLTE7XHJcbiAgICAgICAgbGV0IG9ic2VydmVkVGFza01hcCA9IHt9O1xyXG4gICAgICAgIGlmICghcmVjZWl2ZXIuaXNEY2UgJiYgIXJlY2VpdmVyLmlzRmlsdGVyKSB7XHJcbiAgICAgICAgICAgIGlmICghcmVjZWl2ZXIuX29ic2VydmVkUmVzdWx0VW5pdFR5cGVzIHx8ICFyZWNlaXZlci5fb2JzZXJ2ZWRUYXNrTWFwKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEludGVybWVkaWF0ZSBSZXN1bHQgUmVjZWl2ZXIuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9ic2VydmVkUmVzdWx0VW5pdFR5cGVzID0gcmVjZWl2ZXIuX29ic2VydmVkUmVzdWx0VW5pdFR5cGVzO1xyXG4gICAgICAgICAgICByZWNlaXZlci5fb2JzZXJ2ZWRUYXNrTWFwLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIG9ic2VydmVkVGFza01hcFtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZWNlaXZlci5fb2JzZXJ2ZWRUYXNrTWFwLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocnMsIHJqKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0YXNrSUQgPSBnZXROZXh0VGFza0lEKCk7XHJcbiAgICAgICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gYXN5bmMgKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChib2R5LnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4LnN0YWNrID0gYm9keS5zdGFjayArICdcXG4nICsgZXguc3RhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJqKGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiY3ZyX3NldElyclJlZ2lzdHJ5XCIsXHJcbiAgICAgICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJRDogdGhpcy5fY3ZyLl9pbnN0YW5jZUlELFxyXG4gICAgICAgICAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyT2JqOiB0aGlzLl9pcnJSZWdpc3RyeVN0YXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVkUmVzdWx0VW5pdFR5cGVzOiBvYnNlcnZlZFJlc3VsdFVuaXRUeXBlcy50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVkVGFza01hcFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIDtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGBJbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlcmAgb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIHJlY2VpdmVyIFRoZSByZWNlaXZlciBvYmplY3QsIG9mIHR5cGUgYEludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyYC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVtb3ZlUmVzdWx0UmVjZWl2ZXIocmVjZWl2ZXIpIHtcclxuICAgICAgICB0aGlzLl9pbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlclNldC5kZWxldGUocmVjZWl2ZXIpO1xyXG4gICAgICAgIF9oYW5kbGVJbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlcih0aGlzKTtcclxuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgICAgICBtYXBUYXNrQ2FsbEJhY2tbdGFza0lEXSA9IGFzeW5jIChib2R5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImN2cl9zZXRJcnJSZWdpc3RyeVwiLFxyXG4gICAgICAgICAgICAgICAgaWQ6IHRhc2tJRCxcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSUQ6IHRoaXMuX2N2ci5faW5zdGFuY2VJRCxcclxuICAgICAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgICAgICByZWNlaXZlck9iajogdGhpcy5faXJyUmVnaXN0cnlTdGF0ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIDtcclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmVzIHRoZSBvcmlnaW5hbCBpbWFnZSBkYXRhLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIG9wZXJhdGlvbiBoYXMgc3VjY2Vzc2Z1bGx5IGNvbXBsZXRlZC4gSXQgcHJvdmlkZXMgdGhlIG9yaWdpbmFsIGltYWdlIHVwb24gcmVzb2x1dGlvbi5cclxuICAgICAqL1xyXG4gICAgZ2V0T3JpZ2luYWxJbWFnZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3ZyLl9kc0ltYWdlO1xyXG4gICAgfVxyXG4gICAgO1xyXG59XG5cbmNvbnN0IGJTU1IgPSBcInVuZGVmaW5lZFwiID09IHR5cGVvZiBzZWxmO1xuXG5jb25zdCBjdXJTY3JpcHREaXIgPSAoKCkgPT4ge1xuICAgIGlmICghYlNTUiAmJiBkb2N1bWVudC5jdXJyZW50U2NyaXB0KSB7XG4gICAgICAgIGxldCBzcmMgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYywgaWR4U2VhcmNoID0gc3JjLmluZGV4T2YoXCI/XCIpO1xuICAgICAgICBpZiAoLTEgIT0gaWR4U2VhcmNoKSBzcmMgPSBzcmMuc3Vic3RyaW5nKDAsIGlkeFNlYXJjaCk7IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGlkeEhhc2ggPSBzcmMuaW5kZXhPZihcIiNcIik7XG4gICAgICAgICAgICAtMSAhPSBpZHhIYXNoICYmIChzcmMgPSBzcmMuc3Vic3RyaW5nKDAsIGlkeEhhc2gpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3JjLnN1YnN0cmluZygwLCBzcmMubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAgfVxuICAgIHJldHVybiBcIi4vXCI7XG59KSgpLCBnZXRBYnNvbHV0ZURpciA9IHZhbHVlID0+IHtcbiAgICBpZiAobnVsbCA9PSB2YWx1ZSAmJiAodmFsdWUgPSBcIi4vXCIpLCBiU1NSKSA7IGVsc2Uge1xuICAgICAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgICAgICBhLmhyZWYgPSB2YWx1ZSwgdmFsdWUgPSBhLmhyZWY7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZS5lbmRzV2l0aChcIi9cIikgfHwgKHZhbHVlICs9IFwiL1wiKSwgdmFsdWU7XG59O1xuXG52YXIgX2E7XHJcbmF1dG9EaXNjb3ZlcnlQYXRocy5jdnIgPSB7IHZlcnNpb246IFwiMi40LjIxXCIsIHBhdGg6IGN1clNjcmlwdERpciB9O1xyXG53b3JrZXJBdXRvUmVzb3VyY2VzLmN2ciA9IHsganM6IHRydWUsIHdhc206IHRydWUsIGRlcHM6IFtcImxpY2Vuc2VcIiwgXCJkaXBcIl0gfTtcclxubWFwUGFja2FnZVJlZ2lzdGVyLmN2ciA9IHt9O1xyXG5jb25zdCBzdGRWZXJzaW9uID0gXCIxLjQuMTBcIjtcclxuaWYgKCdzdHJpbmcnICE9IHR5cGVvZiBhdXRvRGlzY292ZXJ5UGF0aHMuc3RkICYmIGNvbXBhcmVWZXJzaW9uKGF1dG9EaXNjb3ZlcnlQYXRocy5zdGQudmVyc2lvbiwgc3RkVmVyc2lvbikgPCAwKSB7XHJcbiAgICBhdXRvRGlzY292ZXJ5UGF0aHMuc3RkID0geyB2ZXJzaW9uOiBzdGRWZXJzaW9uLCBwYXRoOiBnZXRBYnNvbHV0ZURpcihjdXJTY3JpcHREaXIgKyBgLi4vLi4vZHluYW1zb2Z0LWNhcHR1cmUtdmlzaW9uLXN0ZEAke3N0ZFZlcnNpb259L2Rpc3QvYCkgfTtcclxufVxyXG5jb25zdCBkaXBWZXJzaW9uID0gXCIyLjQuMjBcIjtcclxuaWYgKCFhdXRvRGlzY292ZXJ5UGF0aHMuZGlwIHx8ICdzdHJpbmcnICE9IHR5cGVvZiBhdXRvRGlzY292ZXJ5UGF0aHMuZGlwICYmIGNvbXBhcmVWZXJzaW9uKGF1dG9EaXNjb3ZlcnlQYXRocy5kaXAudmVyc2lvbiwgZGlwVmVyc2lvbikgPCAwKSB7XHJcbiAgICBhdXRvRGlzY292ZXJ5UGF0aHMuZGlwID0geyB2ZXJzaW9uOiBkaXBWZXJzaW9uLCBwYXRoOiBnZXRBYnNvbHV0ZURpcihjdXJTY3JpcHREaXIgKyBgLi4vLi4vZHluYW1zb2Z0LWltYWdlLXByb2Nlc3NpbmdAJHtkaXBWZXJzaW9ufS9kaXN0L2ApIH07XHJcbn1cclxuY2xhc3MgQ2FwdHVyZVZpc2lvblJvdXRlck1vZHVsZSB7XHJcbiAgICBzdGF0aWMgZ2V0VmVyc2lvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdmVyc2lvbjtcclxuICAgIH1cclxufVxyXG5DYXB0dXJlVmlzaW9uUm91dGVyTW9kdWxlLl92ZXJzaW9uID0gYCR7XCIyLjQuMjFcIn0oV29ya2VyOiAkeyhfYSA9IGlubmVyVmVyc2lvbnMuY3ZyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eud29ya2VyfSwgV2FzbTogbG9hZGluZy4uLmA7XG5cbnZhciBFbnVtSW1hZ2VTb3VyY2VTdGF0ZTtcclxuKGZ1bmN0aW9uIChFbnVtSW1hZ2VTb3VyY2VTdGF0ZSkge1xyXG4gICAgRW51bUltYWdlU291cmNlU3RhdGVbRW51bUltYWdlU291cmNlU3RhdGVbXCJJU1NfQlVGRkVSX0VNUFRZXCJdID0gMF0gPSBcIklTU19CVUZGRVJfRU1QVFlcIjtcclxuICAgIEVudW1JbWFnZVNvdXJjZVN0YXRlW0VudW1JbWFnZVNvdXJjZVN0YXRlW1wiSVNTX0VYSEFVU1RFRFwiXSA9IDFdID0gXCJJU1NfRVhIQVVTVEVEXCI7XHJcbn0pKEVudW1JbWFnZVNvdXJjZVN0YXRlIHx8IChFbnVtSW1hZ2VTb3VyY2VTdGF0ZSA9IHt9KSk7XG5cbih7XHJcbiAgICAvKiogTm8gaW50ZXJtZWRpYXRlIHJlc3VsdC4gKi9cclxuICAgIElSVVRfTlVMTDogQmlnSW50KDApLFxyXG4gICAgLyoqIEEgZnVsbC1jb2xvciBpbWFnZS4gKi9cclxuICAgIElSVVRfQ09MT1VSX0lNQUdFOiBCaWdJbnQoMSksXHJcbiAgICAvKiogQSBjb2xvciBpbWFnZSB0aGF0IGhhcyBiZWVuIHNjYWxlZCBkb3duIGZvciBlZmZpY2llbmN5LiAqL1xyXG4gICAgSVJVVF9TQ0FMRURfRE9XTl9DT0xPVVJfSU1BR0U6IEJpZ0ludCgxIDw8IDEpLFxyXG4gICAgLyoqIEEgZ3JheXNjYWxlIGltYWdlIGRlcml2ZWQgZnJvbSB0aGUgb3JpZ2luYWwgaW5wdXQuICovXHJcbiAgICBJUlVUX0dSQVlTQ0FMRV9JTUFHRTogQmlnSW50KDEgPDwgMiksXHJcbiAgICAvKiogQSBncmF5c2NhbGUgaW1hZ2UgdGhhdCBoYXMgdW5kZXJnb25lIHRyYW5zZm9ybWF0aW9uLiAqL1xyXG4gICAgSVJVVF9UUkFOU09GT1JNRURfR1JBWVNDQUxFX0lNQUdFOiBCaWdJbnQoMSA8PCAzKSxcclxuICAgIC8qKiBBIGdyYXlzY2FsZSBpbWFnZSBlbmhhbmNlZCBmb3IgZnVydGhlciBwcm9jZXNzaW5nLiAqL1xyXG4gICAgSVJVVF9FTkhBTkNFRF9HUkFZU0NBTEVfSU1BR0U6IEJpZ0ludCgxIDw8IDQpLFxyXG4gICAgLyoqIFJlZ2lvbnMgcHJlLWRldGVjdGVkIGFzIHBvdGVudGlhbGx5IHJlbGV2YW50IGZvciBmdXJ0aGVyIGFuYWx5c2lzLiAqL1xyXG4gICAgSVJVVF9QUkVERVRFQ1RFRF9SRUdJT05TOiBCaWdJbnQoMSA8PCA1KSxcclxuICAgIC8qKiBBIGJpbmFyeSAoYmxhY2sgYW5kIHdoaXRlKSBpbWFnZS4gKi9cclxuICAgIElSVVRfQklOQVJZX0lNQUdFOiBCaWdJbnQoMSA8PCA2KSxcclxuICAgIC8qKiBSZXN1bHRzIGZyb20gZGV0ZWN0aW5nIHRleHR1cmVzIHdpdGhpbiB0aGUgaW1hZ2UuICovXHJcbiAgICBJUlVUX1RFWFRVUkVfREVURUNUSU9OX1JFU1VMVDogQmlnSW50KDEgPDwgNyksXHJcbiAgICAvKiogQSBncmF5c2NhbGUgaW1hZ2Ugd2l0aCB0ZXh0dXJlcyByZW1vdmVkIHRvIGVuaGFuY2Ugc3ViamVjdCBkZXRhaWxzIGxpa2UgdGV4dCBvciBiYXJjb2Rlcy4gKi9cclxuICAgIElSVVRfVEVYVFVSRV9SRU1PVkVEX0dSQVlTQ0FMRV9JTUFHRTogQmlnSW50KDEgPDwgOCksXHJcbiAgICAvKiogQSBiaW5hcnkgaW1hZ2Ugd2l0aCB0ZXh0dXJlcyByZW1vdmVkKSwgdXNlZnVsIGZvciBjbGVhciBkZXRlY3Rpb24gb2Ygc3ViamVjdHMgd2l0aG91dCBiYWNrZ3JvdW5kIG5vaXNlLiAqL1xyXG4gICAgSVJVVF9URVhUVVJFX1JFTU9WRURfQklOQVJZX0lNQUdFOiBCaWdJbnQoMSA8PCA5KSxcclxuICAgIC8qKiBEZXRlY3RlZCBjb250b3VycyB3aXRoaW4gdGhlIGltYWdlKSwgd2hpY2ggY2FuIGhlbHAgaW4gaWRlbnRpZnlpbmcgc2hhcGVzIGFuZCBvYmplY3RzLiAqL1xyXG4gICAgSVJVVF9DT05UT1VSUzogQmlnSW50KDEgPDwgMTApLFxyXG4gICAgLyoqIERldGVjdGVkIGxpbmUgc2VnbWVudHMpLCB1c2VmdWwgaW4gc3RydWN0dXJhbCBhbmFseXNpcyBvZiB0aGUgaW1hZ2UgY29udGVudC4gKi9cclxuICAgIElSVVRfTElORV9TRUdNRU5UUzogQmlnSW50KDEgPDwgMTEpLFxyXG4gICAgLyoqIElkZW50aWZpZWQgdGV4dCB6b25lcyksIGluZGljYXRpbmcgYXJlYXMgd2l0aCBwb3RlbnRpYWwgdGV4dHVhbCBjb250ZW50LiAqL1xyXG4gICAgSVJVVF9URVhUX1pPTkVTOiBCaWdJbnQoMSA8PCAxMiksXHJcbiAgICAvKiogQSBiaW5hcnkgaW1hZ2Ugd2l0aCB0ZXh0IHJlZ2lvbnMgcmVtb3ZlZC4gKi9cclxuICAgIElSVVRfVEVYVF9SRU1PVkVEX0JJTkFSWV9JTUFHRTogQmlnSW50KDEgPDwgMTMpLFxyXG4gICAgLyoqIFpvbmVzIGlkZW50aWZpZWQgYXMgcG90ZW50aWFsIGJhcmNvZGUgYXJlYXMpLCBhaWRpbmcgaW4gZm9jdXNlZCBiYXJjb2RlIGRldGVjdGlvbi4gKi9cclxuICAgIElSVVRfQ0FORElEQVRFX0JBUkNPREVfWk9ORVM6IEJpZ0ludCgxIDw8IDE0KSxcclxuICAgIC8qKiBCYXJjb2RlcyB0aGF0IGhhdmUgYmVlbiBsb2NhbGl6ZWQgYnV0IG5vdCB5ZXQgZGVjb2RlZC4gKi9cclxuICAgIElSVVRfTE9DQUxJWkVEX0JBUkNPREVTOiBCaWdJbnQoMSA8PCAxNSksXHJcbiAgICAvKiogQmFyY29kZSBpbWFnZXMgc2NhbGVkIHVwIGZvciBpbXByb3ZlZCByZWFkYWJpbGl0eSBvciBkZWNvZGluZyBhY2N1cmFjeS4gKi9cclxuICAgIElSVVRfU0NBTEVEX1VQX0JBUkNPREVfSU1BR0U6IEJpZ0ludCgxIDw8IDE2KSxcclxuICAgIC8qKiBJbWFnZXMgb2YgYmFyY29kZXMgcHJvY2Vzc2VkIHRvIHJlc2lzdCBkZWZvcm1hdGlvbiBhbmQgaW1wcm92ZSBkZWNvZGluZyBzdWNjZXNzLiAqL1xyXG4gICAgSVJVVF9ERUZPUk1BVElPTl9SRVNJU1RFRF9CQVJDT0RFX0lNQUdFOiBCaWdJbnQoMSA8PCAxNyksXHJcbiAgICAvKiogQmFyY29kZSBpbWFnZXMgdGhhdCBoYXZlIGJlZW4gY29tcGxlbWVudGVkLiAqL1xyXG4gICAgSVJVVF9DT01QTEVNRU5URURfQkFSQ09ERV9JTUFHRTogQmlnSW50KDEgPDwgMTgpLFxyXG4gICAgLyoqIFN1Y2Nlc3NmdWxseSBkZWNvZGVkIGJhcmNvZGVzLiAqL1xyXG4gICAgSVJVVF9ERUNPREVEX0JBUkNPREVTOiBCaWdJbnQoMSA8PCAxOSksXHJcbiAgICAvKiogRGV0ZWN0ZWQgbG9uZyBsaW5lcy4gKi9cclxuICAgIElSVVRfTE9OR19MSU5FUzogQmlnSW50KDEgPDwgMjApLFxyXG4gICAgLyoqIERldGVjdGVkIGNvcm5lcnMgd2l0aGluIHRoZSBpbWFnZS4gKi9cclxuICAgIElSVVRfQ09STkVSUzogQmlnSW50KDEgPDwgMjEpLFxyXG4gICAgLyoqIENhbmRpZGF0ZSBlZGdlcyBpZGVudGlmaWVkIGFzIHBvdGVudGlhbCBjb21wb25lbnRzIG9mIHF1YWRyaWxhdGVyYWxzLiAqL1xyXG4gICAgSVJVVF9DQU5ESURBVEVfUVVBRF9FREdFUzogQmlnSW50KDEgPDwgMjIpLFxyXG4gICAgLyoqIFN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBxdWFkcmlsYXRlcmFscy4gKi9cclxuICAgIElSVVRfREVURUNURURfUVVBRFM6IEJpZ0ludCgxIDw8IDIzKSxcclxuICAgIC8qKiBUZXh0IGxpbmVzIHRoYXQgaGF2ZSBiZWVuIGxvY2FsaXplZCBpbiBwcmVwYXJhdGlvbiBmb3IgcmVjb2duaXRpb24uICovXHJcbiAgICBJUlVUX0xPQ0FMSVpFRF9URVhUX0xJTkVTOiBCaWdJbnQoMSA8PCAyNCksXHJcbiAgICAvKiogU3VjY2Vzc2Z1bGx5IHJlY29nbml6ZWQgdGV4dCBsaW5lcy4gKi9cclxuICAgIElSVVRfUkVDT0dOSVpFRF9URVhUX0xJTkVTOiBCaWdJbnQoMSA8PCAyNSksXHJcbiAgICAvKiogU3VjY2Vzc2Z1bGx5IG5vcm1hbGl6ZWQgaW1hZ2VzLiAqL1xyXG4gICAgSVJVVF9OT1JNQUxJWkVEX0lNQUdFUzogQmlnSW50KDEgPDwgMjYpLFxyXG4gICAgLyoqIFN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzaG9ydCBsaW5lcy4gKi9cclxuICAgIElSVVRfU0hPUlRfTElORVM6IEJpZ0ludCgxIDw8IDI3KSxcclxuICAgIElSVVRfUkFXX1RFWFRfTElORVM6IEJpZ0ludCgxIDw8IDI4KSxcclxuICAgIC8qKiBBIG1hc2sgdG8gc2VsZWN0IGFsbCB0eXBlcyBvZiBpbnRlcm1lZGlhdGUgcmVzdWx0cy4gKi9cclxuICAgIElSVVRfQUxMOiBCaWdJbnQoXCIweEZGRkZGRkZGRkZGRkZGRkZcIilcclxufSk7XHJcbmZ1bmN0aW9uIGhhbmRsZVJlc3VsdEZvckRyYXcocmVzdWx0cykge1xyXG4gICAgY29uc3QgcmVzdWx0c0ZvckRyYXcgPSB7XHJcbiAgICAgICAgYmFyY29kZVJlc3VsdEl0ZW1zOiBbXSxcclxuICAgICAgICB0ZXh0TGluZVJlc3VsdEl0ZW1zOiBbXSxcclxuICAgICAgICBkZXRlY3RlZFF1YWRSZXN1bHRJdGVtczogW10sXHJcbiAgICAgICAgbm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXM6IFtdLFxyXG4gICAgICAgIHBhcnNlZFJlc3VsdEl0ZW1zOiBbXVxyXG4gICAgfTtcclxuICAgIHJlc3VsdHMuaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09IEVudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfQkFSQ09ERSkge1xyXG4gICAgICAgICAgICByZXN1bHRzRm9yRHJhdy5iYXJjb2RlUmVzdWx0SXRlbXMucHVzaChpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaXRlbS50eXBlID09PSBFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX1RFWFRfTElORSkge1xyXG4gICAgICAgICAgICByZXN1bHRzRm9yRHJhdy50ZXh0TGluZVJlc3VsdEl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUuQ1JJVF9ERVRFQ1RFRF9RVUFEKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHNGb3JEcmF3LmRldGVjdGVkUXVhZFJlc3VsdEl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUuQ1JJVF9OT1JNQUxJWkVEX0lNQUdFKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHNGb3JEcmF3Lm5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUuQ1JJVF9QQVJTRURfUkVTVUxUKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHNGb3JEcmF3LnBhcnNlZFJlc3VsdEl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVzdWx0c0ZvckRyYXc7XHJcbn1cclxuZnVuY3Rpb24gY29udmVydENvb3JkaW5hdGVzKGl0ZW0sIGNvbXByZXNzUmF0ZSkge1xyXG4gICAgaWYgKGl0ZW0gJiYgaXRlbS5sb2NhdGlvbikge1xyXG4gICAgICAgIGNvbnN0IHBvaW50cyA9IGl0ZW0ubG9jYXRpb24ucG9pbnRzO1xyXG4gICAgICAgIGZvciAobGV0IHBvaW50IG9mIHBvaW50cykge1xyXG4gICAgICAgICAgICBwb2ludC54ID0gcG9pbnQueCAvIGNvbXByZXNzUmF0ZTtcclxuICAgICAgICAgICAgcG9pbnQueSA9IHBvaW50LnkgLyBjb21wcmVzc1JhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnZlcnRDb29yZGluYXRlcyhpdGVtLnJlZmVyZW5jZWRJdGVtLCBjb21wcmVzc1JhdGUpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNoZWNrSXNEaXNwb3NlZChjdnIpIHtcclxuICAgIGlmIChjdnIuZGlzcG9zZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiQ2FwdHVyZVZpc2lvblJvdXRlclwiIGluc3RhbmNlIGhhcyBiZWVuIGRpc3Bvc2VkYCk7XHJcbiAgICB9XHJcbn1cblxudmFyIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY2FudmFzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9wcm9taXNlU3RhcnRTY2FuLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pbnRlcm1lZGlhdGVSZXN1bHRNYW5hZ2VyLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9idWZmZXJkSXRlbXNNYW5hZ2VyLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRSZWNlaXZlclNldCwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhU3RhdGVMaXN0ZW5lclNldCwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0RmlsdGVyU2V0LCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9jb21wcmVzc1JhdGUsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzU2Nhbm5lciwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW5uZXJVc2VUYWcsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzRGVzdHJveWVkO1xyXG5jb25zdCBfaW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXJPZkZpbHRlciA9IHtcclxuICAgIG9uVGFza1Jlc3VsdHNSZWNlaXZlZDogKCkgPT4geyB9LFxyXG4gICAgaXNGaWx0ZXI6IHRydWVcclxufTtcclxuY2xhc3MgQ2FwdHVyZVZpc2lvblJvdXRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLm1heEN2c1NpZGVMZW5ndGggPSBbXCJpUGhvbmVcIiwgXCJBbmRyb2lkXCIsIFwiSGFybW9ueU9TXCJdLmluY2x1ZGVzKENvcmVNb2R1bGUuYnJvd3NlckluZm8uT1MpID8gMjA0OCA6IDQwOTY7XHJcbiAgICAgICAgdGhpcy5faW5zdGFuY2VJRCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9kc0ltYWdlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9pc1BhdXNlU2NhbiA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5faXNPdXRwdXRPcmlnaW5hbEltYWdlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faXNPcGVuRGV0ZWN0VmVyaWZ5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faXNPcGVuTm9ybWFsaXplVmVyaWZ5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faXNPcGVuQmFyY29kZVZlcmlmeSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2lzT3BlbkxhYmVsVmVyaWZ5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fbWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwgPSAwO1xyXG4gICAgICAgIHRoaXMuX2F2ZXJhZ2VQcm9jZXNzaW50VGltZUFycmF5ID0gW107XHJcbiAgICAgICAgdGhpcy5fYXZlcmFnZUZldGNoSW1hZ2VUaW1lQXJyYXkgPSBbXTtcclxuICAgICAgICB0aGlzLl9jdXJyZW50U2V0dGluZ3MgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2F2ZXJhZ2VUaW1lID0gOTk5O1xyXG4gICAgICAgIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYS5zZXQodGhpcywgbnVsbCk7XHJcbiAgICAgICAgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY2FudmFzLnNldCh0aGlzLCBudWxsKTtcclxuICAgICAgICBfQ2FwdHVyZVZpc2lvblJvdXRlcl9wcm9taXNlU3RhcnRTY2FuLnNldCh0aGlzLCBudWxsKTtcclxuICAgICAgICBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pbnRlcm1lZGlhdGVSZXN1bHRNYW5hZ2VyLnNldCh0aGlzLCBudWxsKTtcclxuICAgICAgICBfQ2FwdHVyZVZpc2lvblJvdXRlcl9idWZmZXJkSXRlbXNNYW5hZ2VyLnNldCh0aGlzLCBudWxsKTtcclxuICAgICAgICBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRSZWNlaXZlclNldC5zZXQodGhpcywgbmV3IFNldCgpKTtcclxuICAgICAgICBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2FTdGF0ZUxpc3RlbmVyU2V0LnNldCh0aGlzLCBuZXcgU2V0KCkpO1xyXG4gICAgICAgIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Jlc3VsdEZpbHRlclNldC5zZXQodGhpcywgbmV3IFNldCgpKTtcclxuICAgICAgICBfQ2FwdHVyZVZpc2lvblJvdXRlcl9jb21wcmVzc1JhdGUuc2V0KHRoaXMsIDApO1xyXG4gICAgICAgIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzU2Nhbm5lci5zZXQodGhpcywgZmFsc2UpO1xyXG4gICAgICAgIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lubmVyVXNlVGFnLnNldCh0aGlzLCBmYWxzZSk7XHJcbiAgICAgICAgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNEZXN0cm95ZWQuc2V0KHRoaXMsIGZhbHNlKTtcclxuICAgICAgICB0aGlzLl9zaW5nbGVGcmFtZU1vZGVDYWxsYmFja0JpbmQgPSB0aGlzLl9zaW5nbGVGcmFtZU1vZGVDYWxsYmFjay5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGBDYXB0dXJlVmlzaW9uUm91dGVyYCBpbnN0YW5jZSBoYXMgYmVlbiBkaXNwb3NlZCBvZi5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYENhcHR1cmVWaXNpb25Sb3V0ZXJgIGluc3RhbmNlIGhhcyBiZWVuIGRpc3Bvc2VkIG9mLlxyXG4gICAgICovXHJcbiAgICBnZXQgZGlzcG9zZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNEZXN0cm95ZWQsIFwiZlwiKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGBDYXB0dXJlVmlzaW9uUm91dGVyYCBjbGFzcy5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBpbml0aWFsaXplZCBgQ2FwdHVyZVZpc2lvblJvdXRlcmAgaW5zdGFuY2UuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBjcmVhdGVJbnN0YW5jZSgpIHtcclxuICAgICAgICBpZiAoIW1hcFBhY2thZ2VSZWdpc3Rlci5saWNlbnNlKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdNb2R1bGUgYGxpY2Vuc2VgIGlzIG5vdCBleGlzdGVkLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhd2FpdCBtYXBQYWNrYWdlUmVnaXN0ZXIubGljZW5zZS5keW5hbXNvZnQoKTtcclxuICAgICAgICBhd2FpdCBsb2FkV2FzbShbXCJjdnJcIl0pO1xyXG4gICAgICAgIGNvbnN0IGNhcHR1cmVWaXNpb25Sb3V0ZXIgPSBuZXcgQ2FwdHVyZVZpc2lvblJvdXRlcigpO1xyXG4gICAgICAgIGNvbnN0IHAgPSBuZXcgTXV0YWJsZVByb21pc2UoKTtcclxuICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gYXN5bmMgKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBjYXB0dXJlVmlzaW9uUm91dGVyLl9pbnN0YW5jZUlEID0gYm9keS5pbnN0YW5jZUlEO1xyXG4gICAgICAgICAgICAgICAgY2FwdHVyZVZpc2lvblJvdXRlci5fY3VycmVudFNldHRpbmdzID0gSlNPTi5wYXJzZShib2R5Lm91dHB1dFNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXJNb2R1bGUuX3ZlcnNpb24gPSBgJHtcIjIuNC4yMVwifShXb3JrZXI6ICR7KF9hID0gaW5uZXJWZXJzaW9ucy5jdnIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS53b3JrZXJ9LCBXYXNtOiAke2JvZHkudmVyc2lvbn0pYDtcclxuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQoY2FwdHVyZVZpc2lvblJvdXRlciwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW5uZXJVc2VUYWcsIHRydWUsIFwiZlwiKTtcclxuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQoY2FwdHVyZVZpc2lvblJvdXRlciwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgY2FwdHVyZVZpc2lvblJvdXRlci5nZXRJbnRlcm1lZGlhdGVSZXN1bHRNYW5hZ2VyKCksIFwiZlwiKTtcclxuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQoY2FwdHVyZVZpc2lvblJvdXRlciwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW5uZXJVc2VUYWcsIGZhbHNlLCBcImZcIik7XHJcbiAgICAgICAgICAgICAgICBwLnJlc29sdmUoY2FwdHVyZVZpc2lvblJvdXRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvZHkuc3RhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnIuc3RhY2sgPSBib2R5LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcC5yZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgdHlwZTogJ2N2cl9jcmVhdGVJbnN0YW5jZScsXHJcbiAgICAgICAgICAgIGlkOiB0YXNrSUQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHA7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICBhc3luYyBfc2luZ2xlRnJhbWVNb2RlQ2FsbGJhY2soZHNJbWFnZSkge1xyXG4gICAgICAgIGZvciAobGV0IHJlY2VpdmVyIG9mIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0UmVjZWl2ZXJTZXQsIFwiZlwiKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9pc091dHB1dE9yaWdpbmFsSW1hZ2UgJiYgcmVjZWl2ZXIub25PcmlnaW5hbEltYWdlUmVzdWx0UmVjZWl2ZWQgJiYgcmVjZWl2ZXIub25PcmlnaW5hbEltYWdlUmVzdWx0UmVjZWl2ZWQoeyBpbWFnZURhdGE6IGRzSW1hZ2UgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvcHlEc0ltYWdlRGF0YSA9IHtcclxuICAgICAgICAgICAgYnl0ZXM6IG5ldyBVaW50OEFycmF5KGRzSW1hZ2UuYnl0ZXMpLFxyXG4gICAgICAgICAgICB3aWR0aDogZHNJbWFnZS53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBkc0ltYWdlLmhlaWdodCxcclxuICAgICAgICAgICAgc3RyaWRlOiBkc0ltYWdlLnN0cmlkZSxcclxuICAgICAgICAgICAgZm9ybWF0OiBkc0ltYWdlLmZvcm1hdCxcclxuICAgICAgICAgICAgdGFnOiBkc0ltYWdlLnRhZ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKCF0aGlzLl90ZW1wbGF0ZU5hbWUpXHJcbiAgICAgICAgICAgIHRoaXMuX3RlbXBsYXRlTmFtZSA9IHRoaXMuX2N1cnJlbnRTZXR0aW5ncy5DYXB0dXJlVmlzaW9uVGVtcGxhdGVzWzBdLk5hbWU7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jYXB0dXJlKGNvcHlEc0ltYWdlRGF0YSwgdGhpcy5fdGVtcGxhdGVOYW1lKTtcclxuICAgICAgICByZXN1bHQub3JpZ2luYWxJbWFnZVRhZyA9IGRzSW1hZ2UudGFnO1xyXG4gICAgICAgIGZvciAobGV0IHJlY2VpdmVyIG9mIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0UmVjZWl2ZXJTZXQsIFwiZlwiKSkge1xyXG4gICAgICAgICAgICBpZiAocmVjZWl2ZXIuaXNEY2UpIHtcclxuICAgICAgICAgICAgICAgIHJlY2VpdmVyLm9uQ2FwdHVyZWRSZXN1bHRSZWNlaXZlZChyZXN1bHQsIHtcclxuICAgICAgICAgICAgICAgICAgICBpc0RldGVjdFZlcmlmeU9wZW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzTm9ybWFsaXplVmVyaWZ5T3BlbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNCYXJjb2RlVmVyaWZ5T3BlbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNMYWJlbFZlcmlmeU9wZW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVzdWx0Q29tbW9uUGFydCA9IHtcclxuICAgICAgICAgICAgb3JpZ2luYWxJbWFnZUhhc2hJZDogcmVzdWx0Lm9yaWdpbmFsSW1hZ2VIYXNoSWQsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsSW1hZ2VUYWc6IHJlc3VsdC5vcmlnaW5hbEltYWdlVGFnLFxyXG4gICAgICAgICAgICBlcnJvckNvZGU6IHJlc3VsdC5lcnJvckNvZGUsXHJcbiAgICAgICAgICAgIGVycm9yU3RyaW5nOiByZXN1bHQuZXJyb3JTdHJpbmdcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAobGV0IHJlY2VpdmVyIG9mIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0UmVjZWl2ZXJTZXQsIFwiZlwiKSkge1xyXG4gICAgICAgICAgICByZWNlaXZlci5vbkRlY29kZWRCYXJjb2Rlc1JlY2VpdmVkICYmIHJlc3VsdC5iYXJjb2RlUmVzdWx0SXRlbXMgJiYgcmVjZWl2ZXIub25EZWNvZGVkQmFyY29kZXNSZWNlaXZlZChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3VsdENvbW1vblBhcnQpLCB7IGJhcmNvZGVSZXN1bHRJdGVtczogcmVzdWx0LmJhcmNvZGVSZXN1bHRJdGVtcyB9KSk7XHJcbiAgICAgICAgICAgIHJlY2VpdmVyLm9uUmVjb2duaXplZFRleHRMaW5lc1JlY2VpdmVkICYmIHJlc3VsdC50ZXh0TGluZVJlc3VsdEl0ZW1zICYmIHJlY2VpdmVyLm9uUmVjb2duaXplZFRleHRMaW5lc1JlY2VpdmVkKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzdWx0Q29tbW9uUGFydCksIHsgdGV4dExpbmVSZXN1bHRJdGVtczogcmVzdWx0LnRleHRMaW5lUmVzdWx0SXRlbXMgfSkpO1xyXG4gICAgICAgICAgICByZWNlaXZlci5vbkRldGVjdGVkUXVhZHNSZWNlaXZlZCAmJiByZXN1bHQuZGV0ZWN0ZWRRdWFkUmVzdWx0SXRlbXMgJiYgcmVjZWl2ZXIub25EZXRlY3RlZFF1YWRzUmVjZWl2ZWQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXN1bHRDb21tb25QYXJ0KSwgeyBkZXRlY3RlZFF1YWRSZXN1bHRJdGVtczogcmVzdWx0LmRldGVjdGVkUXVhZFJlc3VsdEl0ZW1zIH0pKTtcclxuICAgICAgICAgICAgcmVjZWl2ZXIub25Ob3JtYWxpemVkSW1hZ2VzUmVjZWl2ZWQgJiYgcmVzdWx0Lm5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zICYmIHJlY2VpdmVyLm9uTm9ybWFsaXplZEltYWdlc1JlY2VpdmVkKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzdWx0Q29tbW9uUGFydCksIHsgbm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXM6IHJlc3VsdC5ub3JtYWxpemVkSW1hZ2VSZXN1bHRJdGVtcyB9KSk7XHJcbiAgICAgICAgICAgIHJlY2VpdmVyLm9uUGFyc2VkUmVzdWx0c1JlY2VpdmVkICYmIHJlc3VsdC5wYXJzZWRSZXN1bHRJdGVtcyAmJiByZWNlaXZlci5vblBhcnNlZFJlc3VsdHNSZWNlaXZlZChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3VsdENvbW1vblBhcnQpLCB7IHBhcnNlZFJlc3VsdEl0ZW1zOiByZXN1bHQucGFyc2VkUmVzdWx0SXRlbXMgfSkpO1xyXG4gICAgICAgICAgICBpZiAocmVjZWl2ZXIub25DYXB0dXJlZFJlc3VsdFJlY2VpdmVkICYmICFyZWNlaXZlci5pc0RjZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzT3V0cHV0T3JpZ2luYWxJbWFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcmVzdWx0Lml0ZW1zLmZpbmRJbmRleCgoaXRlbSkgPT4geyByZXR1cm4gaXRlbS50eXBlID09PSAxOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pdGVtc1tpbmRleF0uaW1hZ2VEYXRhID0gZHNJbWFnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZWNlaXZlci5vbkNhcHR1cmVkUmVzdWx0UmVjZWl2ZWQocmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB1cCBhbiBpbWFnZSBzb3VyY2UgdG8gcHJvdmlkZSBpbWFnZXMgZm9yIGNvbnRpbnVvdXMgcHJvY2Vzc2luZy5cclxuICAgICAqIEBwYXJhbSBpbWFnZVNvdXJjZSBUaGUgaW1hZ2Ugc291cmNlIHdoaWNoIGlzIGNvbXBsaWFudCB3aXRoIHRoZSBgSW1hZ2VTb3VyY2VBZGFwdGVyYCBpbnRlcmZhY2UuXHJcbiAgICAgKi9cclxuICAgIHNldElucHV0KGltYWdlU291cmNlKSB7XHJcbiAgICAgICAgY2hlY2tJc0Rpc3Bvc2VkKHRoaXMpO1xyXG4gICAgICAgIGlmICghaW1hZ2VTb3VyY2UpIHtcclxuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIG51bGwsIFwiZlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgaW1hZ2VTb3VyY2UsIFwiZlwiKTtcclxuICAgICAgICBpZiAoaW1hZ2VTb3VyY2UuaXNDYW1lcmFFbmhhbmNlcikge1xyXG4gICAgICAgICAgICBpZiAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pbnRlcm1lZGlhdGVSZXN1bHRNYW5hZ2VyLCBcImZcIikpIHtcclxuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuX2ludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyLmlzRGNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgXCJmXCIpLmFkZFJlc3VsdFJlY2VpdmVyKF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuX2ludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBjYW1lcmFWaWV3ID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKS5nZXRDYW1lcmFWaWV3KCk7XHJcbiAgICAgICAgICAgIGlmIChjYW1lcmFWaWV3KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkY2VDcnIgPSBjYW1lcmFWaWV3Ll9jYXB0dXJlZFJlc3VsdFJlY2VpdmVyO1xyXG4gICAgICAgICAgICAgICAgZGNlQ3JyLmlzRGNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0UmVjZWl2ZXJTZXQsIFwiZlwiKS5hZGQoZGNlQ3JyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiB0aGluayBhYm91dCBvZmYuXHJcbiAgICAgICAgICAgIC8vKGltYWdlU291cmNlIGFzIGFueSkub24oXCJzaW5nbGVGcmFtZUFjcXVpcmVkXCIsIHRoaXMuX3NpbmdsZUZyYW1lTW9kZUNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGltYWdlIHNvdXJjZSBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIGdldElucHV0KCkge1xyXG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpO1xyXG4gICAgfVxyXG4gICAgO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIG9yIHJlbW92ZXMgbGlzdGVuZXJzIGZvciBpbWFnZSBzb3VyY2Ugc3RhdGUgY2hhbmdlLlxyXG4gICAgICovXHJcbiAgICBhZGRJbWFnZVNvdXJjZVN0YXRlTGlzdGVuZXIobGlzdGVuZXIpIHtcclxuICAgICAgICBjaGVja0lzRGlzcG9zZWQodGhpcyk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUud2FybihgSW52YWxpZCBJU0Egc3RhdGUgbGlzdGVuZXIuYCk7XHJcbiAgICAgICAgaWYgKCFsaXN0ZW5lciB8fCAhT2JqZWN0LmtleXMobGlzdGVuZXIpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2FTdGF0ZUxpc3RlbmVyU2V0LCBcImZcIikuYWRkKGxpc3RlbmVyKTtcclxuICAgIH1cclxuICAgIDtcclxuICAgIHJlbW92ZUltYWdlU291cmNlU3RhdGVMaXN0ZW5lcihsaXN0ZW5lcikge1xyXG4gICAgICAgIGNoZWNrSXNEaXNwb3NlZCh0aGlzKTtcclxuICAgICAgICByZXR1cm4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2FTdGF0ZUxpc3RlbmVyU2V0LCBcImZcIikuZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIGBDYXB0dXJlZFJlc3VsdFJlY2VpdmVyYCBvYmplY3QgYXMgdGhlIHJlY2VpdmVyIG9mIGNhcHR1cmVkIHJlc3VsdHMuXHJcbiAgICAgKiBAcGFyYW0gcmVjZWl2ZXIgVGhlIHJlY2VpdmVyIG9iamVjdCwgb2YgdHlwZSBgQ2FwdHVyZWRSZXN1bHRSZWNlaXZlcmAuXHJcbiAgICAgKi9cclxuICAgIGFkZFJlc3VsdFJlY2VpdmVyKHJlY2VpdmVyKSB7XHJcbiAgICAgICAgY2hlY2tJc0Rpc3Bvc2VkKHRoaXMpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgcmVjZWl2ZXIgIT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCByZWNlaXZlci5gKTtcclxuICAgICAgICBpZiAoIXJlY2VpdmVyIHx8ICFPYmplY3Qua2V5cyhyZWNlaXZlcikubGVuZ3RoKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRSZWNlaXZlclNldCwgXCJmXCIpLmFkZChyZWNlaXZlcik7XHJcbiAgICAgICAgdGhpcy5fc2V0Q3JyUmVnaXN0cnkoKTtcclxuICAgIH1cclxuICAgIDtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGBDYXB0dXJlZFJlc3VsdFJlY2VpdmVyYCBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0gcmVjZWl2ZXIgVGhlIHJlY2VpdmVyIG9iamVjdCwgb2YgdHlwZSBgQ2FwdHVyZWRSZXN1bHRSZWNlaXZlcmAuXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZVJlc3VsdFJlY2VpdmVyKHJlY2VpdmVyKSB7XHJcbiAgICAgICAgY2hlY2tJc0Rpc3Bvc2VkKHRoaXMpO1xyXG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0UmVjZWl2ZXJTZXQsIFwiZlwiKS5kZWxldGUocmVjZWl2ZXIpO1xyXG4gICAgICAgIHRoaXMuX3NldENyclJlZ2lzdHJ5KCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfc2V0Q3JyUmVnaXN0cnkoKSB7XHJcbiAgICAgICAgY29uc3QgcmVjZWl2ZXIgPSB7XHJcbiAgICAgICAgICAgIG9uQ2FwdHVyZWRSZXN1bHRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIG9uRGVjb2RlZEJhcmNvZGVzUmVjZWl2ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBvblJlY29nbml6ZWRUZXh0TGluZXNSZWNlaXZlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIG9uRGV0ZWN0ZWRRdWFkc1JlY2VpdmVkOiBmYWxzZSxcclxuICAgICAgICAgICAgb25Ob3JtYWxpemVkSW1hZ2VzUmVjZWl2ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBvblBhcnNlZFJlc3VsdHNSZWNlaXZlZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAobGV0IHIgb2YgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRSZWNlaXZlclNldCwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgIGlmIChyLmlzRGNlKVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIHJlY2VpdmVyLm9uQ2FwdHVyZWRSZXN1bHRSZWNlaXZlZCA9ICEhcltcIm9uQ2FwdHVyZWRSZXN1bHRSZWNlaXZlZFwiXTtcclxuICAgICAgICAgICAgcmVjZWl2ZXIub25EZWNvZGVkQmFyY29kZXNSZWNlaXZlZCA9ICEhcltcIm9uRGVjb2RlZEJhcmNvZGVzUmVjZWl2ZWRcIl07XHJcbiAgICAgICAgICAgIHJlY2VpdmVyLm9uUmVjb2duaXplZFRleHRMaW5lc1JlY2VpdmVkID0gISFyW1wib25SZWNvZ25pemVkVGV4dExpbmVzUmVjZWl2ZWRcIl07XHJcbiAgICAgICAgICAgIHJlY2VpdmVyLm9uRGV0ZWN0ZWRRdWFkc1JlY2VpdmVkID0gISFyW1wib25EZXRlY3RlZFF1YWRzUmVjZWl2ZWRcIl07XHJcbiAgICAgICAgICAgIHJlY2VpdmVyLm9uTm9ybWFsaXplZEltYWdlc1JlY2VpdmVkID0gISFyW1wib25Ob3JtYWxpemVkSW1hZ2VzUmVjZWl2ZWRcIl07XHJcbiAgICAgICAgICAgIHJlY2VpdmVyLm9uUGFyc2VkUmVzdWx0c1JlY2VpdmVkID0gISFyW1wib25QYXJzZWRSZXN1bHRzUmVjZWl2ZWRcIl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHAgPSBuZXcgTXV0YWJsZVByb21pc2UoKTtcclxuICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gYXN5bmMgKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgcC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIGV4LnN0YWNrID0gYm9keS5zdGFjayArICdcXG4nICsgZXguc3RhY2s7XHJcbiAgICAgICAgICAgICAgICBwLnJlamVjdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICB0eXBlOiBcImN2cl9zZXRDcnJSZWdpc3RyeVwiLFxyXG4gICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICBpbnN0YW5jZUlEOiB0aGlzLl9pbnN0YW5jZUlELFxyXG4gICAgICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICAgICAgICByZWNlaXZlcjogSlNPTi5zdHJpbmdpZnkocmVjZWl2ZXIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIGBNdWx0aUZyYW1lUmVzdWx0Q3Jvc3NGaWx0ZXJgIG9iamVjdCB0byBmaWx0ZXIgbm9uLWVzc2VudGlhbCByZXN1bHRzLlxyXG4gICAgICogQHBhcmFtIGZpbHRlciBUaGUgZmlsdGVyIG9iamVjdCwgb2YgdHlwZSBgTXVsdGlGcmFtZVJlc3VsdENyb3NzRmlsdGVyYC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBvcGVyYXRpb24gaGFzIHN1Y2Nlc3NmdWxseSBjb21wbGV0ZWQuIEl0IGRvZXMgbm90IHByb3ZpZGUgYW55IHZhbHVlIHVwb24gcmVzb2x1dGlvbi5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgYWRkUmVzdWx0RmlsdGVyKGZpbHRlcikge1xyXG4gICAgICAgIGNoZWNrSXNEaXNwb3NlZCh0aGlzKTtcclxuICAgICAgICBpZiAoIWZpbHRlciB8fCB0eXBlb2YgZmlsdGVyICE9PSBcIm9iamVjdFwiIHx8ICFPYmplY3Qua2V5cyhmaWx0ZXIpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29uc29sZS53YXJuKGBJbnZhbGlkIGZpbHRlci5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRGaWx0ZXJTZXQsIFwiZlwiKS5hZGQoZmlsdGVyKTtcclxuICAgICAgICAvLyBXaGVuIGN2ci5hZGRSZXN1bHRGaWx0ZXIgaXMgY2FsbGVkLCB0aGlzIG1ldGhvZCB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgaW52b2tlZCB0byBiYXRjaCB1cGRhdGUgdGhlIGZpbHRlciBzdGF0dXNlcyB0aGF0IHdlcmUgc2V0IGJlZm9yZSBjYWxsaW5nIGFkZFJlc3VsdEZpbHRlci5cclxuICAgICAgICBmaWx0ZXIuX2R5bmFtc29mdCgpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX2hhbmRsZUZpbHRlclVwZGF0ZSgpO1xyXG4gICAgfVxyXG4gICAgO1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgYE11bHRpRnJhbWVSZXN1bHRDcm9zc0ZpbHRlcmAgb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIGZpbHRlciBUaGUgZmlsdGVyIG9iamVjdCwgb2YgdHlwZSBgTXVsdGlGcmFtZVJlc3VsdENyb3NzRmlsdGVyYC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBvcGVyYXRpb24gaGFzIHN1Y2Nlc3NmdWxseSBjb21wbGV0ZWQuIEl0IGRvZXMgbm90IHByb3ZpZGUgYW55IHZhbHVlIHVwb24gcmVzb2x1dGlvbi5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVtb3ZlUmVzdWx0RmlsdGVyKGZpbHRlcikge1xyXG4gICAgICAgIGNoZWNrSXNEaXNwb3NlZCh0aGlzKTtcclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Jlc3VsdEZpbHRlclNldCwgXCJmXCIpLmRlbGV0ZShmaWx0ZXIpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX2hhbmRsZUZpbHRlclVwZGF0ZSgpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2hhbmRsZUZpbHRlclVwZGF0ZSgpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFYWNoIHRpbWUgYSBcImZpbHRlclwiIGlzIGFkZGVkIG9yIHJlbW92ZWQsIHRoZSBcImZpbHRlciBzZXRcIiB3aWxsIGJlIHJlLXRyYXZlcnNlZCxcclxuICAgICAgICAgKiBhbmQgX2ludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyT2ZGaWx0ZXIgd2lsbCBiZSBhZGRlZCB3aGVuIG5lY2Vzc2FyeS5cclxuICAgICAgICAgKiBUaGlzIGVuc3VyZXMgdGhhdCBfaW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXJPZkZpbHRlciBpcyBub3QgbGVmdCBpbiB0aGUgXCJmaWx0ZXIgc2V0XCIgd2hlbiB0aGUgXCJmaWx0ZXIgc2V0XCIgaXMgZW1wdHkgb3Igd2hlbiBubyBmaWx0ZXIgaW4gdGhlIFwiZmlsdGVyIHNldFwiIGhhcyBpc0xhdGVzdE92ZXJsYXBwaW5nRW5hYmxlZCBzZXQgdG8gdHJ1ZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2ludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXIsIFwiZlwiKS5yZW1vdmVSZXN1bHRSZWNlaXZlcihfaW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXJPZkZpbHRlcik7XHJcbiAgICAgICAgaWYgKF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0RmlsdGVyU2V0LCBcImZcIikuc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9pc09wZW5CYXJjb2RlVmVyaWZ5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3BlbkxhYmVsVmVyaWZ5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3BlbkRldGVjdFZlcmlmeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLl9pc09wZW5Ob3JtYWxpemVWZXJpZnkgPSBmYWxzZTtcclxuICAgICAgICAgICAgY29uc3QgX3ZlcmlmaWNhdGlvbkVuYWJsZWQgPSB7XHJcbiAgICAgICAgICAgICAgICBbRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUuQ1JJVF9CQVJDT0RFXTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBbRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUuQ1JJVF9URVhUX0xJTkVdOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFtFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX0RFVEVDVEVEX1FVQURdOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFtFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX05PUk1BTElaRURfSU1BR0VdOiBmYWxzZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBfZHVwbGljYXRlRmlsdGVyRW5hYmxlZCA9IHtcclxuICAgICAgICAgICAgICAgIFtFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX0JBUkNPREVdOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFtFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX1RFWFRfTElORV06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgW0VudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfREVURUNURURfUVVBRF06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgW0VudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfTk9STUFMSVpFRF9JTUFHRV06IGZhbHNlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGF3YWl0IF9lbmFibGVSZXN1bHRDcm9zc1ZlcmlmaWNhdGlvbih0aGlzLCBfdmVyaWZpY2F0aW9uRW5hYmxlZCk7XHJcbiAgICAgICAgICAgIGF3YWl0IF9lbmFibGVSZXN1bHREZWR1cGxpY2F0aW9uKHRoaXMsIF9kdXBsaWNhdGVGaWx0ZXJFbmFibGVkKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBmaWx0ZXIgb2YgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRGaWx0ZXJTZXQsIFwiZlwiKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9pc09wZW5CYXJjb2RlVmVyaWZ5ID0gZmlsdGVyLmlzUmVzdWx0Q3Jvc3NWZXJpZmljYXRpb25FbmFibGVkKEVudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfQkFSQ09ERSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3BlbkxhYmVsVmVyaWZ5ID0gZmlsdGVyLmlzUmVzdWx0Q3Jvc3NWZXJpZmljYXRpb25FbmFibGVkKEVudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfVEVYVF9MSU5FKTtcclxuICAgICAgICAgICAgdGhpcy5faXNPcGVuRGV0ZWN0VmVyaWZ5ID0gZmlsdGVyLmlzUmVzdWx0Q3Jvc3NWZXJpZmljYXRpb25FbmFibGVkKEVudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfREVURUNURURfUVVBRCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3Blbk5vcm1hbGl6ZVZlcmlmeSA9IGZpbHRlci5pc1Jlc3VsdENyb3NzVmVyaWZpY2F0aW9uRW5hYmxlZChFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX05PUk1BTElaRURfSU1BR0UpO1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVyLmlzTGF0ZXN0T3ZlcmxhcHBpbmdFbmFibGVkKEVudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfQkFSQ09ERSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9pc0V4aXN0ID0gWy4uLl9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgXCJmXCIpLl9pbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlclNldC52YWx1ZXMoKV0uZmluZCgocmVjZWl2ZXIpID0+IHsgcmV0dXJuIHJlY2VpdmVyLmlzRmlsdGVyOyB9KTtcclxuICAgICAgICAgICAgICAgIGlmICghX2lzRXhpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2ludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXIsIFwiZlwiKS5hZGRSZXN1bHRSZWNlaXZlcihfaW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXJPZkZpbHRlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgX2VuYWJsZVJlc3VsdENyb3NzVmVyaWZpY2F0aW9uKHRoaXMsIGZpbHRlci52ZXJpZmljYXRpb25FbmFibGVkKTtcclxuICAgICAgICAgICAgYXdhaXQgX2VuYWJsZVJlc3VsdERlZHVwbGljYXRpb24odGhpcywgZmlsdGVyLmR1cGxpY2F0ZUZpbHRlckVuYWJsZWQpO1xyXG4gICAgICAgICAgICBhd2FpdCBfc2V0RHVwbGljYXRlRm9yZ2V0VGltZSh0aGlzLCBmaWx0ZXIuZHVwbGljYXRlRm9yZ2V0VGltZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWF0ZXMgYSBjYXB0dXJpbmcgcHJvY2VzcyBiYXNlZCBvbiBhIHNwZWNpZmllZCB0ZW1wbGF0ZS4gVGhpcyBwcm9jZXNzIGlzIHJlcGVhdGVkIGZvciBlYWNoIGltYWdlIGZldGNoZWQgZnJvbSB0aGUgc291cmNlLlxyXG4gICAgICogQHBhcmFtIHRlbXBsYXRlTmFtZSBbT3B0aW9uYWxdIFNwZWNpZmllcyBhIFwiQ2FwdHVyZVZpc2lvblRlbXBsYXRlXCIgdG8gdXNlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNhcHR1cmluZyBwcm9jZXNzIGhhcyBzdWNjZXNzZnVsbHkgc3RhcnRlZC4gSXQgZG9lcyBub3QgcHJvdmlkZSBhbnkgdmFsdWUgdXBvbiByZXNvbHV0aW9uLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBzdGFydENhcHR1cmluZyh0ZW1wbGF0ZU5hbWUpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIGNoZWNrSXNEaXNwb3NlZCh0aGlzKTtcclxuICAgICAgICBpZiAoIXRoaXMuX2lzUGF1c2VTY2FuKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKCFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCdJbWFnZVNvdXJjZUFkYXB0ZXInIGlzIG5vdCBzZXQuIGNhbGwgJ3NldElucHV0JyBiZWZvcmUgJ3N0YXJ0Q2FwdHVyaW5nJ2ApO1xyXG4gICAgICAgIGlmICghdGVtcGxhdGVOYW1lKVxyXG4gICAgICAgICAgICB0ZW1wbGF0ZU5hbWUgPSB0aGlzLl9jdXJyZW50U2V0dGluZ3MuQ2FwdHVyZVZpc2lvblRlbXBsYXRlc1swXS5OYW1lO1xyXG4gICAgICAgIGNvbnN0IHRhc2tzID0gYXdhaXQgdGhpcy5jb250YWluc1Rhc2sodGVtcGxhdGVOYW1lKTtcclxuICAgICAgICBhd2FpdCBsb2FkV2FzbSh0YXNrcyk7XHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBXaHkgZG8gd2UgbmVlZCB0byByZS1hZGQgYW4gZXhpc3RpbmcgXCJmaWx0ZXJcIiB3aGVuIGNhbGxpbmcgXCJzdGFydENhcHR1cmluZ1wiP1xyXG4gICAgICAgICAqIEJlY2F1c2UgdGhlcmUgbWF5IGJlIGEgc2l0dWF0aW9uIHdoZXJlIHRoZSBjb3JyZXNwb25kaW5nIHdhc20gbW9kdWxlIGhhcyBub3QgYmVlbiBsb2FkZWQgd2hlbiBhZGRpbmcgXCJmaWx0ZXJcIixcclxuICAgICAgICAgKiBzbyBhZnRlciBjaGVja2luZyB0aGUgcmVxdWlyZWQgd2FzbSBtb2R1bGUgaW4gXCJzdGFydENhcHR1cmluZ1wiLCB3ZSB3aWxsIGFkZCBcImZpbHRlclwiIGFnYWluIHRvIGVuc3VyZSB0aGF0IFwiZmlsdGVyXCIgdGFrZXMgZWZmZWN0IGluIHdhc20uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBXaHkgbm90IGNoZWNrIGZvciB0aGUgcmVxdWlyZWQgd2FzbSB3aGVuIGFkZGluZyB0aGUgXCJmaWx0ZXJcIj9cclxuICAgICAgICAgKiBCZWNhdXNlIGVhY2ggcmVzdWx0IHR5cGUgaGFzIGEgZGVmYXVsdCB2YWx1ZSwgd2UgY2Fubm90IGtub3cgd2hpY2ggd2FzbSBtb2R1bGVzIGFyZSBhY3R1YWxseSBuZWVkZWQgdGhyb3VnaCB0aGUgcGFzc2VkIFwiZmlsdGVyXCJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoaXMgcGFydCBvZiB0aGUgbG9naWMgaGFzIHJvb20gZm9yIG9wdGltaXphdGlvbi4gd2lsbCBkby5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZm9yIChsZXQgZmlsdGVyIG9mIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0RmlsdGVyU2V0LCBcImZcIikpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRSZXN1bHRGaWx0ZXIoZmlsdGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhc2tzLmluY2x1ZGVzKFwiZGxyXCIpICYmICEoKF9hID0gbWFwUGFja2FnZVJlZ2lzdGVyLmRscikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmJMb2FkQ29uZnVzYWJsZUNoYXJzRGF0YSkpIHtcclxuICAgICAgICAgICAgY29uc3QgX2VuZ2luZVJlc291cmNlUGF0aHMgPSBoYW5kbGVFbmdpbmVSZXNvdXJjZVBhdGhzKENvcmVNb2R1bGUuZW5naW5lUmVzb3VyY2VQYXRocywgYXV0b0Rpc2NvdmVyeVBhdGhzKTtcclxuICAgICAgICAgICAgYXdhaXQgKChfYiA9IG1hcFBhY2thZ2VSZWdpc3Rlci5kbHIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5sb2FkUmVjb2duaXRpb25EYXRhKFwiQ29uZnVzYWJsZUNoYXJzXCIsIF9lbmdpbmVSZXNvdXJjZVBhdGhzLmRscikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKS5pc0NhbWVyYUVuaGFuY2VyKSB7XHJcbiAgICAgICAgICAgIGlmICh0YXNrcy5pbmNsdWRlcyhcImRkblwiKSkge1xyXG4gICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKS5zZXRQaXhlbEZvcm1hdChFbnVtSW1hZ2VQaXhlbEZvcm1hdC5JUEZfQUJHUl84ODg4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuc2V0UGl4ZWxGb3JtYXQoRW51bUltYWdlUGl4ZWxGb3JtYXQuSVBGX0dSQVlTQ0FMRUQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLnNpbmdsZUZyYW1lTW9kZSAhPT0gdW5kZWZpbmVkICYmIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuc2luZ2xlRnJhbWVNb2RlICE9PSBcImRpc2FibGVkXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5fdGVtcGxhdGVOYW1lID0gdGVtcGxhdGVOYW1lO1xyXG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLm9uKFwic2luZ2xlRnJhbWVBY3F1aXJlZFwiLCB0aGlzLl9zaW5nbGVGcmFtZU1vZGVDYWxsYmFja0JpbmQpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvbG91ckNoYW5uZWxVc2FnZVR5cGUgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLmdldENvbG91ckNoYW5uZWxVc2FnZVR5cGUoKTtcclxuICAgICAgICBpZiAoY29sb3VyQ2hhbm5lbFVzYWdlVHlwZSA9PT0gRW51bUNvbG91ckNoYW5uZWxVc2FnZVR5cGUuQ0NVVF9BVVRPKSB7XHJcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuc2V0Q29sb3VyQ2hhbm5lbFVzYWdlVHlwZSh0YXNrcy5pbmNsdWRlcyhcImRkblwiKSA/XHJcbiAgICAgICAgICAgICAgICBFbnVtQ29sb3VyQ2hhbm5lbFVzYWdlVHlwZS5DQ1VUX0ZVTExfQ0hBTk5FTFxyXG4gICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgIEVudW1Db2xvdXJDaGFubmVsVXNhZ2VUeXBlLkNDVVRfWV9DSEFOTkVMX09OTFkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9wcm9taXNlU3RhcnRTY2FuLCBcImZcIikgJiYgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9wcm9taXNlU3RhcnRTY2FuLCBcImZcIikuaXNQZW5kaW5nKVxyXG4gICAgICAgICAgICByZXR1cm4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9wcm9taXNlU3RhcnRTY2FuLCBcImZcIik7XHJcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9wcm9taXNlU3RhcnRTY2FuLCBuZXcgTXV0YWJsZVByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kaXNwb3NlZClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgbGV0IHRhc2tJRCA9IGdldE5leHRUYXNrSUQoKTtcclxuICAgICAgICAgICAgbWFwVGFza0NhbGxCYWNrW3Rhc2tJRF0gPSBhc3luYyAoYm9keSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Byb21pc2VTdGFydFNjYW4sIFwiZlwiKSB8fCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Byb21pc2VTdGFydFNjYW4sIFwiZlwiKS5pc0Z1bGZpbGxlZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNQYXVzZVNjYW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc091dHB1dE9yaWdpbmFsSW1hZ2UgPSBib2R5LmlzT3V0cHV0T3JpZ2luYWxJbWFnZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkICYmIGNsZWFyVGltZW91dCh0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9taW5JbWFnZUNhcHR1cmVJbnRlcnZhbCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuc3RhcnRGZXRjaGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvb3BSZWFkVmlkZW8odGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBhd2FpdCB0aGlzLl9sb29wUmVhZFZpZGVvKHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgcmooZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImN2cl9zdGFydENhcHR1cmluZ1wiLFxyXG4gICAgICAgICAgICAgICAgaWQ6IHRhc2tJRCxcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSUQ6IHRoaXMuX2luc3RhbmNlSUQsXHJcbiAgICAgICAgICAgICAgICBib2R5OiB7IHRlbXBsYXRlTmFtZSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pLCBcImZcIik7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcHJvbWlzZVN0YXJ0U2NhbiwgXCJmXCIpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wcyB0aGUgY2FwdHVyaW5nIHByb2Nlc3MuXHJcbiAgICAgKi9cclxuICAgIHN0b3BDYXB0dXJpbmcoKSB7XHJcbiAgICAgICAgY2hlY2tJc0Rpc3Bvc2VkKHRoaXMpO1xyXG4gICAgICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLmlzQ2FtZXJhRW5oYW5jZXIpIHtcclxuICAgICAgICAgICAgaWYgKF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuc2luZ2xlRnJhbWVNb2RlICE9PSB1bmRlZmluZWQgJiYgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKS5zaW5nbGVGcmFtZU1vZGUgIT09IFwiZGlzYWJsZWRcIikge1xyXG4gICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKS5vZmYoXCJzaW5nbGVGcmFtZUFjcXVpcmVkXCIsIHRoaXMuX3NpbmdsZUZyYW1lTW9kZUNhbGxiYWNrQmluZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgX2NsZWFyVmVyaWZ5TGlzdCh0aGlzKTtcclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLnN0b3BGZXRjaGluZygpO1xyXG4gICAgICAgIHRoaXMuX2F2ZXJhZ2VQcm9jZXNzaW50VGltZUFycmF5ID0gW107XHJcbiAgICAgICAgdGhpcy5fYXZlcmFnZVRpbWUgPSA5OTk7XHJcbiAgICAgICAgdGhpcy5faXNQYXVzZVNjYW4gPSB0cnVlO1xyXG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcHJvbWlzZVN0YXJ0U2NhbiwgbnVsbCwgXCJmXCIpO1xyXG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuc2V0Q29sb3VyQ2hhbm5lbFVzYWdlVHlwZShFbnVtQ29sb3VyQ2hhbm5lbFVzYWdlVHlwZS5DQ1VUX0FVVE8pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgY29udGFpbnNUYXNrKHRlbXBsYXRlTmFtZSkge1xyXG4gICAgICAgIGNoZWNrSXNEaXNwb3NlZCh0aGlzKTtcclxuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgICAgICBtYXBUYXNrQ2FsbEJhY2tbdGFza0lEXSA9IGFzeW5jIChib2R5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzKEpTT04ucGFyc2UoYm9keS50YXNrcykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV4ID0gbmV3IEVycm9yKGJvZHkubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXguc3RhY2sgPSBib2R5LnN0YWNrICsgJ1xcbicgKyBleC5zdGFjaztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmooZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJjdnJfY29udGFpbnNUYXNrXCIsXHJcbiAgICAgICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJRDogdGhpcy5faW5zdGFuY2VJRCxcclxuICAgICAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFZpZGVvIHN0cmVhbSBjYXB0dXJlLCByZWN1cnNpdmUgY2FsbCwgbG9vcCBmcmFtZSBjYXB0dXJlXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIF9sb29wUmVhZFZpZGVvKHRlbXBsYXRlTmFtZSkge1xyXG4gICAgICAgIGlmICgodGhpcy5kaXNwb3NlZCB8fCB0aGlzLl9pc1BhdXNlU2NhbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzU2Nhbm5lciwgdHJ1ZSwgXCJmXCIpO1xyXG4gICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLmlzQnVmZmVyRW1wdHkoKSkge1xyXG4gICAgICAgICAgICBpZiAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKS5oYXNOZXh0SW1hZ2VUb0ZldGNoKCkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGxpc3RlbmVyIG9mIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhU3RhdGVMaXN0ZW5lclNldCwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIub25JbWFnZVNvdXJjZVN0YXRlUmVjZWl2ZWQgJiYgbGlzdGVuZXIub25JbWFnZVNvdXJjZVN0YXRlUmVjZWl2ZWQoRW51bUltYWdlU291cmNlU3RhdGUuSVNTX0JVRkZFUl9FTVBUWSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoIShfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLmhhc05leHRJbWFnZVRvRmV0Y2goKSkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGxpc3RlbmVyIG9mIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhU3RhdGVMaXN0ZW5lclNldCwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIub25JbWFnZVNvdXJjZVN0YXRlUmVjZWl2ZWQgJiYgbGlzdGVuZXIub25JbWFnZVNvdXJjZVN0YXRlUmVjZWl2ZWQoRW51bUltYWdlU291cmNlU3RhdGUuSVNTX0VYSEFVU1RFRCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX21pbkltYWdlQ2FwdHVyZUludGVydmFsID09PSAtMSB8fCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLmlzQnVmZmVyRW1wdHkoKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuaXNCdWZmZXJFbXB0eSgpICYmIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKVxyXG4gICAgICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBidWZmZXIgaXMgZW1wdHkgc28gZmV0Y2ggaW1hZ2VgKTtcclxuICAgICAgICAgICAgICAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykge1xyXG4gICAgICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBEQ0U6IHN0YXJ0IGZldGNoaW5nIGEgZnJhbWU6ICR7RGF0ZS5ub3coKX1gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX2RzSW1hZ2UgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLmZldGNoSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykge1xyXG4gICAgICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBEQ0U6IGZpbmlzaCBmZXRjaGluZyBhIGZyYW1lOiAke0RhdGUubm93KCl9YCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLnNldEltYWdlRmV0Y2hJbnRlcnZhbCh0aGlzLl9hdmVyYWdlVGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlUnVuQ3Vycm5ldEZ1bmModGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKS5zZXRJbWFnZUZldGNoSW50ZXJ2YWwodGhpcy5fYXZlcmFnZVRpbWUgLSAodGhpcy5fZHNJbWFnZSAmJiB0aGlzLl9kc0ltYWdlLnRhZyA/IHRoaXMuX2RzSW1hZ2UudGFnLnRpbWVTcGVudCA6IDApKTtcclxuICAgICAgICAgICAgdGhpcy5fZHNJbWFnZSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuZ2V0SW1hZ2UoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RzSW1hZ2UudGFnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHRoaXMuX2RzSW1hZ2UudGFnLnRpbWVTdGFtcCA+IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlUnVuQ3Vycm5ldEZ1bmModGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLl9kc0ltYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlUnVuQ3Vycm5ldEZ1bmModGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCByZWNlaXZlciBvZiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Jlc3VsdFJlY2VpdmVyU2V0LCBcImZcIikpIHtcclxuICAgICAgICAgICAgdGhpcy5faXNPdXRwdXRPcmlnaW5hbEltYWdlICYmIHJlY2VpdmVyLm9uT3JpZ2luYWxJbWFnZVJlc3VsdFJlY2VpdmVkICYmIHJlY2VpdmVyLm9uT3JpZ2luYWxJbWFnZVJlc3VsdFJlY2VpdmVkKHsgaW1hZ2VEYXRhOiB0aGlzLl9kc0ltYWdlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjYXB0dXJlXHJcbiAgICAgICAgLy8gdHJ5IHtcclxuICAgICAgICAvLyAgIGNvbnN0IGNhcHR1cmVTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIC8vICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5fY2FwdHVyZURzaW1hZ2UodGhpcy5fZHNJbWFnZSwgdGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAvLyAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYG5vIGpzIGhhbmRsZSB0aW1lOiAke0RhdGUubm93KCkgLSBjYXB0dXJlU3RhcnRUaW1lfWApO1xyXG4gICAgICAgIC8vICAgaWYgKHRoaXMuX2lzUGF1c2VTY2FuKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuX3JlUnVuQ3Vycm5ldEZ1bmModGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vICAgfVxyXG4gICAgICAgIC8vICAgKHJlc3VsdCBhcyBhbnkpLm9yaWdpbmFsSW1hZ2VUYWcgPSB0aGlzLl9kc0ltYWdlLnRhZyA/IHRoaXMuX2RzSW1hZ2UudGFnIDogbnVsbDtcclxuICAgICAgICAvLyAgIGNvbnN0IHJlc3VsdENvbW1vblBhcnQgPSB7XHJcbiAgICAgICAgLy8gICAgIG9yaWdpbmFsSW1hZ2VIYXNoSWQ6IHJlc3VsdC5vcmlnaW5hbEltYWdlSGFzaElkLFxyXG4gICAgICAgIC8vICAgICBvcmlnaW5hbEltYWdlVGFnOiByZXN1bHQub3JpZ2luYWxJbWFnZVRhZyxcclxuICAgICAgICAvLyAgICAgZXJyb3JDb2RlOiByZXN1bHQuZXJyb3JDb2RlLFxyXG4gICAgICAgIC8vICAgICBlcnJvclN0cmluZzogcmVzdWx0LmVycm9yU3RyaW5nXHJcbiAgICAgICAgLy8gICB9XHJcbiAgICAgICAgLy8gICBmb3IgKGxldCByZWNlaXZlciBvZiB0aGlzLiNyZXN1bHRSZWNlaXZlclNldCkge1xyXG4gICAgICAgIC8vICAgICBpZiAoKHJlY2VpdmVyIGFzIGFueSkuaXNEY2UpIHtcclxuICAgICAgICAvLyAgICAgICBjb25zdCBkcmF3VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgLy8gICAgICAgKHJlY2VpdmVyIGFzIGFueSkub25DYXB0dXJlZFJlc3VsdFJlY2VpdmVkKHJlc3VsdCwge1xyXG4gICAgICAgIC8vICAgICAgICAgaXNEZXRlY3RWZXJpZnlPcGVuOiB0aGlzLl9pc09wZW5EZXRlY3RWZXJpZnksXHJcbiAgICAgICAgLy8gICAgICAgICBpc05vcm1hbGl6ZVZlcmlmeU9wZW46IHRoaXMuX2lzT3Blbk5vcm1hbGl6ZVZlcmlmeSxcclxuICAgICAgICAvLyAgICAgICAgIGlzQmFyY29kZVZlcmlmeU9wZW46IHRoaXMuX2lzT3BlbkJhcmNvZGVWZXJpZnksXHJcbiAgICAgICAgLy8gICAgICAgICBpc0xhYmVsVmVyaWZ5T3BlbjogdGhpcy5faXNPcGVuTGFiZWxWZXJpZnksXHJcbiAgICAgICAgLy8gICAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgICAgaWYgKENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBjb25zdCB0aW1lID0gRGF0ZS5ub3coKSAtIGRyYXdUaW1lO1xyXG4gICAgICAgIC8vICAgICAgICAgaWYgKHRpbWUgPiAxMCkgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYGRyYXcgcmVzdWx0IHRpbWU6ICR7dGltZX1gKVxyXG4gICAgICAgIC8vICAgICAgIH07XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgcmVjZWl2ZXIub25EZWNvZGVkQmFyY29kZXNSZWNlaXZlZCAmJiByZXN1bHQuYmFyY29kZVJlc3VsdEl0ZW1zICYmIHJlY2VpdmVyLm9uRGVjb2RlZEJhcmNvZGVzUmVjZWl2ZWQoe1xyXG4gICAgICAgIC8vICAgICAgIC4uLnJlc3VsdENvbW1vblBhcnQsXHJcbiAgICAgICAgLy8gICAgICAgYmFyY29kZVJlc3VsdEl0ZW1zOiByZXN1bHQuYmFyY29kZVJlc3VsdEl0ZW1zLmZpbHRlcigoaXRlbTogYW55KSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlciB9KVxyXG4gICAgICAgIC8vICAgICB9IGFzIERlY29kZWRCYXJjb2Rlc1Jlc3VsdCk7XHJcbiAgICAgICAgLy8gICAgIHJlY2VpdmVyLm9uUmVjb2duaXplZFRleHRMaW5lc1JlY2VpdmVkICYmIHJlc3VsdC50ZXh0TGluZVJlc3VsdEl0ZW1zICYmIHJlY2VpdmVyLm9uUmVjb2duaXplZFRleHRMaW5lc1JlY2VpdmVkKHtcclxuICAgICAgICAvLyAgICAgICAuLi5yZXN1bHRDb21tb25QYXJ0LFxyXG4gICAgICAgIC8vICAgICAgIHRleHRMaW5lUmVzdWx0SXRlbXM6IHJlc3VsdC50ZXh0TGluZVJlc3VsdEl0ZW1zLmZpbHRlcigoaXRlbTogYW55KSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlciB9KVxyXG4gICAgICAgIC8vICAgICB9IGFzIFJlY29nbml6ZWRUZXh0TGluZXNSZXN1bHQpO1xyXG4gICAgICAgIC8vICAgICByZWNlaXZlci5vbkRldGVjdGVkUXVhZHNSZWNlaXZlZCAmJiByZXN1bHQuZGV0ZWN0ZWRRdWFkUmVzdWx0SXRlbXMgJiYgcmVjZWl2ZXIub25EZXRlY3RlZFF1YWRzUmVjZWl2ZWQoe1xyXG4gICAgICAgIC8vICAgICAgIC4uLnJlc3VsdENvbW1vblBhcnQsXHJcbiAgICAgICAgLy8gICAgICAgZGV0ZWN0ZWRRdWFkUmVzdWx0SXRlbXM6IHJlc3VsdC5kZXRlY3RlZFF1YWRSZXN1bHRJdGVtcy5maWx0ZXIoKGl0ZW06IGFueSkgPT4geyByZXR1cm4gIWl0ZW0uaXNGaWx0ZXIgfSlcclxuICAgICAgICAvLyAgICAgfSBhcyBEZXRlY3RlZFF1YWRzUmVzdWx0KTtcclxuICAgICAgICAvLyAgICAgcmVjZWl2ZXIub25Ob3JtYWxpemVkSW1hZ2VzUmVjZWl2ZWQgJiYgcmVzdWx0Lm5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zICYmIHJlY2VpdmVyLm9uTm9ybWFsaXplZEltYWdlc1JlY2VpdmVkKHtcclxuICAgICAgICAvLyAgICAgICAuLi5yZXN1bHRDb21tb25QYXJ0LFxyXG4gICAgICAgIC8vICAgICAgIG5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zOiByZXN1bHQubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMuZmlsdGVyKChpdGVtOiBhbnkpID0+IHsgcmV0dXJuICFpdGVtLmlzRmlsdGVyIH0pXHJcbiAgICAgICAgLy8gICAgIH0gYXMgTm9ybWFsaXplZEltYWdlc1Jlc3VsdCk7XHJcbiAgICAgICAgLy8gICAgIHJlY2VpdmVyLm9uUGFyc2VkUmVzdWx0c1JlY2VpdmVkICYmIHJlc3VsdC5wYXJzZWRSZXN1bHRJdGVtcyAmJiByZWNlaXZlci5vblBhcnNlZFJlc3VsdHNSZWNlaXZlZCh7XHJcbiAgICAgICAgLy8gICAgICAgLi4ucmVzdWx0Q29tbW9uUGFydCxcclxuICAgICAgICAvLyAgICAgICBwYXJzZWRSZXN1bHRJdGVtczogcmVzdWx0LnBhcnNlZFJlc3VsdEl0ZW1zLmZpbHRlcigoaXRlbTogYW55KSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlciB9KVxyXG4gICAgICAgIC8vICAgICB9IGFzIFBhcnNlZFJlc3VsdCk7XHJcbiAgICAgICAgLy8gICAgIGlmIChyZWNlaXZlci5vbkNhcHR1cmVkUmVzdWx0UmVjZWl2ZWQgJiYgIShyZWNlaXZlciBhcyBhbnkpLmlzRGNlKSB7XHJcbiAgICAgICAgLy8gICAgICAgKHJlc3VsdCBhcyBhbnkpLml0ZW1zID0gcmVzdWx0Lml0ZW1zLmZpbHRlcigoaXRlbTogYW55KSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlciB9KTtcclxuICAgICAgICAvLyAgICAgICBpZiAoKHJlc3VsdCBhcyBhbnkpLmJhcmNvZGVSZXN1bHRJdGVtcykgKHJlc3VsdCBhcyBhbnkpLmJhcmNvZGVSZXN1bHRJdGVtcyA9IHJlc3VsdC5iYXJjb2RlUmVzdWx0SXRlbXMuZmlsdGVyKChpdGVtOiBhbnkpID0+IHsgcmV0dXJuICFpdGVtLmlzRmlsdGVyIH0pO1xyXG4gICAgICAgIC8vICAgICAgIGlmICgocmVzdWx0IGFzIGFueSkudGV4dExpbmVSZXN1bHRJdGVtcykgKHJlc3VsdCBhcyBhbnkpLnRleHRMaW5lUmVzdWx0SXRlbXMgPSByZXN1bHQudGV4dExpbmVSZXN1bHRJdGVtcy5maWx0ZXIoKGl0ZW06IGFueSkgPT4geyByZXR1cm4gIWl0ZW0uaXNGaWx0ZXIgfSk7XHJcbiAgICAgICAgLy8gICAgICAgaWYgKChyZXN1bHQgYXMgYW55KS5kZXRlY3RlZFF1YWRSZXN1bHRJdGVtcykgKHJlc3VsdCBhcyBhbnkpLmRldGVjdGVkUXVhZFJlc3VsdEl0ZW1zID0gcmVzdWx0LmRldGVjdGVkUXVhZFJlc3VsdEl0ZW1zLmZpbHRlcigoaXRlbTogYW55KSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlciB9KTtcclxuICAgICAgICAvLyAgICAgICBpZiAoKHJlc3VsdCBhcyBhbnkpLm5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zKSAocmVzdWx0IGFzIGFueSkubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMgPSByZXN1bHQubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMuZmlsdGVyKChpdGVtOiBhbnkpID0+IHsgcmV0dXJuICFpdGVtLmlzRmlsdGVyIH0pO1xyXG4gICAgICAgIC8vICAgICAgIGlmICgocmVzdWx0IGFzIGFueSkucGFyc2VkUmVzdWx0SXRlbXMpIChyZXN1bHQgYXMgYW55KS5wYXJzZWRSZXN1bHRJdGVtcyA9IHJlc3VsdC5wYXJzZWRSZXN1bHRJdGVtcy5maWx0ZXIoKGl0ZW06IGFueSkgPT4geyByZXR1cm4gIWl0ZW0uaXNGaWx0ZXIgfSk7XHJcbiAgICAgICAgLy8gICAgICAgcmVjZWl2ZXIub25DYXB0dXJlZFJlc3VsdFJlY2VpdmVkKHJlc3VsdCk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgIH1cclxuICAgICAgICAvLyAgIGNvbnN0IGZldGNoSW1hZ2VDYWxjdWxhdGVTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIC8vICAgaWYgKHRoaXMuX21pbkltYWdlQ2FwdHVyZUludGVydmFsID4gLTEpIHtcclxuICAgICAgICAvLyAgICAgaWYgKHRoaXMuX2F2ZXJhZ2VQcm9jZXNzaW50VGltZUFycmF5Lmxlbmd0aCA9PT0gNSkgdGhpcy5fYXZlcmFnZVByb2Nlc3NpbnRUaW1lQXJyYXkuc2hpZnQoKTtcclxuICAgICAgICAvLyAgICAgaWYgKHRoaXMuX2F2ZXJhZ2VGZXRjaEltYWdlVGltZUFycmF5Lmxlbmd0aCA9PT0gNSkgdGhpcy5fYXZlcmFnZUZldGNoSW1hZ2VUaW1lQXJyYXkuc2hpZnQoKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5fYXZlcmFnZVByb2Nlc3NpbnRUaW1lQXJyYXkucHVzaChEYXRlLm5vdygpIC0gY2FwdHVyZVN0YXJ0VGltZSk7XHJcbiAgICAgICAgLy8gICAgIC8vdGhpcy5fYXZlcmFnZVRpbWUgPSB0aGlzLl9hdmVyYWdlUHJvY2Vzc2ludFRpbWVBcnJheS5yZWR1Y2UoKHRpbWUsIHZhbHVlKSA9PiB0aW1lICsgdmFsdWUsIDApIC8gdGhpcy5fYXZlcmFnZVByb2Nlc3NpbnRUaW1lQXJyYXkubGVuZ3RoO1xyXG4gICAgICAgIC8vICAgICB0aGlzLl9hdmVyYWdlRmV0Y2hJbWFnZVRpbWVBcnJheS5wdXNoKCh0aGlzLl9kc0ltYWdlICYmIHRoaXMuX2RzSW1hZ2UudGFnID8gKHRoaXMuX2RzSW1hZ2UudGFnIGFzIGFueSkudGltZVNwZW50IDogMCkpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLl9hdmVyYWdlVGltZSA9IE1hdGgubWluKC4uLnRoaXMuX2F2ZXJhZ2VQcm9jZXNzaW50VGltZUFycmF5KSAtIE1hdGgubWF4KC4uLnRoaXMuX2F2ZXJhZ2VGZXRjaEltYWdlVGltZUFycmF5KTtcclxuICAgICAgICAvLyAgICAgdGhpcy5fYXZlcmFnZVRpbWUgPSB0aGlzLl9hdmVyYWdlVGltZSA+IDAgPyB0aGlzLl9hdmVyYWdlVGltZSA6IDA7XHJcbiAgICAgICAgLy8gICAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykge1xyXG4gICAgICAgIC8vICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBtaW5JbWFnZUNhcHR1cmVJbnRlcnZhbDogJHt0aGlzLl9taW5JbWFnZUNhcHR1cmVJbnRlcnZhbH1gKTtcclxuICAgICAgICAvLyAgICAgICBDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZyhgYXZlcmFnZVByb2Nlc3NpbnRUaW1lQXJyYXk6ICR7dGhpcy5fYXZlcmFnZVByb2Nlc3NpbnRUaW1lQXJyYXl9YCk7XHJcbiAgICAgICAgLy8gICAgICAgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYGF2ZXJhZ2VGZXRjaEltYWdlVGltZUFycmF5OiAke3RoaXMuX2F2ZXJhZ2VGZXRjaEltYWdlVGltZUFycmF5fWApO1xyXG4gICAgICAgIC8vICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBhdmVyYWdlVGltZTogJHt0aGlzLl9hdmVyYWdlVGltZX1gKTtcclxuICAgICAgICAvLyAgICAgfTtcclxuICAgICAgICAvLyAgIH1cclxuICAgICAgICAvLyAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykge1xyXG4gICAgICAgIC8vICAgICBjb25zdCB0aW1lID0gRGF0ZS5ub3coKSAtIGZldGNoSW1hZ2VDYWxjdWxhdGVTdGFydFRpbWU7XHJcbiAgICAgICAgLy8gICAgIGlmICh0aW1lID4gMTApIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBmZXRjaCBpbWFnZSBjYWxjdWxhdGUgdGltZTogJHt0aW1lfWApXHJcbiAgICAgICAgLy8gICB9O1xyXG4gICAgICAgIC8vICAgaWYgKENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKSBDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZyhgdGltZSBmaW5pc2ggZGVjb2RlOiAke0RhdGUubm93KCl9YClcclxuICAgICAgICAvLyAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYG1haW4gdGltZTogJHtEYXRlLm5vdygpIC0gY2FwdHVyZVN0YXJ0VGltZX1gKTtcclxuICAgICAgICAvLyAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XCIpO1xyXG4gICAgICAgIC8vICAgdGhpcy5fbG9vcFJlYWRWaWRlb1RpbWVvdXRJZCAmJiBjbGVhclRpbWVvdXQodGhpcy5fbG9vcFJlYWRWaWRlb1RpbWVvdXRJZCk7XHJcbiAgICAgICAgLy8gICBpZiAodGhpcy5fbWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwgPiAwICYmIHRoaXMuX21pbkltYWdlQ2FwdHVyZUludGVydmFsID49IHRoaXMuX2F2ZXJhZ2VUaW1lKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuX2xvb3BSZWFkVmlkZW9UaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAvLyAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvKHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgLy8gICAgIH0sIHRoaXMuX21pbkltYWdlQ2FwdHVyZUludGVydmFsIC0gdGhpcy5fYXZlcmFnZVRpbWUpO1xyXG4gICAgICAgIC8vICAgfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5fbG9vcFJlYWRWaWRlb1RpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICAgIHRoaXMuX2xvb3BSZWFkVmlkZW8odGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAvLyAgICAgfSwgTWF0aC5tYXgodGhpcy5fbWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwsIDApKTtcclxuICAgICAgICAvLyAgIH1cclxuICAgICAgICAvLyB9IGNhdGNoIChleCkge1xyXG4gICAgICAgIC8vICAgdGhpcy4jaXNhLnN0b3BGZXRjaGluZygpO1xyXG4gICAgICAgIC8vICAgdGhpcy5fbG9vcFJlYWRWaWRlb1RpbWVvdXRJZCAmJiBjbGVhclRpbWVvdXQodGhpcy5fbG9vcFJlYWRWaWRlb1RpbWVvdXRJZCk7XHJcbiAgICAgICAgLy8gICB0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuI2lzYS5zdGFydEZldGNoaW5nKCk7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuX2xvb3BSZWFkVmlkZW8odGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAvLyAgIH0sIE1hdGgubWF4KHRoaXMuX21pbkltYWdlQ2FwdHVyZUludGVydmFsLCAxMDAwKSk7XHJcbiAgICAgICAgLy8gICBpZiAoIShleC5tZXNzYWdlID09PSAncGxhdGZvcm0gZXJyb3InKSkge1xyXG4gICAgICAgIC8vICAgICB0aHJvdyBleDtcclxuICAgICAgICAvLyAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgY29uc3QgY2FwdHVyZVN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgdGhpcy5fY2FwdHVyZURzaW1hZ2UodGhpcy5fZHNJbWFnZSwgdGVtcGxhdGVOYW1lKS50aGVuKGFzeW5jIChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgaWYgKENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKVxyXG4gICAgICAgICAgICAgICAgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYG5vIGpzIGhhbmRsZSB0aW1lOiAke0RhdGUubm93KCkgLSBjYXB0dXJlU3RhcnRUaW1lfWApO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faXNQYXVzZVNjYW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlUnVuQ3Vycm5ldEZ1bmModGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXN1bHQub3JpZ2luYWxJbWFnZVRhZyA9IHRoaXMuX2RzSW1hZ2UudGFnID8gdGhpcy5fZHNJbWFnZS50YWcgOiBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHRDb21tb25QYXJ0ID0ge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxJbWFnZUhhc2hJZDogcmVzdWx0Lm9yaWdpbmFsSW1hZ2VIYXNoSWQsXHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEltYWdlVGFnOiByZXN1bHQub3JpZ2luYWxJbWFnZVRhZyxcclxuICAgICAgICAgICAgICAgIGVycm9yQ29kZTogcmVzdWx0LmVycm9yQ29kZSxcclxuICAgICAgICAgICAgICAgIGVycm9yU3RyaW5nOiByZXN1bHQuZXJyb3JTdHJpbmdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZm9yIChsZXQgcmVjZWl2ZXIgb2YgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRSZWNlaXZlclNldCwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVjZWl2ZXIuaXNEY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkcmF3VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXIub25DYXB0dXJlZFJlc3VsdFJlY2VpdmVkKHJlc3VsdCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0RldGVjdFZlcmlmeU9wZW46IHRoaXMuX2lzT3BlbkRldGVjdFZlcmlmeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOb3JtYWxpemVWZXJpZnlPcGVuOiB0aGlzLl9pc09wZW5Ob3JtYWxpemVWZXJpZnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmFyY29kZVZlcmlmeU9wZW46IHRoaXMuX2lzT3BlbkJhcmNvZGVWZXJpZnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTGFiZWxWZXJpZnlPcGVuOiB0aGlzLl9pc09wZW5MYWJlbFZlcmlmeSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGUubm93KCkgLSBkcmF3VGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWUgPiAxMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBkcmF3IHJlc3VsdCB0aW1lOiAke3RpbWV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIub25EZWNvZGVkQmFyY29kZXNSZWNlaXZlZCAmJiByZXN1bHQuYmFyY29kZVJlc3VsdEl0ZW1zICYmIHJlY2VpdmVyLm9uRGVjb2RlZEJhcmNvZGVzUmVjZWl2ZWQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXN1bHRDb21tb25QYXJ0KSwgeyBiYXJjb2RlUmVzdWx0SXRlbXM6IHJlc3VsdC5iYXJjb2RlUmVzdWx0SXRlbXMuZmlsdGVyKChpdGVtKSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlcjsgfSkgfSkpO1xyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIub25SZWNvZ25pemVkVGV4dExpbmVzUmVjZWl2ZWQgJiYgcmVzdWx0LnRleHRMaW5lUmVzdWx0SXRlbXMgJiYgcmVjZWl2ZXIub25SZWNvZ25pemVkVGV4dExpbmVzUmVjZWl2ZWQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXN1bHRDb21tb25QYXJ0KSwgeyB0ZXh0TGluZVJlc3VsdEl0ZW1zOiByZXN1bHQudGV4dExpbmVSZXN1bHRJdGVtcy5maWx0ZXIoKGl0ZW0pID0+IHsgcmV0dXJuICFpdGVtLmlzRmlsdGVyOyB9KSB9KSk7XHJcbiAgICAgICAgICAgICAgICByZWNlaXZlci5vbkRldGVjdGVkUXVhZHNSZWNlaXZlZCAmJiByZXN1bHQuZGV0ZWN0ZWRRdWFkUmVzdWx0SXRlbXMgJiYgcmVjZWl2ZXIub25EZXRlY3RlZFF1YWRzUmVjZWl2ZWQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXN1bHRDb21tb25QYXJ0KSwgeyBkZXRlY3RlZFF1YWRSZXN1bHRJdGVtczogcmVzdWx0LmRldGVjdGVkUXVhZFJlc3VsdEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4geyByZXR1cm4gIWl0ZW0uaXNGaWx0ZXI7IH0pIH0pKTtcclxuICAgICAgICAgICAgICAgIHJlY2VpdmVyLm9uTm9ybWFsaXplZEltYWdlc1JlY2VpdmVkICYmIHJlc3VsdC5ub3JtYWxpemVkSW1hZ2VSZXN1bHRJdGVtcyAmJiByZWNlaXZlci5vbk5vcm1hbGl6ZWRJbWFnZXNSZWNlaXZlZChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3VsdENvbW1vblBhcnQpLCB7IG5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zOiByZXN1bHQubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMuZmlsdGVyKChpdGVtKSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlcjsgfSkgfSkpO1xyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIub25QYXJzZWRSZXN1bHRzUmVjZWl2ZWQgJiYgcmVzdWx0LnBhcnNlZFJlc3VsdEl0ZW1zICYmIHJlY2VpdmVyLm9uUGFyc2VkUmVzdWx0c1JlY2VpdmVkKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzdWx0Q29tbW9uUGFydCksIHsgcGFyc2VkUmVzdWx0SXRlbXM6IHJlc3VsdC5wYXJzZWRSZXN1bHRJdGVtcy5maWx0ZXIoKGl0ZW0pID0+IHsgcmV0dXJuICFpdGVtLmlzRmlsdGVyOyB9KSB9KSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVjZWl2ZXIub25DYXB0dXJlZFJlc3VsdFJlY2VpdmVkICYmICFyZWNlaXZlci5pc0RjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pdGVtcyA9IHJlc3VsdC5pdGVtcy5maWx0ZXIoKGl0ZW0pID0+IHsgcmV0dXJuICFpdGVtLmlzRmlsdGVyOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmJhcmNvZGVSZXN1bHRJdGVtcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmJhcmNvZGVSZXN1bHRJdGVtcyA9IHJlc3VsdC5iYXJjb2RlUmVzdWx0SXRlbXMuZmlsdGVyKChpdGVtKSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlcjsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC50ZXh0TGluZVJlc3VsdEl0ZW1zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudGV4dExpbmVSZXN1bHRJdGVtcyA9IHJlc3VsdC50ZXh0TGluZVJlc3VsdEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4geyByZXR1cm4gIWl0ZW0uaXNGaWx0ZXI7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZGV0ZWN0ZWRRdWFkUmVzdWx0SXRlbXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5kZXRlY3RlZFF1YWRSZXN1bHRJdGVtcyA9IHJlc3VsdC5kZXRlY3RlZFF1YWRSZXN1bHRJdGVtcy5maWx0ZXIoKGl0ZW0pID0+IHsgcmV0dXJuICFpdGVtLmlzRmlsdGVyOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMgPSByZXN1bHQubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMuZmlsdGVyKChpdGVtKSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlcjsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5wYXJzZWRSZXN1bHRJdGVtcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnBhcnNlZFJlc3VsdEl0ZW1zID0gcmVzdWx0LnBhcnNlZFJlc3VsdEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4geyByZXR1cm4gIWl0ZW0uaXNGaWx0ZXI7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyLm9uQ2FwdHVyZWRSZXN1bHRSZWNlaXZlZChyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGZldGNoSW1hZ2VDYWxjdWxhdGVTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2F2ZXJhZ2VQcm9jZXNzaW50VGltZUFycmF5Lmxlbmd0aCA9PT0gNSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdmVyYWdlUHJvY2Vzc2ludFRpbWVBcnJheS5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2F2ZXJhZ2VGZXRjaEltYWdlVGltZUFycmF5Lmxlbmd0aCA9PT0gNSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdmVyYWdlRmV0Y2hJbWFnZVRpbWVBcnJheS5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYXZlcmFnZVByb2Nlc3NpbnRUaW1lQXJyYXkucHVzaChEYXRlLm5vdygpIC0gY2FwdHVyZVN0YXJ0VGltZSk7XHJcbiAgICAgICAgICAgICAgICAvL3RoaXMuX2F2ZXJhZ2VUaW1lID0gdGhpcy5fYXZlcmFnZVByb2Nlc3NpbnRUaW1lQXJyYXkucmVkdWNlKCh0aW1lLCB2YWx1ZSkgPT4gdGltZSArIHZhbHVlLCAwKSAvIHRoaXMuX2F2ZXJhZ2VQcm9jZXNzaW50VGltZUFycmF5Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2F2ZXJhZ2VGZXRjaEltYWdlVGltZUFycmF5LnB1c2goKHRoaXMuX2RzSW1hZ2UgJiYgdGhpcy5fZHNJbWFnZS50YWcgPyB0aGlzLl9kc0ltYWdlLnRhZy50aW1lU3BlbnQgOiAwKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hdmVyYWdlVGltZSA9IE1hdGgubWluKC4uLnRoaXMuX2F2ZXJhZ2VQcm9jZXNzaW50VGltZUFycmF5KSAtIE1hdGgubWF4KC4uLnRoaXMuX2F2ZXJhZ2VGZXRjaEltYWdlVGltZUFycmF5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2F2ZXJhZ2VUaW1lID0gdGhpcy5fYXZlcmFnZVRpbWUgPiAwID8gdGhpcy5fYXZlcmFnZVRpbWUgOiAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYG1pbkltYWdlQ2FwdHVyZUludGVydmFsOiAke3RoaXMuX21pbkltYWdlQ2FwdHVyZUludGVydmFsfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBhdmVyYWdlUHJvY2Vzc2ludFRpbWVBcnJheTogJHt0aGlzLl9hdmVyYWdlUHJvY2Vzc2ludFRpbWVBcnJheX1gKTtcclxuICAgICAgICAgICAgICAgICAgICBDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZyhgYXZlcmFnZUZldGNoSW1hZ2VUaW1lQXJyYXk6ICR7dGhpcy5fYXZlcmFnZUZldGNoSW1hZ2VUaW1lQXJyYXl9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYGF2ZXJhZ2VUaW1lOiAke3RoaXMuX2F2ZXJhZ2VUaW1lfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGUubm93KCkgLSBmZXRjaEltYWdlQ2FsY3VsYXRlU3RhcnRUaW1lO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpbWUgPiAxMClcclxuICAgICAgICAgICAgICAgICAgICBDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZyhgZmV0Y2ggaW1hZ2UgY2FsY3VsYXRlIHRpbWU6ICR7dGltZX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2cpXHJcbiAgICAgICAgICAgICAgICBDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZyhgdGltZSBmaW5pc2ggZGVjb2RlOiAke0RhdGUubm93KCl9YCk7XHJcbiAgICAgICAgICAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZylcclxuICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBtYWluIHRpbWU6ICR7RGF0ZS5ub3coKSAtIGNhcHR1cmVTdGFydFRpbWV9YCk7XHJcbiAgICAgICAgICAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZylcclxuICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKFwiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVwiKTtcclxuICAgICAgICAgICAgdGhpcy5fbG9vcFJlYWRWaWRlb1RpbWVvdXRJZCAmJiBjbGVhclRpbWVvdXQodGhpcy5fbG9vcFJlYWRWaWRlb1RpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9taW5JbWFnZUNhcHR1cmVJbnRlcnZhbCA+IDAgJiYgdGhpcy5fbWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwgPj0gdGhpcy5fYXZlcmFnZVRpbWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xvb3BSZWFkVmlkZW9UaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvKHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9LCB0aGlzLl9taW5JbWFnZUNhcHR1cmVJbnRlcnZhbCAtIHRoaXMuX2F2ZXJhZ2VUaW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xvb3BSZWFkVmlkZW9UaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvKHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9LCBNYXRoLm1heCh0aGlzLl9taW5JbWFnZUNhcHR1cmVJbnRlcnZhbCwgMCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuY2F0Y2goKGV4KSA9PiB7XHJcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuc3RvcEZldGNoaW5nKCk7XHJcbiAgICAgICAgICAgIGlmIChleC5lcnJvckNvZGUgJiYgZXguZXJyb3JDb2RlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkICYmIGNsZWFyVGltZW91dCh0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xvb3BSZWFkVmlkZW9UaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLnN0YXJ0RmV0Y2hpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvKHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9LCBNYXRoLm1heCh0aGlzLl9taW5JbWFnZUNhcHR1cmVJbnRlcnZhbCwgMTAwMCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghKGV4Lm1lc3NhZ2UgPT09ICdwbGF0Zm9ybSBlcnJvcicpKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhyb3cgZXg7IH0sIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfcmVSdW5DdXJybmV0RnVuYyh0ZW1wbGF0ZU5hbWUpIHtcclxuICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkICYmIGNsZWFyVGltZW91dCh0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkKTtcclxuICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xvb3BSZWFkVmlkZW8odGVtcGxhdGVOYW1lKTtcclxuICAgICAgICB9LCAwKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUHJvY2Vzc2VzIGEgc2luZ2xlIGltYWdlIG9yIGEgZmlsZSBjb250YWluaW5nIGEgc2luZ2xlIGltYWdlIHRvIGRlcml2ZSBpbXBvcnRhbnQgaW5mb3JtYXRpb24uXHJcbiAgICAgKiBAcGFyYW0gaW1hZ2VPckZpbGUgU3BlY2lmaWVzIHRoZSBpbWFnZSBvciBmaWxlIHRvIGJlIHByb2Nlc3NlZC4gVGhlIGZvbGxvd2luZyBkYXRhIHR5cGVzIGFyZSBhY2NlcHRlZDogYEJsb2JgLCBgSFRNTEltYWdlRWxlbWVudGAsIGBIVE1MQ2FudmFzRWxlbWVudGAsIGBIVE1MVmlkZW9FbGVtZW50YCwgYERTSW1hZ2VEYXRhYCwgYHN0cmluZ2AuXHJcbiAgICAgKiBAcGFyYW0gdGVtcGxhdGVOYW1lIFtPcHRpb25hbF0gU3BlY2lmaWVzIGEgXCJDYXB0dXJlVmlzaW9uVGVtcGxhdGVcIiB0byB1c2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhIGBDYXB0dXJlZFJlc3VsdGAgb2JqZWN0IHdoaWNoIGNvbnRhaW5zIHRoZSBkZXJpdmVkIGluZm9ybWF0aW9uIGZyb20gdGhlIGltYWdlIHByb2Nlc3NlZC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgY2FwdHVyZShpbWFnZU9yRmlsZSwgdGVtcGxhdGVOYW1lKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICBjaGVja0lzRGlzcG9zZWQodGhpcyk7XHJcbiAgICAgICAgaWYgKCF0ZW1wbGF0ZU5hbWUpXHJcbiAgICAgICAgICAgIHRlbXBsYXRlTmFtZSA9IHRoaXMuX2N1cnJlbnRTZXR0aW5ncy5DYXB0dXJlVmlzaW9uVGVtcGxhdGVzWzBdLk5hbWU7XHJcbiAgICAgICAgY29uc3QgdGFza3MgPSBhd2FpdCB0aGlzLmNvbnRhaW5zVGFzayh0ZW1wbGF0ZU5hbWUpO1xyXG4gICAgICAgIGF3YWl0IGxvYWRXYXNtKHRhc2tzKTtcclxuICAgICAgICBpZiAodGFza3MuaW5jbHVkZXMoXCJkbHJcIikgJiYgISgoX2EgPSBtYXBQYWNrYWdlUmVnaXN0ZXIuZGxyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYkxvYWRDb25mdXNhYmxlQ2hhcnNEYXRhKSkge1xyXG4gICAgICAgICAgICBjb25zdCBfZW5naW5lUmVzb3VyY2VQYXRocyA9IGhhbmRsZUVuZ2luZVJlc291cmNlUGF0aHMoQ29yZU1vZHVsZS5lbmdpbmVSZXNvdXJjZVBhdGhzLCBhdXRvRGlzY292ZXJ5UGF0aHMpO1xyXG4gICAgICAgICAgICBhd2FpdCAoKF9iID0gbWFwUGFja2FnZVJlZ2lzdGVyLmRscikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmxvYWRSZWNvZ25pdGlvbkRhdGEoXCJDb25mdXNhYmxlQ2hhcnNcIiwgX2VuZ2luZVJlc291cmNlUGF0aHMuZGxyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCByZXN1bHQ7XHJcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc1NjYW5uZXIsIGZhbHNlLCBcImZcIik7XHJcbiAgICAgICAgaWYgKF9pc0RTSW1hZ2VEYXRhKGltYWdlT3JGaWxlKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLl9jYXB0dXJlRHNpbWFnZShpbWFnZU9yRmlsZSwgdGVtcGxhdGVOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGltYWdlT3JGaWxlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIGlmIChpbWFnZU9yRmlsZS5zdWJzdHJpbmcoMCwgMTEpID09IFwiZGF0YTppbWFnZS9cIikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5fY2FwdHVyZUJhc2U2NChpbWFnZU9yRmlsZSwgdGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX2NhcHR1cmVVcmwoaW1hZ2VPckZpbGUsIHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaW1hZ2VPckZpbGUgaW5zdGFuY2VvZiBCbG9iKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX2NhcHR1cmVCbG9iKGltYWdlT3JGaWxlLCB0ZW1wbGF0ZU5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpbWFnZU9yRmlsZSBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5fY2FwdHVyZUltYWdlKGltYWdlT3JGaWxlLCB0ZW1wbGF0ZU5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpbWFnZU9yRmlsZSBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX2NhcHR1cmVDYW52YXMoaW1hZ2VPckZpbGUsIHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGltYWdlT3JGaWxlIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLl9jYXB0dXJlVmlkZW8oaW1hZ2VPckZpbGUsIHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiJ2NhcHR1cmUoaW1hZ2VPckZpbGUsIHRlbXBsYXRlTmFtZSknOiBUeXBlIG9mICdpbWFnZU9yRmlsZScgc2hvdWxkIGJlICdEU0ltYWdlRGF0YScsICdVcmwnLCAnQmFzZTY0JywgJ0Jsb2InLCAnSFRNTEltYWdlRWxlbWVudCcsICdIVE1MQ2FudmFzRWxlbWVudCcsICdIVE1MVmlkZW9FbGVtZW50Jy5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICBhc3luYyBfY2FwdHVyZURzaW1hZ2UoaW1hZ2VPckZpbGUsIHRlbXBsYXRlTmFtZSkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9jYXB0dXJlSW5Xb3JrZXIoaW1hZ2VPckZpbGUsIHRlbXBsYXRlTmFtZSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfY2FwdHVyZVVybChpbWFnZU9yRmlsZSwgdGVtcGxhdGVOYW1lKSB7XHJcbiAgICAgICAgbGV0IGJsb2IgPSBhd2FpdCByZXF1ZXN0UmVzb3VyY2UoaW1hZ2VPckZpbGUsIFwiYmxvYlwiKTtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fY2FwdHVyZUJsb2IoYmxvYiwgdGVtcGxhdGVOYW1lKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9jYXB0dXJlQmFzZTY0KGJhc2U2NFN0ciwgdGVtcGxhdGVOYW1lKSB7XHJcbiAgICAgICAgYmFzZTY0U3RyID0gYmFzZTY0U3RyLnN1YnN0cmluZyhiYXNlNjRTdHIuaW5kZXhPZignLCcpICsgMSk7XHJcbiAgICAgICAgbGV0IGJpbmFyeVN0ciA9IGF0b2IoYmFzZTY0U3RyKTtcclxuICAgICAgICBsZXQgbiA9IGJpbmFyeVN0ci5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHU4YXJyID0gbmV3IFVpbnQ4QXJyYXkobik7XHJcbiAgICAgICAgd2hpbGUgKG4tLSkge1xyXG4gICAgICAgICAgICB1OGFycltuXSA9IGJpbmFyeVN0ci5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fY2FwdHVyZUJsb2IobmV3IEJsb2IoW3U4YXJyXSksIHRlbXBsYXRlTmFtZSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfY2FwdHVyZUJsb2IoaW1hZ2VPckZpbGUsIHRlbXBsYXRlTmFtZSkge1xyXG4gICAgICAgIGNvbnN0IHVzZU9ianVybFRvRHJhd0Jsb2JUb0ltZyA9IGFzeW5jIGZ1bmN0aW9uIChibG9iKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocnMsIHJqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgb2JqVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuICAgICAgICAgICAgICAgIGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2Uuc3JjID0gb2JqVXJsO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2Uub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoaW1hZ2UuZGJyT2JqVXJsKTsgLy8gcmVsZXNlIG1lbW9yeVxyXG4gICAgICAgICAgICAgICAgICAgIHJzKGltYWdlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpbWFnZS5vbmVycm9yID0gZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJqKG5ldyBFcnJvcihcIkNhbid0IGNvbnZlcnQgYmxvYiB0byBpbWFnZSA6IFwiICsgKGV2IGluc3RhbmNlb2YgRXZlbnQgPyBldi50eXBlIDogZXYpKSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGxldCBpbWFnZUJpdG1hcCA9IG51bGw7XHJcbiAgICAgICAgbGV0IGltZyA9IG51bGw7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjcmVhdGVJbWFnZUJpdG1hcCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VCaXRtYXAgPSBhd2FpdCBjcmVhdGVJbWFnZUJpdG1hcChpbWFnZU9yRmlsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGVJbWFnZUJpdG1hcCBtYXliZSBmYWlsIGluIGEgbG90IG9mIHNlbnNlXHJcbiAgICAgICAgICAgICAgICAvLyBhbHRob3VnaCBvYmp1cmwgY2FuIHBhc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWltYWdlQml0bWFwKSB7XHJcbiAgICAgICAgICAgIGltZyA9IGF3YWl0IHVzZU9ianVybFRvRHJhd0Jsb2JUb0ltZyhpbWFnZU9yRmlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCByZXN1bHRzID0gYXdhaXQgdGhpcy5fY2FwdHVyZUltYWdlKGltYWdlQml0bWFwIHx8IGltZywgdGVtcGxhdGVOYW1lKTtcclxuICAgICAgICBpZiAoaW1hZ2VCaXRtYXApIHtcclxuICAgICAgICAgICAgaW1hZ2VCaXRtYXAuY2xvc2UoKTtcclxuICAgICAgICB9IC8vIHJlbGVhc2UgbWVtb3J5XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfY2FwdHVyZUltYWdlKGltYWdlLCB0ZW1wbGF0ZU5hbWUpIHtcclxuICAgICAgICBsZXQgaW1nVyA9IGltYWdlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCA/IGltYWdlLm5hdHVyYWxXaWR0aCA6IGltYWdlLndpZHRoO1xyXG4gICAgICAgIGxldCBpbWdIID0gaW1hZ2UgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50ID8gaW1hZ2UubmF0dXJhbEhlaWdodCA6IGltYWdlLmhlaWdodDtcclxuICAgICAgICBsZXQgbWF4TmF0dXJhbFdIID0gTWF0aC5tYXgoaW1nVywgaW1nSCk7XHJcbiAgICAgICAgbGV0IGFjY2VwdFcsIGFjY2VwdEg7XHJcbiAgICAgICAgaWYgKG1heE5hdHVyYWxXSCA+IHRoaXMubWF4Q3ZzU2lkZUxlbmd0aCkge1xyXG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2NvbXByZXNzUmF0ZSwgdGhpcy5tYXhDdnNTaWRlTGVuZ3RoIC8gbWF4TmF0dXJhbFdILCBcImZcIik7XHJcbiAgICAgICAgICAgIGFjY2VwdFcgPSBNYXRoLnJvdW5kKGltZ1cgKiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2NvbXByZXNzUmF0ZSwgXCJmXCIpKTtcclxuICAgICAgICAgICAgYWNjZXB0SCA9IE1hdGgucm91bmQoaW1nSCAqIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY29tcHJlc3NSYXRlLCBcImZcIikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYWNjZXB0VyA9IGltZ1c7XHJcbiAgICAgICAgICAgIGFjY2VwdEggPSBpbWdIO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIV9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY2FudmFzLCBcImZcIikpIHtcclxuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9jYW52YXMsIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLCBcImZcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGN2cyA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY2FudmFzLCBcImZcIik7XHJcbiAgICAgICAgaWYgKGN2cy53aWR0aCAhPT0gYWNjZXB0VyB8fCBjdnMuaGVpZ2h0ICE9PSBhY2NlcHRIKSB7XHJcbiAgICAgICAgICAgIGN2cy53aWR0aCA9IGFjY2VwdFc7XHJcbiAgICAgICAgICAgIGN2cy5oZWlnaHQgPSBhY2NlcHRIO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWN2cy5jdHgyZCkge1xyXG4gICAgICAgICAgICBjdnMuY3R4MmQgPSBjdnMuZ2V0Q29udGV4dCgnMmQnLCB7IHdpbGxSZWFkRnJlcXVlbnRseTogdHJ1ZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY3R4ID0gY3ZzLmN0eDJkO1xyXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDAsIGltZ1csIGltZ0gsIDAsIDAsIGFjY2VwdFcsIGFjY2VwdEgpO1xyXG4gICAgICAgIGlmIChpbWFnZS5kYnJPYmpVcmwpIHtcclxuICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChpbWFnZS5kYnJPYmpVcmwpOyAvLyByZWxlc2UgbWVtb3J5XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9jYXB0dXJlQ2FudmFzKGN2cywgdGVtcGxhdGVOYW1lKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9jYXB0dXJlQ2FudmFzKGNhbnZhcywgdGVtcGxhdGVOYW1lKSB7XHJcbiAgICAgICAgaWYgKGNhbnZhcy5jcm9zc09yaWdpbiAmJiBcImFub255bW91c1wiICE9IGNhbnZhcy5jcm9zc09yaWdpbikgeyAvLyBjYW52YXMgaGFzIGNyb3NzT3JpZ2luIHRvIGRldGVjdCBpZiBjb3JzLCBpcyBuYXRpdmUgYXBpXHJcbiAgICAgICAgICAgIHRocm93IFwiY29yc1wiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoW2NhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodF0uaW5jbHVkZXMoMCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFRoZSB3aWR0aCBvciBoZWlnaHQgb2YgdGhlICdjYW52YXMnIGlzIDAuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5jdHgyZCB8fCBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIsIHsgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlIH0pO1xyXG4gICAgICAgIGNvbnN0IGltZ0RhdGEgPSBVaW50OEFycmF5LmZyb20oY3R4LmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpLmRhdGEpO1xyXG4gICAgICAgIGNvbnN0IERzSW1hZ2VEYXRhID0ge1xyXG4gICAgICAgICAgICBieXRlczogaW1nRGF0YSxcclxuICAgICAgICAgICAgd2lkdGg6IGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgICBzdHJpZGU6IGNhbnZhcy53aWR0aCAqIDQsXHJcbiAgICAgICAgICAgIGZvcm1hdDogMTAsXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fY2FwdHVyZUluV29ya2VyKERzSW1hZ2VEYXRhLCB0ZW1wbGF0ZU5hbWUpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2NhcHR1cmVWaWRlbyh2aWRlbywgdGVtcGxhdGVOYW1lKSB7XHJcbiAgICAgICAgaWYgKHZpZGVvLmNyb3NzT3JpZ2luICYmIFwiYW5vbnltb3VzXCIgIT0gdmlkZW8uY3Jvc3NPcmlnaW4pIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJjb3JzXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbWdXID0gdmlkZW8udmlkZW9XaWR0aDtcclxuICAgICAgICBsZXQgaW1nSCA9IHZpZGVvLnZpZGVvSGVpZ2h0O1xyXG4gICAgICAgIGxldCBtYXhOYXR1cmFsV0ggPSBNYXRoLm1heChpbWdXLCBpbWdIKTtcclxuICAgICAgICBsZXQgYWNjZXB0VywgYWNjZXB0SDtcclxuICAgICAgICBpZiAobWF4TmF0dXJhbFdIID4gdGhpcy5tYXhDdnNTaWRlTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY29tcHJlc3NSYXRlLCB0aGlzLm1heEN2c1NpZGVMZW5ndGggLyBtYXhOYXR1cmFsV0gsIFwiZlwiKTtcclxuICAgICAgICAgICAgYWNjZXB0VyA9IE1hdGgucm91bmQoaW1nVyAqIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY29tcHJlc3NSYXRlLCBcImZcIikpO1xyXG4gICAgICAgICAgICBhY2NlcHRIID0gTWF0aC5yb3VuZChpbWdIICogX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9jb21wcmVzc1JhdGUsIFwiZlwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhY2NlcHRXID0gaW1nVztcclxuICAgICAgICAgICAgYWNjZXB0SCA9IGltZ0g7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9jYW52YXMsIFwiZlwiKSkge1xyXG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2NhbnZhcywgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyksIFwiZlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY3ZzID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9jYW52YXMsIFwiZlwiKTtcclxuICAgICAgICBpZiAoY3ZzLndpZHRoICE9PSBhY2NlcHRXIHx8IGN2cy5oZWlnaHQgIT09IGFjY2VwdEgpIHtcclxuICAgICAgICAgICAgY3ZzLndpZHRoID0gYWNjZXB0VztcclxuICAgICAgICAgICAgY3ZzLmhlaWdodCA9IGFjY2VwdEg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghY3ZzLmN0eDJkKSB7XHJcbiAgICAgICAgICAgIGN2cy5jdHgyZCA9IGN2cy5nZXRDb250ZXh0KCcyZCcsIHsgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjdHggPSBjdnMuY3R4MmQ7XHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZSh2aWRlbywgMCwgMCwgaW1nVywgaW1nSCwgMCwgMCwgYWNjZXB0VywgYWNjZXB0SCk7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2NhcHR1cmVDYW52YXMoY3ZzLCB0ZW1wbGF0ZU5hbWUpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2NhcHR1cmVJbldvcmtlcihEc0ltYWdlRGF0YSwgdGVtcGxhdGVOYW1lKSB7XHJcbiAgICAgICAgY29uc3QgeyBieXRlcywgd2lkdGgsIGhlaWdodCwgc3RyaWRlLCBmb3JtYXQgfSA9IERzSW1hZ2VEYXRhO1xyXG4gICAgICAgIGxldCB0YXNrSUQgPSBnZXROZXh0VGFza0lEKCk7XHJcbiAgICAgICAgY29uc3QgcCA9IG5ldyBNdXRhYmxlUHJvbWlzZSgpO1xyXG4gICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gYXN5bmMgKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2V0UmVzdWx0RnJvbVdvcmtlclRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYGdldCByZXN1bHQgdGltZSBmcm9tIHdvcmtlcjogJHtnZXRSZXN1bHRGcm9tV29ya2VyVGltZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICBDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZyhgd29ya2VyIHRvIG1haW4gdGltZSBjb25zdW1lOiAke2dldFJlc3VsdEZyb21Xb3JrZXJUaW1lIC0gYm9keS53b3JrZXJSZXR1cm5Nc2dUaW1lfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXB0dXJlUmVzdWx0ID0gYm9keS5jYXB0dXJlUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYXB0dXJlUmVzdWx0LmVycm9yQ29kZSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSBuZXcgRXJyb3IoY2FwdHVyZVJlc3VsdC5lcnJvclN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLmVycm9yQ29kZSA9IGNhcHR1cmVSZXN1bHQuZXJyb3JDb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBEc0ltYWdlRGF0YS5ieXRlcyA9IGJvZHkuYnl0ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBjYXB0dXJlUmVzdWx0Lml0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2NvbXByZXNzUmF0ZSwgXCJmXCIpICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJ0Q29vcmRpbmF0ZXMoaXRlbSwgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9jb21wcmVzc1JhdGUsIFwiZlwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUuQ1JJVF9PUklHSU5BTF9JTUFHRSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5pbWFnZURhdGEgPSBEc0ltYWdlRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLnR5cGUgPT09IEVudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfTk9STUFMSVpFRF9JTUFHRSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKF9hID0gbWFwUGFja2FnZVJlZ2lzdGVyLmRkbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmhhbmRsZU5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW0oaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS50eXBlID09PSBFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX1BBUlNFRF9SRVNVTFQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfYiA9IG1hcFBhY2thZ2VSZWdpc3Rlci5kY3ApID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5oYW5kbGVQYXJzZWRSZXN1bHRJdGVtKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzU2Nhbm5lciwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGZpbHRlciBvZiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Jlc3VsdEZpbHRlclNldCwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXIub25EZWNvZGVkQmFyY29kZXNSZWNlaXZlZChjYXB0dXJlUmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlci5vblJlY29nbml6ZWRUZXh0TGluZXNSZWNlaXZlZChjYXB0dXJlUmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlci5vbkRldGVjdGVkUXVhZHNSZWNlaXZlZChjYXB0dXJlUmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlci5vbk5vcm1hbGl6ZWRJbWFnZXNSZWNlaXZlZChjYXB0dXJlUmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzRm9yRHJhdyA9IGhhbmRsZVJlc3VsdEZvckRyYXcoY2FwdHVyZVJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c0ZvckRyYXcuYmFyY29kZVJlc3VsdEl0ZW1zLmxlbmd0aCAmJiAoY2FwdHVyZVJlc3VsdC5iYXJjb2RlUmVzdWx0SXRlbXMgPSByZXN1bHRzRm9yRHJhdy5iYXJjb2RlUmVzdWx0SXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNGb3JEcmF3LnRleHRMaW5lUmVzdWx0SXRlbXMubGVuZ3RoICYmIChjYXB0dXJlUmVzdWx0LnRleHRMaW5lUmVzdWx0SXRlbXMgPSByZXN1bHRzRm9yRHJhdy50ZXh0TGluZVJlc3VsdEl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzRm9yRHJhdy5kZXRlY3RlZFF1YWRSZXN1bHRJdGVtcy5sZW5ndGggJiYgKGNhcHR1cmVSZXN1bHQuZGV0ZWN0ZWRRdWFkUmVzdWx0SXRlbXMgPSByZXN1bHRzRm9yRHJhdy5kZXRlY3RlZFF1YWRSZXN1bHRJdGVtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c0ZvckRyYXcubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMubGVuZ3RoICYmIChjYXB0dXJlUmVzdWx0Lm5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zID0gcmVzdWx0c0ZvckRyYXcubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNGb3JEcmF3LnBhcnNlZFJlc3VsdEl0ZW1zLmxlbmd0aCAmJiAoY2FwdHVyZVJlc3VsdC5wYXJzZWRSZXN1bHRJdGVtcyA9IHJlc3VsdHNGb3JEcmF3LnBhcnNlZFJlc3VsdEl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzUGF1c2VTY2FuIHx8ICFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzU2Nhbm5lciwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlycyA9IGNhcHR1cmVSZXN1bHQuaW50ZXJtZWRpYXRlUmVzdWx0OyAvLyBpcnMgPT4gaW50ZXJtZWRpYXRlUmVzdWx0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXJyU2V0Q291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaXJyIG9mIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgXCJmXCIpLl9pbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlclNldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlyclNldENvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY2Igb2YgaXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYi5pbmZvLmNhbGxiYWNrTmFtZSA9PT0gXCJvblRhc2tSZXN1bHRzUmVjZWl2ZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdW5pdCBvZiBjYi5pbnRlcm1lZGlhdGVSZXN1bHRVbml0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXQub3JpZ2luYWxJbWFnZVRhZyA9IERzSW1hZ2VEYXRhLnRhZyA/IERzSW1hZ2VEYXRhLnRhZyA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXJyW2NiLmluZm8uY2FsbGJhY2tOYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlycltjYi5pbmZvLmNhbGxiYWNrTmFtZV0oeyBpbnRlcm1lZGlhdGVSZXN1bHRVbml0czogY2IuaW50ZXJtZWRpYXRlUmVzdWx0VW5pdHMgfSwgY2IuaW5mbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXJyW2NiLmluZm8uY2FsbGJhY2tOYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlycltjYi5pbmZvLmNhbGxiYWNrTmFtZV0oY2IucmVzdWx0LCBjYi5pbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXJyU2V0Q291bnQgPT09IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgXCJmXCIpLl9pbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlclNldC5zaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY2IuaW5mby5jYWxsYmFja05hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FwdHVyZVJlc3VsdCAmJiBjYXB0dXJlUmVzdWx0Lmhhc093blByb3BlcnR5KFwiaW50ZXJtZWRpYXRlUmVzdWx0XCIpICYmIGRlbGV0ZSBjYXB0dXJlUmVzdWx0LmludGVybWVkaWF0ZVJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2NvbXByZXNzUmF0ZSwgMCwgXCJmXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwLnJlc29sdmUoY2FwdHVyZVJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcC5yZWplY3QoZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGV4ID0gbmV3IEVycm9yKGJvZHkubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHAucmVqZWN0KGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKSB7XHJcbiAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBzZW5kIGJ1ZmZlciB0byB3b3JrZXI6ICR7RGF0ZS5ub3coKX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgdHlwZTogXCJjdnJfY2FwdHVyZVwiLFxyXG4gICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICBpbnN0YW5jZUlEOiB0aGlzLl9pbnN0YW5jZUlELFxyXG4gICAgICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICAgICAgICBieXRlcyxcclxuICAgICAgICAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgc3RyaWRlLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVOYW1lOiB0ZW1wbGF0ZU5hbWUgPyB0ZW1wbGF0ZU5hbWUgOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgaXNTY2FubmVyOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzU2Nhbm5lciwgXCJmXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBbYnl0ZXMuYnVmZmVyXSk7XHJcbiAgICAgICAgcmV0dXJuIHA7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICAvKipcclxuICAgICAqIENvbmZpZ3VyZXMgcnVudGltZSBzZXR0aW5ncyB1c2luZyBhIHByb3ZpZGVkIEpTT04gc3RyaW5nLCBhbiBvYmplY3QsIG9yIGEgVVJMIHBvaW50aW5nIHRvIGFuIG9iamVjdCwgd2hpY2ggY29udGFpbnMgc2V0dGluZ3MgZm9yIG9uZSBvciBtb3JlIGBDYXB0dXJlVmlzaW9uVGVtcGxhdGVzYC5cclxuICAgICAqIEBwYXJhbSBzZXR0aW5ncyBBIEpTT04gc3RyaW5nLCBhbiBvYmplY3QsIG9yIGEgVVJMIHBvaW50aW5nIHRvIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHNldHRpbmdzIGZvciBvbmUgb3IgbW9yZSBgQ2FwdHVyZVZpc2lvblRlbXBsYXRlc2AuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgb3BlcmF0aW9uIGhhcyBjb21wbGV0ZWQuIEl0IHByb3ZpZGVzIGFuIG9iamVjdCB0aGF0IGRlc2NyaWJlcyB0aGUgcmVzdWx0LlxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0U2V0dGluZ3Moc2V0dGluZ3MpIHtcclxuICAgICAgICBjaGVja0lzRGlzcG9zZWQodGhpcyk7XHJcbiAgICAgICAgaWYgKCFzZXR0aW5ncyB8fCAhW1wic3RyaW5nXCIsIFwib2JqZWN0XCJdLmluY2x1ZGVzKHR5cGVvZiBzZXR0aW5ncykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJJbnZhbGlkIHRlbXBsYXRlLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZXR0aW5ncyA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICBpZiAoIXNldHRpbmdzLnN0YXJ0c1dpdGgoXCJ7XCIpKSB7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncyA9IGF3YWl0IHJlcXVlc3RSZXNvdXJjZShzZXR0aW5ncywgXCJ0ZXh0XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRTZXR0aW5ncyA9IEpTT04ucGFyc2Uoc2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygc2V0dGluZ3MgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFNldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICAgICAgICAgIHNldHRpbmdzID0gSlNPTi5zdHJpbmdpZnkoc2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgICAgICBtYXBUYXNrQ2FsbEJhY2tbdGFza0lEXSA9IGFzeW5jIChib2R5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBKU09OLnBhcnNlKGJvZHkucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5leGNlcHRpb24gIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yID0gbmV3IEVycm9yKHJlc3BvbnNlLmRlc2NyaXB0aW9uID8gcmVzcG9uc2UuZGVzY3JpcHRpb24gOiBcIkluaXQgU2V0dGluZ3MgRmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IuZXJyb3JDb2RlID0gcmVzcG9uc2UuZXhjZXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmooZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbW9kdWxlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wbGF0ZU5hbWVzID0gSlNPTi5wYXJzZShzZXR0aW5ncykuQ2FwdHVyZVZpc2lvblRlbXBsYXRlcztcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlbXBsYXRlTmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRhc2tzID0gYXdhaXQgdGhpcy5jb250YWluc1Rhc2sodGVtcGxhdGVOYW1lc1tpXS5OYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlcyA9IG1vZHVsZXMuY29uY2F0KHRhc2tzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9hZFdhc20oWy4uLm5ldyBTZXQobW9kdWxlcyldKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc091dHB1dE9yaWdpbmFsSW1hZ2UgPSAodGhpcy5fY3VycmVudFNldHRpbmdzLkNhcHR1cmVWaXNpb25UZW1wbGF0ZXNbMF0uT3V0cHV0T3JpZ2luYWxJbWFnZSA9PT0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4LnN0YWNrID0gYm9keS5zdGFjayArICdcXG4nICsgZXguc3RhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJqKGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiY3ZyX2luaXRTZXR0aW5nc1wiLFxyXG4gICAgICAgICAgICAgICAgaWQ6IHRhc2tJRCxcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSUQ6IHRoaXMuX2luc3RhbmNlSUQsXHJcbiAgICAgICAgICAgICAgICBib2R5OiB7IHNldHRpbmdzIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgO1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHNldHRpbmdzIGZvciB0aGUgc3BlY2lmaWVkIGBDYXB0dXJlVmlzaW9uVGVtcGxhdGVgLlxyXG4gICAgICogQHBhcmFtIHRlbXBsYXRlTmFtZSBTcGVjaWZpZXMgYSBgQ2FwdHVyZVZpc2lvblRlbXBsYXRlYCBieSBpdHMgbmFtZS4gSWYgcGFzc2VkIFwiKlwiLCB0aGUgcmV0dXJuZWQgb2JqZWN0IHdpbGwgY29udGFpbiBhbGwgdGVtcGxhdGVzLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIG9iamVjdCB0aGF0IGNvbnRhaW5zIHNldHRpbmdzIGZvciB0aGUgc3BlY2lmaWVkIHRlbXBsYXRlIG9yIGFsbCB0ZW1wbGF0ZXMuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIG91dHB1dFNldHRpbmdzKHRlbXBsYXRlTmFtZSkge1xyXG4gICAgICAgIGNoZWNrSXNEaXNwb3NlZCh0aGlzKTtcclxuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgICAgICBtYXBUYXNrQ2FsbEJhY2tbdGFza0lEXSA9IGFzeW5jIChib2R5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBKU09OLnBhcnNlKGJvZHkuc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5lcnJvckNvZGUgIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yID0gbmV3IEVycm9yKHNldHRpbmdzLmVycm9yU3RyaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IuZXJyb3JDb2RlID0gc2V0dGluZ3MuZXJyb3JDb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmooZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2V0dGluZ3MuZXJyb3JDb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzZXR0aW5ncy5lcnJvclN0cmluZztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnMoc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV4ID0gbmV3IEVycm9yKGJvZHkubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXguc3RhY2sgPSBib2R5LnN0YWNrICsgJ1xcbicgKyBleC5zdGFjaztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmooZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJjdnJfb3V0cHV0U2V0dGluZ3NcIixcclxuICAgICAgICAgICAgICAgIGlkOiB0YXNrSUQsXHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlEOiB0aGlzLl9pbnN0YW5jZUlELFxyXG4gICAgICAgICAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlTmFtZTogdGVtcGxhdGVOYW1lID8gdGVtcGxhdGVOYW1lIDogXCIqXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhIEJsb2Igb2JqZWN0IG9yIGluaXRpYXRlcyBhIEpTT04gZmlsZSBkb3dubG9hZCBjb250YWluaW5nIHRoZSBzZXR0aW5ncyBmb3IgdGhlIHNwZWNpZmllZCBgQ2FwdHVyZVZpc2lvblRlbXBsYXRlYC5cclxuICAgICAqIEBwYXJhbSB0ZW1wbGF0ZU5hbWUgU3BlY2lmaWVzIGEgYENhcHR1cmVWaXNpb25UZW1wbGF0ZWAgYnkgaXRzIG5hbWUuIElmIHBhc3NlZCBcIipcIiwgdGhlIHJldHVybmVkIG9iamVjdCB3aWxsIGNvbnRhaW4gYWxsIHRlbXBsYXRlcy5cclxuICAgICAqIEBwYXJhbSBmaWxlTmFtZSBTcGVjaWZpZXMgdGhlIG5hbWUgb2YgdGhlIGZpbGUuXHJcbiAgICAgKiBAcGFyYW0gZG93bmxvYWQgQm9vbGVhbiB0aGF0IHNwZWNpZmllcyB3aGV0aGVyIHRvIGluaXRpYXRlcyBhIGZpbGUgZG93bmxvYWQuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgQmxvYiBvYmplY3QgdGhhdCBjb250YWlucyBzZXR0aW5ncyBmb3IgdGhlIHNwZWNpZmllZCB0ZW1wbGF0ZSBvciBhbGwgdGVtcGxhdGVzLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBvdXRwdXRTZXR0aW5nc1RvRmlsZSh0ZW1wbGF0ZU5hbWUsIGZpbGVOYW1lLCBkb3dubG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gYXdhaXQgdGhpcy5vdXRwdXRTZXR0aW5ncyh0ZW1wbGF0ZU5hbWUpO1xyXG4gICAgICAgIGNvbnN0IGpzb25CbG9iID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KHNldHRpbmdzLCBudWxsLCAyLCBmdW5jdGlvbiAoXywgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMildLCB7IHR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiIH0pO1xyXG4gICAgICAgIGlmIChkb3dubG9hZCkge1xyXG4gICAgICAgICAgICBjb25zdCBkb3dubG9hZExpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICAgICAgICAgICAgZG93bmxvYWRMaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGpzb25CbG9iKTtcclxuICAgICAgICAgICAgaWYgKGZpbGVOYW1lLmVuZHNXaXRoKFwiLmpzb25cIikpIHtcclxuICAgICAgICAgICAgICAgIGZpbGVOYW1lID0gZmlsZU5hbWUucmVwbGFjZShcIi5qc29uXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRvd25sb2FkTGluay5kb3dubG9hZCA9IGAke2ZpbGVOYW1lfS5qc29uYDtcclxuICAgICAgICAgICAgZG93bmxvYWRMaW5rLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGRvd25sb2FkTGluay5ocmVmKTtcclxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGRvd25sb2FkTGluay5jbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ganNvbkJsb2I7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlcyBhIEpTT04gb2JqZWN0IHRoYXQgY29udGFpbnMgc2ltcGxpZmllZCBzZXR0aW5ncyBmb3IgdGhlIHNwZWNpZmllZCBgQ2FwdHVyZVZpc2lvblRlbXBsYXRlYC5cclxuICAgICAqIEBwYXJhbSB0ZW1wbGF0ZU5hbWUgU3BlY2lmaWVzIGEgYENhcHR1cmVWaXNpb25UZW1wbGF0ZWAgYnkgaXRzIG5hbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhIEpTT04gb2JqZWN0LCBvZiB0eXBlIGBTaW1wbGlmaWVkQ2FwdHVyZVZpc2lvblNldHRpbmdzYCwgd2hpY2ggcmVwcmVzZW50cyB0aGUgc2ltcGxpZmllZCBzZXR0aW5ncyBmb3IgdGhlIHNwZWNpZmllZCB0ZW1wbGF0ZS5cclxuICAgICAqIEByZW1hcmtzIElmIHRoZSBzZXR0aW5ncyBvZiB0aGUgc3BlY2lmaWVkIHRlbXBsYXRlIGFyZSB0b28gY29tcGxleCwgd2UgY2Fubm90IGNyZWF0ZSBhIFNpbXBsaWZpZWRDYXB0dXJlVmlzaW9uU2V0dGluZ3MsIGFuZCBhcyBhIHJlc3VsdCwgaXQgd2lsbCByZXR1cm4gYW4gZXJyb3IuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldFNpbXBsaWZpZWRTZXR0aW5ncyh0ZW1wbGF0ZU5hbWUpIHtcclxuICAgICAgICBjaGVja0lzRGlzcG9zZWQodGhpcyk7XHJcbiAgICAgICAgaWYgKCF0ZW1wbGF0ZU5hbWUpXHJcbiAgICAgICAgICAgIHRlbXBsYXRlTmFtZSA9IHRoaXMuX2N1cnJlbnRTZXR0aW5ncy5DYXB0dXJlVmlzaW9uVGVtcGxhdGVzWzBdLk5hbWU7XHJcbiAgICAgICAgY29uc3QgdGFza3MgPSBhd2FpdCB0aGlzLmNvbnRhaW5zVGFzayh0ZW1wbGF0ZU5hbWUpO1xyXG4gICAgICAgIGF3YWl0IGxvYWRXYXNtKHRhc2tzKTtcclxuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgICAgICBtYXBUYXNrQ2FsbEJhY2tbdGFza0lEXSA9IGFzeW5jIChib2R5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShib2R5LnNldHRpbmdzLCAoaywgdikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoayA9PT0gXCJiYXJjb2RlRm9ybWF0SWRzXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBCaWdJbnQodik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm1pbkltYWdlQ2FwdHVyZUludGVydmFsID0gdGhpcy5fbWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9IG5ldyBFcnJvcihyZXN1bHQuY29kZVN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLmVycm9yQ29kZSA9IHJlc3VsdC5lcnJvckNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByaihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByZXN1bHQuY29kZTtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcmVzdWx0LmNvZGVTdHJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImN2cl9nZXRTaW1wbGlmaWVkU2V0dGluZ3NcIixcclxuICAgICAgICAgICAgICAgIGlkOiB0YXNrSUQsXHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlEOiB0aGlzLl9pbnN0YW5jZUlELFxyXG4gICAgICAgICAgICAgICAgYm9keTogeyB0ZW1wbGF0ZU5hbWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIDtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgc3BlY2lmaWVkIGBDYXB0dXJlVmlzaW9uVGVtcGxhdGVgIHdpdGggYW4gdXBkYXRlZCBgU2ltcGxpZmllZENhcHR1cmVWaXNpb25TZXR0aW5nc2Agb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIHRlbXBsYXRlTmFtZSBTcGVjaWZpZXMgYSBgQ2FwdHVyZVZpc2lvblRlbXBsYXRlYCBieSBpdHMgbmFtZS5cclxuICAgICAqIEBwYXJhbSBzZXR0aW5ncyBUaGUgYFNpbXBsaWZpZWRDYXB0dXJlVmlzaW9uU2V0dGluZ3NgIG9iamVjdCB0aGF0IGNvbnRhaW5zIHVwZGF0ZWQgc2V0dGluZ3MuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgb3BlcmF0aW9uIGhhcyBjb21wbGV0ZWQuIEl0IHByb3ZpZGVzIGFuIG9iamVjdCB0aGF0IGRlc2NyaWJlcyB0aGUgcmVzdWx0LlxyXG4gICAgICovXHJcbiAgICBhc3luYyB1cGRhdGVTZXR0aW5ncyh0ZW1wbGF0ZU5hbWUsIHNldHRpbmdzKSB7XHJcbiAgICAgICAgY2hlY2tJc0Rpc3Bvc2VkKHRoaXMpO1xyXG4gICAgICAgIGNvbnN0IHRhc2tzID0gYXdhaXQgdGhpcy5jb250YWluc1Rhc2sodGVtcGxhdGVOYW1lKTtcclxuICAgICAgICBhd2FpdCBsb2FkV2FzbSh0YXNrcyk7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChycywgcmopID0+IHtcclxuICAgICAgICAgICAgbGV0IHRhc2tJRCA9IGdldE5leHRUYXNrSUQoKTtcclxuICAgICAgICAgICAgbWFwVGFza0NhbGxCYWNrW3Rhc2tJRF0gPSBhc3luYyAoYm9keSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gSlNPTi5wYXJzZShib2R5LnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MubWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwgJiYgc2V0dGluZ3MubWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwgPj0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwgPSBzZXR0aW5ncy5taW5JbWFnZUNhcHR1cmVJbnRlcnZhbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNPdXRwdXRPcmlnaW5hbEltYWdlID0gYm9keS5pc091dHB1dE9yaWdpbmFsSW1hZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmV4Y2VwdGlvbiAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSBuZXcgRXJyb3IocmVzcG9uc2UuZGVzY3JpcHRpb24gPyByZXNwb25zZS5kZXNjcmlwdGlvbiA6IFwiVXBkYXRlIFNldHRpbmdzIEZhaWxlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLmVycm9yQ29kZSA9IHJlc3BvbnNlLmV4Y2VwdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJqKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudFNldHRpbmdzID0gYXdhaXQgdGhpcy5vdXRwdXRTZXR0aW5ncyhcIipcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4LnN0YWNrID0gYm9keS5zdGFjayArICdcXG4nICsgZXguc3RhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJqKGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiY3ZyX3VwZGF0ZVNldHRpbmdzXCIsXHJcbiAgICAgICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJRDogdGhpcy5faW5zdGFuY2VJRCxcclxuICAgICAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlc3RvcmVzIGFsbCBydW50aW1lIHNldHRpbmdzIHRvIHRoZWlyIG9yaWdpbmFsIGRlZmF1bHQgdmFsdWVzLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIG9wZXJhdGlvbiBoYXMgY29tcGxldGVkLiBJdCBwcm92aWRlcyBhbiBvYmplY3QgdGhhdCBkZXNjcmliZXMgdGhlIHJlc3VsdC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVzZXRTZXR0aW5ncygpIHtcclxuICAgICAgICBjaGVja0lzRGlzcG9zZWQodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChycywgcmopID0+IHtcclxuICAgICAgICAgICAgbGV0IHRhc2tJRCA9IGdldE5leHRUYXNrSUQoKTtcclxuICAgICAgICAgICAgbWFwVGFza0NhbGxCYWNrW3Rhc2tJRF0gPSBhc3luYyAoYm9keSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gSlNPTi5wYXJzZShib2R5LnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXhjZXB0aW9uICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9IG5ldyBFcnJvcihyZXNwb25zZS5kZXNjcmlwdGlvbiA/IHJlc3BvbnNlLmRlc2NyaXB0aW9uIDogXCJSZXNldCBTZXR0aW5ncyBGYWlsZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvci5lcnJvckNvZGUgPSByZXNwb25zZS5leGNlcHRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByaihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRTZXR0aW5ncyA9IGF3YWl0IHRoaXMub3V0cHV0U2V0dGluZ3MoXCIqXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBycyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImN2cl9yZXNldFNldHRpbmdzXCIsXHJcbiAgICAgICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJRDogdGhpcy5faW5zdGFuY2VJRFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIDtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiBvYmplY3QsIG9mIHR5cGUgYEJ1ZmZlcmVkSXRlbXNNYW5hZ2VyYCwgdGhhdCBtYW5hZ2VzIGJ1ZmZlcmVkIGl0ZW1zLlxyXG4gICAgICogQHJldHVybnMgVGhlIGBCdWZmZXJlZEl0ZW1zTWFuYWdlcmAgb2JqZWN0LlxyXG4gICAgICovXHJcbiAgICBnZXRCdWZmZXJlZEl0ZW1zTWFuYWdlcigpIHtcclxuICAgICAgICBpZiAoIV9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfYnVmZmVyZEl0ZW1zTWFuYWdlciwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfYnVmZmVyZEl0ZW1zTWFuYWdlciwgbmV3IEJ1ZmZlcmVkSXRlbXNNYW5hZ2VyKHRoaXMpLCBcImZcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2J1ZmZlcmRJdGVtc01hbmFnZXIsIFwiZlwiKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiBvYmplY3QsIG9mIHR5cGUgYEludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXJgLCB0aGF0IG1hbmFnZXMgaW50ZXJtZWRpYXRlIHJlc3VsdHMuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgVGhlIGBJbnRlcm1lZGlhdGVSZXN1bHRNYW5hZ2VyYCBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIGdldEludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXIoKSB7XHJcbiAgICAgICAgY2hlY2tJc0Rpc3Bvc2VkKHRoaXMpO1xyXG4gICAgICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pbm5lclVzZVRhZywgXCJmXCIpICYmIENvcmVNb2R1bGUuYlN1cHBvcnRJUlRNb2R1bGUgIT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGN1cnJlbnQgbGljZW5zZSBkb2VzIG5vdCBzdXBwb3J0IHRoZSB1c2Ugb2YgaW50ZXJtZWRpYXRlIHJlc3VsdHMuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIV9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgbmV3IEludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXIodGhpcyksIFwiZlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgXCJmXCIpO1xyXG4gICAgfVxyXG4gICAgO1xyXG4gICAgYXN5bmMgcGFyc2VSZXF1aXJlZFJlc291cmNlcyh0ZW1wbGF0ZU5hbWUpIHtcclxuICAgICAgICBjaGVja0lzRGlzcG9zZWQodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChycywgcmopID0+IHtcclxuICAgICAgICAgICAgbGV0IHRhc2tJRCA9IGdldE5leHRUYXNrSUQoKTtcclxuICAgICAgICAgICAgbWFwVGFza0NhbGxCYWNrW3Rhc2tJRF0gPSBhc3luYyAoYm9keSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBycyhKU09OLnBhcnNlKGJvZHkucmVzb3VyY2VzKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImN2cl9wYXJzZVJlcXVpcmVkUmVzb3VyY2VzXCIsXHJcbiAgICAgICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJRDogdGhpcy5faW5zdGFuY2VJRCxcclxuICAgICAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlbGVhc2VzIGFsbCByZXNvdXJjZXMgdXNlZCBieSB0aGUgYENhcHR1cmVWaXNpb25Sb3V0ZXJgIGluc3RhbmNlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHJlc291cmNlcyBoYXZlIGJlZW4gc3VjY2Vzc2Z1bGx5IHJlbGVhc2VkLiBJdCBkb2VzIG5vdCBwcm92aWRlIGFueSB2YWx1ZSB1cG9uIHJlc29sdXRpb24uXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgY2hlY2tJc0Rpc3Bvc2VkKHRoaXMpO1xyXG4gICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Byb21pc2VTdGFydFNjYW4sIFwiZlwiKSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BDYXB0dXJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIG51bGwsIFwiZlwiKTtcclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Jlc3VsdFJlY2VpdmVyU2V0LCBcImZcIikuY2xlYXIoKTtcclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYVN0YXRlTGlzdGVuZXJTZXQsIFwiZlwiKS5jbGVhcigpO1xyXG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0RmlsdGVyU2V0LCBcImZcIikuY2xlYXIoKTtcclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2ludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXIsIFwiZlwiKS5faW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXJTZXQuY2xlYXIoKTtcclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzRGVzdHJveWVkLCB0cnVlLCBcImZcIik7XHJcbiAgICAgICAgLy8gdGhpcy5fY2FwdHVyZVN0YXRlTGlzdGVuZXJTZXQuY2xlYXIoKTtcclxuICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2VzcykgO1xyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgZXguc3RhY2sgPSBib2R5LnN0YWNrICsgJ1xcbicgKyBleC5zdGFjaztcclxuICAgICAgICAgICAgICAgIHRocm93IGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICB0eXBlOiAnY3ZyX2Rpc3Bvc2UnLFxyXG4gICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICBpbnN0YW5jZUlEOiB0aGlzLl9pbnN0YW5jZUlEXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICAvKipcclxuICAgICAqIEZvciBEZWJ1Z1xyXG4gICAgICovXHJcbiAgICBfZ2V0SW50ZXJuYWxEYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlzYTogX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKSxcclxuICAgICAgICAgICAgcHJvbWlzZVN0YXJ0U2NhbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9wcm9taXNlU3RhcnRTY2FuLCBcImZcIiksXHJcbiAgICAgICAgICAgIGludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXI6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgXCJmXCIpLFxyXG4gICAgICAgICAgICBidWZmZXJkSXRlbXNNYW5hZ2VyOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2J1ZmZlcmRJdGVtc01hbmFnZXIsIFwiZlwiKSxcclxuICAgICAgICAgICAgcmVzdWx0UmVjZWl2ZXJTZXQ6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0UmVjZWl2ZXJTZXQsIFwiZlwiKSxcclxuICAgICAgICAgICAgaXNhU3RhdGVMaXN0ZW5lclNldDogX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2FTdGF0ZUxpc3RlbmVyU2V0LCBcImZcIiksXHJcbiAgICAgICAgICAgIHJlc3VsdEZpbHRlclNldDogX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRGaWx0ZXJTZXQsIFwiZlwiKSxcclxuICAgICAgICAgICAgY29tcHJlc3NSYXRlOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2NvbXByZXNzUmF0ZSwgXCJmXCIpLFxyXG4gICAgICAgICAgICBjYW52YXM6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY2FudmFzLCBcImZcIiksXHJcbiAgICAgICAgICAgIGlzU2Nhbm5lcjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc1NjYW5uZXIsIFwiZlwiKSxcclxuICAgICAgICAgICAgaW5uZXJVc2VUYWc6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW5uZXJVc2VUYWcsIFwiZlwiKSxcclxuICAgICAgICAgICAgaXNEZXN0cm95ZWQ6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNEZXN0cm95ZWQsIFwiZlwiKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0V2FzbUZpbHRlclN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocnMsIHJqKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0YXNrSUQgPSBnZXROZXh0VGFza0lEKCk7XHJcbiAgICAgICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gYXN5bmMgKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChib2R5LnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IEpTT04ucGFyc2UoYm9keS5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4LnN0YWNrID0gYm9keS5zdGFjayArICdcXG4nICsgZXguc3RhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJqKGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiY3ZyX2dldFdhc21GaWx0ZXJTdGF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgaWQ6IHRhc2tJRCxcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSUQ6IHRoaXMuX2luc3RhbmNlSURcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhID0gbmV3IFdlYWtNYXAoKSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY2FudmFzID0gbmV3IFdlYWtNYXAoKSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcHJvbWlzZVN0YXJ0U2NhbiA9IG5ldyBXZWFrTWFwKCksIF9DYXB0dXJlVmlzaW9uUm91dGVyX2ludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXIgPSBuZXcgV2Vha01hcCgpLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9idWZmZXJkSXRlbXNNYW5hZ2VyID0gbmV3IFdlYWtNYXAoKSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0UmVjZWl2ZXJTZXQgPSBuZXcgV2Vha01hcCgpLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2FTdGF0ZUxpc3RlbmVyU2V0ID0gbmV3IFdlYWtNYXAoKSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0RmlsdGVyU2V0ID0gbmV3IFdlYWtNYXAoKSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY29tcHJlc3NSYXRlID0gbmV3IFdlYWtNYXAoKSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNTY2FubmVyID0gbmV3IFdlYWtNYXAoKSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW5uZXJVc2VUYWcgPSBuZXcgV2Vha01hcCgpLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc0Rlc3Ryb3llZCA9IG5ldyBXZWFrTWFwKCk7XHJcbmFzeW5jIGZ1bmN0aW9uIF9lbmFibGVSZXN1bHRDcm9zc1ZlcmlmaWNhdGlvbihjdnIsIHZlcmlmaWNhdGlvbkVuYWJsZWQpIHtcclxuICAgIGNoZWNrSXNEaXNwb3NlZChjdnIpO1xyXG4gICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChycywgcmopID0+IHtcclxuICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gYXN5bmMgKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJzKGJvZHkucmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgZXguc3RhY2sgPSBib2R5LnN0YWNrICsgJ1xcbicgKyBleC5zdGFjaztcclxuICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiY3ZyX2VuYWJsZVJlc3VsdENyb3NzVmVyaWZpY2F0aW9uXCIsXHJcbiAgICAgICAgICAgIGlkOiB0YXNrSUQsXHJcbiAgICAgICAgICAgIGluc3RhbmNlSUQ6IGN2ci5faW5zdGFuY2VJRCxcclxuICAgICAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgICAgICAgdmVyaWZpY2F0aW9uRW5hYmxlZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfZW5hYmxlUmVzdWx0RGVkdXBsaWNhdGlvbihjdnIsIGR1cGxpY2F0ZUZpbHRlckVuYWJsZWQpIHtcclxuICAgIGNoZWNrSXNEaXNwb3NlZChjdnIpO1xyXG4gICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChycywgcmopID0+IHtcclxuICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gYXN5bmMgKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJzKGJvZHkucmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgZXguc3RhY2sgPSBib2R5LnN0YWNrICsgJ1xcbicgKyBleC5zdGFjaztcclxuICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiY3ZyX2VuYWJsZVJlc3VsdERlZHVwbGljYXRpb25cIixcclxuICAgICAgICAgICAgaWQ6IHRhc2tJRCxcclxuICAgICAgICAgICAgaW5zdGFuY2VJRDogY3ZyLl9pbnN0YW5jZUlELFxyXG4gICAgICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICAgICAgICBkdXBsaWNhdGVGaWx0ZXJFbmFibGVkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9zZXREdXBsaWNhdGVGb3JnZXRUaW1lKGN2ciwgZHVwbGljYXRlRm9yZ2V0VGltZSkge1xyXG4gICAgY2hlY2tJc0Rpc3Bvc2VkKGN2cik7XHJcbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgIGxldCB0YXNrSUQgPSBnZXROZXh0VGFza0lEKCk7XHJcbiAgICAgICAgbWFwVGFza0NhbGxCYWNrW3Rhc2tJRF0gPSBhc3luYyAoYm9keSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcnMoYm9keS5yZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGV4ID0gbmV3IEVycm9yKGJvZHkubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJqKGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgdHlwZTogXCJjdnJfc2V0RHVwbGljYXRlRm9yZ2V0VGltZVwiLFxyXG4gICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICBpbnN0YW5jZUlEOiBjdnIuX2luc3RhbmNlSUQsXHJcbiAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgIGR1cGxpY2F0ZUZvcmdldFRpbWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2NsZWFyVmVyaWZ5TGlzdChjdnIpIHtcclxuICAgIGxldCB0YXNrSUQgPSBnZXROZXh0VGFza0lEKCk7XHJcbiAgICBjb25zdCBwID0gbmV3IE11dGFibGVQcm9taXNlKCk7XHJcbiAgICBtYXBUYXNrQ2FsbEJhY2tbdGFza0lEXSA9IGFzeW5jIChib2R5KSA9PiB7XHJcbiAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICByZXR1cm4gcC5yZXNvbHZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgZXguc3RhY2sgPSBib2R5LnN0YWNrICsgJ1xcbicgKyBleC5zdGFjaztcclxuICAgICAgICAgICAgcmV0dXJuIHAucmVqZWN0KGV4KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICB0eXBlOiBcImN2cl9jbGVhclZlcmlmeUxpc3RcIixcclxuICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgIGluc3RhbmNlSUQ6IGN2ci5faW5zdGFuY2VJRFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcDtcclxufVxuXG4vLyBUT0RPXHJcbmNsYXNzIENhcHR1cmVkUmVzdWx0UmVjZWl2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRXZlbnQgdHJpZ2dlcmVkIHdoZW4gYSBnZW5lcmljIGNhcHR1cmVkIHJlc3VsdCBpcyBhdmFpbGFibGUsIG9jY3VycmluZyBlYWNoIHRpbWUgYW4gaW1hZ2UgZmluaXNoZXMgaXRzIHByb2Nlc3NpbmcuXHJcbiAgICAgICAgICogVGhpcyBldmVudCBjYW4gYmUgdXNlZCBmb3IgYW55IHJlc3VsdCB0aGF0IGRvZXMgbm90IGZpdCBpbnRvIHRoZSBzcGVjaWZpYyBjYXRlZ29yaWVzIG9mIHRoZSBvdGhlciBjYWxsYmFjayBldmVudHMuXHJcbiAgICAgICAgICogQHBhcmFtIHJlc3VsdCBUaGUgY2FwdHVyZWQgcmVzdWx0LCBhbiBpbnN0YW5jZSBvZiBgQ2FwdHVyZWRSZXN1bHRgLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMub25DYXB0dXJlZFJlc3VsdFJlY2VpdmVkID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFdmVudCB0cmlnZ2VyZWQgd2hlbiB0aGUgb3JpZ2luYWwgaW1hZ2UgcmVzdWx0IGlzIGF2YWlsYWJsZS5cclxuICAgICAgICAgKiBUaGlzIGV2ZW50IGlzIHVzZWQgdG8gaGFuZGxlIHRoZSBvcmlnaW5hbCBpbWFnZSBjYXB0dXJlZCBieSBhbiBpbWFnZSBzb3VyY2Ugc3VjaCBhcyBEeW5hbXNvZnQgQ2FtZXJhIEVuaGFuY2VyLlxyXG4gICAgICAgICAqIEBwYXJhbSByZXN1bHQgVGhlIG9yaWdpbmFsIGltYWdlIHJlc3VsdCwgYW4gaW5zdGFuY2Ugb2YgYE9yaWdpbmFsSW1hZ2VSZXN1bHRJdGVtYC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm9uT3JpZ2luYWxJbWFnZVJlc3VsdFJlY2VpdmVkID0gbnVsbDtcclxuICAgIH1cclxufVxuXG5jbGFzcyBJbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLl9vYnNlcnZlZFJlc3VsdFVuaXRUeXBlcyA9IEVudW1JbnRlcm1lZGlhdGVSZXN1bHRVbml0VHlwZS5JUlVUX0FMTDtcclxuICAgICAgICB0aGlzLl9vYnNlcnZlZFRhc2tNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5fcGFyYW1ldGVycyA9IHtcclxuICAgICAgICAgICAgc2V0T2JzZXJ2ZWRSZXN1bHRVbml0VHlwZXM6ICh0eXBlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb2JzZXJ2ZWRSZXN1bHRVbml0VHlwZXMgPSB0eXBlcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0T2JzZXJ2ZWRSZXN1bHRVbml0VHlwZXM6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vYnNlcnZlZFJlc3VsdFVuaXRUeXBlcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNSZXN1bHRVbml0VHlwZU9ic2VydmVkOiAodHlwZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhKHR5cGUgJiB0aGlzLl9vYnNlcnZlZFJlc3VsdFVuaXRUeXBlcyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFkZE9ic2VydmVkVGFzazogKHRhc2tOYW1lKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vYnNlcnZlZFRhc2tNYXAuc2V0KHRhc2tOYW1lLCB0cnVlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVtb3ZlT2JzZXJ2ZWRUYXNrOiAodGFza05hbWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29ic2VydmVkVGFza01hcC5zZXQodGFza05hbWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNUYXNrT2JzZXJ2ZWQ6ICh0YXNrTmFtZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX29ic2VydmVkVGFza01hcC5zaXplID09PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhKHRoaXMuX29ic2VydmVkVGFza01hcC5nZXQodGFza05hbWUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vblRhc2tSZXN1bHRzUmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIC8vIHNlY3Rpb25cclxuICAgICAgICB0aGlzLm9uUHJlZGV0ZWN0ZWRSZWdpb25zUmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIC8vIFRoZSByZW1haW5pbmcgY2FsbGJhY2sgZGVmaW5pdGlvbnMgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGluamVjdGVkIHdoZW4gaW1wb3J0ZWQgaW50byBvdGhlciBtb2R1bGVzXHJcbiAgICAgICAgLy8gc3RhZ2VcclxuICAgICAgICB0aGlzLm9uQ29sb3VySW1hZ2VVbml0UmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25TY2FsZWREb3duQ29sb3VySW1hZ2VVbml0UmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25HcmF5c2NhbGVJbWFnZVVuaXRSZWNlaXZlZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vblRyYW5zZm9ybWVkR3JheXNjYWxlSW1hZ2VVbml0UmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25FbmhhbmNlZEdyYXlzY2FsZUltYWdlVW5pdFJlY2VpdmVkID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9uQmluYXJ5SW1hZ2VVbml0UmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25UZXh0dXJlRGV0ZWN0aW9uUmVzdWx0VW5pdFJlY2VpdmVkID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9uVGV4dHVyZVJlbW92ZWRHcmF5c2NhbGVJbWFnZVVuaXRSZWNlaXZlZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vblRleHR1cmVSZW1vdmVkQmluYXJ5SW1hZ2VVbml0UmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25Db250b3Vyc1VuaXRSZWNlaXZlZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vbkxpbmVTZWdtZW50c1VuaXRSZWNlaXZlZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vblRleHRab25lc1VuaXRSZWNlaXZlZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vblRleHRSZW1vdmVkQmluYXJ5SW1hZ2VVbml0UmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25TaG9ydExpbmVzVW5pdFJlY2VpdmVkID0gbnVsbDtcclxuICAgICAgICAvLyBUaGUgcmVtYWluaW5nIGNhbGxiYWNrIGRlZmluaXRpb25zIHdpbGwgYmUgYXV0b21hdGljYWxseSBpbmplY3RlZCB3aGVuIGltcG9ydGVkIGludG8gb3RoZXIgbW9kdWxlc1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBvYnNlcnZlZCBwYXJhbWV0ZXJzIG9mIHRoZSBpbnRlcm1lZGlhdGUgcmVzdWx0IHJlY2VpdmVyLiBBbGxvd2luZyBmb3IgY29uZmlndXJhdGlvbiBvZiBpbnRlcm1lZGlhdGUgcmVzdWx0IG9ic2VydmF0aW9uLlxyXG4gICAgICogQHJldHVybiBUaGUgb2JzZXJ2ZWQgcGFyYW1ldGVycywgb2YgdHlwZSBPYnNlcnZhdGlvblBhcmFtZXRlcnMuIFRoZSBkZWZhdWx0IHBhcmFtZXRlcnMgYXJlIHRvIG9ic2VydmUgYWxsIGludGVybWVkaWF0ZSByZXN1bHQgdW5pdCB0eXBlcyBhbmQgYWxsIHRhc2tzLlxyXG4gICAgICovXHJcbiAgICBnZXRPYnNlcnZhdGlvblBhcmFtZXRlcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmFtZXRlcnM7XHJcbiAgICB9XHJcbn1cblxudmFyIEVudW1QcmVzZXRUZW1wbGF0ZTtcclxuKGZ1bmN0aW9uIChFbnVtUHJlc2V0VGVtcGxhdGUpIHtcclxuICAgIC8qKlxyXG4gICAgICogQGJyaWVmIFZlcnNhdGlsZSBmdW5jdGlvbiBmb3IgYmFyY29kZSByZWFkaW5nLCBkb2N1bWVudCBkZXRlY3Rpb24sIG9yIHRleHQgcmVjb2duaXRpb24uXHJcbiAgICAgKi9cclxuICAgIEVudW1QcmVzZXRUZW1wbGF0ZVtcIlBUX0RFRkFVTFRcIl0gPSBcIkRlZmF1bHRcIjtcclxuICAgIC8qKlxyXG4gICAgICogQGJyaWVmIFNjYW5zIGEgc2luZ2xlIGJhcmNvZGUuXHJcbiAgICAgKi9cclxuICAgIEVudW1QcmVzZXRUZW1wbGF0ZVtcIlBUX1JFQURfQkFSQ09ERVNcIl0gPSBcIlJlYWRCYXJjb2Rlc19EZWZhdWx0XCI7XHJcbiAgICAvKipcclxuICAgICAqIEBicmllZiBJZGVudGlmaWVzIGFuZCByZWFkcyBhbnkgdGV4dCBwcmVzZW50LlxyXG4gICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9SRUNPR05JWkVfVEVYVF9MSU5FU1wiXSA9IFwiUmVjb2duaXplVGV4dExpbmVzX0RlZmF1bHRcIjtcclxuICAgIC8qKlxyXG4gICAgICogQGJyaWVmIFJJZGVudGlmaWVzIHRoZSBlZGdlcyBvZiBhIGRvY3VtZW50LlxyXG4gICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9ERVRFQ1RfRE9DVU1FTlRfQk9VTkRBUklFU1wiXSA9IFwiRGV0ZWN0RG9jdW1lbnRCb3VuZGFyaWVzX0RlZmF1bHRcIjtcclxuICAgIC8qKlxyXG4gICAgICogQGJyaWVmIERldGVjdHMgZG9jdW1lbnQgZWRnZXMgYW5kIHN0YW5kYXJkaXplcyBpdHMgZm9ybWF0LlxyXG4gICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9ERVRFQ1RfQU5EX05PUk1BTElaRV9ET0NVTUVOVFwiXSA9IFwiRGV0ZWN0QW5kTm9ybWFsaXplRG9jdW1lbnRfRGVmYXVsdFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAYnJpZWYgQWRqdXN0cyBhIGRvY3VtZW50IHRvIGEgc3RhbmRhcmQgZm9ybWF0IHVzaW5nIGRldGVjdGVkIGJvcmRlcnMuXHJcbiAgICAgKi9cclxuICAgIEVudW1QcmVzZXRUZW1wbGF0ZVtcIlBUX05PUk1BTElaRV9ET0NVTUVOVFwiXSA9IFwiTm9ybWFsaXplRG9jdW1lbnRfRGVmYXVsdFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAYnJpZWYgUmVwcmVzZW50cyBhIGJhcmNvZGUgcmVhZGluZyBtb2RlIHdoZXJlIHNwZWVkIGlzIHByaW9yaXRpemVkLlxyXG4gICAgICpcclxuICAgICAqIEluIHRoaXMgbW9kZSwgdGhlIGJhcmNvZGUgcmVhZGVyIHdpbGwgb3B0aW1pemUgZm9yIGZhc3RlciBiYXJjb2RlIGRldGVjdGlvblxyXG4gICAgICogYW5kIGRlY29kaW5nLCBzYWNyaWZpY2luZyBzb21lIGxldmVsIG9mIGFjY3VyYWN5IGFuZCByZWFkIHJhdGUuIEl0IGlzIHN1aXRhYmxlXHJcbiAgICAgKiBmb3Igc2l0dWF0aW9ucyB3aGVyZSBhIHF1aWNrIHJlc3BvbnNlIHRpbWUgaXMgbW9yZSBpbXBvcnRhbnQgdGhhbiBwZXJmZWN0XHJcbiAgICAgKiBiYXJjb2RlIHJlY29nbml0aW9uLlxyXG4gICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9SRUFEX0JBUkNPREVTX1NQRUVEX0ZJUlNUXCJdID0gXCJSZWFkQmFyY29kZXNfU3BlZWRGaXJzdFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAYnJpZWYgUmVwcmVzZW50cyBhIGJhcmNvZGUgcmVhZGluZyBtb2RlIHdoZXJlIGJhcmNvZGUgcmVhZCByYXRlIGlzIHByaW9yaXRpemVkLlxyXG4gICAgICpcclxuICAgICAqIEluIHRoaXMgbW9kZSwgdGhlIGJhcmNvZGUgcmVhZGVyIHdpbGwgb3B0aW1pemUgZm9yIGhpZ2hlciBiYXJjb2RlIHJlYWQgcmF0ZXMsXHJcbiAgICAgKiBldmVuIGlmIGl0IG1heSBzb21ldGltZXMgcmVzdWx0IGluIHJlZHVjZWQgYWNjdXJhY3kgYW5kIHNwZWVkLiBJdCBpcyBzdWl0YWJsZSBmb3JcclxuICAgICAqIHNjZW5hcmlvcyB3aGVyZSBtYXhpbWl6aW5nIHRoZSBudW1iZXIgb2Ygc3VjY2Vzc2Z1bGx5IHJlYWQgYmFyY29kZXMgaXMgY3JpdGljYWwuXHJcbiAgICAgKi9cclxuICAgIEVudW1QcmVzZXRUZW1wbGF0ZVtcIlBUX1JFQURfQkFSQ09ERVNfUkVBRF9SQVRFX0ZJUlNUXCJdID0gXCJSZWFkQmFyY29kZXNfUmVhZFJhdGVGaXJzdFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAYnJpZWYgUmVwcmVzZW50cyBhIGJhbGFuY2VkIGJhcmNvZGUgcmVhZGluZyBtb2RlLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgbW9kZSBhaW1zIGZvciBhIHJlYXNvbmFibGUgYmFsYW5jZSBiZXR3ZWVuIHNwZWVkIGFuZCByZWFkIHJhdGUgaW4gYmFyY29kZVxyXG4gICAgICogcmVjb2duaXRpb24uIEl0IGlzIHN1aXRhYmxlIGZvciBtb3N0IGNvbW1vbiB1c2UgY2FzZXMgd2hlcmUgYSBjb21wcm9taXNlIGJldHdlZW5cclxuICAgICAqIHNwZWVkIGFuZCByZWFkIHJhdGUgaXMgYWNjZXB0YWJsZS5cclxuICAgICAqL1xyXG4gICAgRW51bVByZXNldFRlbXBsYXRlW1wiUFRfUkVBRF9CQVJDT0RFU19CQUxBTkNFXCJdID0gXCJSZWFkQmFyY29kZXNfQmFsYW5jZVwiO1xyXG4gICAgLyoqXHJcbiAgICAqIEBicmllZiBSZXByZXNlbnRzIGEgYmFyY29kZSByZWFkaW5nIG1vZGUgZm9yIHNpbmdsZSBiYXJjb2RlIGNvZGUgZGV0ZWN0aW9uLlxyXG4gICAgKlxyXG4gICAgKiBJbiB0aGlzIG1vZGUsIHRoZSBiYXJjb2RlIHJlYWRlciB3aWxsIGZvY3VzIG9uIGRldGVjdGluZyBhbmQgZGVjb2RpbmcgYSBzaW5nbGVcclxuICAgICogYmFyY29kZSBjb2RlLCBpZ25vcmluZyBhbnkgYWRkaXRpb25hbCBjb2RlcyBpbiB0aGUgc2FtZSBpbWFnZS4gSXQgaXMgZWZmaWNpZW50XHJcbiAgICAqIHdoZW4gdGhlIHRhcmdldCBpbWFnZSBoYXMgb25seSBvbmUgYmFyY29kZS5cclxuICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9SRUFEX1NJTkdMRV9CQVJDT0RFXCJdID0gXCJSZWFkQmFyY29kZXNfQmFsYW5jZWRcIjtcclxuICAgIC8qKlxyXG4gICAgICogQGJyaWVmIFJlcHJlc2VudHMgYSBiYXJjb2RlIHJlYWRpbmcgbW9kZSBvcHRpbWl6ZWQgZm9yIGRlbnNlIGJhcmNvZGUgY29kZXMuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBtb2RlIGlzIGRlc2lnbmVkIHRvIGhhbmRsZSBkZW5zZSBvciBjbG9zZWx5IHBhY2tlZCBiYXJjb2RlIGNvZGVzIHdoZXJlXHJcbiAgICAgKiBhY2N1cmFjeSBpcyBwYXJhbW91bnQuIEl0IG1heSBvcGVyYXRlIHNsb3dlciB0aGFuIG90aGVyIG1vZGVzIGJ1dCBpcyBzdWl0YWJsZVxyXG4gICAgICogZm9yIGNoYWxsZW5naW5nIHNjZW5hcmlvcyB3aGVyZSBjb2RlIGRlbnNpdHkgaXMgaGlnaC5cclxuICAgICAqL1xyXG4gICAgRW51bVByZXNldFRlbXBsYXRlW1wiUFRfUkVBRF9ERU5TRV9CQVJDT0RFU1wiXSA9IFwiUmVhZERlbnNlQmFyY29kZXNcIjtcclxuICAgIC8qKlxyXG4gICAgICogQGJyaWVmIFJlcHJlc2VudHMgYSBiYXJjb2RlIHJlYWRpbmcgbW9kZSBvcHRpbWl6ZWQgZm9yIGRpc3RhbnQgYmFyY29kZSBjb2Rlcy5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIG1vZGUgaXMgZGVzaWduZWQgdG8gc2Nhbm5pbmcgYSBiYXJjb2RlIHRoYXQgaXMgcGxhY2VkIGZhciBmcm9tIHRoZSBkZXZpY2UuXHJcbiAgICAgKi9cclxuICAgIEVudW1QcmVzZXRUZW1wbGF0ZVtcIlBUX1JFQURfRElTVEFOVF9CQVJDT0RFU1wiXSA9IFwiUmVhZERpc3RhbnRCYXJjb2Rlc1wiO1xyXG4gICAgLyoqXHJcbiAgICAqIEBicmllZiBSZXByZXNlbnRzIGEgdGV4dCByZWNvZ25pdGlvbiBtb2RlIGZvY3VzZWQgb24gcmVjb2duaXppbmcgbnVtYmVycy5cclxuICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9SRUNPR05JWkVfTlVNQkVSU1wiXSA9IFwiUmVjb2duaXplTnVtYmVyc1wiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAYnJpZWYgUmVwcmVzZW50cyBhIHRleHQgcmVjb2duaXRpb24gbW9kZSBmb2N1c2VkIG9uIHJlY29nbml6aW5nIGFscGhhYmV0aWMgY2hhcmFjdGVycyAobGV0dGVycykuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9SRUNPR05JWkVfTEVUVEVSU1wiXSA9IFwiUmVjb2duaXplTGV0dGVyc1wiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAYnJpZWYgUmVwcmVzZW50cyBhIHRleHQgcmVjb2duaXRpb24gbW9kZSB0aGF0IGNvbWJpbmVzIG51bWJlcnMgYW5kIGFscGhhYmV0aWMgY2hhcmFjdGVycyAobGV0dGVycykgcmVjb2duaXRpb24uXHJcbiAgICAgKi9cclxuICAgIEVudW1QcmVzZXRUZW1wbGF0ZVtcIlBUX1JFQ09HTklaRV9OVU1CRVJTX0FORF9MRVRURVJTXCJdID0gXCJSZWNvZ25pemVOdW1iZXJzQW5kTGV0dGVyc1wiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAYnJpZWYgUmVwcmVzZW50cyBhIHRleHQgcmVjb2duaXRpb24gbW9kZSB0aGF0IGNvbWJpbmVzIG51bWJlcnMgYW5kIHVwcGVyY2FzZSBsZXR0ZXJzIHJlY29nbml0aW9uLlxyXG4gICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9SRUNPR05JWkVfTlVNQkVSU19BTkRfVVBQRVJDQVNFX0xFVFRFUlNcIl0gPSBcIlJlY29nbml6ZU51bWJlcnNBbmRVcHBlcmNhc2VMZXR0ZXJzXCI7XHJcbiAgICAvKipcclxuICAgICAqIEBicmllZiBSZXByZXNlbnRzIGEgdGV4dCByZWNvZ25pdGlvbiBtb2RlIGZvY3VzZWQgb24gcmVjb2duaXppbmcgdXBwZXJjYXNlIGxldHRlcnMuXHJcbiAgICAgKi9cclxuICAgIEVudW1QcmVzZXRUZW1wbGF0ZVtcIlBUX1JFQ09HTklaRV9VUFBFUkNBU0VfTEVUVEVSU1wiXSA9IFwiUmVjb2duaXplVXBwZXJjYXNlTGV0dGVyc1wiO1xyXG59KShFbnVtUHJlc2V0VGVtcGxhdGUgfHwgKEVudW1QcmVzZXRUZW1wbGF0ZSA9IHt9KSk7XG5cbmV4cG9ydCB7IENhcHR1cmVWaXNpb25Sb3V0ZXIsIENhcHR1cmVWaXNpb25Sb3V0ZXJNb2R1bGUsIENhcHR1cmVkUmVzdWx0UmVjZWl2ZXIsIEVudW1JbWFnZVNvdXJjZVN0YXRlLCBFbnVtUHJlc2V0VGVtcGxhdGUsIEludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/dynamsoft-capture-vision-router/dist/cvr.esm.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js":
/*!******************************************************!*\
  !*** ./node_modules/dynamsoft-core/dist/core.esm.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreModule: function() { return /* binding */ L_; },\n/* harmony export */   EnumBufferOverflowProtectionMode: function() { return /* binding */ e; },\n/* harmony export */   EnumCapturedResultItemType: function() { return /* binding */ D_; },\n/* harmony export */   EnumColourChannelUsageType: function() { return /* binding */ t; },\n/* harmony export */   EnumCornerType: function() { return /* binding */ O_; },\n/* harmony export */   EnumErrorCode: function() { return /* binding */ c_; },\n/* harmony export */   EnumGrayscaleEnhancementMode: function() { return /* binding */ S_; },\n/* harmony export */   EnumGrayscaleTransformationMode: function() { return /* binding */ l_; },\n/* harmony export */   EnumImagePixelFormat: function() { return /* binding */ I; },\n/* harmony export */   EnumImageTagType: function() { return /* binding */ f_; },\n/* harmony export */   EnumIntermediateResultUnitType: function() { return /* binding */ P_; },\n/* harmony export */   EnumPDFReadingMode: function() { return /* binding */ h_; },\n/* harmony export */   EnumRasterDataSource: function() { return /* binding */ d_; },\n/* harmony export */   EnumRegionObjectElementType: function() { return /* binding */ g_; },\n/* harmony export */   EnumSectionType: function() { return /* binding */ M_; },\n/* harmony export */   ImageSourceAdapter: function() { return /* binding */ H; },\n/* harmony export */   _getNorImageData: function() { return /* binding */ B; },\n/* harmony export */   _isArc: function() { return /* binding */ a; },\n/* harmony export */   _isContour: function() { return /* binding */ T; },\n/* harmony export */   _isDSImageData: function() { return /* binding */ R; },\n/* harmony export */   _isDSRect: function() { return /* binding */ L; },\n/* harmony export */   _isImageTag: function() { return /* binding */ D; },\n/* harmony export */   _isLineSegment: function() { return /* binding */ O; },\n/* harmony export */   _isPoint: function() { return /* binding */ c; },\n/* harmony export */   _isPolygon: function() { return /* binding */ S; },\n/* harmony export */   _isQuad: function() { return /* binding */ l; },\n/* harmony export */   _isRect: function() { return /* binding */ f; },\n/* harmony export */   _saveToFile: function() { return /* binding */ u; },\n/* harmony export */   _toBlob: function() { return /* binding */ U; },\n/* harmony export */   _toCanvas: function() { return /* binding */ F; },\n/* harmony export */   _toImage: function() { return /* binding */ G; },\n/* harmony export */   autoDiscoveryPaths: function() { return /* binding */ N_; },\n/* harmony export */   bDebug: function() { return /* binding */ C_; },\n/* harmony export */   checkIsLink: function() { return /* binding */ d; },\n/* harmony export */   compareVersion: function() { return /* binding */ P; },\n/* harmony export */   doOrWaitAsyncDependency: function() { return /* binding */ E_; },\n/* harmony export */   getNextTaskID: function() { return /* binding */ I_; },\n/* harmony export */   handleEngineResourcePaths: function() { return /* binding */ g; },\n/* harmony export */   innerVersions: function() { return /* binding */ o_; },\n/* harmony export */   isArc: function() { return /* binding */ a; },\n/* harmony export */   isContour: function() { return /* binding */ T; },\n/* harmony export */   isDSImageData: function() { return /* binding */ R; },\n/* harmony export */   isDSRect: function() { return /* binding */ L; },\n/* harmony export */   isImageTag: function() { return /* binding */ D; },\n/* harmony export */   isLineSegment: function() { return /* binding */ O; },\n/* harmony export */   isObject: function() { return /* binding */ N; },\n/* harmony export */   isPoint: function() { return /* binding */ c; },\n/* harmony export */   isPolygon: function() { return /* binding */ S; },\n/* harmony export */   isQuad: function() { return /* binding */ l; },\n/* harmony export */   isRect: function() { return /* binding */ f; },\n/* harmony export */   loadWasm: function() { return /* binding */ R_; },\n/* harmony export */   mapAsyncDependency: function() { return /* binding */ q; },\n/* harmony export */   mapPackageRegister: function() { return /* binding */ A_; },\n/* harmony export */   mapTaskCallBack: function() { return /* binding */ r_; },\n/* harmony export */   onLog: function() { return /* binding */ s_; },\n/* harmony export */   requestResource: function() { return /* binding */ h; },\n/* harmony export */   setBDebug: function() { return /* binding */ i_; },\n/* harmony export */   setOnLog: function() { return /* binding */ n_; },\n/* harmony export */   waitAsyncDependency: function() { return /* binding */ __; },\n/* harmony export */   worker: function() { return /* binding */ e_; },\n/* harmony export */   workerAutoResources: function() { return /* binding */ a_; }\n/* harmony export */ });\n/*!\n * Dynamsoft JavaScript Library\n * @product Dynamsoft Core JS Edition\n * @website https://www.dynamsoft.com\n * @copyright Copyright 2024, Dynamsoft Corporation\n * @author Dynamsoft\n * @version 3.4.20\n * @fileoverview Dynamsoft JavaScript Library for Core\n * More info on Dynamsoft Core JS: https://www.dynamsoft.com/capture-vision/docs/web/programming/javascript/api-reference/core/core-module.html\n */\nfunction _(_,E,e,t){if(\"a\"===e&&!t)throw new TypeError(\"Private accessor was defined without a getter\");if(\"function\"==typeof E?_!==E||!t:!E.has(_))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return\"m\"===e?t:\"a\"===e?t.call(_):t?t.value:E.get(_)}function E(_,E,e,t,I){if(\"m\"===t)throw new TypeError(\"Private method is not writable\");if(\"a\"===t&&!I)throw new TypeError(\"Private accessor was defined without a setter\");if(\"function\"==typeof E?_!==E||!I:!E.has(_))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return\"a\"===t?I.call(_,e):I?I.value=e:E.set(_,e),e}var e,t,I;\"function\"==typeof SuppressedError&&SuppressedError,function(_){_[_.BOPM_BLOCK=0]=\"BOPM_BLOCK\",_[_.BOPM_UPDATE=1]=\"BOPM_UPDATE\"}(e||(e={})),function(_){_[_.CCUT_AUTO=0]=\"CCUT_AUTO\",_[_.CCUT_FULL_CHANNEL=1]=\"CCUT_FULL_CHANNEL\",_[_.CCUT_Y_CHANNEL_ONLY=2]=\"CCUT_Y_CHANNEL_ONLY\",_[_.CCUT_RGB_R_CHANNEL_ONLY=3]=\"CCUT_RGB_R_CHANNEL_ONLY\",_[_.CCUT_RGB_G_CHANNEL_ONLY=4]=\"CCUT_RGB_G_CHANNEL_ONLY\",_[_.CCUT_RGB_B_CHANNEL_ONLY=5]=\"CCUT_RGB_B_CHANNEL_ONLY\"}(t||(t={})),function(_){_[_.IPF_BINARY=0]=\"IPF_BINARY\",_[_.IPF_BINARYINVERTED=1]=\"IPF_BINARYINVERTED\",_[_.IPF_GRAYSCALED=2]=\"IPF_GRAYSCALED\",_[_.IPF_NV21=3]=\"IPF_NV21\",_[_.IPF_RGB_565=4]=\"IPF_RGB_565\",_[_.IPF_RGB_555=5]=\"IPF_RGB_555\",_[_.IPF_RGB_888=6]=\"IPF_RGB_888\",_[_.IPF_ARGB_8888=7]=\"IPF_ARGB_8888\",_[_.IPF_RGB_161616=8]=\"IPF_RGB_161616\",_[_.IPF_ARGB_16161616=9]=\"IPF_ARGB_16161616\",_[_.IPF_ABGR_8888=10]=\"IPF_ABGR_8888\",_[_.IPF_ABGR_16161616=11]=\"IPF_ABGR_16161616\",_[_.IPF_BGR_888=12]=\"IPF_BGR_888\",_[_.IPF_BINARY_8=13]=\"IPF_BINARY_8\",_[_.IPF_NV12=14]=\"IPF_NV12\",_[_.IPF_BINARY_8_INVERTED=15]=\"IPF_BINARY_8_INVERTED\"}(I||(I={}));const r=\"undefined\"==typeof self,s=(()=>{if(!r&&document.currentScript){let _=document.currentScript.src,E=_.indexOf(\"?\");if(-1!=E)_=_.substring(0,E);else{let E=_.indexOf(\"#\");-1!=E&&(_=_.substring(0,E))}return _.substring(0,_.lastIndexOf(\"/\")+1)}return\"./\"})(),n=_=>{if(null==_&&(_=\"./\"),r);else{let E=document.createElement(\"a\");E.href=_,_=E.href}return _.endsWith(\"/\")||(_+=\"/\"),_},C=_=>Object.prototype.toString.call(_),i=_=>Array.isArray?Array.isArray(_):\"[object Array]\"===C(_),o=_=>\"[object Boolean]\"===C(_),A=_=>\"number\"==typeof _&&!Number.isNaN(_),N=_=>null!==_&&\"object\"==typeof _&&!Array.isArray(_),a=_=>!!N(_)&&(!!A(_.x)&&(!!A(_.y)&&(!!A(_.radius)&&(!(_.radius<0)&&(!!A(_.startAngle)&&!!A(_.endAngle)))))),T=_=>!!N(_)&&(!!i(_.points)&&(0!=_.points.length&&!_.points.some((_=>!c(_))))),R=_=>!!N(_)&&(_.bytes instanceof Uint8Array&&(!!A(_.width)&&(!(_.width<=0)&&(!!A(_.height)&&(!(_.height<=0)&&(!!A(_.stride)&&(!(_.stride<=0)&&(\"format\"in _&&!(\"tag\"in _&&!D(_.tag)))))))))),L=_=>!!N(_)&&(!!A(_.left)&&(!(_.left<0)&&(!!A(_.top)&&(!(_.top<0)&&(!!A(_.right)&&(!(_.right<0)&&(!!A(_.bottom)&&(!(_.bottom<0)&&(!(_.left>=_.right)&&(!(_.top>=_.bottom)&&!!o(_.isMeasuredInPercentage))))))))))),D=_=>!!N(_)&&(!!A(_.imageId)&&\"type\"in _),O=_=>!!N(_)&&(!!c(_.startPoint)&&(!!c(_.endPoint)&&(_.startPoint.x!=_.endPoint.x||_.startPoint.y!=_.endPoint.y))),c=_=>!!N(_)&&(!!A(_.x)&&!!A(_.y)),S=_=>!!N(_)&&(!!i(_.points)&&(0!=_.points.length&&!_.points.some((_=>!c(_))))),l=_=>!!N(_)&&(!!i(_.points)&&(0!=_.points.length&&4==_.points.length&&!_.points.some((_=>!c(_))))),f=_=>!!N(_)&&(!!A(_.x)&&(!!A(_.y)&&(!!A(_.width)&&(!(_.width<0)&&(!!A(_.height)&&(!(_.height<0)&&!(\"isMeasuredInPercentage\"in _&&!o(_.isMeasuredInPercentage))))))));async function h(_,E){return await new Promise(((e,t)=>{let I=new XMLHttpRequest;I.open(\"GET\",_,!0),I.responseType=E,I.send(),I.onloadend=async()=>{I.status<200||I.status>=300?t(_+\" \"+I.status):e(I.response)},I.onerror=()=>{t(new Error(\"Network Error: \"+I.statusText))}}))}function d(_){return/^(https:\\/\\/www\\.|http:\\/\\/www\\.|https:\\/\\/|http:\\/\\/)|^[a-zA-Z0-9]{2,}(\\.[a-zA-Z0-9]{2,})(\\.[a-zA-Z0-9]{2,})?/.test(_)}const P=(_,E)=>{let e=_.split(\".\"),t=E.split(\".\");for(let _=0;_<e.length&&_<t.length;++_){let E=e[_],I=t[_];if(E===I)continue;let r=parseInt(e[_]),s=parseInt(t[_]);return r===s||Number.isNaN(r)&&Number.isNaN(s)?E<I?-1:1:r<s||Number.isNaN(r)&&Number.isInteger(s)?-1:1}return e.length===t.length?0:e.length<t.length?-1:1},g=(_,E)=>{const e={};for(let t in E){const I=t;let r=_[I];r&&\"string\"!=typeof r&&r.path&&(r=r.path),_.rootDirectory&&!_.rootDirectory.endsWith(\"/\")&&(_.rootDirectory=_.rootDirectory+\"/\"),void 0===r?_.rootDirectory?r=`${_.rootDirectory}${M[I]}@${E[I].version}/dist/`:(r=E[I].path,r||(r=E[I])):r.startsWith(\"@engineRootDirectory/\")&&(r=r.replace(\"@engineRootDirectory/\",_.rootDirectory)),e[I]=n(r)}return e},M={std:\"dynamsoft-capture-vision-std\",dip:\"dynamsoft-image-processing\",core:\"dynamsoft-core\",dnn:\"dynamsoft-capture-vision-dnn\",license:\"dynamsoft-license\",utility:\"dynamsoft-utility\",cvr:\"dynamsoft-capture-vision-router\",dbr:\"dynamsoft-barcode-reader\",dlr:\"dynamsoft-label-recognizer\",ddn:\"dynamsoft-document-normalizer\",dcp:\"dynamsoft-code-parser\",dcpd:\"dynamsoft-code-parser\",dlrData:\"dynamsoft-label-recognizer-data\",dce:\"dynamsoft-camera-enhancer\"},u=async(_,E,e)=>await new Promise((async(t,I)=>{try{const I=E.split(\".\");let r=I[I.length-1];const s=await U(`image/${r}`,_);I.length<=1&&(r=\"png\");const n=new File([s],E,{type:`image/${r}`});if(e){const _=URL.createObjectURL(n),e=document.createElement(\"a\");e.href=_,e.download=E,e.click()}return t(n)}catch(_){return I()}})),F=_=>{R(_)&&(_=B(_));const E=document.createElement(\"canvas\");E.width=_.width,E.height=_.height;return E.getContext(\"2d\",{willReadFrequently:!0}).putImageData(_,0,0),E},G=(_,E)=>{R(E)&&(E=B(E));const e=F(E);let t=new Image,I=e.toDataURL(_);return t.src=I,t},U=async(_,E)=>{R(E)&&(E=B(E));const e=F(E);return new Promise(((E,t)=>{e.toBlob((_=>E(_)),_)}))},B=_=>{let E,e=_.bytes;if(!(e&&e instanceof Uint8Array))throw Error(\"Parameter type error\");if(Number(_.format)===I.IPF_BGR_888){const _=e.length/3;E=new Uint8ClampedArray(4*_);for(let t=0;t<_;++t)E[4*t]=e[3*t],E[4*t+1]=e[3*t+1],E[4*t+2]=e[3*t+2],E[4*t+3]=255}else if(Number(_.format)===I.IPF_RGB_888){const _=e.length/3;E=new Uint8ClampedArray(4*_);for(let t=0;t<_;++t)E[4*t]=e[3*t+2],E[4*t+1]=e[3*t+1],E[4*t+2]=e[3*t],E[4*t+3]=255}else if(Number(_.format)===I.IPF_GRAYSCALED){const _=e.length;E=new Uint8ClampedArray(4*_);for(let t=0;t<_;t++)E[4*t]=E[4*t+1]=E[4*t+2]=e[t],E[4*t+3]=255}else if(Number(_.format)===I.IPF_BINARY_8){const t=e.length,I=_.width,r=_.height,s=_.stride;E=new Uint8ClampedArray(I*r*4);for(let _=0;_<t;_++){let t=e[_],r=_%s,n=Math.floor(_/s);for(let _=0;_<8;_++){let e=r+_,s=4*(n*I+e);if(e>=I)break;E[s]=E[s+1]=E[s+2]=(128&t)/128*255,E[s+3]=255,t<<=1}}}else if(Number(_.format)===I.IPF_ABGR_8888){const _=e.length/4;E=new Uint8ClampedArray(e.length);for(let t=0;t<_;++t)E[4*t]=e[4*t],E[4*t+1]=e[4*t+1],E[4*t+2]=e[4*t+2],E[4*t+3]=e[4*t+3]}else if(Number(_.format)===I.IPF_ARGB_8888){const _=e.length/4;E=new Uint8ClampedArray(e.length);for(let t=0;t<_;++t)E[4*t]=e[4*t+2],E[4*t+1]=e[4*t+1],E[4*t+2]=e[4*t],E[4*t+3]=e[4*t+3]}return new ImageData(E,_.width,_.height)};var p,m,y,w,V,b,v,Y;class H{get _isFetchingStarted(){return _(this,V,\"f\")}constructor(){p.add(this),m.set(this,[]),y.set(this,1),w.set(this,e.BOPM_BLOCK),V.set(this,!1),b.set(this,void 0),v.set(this,t.CCUT_AUTO)}setErrorListener(_){}addImageToBuffer(E){var t;if(!R(E))throw new TypeError(\"Invalid 'image'.\");if((null===(t=E.tag)||void 0===t?void 0:t.hasOwnProperty(\"imageId\"))&&\"number\"==typeof E.tag.imageId&&this.hasImage(E.tag.imageId))throw new Error(\"Existed imageId.\");if(_(this,m,\"f\").length>=_(this,y,\"f\"))switch(_(this,w,\"f\")){case e.BOPM_BLOCK:break;case e.BOPM_UPDATE:if(_(this,m,\"f\").push(E),N(_(this,b,\"f\"))&&A(_(this,b,\"f\").imageId)&&1==_(this,b,\"f\").keepInBuffer)for(;_(this,m,\"f\").length>_(this,y,\"f\");){const E=_(this,m,\"f\").findIndex((E=>{var e;return(null===(e=E.tag)||void 0===e?void 0:e.imageId)!==_(this,b,\"f\").imageId}));_(this,m,\"f\").splice(E,1)}else _(this,m,\"f\").splice(0,_(this,m,\"f\").length-_(this,y,\"f\"))}else _(this,m,\"f\").push(E)}getImage(){if(0===_(this,m,\"f\").length)return null;let E;if(_(this,b,\"f\")&&A(_(this,b,\"f\").imageId)){const e=_(this,p,\"m\",Y).call(this,_(this,b,\"f\").imageId);if(e<0)throw new Error(`Image with id ${_(this,b,\"f\").imageId} doesn't exist.`);E=_(this,m,\"f\").slice(e,e+1)[0]}else E=_(this,m,\"f\").pop();if([I.IPF_RGB_565,I.IPF_RGB_555,I.IPF_RGB_888,I.IPF_ARGB_8888,I.IPF_RGB_161616,I.IPF_ARGB_16161616,I.IPF_ABGR_8888,I.IPF_ABGR_16161616,I.IPF_BGR_888].includes(E.format)){if(_(this,v,\"f\")===t.CCUT_RGB_R_CHANNEL_ONLY){H._onLog&&H._onLog(\"only get R channel data.\");const _=new Uint8Array(E.width*E.height);for(let e=0;e<_.length;e++)switch(E.format){case I.IPF_RGB_565:case I.IPF_RGB_555:case I.IPF_RGB_888:case I.IPF_RGB_161616:_[e]=E.bytes[3*e+2];break;case I.IPF_ARGB_8888:case I.IPF_ARGB_16161616:_[e]=E.bytes[4*e+2];break;case I.IPF_BGR_888:_[e]=E.bytes[3*e];break;case I.IPF_ABGR_8888:case I.IPF_ABGR_16161616:_[e]=E.bytes[4*e]}E.bytes=_,E.stride=E.width,E.format=I.IPF_GRAYSCALED}else if(_(this,v,\"f\")===t.CCUT_RGB_G_CHANNEL_ONLY){H._onLog&&H._onLog(\"only get G channel data.\");const _=new Uint8Array(E.width*E.height);for(let e=0;e<_.length;e++)switch(E.format){case I.IPF_RGB_565:case I.IPF_RGB_555:case I.IPF_RGB_888:case I.IPF_RGB_161616:case I.IPF_BGR_888:_[e]=E.bytes[3*e+1];break;case I.IPF_ARGB_8888:case I.IPF_ARGB_16161616:case I.IPF_ABGR_8888:case I.IPF_ABGR_16161616:_[e]=E.bytes[4*e+1]}E.bytes=_,E.stride=E.width,E.format=I.IPF_GRAYSCALED}else if(_(this,v,\"f\")===t.CCUT_RGB_B_CHANNEL_ONLY){H._onLog&&H._onLog(\"only get B channel data.\");const _=new Uint8Array(E.width*E.height);for(let e=0;e<_.length;e++)switch(E.format){case I.IPF_RGB_565:case I.IPF_RGB_555:case I.IPF_RGB_888:case I.IPF_RGB_161616:_[e]=E.bytes[3*e];break;case I.IPF_ARGB_8888:case I.IPF_ARGB_16161616:_[e]=E.bytes[4*e];break;case I.IPF_BGR_888:_[e]=E.bytes[3*e+2];break;case I.IPF_ABGR_8888:case I.IPF_ABGR_16161616:_[e]=E.bytes[4*e+2]}E.bytes=_,E.stride=E.width,E.format=I.IPF_GRAYSCALED}}else[I.IPF_NV21,I.IPF_NV12].includes(E.format)&&H._onLog&&H._onLog(\"NV21 or NV12 is not supported.\");return E}setNextImageToReturn(_,e){if(!((..._)=>0!==_.length&&_.every((_=>A(_))))(_))throw new TypeError(\"Invalid 'imageId'.\");if(void 0!==e&&!o(e))throw new TypeError(\"Invalid 'keepInBuffer'.\");E(this,b,{imageId:_,keepInBuffer:e},\"f\")}_resetNextReturnedImage(){E(this,b,null,\"f\")}hasImage(E){return _(this,p,\"m\",Y).call(this,E)>=0}startFetching(){E(this,V,!0,\"f\")}stopFetching(){E(this,V,!1,\"f\")}setMaxImageCount(e){if(\"number\"!=typeof e)throw new TypeError(\"Invalid 'count'.\");if(e<1||Math.round(e)!==e)throw new Error(\"Invalid 'count'.\");for(E(this,y,e,\"f\");_(this,m,\"f\")&&_(this,m,\"f\").length>e;)_(this,m,\"f\").shift()}getMaxImageCount(){return _(this,y,\"f\")}getImageCount(){return _(this,m,\"f\").length}clearBuffer(){_(this,m,\"f\").length=0}isBufferEmpty(){return 0===_(this,m,\"f\").length}setBufferOverflowProtectionMode(_){E(this,w,_,\"f\")}getBufferOverflowProtectionMode(){return _(this,w,\"f\")}setColourChannelUsageType(_){E(this,v,_,\"f\")}getColourChannelUsageType(){return _(this,v,\"f\")}}m=new WeakMap,y=new WeakMap,w=new WeakMap,V=new WeakMap,b=new WeakMap,v=new WeakMap,p=new WeakSet,Y=function(E){if(\"number\"!=typeof E)throw new TypeError(\"Invalid 'imageId'.\");return _(this,m,\"f\").findIndex((_=>{var e;return(null===(e=_.tag)||void 0===e?void 0:e.imageId)===E}))};const k=_=>_&&\"object\"==typeof _&&\"function\"==typeof _.then;class X extends Promise{get status(){return this._s}get isPending(){return\"pending\"===this._s}get isFulfilled(){return\"fulfilled\"===this._s}get isRejected(){return\"rejected\"===this._s}get task(){return this._task}set task(_){let E;this._task=_,k(_)?E=_:\"function\"==typeof _&&(E=new Promise(_)),E&&(async()=>{try{const e=await E;_===this._task&&this.resolve(e)}catch(E){_===this._task&&this.reject(E)}})()}get isEmpty(){return null==this._task}constructor(_){let E,e;super(((_,t)=>{E=_,e=t})),this._s=\"pending\",this.resolve=_=>{this.isPending&&(k(_)?this.task=_:(this._s=\"fulfilled\",E(_)))},this.reject=_=>{this.isPending&&(this._s=\"rejected\",e(_))},this.task=_}}let Z,W,x,K,j;\"undefined\"!=typeof navigator&&(Z=navigator,W=Z.userAgent,x=Z.platform,K=Z.mediaDevices),function(){if(!r){const _={Edge:{search:\"Edg\",verSearch:\"Edg\"},OPR:null,Chrome:null,Safari:{str:Z.vendor,search:\"Apple\",verSearch:[\"Version\",\"iPhone OS\",\"CPU OS\"]},Firefox:null,Explorer:{search:\"MSIE\",verSearch:\"MSIE\"}},E={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:x,search:\"Win\"},Mac:{str:x},Linux:{str:x}};let e=\"unknownBrowser\",t=0,I=\"unknownOS\";for(let E in _){const I=_[E]||{};let r=I.str||W,s=I.search||E,n=I.verStr||W,C=I.verSearch||E;if(C instanceof Array||(C=[C]),-1!=r.indexOf(s)){e=E;for(let _ of C){let E=n.indexOf(_);if(-1!=E){t=parseFloat(n.substring(E+_.length+1));break}}break}}for(let _ in E){const e=E[_]||{};let t=e.str||W,r=e.search||_;if(-1!=t.indexOf(r)){I=_;break}}\"Linux\"==I&&-1!=W.indexOf(\"Windows NT\")&&(I=\"HarmonyOS\"),j={browser:e,version:t,OS:I}}r&&(j={browser:\"ssr\",version:0,OS:\"ssr\"})}();const J=\"undefined\"!=typeof WebAssembly&&W&&!(/Safari/.test(W)&&!/Chrome/.test(W)&&/\\(.+\\s11_2_([2-6]).*\\)/.test(W)),Q=!(\"undefined\"==typeof Worker),$=!(!K||!K.getUserMedia),z=async()=>{let _=!1;if($)try{(await K.getUserMedia({video:!0})).getTracks().forEach((_=>{_.stop()})),_=!0}catch(_){}return _};\"Chrome\"===j.browser&&j.version>66||\"Safari\"===j.browser&&j.version>13||\"OPR\"===j.browser&&j.version>43||\"Edge\"===j.browser&&j.version;const q={},__=async _=>{let E=\"string\"==typeof _?[_]:_,e=[];for(let _ of E)e.push(q[_]=q[_]||new X);await Promise.all(e)},E_=async(_,E)=>{let e,t=\"string\"==typeof _?[_]:_,I=[];for(let _ of t){let t;I.push(t=q[_]=q[_]||new X(e=e||E())),t.isEmpty&&(t.task=e=e||E())}await Promise.all(I)};let e_,t_=0;const I_=()=>t_++,r_={};let s_;const n_=_=>{s_=_,e_&&e_.postMessage({type:\"setBLog\",body:{value:!!_}})};let C_=!1;const i_=_=>{C_=_,e_&&e_.postMessage({type:\"setBDebug\",body:{value:!!_}})},o_={},A_={},N_={std:{version:\"1.4.10\",path:n(s+\"../../dynamsoft-capture-vision-std@1.4.10/dist/\")},core:{version:\"3.4.20\",path:s}},a_={dip:{wasm:!0}},T_={},R_=async _=>{let E;_ instanceof Array||(_=_?[_]:[]);let e=q.core;E=!e||e.isEmpty;let t=new Map;const I=_=>{if(\"std\"==(_=_.toLowerCase())||\"core\"==_)return;if(!a_[_])throw Error(\"The '\"+_+\"' module cannot be found.\");let E=a_[_].deps;if(null==E?void 0:E.length)for(let _ of E)I(_);let e=q[_];t.has(_)||t.set(_,!e||e.isEmpty)};for(let E of _)I(E);let r=[];E&&r.push(\"core\"),r.push(...t.keys());const s=[...t.entries()].filter((_=>!_[1])).map((_=>_[0]));await E_(r,(async()=>{const _=[...t.entries()].filter((_=>_[1])).map((_=>_[0]));await __(s);const e=g(T_,N_),I={};for(let E of _)I[E]=a_[E];const r={engineResourcePaths:e,autoResources:I,names:_};let n=new X;if(E){r.needLoadCore=!0;let _=e.core+L_._workerName;_.startsWith(location.origin)||(_=await fetch(_).then((_=>_.blob())).then((_=>URL.createObjectURL(_)))),e_=new Worker(_),e_.onerror=_=>{let E=new Error(_.message);n.reject(E)},e_.addEventListener(\"message\",(_=>{let E=_.data?_.data:_,e=E.type,t=E.id,I=E.body;switch(e){case\"log\":s_&&s_(E.message);break;case\"task\":try{r_[t](I),delete r_[t]}catch(_){throw delete r_[t],_}break;case\"event\":try{r_[t](I)}catch(_){throw _}break;default:console.log(_)}})),r.bLog=!!s_,r.bd=C_,r.dm=location.origin.startsWith(\"http\")?location.origin:\"https://localhost\"}else await __(\"core\");let C=t_++;r_[C]=_=>{if(_.success)Object.assign(o_,_.versions),\"{}\"!==JSON.stringify(_.versions)&&(L_._versions=_.versions),n.resolve(void 0);else{const E=Error(_.message);_.stack&&(E.stack=_.stack),n.reject(E)}},e_.postMessage({type:\"loadWasm\",body:r,id:C}),await n}))};class L_{static get engineResourcePaths(){return T_}static set engineResourcePaths(_){Object.assign(T_,_)}static get bSupportDce4Module(){return this._bSupportDce4Module}static get bSupportIRTModule(){return this._bSupportIRTModule}static get versions(){return this._versions}static get _onLog(){return s_}static set _onLog(_){n_(_)}static get _bDebug(){return C_}static set _bDebug(_){i_(_)}static isModuleLoaded(_){return _=(_=_||\"core\").toLowerCase(),!!q[_]&&q[_].isFulfilled}static async loadWasm(_){return await R_(_)}static async detectEnvironment(){return await(async()=>({wasm:J,worker:Q,getUserMedia:$,camera:await z(),browser:j.browser,version:j.version,OS:j.OS}))()}static async getModuleVersion(){return await new Promise(((_,E)=>{let e=I_();r_[e]=async e=>{if(e.success)return _(e.versions);{let _=new Error(e.message);return _.stack=e.stack+\"\\n\"+_.stack,E(_)}},e_.postMessage({type:\"getModuleVersion\",id:e})}))}static getVersion(){const _=o_.core&&o_.core.worker,E=o_.core&&o_.core.wasm;return`3.4.20(Worker: ${_||\"Not Loaded\"}, Wasm: ${E||\"Not Loaded\"})`}static enableLogging(){H._onLog=console.log,L_._onLog=console.log}static disableLogging(){H._onLog=null,L_._onLog=null}static async cfd(_){return await new Promise(((E,e)=>{let t=I_();r_[t]=async _=>{if(_.success)return E();{let E=new Error(_.message);return E.stack=_.stack+\"\\n\"+E.stack,e(E)}},e_.postMessage({type:\"cfd\",id:t,body:{count:_}})}))}}var D_,O_,c_,S_,l_,f_,h_,d_;L_._bSupportDce4Module=-1,L_._bSupportIRTModule=-1,L_._versions=null,L_._workerName=\"core.worker.js\",L_.browserInfo=j,function(_){_[_.CRIT_ORIGINAL_IMAGE=1]=\"CRIT_ORIGINAL_IMAGE\",_[_.CRIT_BARCODE=2]=\"CRIT_BARCODE\",_[_.CRIT_TEXT_LINE=4]=\"CRIT_TEXT_LINE\",_[_.CRIT_DETECTED_QUAD=8]=\"CRIT_DETECTED_QUAD\",_[_.CRIT_NORMALIZED_IMAGE=16]=\"CRIT_NORMALIZED_IMAGE\",_[_.CRIT_PARSED_RESULT=32]=\"CRIT_PARSED_RESULT\"}(D_||(D_={})),function(_){_[_.CT_NORMAL_INTERSECTED=0]=\"CT_NORMAL_INTERSECTED\",_[_.CT_T_INTERSECTED=1]=\"CT_T_INTERSECTED\",_[_.CT_CROSS_INTERSECTED=2]=\"CT_CROSS_INTERSECTED\",_[_.CT_NOT_INTERSECTED=3]=\"CT_NOT_INTERSECTED\"}(O_||(O_={})),function(_){_[_.EC_OK=0]=\"EC_OK\",_[_.EC_UNKNOWN=-1e4]=\"EC_UNKNOWN\",_[_.EC_NO_MEMORY=-10001]=\"EC_NO_MEMORY\",_[_.EC_NULL_POINTER=-10002]=\"EC_NULL_POINTER\",_[_.EC_LICENSE_INVALID=-10003]=\"EC_LICENSE_INVALID\",_[_.EC_LICENSE_EXPIRED=-10004]=\"EC_LICENSE_EXPIRED\",_[_.EC_FILE_NOT_FOUND=-10005]=\"EC_FILE_NOT_FOUND\",_[_.EC_FILE_TYPE_NOT_SUPPORTED=-10006]=\"EC_FILE_TYPE_NOT_SUPPORTED\",_[_.EC_BPP_NOT_SUPPORTED=-10007]=\"EC_BPP_NOT_SUPPORTED\",_[_.EC_INDEX_INVALID=-10008]=\"EC_INDEX_INVALID\",_[_.EC_CUSTOM_REGION_INVALID=-10010]=\"EC_CUSTOM_REGION_INVALID\",_[_.EC_IMAGE_READ_FAILED=-10012]=\"EC_IMAGE_READ_FAILED\",_[_.EC_TIFF_READ_FAILED=-10013]=\"EC_TIFF_READ_FAILED\",_[_.EC_DIB_BUFFER_INVALID=-10018]=\"EC_DIB_BUFFER_INVALID\",_[_.EC_PDF_READ_FAILED=-10021]=\"EC_PDF_READ_FAILED\",_[_.EC_PDF_DLL_MISSING=-10022]=\"EC_PDF_DLL_MISSING\",_[_.EC_PAGE_NUMBER_INVALID=-10023]=\"EC_PAGE_NUMBER_INVALID\",_[_.EC_CUSTOM_SIZE_INVALID=-10024]=\"EC_CUSTOM_SIZE_INVALID\",_[_.EC_TIMEOUT=-10026]=\"EC_TIMEOUT\",_[_.EC_JSON_PARSE_FAILED=-10030]=\"EC_JSON_PARSE_FAILED\",_[_.EC_JSON_TYPE_INVALID=-10031]=\"EC_JSON_TYPE_INVALID\",_[_.EC_JSON_KEY_INVALID=-10032]=\"EC_JSON_KEY_INVALID\",_[_.EC_JSON_VALUE_INVALID=-10033]=\"EC_JSON_VALUE_INVALID\",_[_.EC_JSON_NAME_KEY_MISSING=-10034]=\"EC_JSON_NAME_KEY_MISSING\",_[_.EC_JSON_NAME_VALUE_DUPLICATED=-10035]=\"EC_JSON_NAME_VALUE_DUPLICATED\",_[_.EC_TEMPLATE_NAME_INVALID=-10036]=\"EC_TEMPLATE_NAME_INVALID\",_[_.EC_JSON_NAME_REFERENCE_INVALID=-10037]=\"EC_JSON_NAME_REFERENCE_INVALID\",_[_.EC_PARAMETER_VALUE_INVALID=-10038]=\"EC_PARAMETER_VALUE_INVALID\",_[_.EC_DOMAIN_NOT_MATCH=-10039]=\"EC_DOMAIN_NOT_MATCH\",_[_.EC_RESERVED_INFO_NOT_MATCH=-10040]=\"EC_RESERVED_INFO_NOT_MATCH\",_[_.EC_LICENSE_KEY_NOT_MATCH=-10043]=\"EC_LICENSE_KEY_NOT_MATCH\",_[_.EC_REQUEST_FAILED=-10044]=\"EC_REQUEST_FAILED\",_[_.EC_LICENSE_INIT_FAILED=-10045]=\"EC_LICENSE_INIT_FAILED\",_[_.EC_SET_MODE_ARGUMENT_ERROR=-10051]=\"EC_SET_MODE_ARGUMENT_ERROR\",_[_.EC_LICENSE_CONTENT_INVALID=-10052]=\"EC_LICENSE_CONTENT_INVALID\",_[_.EC_LICENSE_KEY_INVALID=-10053]=\"EC_LICENSE_KEY_INVALID\",_[_.EC_LICENSE_DEVICE_RUNS_OUT=-10054]=\"EC_LICENSE_DEVICE_RUNS_OUT\",_[_.EC_GET_MODE_ARGUMENT_ERROR=-10055]=\"EC_GET_MODE_ARGUMENT_ERROR\",_[_.EC_IRT_LICENSE_INVALID=-10056]=\"EC_IRT_LICENSE_INVALID\",_[_.EC_FILE_SAVE_FAILED=-10058]=\"EC_FILE_SAVE_FAILED\",_[_.EC_STAGE_TYPE_INVALID=-10059]=\"EC_STAGE_TYPE_INVALID\",_[_.EC_IMAGE_ORIENTATION_INVALID=-10060]=\"EC_IMAGE_ORIENTATION_INVALID\",_[_.EC_CONVERT_COMPLEX_TEMPLATE_ERROR=-10061]=\"EC_CONVERT_COMPLEX_TEMPLATE_ERROR\",_[_.EC_CALL_REJECTED_WHEN_CAPTURING=-10062]=\"EC_CALL_REJECTED_WHEN_CAPTURING\",_[_.EC_NO_IMAGE_SOURCE=-10063]=\"EC_NO_IMAGE_SOURCE\",_[_.EC_READ_DIRECTORY_FAILED=-10064]=\"EC_READ_DIRECTORY_FAILED\",_[_.EC_MODULE_NOT_FOUND=-10065]=\"EC_MODULE_NOT_FOUND\",_[_.EC_MULTI_PAGES_NOT_SUPPORTED=-10066]=\"EC_MULTI_PAGES_NOT_SUPPORTED\",_[_.EC_FILE_ALREADY_EXISTS=-10067]=\"EC_FILE_ALREADY_EXISTS\",_[_.EC_CREATE_FILE_FAILED=-10068]=\"EC_CREATE_FILE_FAILED\",_[_.EC_IMGAE_DATA_INVALID=-10069]=\"EC_IMGAE_DATA_INVALID\",_[_.EC_IMAGE_SIZE_NOT_MATCH=-10070]=\"EC_IMAGE_SIZE_NOT_MATCH\",_[_.EC_IMAGE_PIXEL_FORMAT_NOT_MATCH=-10071]=\"EC_IMAGE_PIXEL_FORMAT_NOT_MATCH\",_[_.EC_SECTION_LEVEL_RESULT_IRREPLACEABLE=-10072]=\"EC_SECTION_LEVEL_RESULT_IRREPLACEABLE\",_[_.EC_AXIS_DEFINITION_INCORRECT=-10073]=\"EC_AXIS_DEFINITION_INCORRECT\",_[_.EC_RESULT_TYPE_MISMATCH_IRREPLACEABLE=-10074]=\"EC_RESULT_TYPE_MISMATCH_IRREPLACEABLE\",_[_.EC_PDF_LIBRARY_LOAD_FAILED=-10075]=\"EC_PDF_LIBRARY_LOAD_FAILED\",_[_.EC_NO_LICENSE=-2e4]=\"EC_NO_LICENSE\",_[_.EC_HANDSHAKE_CODE_INVALID=-20001]=\"EC_HANDSHAKE_CODE_INVALID\",_[_.EC_LICENSE_BUFFER_FAILED=-20002]=\"EC_LICENSE_BUFFER_FAILED\",_[_.EC_LICENSE_SYNC_FAILED=-20003]=\"EC_LICENSE_SYNC_FAILED\",_[_.EC_DEVICE_NOT_MATCH=-20004]=\"EC_DEVICE_NOT_MATCH\",_[_.EC_BIND_DEVICE_FAILED=-20005]=\"EC_BIND_DEVICE_FAILED\",_[_.EC_INSTANCE_COUNT_OVER_LIMIT=-20008]=\"EC_INSTANCE_COUNT_OVER_LIMIT\",_[_.EC_LICENSE_INIT_SEQUENCE_FAILED=-20009]=\"EC_LICENSE_INIT_SEQUENCE_FAILED\",_[_.EC_TRIAL_LICENSE=-20010]=\"EC_TRIAL_LICENSE\",_[_.EC_FAILED_TO_REACH_DLS=-20200]=\"EC_FAILED_TO_REACH_DLS\",_[_.EC_LICENSE_CACHE_USED=-20012]=\"EC_LICENSE_CACHE_USED\",_[_.EC_BARCODE_FORMAT_INVALID=-30009]=\"EC_BARCODE_FORMAT_INVALID\",_[_.EC_QR_LICENSE_INVALID=-30016]=\"EC_QR_LICENSE_INVALID\",_[_.EC_1D_LICENSE_INVALID=-30017]=\"EC_1D_LICENSE_INVALID\",_[_.EC_PDF417_LICENSE_INVALID=-30019]=\"EC_PDF417_LICENSE_INVALID\",_[_.EC_DATAMATRIX_LICENSE_INVALID=-30020]=\"EC_DATAMATRIX_LICENSE_INVALID\",_[_.EC_CUSTOM_MODULESIZE_INVALID=-30025]=\"EC_CUSTOM_MODULESIZE_INVALID\",_[_.EC_AZTEC_LICENSE_INVALID=-30041]=\"EC_AZTEC_LICENSE_INVALID\",_[_.EC_PATCHCODE_LICENSE_INVALID=-30046]=\"EC_PATCHCODE_LICENSE_INVALID\",_[_.EC_POSTALCODE_LICENSE_INVALID=-30047]=\"EC_POSTALCODE_LICENSE_INVALID\",_[_.EC_DPM_LICENSE_INVALID=-30048]=\"EC_DPM_LICENSE_INVALID\",_[_.EC_FRAME_DECODING_THREAD_EXISTS=-30049]=\"EC_FRAME_DECODING_THREAD_EXISTS\",_[_.EC_STOP_DECODING_THREAD_FAILED=-30050]=\"EC_STOP_DECODING_THREAD_FAILED\",_[_.EC_MAXICODE_LICENSE_INVALID=-30057]=\"EC_MAXICODE_LICENSE_INVALID\",_[_.EC_GS1_DATABAR_LICENSE_INVALID=-30058]=\"EC_GS1_DATABAR_LICENSE_INVALID\",_[_.EC_GS1_COMPOSITE_LICENSE_INVALID=-30059]=\"EC_GS1_COMPOSITE_LICENSE_INVALID\",_[_.EC_DOTCODE_LICENSE_INVALID=-30061]=\"EC_DOTCODE_LICENSE_INVALID\",_[_.EC_PHARMACODE_LICENSE_INVALID=-30062]=\"EC_PHARMACODE_LICENSE_INVALID\",_[_.EC_CHARACTER_MODEL_FILE_NOT_FOUND=-40100]=\"EC_CHARACTER_MODEL_FILE_NOT_FOUND\",_[_.EC_TEXT_LINE_GROUP_LAYOUT_CONFLICT=-40101]=\"EC_TEXT_LINE_GROUP_LAYOUT_CONFLICT\",_[_.EC_TEXT_LINE_GROUP_REGEX_CONFLICT=-40102]=\"EC_TEXT_LINE_GROUP_REGEX_CONFLICT\",_[_.EC_QUADRILATERAL_INVALID=-50057]=\"EC_QUADRILATERAL_INVALID\",_[_.EC_PANORAMA_LICENSE_INVALID=-70060]=\"EC_PANORAMA_LICENSE_INVALID\",_[_.EC_RESOURCE_PATH_NOT_EXIST=-90001]=\"EC_RESOURCE_PATH_NOT_EXIST\",_[_.EC_RESOURCE_LOAD_FAILED=-90002]=\"EC_RESOURCE_LOAD_FAILED\",_[_.EC_CODE_SPECIFICATION_NOT_FOUND=-90003]=\"EC_CODE_SPECIFICATION_NOT_FOUND\",_[_.EC_FULL_CODE_EMPTY=-90004]=\"EC_FULL_CODE_EMPTY\",_[_.EC_FULL_CODE_PREPROCESS_FAILED=-90005]=\"EC_FULL_CODE_PREPROCESS_FAILED\",_[_.EC_ZA_DL_LICENSE_INVALID=-90006]=\"EC_ZA_DL_LICENSE_INVALID\",_[_.EC_AAMVA_DL_ID_LICENSE_INVALID=-90007]=\"EC_AAMVA_DL_ID_LICENSE_INVALID\",_[_.EC_AADHAAR_LICENSE_INVALID=-90008]=\"EC_AADHAAR_LICENSE_INVALID\",_[_.EC_MRTD_LICENSE_INVALID=-90009]=\"EC_MRTD_LICENSE_INVALID\",_[_.EC_VIN_LICENSE_INVALID=-90010]=\"EC_VIN_LICENSE_INVALID\",_[_.EC_CUSTOMIZED_CODE_TYPE_LICENSE_INVALID=-90011]=\"EC_CUSTOMIZED_CODE_TYPE_LICENSE_INVALID\",_[_.EC_LICENSE_WARNING=-10076]=\"EC_LICENSE_WARNING\",_[_.EC_BARCODE_READER_LICENSE_NOT_FOUND=-30063]=\"EC_BARCODE_READER_LICENSE_NOT_FOUND\",_[_.EC_LABEL_RECOGNIZER_LICENSE_NOT_FOUND=-40103]=\"EC_LABEL_RECOGNIZER_LICENSE_NOT_FOUND\",_[_.EC_DOCUMENT_NORMALIZER_LICENSE_NOT_FOUND=-50058]=\"EC_DOCUMENT_NORMALIZER_LICENSE_NOT_FOUND\",_[_.EC_CODE_PARSER_LICENSE_NOT_FOUND=-90012]=\"EC_CODE_PARSER_LICENSE_NOT_FOUND\"}(c_||(c_={})),function(_){_[_.GEM_SKIP=0]=\"GEM_SKIP\",_[_.GEM_AUTO=1]=\"GEM_AUTO\",_[_.GEM_GENERAL=2]=\"GEM_GENERAL\",_[_.GEM_GRAY_EQUALIZE=4]=\"GEM_GRAY_EQUALIZE\",_[_.GEM_GRAY_SMOOTH=8]=\"GEM_GRAY_SMOOTH\",_[_.GEM_SHARPEN_SMOOTH=16]=\"GEM_SHARPEN_SMOOTH\",_[_.GEM_REV=-2147483648]=\"GEM_REV\"}(S_||(S_={})),function(_){_[_.GTM_SKIP=0]=\"GTM_SKIP\",_[_.GTM_INVERTED=1]=\"GTM_INVERTED\",_[_.GTM_ORIGINAL=2]=\"GTM_ORIGINAL\",_[_.GTM_AUTO=4]=\"GTM_AUTO\",_[_.GTM_REV=-2147483648]=\"GTM_REV\"}(l_||(l_={})),function(_){_[_.ITT_FILE_IMAGE=0]=\"ITT_FILE_IMAGE\",_[_.ITT_VIDEO_FRAME=1]=\"ITT_VIDEO_FRAME\"}(f_||(f_={})),function(_){_[_.PDFRM_VECTOR=1]=\"PDFRM_VECTOR\",_[_.PDFRM_RASTER=2]=\"PDFRM_RASTER\",_[_.PDFRM_REV=-2147483648]=\"PDFRM_REV\"}(h_||(h_={})),function(_){_[_.RDS_RASTERIZED_PAGES=0]=\"RDS_RASTERIZED_PAGES\",_[_.RDS_EXTRACTED_IMAGES=1]=\"RDS_EXTRACTED_IMAGES\"}(d_||(d_={}));const P_={IRUT_NULL:BigInt(0),IRUT_COLOUR_IMAGE:BigInt(1),IRUT_SCALED_DOWN_COLOUR_IMAGE:BigInt(2),IRUT_GRAYSCALE_IMAGE:BigInt(4),IRUT_TRANSOFORMED_GRAYSCALE_IMAGE:BigInt(8),IRUT_ENHANCED_GRAYSCALE_IMAGE:BigInt(16),IRUT_PREDETECTED_REGIONS:BigInt(32),IRUT_BINARY_IMAGE:BigInt(64),IRUT_TEXTURE_DETECTION_RESULT:BigInt(128),IRUT_TEXTURE_REMOVED_GRAYSCALE_IMAGE:BigInt(256),IRUT_TEXTURE_REMOVED_BINARY_IMAGE:BigInt(512),IRUT_CONTOURS:BigInt(1024),IRUT_LINE_SEGMENTS:BigInt(2048),IRUT_TEXT_ZONES:BigInt(4096),IRUT_TEXT_REMOVED_BINARY_IMAGE:BigInt(8192),IRUT_CANDIDATE_BARCODE_ZONES:BigInt(16384),IRUT_LOCALIZED_BARCODES:BigInt(32768),IRUT_SCALED_UP_BARCODE_IMAGE:BigInt(65536),IRUT_DEFORMATION_RESISTED_BARCODE_IMAGE:BigInt(1<<17),IRUT_COMPLEMENTED_BARCODE_IMAGE:BigInt(1<<18),IRUT_DECODED_BARCODES:BigInt(1<<19),IRUT_LONG_LINES:BigInt(1<<20),IRUT_CORNERS:BigInt(1<<21),IRUT_CANDIDATE_QUAD_EDGES:BigInt(1<<22),IRUT_DETECTED_QUADS:BigInt(1<<23),IRUT_LOCALIZED_TEXT_LINES:BigInt(1<<24),IRUT_RECOGNIZED_TEXT_LINES:BigInt(1<<25),IRUT_NORMALIZED_IMAGES:BigInt(1<<26),IRUT_SHORT_LINES:BigInt(1<<27),IRUT_RAW_TEXT_LINES:BigInt(1<<28),IRUT_ALL:BigInt(\"0xFFFFFFFFFFFFFFFF\")};var g_,M_;!function(_){_[_.ROET_PREDETECTED_REGION=0]=\"ROET_PREDETECTED_REGION\",_[_.ROET_LOCALIZED_BARCODE=1]=\"ROET_LOCALIZED_BARCODE\",_[_.ROET_DECODED_BARCODE=2]=\"ROET_DECODED_BARCODE\",_[_.ROET_LOCALIZED_TEXT_LINE=3]=\"ROET_LOCALIZED_TEXT_LINE\",_[_.ROET_RECOGNIZED_TEXT_LINE=4]=\"ROET_RECOGNIZED_TEXT_LINE\",_[_.ROET_DETECTED_QUAD=5]=\"ROET_DETECTED_QUAD\",_[_.ROET_NORMALIZED_IMAGE=6]=\"ROET_NORMALIZED_IMAGE\",_[_.ROET_SOURCE_IMAGE=7]=\"ROET_SOURCE_IMAGE\",_[_.ROET_TARGET_ROI=8]=\"ROET_TARGET_ROI\"}(g_||(g_={})),function(_){_[_.ST_NULL=0]=\"ST_NULL\",_[_.ST_REGION_PREDETECTION=1]=\"ST_REGION_PREDETECTION\",_[_.ST_BARCODE_LOCALIZATION=2]=\"ST_BARCODE_LOCALIZATION\",_[_.ST_BARCODE_DECODING=3]=\"ST_BARCODE_DECODING\",_[_.ST_TEXT_LINE_LOCALIZATION=4]=\"ST_TEXT_LINE_LOCALIZATION\",_[_.ST_TEXT_LINE_RECOGNITION=5]=\"ST_TEXT_LINE_RECOGNITION\",_[_.ST_DOCUMENT_DETECTION=6]=\"ST_DOCUMENT_DETECTION\",_[_.ST_DOCUMENT_NORMALIZATION=7]=\"ST_DOCUMENT_NORMALIZATION\"}(M_||(M_={}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9keW5hbXNvZnQtY29yZS9kaXN0L2NvcmUuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixvRkFBb0YsNElBQTRJLHFEQUFxRCxzQkFBc0IsaUVBQWlFLG9GQUFvRiwySUFBMkksbURBQW1ELFVBQVUsZ0VBQWdFLGdFQUFnRSxTQUFTLGVBQWUsc1NBQXNTLFNBQVMsZUFBZSx3bEJBQXdsQixTQUFTLEdBQUcseUNBQXlDLCtCQUErQixrREFBa0QsNEJBQTRCLEtBQUsscUJBQXFCLDRCQUE0QiwyQ0FBMkMsV0FBVyxVQUFVLHdCQUF3QixLQUFLLGtDQUFrQyxrQkFBa0IsbUNBQW1DLGswQ0FBazBDLHNCQUFzQixrQ0FBa0MseUJBQXlCLG1FQUFtRSw0REFBNEQsZ0JBQWdCLDhDQUE4QyxHQUFHLGNBQWMsMkVBQTJFLEdBQUcsZUFBZSxHQUFHLGdCQUFnQixHQUFHLFlBQVksZ0JBQWdCLGtDQUFrQyxZQUFZLHVCQUF1QixLQUFLLGtCQUFrQixrQkFBa0Isc0NBQXNDLHVHQUF1RyxvREFBb0QsV0FBVyxXQUFXLGdCQUFnQixVQUFVLFdBQVcsaUtBQWlLLGdCQUFnQixFQUFFLEtBQUssR0FBRyxhQUFhLDBJQUEwSSxTQUFTLElBQUksa2NBQWtjLGlEQUFpRCxJQUFJLHFCQUFxQixvQkFBb0IseUJBQXlCLEVBQUUsS0FBSyx1QkFBdUIsd0JBQXdCLGNBQWMsRUFBRSxFQUFFLEVBQUUsTUFBTSw2REFBNkQsZ0NBQWdDLFlBQVksU0FBUyxZQUFZLFNBQVMsZUFBZSx5Q0FBeUMsa0NBQWtDLDBCQUEwQixzQkFBc0Isd0JBQXdCLFdBQVcsZUFBZSxhQUFhLGlDQUFpQyxpQkFBaUIsZ0JBQWdCLGVBQWUs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LEdBQUcsVUFBVSwrbkNBQStuQyxVQUFVLGFBQWEscWRBQXFkLFdBQVcsZUFBZSxvYUFBb2EsV0FBVyxHQUFtdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2R5bmFtc29mdC1jb3JlL2Rpc3QvY29yZS5lc20uanM/YjRjYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIER5bmFtc29mdCBKYXZhU2NyaXB0IExpYnJhcnlcbiAqIEBwcm9kdWN0IER5bmFtc29mdCBDb3JlIEpTIEVkaXRpb25cbiAqIEB3ZWJzaXRlIGh0dHBzOi8vd3d3LmR5bmFtc29mdC5jb21cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IDIwMjQsIER5bmFtc29mdCBDb3Jwb3JhdGlvblxuICogQGF1dGhvciBEeW5hbXNvZnRcbiAqIEB2ZXJzaW9uIDMuNC4yMFxuICogQGZpbGVvdmVydmlldyBEeW5hbXNvZnQgSmF2YVNjcmlwdCBMaWJyYXJ5IGZvciBDb3JlXG4gKiBNb3JlIGluZm8gb24gRHluYW1zb2Z0IENvcmUgSlM6IGh0dHBzOi8vd3d3LmR5bmFtc29mdC5jb20vY2FwdHVyZS12aXNpb24vZG9jcy93ZWIvcHJvZ3JhbW1pbmcvamF2YXNjcmlwdC9hcGktcmVmZXJlbmNlL2NvcmUvY29yZS1tb2R1bGUuaHRtbFxuICovXG5mdW5jdGlvbiBfKF8sRSxlLHQpe2lmKFwiYVwiPT09ZSYmIXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBFP18hPT1FfHwhdDohRS5oYXMoXykpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtyZXR1cm5cIm1cIj09PWU/dDpcImFcIj09PWU/dC5jYWxsKF8pOnQ/dC52YWx1ZTpFLmdldChfKX1mdW5jdGlvbiBFKF8sRSxlLHQsSSl7aWYoXCJtXCI9PT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7aWYoXCJhXCI9PT10JiYhSSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIEU/XyE9PUV8fCFJOiFFLmhhcyhfKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7cmV0dXJuXCJhXCI9PT10P0kuY2FsbChfLGUpOkk/SS52YWx1ZT1lOkUuc2V0KF8sZSksZX12YXIgZSx0LEk7XCJmdW5jdGlvblwiPT10eXBlb2YgU3VwcHJlc3NlZEVycm9yJiZTdXBwcmVzc2VkRXJyb3IsZnVuY3Rpb24oXyl7X1tfLkJPUE1fQkxPQ0s9MF09XCJCT1BNX0JMT0NLXCIsX1tfLkJPUE1fVVBEQVRFPTFdPVwiQk9QTV9VUERBVEVcIn0oZXx8KGU9e30pKSxmdW5jdGlvbihfKXtfW18uQ0NVVF9BVVRPPTBdPVwiQ0NVVF9BVVRPXCIsX1tfLkNDVVRfRlVMTF9DSEFOTkVMPTFdPVwiQ0NVVF9GVUxMX0NIQU5ORUxcIixfW18uQ0NVVF9ZX0NIQU5ORUxfT05MWT0yXT1cIkNDVVRfWV9DSEFOTkVMX09OTFlcIixfW18uQ0NVVF9SR0JfUl9DSEFOTkVMX09OTFk9M109XCJDQ1VUX1JHQl9SX0NIQU5ORUxfT05MWVwiLF9bXy5DQ1VUX1JHQl9HX0NIQU5ORUxfT05MWT00XT1cIkNDVVRfUkdCX0dfQ0hBTk5FTF9PTkxZXCIsX1tfLkNDVVRfUkdCX0JfQ0hBTk5FTF9PTkxZPTVdPVwiQ0NVVF9SR0JfQl9DSEFOTkVMX09OTFlcIn0odHx8KHQ9e30pKSxmdW5jdGlvbihfKXtfW18uSVBGX0JJTkFSWT0wXT1cIklQRl9CSU5BUllcIixfW18uSVBGX0JJTkFSWUlOVkVSVEVEPTFdPVwiSVBGX0JJTkFSWUlOVkVSVEVEXCIsX1tfLklQRl9HUkFZU0NBTEVEPTJdPVwiSVBGX0dSQVlTQ0FMRURcIixfW18uSVBGX05WMjE9M109XCJJUEZfTlYyMVwiLF9bXy5JUEZfUkdCXzU2NT00XT1cIklQRl9SR0JfNTY1XCIsX1tfLklQRl9SR0JfNTU1PTVdPVwiSVBGX1JHQl81NTVcIixfW18uSVBGX1JHQl84ODg9Nl09XCJJUEZfUkdCXzg4OFwiLF9bXy5JUEZfQVJHQl84ODg4PTddPVwiSVBGX0FSR0JfODg4OFwiLF9bXy5JUEZfUkdCXzE2MTYxNj04XT1cIklQRl9SR0JfMTYxNjE2XCIsX1tfLklQRl9BUkdCXzE2MTYxNjE2PTldPVwiSVBGX0FSR0JfMTYxNjE2MTZcIixfW18uSVBGX0FCR1JfODg4OD0xMF09XCJJUEZfQUJHUl84ODg4XCIsX1tfLklQRl9BQkdSXzE2MTYxNjE2PTExXT1cIklQRl9BQkdSXzE2MTYxNjE2XCIsX1tfLklQRl9CR1JfODg4PTEyXT1cIklQRl9CR1JfODg4XCIsX1tfLklQRl9CSU5BUllfOD0xM109XCJJUEZfQklOQVJZXzhcIixfW18uSVBGX05WMTI9MTRdPVwiSVBGX05WMTJcIixfW18uSVBGX0JJTkFSWV84X0lOVkVSVEVEPTE1XT1cIklQRl9CSU5BUllfOF9JTlZFUlRFRFwifShJfHwoST17fSkpO2NvbnN0IHI9XCJ1bmRlZmluZWRcIj09dHlwZW9mIHNlbGYscz0oKCk9PntpZighciYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCl7bGV0IF89ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMsRT1fLmluZGV4T2YoXCI/XCIpO2lmKC0xIT1FKV89Xy5zdWJzdHJpbmcoMCxFKTtlbHNle2xldCBFPV8uaW5kZXhPZihcIiNcIik7LTEhPUUmJihfPV8uc3Vic3RyaW5nKDAsRSkpfXJldHVybiBfLnN1YnN0cmluZygwLF8ubGFzdEluZGV4T2YoXCIvXCIpKzEpfXJldHVyblwiLi9cIn0pKCksbj1fPT57aWYobnVsbD09XyYmKF89XCIuL1wiKSxyKTtlbHNle2xldCBFPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO0UuaHJlZj1fLF89RS5ocmVmfXJldHVybiBfLmVuZHNXaXRoKFwiL1wiKXx8KF8rPVwiL1wiKSxffSxDPV89Pk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChfKSxpPV89PkFycmF5LmlzQXJyYXk/QXJyYXkuaXNBcnJheShfKTpcIltvYmplY3QgQXJyYXldXCI9PT1DKF8pLG89Xz0+XCJbb2JqZWN0IEJvb2xlYW5dXCI9PT1DKF8pLEE9Xz0+XCJudW1iZXJcIj09dHlwZW9mIF8mJiFOdW1iZXIuaXNOYU4oXyksTj1fPT5udWxsIT09XyYmXCJvYmplY3RcIj09dHlwZW9mIF8mJiFBcnJheS5pc0FycmF5KF8pLGE9Xz0+ISFOKF8pJiYoISFBKF8ueCkmJighIUEoXy55KSYmKCEhQShfLnJhZGl1cykmJighKF8ucmFkaXVzPDApJiYoISFBKF8uc3RhcnRBbmdsZSkmJiEhQShfLmVuZEFuZ2xlKSkpKSkpLFQ9Xz0+ISFOKF8pJiYoISFpKF8ucG9pbnRzKSYmKDAhPV8ucG9pbnRzLmxlbmd0aCYmIV8ucG9pbnRzLnNvbWUoKF89PiFjKF8pKSkpKSxSPV89PiEhTihfKSYmKF8uYnl0ZXMgaW5zdGFuY2VvZiBVaW50OEFycmF5JiYoISFBKF8ud2lkdGgpJiYoIShfLndpZHRoPD0wKSYmKCEhQShfLmhlaWdodCkmJighKF8uaGVpZ2h0PD0wKSYmKCEhQShfLnN0cmlkZSkmJighKF8uc3RyaWRlPD0wKSYmKFwiZm9ybWF0XCJpbiBfJiYhKFwidGFnXCJpbiBfJiYhRChfLnRhZykpKSkpKSkpKSksTD1fPT4hIU4oXykmJighIUEoXy5sZWZ0KSYmKCEoXy5sZWZ0PDApJiYoISFBKF8udG9wKSYmKCEoXy50b3A8MCkmJighIUEoXy5yaWdodCkmJighKF8ucmlnaHQ8MCkmJighIUEoXy5ib3R0b20pJiYoIShfLmJvdHRvbTwwKSYmKCEoXy5sZWZ0Pj1fLnJpZ2h0KSYmKCEoXy50b3A+PV8uYm90dG9tKSYmISFvKF8uaXNNZWFzdXJlZEluUGVyY2VudGFnZSkpKSkpKSkpKSkpLEQ9Xz0+ISFOKF8pJiYoISFBKF8uaW1hZ2VJZCkmJlwidHlwZVwiaW4gXyksTz1fPT4hIU4oXykmJighIWMoXy5zdGFydFBvaW50KSYmKCEhYyhfLmVuZFBvaW50KSYmKF8uc3RhcnRQb2ludC54IT1fLmVuZFBvaW50Lnh8fF8uc3RhcnRQb2ludC55IT1fLmVuZFBvaW50LnkpKSksYz1fPT4hIU4oXykmJighIUEoXy54KSYmISFBKF8ueSkpLFM9Xz0+ISFOKF8pJiYoISFpKF8ucG9pbnRzKSYmKDAhPV8ucG9pbnRzLmxlbmd0aCYmIV8ucG9pbnRzLnNvbWUoKF89PiFjKF8pKSkpKSxsPV89PiEhTihfKSYmKCEhaShfLnBvaW50cykmJigwIT1fLnBvaW50cy5sZW5ndGgmJjQ9PV8ucG9pbnRzLmxlbmd0aCYmIV8ucG9pbnRzLnNvbWUoKF89PiFjKF8pKSkpKSxmPV89PiEhTihfKSYmKCEhQShfLngpJiYoISFBKF8ueSkmJighIUEoXy53aWR0aCkmJighKF8ud2lkdGg8MCkmJighIUEoXy5oZWlnaHQpJiYoIShfLmhlaWdodDwwKSYmIShcImlzTWVhc3VyZWRJblBlcmNlbnRhZ2VcImluIF8mJiFvKF8uaXNNZWFzdXJlZEluUGVyY2VudGFnZSkpKSkpKSkpO2FzeW5jIGZ1bmN0aW9uIGgoXyxFKXtyZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKChlLHQpPT57bGV0IEk9bmV3IFhNTEh0dHBSZXF1ZXN0O0kub3BlbihcIkdFVFwiLF8sITApLEkucmVzcG9uc2VUeXBlPUUsSS5zZW5kKCksSS5vbmxvYWRlbmQ9YXN5bmMoKT0+e0kuc3RhdHVzPDIwMHx8SS5zdGF0dXM+PTMwMD90KF8rXCIgXCIrSS5zdGF0dXMpOmUoSS5yZXNwb25zZSl9LEkub25lcnJvcj0oKT0+e3QobmV3IEVycm9yKFwiTmV0d29yayBFcnJvcjogXCIrSS5zdGF0dXNUZXh0KSl9fSkpfWZ1bmN0aW9uIGQoXyl7cmV0dXJuL14oaHR0cHM6XFwvXFwvd3d3XFwufGh0dHA6XFwvXFwvd3d3XFwufGh0dHBzOlxcL1xcL3xodHRwOlxcL1xcLyl8XlthLXpBLVowLTldezIsfShcXC5bYS16QS1aMC05XXsyLH0pKFxcLlthLXpBLVowLTldezIsfSk/Ly50ZXN0KF8pfWNvbnN0IFA9KF8sRSk9PntsZXQgZT1fLnNwbGl0KFwiLlwiKSx0PUUuc3BsaXQoXCIuXCIpO2ZvcihsZXQgXz0wO188ZS5sZW5ndGgmJl88dC5sZW5ndGg7KytfKXtsZXQgRT1lW19dLEk9dFtfXTtpZihFPT09SSljb250aW51ZTtsZXQgcj1wYXJzZUludChlW19dKSxzPXBhcnNlSW50KHRbX10pO3JldHVybiByPT09c3x8TnVtYmVyLmlzTmFOKHIpJiZOdW1iZXIuaXNOYU4ocyk/RTxJPy0xOjE6cjxzfHxOdW1iZXIuaXNOYU4ocikmJk51bWJlci5pc0ludGVnZXIocyk/LTE6MX1yZXR1cm4gZS5sZW5ndGg9PT10Lmxlbmd0aD8wOmUubGVuZ3RoPHQubGVuZ3RoPy0xOjF9LGc9KF8sRSk9Pntjb25zdCBlPXt9O2ZvcihsZXQgdCBpbiBFKXtjb25zdCBJPXQ7bGV0IHI9X1tJXTtyJiZcInN0cmluZ1wiIT10eXBlb2YgciYmci5wYXRoJiYocj1yLnBhdGgpLF8ucm9vdERpcmVjdG9yeSYmIV8ucm9vdERpcmVjdG9yeS5lbmRzV2l0aChcIi9cIikmJihfLnJvb3REaXJlY3Rvcnk9Xy5yb290RGlyZWN0b3J5K1wiL1wiKSx2b2lkIDA9PT1yP18ucm9vdERpcmVjdG9yeT9yPWAke18ucm9vdERpcmVjdG9yeX0ke01bSV19QCR7RVtJXS52ZXJzaW9ufS9kaXN0L2A6KHI9RVtJXS5wYXRoLHJ8fChyPUVbSV0pKTpyLnN0YXJ0c1dpdGgoXCJAZW5naW5lUm9vdERpcmVjdG9yeS9cIikmJihyPXIucmVwbGFjZShcIkBlbmdpbmVSb290RGlyZWN0b3J5L1wiLF8ucm9vdERpcmVjdG9yeSkpLGVbSV09bihyKX1yZXR1cm4gZX0sTT17c3RkOlwiZHluYW1zb2Z0LWNhcHR1cmUtdmlzaW9uLXN0ZFwiLGRpcDpcImR5bmFtc29mdC1pbWFnZS1wcm9jZXNzaW5nXCIsY29yZTpcImR5bmFtc29mdC1jb3JlXCIsZG5uOlwiZHluYW1zb2Z0LWNhcHR1cmUtdmlzaW9uLWRublwiLGxpY2Vuc2U6XCJkeW5hbXNvZnQtbGljZW5zZVwiLHV0aWxpdHk6XCJkeW5hbXNvZnQtdXRpbGl0eVwiLGN2cjpcImR5bmFtc29mdC1jYXB0dXJlLXZpc2lvbi1yb3V0ZXJcIixkYnI6XCJkeW5hbXNvZnQtYmFyY29kZS1yZWFkZXJcIixkbHI6XCJkeW5hbXNvZnQtbGFiZWwtcmVjb2duaXplclwiLGRkbjpcImR5bmFtc29mdC1kb2N1bWVudC1ub3JtYWxpemVyXCIsZGNwOlwiZHluYW1zb2Z0LWNvZGUtcGFyc2VyXCIsZGNwZDpcImR5bmFtc29mdC1jb2RlLXBhcnNlclwiLGRsckRhdGE6XCJkeW5hbXNvZnQtbGFiZWwtcmVjb2duaXplci1kYXRhXCIsZGNlOlwiZHluYW1zb2Z0LWNhbWVyYS1lbmhhbmNlclwifSx1PWFzeW5jKF8sRSxlKT0+YXdhaXQgbmV3IFByb21pc2UoKGFzeW5jKHQsSSk9Pnt0cnl7Y29uc3QgST1FLnNwbGl0KFwiLlwiKTtsZXQgcj1JW0kubGVuZ3RoLTFdO2NvbnN0IHM9YXdhaXQgVShgaW1hZ2UvJHtyfWAsXyk7SS5sZW5ndGg8PTEmJihyPVwicG5nXCIpO2NvbnN0IG49bmV3IEZpbGUoW3NdLEUse3R5cGU6YGltYWdlLyR7cn1gfSk7aWYoZSl7Y29uc3QgXz1VUkwuY3JlYXRlT2JqZWN0VVJMKG4pLGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7ZS5ocmVmPV8sZS5kb3dubG9hZD1FLGUuY2xpY2soKX1yZXR1cm4gdChuKX1jYXRjaChfKXtyZXR1cm4gSSgpfX0pKSxGPV89PntSKF8pJiYoXz1CKF8pKTtjb25zdCBFPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7RS53aWR0aD1fLndpZHRoLEUuaGVpZ2h0PV8uaGVpZ2h0O3JldHVybiBFLmdldENvbnRleHQoXCIyZFwiLHt3aWxsUmVhZEZyZXF1ZW50bHk6ITB9KS5wdXRJbWFnZURhdGEoXywwLDApLEV9LEc9KF8sRSk9PntSKEUpJiYoRT1CKEUpKTtjb25zdCBlPUYoRSk7bGV0IHQ9bmV3IEltYWdlLEk9ZS50b0RhdGFVUkwoXyk7cmV0dXJuIHQuc3JjPUksdH0sVT1hc3luYyhfLEUpPT57UihFKSYmKEU9QihFKSk7Y29uc3QgZT1GKEUpO3JldHVybiBuZXcgUHJvbWlzZSgoKEUsdCk9PntlLnRvQmxvYigoXz0+RShfKSksXyl9KSl9LEI9Xz0+e2xldCBFLGU9Xy5ieXRlcztpZighKGUmJmUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSl0aHJvdyBFcnJvcihcIlBhcmFtZXRlciB0eXBlIGVycm9yXCIpO2lmKE51bWJlcihfLmZvcm1hdCk9PT1JLklQRl9CR1JfODg4KXtjb25zdCBfPWUubGVuZ3RoLzM7RT1uZXcgVWludDhDbGFtcGVkQXJyYXkoNCpfKTtmb3IobGV0IHQ9MDt0PF87Kyt0KUVbNCp0XT1lWzMqdF0sRVs0KnQrMV09ZVszKnQrMV0sRVs0KnQrMl09ZVszKnQrMl0sRVs0KnQrM109MjU1fWVsc2UgaWYoTnVtYmVyKF8uZm9ybWF0KT09PUkuSVBGX1JHQl84ODgpe2NvbnN0IF89ZS5sZW5ndGgvMztFPW5ldyBVaW50OENsYW1wZWRBcnJheSg0Kl8pO2ZvcihsZXQgdD0wO3Q8XzsrK3QpRVs0KnRdPWVbMyp0KzJdLEVbNCp0KzFdPWVbMyp0KzFdLEVbNCp0KzJdPWVbMyp0XSxFWzQqdCszXT0yNTV9ZWxzZSBpZihOdW1iZXIoXy5mb3JtYXQpPT09SS5JUEZfR1JBWVNDQUxFRCl7Y29uc3QgXz1lLmxlbmd0aDtFPW5ldyBVaW50OENsYW1wZWRBcnJheSg0Kl8pO2ZvcihsZXQgdD0wO3Q8Xzt0KyspRVs0KnRdPUVbNCp0KzFdPUVbNCp0KzJdPWVbdF0sRVs0KnQrM109MjU1fWVsc2UgaWYoTnVtYmVyKF8uZm9ybWF0KT09PUkuSVBGX0JJTkFSWV84KXtjb25zdCB0PWUubGVuZ3RoLEk9Xy53aWR0aCxyPV8uaGVpZ2h0LHM9Xy5zdHJpZGU7RT1uZXcgVWludDhDbGFtcGVkQXJyYXkoSSpyKjQpO2ZvcihsZXQgXz0wO188dDtfKyspe2xldCB0PWVbX10scj1fJXMsbj1NYXRoLmZsb29yKF8vcyk7Zm9yKGxldCBfPTA7Xzw4O18rKyl7bGV0IGU9citfLHM9NCoobipJK2UpO2lmKGU+PUkpYnJlYWs7RVtzXT1FW3MrMV09RVtzKzJdPSgxMjgmdCkvMTI4KjI1NSxFW3MrM109MjU1LHQ8PD0xfX19ZWxzZSBpZihOdW1iZXIoXy5mb3JtYXQpPT09SS5JUEZfQUJHUl84ODg4KXtjb25zdCBfPWUubGVuZ3RoLzQ7RT1uZXcgVWludDhDbGFtcGVkQXJyYXkoZS5sZW5ndGgpO2ZvcihsZXQgdD0wO3Q8XzsrK3QpRVs0KnRdPWVbNCp0XSxFWzQqdCsxXT1lWzQqdCsxXSxFWzQqdCsyXT1lWzQqdCsyXSxFWzQqdCszXT1lWzQqdCszXX1lbHNlIGlmKE51bWJlcihfLmZvcm1hdCk9PT1JLklQRl9BUkdCXzg4ODgpe2NvbnN0IF89ZS5sZW5ndGgvNDtFPW5ldyBVaW50OENsYW1wZWRBcnJheShlLmxlbmd0aCk7Zm9yKGxldCB0PTA7dDxfOysrdClFWzQqdF09ZVs0KnQrMl0sRVs0KnQrMV09ZVs0KnQrMV0sRVs0KnQrMl09ZVs0KnRdLEVbNCp0KzNdPWVbNCp0KzNdfXJldHVybiBuZXcgSW1hZ2VEYXRhKEUsXy53aWR0aCxfLmhlaWdodCl9O3ZhciBwLG0seSx3LFYsYix2LFk7Y2xhc3MgSHtnZXQgX2lzRmV0Y2hpbmdTdGFydGVkKCl7cmV0dXJuIF8odGhpcyxWLFwiZlwiKX1jb25zdHJ1Y3Rvcigpe3AuYWRkKHRoaXMpLG0uc2V0KHRoaXMsW10pLHkuc2V0KHRoaXMsMSksdy5zZXQodGhpcyxlLkJPUE1fQkxPQ0spLFYuc2V0KHRoaXMsITEpLGIuc2V0KHRoaXMsdm9pZCAwKSx2LnNldCh0aGlzLHQuQ0NVVF9BVVRPKX1zZXRFcnJvckxpc3RlbmVyKF8pe31hZGRJbWFnZVRvQnVmZmVyKEUpe3ZhciB0O2lmKCFSKEUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdpbWFnZScuXCIpO2lmKChudWxsPT09KHQ9RS50YWcpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lmhhc093blByb3BlcnR5KFwiaW1hZ2VJZFwiKSkmJlwibnVtYmVyXCI9PXR5cGVvZiBFLnRhZy5pbWFnZUlkJiZ0aGlzLmhhc0ltYWdlKEUudGFnLmltYWdlSWQpKXRocm93IG5ldyBFcnJvcihcIkV4aXN0ZWQgaW1hZ2VJZC5cIik7aWYoXyh0aGlzLG0sXCJmXCIpLmxlbmd0aD49Xyh0aGlzLHksXCJmXCIpKXN3aXRjaChfKHRoaXMsdyxcImZcIikpe2Nhc2UgZS5CT1BNX0JMT0NLOmJyZWFrO2Nhc2UgZS5CT1BNX1VQREFURTppZihfKHRoaXMsbSxcImZcIikucHVzaChFKSxOKF8odGhpcyxiLFwiZlwiKSkmJkEoXyh0aGlzLGIsXCJmXCIpLmltYWdlSWQpJiYxPT1fKHRoaXMsYixcImZcIikua2VlcEluQnVmZmVyKWZvcig7Xyh0aGlzLG0sXCJmXCIpLmxlbmd0aD5fKHRoaXMseSxcImZcIik7KXtjb25zdCBFPV8odGhpcyxtLFwiZlwiKS5maW5kSW5kZXgoKEU9Pnt2YXIgZTtyZXR1cm4obnVsbD09PShlPUUudGFnKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5pbWFnZUlkKSE9PV8odGhpcyxiLFwiZlwiKS5pbWFnZUlkfSkpO18odGhpcyxtLFwiZlwiKS5zcGxpY2UoRSwxKX1lbHNlIF8odGhpcyxtLFwiZlwiKS5zcGxpY2UoMCxfKHRoaXMsbSxcImZcIikubGVuZ3RoLV8odGhpcyx5LFwiZlwiKSl9ZWxzZSBfKHRoaXMsbSxcImZcIikucHVzaChFKX1nZXRJbWFnZSgpe2lmKDA9PT1fKHRoaXMsbSxcImZcIikubGVuZ3RoKXJldHVybiBudWxsO2xldCBFO2lmKF8odGhpcyxiLFwiZlwiKSYmQShfKHRoaXMsYixcImZcIikuaW1hZ2VJZCkpe2NvbnN0IGU9Xyh0aGlzLHAsXCJtXCIsWSkuY2FsbCh0aGlzLF8odGhpcyxiLFwiZlwiKS5pbWFnZUlkKTtpZihlPDApdGhyb3cgbmV3IEVycm9yKGBJbWFnZSB3aXRoIGlkICR7Xyh0aGlzLGIsXCJmXCIpLmltYWdlSWR9IGRvZXNuJ3QgZXhpc3QuYCk7RT1fKHRoaXMsbSxcImZcIikuc2xpY2UoZSxlKzEpWzBdfWVsc2UgRT1fKHRoaXMsbSxcImZcIikucG9wKCk7aWYoW0kuSVBGX1JHQl81NjUsSS5JUEZfUkdCXzU1NSxJLklQRl9SR0JfODg4LEkuSVBGX0FSR0JfODg4OCxJLklQRl9SR0JfMTYxNjE2LEkuSVBGX0FSR0JfMTYxNjE2MTYsSS5JUEZfQUJHUl84ODg4LEkuSVBGX0FCR1JfMTYxNjE2MTYsSS5JUEZfQkdSXzg4OF0uaW5jbHVkZXMoRS5mb3JtYXQpKXtpZihfKHRoaXMsdixcImZcIik9PT10LkNDVVRfUkdCX1JfQ0hBTk5FTF9PTkxZKXtILl9vbkxvZyYmSC5fb25Mb2coXCJvbmx5IGdldCBSIGNoYW5uZWwgZGF0YS5cIik7Y29uc3QgXz1uZXcgVWludDhBcnJheShFLndpZHRoKkUuaGVpZ2h0KTtmb3IobGV0IGU9MDtlPF8ubGVuZ3RoO2UrKylzd2l0Y2goRS5mb3JtYXQpe2Nhc2UgSS5JUEZfUkdCXzU2NTpjYXNlIEkuSVBGX1JHQl81NTU6Y2FzZSBJLklQRl9SR0JfODg4OmNhc2UgSS5JUEZfUkdCXzE2MTYxNjpfW2VdPUUuYnl0ZXNbMyplKzJdO2JyZWFrO2Nhc2UgSS5JUEZfQVJHQl84ODg4OmNhc2UgSS5JUEZfQVJHQl8xNjE2MTYxNjpfW2VdPUUuYnl0ZXNbNCplKzJdO2JyZWFrO2Nhc2UgSS5JUEZfQkdSXzg4ODpfW2VdPUUuYnl0ZXNbMyplXTticmVhaztjYXNlIEkuSVBGX0FCR1JfODg4ODpjYXNlIEkuSVBGX0FCR1JfMTYxNjE2MTY6X1tlXT1FLmJ5dGVzWzQqZV19RS5ieXRlcz1fLEUuc3RyaWRlPUUud2lkdGgsRS5mb3JtYXQ9SS5JUEZfR1JBWVNDQUxFRH1lbHNlIGlmKF8odGhpcyx2LFwiZlwiKT09PXQuQ0NVVF9SR0JfR19DSEFOTkVMX09OTFkpe0guX29uTG9nJiZILl9vbkxvZyhcIm9ubHkgZ2V0IEcgY2hhbm5lbCBkYXRhLlwiKTtjb25zdCBfPW5ldyBVaW50OEFycmF5KEUud2lkdGgqRS5oZWlnaHQpO2ZvcihsZXQgZT0wO2U8Xy5sZW5ndGg7ZSsrKXN3aXRjaChFLmZvcm1hdCl7Y2FzZSBJLklQRl9SR0JfNTY1OmNhc2UgSS5JUEZfUkdCXzU1NTpjYXNlIEkuSVBGX1JHQl84ODg6Y2FzZSBJLklQRl9SR0JfMTYxNjE2OmNhc2UgSS5JUEZfQkdSXzg4ODpfW2VdPUUuYnl0ZXNbMyplKzFdO2JyZWFrO2Nhc2UgSS5JUEZfQVJHQl84ODg4OmNhc2UgSS5JUEZfQVJHQl8xNjE2MTYxNjpjYXNlIEkuSVBGX0FCR1JfODg4ODpjYXNlIEkuSVBGX0FCR1JfMTYxNjE2MTY6X1tlXT1FLmJ5dGVzWzQqZSsxXX1FLmJ5dGVzPV8sRS5zdHJpZGU9RS53aWR0aCxFLmZvcm1hdD1JLklQRl9HUkFZU0NBTEVEfWVsc2UgaWYoXyh0aGlzLHYsXCJmXCIpPT09dC5DQ1VUX1JHQl9CX0NIQU5ORUxfT05MWSl7SC5fb25Mb2cmJkguX29uTG9nKFwib25seSBnZXQgQiBjaGFubmVsIGRhdGEuXCIpO2NvbnN0IF89bmV3IFVpbnQ4QXJyYXkoRS53aWR0aCpFLmhlaWdodCk7Zm9yKGxldCBlPTA7ZTxfLmxlbmd0aDtlKyspc3dpdGNoKEUuZm9ybWF0KXtjYXNlIEkuSVBGX1JHQl81NjU6Y2FzZSBJLklQRl9SR0JfNTU1OmNhc2UgSS5JUEZfUkdCXzg4ODpjYXNlIEkuSVBGX1JHQl8xNjE2MTY6X1tlXT1FLmJ5dGVzWzMqZV07YnJlYWs7Y2FzZSBJLklQRl9BUkdCXzg4ODg6Y2FzZSBJLklQRl9BUkdCXzE2MTYxNjE2Ol9bZV09RS5ieXRlc1s0KmVdO2JyZWFrO2Nhc2UgSS5JUEZfQkdSXzg4ODpfW2VdPUUuYnl0ZXNbMyplKzJdO2JyZWFrO2Nhc2UgSS5JUEZfQUJHUl84ODg4OmNhc2UgSS5JUEZfQUJHUl8xNjE2MTYxNjpfW2VdPUUuYnl0ZXNbNCplKzJdfUUuYnl0ZXM9XyxFLnN0cmlkZT1FLndpZHRoLEUuZm9ybWF0PUkuSVBGX0dSQVlTQ0FMRUR9fWVsc2VbSS5JUEZfTlYyMSxJLklQRl9OVjEyXS5pbmNsdWRlcyhFLmZvcm1hdCkmJkguX29uTG9nJiZILl9vbkxvZyhcIk5WMjEgb3IgTlYxMiBpcyBub3Qgc3VwcG9ydGVkLlwiKTtyZXR1cm4gRX1zZXROZXh0SW1hZ2VUb1JldHVybihfLGUpe2lmKCEoKC4uLl8pPT4wIT09Xy5sZW5ndGgmJl8uZXZlcnkoKF89PkEoXykpKSkoXykpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgJ2ltYWdlSWQnLlwiKTtpZih2b2lkIDAhPT1lJiYhbyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAna2VlcEluQnVmZmVyJy5cIik7RSh0aGlzLGIse2ltYWdlSWQ6XyxrZWVwSW5CdWZmZXI6ZX0sXCJmXCIpfV9yZXNldE5leHRSZXR1cm5lZEltYWdlKCl7RSh0aGlzLGIsbnVsbCxcImZcIil9aGFzSW1hZ2UoRSl7cmV0dXJuIF8odGhpcyxwLFwibVwiLFkpLmNhbGwodGhpcyxFKT49MH1zdGFydEZldGNoaW5nKCl7RSh0aGlzLFYsITAsXCJmXCIpfXN0b3BGZXRjaGluZygpe0UodGhpcyxWLCExLFwiZlwiKX1zZXRNYXhJbWFnZUNvdW50KGUpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdjb3VudCcuXCIpO2lmKGU8MXx8TWF0aC5yb3VuZChlKSE9PWUpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCAnY291bnQnLlwiKTtmb3IoRSh0aGlzLHksZSxcImZcIik7Xyh0aGlzLG0sXCJmXCIpJiZfKHRoaXMsbSxcImZcIikubGVuZ3RoPmU7KV8odGhpcyxtLFwiZlwiKS5zaGlmdCgpfWdldE1heEltYWdlQ291bnQoKXtyZXR1cm4gXyh0aGlzLHksXCJmXCIpfWdldEltYWdlQ291bnQoKXtyZXR1cm4gXyh0aGlzLG0sXCJmXCIpLmxlbmd0aH1jbGVhckJ1ZmZlcigpe18odGhpcyxtLFwiZlwiKS5sZW5ndGg9MH1pc0J1ZmZlckVtcHR5KCl7cmV0dXJuIDA9PT1fKHRoaXMsbSxcImZcIikubGVuZ3RofXNldEJ1ZmZlck92ZXJmbG93UHJvdGVjdGlvbk1vZGUoXyl7RSh0aGlzLHcsXyxcImZcIil9Z2V0QnVmZmVyT3ZlcmZsb3dQcm90ZWN0aW9uTW9kZSgpe3JldHVybiBfKHRoaXMsdyxcImZcIil9c2V0Q29sb3VyQ2hhbm5lbFVzYWdlVHlwZShfKXtFKHRoaXMsdixfLFwiZlwiKX1nZXRDb2xvdXJDaGFubmVsVXNhZ2VUeXBlKCl7cmV0dXJuIF8odGhpcyx2LFwiZlwiKX19bT1uZXcgV2Vha01hcCx5PW5ldyBXZWFrTWFwLHc9bmV3IFdlYWtNYXAsVj1uZXcgV2Vha01hcCxiPW5ldyBXZWFrTWFwLHY9bmV3IFdlYWtNYXAscD1uZXcgV2Vha1NldCxZPWZ1bmN0aW9uKEUpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBFKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdpbWFnZUlkJy5cIik7cmV0dXJuIF8odGhpcyxtLFwiZlwiKS5maW5kSW5kZXgoKF89Pnt2YXIgZTtyZXR1cm4obnVsbD09PShlPV8udGFnKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5pbWFnZUlkKT09PUV9KSl9O2NvbnN0IGs9Xz0+XyYmXCJvYmplY3RcIj09dHlwZW9mIF8mJlwiZnVuY3Rpb25cIj09dHlwZW9mIF8udGhlbjtjbGFzcyBYIGV4dGVuZHMgUHJvbWlzZXtnZXQgc3RhdHVzKCl7cmV0dXJuIHRoaXMuX3N9Z2V0IGlzUGVuZGluZygpe3JldHVyblwicGVuZGluZ1wiPT09dGhpcy5fc31nZXQgaXNGdWxmaWxsZWQoKXtyZXR1cm5cImZ1bGZpbGxlZFwiPT09dGhpcy5fc31nZXQgaXNSZWplY3RlZCgpe3JldHVyblwicmVqZWN0ZWRcIj09PXRoaXMuX3N9Z2V0IHRhc2soKXtyZXR1cm4gdGhpcy5fdGFza31zZXQgdGFzayhfKXtsZXQgRTt0aGlzLl90YXNrPV8sayhfKT9FPV86XCJmdW5jdGlvblwiPT10eXBlb2YgXyYmKEU9bmV3IFByb21pc2UoXykpLEUmJihhc3luYygpPT57dHJ5e2NvbnN0IGU9YXdhaXQgRTtfPT09dGhpcy5fdGFzayYmdGhpcy5yZXNvbHZlKGUpfWNhdGNoKEUpe189PT10aGlzLl90YXNrJiZ0aGlzLnJlamVjdChFKX19KSgpfWdldCBpc0VtcHR5KCl7cmV0dXJuIG51bGw9PXRoaXMuX3Rhc2t9Y29uc3RydWN0b3IoXyl7bGV0IEUsZTtzdXBlcigoKF8sdCk9PntFPV8sZT10fSkpLHRoaXMuX3M9XCJwZW5kaW5nXCIsdGhpcy5yZXNvbHZlPV89Pnt0aGlzLmlzUGVuZGluZyYmKGsoXyk/dGhpcy50YXNrPV86KHRoaXMuX3M9XCJmdWxmaWxsZWRcIixFKF8pKSl9LHRoaXMucmVqZWN0PV89Pnt0aGlzLmlzUGVuZGluZyYmKHRoaXMuX3M9XCJyZWplY3RlZFwiLGUoXykpfSx0aGlzLnRhc2s9X319bGV0IFosVyx4LEssajtcInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiYoWj1uYXZpZ2F0b3IsVz1aLnVzZXJBZ2VudCx4PVoucGxhdGZvcm0sSz1aLm1lZGlhRGV2aWNlcyksZnVuY3Rpb24oKXtpZighcil7Y29uc3QgXz17RWRnZTp7c2VhcmNoOlwiRWRnXCIsdmVyU2VhcmNoOlwiRWRnXCJ9LE9QUjpudWxsLENocm9tZTpudWxsLFNhZmFyaTp7c3RyOloudmVuZG9yLHNlYXJjaDpcIkFwcGxlXCIsdmVyU2VhcmNoOltcIlZlcnNpb25cIixcImlQaG9uZSBPU1wiLFwiQ1BVIE9TXCJdfSxGaXJlZm94Om51bGwsRXhwbG9yZXI6e3NlYXJjaDpcIk1TSUVcIix2ZXJTZWFyY2g6XCJNU0lFXCJ9fSxFPXtIYXJtb255T1M6bnVsbCxBbmRyb2lkOm51bGwsaVBob25lOm51bGwsaVBhZDpudWxsLFdpbmRvd3M6e3N0cjp4LHNlYXJjaDpcIldpblwifSxNYWM6e3N0cjp4fSxMaW51eDp7c3RyOnh9fTtsZXQgZT1cInVua25vd25Ccm93c2VyXCIsdD0wLEk9XCJ1bmtub3duT1NcIjtmb3IobGV0IEUgaW4gXyl7Y29uc3QgST1fW0VdfHx7fTtsZXQgcj1JLnN0cnx8VyxzPUkuc2VhcmNofHxFLG49SS52ZXJTdHJ8fFcsQz1JLnZlclNlYXJjaHx8RTtpZihDIGluc3RhbmNlb2YgQXJyYXl8fChDPVtDXSksLTEhPXIuaW5kZXhPZihzKSl7ZT1FO2ZvcihsZXQgXyBvZiBDKXtsZXQgRT1uLmluZGV4T2YoXyk7aWYoLTEhPUUpe3Q9cGFyc2VGbG9hdChuLnN1YnN0cmluZyhFK18ubGVuZ3RoKzEpKTticmVha319YnJlYWt9fWZvcihsZXQgXyBpbiBFKXtjb25zdCBlPUVbX118fHt9O2xldCB0PWUuc3RyfHxXLHI9ZS5zZWFyY2h8fF87aWYoLTEhPXQuaW5kZXhPZihyKSl7ST1fO2JyZWFrfX1cIkxpbnV4XCI9PUkmJi0xIT1XLmluZGV4T2YoXCJXaW5kb3dzIE5UXCIpJiYoST1cIkhhcm1vbnlPU1wiKSxqPXticm93c2VyOmUsdmVyc2lvbjp0LE9TOkl9fXImJihqPXticm93c2VyOlwic3NyXCIsdmVyc2lvbjowLE9TOlwic3NyXCJ9KX0oKTtjb25zdCBKPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBXZWJBc3NlbWJseSYmVyYmISgvU2FmYXJpLy50ZXN0KFcpJiYhL0Nocm9tZS8udGVzdChXKSYmL1xcKC4rXFxzMTFfMl8oWzItNl0pLipcXCkvLnRlc3QoVykpLFE9IShcInVuZGVmaW5lZFwiPT10eXBlb2YgV29ya2VyKSwkPSEoIUt8fCFLLmdldFVzZXJNZWRpYSksej1hc3luYygpPT57bGV0IF89ITE7aWYoJCl0cnl7KGF3YWl0IEsuZ2V0VXNlck1lZGlhKHt2aWRlbzohMH0pKS5nZXRUcmFja3MoKS5mb3JFYWNoKChfPT57Xy5zdG9wKCl9KSksXz0hMH1jYXRjaChfKXt9cmV0dXJuIF99O1wiQ2hyb21lXCI9PT1qLmJyb3dzZXImJmoudmVyc2lvbj42Nnx8XCJTYWZhcmlcIj09PWouYnJvd3NlciYmai52ZXJzaW9uPjEzfHxcIk9QUlwiPT09ai5icm93c2VyJiZqLnZlcnNpb24+NDN8fFwiRWRnZVwiPT09ai5icm93c2VyJiZqLnZlcnNpb247Y29uc3QgcT17fSxfXz1hc3luYyBfPT57bGV0IEU9XCJzdHJpbmdcIj09dHlwZW9mIF8/W19dOl8sZT1bXTtmb3IobGV0IF8gb2YgRSllLnB1c2gocVtfXT1xW19dfHxuZXcgWCk7YXdhaXQgUHJvbWlzZS5hbGwoZSl9LEVfPWFzeW5jKF8sRSk9PntsZXQgZSx0PVwic3RyaW5nXCI9PXR5cGVvZiBfP1tfXTpfLEk9W107Zm9yKGxldCBfIG9mIHQpe2xldCB0O0kucHVzaCh0PXFbX109cVtfXXx8bmV3IFgoZT1lfHxFKCkpKSx0LmlzRW1wdHkmJih0LnRhc2s9ZT1lfHxFKCkpfWF3YWl0IFByb21pc2UuYWxsKEkpfTtsZXQgZV8sdF89MDtjb25zdCBJXz0oKT0+dF8rKyxyXz17fTtsZXQgc187Y29uc3Qgbl89Xz0+e3NfPV8sZV8mJmVfLnBvc3RNZXNzYWdlKHt0eXBlOlwic2V0QkxvZ1wiLGJvZHk6e3ZhbHVlOiEhX319KX07bGV0IENfPSExO2NvbnN0IGlfPV89PntDXz1fLGVfJiZlXy5wb3N0TWVzc2FnZSh7dHlwZTpcInNldEJEZWJ1Z1wiLGJvZHk6e3ZhbHVlOiEhX319KX0sb189e30sQV89e30sTl89e3N0ZDp7dmVyc2lvbjpcIjEuNC4xMFwiLHBhdGg6bihzK1wiLi4vLi4vZHluYW1zb2Z0LWNhcHR1cmUtdmlzaW9uLXN0ZEAxLjQuMTAvZGlzdC9cIil9LGNvcmU6e3ZlcnNpb246XCIzLjQuMjBcIixwYXRoOnN9fSxhXz17ZGlwOnt3YXNtOiEwfX0sVF89e30sUl89YXN5bmMgXz0+e2xldCBFO18gaW5zdGFuY2VvZiBBcnJheXx8KF89Xz9bX106W10pO2xldCBlPXEuY29yZTtFPSFlfHxlLmlzRW1wdHk7bGV0IHQ9bmV3IE1hcDtjb25zdCBJPV89PntpZihcInN0ZFwiPT0oXz1fLnRvTG93ZXJDYXNlKCkpfHxcImNvcmVcIj09XylyZXR1cm47aWYoIWFfW19dKXRocm93IEVycm9yKFwiVGhlICdcIitfK1wiJyBtb2R1bGUgY2Fubm90IGJlIGZvdW5kLlwiKTtsZXQgRT1hX1tfXS5kZXBzO2lmKG51bGw9PUU/dm9pZCAwOkUubGVuZ3RoKWZvcihsZXQgXyBvZiBFKUkoXyk7bGV0IGU9cVtfXTt0LmhhcyhfKXx8dC5zZXQoXywhZXx8ZS5pc0VtcHR5KX07Zm9yKGxldCBFIG9mIF8pSShFKTtsZXQgcj1bXTtFJiZyLnB1c2goXCJjb3JlXCIpLHIucHVzaCguLi50LmtleXMoKSk7Y29uc3Qgcz1bLi4udC5lbnRyaWVzKCldLmZpbHRlcigoXz0+IV9bMV0pKS5tYXAoKF89Pl9bMF0pKTthd2FpdCBFXyhyLChhc3luYygpPT57Y29uc3QgXz1bLi4udC5lbnRyaWVzKCldLmZpbHRlcigoXz0+X1sxXSkpLm1hcCgoXz0+X1swXSkpO2F3YWl0IF9fKHMpO2NvbnN0IGU9ZyhUXyxOXyksST17fTtmb3IobGV0IEUgb2YgXylJW0VdPWFfW0VdO2NvbnN0IHI9e2VuZ2luZVJlc291cmNlUGF0aHM6ZSxhdXRvUmVzb3VyY2VzOkksbmFtZXM6X307bGV0IG49bmV3IFg7aWYoRSl7ci5uZWVkTG9hZENvcmU9ITA7bGV0IF89ZS5jb3JlK0xfLl93b3JrZXJOYW1lO18uc3RhcnRzV2l0aChsb2NhdGlvbi5vcmlnaW4pfHwoXz1hd2FpdCBmZXRjaChfKS50aGVuKChfPT5fLmJsb2IoKSkpLnRoZW4oKF89PlVSTC5jcmVhdGVPYmplY3RVUkwoXykpKSksZV89bmV3IFdvcmtlcihfKSxlXy5vbmVycm9yPV89PntsZXQgRT1uZXcgRXJyb3IoXy5tZXNzYWdlKTtuLnJlamVjdChFKX0sZV8uYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwoXz0+e2xldCBFPV8uZGF0YT9fLmRhdGE6XyxlPUUudHlwZSx0PUUuaWQsST1FLmJvZHk7c3dpdGNoKGUpe2Nhc2VcImxvZ1wiOnNfJiZzXyhFLm1lc3NhZ2UpO2JyZWFrO2Nhc2VcInRhc2tcIjp0cnl7cl9bdF0oSSksZGVsZXRlIHJfW3RdfWNhdGNoKF8pe3Rocm93IGRlbGV0ZSByX1t0XSxffWJyZWFrO2Nhc2VcImV2ZW50XCI6dHJ5e3JfW3RdKEkpfWNhdGNoKF8pe3Rocm93IF99YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmxvZyhfKX19KSksci5iTG9nPSEhc18sci5iZD1DXyxyLmRtPWxvY2F0aW9uLm9yaWdpbi5zdGFydHNXaXRoKFwiaHR0cFwiKT9sb2NhdGlvbi5vcmlnaW46XCJodHRwczovL2xvY2FsaG9zdFwifWVsc2UgYXdhaXQgX18oXCJjb3JlXCIpO2xldCBDPXRfKys7cl9bQ109Xz0+e2lmKF8uc3VjY2VzcylPYmplY3QuYXNzaWduKG9fLF8udmVyc2lvbnMpLFwie31cIiE9PUpTT04uc3RyaW5naWZ5KF8udmVyc2lvbnMpJiYoTF8uX3ZlcnNpb25zPV8udmVyc2lvbnMpLG4ucmVzb2x2ZSh2b2lkIDApO2Vsc2V7Y29uc3QgRT1FcnJvcihfLm1lc3NhZ2UpO18uc3RhY2smJihFLnN0YWNrPV8uc3RhY2spLG4ucmVqZWN0KEUpfX0sZV8ucG9zdE1lc3NhZ2Uoe3R5cGU6XCJsb2FkV2FzbVwiLGJvZHk6cixpZDpDfSksYXdhaXQgbn0pKX07Y2xhc3MgTF97c3RhdGljIGdldCBlbmdpbmVSZXNvdXJjZVBhdGhzKCl7cmV0dXJuIFRffXN0YXRpYyBzZXQgZW5naW5lUmVzb3VyY2VQYXRocyhfKXtPYmplY3QuYXNzaWduKFRfLF8pfXN0YXRpYyBnZXQgYlN1cHBvcnREY2U0TW9kdWxlKCl7cmV0dXJuIHRoaXMuX2JTdXBwb3J0RGNlNE1vZHVsZX1zdGF0aWMgZ2V0IGJTdXBwb3J0SVJUTW9kdWxlKCl7cmV0dXJuIHRoaXMuX2JTdXBwb3J0SVJUTW9kdWxlfXN0YXRpYyBnZXQgdmVyc2lvbnMoKXtyZXR1cm4gdGhpcy5fdmVyc2lvbnN9c3RhdGljIGdldCBfb25Mb2coKXtyZXR1cm4gc199c3RhdGljIHNldCBfb25Mb2coXyl7bl8oXyl9c3RhdGljIGdldCBfYkRlYnVnKCl7cmV0dXJuIENffXN0YXRpYyBzZXQgX2JEZWJ1ZyhfKXtpXyhfKX1zdGF0aWMgaXNNb2R1bGVMb2FkZWQoXyl7cmV0dXJuIF89KF89X3x8XCJjb3JlXCIpLnRvTG93ZXJDYXNlKCksISFxW19dJiZxW19dLmlzRnVsZmlsbGVkfXN0YXRpYyBhc3luYyBsb2FkV2FzbShfKXtyZXR1cm4gYXdhaXQgUl8oXyl9c3RhdGljIGFzeW5jIGRldGVjdEVudmlyb25tZW50KCl7cmV0dXJuIGF3YWl0KGFzeW5jKCk9Pih7d2FzbTpKLHdvcmtlcjpRLGdldFVzZXJNZWRpYTokLGNhbWVyYTphd2FpdCB6KCksYnJvd3NlcjpqLmJyb3dzZXIsdmVyc2lvbjpqLnZlcnNpb24sT1M6ai5PU30pKSgpfXN0YXRpYyBhc3luYyBnZXRNb2R1bGVWZXJzaW9uKCl7cmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKCgoXyxFKT0+e2xldCBlPUlfKCk7cl9bZV09YXN5bmMgZT0+e2lmKGUuc3VjY2VzcylyZXR1cm4gXyhlLnZlcnNpb25zKTt7bGV0IF89bmV3IEVycm9yKGUubWVzc2FnZSk7cmV0dXJuIF8uc3RhY2s9ZS5zdGFjaytcIlxcblwiK18uc3RhY2ssRShfKX19LGVfLnBvc3RNZXNzYWdlKHt0eXBlOlwiZ2V0TW9kdWxlVmVyc2lvblwiLGlkOmV9KX0pKX1zdGF0aWMgZ2V0VmVyc2lvbigpe2NvbnN0IF89b18uY29yZSYmb18uY29yZS53b3JrZXIsRT1vXy5jb3JlJiZvXy5jb3JlLndhc207cmV0dXJuYDMuNC4yMChXb3JrZXI6ICR7X3x8XCJOb3QgTG9hZGVkXCJ9LCBXYXNtOiAke0V8fFwiTm90IExvYWRlZFwifSlgfXN0YXRpYyBlbmFibGVMb2dnaW5nKCl7SC5fb25Mb2c9Y29uc29sZS5sb2csTF8uX29uTG9nPWNvbnNvbGUubG9nfXN0YXRpYyBkaXNhYmxlTG9nZ2luZygpe0guX29uTG9nPW51bGwsTF8uX29uTG9nPW51bGx9c3RhdGljIGFzeW5jIGNmZChfKXtyZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKChFLGUpPT57bGV0IHQ9SV8oKTtyX1t0XT1hc3luYyBfPT57aWYoXy5zdWNjZXNzKXJldHVybiBFKCk7e2xldCBFPW5ldyBFcnJvcihfLm1lc3NhZ2UpO3JldHVybiBFLnN0YWNrPV8uc3RhY2srXCJcXG5cIitFLnN0YWNrLGUoRSl9fSxlXy5wb3N0TWVzc2FnZSh7dHlwZTpcImNmZFwiLGlkOnQsYm9keTp7Y291bnQ6X319KX0pKX19dmFyIERfLE9fLGNfLFNfLGxfLGZfLGhfLGRfO0xfLl9iU3VwcG9ydERjZTRNb2R1bGU9LTEsTF8uX2JTdXBwb3J0SVJUTW9kdWxlPS0xLExfLl92ZXJzaW9ucz1udWxsLExfLl93b3JrZXJOYW1lPVwiY29yZS53b3JrZXIuanNcIixMXy5icm93c2VySW5mbz1qLGZ1bmN0aW9uKF8pe19bXy5DUklUX09SSUdJTkFMX0lNQUdFPTFdPVwiQ1JJVF9PUklHSU5BTF9JTUFHRVwiLF9bXy5DUklUX0JBUkNPREU9Ml09XCJDUklUX0JBUkNPREVcIixfW18uQ1JJVF9URVhUX0xJTkU9NF09XCJDUklUX1RFWFRfTElORVwiLF9bXy5DUklUX0RFVEVDVEVEX1FVQUQ9OF09XCJDUklUX0RFVEVDVEVEX1FVQURcIixfW18uQ1JJVF9OT1JNQUxJWkVEX0lNQUdFPTE2XT1cIkNSSVRfTk9STUFMSVpFRF9JTUFHRVwiLF9bXy5DUklUX1BBUlNFRF9SRVNVTFQ9MzJdPVwiQ1JJVF9QQVJTRURfUkVTVUxUXCJ9KERffHwoRF89e30pKSxmdW5jdGlvbihfKXtfW18uQ1RfTk9STUFMX0lOVEVSU0VDVEVEPTBdPVwiQ1RfTk9STUFMX0lOVEVSU0VDVEVEXCIsX1tfLkNUX1RfSU5URVJTRUNURUQ9MV09XCJDVF9UX0lOVEVSU0VDVEVEXCIsX1tfLkNUX0NST1NTX0lOVEVSU0VDVEVEPTJdPVwiQ1RfQ1JPU1NfSU5URVJTRUNURURcIixfW18uQ1RfTk9UX0lOVEVSU0VDVEVEPTNdPVwiQ1RfTk9UX0lOVEVSU0VDVEVEXCJ9KE9ffHwoT189e30pKSxmdW5jdGlvbihfKXtfW18uRUNfT0s9MF09XCJFQ19PS1wiLF9bXy5FQ19VTktOT1dOPS0xZTRdPVwiRUNfVU5LTk9XTlwiLF9bXy5FQ19OT19NRU1PUlk9LTEwMDAxXT1cIkVDX05PX01FTU9SWVwiLF9bXy5FQ19OVUxMX1BPSU5URVI9LTEwMDAyXT1cIkVDX05VTExfUE9JTlRFUlwiLF9bXy5FQ19MSUNFTlNFX0lOVkFMSUQ9LTEwMDAzXT1cIkVDX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19MSUNFTlNFX0VYUElSRUQ9LTEwMDA0XT1cIkVDX0xJQ0VOU0VfRVhQSVJFRFwiLF9bXy5FQ19GSUxFX05PVF9GT1VORD0tMTAwMDVdPVwiRUNfRklMRV9OT1RfRk9VTkRcIixfW18uRUNfRklMRV9UWVBFX05PVF9TVVBQT1JURUQ9LTEwMDA2XT1cIkVDX0ZJTEVfVFlQRV9OT1RfU1VQUE9SVEVEXCIsX1tfLkVDX0JQUF9OT1RfU1VQUE9SVEVEPS0xMDAwN109XCJFQ19CUFBfTk9UX1NVUFBPUlRFRFwiLF9bXy5FQ19JTkRFWF9JTlZBTElEPS0xMDAwOF09XCJFQ19JTkRFWF9JTlZBTElEXCIsX1tfLkVDX0NVU1RPTV9SRUdJT05fSU5WQUxJRD0tMTAwMTBdPVwiRUNfQ1VTVE9NX1JFR0lPTl9JTlZBTElEXCIsX1tfLkVDX0lNQUdFX1JFQURfRkFJTEVEPS0xMDAxMl09XCJFQ19JTUFHRV9SRUFEX0ZBSUxFRFwiLF9bXy5FQ19USUZGX1JFQURfRkFJTEVEPS0xMDAxM109XCJFQ19USUZGX1JFQURfRkFJTEVEXCIsX1tfLkVDX0RJQl9CVUZGRVJfSU5WQUxJRD0tMTAwMThdPVwiRUNfRElCX0JVRkZFUl9JTlZBTElEXCIsX1tfLkVDX1BERl9SRUFEX0ZBSUxFRD0tMTAwMjFdPVwiRUNfUERGX1JFQURfRkFJTEVEXCIsX1tfLkVDX1BERl9ETExfTUlTU0lORz0tMTAwMjJdPVwiRUNfUERGX0RMTF9NSVNTSU5HXCIsX1tfLkVDX1BBR0VfTlVNQkVSX0lOVkFMSUQ9LTEwMDIzXT1cIkVDX1BBR0VfTlVNQkVSX0lOVkFMSURcIixfW18uRUNfQ1VTVE9NX1NJWkVfSU5WQUxJRD0tMTAwMjRdPVwiRUNfQ1VTVE9NX1NJWkVfSU5WQUxJRFwiLF9bXy5FQ19USU1FT1VUPS0xMDAyNl09XCJFQ19USU1FT1VUXCIsX1tfLkVDX0pTT05fUEFSU0VfRkFJTEVEPS0xMDAzMF09XCJFQ19KU09OX1BBUlNFX0ZBSUxFRFwiLF9bXy5FQ19KU09OX1RZUEVfSU5WQUxJRD0tMTAwMzFdPVwiRUNfSlNPTl9UWVBFX0lOVkFMSURcIixfW18uRUNfSlNPTl9LRVlfSU5WQUxJRD0tMTAwMzJdPVwiRUNfSlNPTl9LRVlfSU5WQUxJRFwiLF9bXy5FQ19KU09OX1ZBTFVFX0lOVkFMSUQ9LTEwMDMzXT1cIkVDX0pTT05fVkFMVUVfSU5WQUxJRFwiLF9bXy5FQ19KU09OX05BTUVfS0VZX01JU1NJTkc9LTEwMDM0XT1cIkVDX0pTT05fTkFNRV9LRVlfTUlTU0lOR1wiLF9bXy5FQ19KU09OX05BTUVfVkFMVUVfRFVQTElDQVRFRD0tMTAwMzVdPVwiRUNfSlNPTl9OQU1FX1ZBTFVFX0RVUExJQ0FURURcIixfW18uRUNfVEVNUExBVEVfTkFNRV9JTlZBTElEPS0xMDAzNl09XCJFQ19URU1QTEFURV9OQU1FX0lOVkFMSURcIixfW18uRUNfSlNPTl9OQU1FX1JFRkVSRU5DRV9JTlZBTElEPS0xMDAzN109XCJFQ19KU09OX05BTUVfUkVGRVJFTkNFX0lOVkFMSURcIixfW18uRUNfUEFSQU1FVEVSX1ZBTFVFX0lOVkFMSUQ9LTEwMDM4XT1cIkVDX1BBUkFNRVRFUl9WQUxVRV9JTlZBTElEXCIsX1tfLkVDX0RPTUFJTl9OT1RfTUFUQ0g9LTEwMDM5XT1cIkVDX0RPTUFJTl9OT1RfTUFUQ0hcIixfW18uRUNfUkVTRVJWRURfSU5GT19OT1RfTUFUQ0g9LTEwMDQwXT1cIkVDX1JFU0VSVkVEX0lORk9fTk9UX01BVENIXCIsX1tfLkVDX0xJQ0VOU0VfS0VZX05PVF9NQVRDSD0tMTAwNDNdPVwiRUNfTElDRU5TRV9LRVlfTk9UX01BVENIXCIsX1tfLkVDX1JFUVVFU1RfRkFJTEVEPS0xMDA0NF09XCJFQ19SRVFVRVNUX0ZBSUxFRFwiLF9bXy5FQ19MSUNFTlNFX0lOSVRfRkFJTEVEPS0xMDA0NV09XCJFQ19MSUNFTlNFX0lOSVRfRkFJTEVEXCIsX1tfLkVDX1NFVF9NT0RFX0FSR1VNRU5UX0VSUk9SPS0xMDA1MV09XCJFQ19TRVRfTU9ERV9BUkdVTUVOVF9FUlJPUlwiLF9bXy5FQ19MSUNFTlNFX0NPTlRFTlRfSU5WQUxJRD0tMTAwNTJdPVwiRUNfTElDRU5TRV9DT05URU5UX0lOVkFMSURcIixfW18uRUNfTElDRU5TRV9LRVlfSU5WQUxJRD0tMTAwNTNdPVwiRUNfTElDRU5TRV9LRVlfSU5WQUxJRFwiLF9bXy5FQ19MSUNFTlNFX0RFVklDRV9SVU5TX09VVD0tMTAwNTRdPVwiRUNfTElDRU5TRV9ERVZJQ0VfUlVOU19PVVRcIixfW18uRUNfR0VUX01PREVfQVJHVU1FTlRfRVJST1I9LTEwMDU1XT1cIkVDX0dFVF9NT0RFX0FSR1VNRU5UX0VSUk9SXCIsX1tfLkVDX0lSVF9MSUNFTlNFX0lOVkFMSUQ9LTEwMDU2XT1cIkVDX0lSVF9MSUNFTlNFX0lOVkFMSURcIixfW18uRUNfRklMRV9TQVZFX0ZBSUxFRD0tMTAwNThdPVwiRUNfRklMRV9TQVZFX0ZBSUxFRFwiLF9bXy5FQ19TVEFHRV9UWVBFX0lOVkFMSUQ9LTEwMDU5XT1cIkVDX1NUQUdFX1RZUEVfSU5WQUxJRFwiLF9bXy5FQ19JTUFHRV9PUklFTlRBVElPTl9JTlZBTElEPS0xMDA2MF09XCJFQ19JTUFHRV9PUklFTlRBVElPTl9JTlZBTElEXCIsX1tfLkVDX0NPTlZFUlRfQ09NUExFWF9URU1QTEFURV9FUlJPUj0tMTAwNjFdPVwiRUNfQ09OVkVSVF9DT01QTEVYX1RFTVBMQVRFX0VSUk9SXCIsX1tfLkVDX0NBTExfUkVKRUNURURfV0hFTl9DQVBUVVJJTkc9LTEwMDYyXT1cIkVDX0NBTExfUkVKRUNURURfV0hFTl9DQVBUVVJJTkdcIixfW18uRUNfTk9fSU1BR0VfU09VUkNFPS0xMDA2M109XCJFQ19OT19JTUFHRV9TT1VSQ0VcIixfW18uRUNfUkVBRF9ESVJFQ1RPUllfRkFJTEVEPS0xMDA2NF09XCJFQ19SRUFEX0RJUkVDVE9SWV9GQUlMRURcIixfW18uRUNfTU9EVUxFX05PVF9GT1VORD0tMTAwNjVdPVwiRUNfTU9EVUxFX05PVF9GT1VORFwiLF9bXy5FQ19NVUxUSV9QQUdFU19OT1RfU1VQUE9SVEVEPS0xMDA2Nl09XCJFQ19NVUxUSV9QQUdFU19OT1RfU1VQUE9SVEVEXCIsX1tfLkVDX0ZJTEVfQUxSRUFEWV9FWElTVFM9LTEwMDY3XT1cIkVDX0ZJTEVfQUxSRUFEWV9FWElTVFNcIixfW18uRUNfQ1JFQVRFX0ZJTEVfRkFJTEVEPS0xMDA2OF09XCJFQ19DUkVBVEVfRklMRV9GQUlMRURcIixfW18uRUNfSU1HQUVfREFUQV9JTlZBTElEPS0xMDA2OV09XCJFQ19JTUdBRV9EQVRBX0lOVkFMSURcIixfW18uRUNfSU1BR0VfU0laRV9OT1RfTUFUQ0g9LTEwMDcwXT1cIkVDX0lNQUdFX1NJWkVfTk9UX01BVENIXCIsX1tfLkVDX0lNQUdFX1BJWEVMX0ZPUk1BVF9OT1RfTUFUQ0g9LTEwMDcxXT1cIkVDX0lNQUdFX1BJWEVMX0ZPUk1BVF9OT1RfTUFUQ0hcIixfW18uRUNfU0VDVElPTl9MRVZFTF9SRVNVTFRfSVJSRVBMQUNFQUJMRT0tMTAwNzJdPVwiRUNfU0VDVElPTl9MRVZFTF9SRVNVTFRfSVJSRVBMQUNFQUJMRVwiLF9bXy5FQ19BWElTX0RFRklOSVRJT05fSU5DT1JSRUNUPS0xMDA3M109XCJFQ19BWElTX0RFRklOSVRJT05fSU5DT1JSRUNUXCIsX1tfLkVDX1JFU1VMVF9UWVBFX01JU01BVENIX0lSUkVQTEFDRUFCTEU9LTEwMDc0XT1cIkVDX1JFU1VMVF9UWVBFX01JU01BVENIX0lSUkVQTEFDRUFCTEVcIixfW18uRUNfUERGX0xJQlJBUllfTE9BRF9GQUlMRUQ9LTEwMDc1XT1cIkVDX1BERl9MSUJSQVJZX0xPQURfRkFJTEVEXCIsX1tfLkVDX05PX0xJQ0VOU0U9LTJlNF09XCJFQ19OT19MSUNFTlNFXCIsX1tfLkVDX0hBTkRTSEFLRV9DT0RFX0lOVkFMSUQ9LTIwMDAxXT1cIkVDX0hBTkRTSEFLRV9DT0RFX0lOVkFMSURcIixfW18uRUNfTElDRU5TRV9CVUZGRVJfRkFJTEVEPS0yMDAwMl09XCJFQ19MSUNFTlNFX0JVRkZFUl9GQUlMRURcIixfW18uRUNfTElDRU5TRV9TWU5DX0ZBSUxFRD0tMjAwMDNdPVwiRUNfTElDRU5TRV9TWU5DX0ZBSUxFRFwiLF9bXy5FQ19ERVZJQ0VfTk9UX01BVENIPS0yMDAwNF09XCJFQ19ERVZJQ0VfTk9UX01BVENIXCIsX1tfLkVDX0JJTkRfREVWSUNFX0ZBSUxFRD0tMjAwMDVdPVwiRUNfQklORF9ERVZJQ0VfRkFJTEVEXCIsX1tfLkVDX0lOU1RBTkNFX0NPVU5UX09WRVJfTElNSVQ9LTIwMDA4XT1cIkVDX0lOU1RBTkNFX0NPVU5UX09WRVJfTElNSVRcIixfW18uRUNfTElDRU5TRV9JTklUX1NFUVVFTkNFX0ZBSUxFRD0tMjAwMDldPVwiRUNfTElDRU5TRV9JTklUX1NFUVVFTkNFX0ZBSUxFRFwiLF9bXy5FQ19UUklBTF9MSUNFTlNFPS0yMDAxMF09XCJFQ19UUklBTF9MSUNFTlNFXCIsX1tfLkVDX0ZBSUxFRF9UT19SRUFDSF9ETFM9LTIwMjAwXT1cIkVDX0ZBSUxFRF9UT19SRUFDSF9ETFNcIixfW18uRUNfTElDRU5TRV9DQUNIRV9VU0VEPS0yMDAxMl09XCJFQ19MSUNFTlNFX0NBQ0hFX1VTRURcIixfW18uRUNfQkFSQ09ERV9GT1JNQVRfSU5WQUxJRD0tMzAwMDldPVwiRUNfQkFSQ09ERV9GT1JNQVRfSU5WQUxJRFwiLF9bXy5FQ19RUl9MSUNFTlNFX0lOVkFMSUQ9LTMwMDE2XT1cIkVDX1FSX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ18xRF9MSUNFTlNFX0lOVkFMSUQ9LTMwMDE3XT1cIkVDXzFEX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19QREY0MTdfTElDRU5TRV9JTlZBTElEPS0zMDAxOV09XCJFQ19QREY0MTdfTElDRU5TRV9JTlZBTElEXCIsX1tfLkVDX0RBVEFNQVRSSVhfTElDRU5TRV9JTlZBTElEPS0zMDAyMF09XCJFQ19EQVRBTUFUUklYX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19DVVNUT01fTU9EVUxFU0laRV9JTlZBTElEPS0zMDAyNV09XCJFQ19DVVNUT01fTU9EVUxFU0laRV9JTlZBTElEXCIsX1tfLkVDX0FaVEVDX0xJQ0VOU0VfSU5WQUxJRD0tMzAwNDFdPVwiRUNfQVpURUNfTElDRU5TRV9JTlZBTElEXCIsX1tfLkVDX1BBVENIQ09ERV9MSUNFTlNFX0lOVkFMSUQ9LTMwMDQ2XT1cIkVDX1BBVENIQ09ERV9MSUNFTlNFX0lOVkFMSURcIixfW18uRUNfUE9TVEFMQ09ERV9MSUNFTlNFX0lOVkFMSUQ9LTMwMDQ3XT1cIkVDX1BPU1RBTENPREVfTElDRU5TRV9JTlZBTElEXCIsX1tfLkVDX0RQTV9MSUNFTlNFX0lOVkFMSUQ9LTMwMDQ4XT1cIkVDX0RQTV9MSUNFTlNFX0lOVkFMSURcIixfW18uRUNfRlJBTUVfREVDT0RJTkdfVEhSRUFEX0VYSVNUUz0tMzAwNDldPVwiRUNfRlJBTUVfREVDT0RJTkdfVEhSRUFEX0VYSVNUU1wiLF9bXy5FQ19TVE9QX0RFQ09ESU5HX1RIUkVBRF9GQUlMRUQ9LTMwMDUwXT1cIkVDX1NUT1BfREVDT0RJTkdfVEhSRUFEX0ZBSUxFRFwiLF9bXy5FQ19NQVhJQ09ERV9MSUNFTlNFX0lOVkFMSUQ9LTMwMDU3XT1cIkVDX01BWElDT0RFX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19HUzFfREFUQUJBUl9MSUNFTlNFX0lOVkFMSUQ9LTMwMDU4XT1cIkVDX0dTMV9EQVRBQkFSX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19HUzFfQ09NUE9TSVRFX0xJQ0VOU0VfSU5WQUxJRD0tMzAwNTldPVwiRUNfR1MxX0NPTVBPU0lURV9MSUNFTlNFX0lOVkFMSURcIixfW18uRUNfRE9UQ09ERV9MSUNFTlNFX0lOVkFMSUQ9LTMwMDYxXT1cIkVDX0RPVENPREVfTElDRU5TRV9JTlZBTElEXCIsX1tfLkVDX1BIQVJNQUNPREVfTElDRU5TRV9JTlZBTElEPS0zMDA2Ml09XCJFQ19QSEFSTUFDT0RFX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19DSEFSQUNURVJfTU9ERUxfRklMRV9OT1RfRk9VTkQ9LTQwMTAwXT1cIkVDX0NIQVJBQ1RFUl9NT0RFTF9GSUxFX05PVF9GT1VORFwiLF9bXy5FQ19URVhUX0xJTkVfR1JPVVBfTEFZT1VUX0NPTkZMSUNUPS00MDEwMV09XCJFQ19URVhUX0xJTkVfR1JPVVBfTEFZT1VUX0NPTkZMSUNUXCIsX1tfLkVDX1RFWFRfTElORV9HUk9VUF9SRUdFWF9DT05GTElDVD0tNDAxMDJdPVwiRUNfVEVYVF9MSU5FX0dST1VQX1JFR0VYX0NPTkZMSUNUXCIsX1tfLkVDX1FVQURSSUxBVEVSQUxfSU5WQUxJRD0tNTAwNTddPVwiRUNfUVVBRFJJTEFURVJBTF9JTlZBTElEXCIsX1tfLkVDX1BBTk9SQU1BX0xJQ0VOU0VfSU5WQUxJRD0tNzAwNjBdPVwiRUNfUEFOT1JBTUFfTElDRU5TRV9JTlZBTElEXCIsX1tfLkVDX1JFU09VUkNFX1BBVEhfTk9UX0VYSVNUPS05MDAwMV09XCJFQ19SRVNPVVJDRV9QQVRIX05PVF9FWElTVFwiLF9bXy5FQ19SRVNPVVJDRV9MT0FEX0ZBSUxFRD0tOTAwMDJdPVwiRUNfUkVTT1VSQ0VfTE9BRF9GQUlMRURcIixfW18uRUNfQ09ERV9TUEVDSUZJQ0FUSU9OX05PVF9GT1VORD0tOTAwMDNdPVwiRUNfQ09ERV9TUEVDSUZJQ0FUSU9OX05PVF9GT1VORFwiLF9bXy5FQ19GVUxMX0NPREVfRU1QVFk9LTkwMDA0XT1cIkVDX0ZVTExfQ09ERV9FTVBUWVwiLF9bXy5FQ19GVUxMX0NPREVfUFJFUFJPQ0VTU19GQUlMRUQ9LTkwMDA1XT1cIkVDX0ZVTExfQ09ERV9QUkVQUk9DRVNTX0ZBSUxFRFwiLF9bXy5FQ19aQV9ETF9MSUNFTlNFX0lOVkFMSUQ9LTkwMDA2XT1cIkVDX1pBX0RMX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19BQU1WQV9ETF9JRF9MSUNFTlNFX0lOVkFMSUQ9LTkwMDA3XT1cIkVDX0FBTVZBX0RMX0lEX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19BQURIQUFSX0xJQ0VOU0VfSU5WQUxJRD0tOTAwMDhdPVwiRUNfQUFESEFBUl9MSUNFTlNFX0lOVkFMSURcIixfW18uRUNfTVJURF9MSUNFTlNFX0lOVkFMSUQ9LTkwMDA5XT1cIkVDX01SVERfTElDRU5TRV9JTlZBTElEXCIsX1tfLkVDX1ZJTl9MSUNFTlNFX0lOVkFMSUQ9LTkwMDEwXT1cIkVDX1ZJTl9MSUNFTlNFX0lOVkFMSURcIixfW18uRUNfQ1VTVE9NSVpFRF9DT0RFX1RZUEVfTElDRU5TRV9JTlZBTElEPS05MDAxMV09XCJFQ19DVVNUT01JWkVEX0NPREVfVFlQRV9MSUNFTlNFX0lOVkFMSURcIixfW18uRUNfTElDRU5TRV9XQVJOSU5HPS0xMDA3Nl09XCJFQ19MSUNFTlNFX1dBUk5JTkdcIixfW18uRUNfQkFSQ09ERV9SRUFERVJfTElDRU5TRV9OT1RfRk9VTkQ9LTMwMDYzXT1cIkVDX0JBUkNPREVfUkVBREVSX0xJQ0VOU0VfTk9UX0ZPVU5EXCIsX1tfLkVDX0xBQkVMX1JFQ09HTklaRVJfTElDRU5TRV9OT1RfRk9VTkQ9LTQwMTAzXT1cIkVDX0xBQkVMX1JFQ09HTklaRVJfTElDRU5TRV9OT1RfRk9VTkRcIixfW18uRUNfRE9DVU1FTlRfTk9STUFMSVpFUl9MSUNFTlNFX05PVF9GT1VORD0tNTAwNThdPVwiRUNfRE9DVU1FTlRfTk9STUFMSVpFUl9MSUNFTlNFX05PVF9GT1VORFwiLF9bXy5FQ19DT0RFX1BBUlNFUl9MSUNFTlNFX05PVF9GT1VORD0tOTAwMTJdPVwiRUNfQ09ERV9QQVJTRVJfTElDRU5TRV9OT1RfRk9VTkRcIn0oY198fChjXz17fSkpLGZ1bmN0aW9uKF8pe19bXy5HRU1fU0tJUD0wXT1cIkdFTV9TS0lQXCIsX1tfLkdFTV9BVVRPPTFdPVwiR0VNX0FVVE9cIixfW18uR0VNX0dFTkVSQUw9Ml09XCJHRU1fR0VORVJBTFwiLF9bXy5HRU1fR1JBWV9FUVVBTElaRT00XT1cIkdFTV9HUkFZX0VRVUFMSVpFXCIsX1tfLkdFTV9HUkFZX1NNT09USD04XT1cIkdFTV9HUkFZX1NNT09USFwiLF9bXy5HRU1fU0hBUlBFTl9TTU9PVEg9MTZdPVwiR0VNX1NIQVJQRU5fU01PT1RIXCIsX1tfLkdFTV9SRVY9LTIxNDc0ODM2NDhdPVwiR0VNX1JFVlwifShTX3x8KFNfPXt9KSksZnVuY3Rpb24oXyl7X1tfLkdUTV9TS0lQPTBdPVwiR1RNX1NLSVBcIixfW18uR1RNX0lOVkVSVEVEPTFdPVwiR1RNX0lOVkVSVEVEXCIsX1tfLkdUTV9PUklHSU5BTD0yXT1cIkdUTV9PUklHSU5BTFwiLF9bXy5HVE1fQVVUTz00XT1cIkdUTV9BVVRPXCIsX1tfLkdUTV9SRVY9LTIxNDc0ODM2NDhdPVwiR1RNX1JFVlwifShsX3x8KGxfPXt9KSksZnVuY3Rpb24oXyl7X1tfLklUVF9GSUxFX0lNQUdFPTBdPVwiSVRUX0ZJTEVfSU1BR0VcIixfW18uSVRUX1ZJREVPX0ZSQU1FPTFdPVwiSVRUX1ZJREVPX0ZSQU1FXCJ9KGZffHwoZl89e30pKSxmdW5jdGlvbihfKXtfW18uUERGUk1fVkVDVE9SPTFdPVwiUERGUk1fVkVDVE9SXCIsX1tfLlBERlJNX1JBU1RFUj0yXT1cIlBERlJNX1JBU1RFUlwiLF9bXy5QREZSTV9SRVY9LTIxNDc0ODM2NDhdPVwiUERGUk1fUkVWXCJ9KGhffHwoaF89e30pKSxmdW5jdGlvbihfKXtfW18uUkRTX1JBU1RFUklaRURfUEFHRVM9MF09XCJSRFNfUkFTVEVSSVpFRF9QQUdFU1wiLF9bXy5SRFNfRVhUUkFDVEVEX0lNQUdFUz0xXT1cIlJEU19FWFRSQUNURURfSU1BR0VTXCJ9KGRffHwoZF89e30pKTtjb25zdCBQXz17SVJVVF9OVUxMOkJpZ0ludCgwKSxJUlVUX0NPTE9VUl9JTUFHRTpCaWdJbnQoMSksSVJVVF9TQ0FMRURfRE9XTl9DT0xPVVJfSU1BR0U6QmlnSW50KDIpLElSVVRfR1JBWVNDQUxFX0lNQUdFOkJpZ0ludCg0KSxJUlVUX1RSQU5TT0ZPUk1FRF9HUkFZU0NBTEVfSU1BR0U6QmlnSW50KDgpLElSVVRfRU5IQU5DRURfR1JBWVNDQUxFX0lNQUdFOkJpZ0ludCgxNiksSVJVVF9QUkVERVRFQ1RFRF9SRUdJT05TOkJpZ0ludCgzMiksSVJVVF9CSU5BUllfSU1BR0U6QmlnSW50KDY0KSxJUlVUX1RFWFRVUkVfREVURUNUSU9OX1JFU1VMVDpCaWdJbnQoMTI4KSxJUlVUX1RFWFRVUkVfUkVNT1ZFRF9HUkFZU0NBTEVfSU1BR0U6QmlnSW50KDI1NiksSVJVVF9URVhUVVJFX1JFTU9WRURfQklOQVJZX0lNQUdFOkJpZ0ludCg1MTIpLElSVVRfQ09OVE9VUlM6QmlnSW50KDEwMjQpLElSVVRfTElORV9TRUdNRU5UUzpCaWdJbnQoMjA0OCksSVJVVF9URVhUX1pPTkVTOkJpZ0ludCg0MDk2KSxJUlVUX1RFWFRfUkVNT1ZFRF9CSU5BUllfSU1BR0U6QmlnSW50KDgxOTIpLElSVVRfQ0FORElEQVRFX0JBUkNPREVfWk9ORVM6QmlnSW50KDE2Mzg0KSxJUlVUX0xPQ0FMSVpFRF9CQVJDT0RFUzpCaWdJbnQoMzI3NjgpLElSVVRfU0NBTEVEX1VQX0JBUkNPREVfSU1BR0U6QmlnSW50KDY1NTM2KSxJUlVUX0RFRk9STUFUSU9OX1JFU0lTVEVEX0JBUkNPREVfSU1BR0U6QmlnSW50KDE8PDE3KSxJUlVUX0NPTVBMRU1FTlRFRF9CQVJDT0RFX0lNQUdFOkJpZ0ludCgxPDwxOCksSVJVVF9ERUNPREVEX0JBUkNPREVTOkJpZ0ludCgxPDwxOSksSVJVVF9MT05HX0xJTkVTOkJpZ0ludCgxPDwyMCksSVJVVF9DT1JORVJTOkJpZ0ludCgxPDwyMSksSVJVVF9DQU5ESURBVEVfUVVBRF9FREdFUzpCaWdJbnQoMTw8MjIpLElSVVRfREVURUNURURfUVVBRFM6QmlnSW50KDE8PDIzKSxJUlVUX0xPQ0FMSVpFRF9URVhUX0xJTkVTOkJpZ0ludCgxPDwyNCksSVJVVF9SRUNPR05JWkVEX1RFWFRfTElORVM6QmlnSW50KDE8PDI1KSxJUlVUX05PUk1BTElaRURfSU1BR0VTOkJpZ0ludCgxPDwyNiksSVJVVF9TSE9SVF9MSU5FUzpCaWdJbnQoMTw8MjcpLElSVVRfUkFXX1RFWFRfTElORVM6QmlnSW50KDE8PDI4KSxJUlVUX0FMTDpCaWdJbnQoXCIweEZGRkZGRkZGRkZGRkZGRkZcIil9O3ZhciBnXyxNXzshZnVuY3Rpb24oXyl7X1tfLlJPRVRfUFJFREVURUNURURfUkVHSU9OPTBdPVwiUk9FVF9QUkVERVRFQ1RFRF9SRUdJT05cIixfW18uUk9FVF9MT0NBTElaRURfQkFSQ09ERT0xXT1cIlJPRVRfTE9DQUxJWkVEX0JBUkNPREVcIixfW18uUk9FVF9ERUNPREVEX0JBUkNPREU9Ml09XCJST0VUX0RFQ09ERURfQkFSQ09ERVwiLF9bXy5ST0VUX0xPQ0FMSVpFRF9URVhUX0xJTkU9M109XCJST0VUX0xPQ0FMSVpFRF9URVhUX0xJTkVcIixfW18uUk9FVF9SRUNPR05JWkVEX1RFWFRfTElORT00XT1cIlJPRVRfUkVDT0dOSVpFRF9URVhUX0xJTkVcIixfW18uUk9FVF9ERVRFQ1RFRF9RVUFEPTVdPVwiUk9FVF9ERVRFQ1RFRF9RVUFEXCIsX1tfLlJPRVRfTk9STUFMSVpFRF9JTUFHRT02XT1cIlJPRVRfTk9STUFMSVpFRF9JTUFHRVwiLF9bXy5ST0VUX1NPVVJDRV9JTUFHRT03XT1cIlJPRVRfU09VUkNFX0lNQUdFXCIsX1tfLlJPRVRfVEFSR0VUX1JPST04XT1cIlJPRVRfVEFSR0VUX1JPSVwifShnX3x8KGdfPXt9KSksZnVuY3Rpb24oXyl7X1tfLlNUX05VTEw9MF09XCJTVF9OVUxMXCIsX1tfLlNUX1JFR0lPTl9QUkVERVRFQ1RJT049MV09XCJTVF9SRUdJT05fUFJFREVURUNUSU9OXCIsX1tfLlNUX0JBUkNPREVfTE9DQUxJWkFUSU9OPTJdPVwiU1RfQkFSQ09ERV9MT0NBTElaQVRJT05cIixfW18uU1RfQkFSQ09ERV9ERUNPRElORz0zXT1cIlNUX0JBUkNPREVfREVDT0RJTkdcIixfW18uU1RfVEVYVF9MSU5FX0xPQ0FMSVpBVElPTj00XT1cIlNUX1RFWFRfTElORV9MT0NBTElaQVRJT05cIixfW18uU1RfVEVYVF9MSU5FX1JFQ09HTklUSU9OPTVdPVwiU1RfVEVYVF9MSU5FX1JFQ09HTklUSU9OXCIsX1tfLlNUX0RPQ1VNRU5UX0RFVEVDVElPTj02XT1cIlNUX0RPQ1VNRU5UX0RFVEVDVElPTlwiLF9bXy5TVF9ET0NVTUVOVF9OT1JNQUxJWkFUSU9OPTddPVwiU1RfRE9DVU1FTlRfTk9STUFMSVpBVElPTlwifShNX3x8KE1fPXt9KSk7ZXhwb3J0e0xfIGFzIENvcmVNb2R1bGUsZSBhcyBFbnVtQnVmZmVyT3ZlcmZsb3dQcm90ZWN0aW9uTW9kZSxEXyBhcyBFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZSx0IGFzIEVudW1Db2xvdXJDaGFubmVsVXNhZ2VUeXBlLE9fIGFzIEVudW1Db3JuZXJUeXBlLGNfIGFzIEVudW1FcnJvckNvZGUsU18gYXMgRW51bUdyYXlzY2FsZUVuaGFuY2VtZW50TW9kZSxsXyBhcyBFbnVtR3JheXNjYWxlVHJhbnNmb3JtYXRpb25Nb2RlLEkgYXMgRW51bUltYWdlUGl4ZWxGb3JtYXQsZl8gYXMgRW51bUltYWdlVGFnVHlwZSxQXyBhcyBFbnVtSW50ZXJtZWRpYXRlUmVzdWx0VW5pdFR5cGUsaF8gYXMgRW51bVBERlJlYWRpbmdNb2RlLGRfIGFzIEVudW1SYXN0ZXJEYXRhU291cmNlLGdfIGFzIEVudW1SZWdpb25PYmplY3RFbGVtZW50VHlwZSxNXyBhcyBFbnVtU2VjdGlvblR5cGUsSCBhcyBJbWFnZVNvdXJjZUFkYXB0ZXIsQiBhcyBfZ2V0Tm9ySW1hZ2VEYXRhLGEgYXMgX2lzQXJjLFQgYXMgX2lzQ29udG91cixSIGFzIF9pc0RTSW1hZ2VEYXRhLEwgYXMgX2lzRFNSZWN0LEQgYXMgX2lzSW1hZ2VUYWcsTyBhcyBfaXNMaW5lU2VnbWVudCxjIGFzIF9pc1BvaW50LFMgYXMgX2lzUG9seWdvbixsIGFzIF9pc1F1YWQsZiBhcyBfaXNSZWN0LHUgYXMgX3NhdmVUb0ZpbGUsVSBhcyBfdG9CbG9iLEYgYXMgX3RvQ2FudmFzLEcgYXMgX3RvSW1hZ2UsTl8gYXMgYXV0b0Rpc2NvdmVyeVBhdGhzLENfIGFzIGJEZWJ1ZyxkIGFzIGNoZWNrSXNMaW5rLFAgYXMgY29tcGFyZVZlcnNpb24sRV8gYXMgZG9PcldhaXRBc3luY0RlcGVuZGVuY3ksSV8gYXMgZ2V0TmV4dFRhc2tJRCxnIGFzIGhhbmRsZUVuZ2luZVJlc291cmNlUGF0aHMsb18gYXMgaW5uZXJWZXJzaW9ucyxhIGFzIGlzQXJjLFQgYXMgaXNDb250b3VyLFIgYXMgaXNEU0ltYWdlRGF0YSxMIGFzIGlzRFNSZWN0LEQgYXMgaXNJbWFnZVRhZyxPIGFzIGlzTGluZVNlZ21lbnQsTiBhcyBpc09iamVjdCxjIGFzIGlzUG9pbnQsUyBhcyBpc1BvbHlnb24sbCBhcyBpc1F1YWQsZiBhcyBpc1JlY3QsUl8gYXMgbG9hZFdhc20scSBhcyBtYXBBc3luY0RlcGVuZGVuY3ksQV8gYXMgbWFwUGFja2FnZVJlZ2lzdGVyLHJfIGFzIG1hcFRhc2tDYWxsQmFjayxzXyBhcyBvbkxvZyxoIGFzIHJlcXVlc3RSZXNvdXJjZSxpXyBhcyBzZXRCRGVidWcsbl8gYXMgc2V0T25Mb2csX18gYXMgd2FpdEFzeW5jRGVwZW5kZW5jeSxlXyBhcyB3b3JrZXIsYV8gYXMgd29ya2VyQXV0b1Jlc291cmNlc307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/dynamsoft-document-normalizer/dist/ddn.esm.js":
/*!********************************************************************!*\
  !*** ./node_modules/dynamsoft-document-normalizer/dist/ddn.esm.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DocumentNormalizerModule: function() { return /* binding */ C; },\n/* harmony export */   EnumImageColourMode: function() { return /* binding */ v; }\n/* harmony export */ });\n/* harmony import */ var dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dynamsoft-core */ \"(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js\");\n/*!\n* Dynamsoft JavaScript Library\n* @product Dynamsoft Document Normalizer JS Edition\n* @website http://www.dynamsoft.com\n* @copyright Copyright 2024, Dynamsoft Corporation\n* @author Dynamsoft\n* @version 2.4.20\n* @fileoverview Dynamsoft JavaScript Library for Document Normalizer\n* More info on ddn JS: https://www.dynamsoft.com/document-normalizer/docs/web/programming/javascript/\n*/\nconst p=\"undefined\"==typeof self,g=(()=>{if(!p&&document.currentScript){let e=document.currentScript.src,t=e.indexOf(\"?\");if(-1!=t)e=e.substring(0,t);else{let t=e.indexOf(\"#\");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf(\"/\")+1)}return\"./\"})(),h=e=>{if(null==e&&(e=\"./\"),p);else{let t=document.createElement(\"a\");t.href=e,e=t.href}return e.endsWith(\"/\")||(e+=\"/\"),e};dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.ddn={version:\"2.4.20\",path:g},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.workerAutoResources.ddn={js:!0,wasm:!0,deps:[\"license\",\"dip\"]},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.ddn={handleNormalizedImageResultItem:function(i){let d=i,o=(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._getNorImageData)(d.imageData);d.toCanvas=()=>(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._toCanvas)(o),d.toImage=e=>(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._toImage)(e,o),d.toBlob=e=>(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._toBlob)(e,o),d.saveToFile=async(e,t)=>{if(!e)return null;if(\"string\"!=typeof e)throw new TypeError(\"FileName must be of type string.\");return (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._saveToFile)(o,e,t)}}};const y=\"1.4.10\";\"string\"!=typeof dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std&&(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.compareVersion)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std.version,y)<0&&(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std={version:y,path:h(g+`../../dynamsoft-capture-vision-std@${y}/dist/`)});const I=\"2.4.20\";(!dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip||\"string\"!=typeof dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip&&(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.compareVersion)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip.version,I)<0)&&(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip={version:I,path:h(g+`../../dynamsoft-image-processing@${I}/dist/`)});class C{static getVersion(){const e=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.ddn&&dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.ddn.wasm,t=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.ddn&&dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.ddn.worker;return`2.4.20(Worker: ${t||\"Not Loaded\"}, Wasm: ${e||\"Not Loaded\"})`}async setThresholdValue(e,t,s,n){return await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)(\"ddn\"),await new Promise(((r,i)=>{let d=(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[d]=async e=>{if(e.success)return r();{let t=new Error(e.message);return t.stack=e.stack+\"\\n\"+t.stack,i(t)}},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({type:\"ddn_setThresholdValue\",id:d,instanceID:e._instanceID,body:{threshold:t,leftLimit:s,rightLimit:n}})}))}}var v;!function(e){e[e.ICM_COLOUR=0]=\"ICM_COLOUR\",e[e.ICM_GRAYSCALE=1]=\"ICM_GRAYSCALE\",e[e.ICM_BINARY=2]=\"ICM_BINARY\"}(v||(v={}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9keW5hbXNvZnQtZG9jdW1lbnQtbm9ybWFsaXplci9kaXN0L2Rkbi5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDK1IseUNBQXlDLCtCQUErQixrREFBa0QsNEJBQTRCLEtBQUsscUJBQXFCLDRCQUE0QiwyQ0FBMkMsV0FBVyxVQUFVLHdCQUF3QixLQUFLLGtDQUFrQyxrQkFBa0Isb0NBQW9DLDhEQUFDLE1BQU0sd0JBQXdCLENBQUMsK0RBQUMsTUFBTSxxQ0FBcUMsQ0FBQyw4REFBQyxNQUFNLDRDQUE0QyxVQUFVLGdFQUFDLGNBQWMsZUFBZSx5REFBQyxpQkFBaUIsd0RBQUMsa0JBQWtCLHVEQUFDLGdDQUFnQyxrQkFBa0IsOEVBQThFLE9BQU8sMkRBQUMsV0FBVyxpQkFBaUIsaUJBQWlCLDhEQUFDLE1BQU0sOERBQUMsQ0FBQyw4REFBQyxvQkFBb0IsOERBQUMsTUFBTSx5REFBeUQsRUFBRSxTQUFTLEVBQUUsaUJBQWlCLEVBQUUsOERBQUMsdUJBQXVCLDhEQUFDLE1BQU0sOERBQUMsQ0FBQyw4REFBQyxxQkFBcUIsOERBQUMsTUFBTSx1REFBdUQsRUFBRSxTQUFTLEVBQUUsUUFBUSxvQkFBb0IsUUFBUSx5REFBQyxNQUFNLHlEQUFDLFlBQVkseURBQUMsTUFBTSx5REFBQyxZQUFZLHdCQUF3QixnQkFBZ0IsVUFBVSxnQkFBZ0IsR0FBRyxpQ0FBaUMsYUFBYSx3REFBQyxtQ0FBbUMsTUFBTSw2REFBQyxHQUFHLDJEQUFDLGNBQWMseUJBQXlCLDJCQUEyQiwwQ0FBMEMsQ0FBQyxrREFBQyxjQUFjLGlFQUFpRSxzQ0FBc0MsRUFBRSxJQUFJLE1BQU0sYUFBYSxtR0FBbUcsU0FBUyxHQUFrRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvZHluYW1zb2Z0LWRvY3VtZW50LW5vcm1hbGl6ZXIvZGlzdC9kZG4uZXNtLmpzPzBlZWQiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4qIER5bmFtc29mdCBKYXZhU2NyaXB0IExpYnJhcnlcbiogQHByb2R1Y3QgRHluYW1zb2Z0IERvY3VtZW50IE5vcm1hbGl6ZXIgSlMgRWRpdGlvblxuKiBAd2Vic2l0ZSBodHRwOi8vd3d3LmR5bmFtc29mdC5jb21cbiogQGNvcHlyaWdodCBDb3B5cmlnaHQgMjAyNCwgRHluYW1zb2Z0IENvcnBvcmF0aW9uXG4qIEBhdXRob3IgRHluYW1zb2Z0XG4qIEB2ZXJzaW9uIDIuNC4yMFxuKiBAZmlsZW92ZXJ2aWV3IER5bmFtc29mdCBKYXZhU2NyaXB0IExpYnJhcnkgZm9yIERvY3VtZW50IE5vcm1hbGl6ZXJcbiogTW9yZSBpbmZvIG9uIGRkbiBKUzogaHR0cHM6Ly93d3cuZHluYW1zb2Z0LmNvbS9kb2N1bWVudC1ub3JtYWxpemVyL2RvY3Mvd2ViL3Byb2dyYW1taW5nL2phdmFzY3JpcHQvXG4qL1xuaW1wb3J0e19nZXROb3JJbWFnZURhdGEgYXMgZSxfdG9DYW52YXMgYXMgdCxfdG9JbWFnZSBhcyBzLF90b0Jsb2IgYXMgbixfc2F2ZVRvRmlsZSBhcyByLGF1dG9EaXNjb3ZlcnlQYXRocyBhcyBpLHdvcmtlckF1dG9SZXNvdXJjZXMgYXMgZCxtYXBQYWNrYWdlUmVnaXN0ZXIgYXMgbyxjb21wYXJlVmVyc2lvbiBhcyBhLGlubmVyVmVyc2lvbnMgYXMgYyxsb2FkV2FzbSBhcyBsLGdldE5leHRUYXNrSUQgYXMgdSxtYXBUYXNrQ2FsbEJhY2sgYXMgZix3b3JrZXIgYXMgbX1mcm9tXCJkeW5hbXNvZnQtY29yZVwiO2NvbnN0IHA9XCJ1bmRlZmluZWRcIj09dHlwZW9mIHNlbGYsZz0oKCk9PntpZighcCYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCl7bGV0IGU9ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMsdD1lLmluZGV4T2YoXCI/XCIpO2lmKC0xIT10KWU9ZS5zdWJzdHJpbmcoMCx0KTtlbHNle2xldCB0PWUuaW5kZXhPZihcIiNcIik7LTEhPXQmJihlPWUuc3Vic3RyaW5nKDAsdCkpfXJldHVybiBlLnN1YnN0cmluZygwLGUubGFzdEluZGV4T2YoXCIvXCIpKzEpfXJldHVyblwiLi9cIn0pKCksaD1lPT57aWYobnVsbD09ZSYmKGU9XCIuL1wiKSxwKTtlbHNle2xldCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3QuaHJlZj1lLGU9dC5ocmVmfXJldHVybiBlLmVuZHNXaXRoKFwiL1wiKXx8KGUrPVwiL1wiKSxlfTtpLmRkbj17dmVyc2lvbjpcIjIuNC4yMFwiLHBhdGg6Z30sZC5kZG49e2pzOiEwLHdhc206ITAsZGVwczpbXCJsaWNlbnNlXCIsXCJkaXBcIl19LG8uZGRuPXtoYW5kbGVOb3JtYWxpemVkSW1hZ2VSZXN1bHRJdGVtOmZ1bmN0aW9uKGkpe2xldCBkPWksbz1lKGQuaW1hZ2VEYXRhKTtkLnRvQ2FudmFzPSgpPT50KG8pLGQudG9JbWFnZT1lPT5zKGUsbyksZC50b0Jsb2I9ZT0+bihlLG8pLGQuc2F2ZVRvRmlsZT1hc3luYyhlLHQpPT57aWYoIWUpcmV0dXJuIG51bGw7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZpbGVOYW1lIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcuXCIpO3JldHVybiByKG8sZSx0KX19fTtjb25zdCB5PVwiMS40LjEwXCI7XCJzdHJpbmdcIiE9dHlwZW9mIGkuc3RkJiZhKGkuc3RkLnZlcnNpb24seSk8MCYmKGkuc3RkPXt2ZXJzaW9uOnkscGF0aDpoKGcrYC4uLy4uL2R5bmFtc29mdC1jYXB0dXJlLXZpc2lvbi1zdGRAJHt5fS9kaXN0L2ApfSk7Y29uc3QgST1cIjIuNC4yMFwiOyghaS5kaXB8fFwic3RyaW5nXCIhPXR5cGVvZiBpLmRpcCYmYShpLmRpcC52ZXJzaW9uLEkpPDApJiYoaS5kaXA9e3ZlcnNpb246SSxwYXRoOmgoZytgLi4vLi4vZHluYW1zb2Z0LWltYWdlLXByb2Nlc3NpbmdAJHtJfS9kaXN0L2ApfSk7Y2xhc3MgQ3tzdGF0aWMgZ2V0VmVyc2lvbigpe2NvbnN0IGU9Yy5kZG4mJmMuZGRuLndhc20sdD1jLmRkbiYmYy5kZG4ud29ya2VyO3JldHVybmAyLjQuMjAoV29ya2VyOiAke3R8fFwiTm90IExvYWRlZFwifSwgV2FzbTogJHtlfHxcIk5vdCBMb2FkZWRcIn0pYH1hc3luYyBzZXRUaHJlc2hvbGRWYWx1ZShlLHQscyxuKXtyZXR1cm4gYXdhaXQgbChcImRkblwiKSxhd2FpdCBuZXcgUHJvbWlzZSgoKHIsaSk9PntsZXQgZD11KCk7ZltkXT1hc3luYyBlPT57aWYoZS5zdWNjZXNzKXJldHVybiByKCk7e2xldCB0PW5ldyBFcnJvcihlLm1lc3NhZ2UpO3JldHVybiB0LnN0YWNrPWUuc3RhY2srXCJcXG5cIit0LnN0YWNrLGkodCl9fSxtLnBvc3RNZXNzYWdlKHt0eXBlOlwiZGRuX3NldFRocmVzaG9sZFZhbHVlXCIsaWQ6ZCxpbnN0YW5jZUlEOmUuX2luc3RhbmNlSUQsYm9keTp7dGhyZXNob2xkOnQsbGVmdExpbWl0OnMscmlnaHRMaW1pdDpufX0pfSkpfX12YXIgdjshZnVuY3Rpb24oZSl7ZVtlLklDTV9DT0xPVVI9MF09XCJJQ01fQ09MT1VSXCIsZVtlLklDTV9HUkFZU0NBTEU9MV09XCJJQ01fR1JBWVNDQUxFXCIsZVtlLklDTV9CSU5BUlk9Ml09XCJJQ01fQklOQVJZXCJ9KHZ8fCh2PXt9KSk7ZXhwb3J0e0MgYXMgRG9jdW1lbnROb3JtYWxpemVyTW9kdWxlLHYgYXMgRW51bUltYWdlQ29sb3VyTW9kZX07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/dynamsoft-document-normalizer/dist/ddn.esm.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/dynamsoft-license/dist/license.esm.js":
/*!************************************************************!*\
  !*** ./node_modules/dynamsoft-license/dist/license.esm.js ***!
  \************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LicenseManager: function() { return /* binding */ D; },\n/* harmony export */   LicenseModule: function() { return /* binding */ R; }\n/* harmony export */ });\n/* harmony import */ var dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dynamsoft-core */ \"(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js\");\n/*!\n * Dynamsoft JavaScript Library\n * @product Dynamsoft License JS Edition\n * @website https://www.dynamsoft.com\n * @copyright Copyright 2024, Dynamsoft Corporation\n * @author Dynamsoft\n * @version 3.4.21\n * @fileoverview Dynamsoft JavaScript Library for Core\n * More info DL JS: https://www.dynamsoft.com/capture-vision/docs/web/programming/javascript/api-reference/license/license-module.html\n */\nconst m=\"undefined\"==typeof self,p=m?{}:self,v=(()=>{if(!m&&document.currentScript){let e=document.currentScript.src,t=e.indexOf(\"?\");if(-1!=t)e=e.substring(0,t);else{let t=e.indexOf(\"#\");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf(\"/\")+1)}return\"./\"})(),y=e=>{if(null==e&&(e=\"./\"),m);else{let t=document.createElement(\"a\");t.href=e,e=t.href}return e.endsWith(\"/\")||(e+=\"/\"),e},w=e=>e&&\"object\"==typeof e&&\"function\"==typeof e.then;class b extends Promise{get status(){return this._s}get isPending(){return\"pending\"===this._s}get isFulfilled(){return\"fulfilled\"===this._s}get isRejected(){return\"rejected\"===this._s}get task(){return this._task}set task(e){let t;this._task=e,w(e)?t=e:\"function\"==typeof e&&(t=new Promise(e)),t&&(async()=>{try{const s=await t;e===this._task&&this.resolve(s)}catch(t){e===this._task&&this.reject(t)}})()}get isEmpty(){return null==this._task}constructor(e){let t,s;super(((e,r)=>{t=e,s=r})),this._s=\"pending\",this.resolve=e=>{this.isPending&&(w(e)?this.task=e:(this._s=\"fulfilled\",t(e)))},this.reject=e=>{this.isPending&&(this._s=\"rejected\",s(e))},this.task=e}}const S=\" is not allowed to change after `createInstance` or `loadWasm` is called.\",_=!m&&document.currentScript&&(document.currentScript.getAttribute(\"data-license\")||document.currentScript.getAttribute(\"data-productKeys\")||document.currentScript.getAttribute(\"data-licenseKey\")||document.currentScript.getAttribute(\"data-handshakeCode\")||document.currentScript.getAttribute(\"data-organizationID\"))||\"\",k=(e,t)=>{const s=e;if(s._license!==t){if(!s._pLoad.isEmpty)throw new Error(\"`license`\"+S);s._license=t}};!m&&document.currentScript&&document.currentScript.getAttribute(\"data-sessionPassword\");const E=e=>{if(null==e)e=[];else{e=e instanceof Array?[...e]:[e];for(let t=0;t<e.length;++t){if(!m){let s=document.createElement(\"a\");s.href=e[t],e[t]=s.href}e[t].endsWith(\"/\")||(e[t]+=\"/\")}}return e},L=(e,t)=>{t=E(t);const s=e;if(s._licenseServer!==t){if(!s._pLoad.isEmpty)throw new Error(\"`licenseServer`\"+S);s._licenseServer=t}},O=(e,t)=>{t=t||\"\";const s=e;if(s._deviceFriendlyName!==t){if(!s._pLoad.isEmpty)throw new Error(\"`deviceFriendlyName`\"+S);s._deviceFriendlyName=t}};let C,x,N,P,W;\"undefined\"!=typeof navigator&&(C=navigator,x=C.userAgent,N=C.platform,P=C.mediaDevices),function(){if(!m){const e={Edge:{search:\"Edg\",verSearch:\"Edg\"},OPR:null,Chrome:null,Safari:{str:C.vendor,search:\"Apple\",verSearch:[\"Version\",\"iPhone OS\",\"CPU OS\"]},Firefox:null,Explorer:{search:\"MSIE\",verSearch:\"MSIE\"}},t={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:N,search:\"Win\"},Mac:{str:N},Linux:{str:N}};let s=\"unknownBrowser\",r=0,i=\"unknownOS\";for(let t in e){const i=e[t]||{};let n=i.str||x,o=i.search||t,a=i.verStr||x,l=i.verSearch||t;if(l instanceof Array||(l=[l]),-1!=n.indexOf(o)){s=t;for(let e of l){let t=a.indexOf(e);if(-1!=t){r=parseFloat(a.substring(t+e.length+1));break}}break}}for(let e in t){const s=t[e]||{};let r=s.str||x,n=s.search||e;if(-1!=r.indexOf(n)){i=e;break}}\"Linux\"==i&&-1!=x.indexOf(\"Windows NT\")&&(i=\"HarmonyOS\"),W={browser:s,version:r,OS:i}}m&&(W={browser:\"ssr\",version:0,OS:\"ssr\"})}(),P&&P.getUserMedia,\"Chrome\"===W.browser&&W.version>66||\"Safari\"===W.browser&&W.version>13||\"OPR\"===W.browser&&W.version>43||\"Edge\"===W.browser&&W.version;const A=()=>((0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)(\"license\"),(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.doOrWaitAsyncDependency)(\"dynamsoft_inited\",(async()=>{let{lt:e,l:t,ls:s,sp:u,rmk:f,cv:h}=((e,t=!1)=>{const s=e;if(s._pLoad.isEmpty){let e,r,i,n=s._license||\"\",o=JSON.parse(JSON.stringify(s._licenseServer)),a=s._sessionPassword,l=0;if(n.startsWith(\"t\")||n.startsWith(\"f\"))l=0;else if(0===n.length||n.startsWith(\"P\")||n.startsWith(\"L\")||n.startsWith(\"Y\")||n.startsWith(\"A\"))l=1;else{l=2;const t=n.indexOf(\":\");-1!=t&&(n=n.substring(t+1));const s=n.indexOf(\"?\");if(-1!=s&&(r=n.substring(s+1),n=n.substring(0,s)),n.startsWith(\"DLC2\"))l=0;else{if(n.startsWith(\"DLS2\")){let t;try{let e=n.substring(4);e=atob(e),t=JSON.parse(e)}catch(e){throw new Error(\"Format Error: The license string you specified is invalid, please check to make sure it is correct.\")}if(n=t.handshakeCode?t.handshakeCode:t.organizationID?t.organizationID:\"\",\"number\"==typeof n&&(n=JSON.stringify(n)),0===o.length){let e=[];t.mainServerURL&&(e[0]=t.mainServerURL),t.standbyServerURL&&(e[1]=t.standbyServerURL),o=E(e)}!a&&t.sessionPassword&&(a=t.sessionPassword),e=t.remark}n&&\"200001\"!==n&&!n.startsWith(\"200001-\")||(l=1)}}if(l&&(t||(p.crypto||(i=\"Please upgrade your browser to support online key.\"),p.crypto.subtle||(i=\"Require https to use online key in this browser.\"))),i){if(1!==l)throw new Error(i);l=0,console.warn(i),s._lastErrorCode=-1,s._lastErrorString=i}return 1===l&&(n=\"\",console.warn(\"Applying for a public trial license ...\")),{lt:l,l:n,ls:o,sp:a,rmk:e,cv:r}}throw new Error(\"Can't preprocess license again\"+S)})(D),g=new b;D._pLoad.task=g,(async()=>{try{await D._pLoad}catch(e){}})();let m=(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[m]=t=>{if(t.message&&D._onAuthMessage){let e=D._onAuthMessage(t.message);null!=e&&(t.message=e)}let s,r=!1;if(1===e&&(r=!0),t.success?(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.onLog&&(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.onLog)(\"init license success\"),t.message&&console.warn(t.message),dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule._bSupportIRTModule=t.bSupportIRTModule,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule._bSupportDce4Module=t.bSupportDce4Module,D.bPassValidation=!0,[0,-10076].includes(t.initLicenseInfo.errorCode)?[-10076].includes(t.initLicenseInfo.errorCode)&&console.warn(t.initLicenseInfo.errorString):g.reject(new Error(t.initLicenseInfo.errorString))):(s=Error(t.message),t.stack&&(s.stack=t.stack),t.ltsErrorCode&&(s.ltsErrorCode=t.ltsErrorCode),r||111==t.ltsErrorCode&&-1!=t.message.toLowerCase().indexOf(\"trial license\")&&(r=!0)),r){const e=(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.handleEngineResourcePaths)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule.engineResourcePaths,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths);(async(e,t,s)=>{if(!e._bNeverShowDialog)try{let r=await fetch(e.engineResourcePath+\"dls.license.dialog.html\");if(!r.ok)throw Error(\"Get license dialog fail. Network Error: \"+r.statusText);let i=await r.text();if(!i.trim().startsWith(\"<\"))throw Error(\"Get license dialog fail. Can't get valid HTMLElement.\");let n=document.createElement(\"div\");n.innerHTML=i;let o=[];for(let e=0;e<n.childElementCount;++e){let t=n.children[e];t instanceof HTMLStyleElement&&(o.push(t),document.head.append(t))}let a=1==n.childElementCount?n.children[0]:n;a.remove();let l,c,d,u,f,h=[a],g=a.children;for(let e of g)h.push(e);for(let e=0;e<h.length;++e)for(let t of h[e].children)h.push(t);for(let e of h)if(!l&&e.classList.contains(\"dls-license-mask\"))l=e,e.addEventListener(\"click\",(t=>{if(e==t.target){a.remove();for(let e of o)e.remove()}}));else if(!c&&e.classList.contains(\"dls-license-icon-close\"))c=e,e.addEventListener(\"click\",(()=>{a.remove();for(let e of o)e.remove()}));else if(!d&&e.classList.contains(\"dls-license-icon-error\"))d=e,\"error\"!=t&&e.remove();else if(!u&&e.classList.contains(\"dls-license-icon-warn\"))u=e,\"warn\"!=t&&e.remove();else if(!f&&e.classList.contains(\"dls-license-msg-content\")){f=e;let t=s;for(;t;){let s=t.indexOf(\"[\"),r=t.indexOf(\"]\",s),i=t.indexOf(\"(\",r),n=t.indexOf(\")\",i);if(-1==s||-1==r||-1==i||-1==n){e.appendChild(new Text(t));break}s>0&&e.appendChild(new Text(t.substring(0,s)));let o=document.createElement(\"a\"),a=t.substring(s+1,r);o.innerText=a;let l=t.substring(i+1,n);o.setAttribute(\"href\",l),o.setAttribute(\"target\",\"_blank\"),e.appendChild(o),t=t.substring(n+1)}}document.body.appendChild(a)}catch(t){e._onLog&&e._onLog(t.message||t)}})({_bNeverShowDialog:D._bNeverShowDialog,engineResourcePath:e.license,_onLog:dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.onLog},t.success?\"warn\":\"error\",t.message)}t.success?g.resolve(void 0):g.reject(s)},await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.waitAsyncDependency)(\"core\"),dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({type:\"license_dynamsoft\",body:{v:\"3.4.21\",brtk:!!e,bptk:1===e,l:t,os:W,fn:D.deviceFriendlyName,ls:s,sp:u,rmk:f,cv:h},id:m}),D.bCallInitLicense=!0,await g})));let I;dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license={},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license.dynamsoft=A,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license.getAR=async()=>{{let e=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapAsyncDependency.dynamsoft_inited;e&&e.isRejected&&await e}return dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker?new Promise(((e,t)=>{let s=(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[s]=async s=>{if(s.success){delete s.success;{let e=D.license;e&&(e.startsWith(\"t\")||e.startsWith(\"f\"))&&(s.pk=e)}if(Object.keys(s).length){if(s.lem){let e=Error(s.lem);e.ltsErrorCode=s.lec,delete s.lem,delete s.lec,s.ae=e}e(s)}else e(null)}else{let e=Error(s.message);s.stack&&(e.stack=s.stack),t(e)}},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({type:\"license_getAR\",id:s})})):null};class D{static setLicenseServer(e){L(D,e)}static get license(){return this._license}static set license(e){k(D,e)}static get licenseServer(){return this._licenseServer}static set licenseServer(e){L(D,e)}static get deviceFriendlyName(){return this._deviceFriendlyName}static set deviceFriendlyName(e){O(D,e)}static initLicense(e,t){if(k(D,e),D.bCallInitLicense=!0,\"boolean\"==typeof t&&t||\"object\"==typeof t&&t.executeNow)return A()}static setDeviceFriendlyName(e){O(D,e)}static getDeviceFriendlyName(){return D._deviceFriendlyName}static getDeviceUUID(){return(async()=>(await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.doOrWaitAsyncDependency)(\"dynamsoft_uuid\",(async()=>{await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)();let e=new b,s=(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[s]=t=>{if(t.success)e.resolve(t.uuid);else{const s=Error(t.message);t.stack&&(s.stack=t.stack),e.reject(s)}},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({type:\"license_getDeviceUUID\",id:s}),I=await e})),I))()}}D._pLoad=new b,D.bPassValidation=!1,D.bCallInitLicense=!1,D._license=_,D._licenseServer=[],D._deviceFriendlyName=\"\",dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.license={version:\"3.4.21\",path:v},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.workerAutoResources.license={wasm:!0,js:!0},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license.LicenseManager=D;const M=\"1.4.10\";\"string\"!=typeof dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std&&(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.compareVersion)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std.version,M)<0&&(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std={version:M,path:y(v+`../../dynamsoft-capture-vision-std@${M}/dist/`)});class R{static getVersion(){return`3.4.21(Worker: ${dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.license&&dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.license.worker||\"Not Loaded\"}, Wasm: ${dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.license&&dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.license.wasm||\"Not Loaded\"})`}}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9keW5hbXNvZnQtbGljZW5zZS9kaXN0L2xpY2Vuc2UuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3NWLHVDQUF1QyxjQUFjLCtCQUErQixrREFBa0QsNEJBQTRCLEtBQUsscUJBQXFCLDRCQUE0QiwyQ0FBMkMsV0FBVyxVQUFVLHdCQUF3QixLQUFLLGtDQUFrQyxrQkFBa0IsbUNBQW1DLHVEQUF1RCx3QkFBd0IsYUFBYSxlQUFlLGdCQUFnQiwwQkFBMEIsa0JBQWtCLDRCQUE0QixpQkFBaUIsMkJBQTJCLFdBQVcsa0JBQWtCLFlBQVksTUFBTSw2RUFBNkUsSUFBSSxnQkFBZ0IsZ0NBQWdDLFNBQVMsZ0NBQWdDLElBQUksY0FBYyx3QkFBd0IsZUFBZSxRQUFRLGVBQWUsUUFBUSxzQ0FBc0MsOERBQThELGlCQUFpQiwwQ0FBMEMsY0FBYyw4WkFBOFosVUFBVSxtQkFBbUIsb0RBQW9ELGVBQWUsd0ZBQXdGLFlBQVksZ0JBQWdCLEtBQUssZ0NBQWdDLFlBQVksV0FBVyxLQUFLLE9BQU8sa0NBQWtDLHdCQUF3QixpQ0FBaUMsU0FBUyxXQUFXLE9BQU8sVUFBVSx5QkFBeUIsMERBQTBELG9CQUFvQixXQUFXLFFBQVEsVUFBVSw4QkFBOEIsK0RBQStELDBCQUEwQixjQUFjLG9HQUFvRyxPQUFPLFNBQVMsTUFBTSw2QkFBNkIsOEJBQThCLHVFQUF1RSx3QkFBd0IsZ0NBQWdDLElBQUksMkRBQTJELG1CQUFtQixNQUFNLE1BQU0sUUFBUSxRQUFRLHlDQUF5QyxnQkFBZ0IsaUJBQWlCLDREQUE0RCxpREFBaUQsSUFBSSxnQkFBZ0IsbUJBQW1CLFVBQVUsd0NBQXdDLE9BQU8sT0FBTyxnQkFBZ0IsaUJBQWlCLDZCQUE2QixxQkFBcUIsSUFBSSxPQUFPLDREQUE0RCwwQkFBMEIsT0FBTyxpQ0FBaUMsRUFBRSw0SkFBNEosYUFBYSx3REFBQyxZQUFZLHVFQUFDLCtCQUErQixJQUFJLDhCQUE4QixhQUFhLFVBQVUscUJBQXFCLG1HQUFtRyw0Q0FBNEMscUdBQXFHLEtBQUssSUFBSSx1QkFBdUIsNEJBQTRCLHVCQUF1QiwyRUFBMkUsS0FBSyx5QkFBeUIsTUFBTSxJQUFJLHFCQUFxQiwwQkFBMEIsU0FBUyx1SEFBdUgsa0lBQWtJLFNBQVMsNkZBQTZGLHdEQUF3RCxrREFBa0QsMkpBQTJKLDRCQUE0Qiw2REFBNkQsOEVBQThFLCtCQUErQixvREFBb0QsYUFBYSwyQkFBMkIsSUFBSSxlQUFlLFdBQVcsSUFBSSxNQUFNLDZEQUFDLEdBQUcsMkRBQUMsUUFBUSxnQ0FBZ0Msa0NBQWtDLHVCQUF1QixXQUFXLDRCQUE0QixpREFBQyxFQUFFLHFEQUFDLDREQUE0RCxzREFBQyx3Q0FBd0Msc0RBQUMsd2JBQXdiLFFBQVEseUVBQUMsQ0FBQyxzREFBQyxxQkFBcUIsOERBQUMsRUFBRSxnQkFBZ0IsNEJBQTRCLGtFQUFrRSw4RUFBOEUscUJBQXFCLGtHQUFrRyxvQ0FBb0MsY0FBYyxTQUFTLFlBQVksc0JBQXNCLEtBQUssb0JBQW9CLG1FQUFtRSw2Q0FBNkMsV0FBVyxpQ0FBaUMseUJBQXlCLFlBQVksV0FBVyx5Q0FBeUMsbUdBQW1HLGdCQUFnQixXQUFXLDJCQUEyQixHQUFHLGdHQUFnRyxXQUFXLDBCQUEwQixHQUFHLHNGQUFzRixvRkFBb0YsNkRBQTZELElBQUksUUFBUSxLQUFLLEVBQUUsRUFBRSw4RUFBOEUsK0JBQStCLDJCQUEyQixNQUFNLCtDQUErQyx1REFBdUQsY0FBYyx5QkFBeUIsZ0dBQWdHLDZCQUE2QixTQUFTLGtDQUFrQyxHQUFHLDBFQUEwRSxpREFBQyxDQUFDLHFDQUFxQyx3Q0FBd0MsT0FBTyxtRUFBQyxTQUFTLGtEQUFDLGNBQWMsK0JBQStCLHFGQUFxRixNQUFNLGdDQUFnQyxJQUFJLE1BQU0sOERBQUMsV0FBVyxDQUFDLDhEQUFDLHFCQUFxQiw4REFBQywwQkFBMEIsTUFBTSw4REFBQyxrQkFBa0IseUJBQXlCLE9BQU8sa0RBQUMsc0JBQXNCLE1BQU0sNkRBQUMsR0FBRywyREFBQyxjQUFjLGNBQWMsa0JBQWtCLGdCQUFnQixvREFBb0QsMEJBQTBCLFVBQVUsbUJBQW1CLHNEQUFzRCxLQUFLLGFBQWEsS0FBSyx1QkFBdUIsaUNBQWlDLENBQUMsa0RBQUMsY0FBYywwQkFBMEIsRUFBRSxTQUFTLFFBQVEsMkJBQTJCLE9BQU8scUJBQXFCLHFCQUFxQixzQkFBc0IsT0FBTywyQkFBMkIsMkJBQTJCLDRCQUE0QixPQUFPLGdDQUFnQyxnQ0FBZ0MsaUNBQWlDLE9BQU8sd0JBQXdCLG9HQUFvRyxnQ0FBZ0MsT0FBTywrQkFBK0IsNkJBQTZCLHVCQUF1Qix1QkFBdUIsdUVBQUMsNkJBQTZCLE1BQU0sd0RBQUMsR0FBRyxjQUFjLDZEQUFDLEdBQUcsMkRBQUMsUUFBUSwrQkFBK0IsS0FBSyx5QkFBeUIsd0NBQXdDLENBQUMsa0RBQUMsY0FBYyxrQ0FBa0MsWUFBWSxVQUFVLG9IQUFvSCw4REFBQyxVQUFVLHdCQUF3QixDQUFDLCtEQUFDLFVBQVUsY0FBYyxDQUFDLDhEQUFDLDBCQUEwQixpQkFBaUIsaUJBQWlCLDhEQUFDLE1BQU0sOERBQUMsQ0FBQyw4REFBQyxvQkFBb0IsOERBQUMsTUFBTSx5REFBeUQsRUFBRSxTQUFTLEVBQUUsUUFBUSxvQkFBb0Isd0JBQXdCLHlEQUFDLFVBQVUseURBQUMsOEJBQThCLFVBQVUseURBQUMsVUFBVSx5REFBQyw0QkFBNEIsSUFBbUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2R5bmFtc29mdC1saWNlbnNlL2Rpc3QvbGljZW5zZS5lc20uanM/M2M0ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIER5bmFtc29mdCBKYXZhU2NyaXB0IExpYnJhcnlcbiAqIEBwcm9kdWN0IER5bmFtc29mdCBMaWNlbnNlIEpTIEVkaXRpb25cbiAqIEB3ZWJzaXRlIGh0dHBzOi8vd3d3LmR5bmFtc29mdC5jb21cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IDIwMjQsIER5bmFtc29mdCBDb3Jwb3JhdGlvblxuICogQGF1dGhvciBEeW5hbXNvZnRcbiAqIEB2ZXJzaW9uIDMuNC4yMVxuICogQGZpbGVvdmVydmlldyBEeW5hbXNvZnQgSmF2YVNjcmlwdCBMaWJyYXJ5IGZvciBDb3JlXG4gKiBNb3JlIGluZm8gREwgSlM6IGh0dHBzOi8vd3d3LmR5bmFtc29mdC5jb20vY2FwdHVyZS12aXNpb24vZG9jcy93ZWIvcHJvZ3JhbW1pbmcvamF2YXNjcmlwdC9hcGktcmVmZXJlbmNlL2xpY2Vuc2UvbGljZW5zZS1tb2R1bGUuaHRtbFxuICovXG5pbXBvcnR7bWFwUGFja2FnZVJlZ2lzdGVyIGFzIGUsbG9hZFdhc20gYXMgdCxkb09yV2FpdEFzeW5jRGVwZW5kZW5jeSBhcyBzLGdldE5leHRUYXNrSUQgYXMgcixtYXBUYXNrQ2FsbEJhY2sgYXMgaSxvbkxvZyBhcyBuLENvcmVNb2R1bGUgYXMgbyxoYW5kbGVFbmdpbmVSZXNvdXJjZVBhdGhzIGFzIGEsYXV0b0Rpc2NvdmVyeVBhdGhzIGFzIGwsd2FpdEFzeW5jRGVwZW5kZW5jeSBhcyBjLHdvcmtlciBhcyBkLG1hcEFzeW5jRGVwZW5kZW5jeSBhcyB1LHdvcmtlckF1dG9SZXNvdXJjZXMgYXMgZixjb21wYXJlVmVyc2lvbiBhcyBoLGlubmVyVmVyc2lvbnMgYXMgZ31mcm9tXCJkeW5hbXNvZnQtY29yZVwiO2NvbnN0IG09XCJ1bmRlZmluZWRcIj09dHlwZW9mIHNlbGYscD1tP3t9OnNlbGYsdj0oKCk9PntpZighbSYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCl7bGV0IGU9ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMsdD1lLmluZGV4T2YoXCI/XCIpO2lmKC0xIT10KWU9ZS5zdWJzdHJpbmcoMCx0KTtlbHNle2xldCB0PWUuaW5kZXhPZihcIiNcIik7LTEhPXQmJihlPWUuc3Vic3RyaW5nKDAsdCkpfXJldHVybiBlLnN1YnN0cmluZygwLGUubGFzdEluZGV4T2YoXCIvXCIpKzEpfXJldHVyblwiLi9cIn0pKCkseT1lPT57aWYobnVsbD09ZSYmKGU9XCIuL1wiKSxtKTtlbHNle2xldCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3QuaHJlZj1lLGU9dC5ocmVmfXJldHVybiBlLmVuZHNXaXRoKFwiL1wiKXx8KGUrPVwiL1wiKSxlfSx3PWU9PmUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnRoZW47Y2xhc3MgYiBleHRlbmRzIFByb21pc2V7Z2V0IHN0YXR1cygpe3JldHVybiB0aGlzLl9zfWdldCBpc1BlbmRpbmcoKXtyZXR1cm5cInBlbmRpbmdcIj09PXRoaXMuX3N9Z2V0IGlzRnVsZmlsbGVkKCl7cmV0dXJuXCJmdWxmaWxsZWRcIj09PXRoaXMuX3N9Z2V0IGlzUmVqZWN0ZWQoKXtyZXR1cm5cInJlamVjdGVkXCI9PT10aGlzLl9zfWdldCB0YXNrKCl7cmV0dXJuIHRoaXMuX3Rhc2t9c2V0IHRhc2soZSl7bGV0IHQ7dGhpcy5fdGFzaz1lLHcoZSk/dD1lOlwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJih0PW5ldyBQcm9taXNlKGUpKSx0JiYoYXN5bmMoKT0+e3RyeXtjb25zdCBzPWF3YWl0IHQ7ZT09PXRoaXMuX3Rhc2smJnRoaXMucmVzb2x2ZShzKX1jYXRjaCh0KXtlPT09dGhpcy5fdGFzayYmdGhpcy5yZWplY3QodCl9fSkoKX1nZXQgaXNFbXB0eSgpe3JldHVybiBudWxsPT10aGlzLl90YXNrfWNvbnN0cnVjdG9yKGUpe2xldCB0LHM7c3VwZXIoKChlLHIpPT57dD1lLHM9cn0pKSx0aGlzLl9zPVwicGVuZGluZ1wiLHRoaXMucmVzb2x2ZT1lPT57dGhpcy5pc1BlbmRpbmcmJih3KGUpP3RoaXMudGFzaz1lOih0aGlzLl9zPVwiZnVsZmlsbGVkXCIsdChlKSkpfSx0aGlzLnJlamVjdD1lPT57dGhpcy5pc1BlbmRpbmcmJih0aGlzLl9zPVwicmVqZWN0ZWRcIixzKGUpKX0sdGhpcy50YXNrPWV9fWNvbnN0IFM9XCIgaXMgbm90IGFsbG93ZWQgdG8gY2hhbmdlIGFmdGVyIGBjcmVhdGVJbnN0YW5jZWAgb3IgYGxvYWRXYXNtYCBpcyBjYWxsZWQuXCIsXz0hbSYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCYmKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuZ2V0QXR0cmlidXRlKFwiZGF0YS1saWNlbnNlXCIpfHxkb2N1bWVudC5jdXJyZW50U2NyaXB0LmdldEF0dHJpYnV0ZShcImRhdGEtcHJvZHVjdEtleXNcIil8fGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuZ2V0QXR0cmlidXRlKFwiZGF0YS1saWNlbnNlS2V5XCIpfHxkb2N1bWVudC5jdXJyZW50U2NyaXB0LmdldEF0dHJpYnV0ZShcImRhdGEtaGFuZHNoYWtlQ29kZVwiKXx8ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW9yZ2FuaXphdGlvbklEXCIpKXx8XCJcIixrPShlLHQpPT57Y29uc3Qgcz1lO2lmKHMuX2xpY2Vuc2UhPT10KXtpZighcy5fcExvYWQuaXNFbXB0eSl0aHJvdyBuZXcgRXJyb3IoXCJgbGljZW5zZWBcIitTKTtzLl9saWNlbnNlPXR9fTshbSYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCYmZG9jdW1lbnQuY3VycmVudFNjcmlwdC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNlc3Npb25QYXNzd29yZFwiKTtjb25zdCBFPWU9PntpZihudWxsPT1lKWU9W107ZWxzZXtlPWUgaW5zdGFuY2VvZiBBcnJheT9bLi4uZV06W2VdO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7Kyt0KXtpZighbSl7bGV0IHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7cy5ocmVmPWVbdF0sZVt0XT1zLmhyZWZ9ZVt0XS5lbmRzV2l0aChcIi9cIil8fChlW3RdKz1cIi9cIil9fXJldHVybiBlfSxMPShlLHQpPT57dD1FKHQpO2NvbnN0IHM9ZTtpZihzLl9saWNlbnNlU2VydmVyIT09dCl7aWYoIXMuX3BMb2FkLmlzRW1wdHkpdGhyb3cgbmV3IEVycm9yKFwiYGxpY2Vuc2VTZXJ2ZXJgXCIrUyk7cy5fbGljZW5zZVNlcnZlcj10fX0sTz0oZSx0KT0+e3Q9dHx8XCJcIjtjb25zdCBzPWU7aWYocy5fZGV2aWNlRnJpZW5kbHlOYW1lIT09dCl7aWYoIXMuX3BMb2FkLmlzRW1wdHkpdGhyb3cgbmV3IEVycm9yKFwiYGRldmljZUZyaWVuZGx5TmFtZWBcIitTKTtzLl9kZXZpY2VGcmllbmRseU5hbWU9dH19O2xldCBDLHgsTixQLFc7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG5hdmlnYXRvciYmKEM9bmF2aWdhdG9yLHg9Qy51c2VyQWdlbnQsTj1DLnBsYXRmb3JtLFA9Qy5tZWRpYURldmljZXMpLGZ1bmN0aW9uKCl7aWYoIW0pe2NvbnN0IGU9e0VkZ2U6e3NlYXJjaDpcIkVkZ1wiLHZlclNlYXJjaDpcIkVkZ1wifSxPUFI6bnVsbCxDaHJvbWU6bnVsbCxTYWZhcmk6e3N0cjpDLnZlbmRvcixzZWFyY2g6XCJBcHBsZVwiLHZlclNlYXJjaDpbXCJWZXJzaW9uXCIsXCJpUGhvbmUgT1NcIixcIkNQVSBPU1wiXX0sRmlyZWZveDpudWxsLEV4cGxvcmVyOntzZWFyY2g6XCJNU0lFXCIsdmVyU2VhcmNoOlwiTVNJRVwifX0sdD17SGFybW9ueU9TOm51bGwsQW5kcm9pZDpudWxsLGlQaG9uZTpudWxsLGlQYWQ6bnVsbCxXaW5kb3dzOntzdHI6TixzZWFyY2g6XCJXaW5cIn0sTWFjOntzdHI6Tn0sTGludXg6e3N0cjpOfX07bGV0IHM9XCJ1bmtub3duQnJvd3NlclwiLHI9MCxpPVwidW5rbm93bk9TXCI7Zm9yKGxldCB0IGluIGUpe2NvbnN0IGk9ZVt0XXx8e307bGV0IG49aS5zdHJ8fHgsbz1pLnNlYXJjaHx8dCxhPWkudmVyU3RyfHx4LGw9aS52ZXJTZWFyY2h8fHQ7aWYobCBpbnN0YW5jZW9mIEFycmF5fHwobD1bbF0pLC0xIT1uLmluZGV4T2Yobykpe3M9dDtmb3IobGV0IGUgb2YgbCl7bGV0IHQ9YS5pbmRleE9mKGUpO2lmKC0xIT10KXtyPXBhcnNlRmxvYXQoYS5zdWJzdHJpbmcodCtlLmxlbmd0aCsxKSk7YnJlYWt9fWJyZWFrfX1mb3IobGV0IGUgaW4gdCl7Y29uc3Qgcz10W2VdfHx7fTtsZXQgcj1zLnN0cnx8eCxuPXMuc2VhcmNofHxlO2lmKC0xIT1yLmluZGV4T2Yobikpe2k9ZTticmVha319XCJMaW51eFwiPT1pJiYtMSE9eC5pbmRleE9mKFwiV2luZG93cyBOVFwiKSYmKGk9XCJIYXJtb255T1NcIiksVz17YnJvd3NlcjpzLHZlcnNpb246cixPUzppfX1tJiYoVz17YnJvd3NlcjpcInNzclwiLHZlcnNpb246MCxPUzpcInNzclwifSl9KCksUCYmUC5nZXRVc2VyTWVkaWEsXCJDaHJvbWVcIj09PVcuYnJvd3NlciYmVy52ZXJzaW9uPjY2fHxcIlNhZmFyaVwiPT09Vy5icm93c2VyJiZXLnZlcnNpb24+MTN8fFwiT1BSXCI9PT1XLmJyb3dzZXImJlcudmVyc2lvbj40M3x8XCJFZGdlXCI9PT1XLmJyb3dzZXImJlcudmVyc2lvbjtjb25zdCBBPSgpPT4odChcImxpY2Vuc2VcIikscyhcImR5bmFtc29mdF9pbml0ZWRcIiwoYXN5bmMoKT0+e2xldHtsdDplLGw6dCxsczpzLHNwOnUscm1rOmYsY3Y6aH09KChlLHQ9ITEpPT57Y29uc3Qgcz1lO2lmKHMuX3BMb2FkLmlzRW1wdHkpe2xldCBlLHIsaSxuPXMuX2xpY2Vuc2V8fFwiXCIsbz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHMuX2xpY2Vuc2VTZXJ2ZXIpKSxhPXMuX3Nlc3Npb25QYXNzd29yZCxsPTA7aWYobi5zdGFydHNXaXRoKFwidFwiKXx8bi5zdGFydHNXaXRoKFwiZlwiKSlsPTA7ZWxzZSBpZigwPT09bi5sZW5ndGh8fG4uc3RhcnRzV2l0aChcIlBcIil8fG4uc3RhcnRzV2l0aChcIkxcIil8fG4uc3RhcnRzV2l0aChcIllcIil8fG4uc3RhcnRzV2l0aChcIkFcIikpbD0xO2Vsc2V7bD0yO2NvbnN0IHQ9bi5pbmRleE9mKFwiOlwiKTstMSE9dCYmKG49bi5zdWJzdHJpbmcodCsxKSk7Y29uc3Qgcz1uLmluZGV4T2YoXCI/XCIpO2lmKC0xIT1zJiYocj1uLnN1YnN0cmluZyhzKzEpLG49bi5zdWJzdHJpbmcoMCxzKSksbi5zdGFydHNXaXRoKFwiRExDMlwiKSlsPTA7ZWxzZXtpZihuLnN0YXJ0c1dpdGgoXCJETFMyXCIpKXtsZXQgdDt0cnl7bGV0IGU9bi5zdWJzdHJpbmcoNCk7ZT1hdG9iKGUpLHQ9SlNPTi5wYXJzZShlKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJGb3JtYXQgRXJyb3I6IFRoZSBsaWNlbnNlIHN0cmluZyB5b3Ugc3BlY2lmaWVkIGlzIGludmFsaWQsIHBsZWFzZSBjaGVjayB0byBtYWtlIHN1cmUgaXQgaXMgY29ycmVjdC5cIil9aWYobj10LmhhbmRzaGFrZUNvZGU/dC5oYW5kc2hha2VDb2RlOnQub3JnYW5pemF0aW9uSUQ/dC5vcmdhbml6YXRpb25JRDpcIlwiLFwibnVtYmVyXCI9PXR5cGVvZiBuJiYobj1KU09OLnN0cmluZ2lmeShuKSksMD09PW8ubGVuZ3RoKXtsZXQgZT1bXTt0Lm1haW5TZXJ2ZXJVUkwmJihlWzBdPXQubWFpblNlcnZlclVSTCksdC5zdGFuZGJ5U2VydmVyVVJMJiYoZVsxXT10LnN0YW5kYnlTZXJ2ZXJVUkwpLG89RShlKX0hYSYmdC5zZXNzaW9uUGFzc3dvcmQmJihhPXQuc2Vzc2lvblBhc3N3b3JkKSxlPXQucmVtYXJrfW4mJlwiMjAwMDAxXCIhPT1uJiYhbi5zdGFydHNXaXRoKFwiMjAwMDAxLVwiKXx8KGw9MSl9fWlmKGwmJih0fHwocC5jcnlwdG98fChpPVwiUGxlYXNlIHVwZ3JhZGUgeW91ciBicm93c2VyIHRvIHN1cHBvcnQgb25saW5lIGtleS5cIikscC5jcnlwdG8uc3VidGxlfHwoaT1cIlJlcXVpcmUgaHR0cHMgdG8gdXNlIG9ubGluZSBrZXkgaW4gdGhpcyBicm93c2VyLlwiKSkpLGkpe2lmKDEhPT1sKXRocm93IG5ldyBFcnJvcihpKTtsPTAsY29uc29sZS53YXJuKGkpLHMuX2xhc3RFcnJvckNvZGU9LTEscy5fbGFzdEVycm9yU3RyaW5nPWl9cmV0dXJuIDE9PT1sJiYobj1cIlwiLGNvbnNvbGUud2FybihcIkFwcGx5aW5nIGZvciBhIHB1YmxpYyB0cmlhbCBsaWNlbnNlIC4uLlwiKSkse2x0OmwsbDpuLGxzOm8sc3A6YSxybWs6ZSxjdjpyfX10aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBwcmVwcm9jZXNzIGxpY2Vuc2UgYWdhaW5cIitTKX0pKEQpLGc9bmV3IGI7RC5fcExvYWQudGFzaz1nLChhc3luYygpPT57dHJ5e2F3YWl0IEQuX3BMb2FkfWNhdGNoKGUpe319KSgpO2xldCBtPXIoKTtpW21dPXQ9PntpZih0Lm1lc3NhZ2UmJkQuX29uQXV0aE1lc3NhZ2Upe2xldCBlPUQuX29uQXV0aE1lc3NhZ2UodC5tZXNzYWdlKTtudWxsIT1lJiYodC5tZXNzYWdlPWUpfWxldCBzLHI9ITE7aWYoMT09PWUmJihyPSEwKSx0LnN1Y2Nlc3M/KG4mJm4oXCJpbml0IGxpY2Vuc2Ugc3VjY2Vzc1wiKSx0Lm1lc3NhZ2UmJmNvbnNvbGUud2Fybih0Lm1lc3NhZ2UpLG8uX2JTdXBwb3J0SVJUTW9kdWxlPXQuYlN1cHBvcnRJUlRNb2R1bGUsby5fYlN1cHBvcnREY2U0TW9kdWxlPXQuYlN1cHBvcnREY2U0TW9kdWxlLEQuYlBhc3NWYWxpZGF0aW9uPSEwLFswLC0xMDA3Nl0uaW5jbHVkZXModC5pbml0TGljZW5zZUluZm8uZXJyb3JDb2RlKT9bLTEwMDc2XS5pbmNsdWRlcyh0LmluaXRMaWNlbnNlSW5mby5lcnJvckNvZGUpJiZjb25zb2xlLndhcm4odC5pbml0TGljZW5zZUluZm8uZXJyb3JTdHJpbmcpOmcucmVqZWN0KG5ldyBFcnJvcih0LmluaXRMaWNlbnNlSW5mby5lcnJvclN0cmluZykpKToocz1FcnJvcih0Lm1lc3NhZ2UpLHQuc3RhY2smJihzLnN0YWNrPXQuc3RhY2spLHQubHRzRXJyb3JDb2RlJiYocy5sdHNFcnJvckNvZGU9dC5sdHNFcnJvckNvZGUpLHJ8fDExMT09dC5sdHNFcnJvckNvZGUmJi0xIT10Lm1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwidHJpYWwgbGljZW5zZVwiKSYmKHI9ITApKSxyKXtjb25zdCBlPWEoby5lbmdpbmVSZXNvdXJjZVBhdGhzLGwpOyhhc3luYyhlLHQscyk9PntpZighZS5fYk5ldmVyU2hvd0RpYWxvZyl0cnl7bGV0IHI9YXdhaXQgZmV0Y2goZS5lbmdpbmVSZXNvdXJjZVBhdGgrXCJkbHMubGljZW5zZS5kaWFsb2cuaHRtbFwiKTtpZighci5vayl0aHJvdyBFcnJvcihcIkdldCBsaWNlbnNlIGRpYWxvZyBmYWlsLiBOZXR3b3JrIEVycm9yOiBcIityLnN0YXR1c1RleHQpO2xldCBpPWF3YWl0IHIudGV4dCgpO2lmKCFpLnRyaW0oKS5zdGFydHNXaXRoKFwiPFwiKSl0aHJvdyBFcnJvcihcIkdldCBsaWNlbnNlIGRpYWxvZyBmYWlsLiBDYW4ndCBnZXQgdmFsaWQgSFRNTEVsZW1lbnQuXCIpO2xldCBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5pbm5lckhUTUw9aTtsZXQgbz1bXTtmb3IobGV0IGU9MDtlPG4uY2hpbGRFbGVtZW50Q291bnQ7KytlKXtsZXQgdD1uLmNoaWxkcmVuW2VdO3QgaW5zdGFuY2VvZiBIVE1MU3R5bGVFbGVtZW50JiYoby5wdXNoKHQpLGRvY3VtZW50LmhlYWQuYXBwZW5kKHQpKX1sZXQgYT0xPT1uLmNoaWxkRWxlbWVudENvdW50P24uY2hpbGRyZW5bMF06bjthLnJlbW92ZSgpO2xldCBsLGMsZCx1LGYsaD1bYV0sZz1hLmNoaWxkcmVuO2ZvcihsZXQgZSBvZiBnKWgucHVzaChlKTtmb3IobGV0IGU9MDtlPGgubGVuZ3RoOysrZSlmb3IobGV0IHQgb2YgaFtlXS5jaGlsZHJlbiloLnB1c2godCk7Zm9yKGxldCBlIG9mIGgpaWYoIWwmJmUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGxzLWxpY2Vuc2UtbWFza1wiKSlsPWUsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwodD0+e2lmKGU9PXQudGFyZ2V0KXthLnJlbW92ZSgpO2ZvcihsZXQgZSBvZiBvKWUucmVtb3ZlKCl9fSkpO2Vsc2UgaWYoIWMmJmUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGxzLWxpY2Vuc2UtaWNvbi1jbG9zZVwiKSljPWUsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKCk9PnthLnJlbW92ZSgpO2ZvcihsZXQgZSBvZiBvKWUucmVtb3ZlKCl9KSk7ZWxzZSBpZighZCYmZS5jbGFzc0xpc3QuY29udGFpbnMoXCJkbHMtbGljZW5zZS1pY29uLWVycm9yXCIpKWQ9ZSxcImVycm9yXCIhPXQmJmUucmVtb3ZlKCk7ZWxzZSBpZighdSYmZS5jbGFzc0xpc3QuY29udGFpbnMoXCJkbHMtbGljZW5zZS1pY29uLXdhcm5cIikpdT1lLFwid2FyblwiIT10JiZlLnJlbW92ZSgpO2Vsc2UgaWYoIWYmJmUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGxzLWxpY2Vuc2UtbXNnLWNvbnRlbnRcIikpe2Y9ZTtsZXQgdD1zO2Zvcig7dDspe2xldCBzPXQuaW5kZXhPZihcIltcIikscj10LmluZGV4T2YoXCJdXCIscyksaT10LmluZGV4T2YoXCIoXCIsciksbj10LmluZGV4T2YoXCIpXCIsaSk7aWYoLTE9PXN8fC0xPT1yfHwtMT09aXx8LTE9PW4pe2UuYXBwZW5kQ2hpbGQobmV3IFRleHQodCkpO2JyZWFrfXM+MCYmZS5hcHBlbmRDaGlsZChuZXcgVGV4dCh0LnN1YnN0cmluZygwLHMpKSk7bGV0IG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIiksYT10LnN1YnN0cmluZyhzKzEscik7by5pbm5lclRleHQ9YTtsZXQgbD10LnN1YnN0cmluZyhpKzEsbik7by5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsbCksby5zZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIixcIl9ibGFua1wiKSxlLmFwcGVuZENoaWxkKG8pLHQ9dC5zdWJzdHJpbmcobisxKX19ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKX1jYXRjaCh0KXtlLl9vbkxvZyYmZS5fb25Mb2codC5tZXNzYWdlfHx0KX19KSh7X2JOZXZlclNob3dEaWFsb2c6RC5fYk5ldmVyU2hvd0RpYWxvZyxlbmdpbmVSZXNvdXJjZVBhdGg6ZS5saWNlbnNlLF9vbkxvZzpufSx0LnN1Y2Nlc3M/XCJ3YXJuXCI6XCJlcnJvclwiLHQubWVzc2FnZSl9dC5zdWNjZXNzP2cucmVzb2x2ZSh2b2lkIDApOmcucmVqZWN0KHMpfSxhd2FpdCBjKFwiY29yZVwiKSxkLnBvc3RNZXNzYWdlKHt0eXBlOlwibGljZW5zZV9keW5hbXNvZnRcIixib2R5Ont2OlwiMy40LjIxXCIsYnJ0azohIWUsYnB0azoxPT09ZSxsOnQsb3M6VyxmbjpELmRldmljZUZyaWVuZGx5TmFtZSxsczpzLHNwOnUscm1rOmYsY3Y6aH0saWQ6bX0pLEQuYkNhbGxJbml0TGljZW5zZT0hMCxhd2FpdCBnfSkpKTtsZXQgSTtlLmxpY2Vuc2U9e30sZS5saWNlbnNlLmR5bmFtc29mdD1BLGUubGljZW5zZS5nZXRBUj1hc3luYygpPT57e2xldCBlPXUuZHluYW1zb2Z0X2luaXRlZDtlJiZlLmlzUmVqZWN0ZWQmJmF3YWl0IGV9cmV0dXJuIGQ/bmV3IFByb21pc2UoKChlLHQpPT57bGV0IHM9cigpO2lbc109YXN5bmMgcz0+e2lmKHMuc3VjY2Vzcyl7ZGVsZXRlIHMuc3VjY2Vzczt7bGV0IGU9RC5saWNlbnNlO2UmJihlLnN0YXJ0c1dpdGgoXCJ0XCIpfHxlLnN0YXJ0c1dpdGgoXCJmXCIpKSYmKHMucGs9ZSl9aWYoT2JqZWN0LmtleXMocykubGVuZ3RoKXtpZihzLmxlbSl7bGV0IGU9RXJyb3Iocy5sZW0pO2UubHRzRXJyb3JDb2RlPXMubGVjLGRlbGV0ZSBzLmxlbSxkZWxldGUgcy5sZWMscy5hZT1lfWUocyl9ZWxzZSBlKG51bGwpfWVsc2V7bGV0IGU9RXJyb3Iocy5tZXNzYWdlKTtzLnN0YWNrJiYoZS5zdGFjaz1zLnN0YWNrKSx0KGUpfX0sZC5wb3N0TWVzc2FnZSh7dHlwZTpcImxpY2Vuc2VfZ2V0QVJcIixpZDpzfSl9KSk6bnVsbH07Y2xhc3MgRHtzdGF0aWMgc2V0TGljZW5zZVNlcnZlcihlKXtMKEQsZSl9c3RhdGljIGdldCBsaWNlbnNlKCl7cmV0dXJuIHRoaXMuX2xpY2Vuc2V9c3RhdGljIHNldCBsaWNlbnNlKGUpe2soRCxlKX1zdGF0aWMgZ2V0IGxpY2Vuc2VTZXJ2ZXIoKXtyZXR1cm4gdGhpcy5fbGljZW5zZVNlcnZlcn1zdGF0aWMgc2V0IGxpY2Vuc2VTZXJ2ZXIoZSl7TChELGUpfXN0YXRpYyBnZXQgZGV2aWNlRnJpZW5kbHlOYW1lKCl7cmV0dXJuIHRoaXMuX2RldmljZUZyaWVuZGx5TmFtZX1zdGF0aWMgc2V0IGRldmljZUZyaWVuZGx5TmFtZShlKXtPKEQsZSl9c3RhdGljIGluaXRMaWNlbnNlKGUsdCl7aWYoayhELGUpLEQuYkNhbGxJbml0TGljZW5zZT0hMCxcImJvb2xlYW5cIj09dHlwZW9mIHQmJnR8fFwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0LmV4ZWN1dGVOb3cpcmV0dXJuIEEoKX1zdGF0aWMgc2V0RGV2aWNlRnJpZW5kbHlOYW1lKGUpe08oRCxlKX1zdGF0aWMgZ2V0RGV2aWNlRnJpZW5kbHlOYW1lKCl7cmV0dXJuIEQuX2RldmljZUZyaWVuZGx5TmFtZX1zdGF0aWMgZ2V0RGV2aWNlVVVJRCgpe3JldHVybihhc3luYygpPT4oYXdhaXQgcyhcImR5bmFtc29mdF91dWlkXCIsKGFzeW5jKCk9Pnthd2FpdCB0KCk7bGV0IGU9bmV3IGIscz1yKCk7aVtzXT10PT57aWYodC5zdWNjZXNzKWUucmVzb2x2ZSh0LnV1aWQpO2Vsc2V7Y29uc3Qgcz1FcnJvcih0Lm1lc3NhZ2UpO3Quc3RhY2smJihzLnN0YWNrPXQuc3RhY2spLGUucmVqZWN0KHMpfX0sZC5wb3N0TWVzc2FnZSh7dHlwZTpcImxpY2Vuc2VfZ2V0RGV2aWNlVVVJRFwiLGlkOnN9KSxJPWF3YWl0IGV9KSksSSkpKCl9fUQuX3BMb2FkPW5ldyBiLEQuYlBhc3NWYWxpZGF0aW9uPSExLEQuYkNhbGxJbml0TGljZW5zZT0hMSxELl9saWNlbnNlPV8sRC5fbGljZW5zZVNlcnZlcj1bXSxELl9kZXZpY2VGcmllbmRseU5hbWU9XCJcIixsLmxpY2Vuc2U9e3ZlcnNpb246XCIzLjQuMjFcIixwYXRoOnZ9LGYubGljZW5zZT17d2FzbTohMCxqczohMH0sZS5saWNlbnNlLkxpY2Vuc2VNYW5hZ2VyPUQ7Y29uc3QgTT1cIjEuNC4xMFwiO1wic3RyaW5nXCIhPXR5cGVvZiBsLnN0ZCYmaChsLnN0ZC52ZXJzaW9uLE0pPDAmJihsLnN0ZD17dmVyc2lvbjpNLHBhdGg6eSh2K2AuLi8uLi9keW5hbXNvZnQtY2FwdHVyZS12aXNpb24tc3RkQCR7TX0vZGlzdC9gKX0pO2NsYXNzIFJ7c3RhdGljIGdldFZlcnNpb24oKXtyZXR1cm5gMy40LjIxKFdvcmtlcjogJHtnLmxpY2Vuc2UmJmcubGljZW5zZS53b3JrZXJ8fFwiTm90IExvYWRlZFwifSwgV2FzbTogJHtnLmxpY2Vuc2UmJmcubGljZW5zZS53YXNtfHxcIk5vdCBMb2FkZWRcIn0pYH19ZXhwb3J0e0QgYXMgTGljZW5zZU1hbmFnZXIsUiBhcyBMaWNlbnNlTW9kdWxlfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/dynamsoft-license/dist/license.esm.js\n"));

/***/ })

}]);