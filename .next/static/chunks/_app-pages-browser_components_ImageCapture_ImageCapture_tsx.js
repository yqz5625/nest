"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["_app-pages-browser_components_ImageCapture_ImageCapture_tsx"],{

/***/ "(app-pages-browser)/./components/ImageCapture/ImageCapture.css":
/*!**************************************************!*\
  !*** ./components/ImageCapture/ImageCapture.css ***!
  \**************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"91cbdee26fbc\");\nif (true) { module.hot.accept() }\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvSW1hZ2VDYXB0dXJlL0ltYWdlQ2FwdHVyZS5jc3MiLCJtYXBwaW5ncyI6IjtBQUFBLCtEQUFlLGNBQWM7QUFDN0IsSUFBSSxJQUFVLElBQUksaUJBQWlCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvSW1hZ2VDYXB0dXJlL0ltYWdlQ2FwdHVyZS5jc3M/MTQwNCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIjkxY2JkZWUyNmZiY1wiXG5pZiAobW9kdWxlLmhvdCkgeyBtb2R1bGUuaG90LmFjY2VwdCgpIH1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/ImageCapture/ImageCapture.css\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/ImageCapture/ImageCapture.tsx":
/*!**************************************************!*\
  !*** ./components/ImageCapture/ImageCapture.tsx ***!
  \**************************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _dynamsoft_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../dynamsoft.config */ \"(app-pages-browser)/./dynamsoft.config.ts\");\n/* harmony import */ var dynamsoft_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! dynamsoft-core */ \"(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js\");\n/* harmony import */ var dynamsoft_capture_vision_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! dynamsoft-capture-vision-router */ \"(app-pages-browser)/./node_modules/dynamsoft-capture-vision-router/dist/cvr.esm.js\");\n/* harmony import */ var _ImageCapture_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ImageCapture.css */ \"(app-pages-browser)/./components/ImageCapture/ImageCapture.css\");\n\nvar _s = $RefreshSig$();\n\n // import side effects. The license, engineResourcePath, so on.\n\n\n\nfunction ImageCapture() {\n    _s();\n    const resultsContainer = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    let pCvRouter = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    let isDestroyed = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    const decodeImg = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async (e)=>{\n        let files = [\n            ...e.target.files\n        ];\n        e.target.value = \"\"; // reset input\n        resultsContainer.current.innerText = \"\";\n        try {\n            // ensure cvRouter is created only once\n            const cvRouter = await (pCvRouter.current = pCvRouter.current || dynamsoft_capture_vision_router__WEBPACK_IMPORTED_MODULE_3__.CaptureVisionRouter.createInstance());\n            if (isDestroyed.current) return;\n            for (let file of files){\n                // Decode selected image with 'ReadBarcodes_SpeedFirst' template.\n                const result = await cvRouter.capture(file, \"ReadBarcodes_SpeedFirst\");\n                if (isDestroyed.current) return;\n                // Print file name if there's multiple files\n                if (files.length > 1) {\n                    resultsContainer.current.innerText += \"\\n\".concat(file.name, \":\\n\");\n                }\n                for (let _item of result.items){\n                    if (_item.type !== dynamsoft_core__WEBPACK_IMPORTED_MODULE_5__.EnumCapturedResultItemType.CRIT_BARCODE) {\n                        continue; // check if captured result item is a barcode\n                    }\n                    let item = _item;\n                    resultsContainer.current.innerText += item.text + \"\\n\"; // output the decoded barcode text\n                    console.log(item.text);\n                }\n                // If no items are found, display that no barcode was detected\n                if (!result.items.length) resultsContainer.current.innerText = \"No barcode found\";\n            }\n        } catch (ex) {\n            let errMsg = ex.message || ex;\n            console.error(errMsg);\n            alert(errMsg);\n        }\n    }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // In 'development', React runs setup and cleanup one extra time before the actual setup in Strict Mode.\n        isDestroyed.current = false;\n        // componentWillUnmount. dispose cvRouter when it's no longer needed\n        return async ()=>{\n            isDestroyed.current = true;\n            if (pCvRouter.current) {\n                try {\n                    (await pCvRouter.current).dispose();\n                } catch (_) {}\n            }\n        };\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"image-capture-container\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"input-container\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"input\", {\n                    type: \"file\",\n                    multiple: true,\n                    accept: \".jpg,.jpeg,.icon,.gif,.svg,.webp,.png,.bmp\",\n                    onChange: decodeImg\n                }, void 0, false, {\n                    fileName: \"/Users/yujianzhu/Downloads/Archive/components/ImageCapture/ImageCapture.tsx\",\n                    lineNumber: 69,\n                    columnNumber: 9\n                }, this)\n            }, void 0, false, {\n                fileName: \"/Users/yujianzhu/Downloads/Archive/components/ImageCapture/ImageCapture.tsx\",\n                lineNumber: 68,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"results\",\n                ref: resultsContainer\n            }, void 0, false, {\n                fileName: \"/Users/yujianzhu/Downloads/Archive/components/ImageCapture/ImageCapture.tsx\",\n                lineNumber: 71,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/yujianzhu/Downloads/Archive/components/ImageCapture/ImageCapture.tsx\",\n        lineNumber: 67,\n        columnNumber: 5\n    }, this);\n}\n_s(ImageCapture, \"ARnpbl57TP3UZowGdGwBWI0jqy0=\");\n_c = ImageCapture;\n/* harmony default export */ __webpack_exports__[\"default\"] = (ImageCapture);\nvar _c;\n$RefreshReg$(_c, \"ImageCapture\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvSW1hZ2VDYXB0dXJlL0ltYWdlQ2FwdHVyZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFnRjtBQUNoRCxDQUFDLCtEQUErRDtBQUNwQztBQUVVO0FBQzFDO0FBRTVCLFNBQVNNOztJQUNQLE1BQU1DLG1CQUE0RE4sNkNBQU1BLENBQUM7SUFFekUsSUFBSU8sWUFBbUVQLDZDQUFNQSxDQUFDO0lBQzlFLElBQUlRLGNBQWNSLDZDQUFNQSxDQUFDO0lBRXpCLE1BQU1TLFlBQVlQLGtEQUFXQSxDQUFDLE9BQU9RO1FBQ25DLElBQUlDLFFBQVE7ZUFBS0QsRUFBRUUsTUFBTSxDQUFDRCxLQUFLO1NBQW1CO1FBQ2xERCxFQUFFRSxNQUFNLENBQUNDLEtBQUssR0FBRyxJQUFJLGNBQWM7UUFDbkNQLGlCQUFpQlEsT0FBTyxDQUFFQyxTQUFTLEdBQUc7UUFFdEMsSUFBSTtZQUNGLHVDQUF1QztZQUN2QyxNQUFNQyxXQUFXLE1BQU9ULENBQUFBLFVBQVVPLE9BQU8sR0FBR1AsVUFBVU8sT0FBTyxJQUFJVixnRkFBbUJBLENBQUNhLGNBQWMsRUFBQztZQUNwRyxJQUFJVCxZQUFZTSxPQUFPLEVBQUU7WUFFekIsS0FBSyxJQUFJSSxRQUFRUCxNQUFPO2dCQUN0QixpRUFBaUU7Z0JBQ2pFLE1BQU1RLFNBQVMsTUFBTUgsU0FBU0ksT0FBTyxDQUFDRixNQUFNO2dCQUM1QyxJQUFJVixZQUFZTSxPQUFPLEVBQUU7Z0JBRXpCLDRDQUE0QztnQkFDNUMsSUFBSUgsTUFBTVUsTUFBTSxHQUFHLEdBQUc7b0JBQ3BCZixpQkFBaUJRLE9BQU8sQ0FBRUMsU0FBUyxJQUFJLEtBQWUsT0FBVkcsS0FBS0ksSUFBSSxFQUFDO2dCQUN4RDtnQkFDQSxLQUFLLElBQUlDLFNBQVNKLE9BQU9LLEtBQUssQ0FBRTtvQkFDOUIsSUFBSUQsTUFBTUUsSUFBSSxLQUFLdEIsc0VBQTBCQSxDQUFDdUIsWUFBWSxFQUFFO3dCQUMxRCxVQUFVLDZDQUE2QztvQkFDekQ7b0JBQ0EsSUFBSUMsT0FBT0o7b0JBQ1hqQixpQkFBaUJRLE9BQU8sQ0FBRUMsU0FBUyxJQUFJWSxLQUFLQyxJQUFJLEdBQUcsTUFBTSxrQ0FBa0M7b0JBQzNGQyxRQUFRQyxHQUFHLENBQUNILEtBQUtDLElBQUk7Z0JBQ3ZCO2dCQUNBLDhEQUE4RDtnQkFDOUQsSUFBSSxDQUFDVCxPQUFPSyxLQUFLLENBQUNILE1BQU0sRUFBRWYsaUJBQWlCUSxPQUFPLENBQUVDLFNBQVMsR0FBRztZQUNsRTtRQUNGLEVBQUUsT0FBT2dCLElBQVM7WUFDaEIsSUFBSUMsU0FBU0QsR0FBR0UsT0FBTyxJQUFJRjtZQUMzQkYsUUFBUUssS0FBSyxDQUFDRjtZQUNkRyxNQUFNSDtRQUNSO0lBQ0YsR0FBRyxFQUFFO0lBRUwvQixnREFBU0EsQ0FBQztRQUNSLHdHQUF3RztRQUN4R08sWUFBWU0sT0FBTyxHQUFHO1FBRXRCLG9FQUFvRTtRQUNwRSxPQUFPO1lBQ0xOLFlBQVlNLE9BQU8sR0FBRztZQUN0QixJQUFJUCxVQUFVTyxPQUFPLEVBQUU7Z0JBQ3JCLElBQUk7b0JBQ0QsT0FBTVAsVUFBVU8sT0FBTyxFQUFFc0IsT0FBTztnQkFDbkMsRUFBRSxPQUFPQyxHQUFHLENBQUM7WUFDZjtRQUNGO0lBQ0YsR0FBRyxFQUFFO0lBRUwscUJBQ0UsOERBQUNDO1FBQUlDLFdBQVU7OzBCQUNiLDhEQUFDRDtnQkFBSUMsV0FBVTswQkFDYiw0RUFBQ0M7b0JBQU1mLE1BQUs7b0JBQU9nQixRQUFRO29CQUFDQyxRQUFPO29CQUE2Q0MsVUFBVWxDOzs7Ozs7Ozs7OzswQkFFNUYsOERBQUM2QjtnQkFBSUMsV0FBVTtnQkFBVUssS0FBS3RDOzs7Ozs7Ozs7Ozs7QUFHcEM7R0FsRVNEO0tBQUFBO0FBb0VULCtEQUFlQSxZQUFZQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvSW1hZ2VDYXB0dXJlL0ltYWdlQ2FwdHVyZS50c3g/MjA5YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlUmVmLCB1c2VFZmZlY3QsIE11dGFibGVSZWZPYmplY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgXCIuLi8uLi9keW5hbXNvZnQuY29uZmlnXCI7IC8vIGltcG9ydCBzaWRlIGVmZmVjdHMuIFRoZSBsaWNlbnNlLCBlbmdpbmVSZXNvdXJjZVBhdGgsIHNvIG9uLlxuaW1wb3J0IHsgRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUgfSBmcm9tIFwiZHluYW1zb2Z0LWNvcmVcIjtcbmltcG9ydCB7IEJhcmNvZGVSZXN1bHRJdGVtIH0gZnJvbSBcImR5bmFtc29mdC1iYXJjb2RlLXJlYWRlclwiO1xuaW1wb3J0IHsgQ2FwdHVyZVZpc2lvblJvdXRlciB9IGZyb20gXCJkeW5hbXNvZnQtY2FwdHVyZS12aXNpb24tcm91dGVyXCI7XG5pbXBvcnQgXCIuL0ltYWdlQ2FwdHVyZS5jc3NcIjtcblxuZnVuY3Rpb24gSW1hZ2VDYXB0dXJlKCkge1xuICBjb25zdCByZXN1bHRzQ29udGFpbmVyOiBNdXRhYmxlUmVmT2JqZWN0PEhUTUxEaXZFbGVtZW50IHwgbnVsbD4gPSB1c2VSZWYobnVsbCk7XG5cbiAgbGV0IHBDdlJvdXRlcjogTXV0YWJsZVJlZk9iamVjdDxQcm9taXNlPENhcHR1cmVWaXNpb25Sb3V0ZXI+IHwgbnVsbD4gPSB1c2VSZWYobnVsbCk7XG4gIGxldCBpc0Rlc3Ryb3llZCA9IHVzZVJlZihmYWxzZSk7XG5cbiAgY29uc3QgZGVjb2RlSW1nID0gdXNlQ2FsbGJhY2soYXN5bmMgKGU6IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxJbnB1dEVsZW1lbnQ+KSA9PiB7XG4gICAgbGV0IGZpbGVzID0gWy4uLihlLnRhcmdldC5maWxlcyBhcyBhbnkgYXMgRmlsZVtdKV07XG4gICAgZS50YXJnZXQudmFsdWUgPSBcIlwiOyAvLyByZXNldCBpbnB1dFxuICAgIHJlc3VsdHNDb250YWluZXIuY3VycmVudCEuaW5uZXJUZXh0ID0gXCJcIjtcblxuICAgIHRyeSB7XG4gICAgICAvLyBlbnN1cmUgY3ZSb3V0ZXIgaXMgY3JlYXRlZCBvbmx5IG9uY2VcbiAgICAgIGNvbnN0IGN2Um91dGVyID0gYXdhaXQgKHBDdlJvdXRlci5jdXJyZW50ID0gcEN2Um91dGVyLmN1cnJlbnQgfHwgQ2FwdHVyZVZpc2lvblJvdXRlci5jcmVhdGVJbnN0YW5jZSgpKTtcbiAgICAgIGlmIChpc0Rlc3Ryb3llZC5jdXJyZW50KSByZXR1cm47XG5cbiAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgLy8gRGVjb2RlIHNlbGVjdGVkIGltYWdlIHdpdGggJ1JlYWRCYXJjb2Rlc19TcGVlZEZpcnN0JyB0ZW1wbGF0ZS5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY3ZSb3V0ZXIuY2FwdHVyZShmaWxlLCBcIlJlYWRCYXJjb2Rlc19TcGVlZEZpcnN0XCIpO1xuICAgICAgICBpZiAoaXNEZXN0cm95ZWQuY3VycmVudCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIFByaW50IGZpbGUgbmFtZSBpZiB0aGVyZSdzIG11bHRpcGxlIGZpbGVzXG4gICAgICAgIGlmIChmaWxlcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgcmVzdWx0c0NvbnRhaW5lci5jdXJyZW50IS5pbm5lclRleHQgKz0gYFxcbiR7ZmlsZS5uYW1lfTpcXG5gO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IF9pdGVtIG9mIHJlc3VsdC5pdGVtcykge1xuICAgICAgICAgIGlmIChfaXRlbS50eXBlICE9PSBFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX0JBUkNPREUpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBjaGVjayBpZiBjYXB0dXJlZCByZXN1bHQgaXRlbSBpcyBhIGJhcmNvZGVcbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IGl0ZW0gPSBfaXRlbSBhcyBCYXJjb2RlUmVzdWx0SXRlbTtcbiAgICAgICAgICByZXN1bHRzQ29udGFpbmVyLmN1cnJlbnQhLmlubmVyVGV4dCArPSBpdGVtLnRleHQgKyBcIlxcblwiOyAvLyBvdXRwdXQgdGhlIGRlY29kZWQgYmFyY29kZSB0ZXh0XG4gICAgICAgICAgY29uc29sZS5sb2coaXRlbS50ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBubyBpdGVtcyBhcmUgZm91bmQsIGRpc3BsYXkgdGhhdCBubyBiYXJjb2RlIHdhcyBkZXRlY3RlZFxuICAgICAgICBpZiAoIXJlc3VsdC5pdGVtcy5sZW5ndGgpIHJlc3VsdHNDb250YWluZXIuY3VycmVudCEuaW5uZXJUZXh0ID0gXCJObyBiYXJjb2RlIGZvdW5kXCI7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXg6IGFueSkge1xuICAgICAgbGV0IGVyck1zZyA9IGV4Lm1lc3NhZ2UgfHwgZXg7XG4gICAgICBjb25zb2xlLmVycm9yKGVyck1zZyk7XG4gICAgICBhbGVydChlcnJNc2cpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIHVzZUVmZmVjdCgoKTogYW55ID0+IHtcbiAgICAvLyBJbiAnZGV2ZWxvcG1lbnQnLCBSZWFjdCBydW5zIHNldHVwIGFuZCBjbGVhbnVwIG9uZSBleHRyYSB0aW1lIGJlZm9yZSB0aGUgYWN0dWFsIHNldHVwIGluIFN0cmljdCBNb2RlLlxuICAgIGlzRGVzdHJveWVkLmN1cnJlbnQgPSBmYWxzZTtcblxuICAgIC8vIGNvbXBvbmVudFdpbGxVbm1vdW50LiBkaXNwb3NlIGN2Um91dGVyIHdoZW4gaXQncyBubyBsb25nZXIgbmVlZGVkXG4gICAgcmV0dXJuIGFzeW5jICgpID0+IHtcbiAgICAgIGlzRGVzdHJveWVkLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgaWYgKHBDdlJvdXRlci5jdXJyZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgKGF3YWl0IHBDdlJvdXRlci5jdXJyZW50KS5kaXNwb3NlKCk7XG4gICAgICAgIH0gY2F0Y2ggKF8pIHt9XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJpbWFnZS1jYXB0dXJlLWNvbnRhaW5lclwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJpbnB1dC1jb250YWluZXJcIj5cbiAgICAgICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgbXVsdGlwbGUgYWNjZXB0PVwiLmpwZywuanBlZywuaWNvbiwuZ2lmLC5zdmcsLndlYnAsLnBuZywuYm1wXCIgb25DaGFuZ2U9e2RlY29kZUltZ30gLz5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZXN1bHRzXCIgcmVmPXtyZXN1bHRzQ29udGFpbmVyfT48L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VDYXB0dXJlO1xuIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlUmVmIiwidXNlRWZmZWN0IiwidXNlQ2FsbGJhY2siLCJFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZSIsIkNhcHR1cmVWaXNpb25Sb3V0ZXIiLCJJbWFnZUNhcHR1cmUiLCJyZXN1bHRzQ29udGFpbmVyIiwicEN2Um91dGVyIiwiaXNEZXN0cm95ZWQiLCJkZWNvZGVJbWciLCJlIiwiZmlsZXMiLCJ0YXJnZXQiLCJ2YWx1ZSIsImN1cnJlbnQiLCJpbm5lclRleHQiLCJjdlJvdXRlciIsImNyZWF0ZUluc3RhbmNlIiwiZmlsZSIsInJlc3VsdCIsImNhcHR1cmUiLCJsZW5ndGgiLCJuYW1lIiwiX2l0ZW0iLCJpdGVtcyIsInR5cGUiLCJDUklUX0JBUkNPREUiLCJpdGVtIiwidGV4dCIsImNvbnNvbGUiLCJsb2ciLCJleCIsImVyck1zZyIsIm1lc3NhZ2UiLCJlcnJvciIsImFsZXJ0IiwiZGlzcG9zZSIsIl8iLCJkaXYiLCJjbGFzc05hbWUiLCJpbnB1dCIsIm11bHRpcGxlIiwiYWNjZXB0Iiwib25DaGFuZ2UiLCJyZWYiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/ImageCapture/ImageCapture.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./dynamsoft.config.ts":
/*!*****************************!*\
  !*** ./dynamsoft.config.ts ***!
  \*****************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var dynamsoft_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! dynamsoft-core */ \"(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js\");\n/* harmony import */ var dynamsoft_license__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dynamsoft-license */ \"(app-pages-browser)/./node_modules/dynamsoft-license/dist/license.esm.js\");\n/* harmony import */ var dynamsoft_barcode_reader__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dynamsoft-barcode-reader */ \"(app-pages-browser)/./node_modules/dynamsoft-barcode-reader/dist/dbr.esm.js\");\n/* harmony import */ var dynamsoft_document_normalizer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dynamsoft-document-normalizer */ \"(app-pages-browser)/./node_modules/dynamsoft-document-normalizer/dist/ddn.esm.js\");\n/* harmony import */ var dynamsoft_capture_vision_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! dynamsoft-capture-vision-router */ \"(app-pages-browser)/./node_modules/dynamsoft-capture-vision-router/dist/cvr.esm.js\");\n\n\n\n\n\n\n// Configures the paths where the .wasm files and other necessary resources for modules are located.\ndynamsoft_core__WEBPACK_IMPORTED_MODULE_4__.CoreModule.engineResourcePaths.rootDirectory = \"https://cdn.jsdelivr.net/npm/\";\n/** LICENSE ALERT - README\n * To use the library, you need to first specify a license key using the API \"initLicense()\" as shown below.\n */ dynamsoft_license__WEBPACK_IMPORTED_MODULE_0__.LicenseManager.initLicense(\"DLS2eyJvcmdhbml6YXRpb25JRCI6IjIwMDAwMSJ9\");\n/**\n * You can visit https://www.dynamsoft.com/customer/license/trialLicense?utm_source=samples&product=dbr&package=js to get your own trial license good for 30 days.\n * Note that if you downloaded this sample from Dynamsoft while logged in, the above license key may already be your own 30-day trial license.\n * For more information, see https://www.dynamsoft.com/barcode-reader/docs/web/programming/javascript/user-guide/index.html?ver=10.4.2001&cVer=true#specify-the-license&utm_source=samples or contact support@dynamsoft.com.\n * LICENSE ALERT - THE END\n */ // Optional. Preload \"BarcodeReader\" module for reading barcodes. It will save time on the initial decoding by skipping the module loading.\ndynamsoft_core__WEBPACK_IMPORTED_MODULE_4__.CoreModule.loadWasm([\n    \"DDN\"\n]);\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2R5bmFtc29mdC5jb25maWcudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRDO0FBQ087QUFDakI7QUFDUDtBQUNZO0FBQ0U7QUFFekMsb0dBQW9HO0FBQ3BHQSxzREFBVUEsQ0FBQ0UsbUJBQW1CLENBQUNDLGFBQWEsR0FBRztBQUUvQzs7Q0FFQyxHQUVERiw2REFBY0EsQ0FBQ0csV0FBVyxDQUFDO0FBRTNCOzs7OztDQUtDLEdBRUQsMklBQTJJO0FBQzNJSixzREFBVUEsQ0FBQ0ssUUFBUSxDQUFDO0lBQUM7Q0FBTSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9keW5hbXNvZnQuY29uZmlnLnRzP2ViODEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29yZU1vZHVsZSB9IGZyb20gXCJkeW5hbXNvZnQtY29yZVwiO1xuaW1wb3J0IHsgTGljZW5zZU1hbmFnZXIgfSBmcm9tIFwiZHluYW1zb2Z0LWxpY2Vuc2VcIjtcbmltcG9ydCBcImR5bmFtc29mdC1iYXJjb2RlLXJlYWRlclwiO1xuaW1wb3J0IFwiZHluYW1zb2Z0LWxpY2Vuc2VcIjtcbmltcG9ydCBcImR5bmFtc29mdC1kb2N1bWVudC1ub3JtYWxpemVyXCI7XG5pbXBvcnQgXCJkeW5hbXNvZnQtY2FwdHVyZS12aXNpb24tcm91dGVyXCI7XG5cbi8vIENvbmZpZ3VyZXMgdGhlIHBhdGhzIHdoZXJlIHRoZSAud2FzbSBmaWxlcyBhbmQgb3RoZXIgbmVjZXNzYXJ5IHJlc291cmNlcyBmb3IgbW9kdWxlcyBhcmUgbG9jYXRlZC5cbkNvcmVNb2R1bGUuZW5naW5lUmVzb3VyY2VQYXRocy5yb290RGlyZWN0b3J5ID0gXCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL1wiO1xuXG4vKiogTElDRU5TRSBBTEVSVCAtIFJFQURNRVxuICogVG8gdXNlIHRoZSBsaWJyYXJ5LCB5b3UgbmVlZCB0byBmaXJzdCBzcGVjaWZ5IGEgbGljZW5zZSBrZXkgdXNpbmcgdGhlIEFQSSBcImluaXRMaWNlbnNlKClcIiBhcyBzaG93biBiZWxvdy5cbiAqL1xuXG5MaWNlbnNlTWFuYWdlci5pbml0TGljZW5zZShcIkRMUzJleUp2Y21kaGJtbDZZWFJwYjI1SlJDSTZJakl3TURBd01TSjlcIik7XG5cbi8qKlxuICogWW91IGNhbiB2aXNpdCBodHRwczovL3d3dy5keW5hbXNvZnQuY29tL2N1c3RvbWVyL2xpY2Vuc2UvdHJpYWxMaWNlbnNlP3V0bV9zb3VyY2U9c2FtcGxlcyZwcm9kdWN0PWRiciZwYWNrYWdlPWpzIHRvIGdldCB5b3VyIG93biB0cmlhbCBsaWNlbnNlIGdvb2QgZm9yIDMwIGRheXMuXG4gKiBOb3RlIHRoYXQgaWYgeW91IGRvd25sb2FkZWQgdGhpcyBzYW1wbGUgZnJvbSBEeW5hbXNvZnQgd2hpbGUgbG9nZ2VkIGluLCB0aGUgYWJvdmUgbGljZW5zZSBrZXkgbWF5IGFscmVhZHkgYmUgeW91ciBvd24gMzAtZGF5IHRyaWFsIGxpY2Vuc2UuXG4gKiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlIGh0dHBzOi8vd3d3LmR5bmFtc29mdC5jb20vYmFyY29kZS1yZWFkZXIvZG9jcy93ZWIvcHJvZ3JhbW1pbmcvamF2YXNjcmlwdC91c2VyLWd1aWRlL2luZGV4Lmh0bWw/dmVyPTEwLjQuMjAwMSZjVmVyPXRydWUjc3BlY2lmeS10aGUtbGljZW5zZSZ1dG1fc291cmNlPXNhbXBsZXMgb3IgY29udGFjdCBzdXBwb3J0QGR5bmFtc29mdC5jb20uXG4gKiBMSUNFTlNFIEFMRVJUIC0gVEhFIEVORFxuICovXG5cbi8vIE9wdGlvbmFsLiBQcmVsb2FkIFwiQmFyY29kZVJlYWRlclwiIG1vZHVsZSBmb3IgcmVhZGluZyBiYXJjb2Rlcy4gSXQgd2lsbCBzYXZlIHRpbWUgb24gdGhlIGluaXRpYWwgZGVjb2RpbmcgYnkgc2tpcHBpbmcgdGhlIG1vZHVsZSBsb2FkaW5nLlxuQ29yZU1vZHVsZS5sb2FkV2FzbShbXCJERE5cIl0pO1xuIl0sIm5hbWVzIjpbIkNvcmVNb2R1bGUiLCJMaWNlbnNlTWFuYWdlciIsImVuZ2luZVJlc291cmNlUGF0aHMiLCJyb290RGlyZWN0b3J5IiwiaW5pdExpY2Vuc2UiLCJsb2FkV2FzbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./dynamsoft.config.ts\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/dynamsoft-barcode-reader/dist/dbr.esm.js":
/*!***************************************************************!*\
  !*** ./node_modules/dynamsoft-barcode-reader/dist/dbr.esm.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BarcodeReaderModule: function() { return /* binding */ O; },\n/* harmony export */   EnumBarcodeFormat: function() { return /* binding */ i; },\n/* harmony export */   EnumDeblurMode: function() { return /* binding */ L; },\n/* harmony export */   EnumExtendedBarcodeResultType: function() { return /* binding */ C; },\n/* harmony export */   EnumLocalizationMode: function() { return /* binding */ N; },\n/* harmony export */   EnumQRCodeErrorCorrectionLevel: function() { return /* binding */ S; }\n/* harmony export */ });\n/* harmony import */ var dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dynamsoft-core */ \"(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js\");\n/*!\n* Dynamsoft JavaScript Library\n* @product Dynamsoft Barcode Reader JS Edition\n* @website http://www.dynamsoft.com\n* @copyright Copyright 2024, Dynamsoft Corporation\n* @author Dynamsoft\n* @version 10.4.20\n* @fileoverview Dynamsoft JavaScript Library for Barcode Reader\n* More info on dbr JS: https://www.dynamsoft.com/barcode-reader/docs/web/programming/javascript/\n*/\nconst R=\"undefined\"==typeof self,T=(()=>{if(!R&&document.currentScript){let _=document.currentScript.src,I=_.indexOf(\"?\");if(-1!=I)_=_.substring(0,I);else{let I=_.indexOf(\"#\");-1!=I&&(_=_.substring(0,I))}return _.substring(0,_.lastIndexOf(\"/\")+1)}return\"./\"})(),t=_=>{if(null==_&&(_=\"./\"),R);else{let I=document.createElement(\"a\");I.href=_,_=I.href}return _.endsWith(\"/\")||(_+=\"/\"),_};dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dbr={version:\"10.4.20\",path:T},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.workerAutoResources.dbr={js:!1,wasm:!0,deps:[\"license\",\"dip\"]},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.dbr={};const D=\"1.4.10\";\"string\"!=typeof dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std&&(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.compareVersion)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std.version,D)<0&&(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std={version:D,path:t(T+`../../dynamsoft-capture-vision-std@${D}/dist/`)});const n=\"2.4.20\";(!dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip||\"string\"!=typeof dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip&&(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.compareVersion)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip.version,n)<0)&&(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip={version:n,path:t(T+`../../dynamsoft-image-processing@${n}/dist/`)});class O{static getVersion(){const _=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.dbr&&dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.dbr.wasm,I=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.dbr&&dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.dbr.worker;return`10.4.20(Worker: ${I||\"Not Loaded\"}, Wasm: ${_||\"Not Loaded\"})`}}const i={BF_NULL:BigInt(0),BF_ALL:BigInt(\"0xFFFFFFFEFFFFFFFF\"),BF_DEFAULT:BigInt(4265345023),BF_ONED:BigInt(3147775),BF_GS1_DATABAR:BigInt(260096),BF_CODE_39:BigInt(1),BF_CODE_128:BigInt(2),BF_CODE_93:BigInt(4),BF_CODABAR:BigInt(8),BF_ITF:BigInt(16),BF_EAN_13:BigInt(32),BF_EAN_8:BigInt(64),BF_UPC_A:BigInt(128),BF_UPC_E:BigInt(256),BF_INDUSTRIAL_25:BigInt(512),BF_CODE_39_EXTENDED:BigInt(1024),BF_GS1_DATABAR_OMNIDIRECTIONAL:BigInt(2048),BF_GS1_DATABAR_TRUNCATED:BigInt(4096),BF_GS1_DATABAR_STACKED:BigInt(8192),BF_GS1_DATABAR_STACKED_OMNIDIRECTIONAL:BigInt(16384),BF_GS1_DATABAR_EXPANDED:BigInt(32768),BF_GS1_DATABAR_EXPANDED_STACKED:BigInt(65536),BF_GS1_DATABAR_LIMITED:BigInt(131072),BF_PATCHCODE:BigInt(262144),BF_CODE_32:BigInt(16777216),BF_PDF417:BigInt(33554432),BF_QR_CODE:BigInt(67108864),BF_DATAMATRIX:BigInt(134217728),BF_AZTEC:BigInt(268435456),BF_MAXICODE:BigInt(536870912),BF_MICRO_QR:BigInt(1073741824),BF_MICRO_PDF417:BigInt(524288),BF_GS1_COMPOSITE:BigInt(2147483648),BF_MSI_CODE:BigInt(1048576),BF_CODE_11:BigInt(2097152),BF_TWO_DIGIT_ADD_ON:BigInt(4194304),BF_FIVE_DIGIT_ADD_ON:BigInt(8388608),BF_MATRIX_25:BigInt(68719476736),BF_POSTALCODE:BigInt(0x3f0000000000000),BF_NONSTANDARD_BARCODE:BigInt(4294967296),BF_USPSINTELLIGENTMAIL:BigInt(4503599627370496),BF_POSTNET:BigInt(9007199254740992),BF_PLANET:BigInt(0x40000000000000),BF_AUSTRALIANPOST:BigInt(0x80000000000000),BF_RM4SCC:BigInt(72057594037927940),BF_KIX:BigInt(0x200000000000000),BF_DOTCODE:BigInt(8589934592),BF_PHARMACODE_ONE_TRACK:BigInt(17179869184),BF_PHARMACODE_TWO_TRACK:BigInt(34359738368),BF_PHARMACODE:BigInt(51539607552)};var C,S,N,L;!function(_){_[_.EBRT_STANDARD_RESULT=0]=\"EBRT_STANDARD_RESULT\",_[_.EBRT_CANDIDATE_RESULT=1]=\"EBRT_CANDIDATE_RESULT\",_[_.EBRT_PARTIAL_RESULT=2]=\"EBRT_PARTIAL_RESULT\"}(C||(C={})),function(_){_[_.QRECL_ERROR_CORRECTION_H=0]=\"QRECL_ERROR_CORRECTION_H\",_[_.QRECL_ERROR_CORRECTION_L=1]=\"QRECL_ERROR_CORRECTION_L\",_[_.QRECL_ERROR_CORRECTION_M=2]=\"QRECL_ERROR_CORRECTION_M\",_[_.QRECL_ERROR_CORRECTION_Q=3]=\"QRECL_ERROR_CORRECTION_Q\"}(S||(S={})),function(_){_[_.LM_AUTO=1]=\"LM_AUTO\",_[_.LM_CONNECTED_BLOCKS=2]=\"LM_CONNECTED_BLOCKS\",_[_.LM_STATISTICS=4]=\"LM_STATISTICS\",_[_.LM_LINES=8]=\"LM_LINES\",_[_.LM_SCAN_DIRECTLY=16]=\"LM_SCAN_DIRECTLY\",_[_.LM_STATISTICS_MARKS=32]=\"LM_STATISTICS_MARKS\",_[_.LM_STATISTICS_POSTAL_CODE=64]=\"LM_STATISTICS_POSTAL_CODE\",_[_.LM_CENTRE=128]=\"LM_CENTRE\",_[_.LM_ONED_FAST_SCAN=256]=\"LM_ONED_FAST_SCAN\",_[_.LM_REV=-2147483648]=\"LM_REV\",_[_.LM_SKIP=0]=\"LM_SKIP\"}(N||(N={})),function(_){_[_.DM_DIRECT_BINARIZATION=1]=\"DM_DIRECT_BINARIZATION\",_[_.DM_THRESHOLD_BINARIZATION=2]=\"DM_THRESHOLD_BINARIZATION\",_[_.DM_GRAY_EQUALIZATION=4]=\"DM_GRAY_EQUALIZATION\",_[_.DM_SMOOTHING=8]=\"DM_SMOOTHING\",_[_.DM_MORPHING=16]=\"DM_MORPHING\",_[_.DM_DEEP_ANALYSIS=32]=\"DM_DEEP_ANALYSIS\",_[_.DM_SHARPENING=64]=\"DM_SHARPENING\",_[_.DM_BASED_ON_LOC_BIN=128]=\"DM_BASED_ON_LOC_BIN\",_[_.DM_SHARPENING_SMOOTHING=256]=\"DM_SHARPENING_SMOOTHING\",_[_.DM_REV=-2147483648]=\"DM_REV\",_[_.DM_SKIP=0]=\"DM_SKIP\"}(L||(L={}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9keW5hbXNvZnQtYmFyY29kZS1yZWFkZXIvZGlzdC9kYnIuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUM0SSx5Q0FBeUMsK0JBQStCLGtEQUFrRCw0QkFBNEIsS0FBSyxxQkFBcUIsNEJBQTRCLDJDQUEyQyxXQUFXLFVBQVUsd0JBQXdCLEtBQUssa0NBQWtDLGtCQUFrQixvQ0FBb0MsOERBQUMsTUFBTSx5QkFBeUIsQ0FBQywrREFBQyxNQUFNLHFDQUFxQyxDQUFDLDhEQUFDLFFBQVEsaUJBQWlCLGlCQUFpQiw4REFBQyxNQUFNLDhEQUFDLENBQUMsOERBQUMsb0JBQW9CLDhEQUFDLE1BQU0seURBQXlELEVBQUUsU0FBUyxFQUFFLGlCQUFpQixFQUFFLDhEQUFDLHVCQUF1Qiw4REFBQyxNQUFNLDhEQUFDLENBQUMsOERBQUMscUJBQXFCLDhEQUFDLE1BQU0sdURBQXVELEVBQUUsU0FBUyxFQUFFLFFBQVEsb0JBQW9CLFFBQVEseURBQUMsTUFBTSx5REFBQyxZQUFZLHlEQUFDLE1BQU0seURBQUMsWUFBWSx5QkFBeUIsZ0JBQWdCLFVBQVUsZ0JBQWdCLElBQUksU0FBUyxva0RBQW9rRCxZQUFZLGFBQWEseUpBQXlKLFNBQVMsZUFBZSw0T0FBNE8sU0FBUyxlQUFlLDhhQUE4YSxTQUFTLGVBQWUsc2VBQXNlLFNBQVMsR0FBZ0wiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2R5bmFtc29mdC1iYXJjb2RlLXJlYWRlci9kaXN0L2Rici5lc20uanM/YzdjZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiogRHluYW1zb2Z0IEphdmFTY3JpcHQgTGlicmFyeVxuKiBAcHJvZHVjdCBEeW5hbXNvZnQgQmFyY29kZSBSZWFkZXIgSlMgRWRpdGlvblxuKiBAd2Vic2l0ZSBodHRwOi8vd3d3LmR5bmFtc29mdC5jb21cbiogQGNvcHlyaWdodCBDb3B5cmlnaHQgMjAyNCwgRHluYW1zb2Z0IENvcnBvcmF0aW9uXG4qIEBhdXRob3IgRHluYW1zb2Z0XG4qIEB2ZXJzaW9uIDEwLjQuMjBcbiogQGZpbGVvdmVydmlldyBEeW5hbXNvZnQgSmF2YVNjcmlwdCBMaWJyYXJ5IGZvciBCYXJjb2RlIFJlYWRlclxuKiBNb3JlIGluZm8gb24gZGJyIEpTOiBodHRwczovL3d3dy5keW5hbXNvZnQuY29tL2JhcmNvZGUtcmVhZGVyL2RvY3Mvd2ViL3Byb2dyYW1taW5nL2phdmFzY3JpcHQvXG4qL1xuaW1wb3J0e2F1dG9EaXNjb3ZlcnlQYXRocyBhcyBfLHdvcmtlckF1dG9SZXNvdXJjZXMgYXMgSSxtYXBQYWNrYWdlUmVnaXN0ZXIgYXMgQixjb21wYXJlVmVyc2lvbiBhcyBBLGlubmVyVmVyc2lvbnMgYXMgRX1mcm9tXCJkeW5hbXNvZnQtY29yZVwiO2NvbnN0IFI9XCJ1bmRlZmluZWRcIj09dHlwZW9mIHNlbGYsVD0oKCk9PntpZighUiYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCl7bGV0IF89ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMsST1fLmluZGV4T2YoXCI/XCIpO2lmKC0xIT1JKV89Xy5zdWJzdHJpbmcoMCxJKTtlbHNle2xldCBJPV8uaW5kZXhPZihcIiNcIik7LTEhPUkmJihfPV8uc3Vic3RyaW5nKDAsSSkpfXJldHVybiBfLnN1YnN0cmluZygwLF8ubGFzdEluZGV4T2YoXCIvXCIpKzEpfXJldHVyblwiLi9cIn0pKCksdD1fPT57aWYobnVsbD09XyYmKF89XCIuL1wiKSxSKTtlbHNle2xldCBJPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO0kuaHJlZj1fLF89SS5ocmVmfXJldHVybiBfLmVuZHNXaXRoKFwiL1wiKXx8KF8rPVwiL1wiKSxffTtfLmRicj17dmVyc2lvbjpcIjEwLjQuMjBcIixwYXRoOlR9LEkuZGJyPXtqczohMSx3YXNtOiEwLGRlcHM6W1wibGljZW5zZVwiLFwiZGlwXCJdfSxCLmRicj17fTtjb25zdCBEPVwiMS40LjEwXCI7XCJzdHJpbmdcIiE9dHlwZW9mIF8uc3RkJiZBKF8uc3RkLnZlcnNpb24sRCk8MCYmKF8uc3RkPXt2ZXJzaW9uOkQscGF0aDp0KFQrYC4uLy4uL2R5bmFtc29mdC1jYXB0dXJlLXZpc2lvbi1zdGRAJHtEfS9kaXN0L2ApfSk7Y29uc3Qgbj1cIjIuNC4yMFwiOyghXy5kaXB8fFwic3RyaW5nXCIhPXR5cGVvZiBfLmRpcCYmQShfLmRpcC52ZXJzaW9uLG4pPDApJiYoXy5kaXA9e3ZlcnNpb246bixwYXRoOnQoVCtgLi4vLi4vZHluYW1zb2Z0LWltYWdlLXByb2Nlc3NpbmdAJHtufS9kaXN0L2ApfSk7Y2xhc3MgT3tzdGF0aWMgZ2V0VmVyc2lvbigpe2NvbnN0IF89RS5kYnImJkUuZGJyLndhc20sST1FLmRiciYmRS5kYnIud29ya2VyO3JldHVybmAxMC40LjIwKFdvcmtlcjogJHtJfHxcIk5vdCBMb2FkZWRcIn0sIFdhc206ICR7X3x8XCJOb3QgTG9hZGVkXCJ9KWB9fWNvbnN0IGk9e0JGX05VTEw6QmlnSW50KDApLEJGX0FMTDpCaWdJbnQoXCIweEZGRkZGRkZFRkZGRkZGRkZcIiksQkZfREVGQVVMVDpCaWdJbnQoNDI2NTM0NTAyMyksQkZfT05FRDpCaWdJbnQoMzE0Nzc3NSksQkZfR1MxX0RBVEFCQVI6QmlnSW50KDI2MDA5NiksQkZfQ09ERV8zOTpCaWdJbnQoMSksQkZfQ09ERV8xMjg6QmlnSW50KDIpLEJGX0NPREVfOTM6QmlnSW50KDQpLEJGX0NPREFCQVI6QmlnSW50KDgpLEJGX0lURjpCaWdJbnQoMTYpLEJGX0VBTl8xMzpCaWdJbnQoMzIpLEJGX0VBTl84OkJpZ0ludCg2NCksQkZfVVBDX0E6QmlnSW50KDEyOCksQkZfVVBDX0U6QmlnSW50KDI1NiksQkZfSU5EVVNUUklBTF8yNTpCaWdJbnQoNTEyKSxCRl9DT0RFXzM5X0VYVEVOREVEOkJpZ0ludCgxMDI0KSxCRl9HUzFfREFUQUJBUl9PTU5JRElSRUNUSU9OQUw6QmlnSW50KDIwNDgpLEJGX0dTMV9EQVRBQkFSX1RSVU5DQVRFRDpCaWdJbnQoNDA5NiksQkZfR1MxX0RBVEFCQVJfU1RBQ0tFRDpCaWdJbnQoODE5MiksQkZfR1MxX0RBVEFCQVJfU1RBQ0tFRF9PTU5JRElSRUNUSU9OQUw6QmlnSW50KDE2Mzg0KSxCRl9HUzFfREFUQUJBUl9FWFBBTkRFRDpCaWdJbnQoMzI3NjgpLEJGX0dTMV9EQVRBQkFSX0VYUEFOREVEX1NUQUNLRUQ6QmlnSW50KDY1NTM2KSxCRl9HUzFfREFUQUJBUl9MSU1JVEVEOkJpZ0ludCgxMzEwNzIpLEJGX1BBVENIQ09ERTpCaWdJbnQoMjYyMTQ0KSxCRl9DT0RFXzMyOkJpZ0ludCgxNjc3NzIxNiksQkZfUERGNDE3OkJpZ0ludCgzMzU1NDQzMiksQkZfUVJfQ09ERTpCaWdJbnQoNjcxMDg4NjQpLEJGX0RBVEFNQVRSSVg6QmlnSW50KDEzNDIxNzcyOCksQkZfQVpURUM6QmlnSW50KDI2ODQzNTQ1NiksQkZfTUFYSUNPREU6QmlnSW50KDUzNjg3MDkxMiksQkZfTUlDUk9fUVI6QmlnSW50KDEwNzM3NDE4MjQpLEJGX01JQ1JPX1BERjQxNzpCaWdJbnQoNTI0Mjg4KSxCRl9HUzFfQ09NUE9TSVRFOkJpZ0ludCgyMTQ3NDgzNjQ4KSxCRl9NU0lfQ09ERTpCaWdJbnQoMTA0ODU3NiksQkZfQ09ERV8xMTpCaWdJbnQoMjA5NzE1MiksQkZfVFdPX0RJR0lUX0FERF9PTjpCaWdJbnQoNDE5NDMwNCksQkZfRklWRV9ESUdJVF9BRERfT046QmlnSW50KDgzODg2MDgpLEJGX01BVFJJWF8yNTpCaWdJbnQoNjg3MTk0NzY3MzYpLEJGX1BPU1RBTENPREU6QmlnSW50KDB4M2YwMDAwMDAwMDAwMDAwKSxCRl9OT05TVEFOREFSRF9CQVJDT0RFOkJpZ0ludCg0Mjk0OTY3Mjk2KSxCRl9VU1BTSU5URUxMSUdFTlRNQUlMOkJpZ0ludCg0NTAzNTk5NjI3MzcwNDk2KSxCRl9QT1NUTkVUOkJpZ0ludCg5MDA3MTk5MjU0NzQwOTkyKSxCRl9QTEFORVQ6QmlnSW50KDB4NDAwMDAwMDAwMDAwMDApLEJGX0FVU1RSQUxJQU5QT1NUOkJpZ0ludCgweDgwMDAwMDAwMDAwMDAwKSxCRl9STTRTQ0M6QmlnSW50KDcyMDU3NTk0MDM3OTI3OTQwKSxCRl9LSVg6QmlnSW50KDB4MjAwMDAwMDAwMDAwMDAwKSxCRl9ET1RDT0RFOkJpZ0ludCg4NTg5OTM0NTkyKSxCRl9QSEFSTUFDT0RFX09ORV9UUkFDSzpCaWdJbnQoMTcxNzk4NjkxODQpLEJGX1BIQVJNQUNPREVfVFdPX1RSQUNLOkJpZ0ludCgzNDM1OTczODM2OCksQkZfUEhBUk1BQ09ERTpCaWdJbnQoNTE1Mzk2MDc1NTIpfTt2YXIgQyxTLE4sTDshZnVuY3Rpb24oXyl7X1tfLkVCUlRfU1RBTkRBUkRfUkVTVUxUPTBdPVwiRUJSVF9TVEFOREFSRF9SRVNVTFRcIixfW18uRUJSVF9DQU5ESURBVEVfUkVTVUxUPTFdPVwiRUJSVF9DQU5ESURBVEVfUkVTVUxUXCIsX1tfLkVCUlRfUEFSVElBTF9SRVNVTFQ9Ml09XCJFQlJUX1BBUlRJQUxfUkVTVUxUXCJ9KEN8fChDPXt9KSksZnVuY3Rpb24oXyl7X1tfLlFSRUNMX0VSUk9SX0NPUlJFQ1RJT05fSD0wXT1cIlFSRUNMX0VSUk9SX0NPUlJFQ1RJT05fSFwiLF9bXy5RUkVDTF9FUlJPUl9DT1JSRUNUSU9OX0w9MV09XCJRUkVDTF9FUlJPUl9DT1JSRUNUSU9OX0xcIixfW18uUVJFQ0xfRVJST1JfQ09SUkVDVElPTl9NPTJdPVwiUVJFQ0xfRVJST1JfQ09SUkVDVElPTl9NXCIsX1tfLlFSRUNMX0VSUk9SX0NPUlJFQ1RJT05fUT0zXT1cIlFSRUNMX0VSUk9SX0NPUlJFQ1RJT05fUVwifShTfHwoUz17fSkpLGZ1bmN0aW9uKF8pe19bXy5MTV9BVVRPPTFdPVwiTE1fQVVUT1wiLF9bXy5MTV9DT05ORUNURURfQkxPQ0tTPTJdPVwiTE1fQ09OTkVDVEVEX0JMT0NLU1wiLF9bXy5MTV9TVEFUSVNUSUNTPTRdPVwiTE1fU1RBVElTVElDU1wiLF9bXy5MTV9MSU5FUz04XT1cIkxNX0xJTkVTXCIsX1tfLkxNX1NDQU5fRElSRUNUTFk9MTZdPVwiTE1fU0NBTl9ESVJFQ1RMWVwiLF9bXy5MTV9TVEFUSVNUSUNTX01BUktTPTMyXT1cIkxNX1NUQVRJU1RJQ1NfTUFSS1NcIixfW18uTE1fU1RBVElTVElDU19QT1NUQUxfQ09ERT02NF09XCJMTV9TVEFUSVNUSUNTX1BPU1RBTF9DT0RFXCIsX1tfLkxNX0NFTlRSRT0xMjhdPVwiTE1fQ0VOVFJFXCIsX1tfLkxNX09ORURfRkFTVF9TQ0FOPTI1Nl09XCJMTV9PTkVEX0ZBU1RfU0NBTlwiLF9bXy5MTV9SRVY9LTIxNDc0ODM2NDhdPVwiTE1fUkVWXCIsX1tfLkxNX1NLSVA9MF09XCJMTV9TS0lQXCJ9KE58fChOPXt9KSksZnVuY3Rpb24oXyl7X1tfLkRNX0RJUkVDVF9CSU5BUklaQVRJT049MV09XCJETV9ESVJFQ1RfQklOQVJJWkFUSU9OXCIsX1tfLkRNX1RIUkVTSE9MRF9CSU5BUklaQVRJT049Ml09XCJETV9USFJFU0hPTERfQklOQVJJWkFUSU9OXCIsX1tfLkRNX0dSQVlfRVFVQUxJWkFUSU9OPTRdPVwiRE1fR1JBWV9FUVVBTElaQVRJT05cIixfW18uRE1fU01PT1RISU5HPThdPVwiRE1fU01PT1RISU5HXCIsX1tfLkRNX01PUlBISU5HPTE2XT1cIkRNX01PUlBISU5HXCIsX1tfLkRNX0RFRVBfQU5BTFlTSVM9MzJdPVwiRE1fREVFUF9BTkFMWVNJU1wiLF9bXy5ETV9TSEFSUEVOSU5HPTY0XT1cIkRNX1NIQVJQRU5JTkdcIixfW18uRE1fQkFTRURfT05fTE9DX0JJTj0xMjhdPVwiRE1fQkFTRURfT05fTE9DX0JJTlwiLF9bXy5ETV9TSEFSUEVOSU5HX1NNT09USElORz0yNTZdPVwiRE1fU0hBUlBFTklOR19TTU9PVEhJTkdcIixfW18uRE1fUkVWPS0yMTQ3NDgzNjQ4XT1cIkRNX1JFVlwiLF9bXy5ETV9TS0lQPTBdPVwiRE1fU0tJUFwifShMfHwoTD17fSkpO2V4cG9ydHtPIGFzIEJhcmNvZGVSZWFkZXJNb2R1bGUsaSBhcyBFbnVtQmFyY29kZUZvcm1hdCxMIGFzIEVudW1EZWJsdXJNb2RlLEMgYXMgRW51bUV4dGVuZGVkQmFyY29kZVJlc3VsdFR5cGUsTiBhcyBFbnVtTG9jYWxpemF0aW9uTW9kZSxTIGFzIEVudW1RUkNvZGVFcnJvckNvcnJlY3Rpb25MZXZlbH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/dynamsoft-barcode-reader/dist/dbr.esm.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/dynamsoft-capture-vision-router/dist/cvr.esm.js":
/*!**********************************************************************!*\
  !*** ./node_modules/dynamsoft-capture-vision-router/dist/cvr.esm.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CaptureVisionRouter: function() { return /* binding */ CaptureVisionRouter; },\n/* harmony export */   CaptureVisionRouterModule: function() { return /* binding */ CaptureVisionRouterModule; },\n/* harmony export */   CapturedResultReceiver: function() { return /* binding */ CapturedResultReceiver; },\n/* harmony export */   EnumImageSourceState: function() { return /* binding */ EnumImageSourceState; },\n/* harmony export */   EnumPresetTemplate: function() { return /* binding */ EnumPresetTemplate; },\n/* harmony export */   IntermediateResultReceiver: function() { return /* binding */ IntermediateResultReceiver; }\n/* harmony export */ });\n/* harmony import */ var dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dynamsoft-core */ \"(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js\");\n/*!\n * Dynamsoft JavaScript Library\n * @product Dynamsoft Capture Vision Router JS Edition\n * @website http://www.dynamsoft.com\n * @copyright Copyright 2024, Dynamsoft Corporation\n * @author Dynamsoft\n * @version \"2.4.21\"\n * @fileoverview Dynamsoft JavaScript Library for Capture Vision\n * More info on cvr JS: https://www.dynamsoft.com/capture-vision/docs/web/programming/javascript/api-reference/capture-vision-router/capture-vision-router-module.html\n */\n\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\n\r\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nfunction __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\nconst isPromiseLike = (value) => (value && \"object\" === typeof value && \"function\" === typeof value.then);\nclass MutablePromise extends Promise {\n    get status() { return this._s; }\n    get isPending() { return \"pending\" === this._s; }\n    get isFulfilled() { return \"fulfilled\" === this._s; }\n    get isRejected() { return \"rejected\" === this._s; }\n    get task() { return this._task; }\n    set task(value) {\n        //if(!this.isPending){ return; }\n        this._task = value;\n        let p;\n        if (isPromiseLike(value)) {\n            p = value;\n        }\n        else if (\"function\" === typeof value) {\n            p = new Promise(value);\n        }\n        if (p) {\n            (async () => {\n                try {\n                    const ret = await p;\n                    // make sure task not change\n                    if (value === this._task) {\n                        this.resolve(ret);\n                    }\n                }\n                catch (reason) {\n                    // make sure task not change\n                    if (value === this._task) {\n                        this.reject(reason);\n                    }\n                }\n            })();\n        }\n    }\n    get isEmpty() { return null == this._task; }\n    constructor(executor) {\n        let rs;\n        let rj;\n        const fn = (_rs, _rj) => { rs = _rs; rj = _rj; };\n        super(fn);\n        // walkaround babel which can not extend builtin class\n        // let _this = this;\n        // let then = new Promise(fn).then;\n        // this.then = function(){ then.apply(_this, arguments) } as any;\n        this._s = \"pending\";\n        this.resolve = (value) => {\n            if (this.isPending) {\n                if (isPromiseLike(value)) {\n                    this.task = value;\n                }\n                else {\n                    this._s = \"fulfilled\";\n                    rs(value);\n                }\n            }\n        };\n        this.reject = (reason) => {\n            if (this.isPending) {\n                this._s = \"rejected\";\n                rj(reason);\n            }\n        };\n        this.task = executor;\n    }\n}\n\nclass BufferedItemsManager {\r\n    constructor(cvr) {\r\n        this._cvr = cvr;\r\n    }\r\n    /**\r\n     * Gets the maximum number of buffered items.\r\n     * @returns Returns the maximum number of buffered items.\r\n     */\r\n    async getMaxBufferedItems() {\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    return rs(body.count);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_getMaxBufferedItems\",\r\n                id: taskID,\r\n                instanceID: this._cvr._instanceID\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Sets the maximum number of buffered items.\r\n     * @param count the maximum number of buffered items\r\n     */\r\n    async setMaxBufferedItems(count) {\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    return rs();\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_setMaxBufferedItems\",\r\n                id: taskID,\r\n                instanceID: this._cvr._instanceID,\r\n                body: {\r\n                    count\r\n                }\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Gets the buffered character items.\r\n     * @return the buffered character items\r\n     */\r\n    async getBufferedCharacterItemSet() {\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    return rs(body.itemSet);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_getBufferedCharacterItemSet\",\r\n                id: taskID,\r\n                instanceID: this._cvr._instanceID\r\n            });\r\n        });\r\n    }\r\n    ;\r\n}\n\nvar irrRegistryState = {\r\n    onTaskResultsReceived: false,\r\n    onTaskResultsReceivedForDce: false,\r\n    // section\r\n    onPredetectedRegionsReceived: false,\r\n    onLocalizedBarcodesReceived: false,\r\n    onDecodedBarcodesReceived: false,\r\n    onLocalizedTextLinesReceived: false,\r\n    onRecognizedTextLinesReceived: false,\r\n    onDetectedQuadsReceived: false,\r\n    onNormalizedImagesReceived: false,\r\n    // stage\r\n    onColourImageUnitReceived: false,\r\n    onScaledDownColourImageUnitReceived: false,\r\n    onGrayscaleImageUnitReceived: false,\r\n    onTransformedGrayscaleImageUnitReceived: false,\r\n    onEnhancedGrayscaleImageUnitReceived: false,\r\n    onBinaryImageUnitReceived: false,\r\n    onTextureDetectionResultUnitReceived: false,\r\n    onTextureRemovedGrayscaleImageUnitReceived: false,\r\n    onTextureRemovedBinaryImageUnitReceived: false,\r\n    onContoursUnitReceived: false,\r\n    onLineSegmentsUnitReceived: false,\r\n    onTextZonesUnitReceived: false,\r\n    onTextRemovedBinaryImageUnitReceived: false,\r\n    onRawTextLinesReceived: false,\r\n    onLongLinesUnitReceived: false,\r\n    onCornersUnitReceived: false,\r\n    onCandidateQuadEdgesUnitReceived: false,\r\n    onCandidateBarcodeZonesUnitReceived: false,\r\n    onScaledUpBarcodeImageUnitReceived: false,\r\n    onDeformationResistedBarcodeImageUnitReceived: false,\r\n    onComplementedBarcodeImageUnitReceived: false,\r\n    onShortLinesUnitReceived: false\r\n};\n\nconst _handleIntermediateResultReceiver = (irr) => {\r\n    for (let irs in irr._irrRegistryState) {\r\n        irr._irrRegistryState[irs] = false;\r\n    }\r\n    for (let receiver of irr._intermediateResultReceiverSet) {\r\n        if (receiver.isDce || receiver.isFilter) {\r\n            irr._irrRegistryState.onTaskResultsReceivedForDce = true;\r\n            continue;\r\n        }\r\n        for (let r in receiver) {\r\n            if (!irr._irrRegistryState[r]) {\r\n                irr._irrRegistryState[r] = !!receiver[r];\r\n            }\r\n        }\r\n    }\r\n};\r\nclass IntermediateResultManager {\r\n    constructor(cvr) {\r\n        this._irrRegistryState = irrRegistryState;\r\n        this._intermediateResultReceiverSet = new Set();\r\n        this._cvr = cvr;\r\n    }\r\n    /**\r\n     * Adds a `IntermediateResultReceiver` object as the receiver of intermediate results.\r\n     * @param receiver The receiver object, of type `IntermediateResultReceiver`.\r\n     */\r\n    async addResultReceiver(receiver) {\r\n        if (typeof receiver !== \"object\")\r\n            throw new Error(`Invalid receiver.`);\r\n        this._intermediateResultReceiverSet.add(receiver);\r\n        _handleIntermediateResultReceiver(this);\r\n        let observedResultUnitTypes = -1;\r\n        let observedTaskMap = {};\r\n        if (!receiver.isDce && !receiver.isFilter) {\r\n            if (!receiver._observedResultUnitTypes || !receiver._observedTaskMap) {\r\n                throw new Error(\"Invalid Intermediate Result Receiver.\");\r\n            }\r\n            observedResultUnitTypes = receiver._observedResultUnitTypes;\r\n            receiver._observedTaskMap.forEach((value, key) => {\r\n                observedTaskMap[key] = value;\r\n            });\r\n            receiver._observedTaskMap.clear();\r\n        }\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    return rs();\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_setIrrRegistry\",\r\n                id: taskID,\r\n                instanceID: this._cvr._instanceID,\r\n                body: {\r\n                    receiverObj: this._irrRegistryState,\r\n                    observedResultUnitTypes: observedResultUnitTypes.toString(),\r\n                    observedTaskMap\r\n                }\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Removes the specified `IntermediateResultReceiver` object.\r\n     * @param receiver The receiver object, of type `IntermediateResultReceiver`.\r\n     */\r\n    async removeResultReceiver(receiver) {\r\n        this._intermediateResultReceiverSet.delete(receiver);\r\n        _handleIntermediateResultReceiver(this);\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    return rs();\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_setIrrRegistry\",\r\n                id: taskID,\r\n                instanceID: this._cvr._instanceID,\r\n                body: {\r\n                    receiverObj: this._irrRegistryState\r\n                }\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Retrieves the original image data.\r\n     *\r\n     * @returns A promise that resolves when the operation has successfully completed. It provides the original image upon resolution.\r\n     */\r\n    getOriginalImage() {\r\n        return this._cvr._dsImage;\r\n    }\r\n    ;\r\n}\n\nconst bSSR = \"undefined\" == typeof self;\n\nconst curScriptDir = (() => {\n    if (!bSSR && document.currentScript) {\n        let src = document.currentScript.src, idxSearch = src.indexOf(\"?\");\n        if (-1 != idxSearch) src = src.substring(0, idxSearch); else {\n            let idxHash = src.indexOf(\"#\");\n            -1 != idxHash && (src = src.substring(0, idxHash));\n        }\n        return src.substring(0, src.lastIndexOf(\"/\") + 1);\n    }\n    return \"./\";\n})(), getAbsoluteDir = value => {\n    if (null == value && (value = \"./\"), bSSR) ; else {\n        let a = document.createElement(\"a\");\n        a.href = value, value = a.href;\n    }\n    return value.endsWith(\"/\") || (value += \"/\"), value;\n};\n\nvar _a;\r\ndynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.cvr = { version: \"2.4.21\", path: curScriptDir };\r\ndynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.workerAutoResources.cvr = { js: true, wasm: true, deps: [\"license\", \"dip\"] };\r\ndynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.cvr = {};\r\nconst stdVersion = \"1.4.10\";\r\nif ('string' != typeof dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std && (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.compareVersion)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std.version, stdVersion) < 0) {\r\n    dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std = { version: stdVersion, path: getAbsoluteDir(curScriptDir + `../../dynamsoft-capture-vision-std@${stdVersion}/dist/`) };\r\n}\r\nconst dipVersion = \"2.4.20\";\r\nif (!dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip || 'string' != typeof dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip && (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.compareVersion)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip.version, dipVersion) < 0) {\r\n    dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip = { version: dipVersion, path: getAbsoluteDir(curScriptDir + `../../dynamsoft-image-processing@${dipVersion}/dist/`) };\r\n}\r\nclass CaptureVisionRouterModule {\r\n    static getVersion() {\r\n        return this._version;\r\n    }\r\n}\r\nCaptureVisionRouterModule._version = `${\"2.4.21\"}(Worker: ${(_a = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.cvr) === null || _a === void 0 ? void 0 : _a.worker}, Wasm: loading...`;\n\nvar EnumImageSourceState;\r\n(function (EnumImageSourceState) {\r\n    EnumImageSourceState[EnumImageSourceState[\"ISS_BUFFER_EMPTY\"] = 0] = \"ISS_BUFFER_EMPTY\";\r\n    EnumImageSourceState[EnumImageSourceState[\"ISS_EXHAUSTED\"] = 1] = \"ISS_EXHAUSTED\";\r\n})(EnumImageSourceState || (EnumImageSourceState = {}));\n\n({\r\n    /** No intermediate result. */\r\n    IRUT_NULL: BigInt(0),\r\n    /** A full-color image. */\r\n    IRUT_COLOUR_IMAGE: BigInt(1),\r\n    /** A color image that has been scaled down for efficiency. */\r\n    IRUT_SCALED_DOWN_COLOUR_IMAGE: BigInt(1 << 1),\r\n    /** A grayscale image derived from the original input. */\r\n    IRUT_GRAYSCALE_IMAGE: BigInt(1 << 2),\r\n    /** A grayscale image that has undergone transformation. */\r\n    IRUT_TRANSOFORMED_GRAYSCALE_IMAGE: BigInt(1 << 3),\r\n    /** A grayscale image enhanced for further processing. */\r\n    IRUT_ENHANCED_GRAYSCALE_IMAGE: BigInt(1 << 4),\r\n    /** Regions pre-detected as potentially relevant for further analysis. */\r\n    IRUT_PREDETECTED_REGIONS: BigInt(1 << 5),\r\n    /** A binary (black and white) image. */\r\n    IRUT_BINARY_IMAGE: BigInt(1 << 6),\r\n    /** Results from detecting textures within the image. */\r\n    IRUT_TEXTURE_DETECTION_RESULT: BigInt(1 << 7),\r\n    /** A grayscale image with textures removed to enhance subject details like text or barcodes. */\r\n    IRUT_TEXTURE_REMOVED_GRAYSCALE_IMAGE: BigInt(1 << 8),\r\n    /** A binary image with textures removed), useful for clear detection of subjects without background noise. */\r\n    IRUT_TEXTURE_REMOVED_BINARY_IMAGE: BigInt(1 << 9),\r\n    /** Detected contours within the image), which can help in identifying shapes and objects. */\r\n    IRUT_CONTOURS: BigInt(1 << 10),\r\n    /** Detected line segments), useful in structural analysis of the image content. */\r\n    IRUT_LINE_SEGMENTS: BigInt(1 << 11),\r\n    /** Identified text zones), indicating areas with potential textual content. */\r\n    IRUT_TEXT_ZONES: BigInt(1 << 12),\r\n    /** A binary image with text regions removed. */\r\n    IRUT_TEXT_REMOVED_BINARY_IMAGE: BigInt(1 << 13),\r\n    /** Zones identified as potential barcode areas), aiding in focused barcode detection. */\r\n    IRUT_CANDIDATE_BARCODE_ZONES: BigInt(1 << 14),\r\n    /** Barcodes that have been localized but not yet decoded. */\r\n    IRUT_LOCALIZED_BARCODES: BigInt(1 << 15),\r\n    /** Barcode images scaled up for improved readability or decoding accuracy. */\r\n    IRUT_SCALED_UP_BARCODE_IMAGE: BigInt(1 << 16),\r\n    /** Images of barcodes processed to resist deformation and improve decoding success. */\r\n    IRUT_DEFORMATION_RESISTED_BARCODE_IMAGE: BigInt(1 << 17),\r\n    /** Barcode images that have been complemented. */\r\n    IRUT_COMPLEMENTED_BARCODE_IMAGE: BigInt(1 << 18),\r\n    /** Successfully decoded barcodes. */\r\n    IRUT_DECODED_BARCODES: BigInt(1 << 19),\r\n    /** Detected long lines. */\r\n    IRUT_LONG_LINES: BigInt(1 << 20),\r\n    /** Detected corners within the image. */\r\n    IRUT_CORNERS: BigInt(1 << 21),\r\n    /** Candidate edges identified as potential components of quadrilaterals. */\r\n    IRUT_CANDIDATE_QUAD_EDGES: BigInt(1 << 22),\r\n    /** Successfully detected quadrilaterals. */\r\n    IRUT_DETECTED_QUADS: BigInt(1 << 23),\r\n    /** Text lines that have been localized in preparation for recognition. */\r\n    IRUT_LOCALIZED_TEXT_LINES: BigInt(1 << 24),\r\n    /** Successfully recognized text lines. */\r\n    IRUT_RECOGNIZED_TEXT_LINES: BigInt(1 << 25),\r\n    /** Successfully normalized images. */\r\n    IRUT_NORMALIZED_IMAGES: BigInt(1 << 26),\r\n    /** Successfully detected short lines. */\r\n    IRUT_SHORT_LINES: BigInt(1 << 27),\r\n    IRUT_RAW_TEXT_LINES: BigInt(1 << 28),\r\n    /** A mask to select all types of intermediate results. */\r\n    IRUT_ALL: BigInt(\"0xFFFFFFFFFFFFFFFF\")\r\n});\r\nfunction handleResultForDraw(results) {\r\n    const resultsForDraw = {\r\n        barcodeResultItems: [],\r\n        textLineResultItems: [],\r\n        detectedQuadResultItems: [],\r\n        normalizedImageResultItems: [],\r\n        parsedResultItems: []\r\n    };\r\n    results.items.forEach((item) => {\r\n        if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_BARCODE) {\r\n            resultsForDraw.barcodeResultItems.push(item);\r\n        }\r\n        else if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_TEXT_LINE) {\r\n            resultsForDraw.textLineResultItems.push(item);\r\n        }\r\n        else if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_DETECTED_QUAD) {\r\n            resultsForDraw.detectedQuadResultItems.push(item);\r\n        }\r\n        else if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_NORMALIZED_IMAGE) {\r\n            resultsForDraw.normalizedImageResultItems.push(item);\r\n        }\r\n        else if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_PARSED_RESULT) {\r\n            resultsForDraw.parsedResultItems.push(item);\r\n        }\r\n    });\r\n    return resultsForDraw;\r\n}\r\nfunction convertCoordinates(item, compressRate) {\r\n    if (item && item.location) {\r\n        const points = item.location.points;\r\n        for (let point of points) {\r\n            point.x = point.x / compressRate;\r\n            point.y = point.y / compressRate;\r\n        }\r\n        convertCoordinates(item.referencedItem, compressRate);\r\n    }\r\n}\r\nfunction checkIsDisposed(cvr) {\r\n    if (cvr.disposed) {\r\n        throw new Error(`\"CaptureVisionRouter\" instance has been disposed`);\r\n    }\r\n}\n\nvar _CaptureVisionRouter_isa, _CaptureVisionRouter_canvas, _CaptureVisionRouter_promiseStartScan, _CaptureVisionRouter_intermediateResultManager, _CaptureVisionRouter_bufferdItemsManager, _CaptureVisionRouter_resultReceiverSet, _CaptureVisionRouter_isaStateListenerSet, _CaptureVisionRouter_resultFilterSet, _CaptureVisionRouter_compressRate, _CaptureVisionRouter_isScanner, _CaptureVisionRouter_innerUseTag, _CaptureVisionRouter_isDestroyed;\r\nconst _intermediateResultReceiverOfFilter = {\r\n    onTaskResultsReceived: () => { },\r\n    isFilter: true\r\n};\r\nclass CaptureVisionRouter {\r\n    constructor() {\r\n        this.maxCvsSideLength = [\"iPhone\", \"Android\", \"HarmonyOS\"].includes(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule.browserInfo.OS) ? 2048 : 4096;\r\n        this._instanceID = undefined;\r\n        this._dsImage = null;\r\n        this._isPauseScan = true;\r\n        this._isOutputOriginalImage = false;\r\n        this._isOpenDetectVerify = false;\r\n        this._isOpenNormalizeVerify = false;\r\n        this._isOpenBarcodeVerify = false;\r\n        this._isOpenLabelVerify = false;\r\n        this._minImageCaptureInterval = 0;\r\n        this._averageProcessintTimeArray = [];\r\n        this._averageFetchImageTimeArray = [];\r\n        this._currentSettings = null;\r\n        this._averageTime = 999;\r\n        _CaptureVisionRouter_isa.set(this, null);\r\n        _CaptureVisionRouter_canvas.set(this, null);\r\n        _CaptureVisionRouter_promiseStartScan.set(this, null);\r\n        _CaptureVisionRouter_intermediateResultManager.set(this, null);\r\n        _CaptureVisionRouter_bufferdItemsManager.set(this, null);\r\n        _CaptureVisionRouter_resultReceiverSet.set(this, new Set());\r\n        _CaptureVisionRouter_isaStateListenerSet.set(this, new Set());\r\n        _CaptureVisionRouter_resultFilterSet.set(this, new Set());\r\n        _CaptureVisionRouter_compressRate.set(this, 0);\r\n        _CaptureVisionRouter_isScanner.set(this, false);\r\n        _CaptureVisionRouter_innerUseTag.set(this, false);\r\n        _CaptureVisionRouter_isDestroyed.set(this, false);\r\n        this._singleFrameModeCallbackBind = this._singleFrameModeCallback.bind(this);\r\n    }\r\n    /**\r\n     * Returns whether the `CaptureVisionRouter` instance has been disposed of.\r\n     *\r\n     * @returns Boolean indicating whether the `CaptureVisionRouter` instance has been disposed of.\r\n     */\r\n    get disposed() {\r\n        return __classPrivateFieldGet(this, _CaptureVisionRouter_isDestroyed, \"f\");\r\n    }\r\n    /**\r\n     * Initializes a new instance of the `CaptureVisionRouter` class.\r\n     *\r\n     * @returns A promise that resolves with the initialized `CaptureVisionRouter` instance.\r\n     */\r\n    static async createInstance() {\r\n        if (!dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license) {\r\n            throw Error('Module `license` is not existed.');\r\n        }\r\n        await dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license.dynamsoft();\r\n        await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)([\"cvr\"]);\r\n        const captureVisionRouter = new CaptureVisionRouter();\r\n        const p = new MutablePromise();\r\n        let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n            var _a;\r\n            if (body.success) {\r\n                captureVisionRouter._instanceID = body.instanceID;\r\n                captureVisionRouter._currentSettings = JSON.parse(body.outputSettings);\r\n                CaptureVisionRouterModule._version = `${\"2.4.21\"}(Worker: ${(_a = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.cvr) === null || _a === void 0 ? void 0 : _a.worker}, Wasm: ${body.version})`;\r\n                __classPrivateFieldSet(captureVisionRouter, _CaptureVisionRouter_innerUseTag, true, \"f\");\r\n                __classPrivateFieldSet(captureVisionRouter, _CaptureVisionRouter_intermediateResultManager, captureVisionRouter.getIntermediateResultManager(), \"f\");\r\n                __classPrivateFieldSet(captureVisionRouter, _CaptureVisionRouter_innerUseTag, false, \"f\");\r\n                p.resolve(captureVisionRouter);\r\n            }\r\n            else {\r\n                const err = Error(body.message);\r\n                if (body.stack) {\r\n                    err.stack = body.stack;\r\n                }\r\n                p.reject(err);\r\n            }\r\n        };\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n            type: 'cvr_createInstance',\r\n            id: taskID,\r\n        });\r\n        return p;\r\n    }\r\n    ;\r\n    async _singleFrameModeCallback(dsImage) {\r\n        for (let receiver of __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\")) {\r\n            this._isOutputOriginalImage && receiver.onOriginalImageResultReceived && receiver.onOriginalImageResultReceived({ imageData: dsImage });\r\n        }\r\n        const copyDsImageData = {\r\n            bytes: new Uint8Array(dsImage.bytes),\r\n            width: dsImage.width,\r\n            height: dsImage.height,\r\n            stride: dsImage.stride,\r\n            format: dsImage.format,\r\n            tag: dsImage.tag\r\n        };\r\n        if (!this._templateName)\r\n            this._templateName = this._currentSettings.CaptureVisionTemplates[0].Name;\r\n        const result = await this.capture(copyDsImageData, this._templateName);\r\n        result.originalImageTag = dsImage.tag;\r\n        for (let receiver of __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\")) {\r\n            if (receiver.isDce) {\r\n                receiver.onCapturedResultReceived(result, {\r\n                    isDetectVerifyOpen: false,\r\n                    isNormalizeVerifyOpen: false,\r\n                    isBarcodeVerifyOpen: false,\r\n                    isLabelVerifyOpen: false,\r\n                });\r\n            }\r\n        }\r\n        const resultCommonPart = {\r\n            originalImageHashId: result.originalImageHashId,\r\n            originalImageTag: result.originalImageTag,\r\n            errorCode: result.errorCode,\r\n            errorString: result.errorString\r\n        };\r\n        for (let receiver of __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\")) {\r\n            receiver.onDecodedBarcodesReceived && result.barcodeResultItems && receiver.onDecodedBarcodesReceived(Object.assign(Object.assign({}, resultCommonPart), { barcodeResultItems: result.barcodeResultItems }));\r\n            receiver.onRecognizedTextLinesReceived && result.textLineResultItems && receiver.onRecognizedTextLinesReceived(Object.assign(Object.assign({}, resultCommonPart), { textLineResultItems: result.textLineResultItems }));\r\n            receiver.onDetectedQuadsReceived && result.detectedQuadResultItems && receiver.onDetectedQuadsReceived(Object.assign(Object.assign({}, resultCommonPart), { detectedQuadResultItems: result.detectedQuadResultItems }));\r\n            receiver.onNormalizedImagesReceived && result.normalizedImageResultItems && receiver.onNormalizedImagesReceived(Object.assign(Object.assign({}, resultCommonPart), { normalizedImageResultItems: result.normalizedImageResultItems }));\r\n            receiver.onParsedResultsReceived && result.parsedResultItems && receiver.onParsedResultsReceived(Object.assign(Object.assign({}, resultCommonPart), { parsedResultItems: result.parsedResultItems }));\r\n            if (receiver.onCapturedResultReceived && !receiver.isDce) {\r\n                if (this._isOutputOriginalImage) {\r\n                    const index = result.items.findIndex((item) => { return item.type === 1; });\r\n                    if (index !== -1) {\r\n                        result.items[index].imageData = dsImage;\r\n                    }\r\n                }\r\n                receiver.onCapturedResultReceived(result);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Sets up an image source to provide images for continuous processing.\r\n     * @param imageSource The image source which is compliant with the `ImageSourceAdapter` interface.\r\n     */\r\n    setInput(imageSource) {\r\n        checkIsDisposed(this);\r\n        if (!imageSource) {\r\n            __classPrivateFieldSet(this, _CaptureVisionRouter_isa, null, \"f\");\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _CaptureVisionRouter_isa, imageSource, \"f\");\r\n        if (imageSource.isCameraEnhancer) {\r\n            if (__classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\")) {\r\n                __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\")._intermediateResultReceiver.isDce = true;\r\n                __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\").addResultReceiver(__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\")._intermediateResultReceiver);\r\n            }\r\n            const cameraView = __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").getCameraView();\r\n            if (cameraView) {\r\n                const dceCrr = cameraView._capturedResultReceiver;\r\n                dceCrr.isDce = true;\r\n                __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\").add(dceCrr);\r\n            }\r\n            // TODO: think about off.\r\n            //(imageSource as any).on(\"singleFrameAcquired\", this._singleFrameModeCallback);\r\n        }\r\n    }\r\n    ;\r\n    /**\r\n     * Returns the image source object.\r\n     */\r\n    getInput() {\r\n        return __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\");\r\n    }\r\n    ;\r\n    /**\r\n     * Adds or removes listeners for image source state change.\r\n     */\r\n    addImageSourceStateListener(listener) {\r\n        checkIsDisposed(this);\r\n        if (typeof listener !== \"object\")\r\n            return console.warn(`Invalid ISA state listener.`);\r\n        if (!listener || !Object.keys(listener))\r\n            return;\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_isaStateListenerSet, \"f\").add(listener);\r\n    }\r\n    ;\r\n    removeImageSourceStateListener(listener) {\r\n        checkIsDisposed(this);\r\n        return __classPrivateFieldGet(this, _CaptureVisionRouter_isaStateListenerSet, \"f\").delete(listener);\r\n    }\r\n    /**\r\n     * Adds a `CapturedResultReceiver` object as the receiver of captured results.\r\n     * @param receiver The receiver object, of type `CapturedResultReceiver`.\r\n     */\r\n    addResultReceiver(receiver) {\r\n        checkIsDisposed(this);\r\n        if (typeof receiver !== \"object\")\r\n            throw new Error(`Invalid receiver.`);\r\n        if (!receiver || !Object.keys(receiver).length)\r\n            return;\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\").add(receiver);\r\n        this._setCrrRegistry();\r\n    }\r\n    ;\r\n    /**\r\n     * Removes the specified `CapturedResultReceiver` object.\r\n     * @param receiver The receiver object, of type `CapturedResultReceiver`.\r\n     */\r\n    removeResultReceiver(receiver) {\r\n        checkIsDisposed(this);\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\").delete(receiver);\r\n        this._setCrrRegistry();\r\n    }\r\n    async _setCrrRegistry() {\r\n        const receiver = {\r\n            onCapturedResultReceived: false,\r\n            onDecodedBarcodesReceived: false,\r\n            onRecognizedTextLinesReceived: false,\r\n            onDetectedQuadsReceived: false,\r\n            onNormalizedImagesReceived: false,\r\n            onParsedResultsReceived: false\r\n        };\r\n        for (let r of __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\")) {\r\n            if (r.isDce)\r\n                continue;\r\n            receiver.onCapturedResultReceived = !!r[\"onCapturedResultReceived\"];\r\n            receiver.onDecodedBarcodesReceived = !!r[\"onDecodedBarcodesReceived\"];\r\n            receiver.onRecognizedTextLinesReceived = !!r[\"onRecognizedTextLinesReceived\"];\r\n            receiver.onDetectedQuadsReceived = !!r[\"onDetectedQuadsReceived\"];\r\n            receiver.onNormalizedImagesReceived = !!r[\"onNormalizedImagesReceived\"];\r\n            receiver.onParsedResultsReceived = !!r[\"onParsedResultsReceived\"];\r\n        }\r\n        const p = new MutablePromise();\r\n        let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n            if (body.success) {\r\n                p.resolve();\r\n            }\r\n            else {\r\n                let ex = new Error(body.message);\r\n                ex.stack = body.stack + '\\n' + ex.stack;\r\n                p.reject();\r\n            }\r\n        };\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n            type: \"cvr_setCrrRegistry\",\r\n            id: taskID,\r\n            instanceID: this._instanceID,\r\n            body: {\r\n                receiver: JSON.stringify(receiver)\r\n            }\r\n        });\r\n        return p;\r\n    }\r\n    /**\r\n     * Adds a `MultiFrameResultCrossFilter` object to filter non-essential results.\r\n     * @param filter The filter object, of type `MultiFrameResultCrossFilter`.\r\n     *\r\n     * @returns A promise that resolves when the operation has successfully completed. It does not provide any value upon resolution.\r\n     */\r\n    async addResultFilter(filter) {\r\n        checkIsDisposed(this);\r\n        if (!filter || typeof filter !== \"object\" || !Object.keys(filter).length) {\r\n            return console.warn(`Invalid filter.`);\r\n        }\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\").add(filter);\r\n        // When cvr.addResultFilter is called, this method will automatically be invoked to batch update the filter statuses that were set before calling addResultFilter.\r\n        filter._dynamsoft();\r\n        await this._handleFilterUpdate();\r\n    }\r\n    ;\r\n    /**\r\n     * Removes the specified `MultiFrameResultCrossFilter` object.\r\n     * @param filter The filter object, of type `MultiFrameResultCrossFilter`.\r\n     *\r\n     * @returns A promise that resolves when the operation has successfully completed. It does not provide any value upon resolution.\r\n     */\r\n    async removeResultFilter(filter) {\r\n        checkIsDisposed(this);\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\").delete(filter);\r\n        await this._handleFilterUpdate();\r\n    }\r\n    async _handleFilterUpdate() {\r\n        /**\r\n         * Each time a \"filter\" is added or removed, the \"filter set\" will be re-traversed,\r\n         * and _intermediateResultReceiverOfFilter will be added when necessary.\r\n         * This ensures that _intermediateResultReceiverOfFilter is not left in the \"filter set\" when the \"filter set\" is empty or when no filter in the \"filter set\" has isLatestOverlappingEnabled set to true.\r\n         */\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\").removeResultReceiver(_intermediateResultReceiverOfFilter);\r\n        if (__classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\").size === 0) {\r\n            this._isOpenBarcodeVerify = false;\r\n            this._isOpenLabelVerify = false;\r\n            this._isOpenDetectVerify = false;\r\n            this._isOpenNormalizeVerify = false;\r\n            const _verificationEnabled = {\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_BARCODE]: false,\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_TEXT_LINE]: false,\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_DETECTED_QUAD]: false,\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_NORMALIZED_IMAGE]: false\r\n            };\r\n            const _duplicateFilterEnabled = {\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_BARCODE]: false,\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_TEXT_LINE]: false,\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_DETECTED_QUAD]: false,\r\n                [dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_NORMALIZED_IMAGE]: false\r\n            };\r\n            await _enableResultCrossVerification(this, _verificationEnabled);\r\n            await _enableResultDeduplication(this, _duplicateFilterEnabled);\r\n            return;\r\n        }\r\n        for (let filter of __classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\")) {\r\n            this._isOpenBarcodeVerify = filter.isResultCrossVerificationEnabled(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_BARCODE);\r\n            this._isOpenLabelVerify = filter.isResultCrossVerificationEnabled(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_TEXT_LINE);\r\n            this._isOpenDetectVerify = filter.isResultCrossVerificationEnabled(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_DETECTED_QUAD);\r\n            this._isOpenNormalizeVerify = filter.isResultCrossVerificationEnabled(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_NORMALIZED_IMAGE);\r\n            if (filter.isLatestOverlappingEnabled(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_BARCODE)) {\r\n                const _isExist = [...__classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\")._intermediateResultReceiverSet.values()].find((receiver) => { return receiver.isFilter; });\r\n                if (!_isExist) {\r\n                    __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\").addResultReceiver(_intermediateResultReceiverOfFilter);\r\n                }\r\n            }\r\n            await _enableResultCrossVerification(this, filter.verificationEnabled);\r\n            await _enableResultDeduplication(this, filter.duplicateFilterEnabled);\r\n            await _setDuplicateForgetTime(this, filter.duplicateForgetTime);\r\n        }\r\n    }\r\n    /**\r\n     * Initiates a capturing process based on a specified template. This process is repeated for each image fetched from the source.\r\n     * @param templateName [Optional] Specifies a \"CaptureVisionTemplate\" to use.\r\n     *\r\n     * @returns A promise that resolves when the capturing process has successfully started. It does not provide any value upon resolution.\r\n     */\r\n    async startCapturing(templateName) {\r\n        var _a, _b;\r\n        checkIsDisposed(this);\r\n        if (!this._isPauseScan)\r\n            return;\r\n        if (!__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\"))\r\n            throw new Error(`'ImageSourceAdapter' is not set. call 'setInput' before 'startCapturing'`);\r\n        if (!templateName)\r\n            templateName = this._currentSettings.CaptureVisionTemplates[0].Name;\r\n        const tasks = await this.containsTask(templateName);\r\n        await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)(tasks);\r\n        /*\r\n         * Why do we need to re-add an existing \"filter\" when calling \"startCapturing\"?\r\n         * Because there may be a situation where the corresponding wasm module has not been loaded when adding \"filter\",\r\n         * so after checking the required wasm module in \"startCapturing\", we will add \"filter\" again to ensure that \"filter\" takes effect in wasm.\r\n         *\r\n         * Why not check for the required wasm when adding the \"filter\"?\r\n         * Because each result type has a default value, we cannot know which wasm modules are actually needed through the passed \"filter\"\r\n         *\r\n         * This part of the logic has room for optimization. will do.\r\n         **/\r\n        for (let filter of __classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\")) {\r\n            await this.addResultFilter(filter);\r\n        }\r\n        if (tasks.includes(\"dlr\") && !((_a = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.dlr) === null || _a === void 0 ? void 0 : _a.bLoadConfusableCharsData)) {\r\n            const _engineResourcePaths = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.handleEngineResourcePaths)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule.engineResourcePaths, dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths);\r\n            await ((_b = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.dlr) === null || _b === void 0 ? void 0 : _b.loadRecognitionData(\"ConfusableChars\", _engineResourcePaths.dlr));\r\n        }\r\n        if (__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").isCameraEnhancer) {\r\n            if (tasks.includes(\"ddn\")) {\r\n                __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").setPixelFormat(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_ABGR_8888);\r\n            }\r\n            else {\r\n                __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").setPixelFormat(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumImagePixelFormat.IPF_GRAYSCALED);\r\n            }\r\n        }\r\n        if (__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").singleFrameMode !== undefined && __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").singleFrameMode !== \"disabled\") {\r\n            this._templateName = templateName;\r\n            __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").on(\"singleFrameAcquired\", this._singleFrameModeCallbackBind);\r\n            return;\r\n        }\r\n        const colourChannelUsageType = __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").getColourChannelUsageType();\r\n        if (colourChannelUsageType === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumColourChannelUsageType.CCUT_AUTO) {\r\n            __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").setColourChannelUsageType(tasks.includes(\"ddn\") ?\r\n                dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumColourChannelUsageType.CCUT_FULL_CHANNEL\r\n                :\r\n                    dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumColourChannelUsageType.CCUT_Y_CHANNEL_ONLY);\r\n        }\r\n        if (__classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\") && __classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\").isPending)\r\n            return __classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\");\r\n        __classPrivateFieldSet(this, _CaptureVisionRouter_promiseStartScan, new MutablePromise((rs, rj) => {\r\n            if (this.disposed)\r\n                return;\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (!__classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\") || __classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\").isFulfilled)\r\n                    return;\r\n                if (body.success) {\r\n                    this._isPauseScan = false;\r\n                    this._isOutputOriginalImage = body.isOutputOriginalImage;\r\n                    this._loopReadVideoTimeoutId && clearTimeout(this._loopReadVideoTimeoutId);\r\n                    this._loopReadVideoTimeoutId = setTimeout(async () => {\r\n                        if (this._minImageCaptureInterval !== -1) {\r\n                            __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").startFetching();\r\n                        }\r\n                        this._loopReadVideo(templateName);\r\n                        // try {\r\n                        //   await this._loopReadVideo(templateName);\r\n                        // } catch (ex) {\r\n                        //   rj(ex);\r\n                        // }\r\n                        rs();\r\n                    }, 0);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_startCapturing\",\r\n                id: taskID,\r\n                instanceID: this._instanceID,\r\n                body: { templateName }\r\n            });\r\n        }), \"f\");\r\n        return await __classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\");\r\n    }\r\n    /**\r\n     * Stops the capturing process.\r\n     */\r\n    stopCapturing() {\r\n        checkIsDisposed(this);\r\n        if (!__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\"))\r\n            return;\r\n        if (__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").isCameraEnhancer) {\r\n            if (__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").singleFrameMode !== undefined && __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").singleFrameMode !== \"disabled\") {\r\n                __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").off(\"singleFrameAcquired\", this._singleFrameModeCallbackBind);\r\n                return;\r\n            }\r\n        }\r\n        _clearVerifyList(this);\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").stopFetching();\r\n        this._averageProcessintTimeArray = [];\r\n        this._averageTime = 999;\r\n        this._isPauseScan = true;\r\n        __classPrivateFieldSet(this, _CaptureVisionRouter_promiseStartScan, null, \"f\");\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").setColourChannelUsageType(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumColourChannelUsageType.CCUT_AUTO);\r\n    }\r\n    async containsTask(templateName) {\r\n        checkIsDisposed(this);\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    return rs(JSON.parse(body.tasks));\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_containsTask\",\r\n                id: taskID,\r\n                instanceID: this._instanceID,\r\n                body: {\r\n                    templateName\r\n                }\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Video stream capture, recursive call, loop frame capture\r\n     */\r\n    async _loopReadVideo(templateName) {\r\n        if ((this.disposed || this._isPauseScan)) {\r\n            return;\r\n        }\r\n        __classPrivateFieldSet(this, _CaptureVisionRouter_isScanner, true, \"f\");\r\n        if (__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").isBufferEmpty()) {\r\n            if (__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").hasNextImageToFetch()) {\r\n                for (let listener of __classPrivateFieldGet(this, _CaptureVisionRouter_isaStateListenerSet, \"f\")) {\r\n                    listener.onImageSourceStateReceived && listener.onImageSourceStateReceived(EnumImageSourceState.ISS_BUFFER_EMPTY);\r\n                }\r\n            }\r\n            else if (!(__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").hasNextImageToFetch())) {\r\n                for (let listener of __classPrivateFieldGet(this, _CaptureVisionRouter_isaStateListenerSet, \"f\")) {\r\n                    listener.onImageSourceStateReceived && listener.onImageSourceStateReceived(EnumImageSourceState.ISS_EXHAUSTED);\r\n                }\r\n            }\r\n        }\r\n        if (this._minImageCaptureInterval === -1 || __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").isBufferEmpty()) {\r\n            try {\r\n                if (__classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").isBufferEmpty() && CaptureVisionRouter._onLog)\r\n                    CaptureVisionRouter._onLog(`buffer is empty so fetch image`);\r\n                if (CaptureVisionRouter._onLog) {\r\n                    CaptureVisionRouter._onLog(`DCE: start fetching a frame: ${Date.now()}`);\r\n                }\r\n                this._dsImage = __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").fetchImage();\r\n                if (CaptureVisionRouter._onLog) {\r\n                    CaptureVisionRouter._onLog(`DCE: finish fetching a frame: ${Date.now()}`);\r\n                }\r\n                __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").setImageFetchInterval(this._averageTime);\r\n            }\r\n            catch (e) {\r\n                this._reRunCurrnetFunc(templateName);\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").setImageFetchInterval(this._averageTime - (this._dsImage && this._dsImage.tag ? this._dsImage.tag.timeSpent : 0));\r\n            this._dsImage = __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").getImage();\r\n            if (this._dsImage.tag) {\r\n                if (Date.now() - this._dsImage.tag.timeStamp > 200) {\r\n                    this._reRunCurrnetFunc(templateName);\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        if (!this._dsImage) {\r\n            this._reRunCurrnetFunc(templateName);\r\n            return;\r\n        }\r\n        for (let receiver of __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\")) {\r\n            this._isOutputOriginalImage && receiver.onOriginalImageResultReceived && receiver.onOriginalImageResultReceived({ imageData: this._dsImage });\r\n        }\r\n        // capture\r\n        // try {\r\n        //   const captureStartTime = Date.now();\r\n        //   const result = await this._captureDsimage(this._dsImage, templateName);\r\n        //   if (CaptureVisionRouter._onLog) CaptureVisionRouter._onLog(`no js handle time: ${Date.now() - captureStartTime}`);\r\n        //   if (this._isPauseScan) {\r\n        //     this._reRunCurrnetFunc(templateName);\r\n        //     return;\r\n        //   }\r\n        //   (result as any).originalImageTag = this._dsImage.tag ? this._dsImage.tag : null;\r\n        //   const resultCommonPart = {\r\n        //     originalImageHashId: result.originalImageHashId,\r\n        //     originalImageTag: result.originalImageTag,\r\n        //     errorCode: result.errorCode,\r\n        //     errorString: result.errorString\r\n        //   }\r\n        //   for (let receiver of this.#resultReceiverSet) {\r\n        //     if ((receiver as any).isDce) {\r\n        //       const drawTime = Date.now();\r\n        //       (receiver as any).onCapturedResultReceived(result, {\r\n        //         isDetectVerifyOpen: this._isOpenDetectVerify,\r\n        //         isNormalizeVerifyOpen: this._isOpenNormalizeVerify,\r\n        //         isBarcodeVerifyOpen: this._isOpenBarcodeVerify,\r\n        //         isLabelVerifyOpen: this._isOpenLabelVerify,\r\n        //       });\r\n        //       if (CaptureVisionRouter._onLog) {\r\n        //         const time = Date.now() - drawTime;\r\n        //         if (time > 10) CaptureVisionRouter._onLog(`draw result time: ${time}`)\r\n        //       };\r\n        //     }\r\n        //     receiver.onDecodedBarcodesReceived && result.barcodeResultItems && receiver.onDecodedBarcodesReceived({\r\n        //       ...resultCommonPart,\r\n        //       barcodeResultItems: result.barcodeResultItems.filter((item: any) => { return !item.isFilter })\r\n        //     } as DecodedBarcodesResult);\r\n        //     receiver.onRecognizedTextLinesReceived && result.textLineResultItems && receiver.onRecognizedTextLinesReceived({\r\n        //       ...resultCommonPart,\r\n        //       textLineResultItems: result.textLineResultItems.filter((item: any) => { return !item.isFilter })\r\n        //     } as RecognizedTextLinesResult);\r\n        //     receiver.onDetectedQuadsReceived && result.detectedQuadResultItems && receiver.onDetectedQuadsReceived({\r\n        //       ...resultCommonPart,\r\n        //       detectedQuadResultItems: result.detectedQuadResultItems.filter((item: any) => { return !item.isFilter })\r\n        //     } as DetectedQuadsResult);\r\n        //     receiver.onNormalizedImagesReceived && result.normalizedImageResultItems && receiver.onNormalizedImagesReceived({\r\n        //       ...resultCommonPart,\r\n        //       normalizedImageResultItems: result.normalizedImageResultItems.filter((item: any) => { return !item.isFilter })\r\n        //     } as NormalizedImagesResult);\r\n        //     receiver.onParsedResultsReceived && result.parsedResultItems && receiver.onParsedResultsReceived({\r\n        //       ...resultCommonPart,\r\n        //       parsedResultItems: result.parsedResultItems.filter((item: any) => { return !item.isFilter })\r\n        //     } as ParsedResult);\r\n        //     if (receiver.onCapturedResultReceived && !(receiver as any).isDce) {\r\n        //       (result as any).items = result.items.filter((item: any) => { return !item.isFilter });\r\n        //       if ((result as any).barcodeResultItems) (result as any).barcodeResultItems = result.barcodeResultItems.filter((item: any) => { return !item.isFilter });\r\n        //       if ((result as any).textLineResultItems) (result as any).textLineResultItems = result.textLineResultItems.filter((item: any) => { return !item.isFilter });\r\n        //       if ((result as any).detectedQuadResultItems) (result as any).detectedQuadResultItems = result.detectedQuadResultItems.filter((item: any) => { return !item.isFilter });\r\n        //       if ((result as any).normalizedImageResultItems) (result as any).normalizedImageResultItems = result.normalizedImageResultItems.filter((item: any) => { return !item.isFilter });\r\n        //       if ((result as any).parsedResultItems) (result as any).parsedResultItems = result.parsedResultItems.filter((item: any) => { return !item.isFilter });\r\n        //       receiver.onCapturedResultReceived(result);\r\n        //     }\r\n        //   }\r\n        //   const fetchImageCalculateStartTime = Date.now();\r\n        //   if (this._minImageCaptureInterval > -1) {\r\n        //     if (this._averageProcessintTimeArray.length === 5) this._averageProcessintTimeArray.shift();\r\n        //     if (this._averageFetchImageTimeArray.length === 5) this._averageFetchImageTimeArray.shift();\r\n        //     this._averageProcessintTimeArray.push(Date.now() - captureStartTime);\r\n        //     //this._averageTime = this._averageProcessintTimeArray.reduce((time, value) => time + value, 0) / this._averageProcessintTimeArray.length;\r\n        //     this._averageFetchImageTimeArray.push((this._dsImage && this._dsImage.tag ? (this._dsImage.tag as any).timeSpent : 0));\r\n        //     this._averageTime = Math.min(...this._averageProcessintTimeArray) - Math.max(...this._averageFetchImageTimeArray);\r\n        //     this._averageTime = this._averageTime > 0 ? this._averageTime : 0;\r\n        //     if (CaptureVisionRouter._onLog) {\r\n        //       CaptureVisionRouter._onLog(`minImageCaptureInterval: ${this._minImageCaptureInterval}`);\r\n        //       CaptureVisionRouter._onLog(`averageProcessintTimeArray: ${this._averageProcessintTimeArray}`);\r\n        //       CaptureVisionRouter._onLog(`averageFetchImageTimeArray: ${this._averageFetchImageTimeArray}`);\r\n        //       CaptureVisionRouter._onLog(`averageTime: ${this._averageTime}`);\r\n        //     };\r\n        //   }\r\n        //   if (CaptureVisionRouter._onLog) {\r\n        //     const time = Date.now() - fetchImageCalculateStartTime;\r\n        //     if (time > 10) CaptureVisionRouter._onLog(`fetch image calculate time: ${time}`)\r\n        //   };\r\n        //   if (CaptureVisionRouter._onLog) CaptureVisionRouter._onLog(`time finish decode: ${Date.now()}`)\r\n        //   if (CaptureVisionRouter._onLog) CaptureVisionRouter._onLog(`main time: ${Date.now() - captureStartTime}`);\r\n        //   if (CaptureVisionRouter._onLog) CaptureVisionRouter._onLog(\"====================================================\");\r\n        //   this._loopReadVideoTimeoutId && clearTimeout(this._loopReadVideoTimeoutId);\r\n        //   if (this._minImageCaptureInterval > 0 && this._minImageCaptureInterval >= this._averageTime) {\r\n        //     this._loopReadVideoTimeoutId = setTimeout(() => {\r\n        //       this._loopReadVideo(templateName);\r\n        //     }, this._minImageCaptureInterval - this._averageTime);\r\n        //   } else {\r\n        //     this._loopReadVideoTimeoutId = setTimeout(() => {\r\n        //       this._loopReadVideo(templateName);\r\n        //     }, Math.max(this._minImageCaptureInterval, 0));\r\n        //   }\r\n        // } catch (ex) {\r\n        //   this.#isa.stopFetching();\r\n        //   this._loopReadVideoTimeoutId && clearTimeout(this._loopReadVideoTimeoutId);\r\n        //   this._loopReadVideoTimeoutId = setTimeout(() => {\r\n        //     this.#isa.startFetching();\r\n        //     this._loopReadVideo(templateName);\r\n        //   }, Math.max(this._minImageCaptureInterval, 1000));\r\n        //   if (!(ex.message === 'platform error')) {\r\n        //     throw ex;\r\n        //   }\r\n        // }\r\n        const captureStartTime = Date.now();\r\n        this._captureDsimage(this._dsImage, templateName).then(async (result) => {\r\n            if (CaptureVisionRouter._onLog)\r\n                CaptureVisionRouter._onLog(`no js handle time: ${Date.now() - captureStartTime}`);\r\n            if (this._isPauseScan) {\r\n                this._reRunCurrnetFunc(templateName);\r\n                return;\r\n            }\r\n            result.originalImageTag = this._dsImage.tag ? this._dsImage.tag : null;\r\n            const resultCommonPart = {\r\n                originalImageHashId: result.originalImageHashId,\r\n                originalImageTag: result.originalImageTag,\r\n                errorCode: result.errorCode,\r\n                errorString: result.errorString\r\n            };\r\n            for (let receiver of __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\")) {\r\n                if (receiver.isDce) {\r\n                    const drawTime = Date.now();\r\n                    receiver.onCapturedResultReceived(result, {\r\n                        isDetectVerifyOpen: this._isOpenDetectVerify,\r\n                        isNormalizeVerifyOpen: this._isOpenNormalizeVerify,\r\n                        isBarcodeVerifyOpen: this._isOpenBarcodeVerify,\r\n                        isLabelVerifyOpen: this._isOpenLabelVerify,\r\n                    });\r\n                    if (CaptureVisionRouter._onLog) {\r\n                        const time = Date.now() - drawTime;\r\n                        if (time > 10)\r\n                            CaptureVisionRouter._onLog(`draw result time: ${time}`);\r\n                    }\r\n                }\r\n                receiver.onDecodedBarcodesReceived && result.barcodeResultItems && receiver.onDecodedBarcodesReceived(Object.assign(Object.assign({}, resultCommonPart), { barcodeResultItems: result.barcodeResultItems.filter((item) => { return !item.isFilter; }) }));\r\n                receiver.onRecognizedTextLinesReceived && result.textLineResultItems && receiver.onRecognizedTextLinesReceived(Object.assign(Object.assign({}, resultCommonPart), { textLineResultItems: result.textLineResultItems.filter((item) => { return !item.isFilter; }) }));\r\n                receiver.onDetectedQuadsReceived && result.detectedQuadResultItems && receiver.onDetectedQuadsReceived(Object.assign(Object.assign({}, resultCommonPart), { detectedQuadResultItems: result.detectedQuadResultItems.filter((item) => { return !item.isFilter; }) }));\r\n                receiver.onNormalizedImagesReceived && result.normalizedImageResultItems && receiver.onNormalizedImagesReceived(Object.assign(Object.assign({}, resultCommonPart), { normalizedImageResultItems: result.normalizedImageResultItems.filter((item) => { return !item.isFilter; }) }));\r\n                receiver.onParsedResultsReceived && result.parsedResultItems && receiver.onParsedResultsReceived(Object.assign(Object.assign({}, resultCommonPart), { parsedResultItems: result.parsedResultItems.filter((item) => { return !item.isFilter; }) }));\r\n                if (receiver.onCapturedResultReceived && !receiver.isDce) {\r\n                    result.items = result.items.filter((item) => { return !item.isFilter; });\r\n                    if (result.barcodeResultItems)\r\n                        result.barcodeResultItems = result.barcodeResultItems.filter((item) => { return !item.isFilter; });\r\n                    if (result.textLineResultItems)\r\n                        result.textLineResultItems = result.textLineResultItems.filter((item) => { return !item.isFilter; });\r\n                    if (result.detectedQuadResultItems)\r\n                        result.detectedQuadResultItems = result.detectedQuadResultItems.filter((item) => { return !item.isFilter; });\r\n                    if (result.normalizedImageResultItems)\r\n                        result.normalizedImageResultItems = result.normalizedImageResultItems.filter((item) => { return !item.isFilter; });\r\n                    if (result.parsedResultItems)\r\n                        result.parsedResultItems = result.parsedResultItems.filter((item) => { return !item.isFilter; });\r\n                    receiver.onCapturedResultReceived(result);\r\n                }\r\n            }\r\n            const fetchImageCalculateStartTime = Date.now();\r\n            if (this._minImageCaptureInterval > -1) {\r\n                if (this._averageProcessintTimeArray.length === 5)\r\n                    this._averageProcessintTimeArray.shift();\r\n                if (this._averageFetchImageTimeArray.length === 5)\r\n                    this._averageFetchImageTimeArray.shift();\r\n                this._averageProcessintTimeArray.push(Date.now() - captureStartTime);\r\n                //this._averageTime = this._averageProcessintTimeArray.reduce((time, value) => time + value, 0) / this._averageProcessintTimeArray.length;\r\n                this._averageFetchImageTimeArray.push((this._dsImage && this._dsImage.tag ? this._dsImage.tag.timeSpent : 0));\r\n                this._averageTime = Math.min(...this._averageProcessintTimeArray) - Math.max(...this._averageFetchImageTimeArray);\r\n                this._averageTime = this._averageTime > 0 ? this._averageTime : 0;\r\n                if (CaptureVisionRouter._onLog) {\r\n                    CaptureVisionRouter._onLog(`minImageCaptureInterval: ${this._minImageCaptureInterval}`);\r\n                    CaptureVisionRouter._onLog(`averageProcessintTimeArray: ${this._averageProcessintTimeArray}`);\r\n                    CaptureVisionRouter._onLog(`averageFetchImageTimeArray: ${this._averageFetchImageTimeArray}`);\r\n                    CaptureVisionRouter._onLog(`averageTime: ${this._averageTime}`);\r\n                }\r\n            }\r\n            if (CaptureVisionRouter._onLog) {\r\n                const time = Date.now() - fetchImageCalculateStartTime;\r\n                if (time > 10)\r\n                    CaptureVisionRouter._onLog(`fetch image calculate time: ${time}`);\r\n            }\r\n            if (CaptureVisionRouter._onLog)\r\n                CaptureVisionRouter._onLog(`time finish decode: ${Date.now()}`);\r\n            if (CaptureVisionRouter._onLog)\r\n                CaptureVisionRouter._onLog(`main time: ${Date.now() - captureStartTime}`);\r\n            if (CaptureVisionRouter._onLog)\r\n                CaptureVisionRouter._onLog(\"====================================================\");\r\n            this._loopReadVideoTimeoutId && clearTimeout(this._loopReadVideoTimeoutId);\r\n            if (this._minImageCaptureInterval > 0 && this._minImageCaptureInterval >= this._averageTime) {\r\n                this._loopReadVideoTimeoutId = setTimeout(() => {\r\n                    this._loopReadVideo(templateName);\r\n                }, this._minImageCaptureInterval - this._averageTime);\r\n            }\r\n            else {\r\n                this._loopReadVideoTimeoutId = setTimeout(() => {\r\n                    this._loopReadVideo(templateName);\r\n                }, Math.max(this._minImageCaptureInterval, 0));\r\n            }\r\n        }).catch((ex) => {\r\n            __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").stopFetching();\r\n            if (ex.errorCode && ex.errorCode === 0) {\r\n                this._loopReadVideoTimeoutId && clearTimeout(this._loopReadVideoTimeoutId);\r\n                this._loopReadVideoTimeoutId = setTimeout(() => {\r\n                    __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\").startFetching();\r\n                    this._loopReadVideo(templateName);\r\n                }, Math.max(this._minImageCaptureInterval, 1000));\r\n            }\r\n            if (!(ex.message === 'platform error')) {\r\n                setTimeout(() => { throw ex; }, 0);\r\n            }\r\n        });\r\n    }\r\n    _reRunCurrnetFunc(templateName) {\r\n        this._loopReadVideoTimeoutId && clearTimeout(this._loopReadVideoTimeoutId);\r\n        this._loopReadVideoTimeoutId = setTimeout(() => {\r\n            this._loopReadVideo(templateName);\r\n        }, 0);\r\n    }\r\n    /**\r\n     * Processes a single image or a file containing a single image to derive important information.\r\n     * @param imageOrFile Specifies the image or file to be processed. The following data types are accepted: `Blob`, `HTMLImageElement`, `HTMLCanvasElement`, `HTMLVideoElement`, `DSImageData`, `string`.\r\n     * @param templateName [Optional] Specifies a \"CaptureVisionTemplate\" to use.\r\n     *\r\n     * @returns A promise that resolves with a `CapturedResult` object which contains the derived information from the image processed.\r\n     */\r\n    async capture(imageOrFile, templateName) {\r\n        var _a, _b;\r\n        checkIsDisposed(this);\r\n        if (!templateName)\r\n            templateName = this._currentSettings.CaptureVisionTemplates[0].Name;\r\n        const tasks = await this.containsTask(templateName);\r\n        await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)(tasks);\r\n        if (tasks.includes(\"dlr\") && !((_a = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.dlr) === null || _a === void 0 ? void 0 : _a.bLoadConfusableCharsData)) {\r\n            const _engineResourcePaths = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.handleEngineResourcePaths)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule.engineResourcePaths, dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths);\r\n            await ((_b = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.dlr) === null || _b === void 0 ? void 0 : _b.loadRecognitionData(\"ConfusableChars\", _engineResourcePaths.dlr));\r\n        }\r\n        let result;\r\n        __classPrivateFieldSet(this, _CaptureVisionRouter_isScanner, false, \"f\");\r\n        if ((0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._isDSImageData)(imageOrFile)) {\r\n            result = await this._captureDsimage(imageOrFile, templateName);\r\n        }\r\n        else if (typeof imageOrFile === \"string\") {\r\n            if (imageOrFile.substring(0, 11) == \"data:image/\") {\r\n                result = await this._captureBase64(imageOrFile, templateName);\r\n            }\r\n            else {\r\n                result = await this._captureUrl(imageOrFile, templateName);\r\n            }\r\n        }\r\n        else if (imageOrFile instanceof Blob) {\r\n            result = await this._captureBlob(imageOrFile, templateName);\r\n        }\r\n        else if (imageOrFile instanceof HTMLImageElement) {\r\n            result = await this._captureImage(imageOrFile, templateName);\r\n        }\r\n        else if (imageOrFile instanceof HTMLCanvasElement) {\r\n            result = await this._captureCanvas(imageOrFile, templateName);\r\n        }\r\n        else if (imageOrFile instanceof HTMLVideoElement) {\r\n            result = await this._captureVideo(imageOrFile, templateName);\r\n        }\r\n        else {\r\n            throw new TypeError(\"'capture(imageOrFile, templateName)': Type of 'imageOrFile' should be 'DSImageData', 'Url', 'Base64', 'Blob', 'HTMLImageElement', 'HTMLCanvasElement', 'HTMLVideoElement'.\");\r\n        }\r\n        return result;\r\n    }\r\n    ;\r\n    async _captureDsimage(imageOrFile, templateName) {\r\n        return await this._captureInWorker(imageOrFile, templateName);\r\n    }\r\n    async _captureUrl(imageOrFile, templateName) {\r\n        let blob = await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.requestResource)(imageOrFile, \"blob\");\r\n        return await this._captureBlob(blob, templateName);\r\n    }\r\n    async _captureBase64(base64Str, templateName) {\r\n        base64Str = base64Str.substring(base64Str.indexOf(',') + 1);\r\n        let binaryStr = atob(base64Str);\r\n        let n = binaryStr.length;\r\n        let u8arr = new Uint8Array(n);\r\n        while (n--) {\r\n            u8arr[n] = binaryStr.charCodeAt(n);\r\n        }\r\n        return await this._captureBlob(new Blob([u8arr]), templateName);\r\n    }\r\n    async _captureBlob(imageOrFile, templateName) {\r\n        const useObjurlToDrawBlobToImg = async function (blob) {\r\n            return await new Promise((rs, rj) => {\r\n                let objUrl = URL.createObjectURL(blob);\r\n                let image = new Image();\r\n                image.src = objUrl;\r\n                image.onload = () => {\r\n                    URL.revokeObjectURL(image.dbrObjUrl); // relese memory\r\n                    rs(image);\r\n                };\r\n                image.onerror = ev => {\r\n                    rj(new Error(\"Can't convert blob to image : \" + (ev instanceof Event ? ev.type : ev)));\r\n                };\r\n            });\r\n        };\r\n        let imageBitmap = null;\r\n        let img = null;\r\n        if (typeof createImageBitmap !== \"undefined\") {\r\n            try {\r\n                imageBitmap = await createImageBitmap(imageOrFile);\r\n            }\r\n            catch (ex) {\r\n                // createImageBitmap maybe fail in a lot of sense\r\n                // although objurl can pass\r\n            }\r\n        }\r\n        if (!imageBitmap) {\r\n            img = await useObjurlToDrawBlobToImg(imageOrFile);\r\n        }\r\n        let results = await this._captureImage(imageBitmap || img, templateName);\r\n        if (imageBitmap) {\r\n            imageBitmap.close();\r\n        } // release memory\r\n        return results;\r\n    }\r\n    async _captureImage(image, templateName) {\r\n        let imgW = image instanceof HTMLImageElement ? image.naturalWidth : image.width;\r\n        let imgH = image instanceof HTMLImageElement ? image.naturalHeight : image.height;\r\n        let maxNaturalWH = Math.max(imgW, imgH);\r\n        let acceptW, acceptH;\r\n        if (maxNaturalWH > this.maxCvsSideLength) {\r\n            __classPrivateFieldSet(this, _CaptureVisionRouter_compressRate, this.maxCvsSideLength / maxNaturalWH, \"f\");\r\n            acceptW = Math.round(imgW * __classPrivateFieldGet(this, _CaptureVisionRouter_compressRate, \"f\"));\r\n            acceptH = Math.round(imgH * __classPrivateFieldGet(this, _CaptureVisionRouter_compressRate, \"f\"));\r\n        }\r\n        else {\r\n            acceptW = imgW;\r\n            acceptH = imgH;\r\n        }\r\n        if (!__classPrivateFieldGet(this, _CaptureVisionRouter_canvas, \"f\")) {\r\n            __classPrivateFieldSet(this, _CaptureVisionRouter_canvas, document.createElement('canvas'), \"f\");\r\n        }\r\n        const cvs = __classPrivateFieldGet(this, _CaptureVisionRouter_canvas, \"f\");\r\n        if (cvs.width !== acceptW || cvs.height !== acceptH) {\r\n            cvs.width = acceptW;\r\n            cvs.height = acceptH;\r\n        }\r\n        if (!cvs.ctx2d) {\r\n            cvs.ctx2d = cvs.getContext('2d', { willReadFrequently: true });\r\n        }\r\n        const ctx = cvs.ctx2d;\r\n        ctx.drawImage(image, 0, 0, imgW, imgH, 0, 0, acceptW, acceptH);\r\n        if (image.dbrObjUrl) {\r\n            URL.revokeObjectURL(image.dbrObjUrl); // relese memory\r\n        }\r\n        return await this._captureCanvas(cvs, templateName);\r\n    }\r\n    async _captureCanvas(canvas, templateName) {\r\n        if (canvas.crossOrigin && \"anonymous\" != canvas.crossOrigin) { // canvas has crossOrigin to detect if cors, is native api\r\n            throw \"cors\";\r\n        }\r\n        if ([canvas.width, canvas.height].includes(0)) {\r\n            throw Error(`The width or height of the 'canvas' is 0.`);\r\n        }\r\n        const ctx = canvas.ctx2d || canvas.getContext(\"2d\", { willReadFrequently: true });\r\n        const imgData = Uint8Array.from(ctx.getImageData(0, 0, canvas.width, canvas.height).data);\r\n        const DsImageData = {\r\n            bytes: imgData,\r\n            width: canvas.width,\r\n            height: canvas.height,\r\n            stride: canvas.width * 4,\r\n            format: 10,\r\n        };\r\n        return await this._captureInWorker(DsImageData, templateName);\r\n    }\r\n    async _captureVideo(video, templateName) {\r\n        if (video.crossOrigin && \"anonymous\" != video.crossOrigin) {\r\n            throw \"cors\";\r\n        }\r\n        let imgW = video.videoWidth;\r\n        let imgH = video.videoHeight;\r\n        let maxNaturalWH = Math.max(imgW, imgH);\r\n        let acceptW, acceptH;\r\n        if (maxNaturalWH > this.maxCvsSideLength) {\r\n            __classPrivateFieldSet(this, _CaptureVisionRouter_compressRate, this.maxCvsSideLength / maxNaturalWH, \"f\");\r\n            acceptW = Math.round(imgW * __classPrivateFieldGet(this, _CaptureVisionRouter_compressRate, \"f\"));\r\n            acceptH = Math.round(imgH * __classPrivateFieldGet(this, _CaptureVisionRouter_compressRate, \"f\"));\r\n        }\r\n        else {\r\n            acceptW = imgW;\r\n            acceptH = imgH;\r\n        }\r\n        if (!__classPrivateFieldGet(this, _CaptureVisionRouter_canvas, \"f\")) {\r\n            __classPrivateFieldSet(this, _CaptureVisionRouter_canvas, document.createElement('canvas'), \"f\");\r\n        }\r\n        const cvs = __classPrivateFieldGet(this, _CaptureVisionRouter_canvas, \"f\");\r\n        if (cvs.width !== acceptW || cvs.height !== acceptH) {\r\n            cvs.width = acceptW;\r\n            cvs.height = acceptH;\r\n        }\r\n        if (!cvs.ctx2d) {\r\n            cvs.ctx2d = cvs.getContext('2d', { willReadFrequently: true });\r\n        }\r\n        const ctx = cvs.ctx2d;\r\n        ctx.drawImage(video, 0, 0, imgW, imgH, 0, 0, acceptW, acceptH);\r\n        return await this._captureCanvas(cvs, templateName);\r\n    }\r\n    async _captureInWorker(DsImageData, templateName) {\r\n        const { bytes, width, height, stride, format } = DsImageData;\r\n        let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n        const p = new MutablePromise();\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n            var _a, _b;\r\n            if (body.success) {\r\n                const getResultFromWorkerTime = Date.now();\r\n                if (CaptureVisionRouter._onLog) {\r\n                    CaptureVisionRouter._onLog(`get result time from worker: ${getResultFromWorkerTime}`);\r\n                    CaptureVisionRouter._onLog(`worker to main time consume: ${getResultFromWorkerTime - body.workerReturnMsgTime}`);\r\n                }\r\n                try {\r\n                    const captureResult = body.captureResult;\r\n                    if (captureResult.errorCode !== 0) {\r\n                        let error = new Error(captureResult.errorString);\r\n                        error.errorCode = captureResult.errorCode;\r\n                        return p.reject(error);\r\n                    }\r\n                    DsImageData.bytes = body.bytes;\r\n                    for (let item of captureResult.items) {\r\n                        if (__classPrivateFieldGet(this, _CaptureVisionRouter_compressRate, \"f\") !== 0) {\r\n                            convertCoordinates(item, __classPrivateFieldGet(this, _CaptureVisionRouter_compressRate, \"f\"));\r\n                        }\r\n                        if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_ORIGINAL_IMAGE) {\r\n                            item.imageData = DsImageData;\r\n                        }\r\n                        else if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_NORMALIZED_IMAGE) {\r\n                            (_a = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.ddn) === null || _a === void 0 ? void 0 : _a.handleNormalizedImageResultItem(item);\r\n                        }\r\n                        else if (item.type === dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumCapturedResultItemType.CRIT_PARSED_RESULT) {\r\n                            (_b = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.dcp) === null || _b === void 0 ? void 0 : _b.handleParsedResultItem(item);\r\n                        }\r\n                    }\r\n                    if (__classPrivateFieldGet(this, _CaptureVisionRouter_isScanner, \"f\")) {\r\n                        for (let filter of __classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\")) {\r\n                            filter.onDecodedBarcodesReceived(captureResult);\r\n                            filter.onRecognizedTextLinesReceived(captureResult);\r\n                            filter.onDetectedQuadsReceived(captureResult);\r\n                            filter.onNormalizedImagesReceived(captureResult);\r\n                        }\r\n                    }\r\n                    const resultsForDraw = handleResultForDraw(captureResult);\r\n                    resultsForDraw.barcodeResultItems.length && (captureResult.barcodeResultItems = resultsForDraw.barcodeResultItems);\r\n                    resultsForDraw.textLineResultItems.length && (captureResult.textLineResultItems = resultsForDraw.textLineResultItems);\r\n                    resultsForDraw.detectedQuadResultItems.length && (captureResult.detectedQuadResultItems = resultsForDraw.detectedQuadResultItems);\r\n                    resultsForDraw.normalizedImageResultItems.length && (captureResult.normalizedImageResultItems = resultsForDraw.normalizedImageResultItems);\r\n                    resultsForDraw.parsedResultItems.length && (captureResult.parsedResultItems = resultsForDraw.parsedResultItems);\r\n                    if (!this._isPauseScan || !__classPrivateFieldGet(this, _CaptureVisionRouter_isScanner, \"f\")) {\r\n                        const irs = captureResult.intermediateResult; // irs => intermediateResults\r\n                        if (irs) {\r\n                            let irrSetCount = 0;\r\n                            for (let irr of __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\")._intermediateResultReceiverSet) {\r\n                                irrSetCount++;\r\n                                for (let cb of irs) {\r\n                                    if (cb.info.callbackName === \"onTaskResultsReceived\") {\r\n                                        for (let unit of cb.intermediateResultUnits) {\r\n                                            unit.originalImageTag = DsImageData.tag ? DsImageData.tag : null;\r\n                                        }\r\n                                        if (irr[cb.info.callbackName]) {\r\n                                            irr[cb.info.callbackName]({ intermediateResultUnits: cb.intermediateResultUnits }, cb.info);\r\n                                        }\r\n                                    }\r\n                                    else {\r\n                                        if (irr[cb.info.callbackName]) {\r\n                                            irr[cb.info.callbackName](cb.result, cb.info);\r\n                                        }\r\n                                    }\r\n                                    if (irrSetCount === __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\")._intermediateResultReceiverSet.size) {\r\n                                        delete cb.info.callbackName;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    captureResult && captureResult.hasOwnProperty(\"intermediateResult\") && delete captureResult.intermediateResult;\r\n                    __classPrivateFieldSet(this, _CaptureVisionRouter_compressRate, 0, \"f\");\r\n                    return p.resolve(captureResult);\r\n                }\r\n                catch (ex) {\r\n                    return p.reject(ex);\r\n                }\r\n            }\r\n            else {\r\n                let ex = new Error(body.message);\r\n                ex.stack = body.stack + '\\n' + ex.stack;\r\n                return p.reject(ex);\r\n            }\r\n        };\r\n        if (CaptureVisionRouter._onLog) {\r\n            CaptureVisionRouter._onLog(`send buffer to worker: ${Date.now()}`);\r\n        }\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n            type: \"cvr_capture\",\r\n            id: taskID,\r\n            instanceID: this._instanceID,\r\n            body: {\r\n                bytes,\r\n                width,\r\n                height,\r\n                stride,\r\n                format,\r\n                templateName: templateName ? templateName : \"\",\r\n                isScanner: __classPrivateFieldGet(this, _CaptureVisionRouter_isScanner, \"f\")\r\n            }\r\n        }, [bytes.buffer]);\r\n        return p;\r\n    }\r\n    ;\r\n    /**\r\n     * Configures runtime settings using a provided JSON string, an object, or a URL pointing to an object, which contains settings for one or more `CaptureVisionTemplates`.\r\n     * @param settings A JSON string, an object, or a URL pointing to an object that contains settings for one or more `CaptureVisionTemplates`.\r\n     *\r\n     * @returns A promise that resolves when the operation has completed. It provides an object that describes the result.\r\n     */\r\n    async initSettings(settings) {\r\n        checkIsDisposed(this);\r\n        if (!settings || ![\"string\", \"object\"].includes(typeof settings)) {\r\n            return console.error(\"Invalid template.\");\r\n        }\r\n        if (typeof settings === \"string\") {\r\n            if (!settings.startsWith(\"{\")) {\r\n                settings = await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.requestResource)(settings, \"text\");\r\n            }\r\n            this._currentSettings = JSON.parse(settings);\r\n        }\r\n        else if (typeof settings === \"object\") {\r\n            this._currentSettings = settings;\r\n            settings = JSON.stringify(settings);\r\n        }\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    const response = JSON.parse(body.response);\r\n                    if (response.exception !== 0) {\r\n                        let error = new Error(response.description ? response.description : \"Init Settings Failed.\");\r\n                        error.errorCode = response.exception;\r\n                        return rj(error);\r\n                    }\r\n                    let modules = [];\r\n                    let templateNames = JSON.parse(settings).CaptureVisionTemplates;\r\n                    for (let i = 0; i < templateNames.length; i++) {\r\n                        let tasks = await this.containsTask(templateNames[i].Name);\r\n                        modules = modules.concat(tasks);\r\n                    }\r\n                    await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)([...new Set(modules)]);\r\n                    this._isOutputOriginalImage = (this._currentSettings.CaptureVisionTemplates[0].OutputOriginalImage === 1);\r\n                    return rs(response);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_initSettings\",\r\n                id: taskID,\r\n                instanceID: this._instanceID,\r\n                body: { settings },\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Returns an object that contains settings for the specified `CaptureVisionTemplate`.\r\n     * @param templateName Specifies a `CaptureVisionTemplate` by its name. If passed \"*\", the returned object will contain all templates.\r\n     *\r\n     * @returns A promise that resolves with the object that contains settings for the specified template or all templates.\r\n     */\r\n    async outputSettings(templateName) {\r\n        checkIsDisposed(this);\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    const settings = JSON.parse(body.settings);\r\n                    if (settings.errorCode !== 0) {\r\n                        let error = new Error(settings.errorString);\r\n                        error.errorCode = settings.errorCode;\r\n                        return rj(error);\r\n                    }\r\n                    delete settings.errorCode;\r\n                    delete settings.errorString;\r\n                    return rs(settings);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_outputSettings\",\r\n                id: taskID,\r\n                instanceID: this._instanceID,\r\n                body: {\r\n                    templateName: templateName ? templateName : \"*\"\r\n                }\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Generates a Blob object or initiates a JSON file download containing the settings for the specified `CaptureVisionTemplate`.\r\n     * @param templateName Specifies a `CaptureVisionTemplate` by its name. If passed \"*\", the returned object will contain all templates.\r\n     * @param fileName Specifies the name of the file.\r\n     * @param download Boolean that specifies whether to initiates a file download.\r\n     *\r\n     * @returns A promise that resolves with the Blob object that contains settings for the specified template or all templates.\r\n     */\r\n    async outputSettingsToFile(templateName, fileName, download) {\r\n        const settings = await this.outputSettings(templateName);\r\n        const jsonBlob = new Blob([JSON.stringify(settings, null, 2, function (_, value) {\r\n                if (value instanceof Array) {\r\n                    return JSON.stringify(value);\r\n                }\r\n                else {\r\n                    return value;\r\n                }\r\n            }, 2)], { type: \"application/json\" });\r\n        if (download) {\r\n            const downloadLink = document.createElement(\"a\");\r\n            downloadLink.href = URL.createObjectURL(jsonBlob);\r\n            if (fileName.endsWith(\".json\")) {\r\n                fileName = fileName.replace(\".json\", \"\");\r\n            }\r\n            downloadLink.download = `${fileName}.json`;\r\n            downloadLink.onclick = () => {\r\n                setTimeout(() => {\r\n                    URL.revokeObjectURL(downloadLink.href);\r\n                }, 500);\r\n            };\r\n            downloadLink.click();\r\n        }\r\n        return jsonBlob;\r\n    }\r\n    /**\r\n     * Retrieves a JSON object that contains simplified settings for the specified `CaptureVisionTemplate`.\r\n     * @param templateName Specifies a `CaptureVisionTemplate` by its name.\r\n     *\r\n     * @returns A promise that resolves with a JSON object, of type `SimplifiedCaptureVisionSettings`, which represents the simplified settings for the specified template.\r\n     * @remarks If the settings of the specified template are too complex, we cannot create a SimplifiedCaptureVisionSettings, and as a result, it will return an error.\r\n     */\r\n    async getSimplifiedSettings(templateName) {\r\n        checkIsDisposed(this);\r\n        if (!templateName)\r\n            templateName = this._currentSettings.CaptureVisionTemplates[0].Name;\r\n        const tasks = await this.containsTask(templateName);\r\n        await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)(tasks);\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    const result = JSON.parse(body.settings, (k, v) => {\r\n                        if (k === \"barcodeFormatIds\") {\r\n                            return BigInt(v);\r\n                        }\r\n                        return v;\r\n                    });\r\n                    result.minImageCaptureInterval = this._minImageCaptureInterval;\r\n                    if (result.code !== 0) {\r\n                        let error = new Error(result.codeString);\r\n                        error.errorCode = result.errorCode;\r\n                        return rj(error);\r\n                    }\r\n                    delete result.code;\r\n                    delete result.codeString;\r\n                    return rs(result);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_getSimplifiedSettings\",\r\n                id: taskID,\r\n                instanceID: this._instanceID,\r\n                body: { templateName }\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Updates the specified `CaptureVisionTemplate` with an updated `SimplifiedCaptureVisionSettings` object.\r\n     * @param templateName Specifies a `CaptureVisionTemplate` by its name.\r\n     * @param settings The `SimplifiedCaptureVisionSettings` object that contains updated settings.\r\n     *\r\n     * @returns A promise that resolves when the operation has completed. It provides an object that describes the result.\r\n     */\r\n    async updateSettings(templateName, settings) {\r\n        checkIsDisposed(this);\r\n        const tasks = await this.containsTask(templateName);\r\n        await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)(tasks);\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    const response = JSON.parse(body.response);\r\n                    if (settings.minImageCaptureInterval && settings.minImageCaptureInterval >= -1) {\r\n                        this._minImageCaptureInterval = settings.minImageCaptureInterval;\r\n                    }\r\n                    this._isOutputOriginalImage = body.isOutputOriginalImage;\r\n                    if (response.exception !== 0) {\r\n                        let error = new Error(response.description ? response.description : \"Update Settings Failed.\");\r\n                        error.errorCode = response.exception;\r\n                        return rj(error);\r\n                    }\r\n                    this._currentSettings = await this.outputSettings(\"*\");\r\n                    return rs(response);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_updateSettings\",\r\n                id: taskID,\r\n                instanceID: this._instanceID,\r\n                body: {\r\n                    settings,\r\n                    templateName\r\n                }\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Restores all runtime settings to their original default values.\r\n     *\r\n     * @returns A promise that resolves when the operation has completed. It provides an object that describes the result.\r\n     */\r\n    async resetSettings() {\r\n        checkIsDisposed(this);\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    const response = JSON.parse(body.response);\r\n                    if (response.exception !== 0) {\r\n                        let error = new Error(response.description ? response.description : \"Reset Settings Failed.\");\r\n                        error.errorCode = response.exception;\r\n                        return rj(error);\r\n                    }\r\n                    this._currentSettings = await this.outputSettings(\"*\");\r\n                    return rs(response);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_resetSettings\",\r\n                id: taskID,\r\n                instanceID: this._instanceID\r\n            });\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * Returns an object, of type `BufferedItemsManager`, that manages buffered items.\r\n     * @returns The `BufferedItemsManager` object.\r\n     */\r\n    getBufferedItemsManager() {\r\n        if (!__classPrivateFieldGet(this, _CaptureVisionRouter_bufferdItemsManager, \"f\")) {\r\n            __classPrivateFieldSet(this, _CaptureVisionRouter_bufferdItemsManager, new BufferedItemsManager(this), \"f\");\r\n        }\r\n        return __classPrivateFieldGet(this, _CaptureVisionRouter_bufferdItemsManager, \"f\");\r\n    }\r\n    /**\r\n     * Returns an object, of type `IntermediateResultManager`, that manages intermediate results.\r\n     *\r\n     * @returns The `IntermediateResultManager` object.\r\n     */\r\n    getIntermediateResultManager() {\r\n        checkIsDisposed(this);\r\n        if (!__classPrivateFieldGet(this, _CaptureVisionRouter_innerUseTag, \"f\") && dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule.bSupportIRTModule !== 0) {\r\n            throw new Error(\"The current license does not support the use of intermediate results.\");\r\n        }\r\n        if (!__classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\")) {\r\n            __classPrivateFieldSet(this, _CaptureVisionRouter_intermediateResultManager, new IntermediateResultManager(this), \"f\");\r\n        }\r\n        return __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\");\r\n    }\r\n    ;\r\n    async parseRequiredResources(templateName) {\r\n        checkIsDisposed(this);\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    return rs(JSON.parse(body.resources));\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_parseRequiredResources\",\r\n                id: taskID,\r\n                instanceID: this._instanceID,\r\n                body: {\r\n                    templateName\r\n                }\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Releases all resources used by the `CaptureVisionRouter` instance.\r\n     *\r\n     * @returns A promise that resolves when the resources have been successfully released. It does not provide any value upon resolution.\r\n     */\r\n    async dispose() {\r\n        checkIsDisposed(this);\r\n        if (__classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\")) {\r\n            this.stopCapturing();\r\n        }\r\n        __classPrivateFieldSet(this, _CaptureVisionRouter_isa, null, \"f\");\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\").clear();\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_isaStateListenerSet, \"f\").clear();\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\").clear();\r\n        __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\")._intermediateResultReceiverSet.clear();\r\n        __classPrivateFieldSet(this, _CaptureVisionRouter_isDestroyed, true, \"f\");\r\n        // this._captureStateListenerSet.clear();\r\n        let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = (body) => {\r\n            if (body.success) ;\r\n            else {\r\n                let ex = new Error(body.message);\r\n                ex.stack = body.stack + '\\n' + ex.stack;\r\n                throw ex;\r\n            }\r\n        };\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n            type: 'cvr_dispose',\r\n            id: taskID,\r\n            instanceID: this._instanceID\r\n        });\r\n    }\r\n    ;\r\n    /**\r\n     * For Debug\r\n     */\r\n    _getInternalData() {\r\n        return {\r\n            isa: __classPrivateFieldGet(this, _CaptureVisionRouter_isa, \"f\"),\r\n            promiseStartScan: __classPrivateFieldGet(this, _CaptureVisionRouter_promiseStartScan, \"f\"),\r\n            intermediateResultManager: __classPrivateFieldGet(this, _CaptureVisionRouter_intermediateResultManager, \"f\"),\r\n            bufferdItemsManager: __classPrivateFieldGet(this, _CaptureVisionRouter_bufferdItemsManager, \"f\"),\r\n            resultReceiverSet: __classPrivateFieldGet(this, _CaptureVisionRouter_resultReceiverSet, \"f\"),\r\n            isaStateListenerSet: __classPrivateFieldGet(this, _CaptureVisionRouter_isaStateListenerSet, \"f\"),\r\n            resultFilterSet: __classPrivateFieldGet(this, _CaptureVisionRouter_resultFilterSet, \"f\"),\r\n            compressRate: __classPrivateFieldGet(this, _CaptureVisionRouter_compressRate, \"f\"),\r\n            canvas: __classPrivateFieldGet(this, _CaptureVisionRouter_canvas, \"f\"),\r\n            isScanner: __classPrivateFieldGet(this, _CaptureVisionRouter_isScanner, \"f\"),\r\n            innerUseTag: __classPrivateFieldGet(this, _CaptureVisionRouter_innerUseTag, \"f\"),\r\n            isDestroyed: __classPrivateFieldGet(this, _CaptureVisionRouter_isDestroyed, \"f\")\r\n        };\r\n    }\r\n    async _getWasmFilterState() {\r\n        return await new Promise((rs, rj) => {\r\n            let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n                if (body.success) {\r\n                    const response = JSON.parse(body.response);\r\n                    return rs(response);\r\n                }\r\n                else {\r\n                    let ex = new Error(body.message);\r\n                    ex.stack = body.stack + '\\n' + ex.stack;\r\n                    return rj(ex);\r\n                }\r\n            };\r\n            dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n                type: \"cvr_getWasmFilterState\",\r\n                id: taskID,\r\n                instanceID: this._instanceID\r\n            });\r\n        });\r\n    }\r\n}\r\n_CaptureVisionRouter_isa = new WeakMap(), _CaptureVisionRouter_canvas = new WeakMap(), _CaptureVisionRouter_promiseStartScan = new WeakMap(), _CaptureVisionRouter_intermediateResultManager = new WeakMap(), _CaptureVisionRouter_bufferdItemsManager = new WeakMap(), _CaptureVisionRouter_resultReceiverSet = new WeakMap(), _CaptureVisionRouter_isaStateListenerSet = new WeakMap(), _CaptureVisionRouter_resultFilterSet = new WeakMap(), _CaptureVisionRouter_compressRate = new WeakMap(), _CaptureVisionRouter_isScanner = new WeakMap(), _CaptureVisionRouter_innerUseTag = new WeakMap(), _CaptureVisionRouter_isDestroyed = new WeakMap();\r\nasync function _enableResultCrossVerification(cvr, verificationEnabled) {\r\n    checkIsDisposed(cvr);\r\n    return await new Promise((rs, rj) => {\r\n        let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n            if (body.success) {\r\n                return rs(body.result);\r\n            }\r\n            else {\r\n                let ex = new Error(body.message);\r\n                ex.stack = body.stack + '\\n' + ex.stack;\r\n                return rj(ex);\r\n            }\r\n        };\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n            type: \"cvr_enableResultCrossVerification\",\r\n            id: taskID,\r\n            instanceID: cvr._instanceID,\r\n            body: {\r\n                verificationEnabled\r\n            }\r\n        });\r\n    });\r\n}\r\nasync function _enableResultDeduplication(cvr, duplicateFilterEnabled) {\r\n    checkIsDisposed(cvr);\r\n    return await new Promise((rs, rj) => {\r\n        let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n            if (body.success) {\r\n                return rs(body.result);\r\n            }\r\n            else {\r\n                let ex = new Error(body.message);\r\n                ex.stack = body.stack + '\\n' + ex.stack;\r\n                return rj(ex);\r\n            }\r\n        };\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n            type: \"cvr_enableResultDeduplication\",\r\n            id: taskID,\r\n            instanceID: cvr._instanceID,\r\n            body: {\r\n                duplicateFilterEnabled\r\n            }\r\n        });\r\n    });\r\n}\r\nasync function _setDuplicateForgetTime(cvr, duplicateForgetTime) {\r\n    checkIsDisposed(cvr);\r\n    return await new Promise((rs, rj) => {\r\n        let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n            if (body.success) {\r\n                return rs(body.result);\r\n            }\r\n            else {\r\n                let ex = new Error(body.message);\r\n                ex.stack = body.stack + '\\n' + ex.stack;\r\n                return rj(ex);\r\n            }\r\n        };\r\n        dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n            type: \"cvr_setDuplicateForgetTime\",\r\n            id: taskID,\r\n            instanceID: cvr._instanceID,\r\n            body: {\r\n                duplicateForgetTime\r\n            }\r\n        });\r\n    });\r\n}\r\nasync function _clearVerifyList(cvr) {\r\n    let taskID = (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();\r\n    const p = new MutablePromise();\r\n    dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[taskID] = async (body) => {\r\n        if (body.success) {\r\n            return p.resolve();\r\n        }\r\n        else {\r\n            let ex = new Error(body.message);\r\n            ex.stack = body.stack + '\\n' + ex.stack;\r\n            return p.reject(ex);\r\n        }\r\n    };\r\n    dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({\r\n        type: \"cvr_clearVerifyList\",\r\n        id: taskID,\r\n        instanceID: cvr._instanceID\r\n    });\r\n    return p;\r\n}\n\n// TODO\r\nclass CapturedResultReceiver {\r\n    constructor() {\r\n        /**\r\n         * Event triggered when a generic captured result is available, occurring each time an image finishes its processing.\r\n         * This event can be used for any result that does not fit into the specific categories of the other callback events.\r\n         * @param result The captured result, an instance of `CapturedResult`.\r\n         */\r\n        this.onCapturedResultReceived = null;\r\n        /**\r\n         * Event triggered when the original image result is available.\r\n         * This event is used to handle the original image captured by an image source such as Dynamsoft Camera Enhancer.\r\n         * @param result The original image result, an instance of `OriginalImageResultItem`.\r\n         */\r\n        this.onOriginalImageResultReceived = null;\r\n    }\r\n}\n\nclass IntermediateResultReceiver {\r\n    constructor() {\r\n        this._observedResultUnitTypes = dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.EnumIntermediateResultUnitType.IRUT_ALL;\r\n        this._observedTaskMap = new Map();\r\n        this._parameters = {\r\n            setObservedResultUnitTypes: (types) => {\r\n                this._observedResultUnitTypes = types;\r\n            },\r\n            getObservedResultUnitTypes: () => {\r\n                return this._observedResultUnitTypes;\r\n            },\r\n            isResultUnitTypeObserved: (type) => {\r\n                return !!(type & this._observedResultUnitTypes);\r\n            },\r\n            addObservedTask: (taskName) => {\r\n                this._observedTaskMap.set(taskName, true);\r\n            },\r\n            removeObservedTask: (taskName) => {\r\n                this._observedTaskMap.set(taskName, false);\r\n            },\r\n            isTaskObserved: (taskName) => {\r\n                if (this._observedTaskMap.size === 0)\r\n                    return true;\r\n                return !!(this._observedTaskMap.get(taskName));\r\n            }\r\n        };\r\n        this.onTaskResultsReceived = null;\r\n        // section\r\n        this.onPredetectedRegionsReceived = null;\r\n        // The remaining callback definitions will be automatically injected when imported into other modules\r\n        // stage\r\n        this.onColourImageUnitReceived = null;\r\n        this.onScaledDownColourImageUnitReceived = null;\r\n        this.onGrayscaleImageUnitReceived = null;\r\n        this.onTransformedGrayscaleImageUnitReceived = null;\r\n        this.onEnhancedGrayscaleImageUnitReceived = null;\r\n        this.onBinaryImageUnitReceived = null;\r\n        this.onTextureDetectionResultUnitReceived = null;\r\n        this.onTextureRemovedGrayscaleImageUnitReceived = null;\r\n        this.onTextureRemovedBinaryImageUnitReceived = null;\r\n        this.onContoursUnitReceived = null;\r\n        this.onLineSegmentsUnitReceived = null;\r\n        this.onTextZonesUnitReceived = null;\r\n        this.onTextRemovedBinaryImageUnitReceived = null;\r\n        this.onShortLinesUnitReceived = null;\r\n        // The remaining callback definitions will be automatically injected when imported into other modules\r\n    }\r\n    /**\r\n     * Gets the observed parameters of the intermediate result receiver. Allowing for configuration of intermediate result observation.\r\n     * @return The observed parameters, of type ObservationParameters. The default parameters are to observe all intermediate result unit types and all tasks.\r\n     */\r\n    getObservationParameters() {\r\n        return this._parameters;\r\n    }\r\n}\n\nvar EnumPresetTemplate;\r\n(function (EnumPresetTemplate) {\r\n    /**\r\n     * @brief Versatile function for barcode reading, document detection, or text recognition.\r\n     */\r\n    EnumPresetTemplate[\"PT_DEFAULT\"] = \"Default\";\r\n    /**\r\n     * @brief Scans a single barcode.\r\n     */\r\n    EnumPresetTemplate[\"PT_READ_BARCODES\"] = \"ReadBarcodes_Default\";\r\n    /**\r\n     * @brief Identifies and reads any text present.\r\n     */\r\n    EnumPresetTemplate[\"PT_RECOGNIZE_TEXT_LINES\"] = \"RecognizeTextLines_Default\";\r\n    /**\r\n     * @brief RIdentifies the edges of a document.\r\n     */\r\n    EnumPresetTemplate[\"PT_DETECT_DOCUMENT_BOUNDARIES\"] = \"DetectDocumentBoundaries_Default\";\r\n    /**\r\n     * @brief Detects document edges and standardizes its format.\r\n     */\r\n    EnumPresetTemplate[\"PT_DETECT_AND_NORMALIZE_DOCUMENT\"] = \"DetectAndNormalizeDocument_Default\";\r\n    /**\r\n     * @brief Adjusts a document to a standard format using detected borders.\r\n     */\r\n    EnumPresetTemplate[\"PT_NORMALIZE_DOCUMENT\"] = \"NormalizeDocument_Default\";\r\n    /**\r\n     * @brief Represents a barcode reading mode where speed is prioritized.\r\n     *\r\n     * In this mode, the barcode reader will optimize for faster barcode detection\r\n     * and decoding, sacrificing some level of accuracy and read rate. It is suitable\r\n     * for situations where a quick response time is more important than perfect\r\n     * barcode recognition.\r\n     */\r\n    EnumPresetTemplate[\"PT_READ_BARCODES_SPEED_FIRST\"] = \"ReadBarcodes_SpeedFirst\";\r\n    /**\r\n     * @brief Represents a barcode reading mode where barcode read rate is prioritized.\r\n     *\r\n     * In this mode, the barcode reader will optimize for higher barcode read rates,\r\n     * even if it may sometimes result in reduced accuracy and speed. It is suitable for\r\n     * scenarios where maximizing the number of successfully read barcodes is critical.\r\n     */\r\n    EnumPresetTemplate[\"PT_READ_BARCODES_READ_RATE_FIRST\"] = \"ReadBarcodes_ReadRateFirst\";\r\n    /**\r\n     * @brief Represents a balanced barcode reading mode.\r\n     *\r\n     * This mode aims for a reasonable balance between speed and read rate in barcode\r\n     * recognition. It is suitable for most common use cases where a compromise between\r\n     * speed and read rate is acceptable.\r\n     */\r\n    EnumPresetTemplate[\"PT_READ_BARCODES_BALANCE\"] = \"ReadBarcodes_Balance\";\r\n    /**\r\n    * @brief Represents a barcode reading mode for single barcode code detection.\r\n    *\r\n    * In this mode, the barcode reader will focus on detecting and decoding a single\r\n    * barcode code, ignoring any additional codes in the same image. It is efficient\r\n    * when the target image has only one barcode.\r\n    */\r\n    EnumPresetTemplate[\"PT_READ_SINGLE_BARCODE\"] = \"ReadBarcodes_Balanced\";\r\n    /**\r\n     * @brief Represents a barcode reading mode optimized for dense barcode codes.\r\n     *\r\n     * This mode is designed to handle dense or closely packed barcode codes where\r\n     * accuracy is paramount. It may operate slower than other modes but is suitable\r\n     * for challenging scenarios where code density is high.\r\n     */\r\n    EnumPresetTemplate[\"PT_READ_DENSE_BARCODES\"] = \"ReadDenseBarcodes\";\r\n    /**\r\n     * @brief Represents a barcode reading mode optimized for distant barcode codes.\r\n     *\r\n     * This mode is designed to scanning a barcode that is placed far from the device.\r\n     */\r\n    EnumPresetTemplate[\"PT_READ_DISTANT_BARCODES\"] = \"ReadDistantBarcodes\";\r\n    /**\r\n    * @brief Represents a text recognition mode focused on recognizing numbers.\r\n    */\r\n    EnumPresetTemplate[\"PT_RECOGNIZE_NUMBERS\"] = \"RecognizeNumbers\";\r\n    /**\r\n     * @brief Represents a text recognition mode focused on recognizing alphabetic characters (letters).\r\n     *\r\n     */\r\n    EnumPresetTemplate[\"PT_RECOGNIZE_LETTERS\"] = \"RecognizeLetters\";\r\n    /**\r\n     * @brief Represents a text recognition mode that combines numbers and alphabetic characters (letters) recognition.\r\n     */\r\n    EnumPresetTemplate[\"PT_RECOGNIZE_NUMBERS_AND_LETTERS\"] = \"RecognizeNumbersAndLetters\";\r\n    /**\r\n     * @brief Represents a text recognition mode that combines numbers and uppercase letters recognition.\r\n     */\r\n    EnumPresetTemplate[\"PT_RECOGNIZE_NUMBERS_AND_UPPERCASE_LETTERS\"] = \"RecognizeNumbersAndUppercaseLetters\";\r\n    /**\r\n     * @brief Represents a text recognition mode focused on recognizing uppercase letters.\r\n     */\r\n    EnumPresetTemplate[\"PT_RECOGNIZE_UPPERCASE_LETTERS\"] = \"RecognizeUppercaseLetters\";\r\n})(EnumPresetTemplate || (EnumPresetTemplate = {}));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9keW5hbXNvZnQtY2FwdHVyZS12aXNpb24tcm91dGVyL2Rpc3QvY3ZyLmVzbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDb1c7O0FBRXBXO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkIsc0JBQXNCO0FBQ3RCLHdCQUF3QjtBQUN4Qix1QkFBdUI7QUFDdkIsaUJBQWlCO0FBQ2pCO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQjtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsVUFBVTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywrQkFBK0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDZEQUFhO0FBQ3RDLFlBQVksMkRBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrREFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNkRBQWE7QUFDdEMsWUFBWSwyREFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGtEQUFNO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw2REFBYTtBQUN0QyxZQUFZLDJEQUFlO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0RBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNkRBQWE7QUFDdEMsWUFBWSwyREFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGtEQUFNO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDZEQUFhO0FBQ3RDLFlBQVksMkRBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrREFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0U7QUFDaEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsOERBQWtCLFNBQVM7QUFDM0IsK0RBQW1CLFNBQVM7QUFDNUIsOERBQWtCO0FBQ2xCO0FBQ0EsdUJBQXVCLDhEQUFrQixRQUFRLDhEQUFjLENBQUMsOERBQWtCO0FBQ2xGLElBQUksOERBQWtCLFNBQVMsK0ZBQStGLFdBQVc7QUFDekk7QUFDQTtBQUNBLEtBQUssOERBQWtCLDJCQUEyQiw4REFBa0IsUUFBUSw4REFBYyxDQUFDLDhEQUFrQjtBQUM3RyxJQUFJLDhEQUFrQixTQUFTLDZGQUE2RixXQUFXO0FBQ3ZJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxTQUFTLFdBQVcsTUFBTSx5REFBYSxxREFBcUQ7O0FBRXBJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxvREFBb0Q7O0FBRXJEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHNFQUEwQjtBQUNwRDtBQUNBO0FBQ0EsK0JBQStCLHNFQUEwQjtBQUN6RDtBQUNBO0FBQ0EsK0JBQStCLHNFQUEwQjtBQUN6RDtBQUNBO0FBQ0EsK0JBQStCLHNFQUEwQjtBQUN6RDtBQUNBO0FBQ0EsK0JBQStCLHNFQUEwQjtBQUN6RDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDRFQUE0RSxzREFBVTtBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSw4REFBa0I7QUFDL0I7QUFDQTtBQUNBLGNBQWMsOERBQWtCO0FBQ2hDLGNBQWMsd0RBQVE7QUFDdEI7QUFDQTtBQUNBLHFCQUFxQiw2REFBYTtBQUNsQyxRQUFRLDJEQUFlO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELFNBQVMsV0FBVyxNQUFNLHlEQUFhLHFEQUFxRCxVQUFVLGFBQWE7QUFDM0s7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGtEQUFNO0FBQ2Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEhBQThILG9CQUFvQjtBQUNsSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdKQUFnSix1QkFBdUIsK0NBQStDO0FBQ3ROLHlKQUF5Six1QkFBdUIsaURBQWlEO0FBQ2pPLGlKQUFpSix1QkFBdUIseURBQXlEO0FBQ2pPLDBKQUEwSix1QkFBdUIsK0RBQStEO0FBQ2hQLDJJQUEySSx1QkFBdUIsNkNBQTZDO0FBQy9NO0FBQ0E7QUFDQSxxRUFBcUUseUJBQXlCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsNkRBQWE7QUFDbEMsUUFBUSwyREFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGtEQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLHNFQUEwQjtBQUMzQyxpQkFBaUIsc0VBQTBCO0FBQzNDLGlCQUFpQixzRUFBMEI7QUFDM0MsaUJBQWlCLHNFQUEwQjtBQUMzQztBQUNBO0FBQ0EsaUJBQWlCLHNFQUEwQjtBQUMzQyxpQkFBaUIsc0VBQTBCO0FBQzNDLGlCQUFpQixzRUFBMEI7QUFDM0MsaUJBQWlCLHNFQUEwQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRkFBZ0Ysc0VBQTBCO0FBQzFHLDhFQUE4RSxzRUFBMEI7QUFDeEcsK0VBQStFLHNFQUEwQjtBQUN6RyxrRkFBa0Ysc0VBQTBCO0FBQzVHLGtEQUFrRCxzRUFBMEI7QUFDNUUscUxBQXFMLDJCQUEyQjtBQUNoTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsd0RBQVE7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsOERBQWtCO0FBQy9ELHlDQUF5Qyx5RUFBeUIsQ0FBQyxzREFBVSxzQkFBc0IsOERBQWtCO0FBQ3JILHlCQUF5Qiw4REFBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsMkZBQTJGLGdFQUFvQjtBQUMvRztBQUNBO0FBQ0EsMkZBQTJGLGdFQUFvQjtBQUMvRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHNFQUEwQjtBQUNqRTtBQUNBLGdCQUFnQixzRUFBMEI7QUFDMUM7QUFDQSxvQkFBb0Isc0VBQTBCO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw2REFBYTtBQUN0QyxZQUFZLDJEQUFlO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0RBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCO0FBQ3hCLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEZBQThGLHNFQUEwQjtBQUN4SDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw2REFBYTtBQUN0QyxZQUFZLDJEQUFlO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0RBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0VBQStFLFdBQVc7QUFDMUY7QUFDQTtBQUNBO0FBQ0EsZ0ZBQWdGLFdBQVc7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhIQUE4SCwwQkFBMEI7QUFDeEo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhGQUE4Riw4QkFBOEI7QUFDNUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLGtGQUFrRixLQUFLO0FBQ3ZGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUZBQXVGLHVCQUF1QjtBQUM5RyxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLHlGQUF5Rix1QkFBdUI7QUFDaEgsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpR0FBaUcsdUJBQXVCO0FBQ3hILGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsdUdBQXVHLHVCQUF1QjtBQUM5SCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLHFGQUFxRix1QkFBdUI7QUFDNUcsaUJBQWlCO0FBQ2pCO0FBQ0EsOEVBQThFLHVCQUF1QjtBQUNyRyxnSkFBZ0osdUJBQXVCO0FBQ3ZLLG1KQUFtSix1QkFBdUI7QUFDMUssK0pBQStKLHVCQUF1QjtBQUN0TCx3S0FBd0ssdUJBQXVCO0FBQy9MLDZJQUE2SSx1QkFBdUI7QUFDcEs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RUFBd0UsOEJBQThCO0FBQ3RHLDJFQUEyRSxpQ0FBaUM7QUFDNUcsMkVBQTJFLGlDQUFpQztBQUM1Ryw0REFBNEQsa0JBQWtCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0ZBQXdGLEtBQUs7QUFDN0Y7QUFDQSwrRkFBK0YsV0FBVztBQUMxRyxzRkFBc0YsOEJBQThCO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEIsZUFBZTtBQUNmO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSw4QkFBOEI7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EsNEVBQTRFLEtBQUs7QUFDakY7QUFDQTtBQUNBLG9KQUFvSix1QkFBdUIsaUVBQWlFLHdCQUF3QixHQUFHO0FBQ3ZRLDZKQUE2Six1QkFBdUIsbUVBQW1FLHdCQUF3QixHQUFHO0FBQ2xSLHFKQUFxSix1QkFBdUIsMkVBQTJFLHdCQUF3QixHQUFHO0FBQ2xSLDhKQUE4Six1QkFBdUIsaUZBQWlGLHdCQUF3QixHQUFHO0FBQ2pTLCtJQUErSSx1QkFBdUIsK0RBQStELHdCQUF3QixHQUFHO0FBQ2hRO0FBQ0EsbUVBQW1FLHdCQUF3QjtBQUMzRjtBQUNBLGlHQUFpRyx3QkFBd0I7QUFDekg7QUFDQSxtR0FBbUcsd0JBQXdCO0FBQzNIO0FBQ0EsMkdBQTJHLHdCQUF3QjtBQUNuSTtBQUNBLGlIQUFpSCx3QkFBd0I7QUFDekk7QUFDQSwrRkFBK0Ysd0JBQXdCO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSw4QkFBOEI7QUFDekcsOEVBQThFLGlDQUFpQztBQUMvRyw4RUFBOEUsaUNBQWlDO0FBQy9HLCtEQUErRCxrQkFBa0I7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RSxLQUFLO0FBQ25GO0FBQ0E7QUFDQSxrRUFBa0UsV0FBVztBQUM3RTtBQUNBLHlEQUF5RCw4QkFBOEI7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsbUNBQW1DLFdBQVc7QUFDOUM7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx3REFBUTtBQUN0Qiw2Q0FBNkMsOERBQWtCO0FBQy9ELHlDQUF5Qyx5RUFBeUIsQ0FBQyxzREFBVSxzQkFBc0IsOERBQWtCO0FBQ3JILHlCQUF5Qiw4REFBa0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4REFBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLCtEQUFlO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLDBCQUEwQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELDBCQUEwQjtBQUN4RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsMEJBQTBCO0FBQ3pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQix1Q0FBdUM7QUFDdkQscUJBQXFCLDZEQUFhO0FBQ2xDO0FBQ0EsUUFBUSwyREFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtFQUErRSx3QkFBd0I7QUFDdkcsK0VBQStFLG1EQUFtRDtBQUNsSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxzRUFBMEI7QUFDcEU7QUFDQTtBQUNBLCtDQUErQyxzRUFBMEI7QUFDekUsa0NBQWtDLDhEQUFrQjtBQUNwRDtBQUNBLCtDQUErQyxzRUFBMEI7QUFDekUsa0NBQWtDLDhEQUFrQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0VBQXNFO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFLHFEQUFxRDtBQUM3SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLFdBQVc7QUFDNUU7QUFDQSxRQUFRLGtEQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QyxpQ0FBaUMsK0RBQWU7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw2REFBYTtBQUN0QyxZQUFZLDJEQUFlO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQywwQkFBMEI7QUFDOUQ7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHdEQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0RBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFVBQVU7QUFDbEMsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDZEQUFhO0FBQ3RDLFlBQVksMkRBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0RBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsU0FBUywwQkFBMEI7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLFNBQVM7QUFDaEQ7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHdEQUFRO0FBQ3RCO0FBQ0EseUJBQXlCLDZEQUFhO0FBQ3RDLFlBQVksMkRBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrREFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLHdEQUFRO0FBQ3RCO0FBQ0EseUJBQXlCLDZEQUFhO0FBQ3RDLFlBQVksMkRBQWU7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0RBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5Qiw2REFBYTtBQUN0QyxZQUFZLDJEQUFlO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxrREFBTTtBQUNsQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0ZBQW9GLHNEQUFVO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNkRBQWE7QUFDdEMsWUFBWSwyREFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLGtEQUFNO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDZEQUFhO0FBQ2xDLFFBQVEsMkRBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGtEQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsNkRBQWE7QUFDdEMsWUFBWSwyREFBZTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0RBQU07QUFDbEI7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsNkRBQWE7QUFDbEMsUUFBUSwyREFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLGtEQUFNO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQiw2REFBYTtBQUNsQyxRQUFRLDJEQUFlO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsa0RBQU07QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDZEQUFhO0FBQ2xDLFFBQVEsMkRBQWU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxrREFBTTtBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBLGlCQUFpQiw2REFBYTtBQUM5QjtBQUNBLElBQUksMkRBQWU7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSxrREFBTTtBQUNWO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHdDQUF3QywwRUFBOEI7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnREFBZ0Q7O0FBRXVHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL25vZGVfbW9kdWxlcy9keW5hbXNvZnQtY2FwdHVyZS12aXNpb24tcm91dGVyL2Rpc3QvY3ZyLmVzbS5qcz80ZmVkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogRHluYW1zb2Z0IEphdmFTY3JpcHQgTGlicmFyeVxuICogQHByb2R1Y3QgRHluYW1zb2Z0IENhcHR1cmUgVmlzaW9uIFJvdXRlciBKUyBFZGl0aW9uXG4gKiBAd2Vic2l0ZSBodHRwOi8vd3d3LmR5bmFtc29mdC5jb21cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IDIwMjQsIER5bmFtc29mdCBDb3Jwb3JhdGlvblxuICogQGF1dGhvciBEeW5hbXNvZnRcbiAqIEB2ZXJzaW9uIFwiMi40LjIxXCJcbiAqIEBmaWxlb3ZlcnZpZXcgRHluYW1zb2Z0IEphdmFTY3JpcHQgTGlicmFyeSBmb3IgQ2FwdHVyZSBWaXNpb25cbiAqIE1vcmUgaW5mbyBvbiBjdnIgSlM6IGh0dHBzOi8vd3d3LmR5bmFtc29mdC5jb20vY2FwdHVyZS12aXNpb24vZG9jcy93ZWIvcHJvZ3JhbW1pbmcvamF2YXNjcmlwdC9hcGktcmVmZXJlbmNlL2NhcHR1cmUtdmlzaW9uLXJvdXRlci9jYXB0dXJlLXZpc2lvbi1yb3V0ZXItbW9kdWxlLmh0bWxcbiAqL1xuaW1wb3J0IHsgZ2V0TmV4dFRhc2tJRCwgbWFwVGFza0NhbGxCYWNrLCB3b3JrZXIsIGF1dG9EaXNjb3ZlcnlQYXRocywgd29ya2VyQXV0b1Jlc291cmNlcywgbWFwUGFja2FnZVJlZ2lzdGVyLCBjb21wYXJlVmVyc2lvbiwgaW5uZXJWZXJzaW9ucywgRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUsIENvcmVNb2R1bGUsIGxvYWRXYXNtLCBoYW5kbGVFbmdpbmVSZXNvdXJjZVBhdGhzLCBFbnVtSW1hZ2VQaXhlbEZvcm1hdCwgRW51bUNvbG91ckNoYW5uZWxVc2FnZVR5cGUsIF9pc0RTSW1hZ2VEYXRhLCByZXF1ZXN0UmVzb3VyY2UsIEVudW1JbnRlcm1lZGlhdGVSZXN1bHRVbml0VHlwZSB9IGZyb20gJ2R5bmFtc29mdC1jb3JlJztcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCwgSXRlcmF0b3IgKi9cclxuXHJcblxyXG5mdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG5cclxudHlwZW9mIFN1cHByZXNzZWRFcnJvciA9PT0gXCJmdW5jdGlvblwiID8gU3VwcHJlc3NlZEVycm9yIDogZnVuY3Rpb24gKGVycm9yLCBzdXBwcmVzc2VkLCBtZXNzYWdlKSB7XHJcbiAgICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XHJcbn07XG5cbmNvbnN0IGlzUHJvbWlzZUxpa2UgPSAodmFsdWUpID0+ICh2YWx1ZSAmJiBcIm9iamVjdFwiID09PSB0eXBlb2YgdmFsdWUgJiYgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgdmFsdWUudGhlbik7XG5jbGFzcyBNdXRhYmxlUHJvbWlzZSBleHRlbmRzIFByb21pc2Uge1xuICAgIGdldCBzdGF0dXMoKSB7IHJldHVybiB0aGlzLl9zOyB9XG4gICAgZ2V0IGlzUGVuZGluZygpIHsgcmV0dXJuIFwicGVuZGluZ1wiID09PSB0aGlzLl9zOyB9XG4gICAgZ2V0IGlzRnVsZmlsbGVkKCkgeyByZXR1cm4gXCJmdWxmaWxsZWRcIiA9PT0gdGhpcy5fczsgfVxuICAgIGdldCBpc1JlamVjdGVkKCkgeyByZXR1cm4gXCJyZWplY3RlZFwiID09PSB0aGlzLl9zOyB9XG4gICAgZ2V0IHRhc2soKSB7IHJldHVybiB0aGlzLl90YXNrOyB9XG4gICAgc2V0IHRhc2sodmFsdWUpIHtcbiAgICAgICAgLy9pZighdGhpcy5pc1BlbmRpbmcpeyByZXR1cm47IH1cbiAgICAgICAgdGhpcy5fdGFzayA9IHZhbHVlO1xuICAgICAgICBsZXQgcDtcbiAgICAgICAgaWYgKGlzUHJvbWlzZUxpa2UodmFsdWUpKSB7XG4gICAgICAgICAgICBwID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgdmFsdWUpIHtcbiAgICAgICAgICAgIHAgPSBuZXcgUHJvbWlzZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHApIHtcbiAgICAgICAgICAgIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0ID0gYXdhaXQgcDtcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRhc2sgbm90IGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMuX3Rhc2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZShyZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChyZWFzb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbWFrZSBzdXJlIHRhc2sgbm90IGNoYW5nZVxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09IHRoaXMuX3Rhc2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KHJlYXNvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpc0VtcHR5KCkgeyByZXR1cm4gbnVsbCA9PSB0aGlzLl90YXNrOyB9XG4gICAgY29uc3RydWN0b3IoZXhlY3V0b3IpIHtcbiAgICAgICAgbGV0IHJzO1xuICAgICAgICBsZXQgcmo7XG4gICAgICAgIGNvbnN0IGZuID0gKF9ycywgX3JqKSA9PiB7IHJzID0gX3JzOyByaiA9IF9yajsgfTtcbiAgICAgICAgc3VwZXIoZm4pO1xuICAgICAgICAvLyB3YWxrYXJvdW5kIGJhYmVsIHdoaWNoIGNhbiBub3QgZXh0ZW5kIGJ1aWx0aW4gY2xhc3NcbiAgICAgICAgLy8gbGV0IF90aGlzID0gdGhpcztcbiAgICAgICAgLy8gbGV0IHRoZW4gPSBuZXcgUHJvbWlzZShmbikudGhlbjtcbiAgICAgICAgLy8gdGhpcy50aGVuID0gZnVuY3Rpb24oKXsgdGhlbi5hcHBseShfdGhpcywgYXJndW1lbnRzKSB9IGFzIGFueTtcbiAgICAgICAgdGhpcy5fcyA9IFwicGVuZGluZ1wiO1xuICAgICAgICB0aGlzLnJlc29sdmUgPSAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUGVuZGluZykge1xuICAgICAgICAgICAgICAgIGlmIChpc1Byb21pc2VMaWtlKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3MgPSBcImZ1bGZpbGxlZFwiO1xuICAgICAgICAgICAgICAgICAgICBycyh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnJlamVjdCA9IChyZWFzb24pID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUGVuZGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3MgPSBcInJlamVjdGVkXCI7XG4gICAgICAgICAgICAgICAgcmoocmVhc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50YXNrID0gZXhlY3V0b3I7XG4gICAgfVxufVxuXG5jbGFzcyBCdWZmZXJlZEl0ZW1zTWFuYWdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihjdnIpIHtcclxuICAgICAgICB0aGlzLl9jdnIgPSBjdnI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIG1heGltdW0gbnVtYmVyIG9mIGJ1ZmZlcmVkIGl0ZW1zLlxyXG4gICAgICogQHJldHVybnMgUmV0dXJucyB0aGUgbWF4aW11bSBudW1iZXIgb2YgYnVmZmVyZWQgaXRlbXMuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldE1heEJ1ZmZlcmVkSXRlbXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChycywgcmopID0+IHtcclxuICAgICAgICAgICAgbGV0IHRhc2tJRCA9IGdldE5leHRUYXNrSUQoKTtcclxuICAgICAgICAgICAgbWFwVGFza0NhbGxCYWNrW3Rhc2tJRF0gPSBhc3luYyAoYm9keSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBycyhib2R5LmNvdW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4LnN0YWNrID0gYm9keS5zdGFjayArICdcXG4nICsgZXguc3RhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJqKGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiY3ZyX2dldE1heEJ1ZmZlcmVkSXRlbXNcIixcclxuICAgICAgICAgICAgICAgIGlkOiB0YXNrSUQsXHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlEOiB0aGlzLl9jdnIuX2luc3RhbmNlSURcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIG1heGltdW0gbnVtYmVyIG9mIGJ1ZmZlcmVkIGl0ZW1zLlxyXG4gICAgICogQHBhcmFtIGNvdW50IHRoZSBtYXhpbXVtIG51bWJlciBvZiBidWZmZXJlZCBpdGVtc1xyXG4gICAgICovXHJcbiAgICBhc3luYyBzZXRNYXhCdWZmZXJlZEl0ZW1zKGNvdW50KSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChycywgcmopID0+IHtcclxuICAgICAgICAgICAgbGV0IHRhc2tJRCA9IGdldE5leHRUYXNrSUQoKTtcclxuICAgICAgICAgICAgbWFwVGFza0NhbGxCYWNrW3Rhc2tJRF0gPSBhc3luYyAoYm9keSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBycygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV4ID0gbmV3IEVycm9yKGJvZHkubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXguc3RhY2sgPSBib2R5LnN0YWNrICsgJ1xcbicgKyBleC5zdGFjaztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmooZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJjdnJfc2V0TWF4QnVmZmVyZWRJdGVtc1wiLFxyXG4gICAgICAgICAgICAgICAgaWQ6IHRhc2tJRCxcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSUQ6IHRoaXMuX2N2ci5faW5zdGFuY2VJRCxcclxuICAgICAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIDtcclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgYnVmZmVyZWQgY2hhcmFjdGVyIGl0ZW1zLlxyXG4gICAgICogQHJldHVybiB0aGUgYnVmZmVyZWQgY2hhcmFjdGVyIGl0ZW1zXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEJ1ZmZlcmVkQ2hhcmFjdGVySXRlbVNldCgpIHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgICAgICBtYXBUYXNrQ2FsbEJhY2tbdGFza0lEXSA9IGFzeW5jIChib2R5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzKGJvZHkuaXRlbVNldCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImN2cl9nZXRCdWZmZXJlZENoYXJhY3Rlckl0ZW1TZXRcIixcclxuICAgICAgICAgICAgICAgIGlkOiB0YXNrSUQsXHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlEOiB0aGlzLl9jdnIuX2luc3RhbmNlSURcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICA7XHJcbn1cblxudmFyIGlyclJlZ2lzdHJ5U3RhdGUgPSB7XHJcbiAgICBvblRhc2tSZXN1bHRzUmVjZWl2ZWQ6IGZhbHNlLFxyXG4gICAgb25UYXNrUmVzdWx0c1JlY2VpdmVkRm9yRGNlOiBmYWxzZSxcclxuICAgIC8vIHNlY3Rpb25cclxuICAgIG9uUHJlZGV0ZWN0ZWRSZWdpb25zUmVjZWl2ZWQ6IGZhbHNlLFxyXG4gICAgb25Mb2NhbGl6ZWRCYXJjb2Rlc1JlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uRGVjb2RlZEJhcmNvZGVzUmVjZWl2ZWQ6IGZhbHNlLFxyXG4gICAgb25Mb2NhbGl6ZWRUZXh0TGluZXNSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvblJlY29nbml6ZWRUZXh0TGluZXNSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbkRldGVjdGVkUXVhZHNSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbk5vcm1hbGl6ZWRJbWFnZXNSZWNlaXZlZDogZmFsc2UsXHJcbiAgICAvLyBzdGFnZVxyXG4gICAgb25Db2xvdXJJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvblNjYWxlZERvd25Db2xvdXJJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbkdyYXlzY2FsZUltYWdlVW5pdFJlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uVHJhbnNmb3JtZWRHcmF5c2NhbGVJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbkVuaGFuY2VkR3JheXNjYWxlSW1hZ2VVbml0UmVjZWl2ZWQ6IGZhbHNlLFxyXG4gICAgb25CaW5hcnlJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvblRleHR1cmVEZXRlY3Rpb25SZXN1bHRVbml0UmVjZWl2ZWQ6IGZhbHNlLFxyXG4gICAgb25UZXh0dXJlUmVtb3ZlZEdyYXlzY2FsZUltYWdlVW5pdFJlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uVGV4dHVyZVJlbW92ZWRCaW5hcnlJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbkNvbnRvdXJzVW5pdFJlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uTGluZVNlZ21lbnRzVW5pdFJlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uVGV4dFpvbmVzVW5pdFJlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uVGV4dFJlbW92ZWRCaW5hcnlJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvblJhd1RleHRMaW5lc1JlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uTG9uZ0xpbmVzVW5pdFJlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uQ29ybmVyc1VuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbkNhbmRpZGF0ZVF1YWRFZGdlc1VuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbkNhbmRpZGF0ZUJhcmNvZGVab25lc1VuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvblNjYWxlZFVwQmFyY29kZUltYWdlVW5pdFJlY2VpdmVkOiBmYWxzZSxcclxuICAgIG9uRGVmb3JtYXRpb25SZXNpc3RlZEJhcmNvZGVJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvbkNvbXBsZW1lbnRlZEJhcmNvZGVJbWFnZVVuaXRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICBvblNob3J0TGluZXNVbml0UmVjZWl2ZWQ6IGZhbHNlXHJcbn07XG5cbmNvbnN0IF9oYW5kbGVJbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlciA9IChpcnIpID0+IHtcclxuICAgIGZvciAobGV0IGlycyBpbiBpcnIuX2lyclJlZ2lzdHJ5U3RhdGUpIHtcclxuICAgICAgICBpcnIuX2lyclJlZ2lzdHJ5U3RhdGVbaXJzXSA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgcmVjZWl2ZXIgb2YgaXJyLl9pbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlclNldCkge1xyXG4gICAgICAgIGlmIChyZWNlaXZlci5pc0RjZSB8fCByZWNlaXZlci5pc0ZpbHRlcikge1xyXG4gICAgICAgICAgICBpcnIuX2lyclJlZ2lzdHJ5U3RhdGUub25UYXNrUmVzdWx0c1JlY2VpdmVkRm9yRGNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IHIgaW4gcmVjZWl2ZXIpIHtcclxuICAgICAgICAgICAgaWYgKCFpcnIuX2lyclJlZ2lzdHJ5U3RhdGVbcl0pIHtcclxuICAgICAgICAgICAgICAgIGlyci5faXJyUmVnaXN0cnlTdGF0ZVtyXSA9ICEhcmVjZWl2ZXJbcl07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbmNsYXNzIEludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IoY3ZyKSB7XHJcbiAgICAgICAgdGhpcy5faXJyUmVnaXN0cnlTdGF0ZSA9IGlyclJlZ2lzdHJ5U3RhdGU7XHJcbiAgICAgICAgdGhpcy5faW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXJTZXQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgdGhpcy5fY3ZyID0gY3ZyO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIGEgYEludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyYCBvYmplY3QgYXMgdGhlIHJlY2VpdmVyIG9mIGludGVybWVkaWF0ZSByZXN1bHRzLlxyXG4gICAgICogQHBhcmFtIHJlY2VpdmVyIFRoZSByZWNlaXZlciBvYmplY3QsIG9mIHR5cGUgYEludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyYC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgYWRkUmVzdWx0UmVjZWl2ZXIocmVjZWl2ZXIpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHJlY2VpdmVyICE9PSBcIm9iamVjdFwiKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcmVjZWl2ZXIuYCk7XHJcbiAgICAgICAgdGhpcy5faW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXJTZXQuYWRkKHJlY2VpdmVyKTtcclxuICAgICAgICBfaGFuZGxlSW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXIodGhpcyk7XHJcbiAgICAgICAgbGV0IG9ic2VydmVkUmVzdWx0VW5pdFR5cGVzID0gLTE7XHJcbiAgICAgICAgbGV0IG9ic2VydmVkVGFza01hcCA9IHt9O1xyXG4gICAgICAgIGlmICghcmVjZWl2ZXIuaXNEY2UgJiYgIXJlY2VpdmVyLmlzRmlsdGVyKSB7XHJcbiAgICAgICAgICAgIGlmICghcmVjZWl2ZXIuX29ic2VydmVkUmVzdWx0VW5pdFR5cGVzIHx8ICFyZWNlaXZlci5fb2JzZXJ2ZWRUYXNrTWFwKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEludGVybWVkaWF0ZSBSZXN1bHQgUmVjZWl2ZXIuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9ic2VydmVkUmVzdWx0VW5pdFR5cGVzID0gcmVjZWl2ZXIuX29ic2VydmVkUmVzdWx0VW5pdFR5cGVzO1xyXG4gICAgICAgICAgICByZWNlaXZlci5fb2JzZXJ2ZWRUYXNrTWFwLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgIG9ic2VydmVkVGFza01hcFtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZWNlaXZlci5fb2JzZXJ2ZWRUYXNrTWFwLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocnMsIHJqKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0YXNrSUQgPSBnZXROZXh0VGFza0lEKCk7XHJcbiAgICAgICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gYXN5bmMgKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChib2R5LnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4LnN0YWNrID0gYm9keS5zdGFjayArICdcXG4nICsgZXguc3RhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJqKGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiY3ZyX3NldElyclJlZ2lzdHJ5XCIsXHJcbiAgICAgICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJRDogdGhpcy5fY3ZyLl9pbnN0YW5jZUlELFxyXG4gICAgICAgICAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyT2JqOiB0aGlzLl9pcnJSZWdpc3RyeVN0YXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVkUmVzdWx0VW5pdFR5cGVzOiBvYnNlcnZlZFJlc3VsdFVuaXRUeXBlcy50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVkVGFza01hcFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIDtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGBJbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlcmAgb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIHJlY2VpdmVyIFRoZSByZWNlaXZlciBvYmplY3QsIG9mIHR5cGUgYEludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyYC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVtb3ZlUmVzdWx0UmVjZWl2ZXIocmVjZWl2ZXIpIHtcclxuICAgICAgICB0aGlzLl9pbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlclNldC5kZWxldGUocmVjZWl2ZXIpO1xyXG4gICAgICAgIF9oYW5kbGVJbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlcih0aGlzKTtcclxuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgICAgICBtYXBUYXNrQ2FsbEJhY2tbdGFza0lEXSA9IGFzeW5jIChib2R5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImN2cl9zZXRJcnJSZWdpc3RyeVwiLFxyXG4gICAgICAgICAgICAgICAgaWQ6IHRhc2tJRCxcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSUQ6IHRoaXMuX2N2ci5faW5zdGFuY2VJRCxcclxuICAgICAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgICAgICByZWNlaXZlck9iajogdGhpcy5faXJyUmVnaXN0cnlTdGF0ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIDtcclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmVzIHRoZSBvcmlnaW5hbCBpbWFnZSBkYXRhLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIG9wZXJhdGlvbiBoYXMgc3VjY2Vzc2Z1bGx5IGNvbXBsZXRlZC4gSXQgcHJvdmlkZXMgdGhlIG9yaWdpbmFsIGltYWdlIHVwb24gcmVzb2x1dGlvbi5cclxuICAgICAqL1xyXG4gICAgZ2V0T3JpZ2luYWxJbWFnZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3ZyLl9kc0ltYWdlO1xyXG4gICAgfVxyXG4gICAgO1xyXG59XG5cbmNvbnN0IGJTU1IgPSBcInVuZGVmaW5lZFwiID09IHR5cGVvZiBzZWxmO1xuXG5jb25zdCBjdXJTY3JpcHREaXIgPSAoKCkgPT4ge1xuICAgIGlmICghYlNTUiAmJiBkb2N1bWVudC5jdXJyZW50U2NyaXB0KSB7XG4gICAgICAgIGxldCBzcmMgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYywgaWR4U2VhcmNoID0gc3JjLmluZGV4T2YoXCI/XCIpO1xuICAgICAgICBpZiAoLTEgIT0gaWR4U2VhcmNoKSBzcmMgPSBzcmMuc3Vic3RyaW5nKDAsIGlkeFNlYXJjaCk7IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGlkeEhhc2ggPSBzcmMuaW5kZXhPZihcIiNcIik7XG4gICAgICAgICAgICAtMSAhPSBpZHhIYXNoICYmIChzcmMgPSBzcmMuc3Vic3RyaW5nKDAsIGlkeEhhc2gpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3JjLnN1YnN0cmluZygwLCBzcmMubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAgfVxuICAgIHJldHVybiBcIi4vXCI7XG59KSgpLCBnZXRBYnNvbHV0ZURpciA9IHZhbHVlID0+IHtcbiAgICBpZiAobnVsbCA9PSB2YWx1ZSAmJiAodmFsdWUgPSBcIi4vXCIpLCBiU1NSKSA7IGVsc2Uge1xuICAgICAgICBsZXQgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgICAgICBhLmhyZWYgPSB2YWx1ZSwgdmFsdWUgPSBhLmhyZWY7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZS5lbmRzV2l0aChcIi9cIikgfHwgKHZhbHVlICs9IFwiL1wiKSwgdmFsdWU7XG59O1xuXG52YXIgX2E7XHJcbmF1dG9EaXNjb3ZlcnlQYXRocy5jdnIgPSB7IHZlcnNpb246IFwiMi40LjIxXCIsIHBhdGg6IGN1clNjcmlwdERpciB9O1xyXG53b3JrZXJBdXRvUmVzb3VyY2VzLmN2ciA9IHsganM6IHRydWUsIHdhc206IHRydWUsIGRlcHM6IFtcImxpY2Vuc2VcIiwgXCJkaXBcIl0gfTtcclxubWFwUGFja2FnZVJlZ2lzdGVyLmN2ciA9IHt9O1xyXG5jb25zdCBzdGRWZXJzaW9uID0gXCIxLjQuMTBcIjtcclxuaWYgKCdzdHJpbmcnICE9IHR5cGVvZiBhdXRvRGlzY292ZXJ5UGF0aHMuc3RkICYmIGNvbXBhcmVWZXJzaW9uKGF1dG9EaXNjb3ZlcnlQYXRocy5zdGQudmVyc2lvbiwgc3RkVmVyc2lvbikgPCAwKSB7XHJcbiAgICBhdXRvRGlzY292ZXJ5UGF0aHMuc3RkID0geyB2ZXJzaW9uOiBzdGRWZXJzaW9uLCBwYXRoOiBnZXRBYnNvbHV0ZURpcihjdXJTY3JpcHREaXIgKyBgLi4vLi4vZHluYW1zb2Z0LWNhcHR1cmUtdmlzaW9uLXN0ZEAke3N0ZFZlcnNpb259L2Rpc3QvYCkgfTtcclxufVxyXG5jb25zdCBkaXBWZXJzaW9uID0gXCIyLjQuMjBcIjtcclxuaWYgKCFhdXRvRGlzY292ZXJ5UGF0aHMuZGlwIHx8ICdzdHJpbmcnICE9IHR5cGVvZiBhdXRvRGlzY292ZXJ5UGF0aHMuZGlwICYmIGNvbXBhcmVWZXJzaW9uKGF1dG9EaXNjb3ZlcnlQYXRocy5kaXAudmVyc2lvbiwgZGlwVmVyc2lvbikgPCAwKSB7XHJcbiAgICBhdXRvRGlzY292ZXJ5UGF0aHMuZGlwID0geyB2ZXJzaW9uOiBkaXBWZXJzaW9uLCBwYXRoOiBnZXRBYnNvbHV0ZURpcihjdXJTY3JpcHREaXIgKyBgLi4vLi4vZHluYW1zb2Z0LWltYWdlLXByb2Nlc3NpbmdAJHtkaXBWZXJzaW9ufS9kaXN0L2ApIH07XHJcbn1cclxuY2xhc3MgQ2FwdHVyZVZpc2lvblJvdXRlck1vZHVsZSB7XHJcbiAgICBzdGF0aWMgZ2V0VmVyc2lvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdmVyc2lvbjtcclxuICAgIH1cclxufVxyXG5DYXB0dXJlVmlzaW9uUm91dGVyTW9kdWxlLl92ZXJzaW9uID0gYCR7XCIyLjQuMjFcIn0oV29ya2VyOiAkeyhfYSA9IGlubmVyVmVyc2lvbnMuY3ZyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eud29ya2VyfSwgV2FzbTogbG9hZGluZy4uLmA7XG5cbnZhciBFbnVtSW1hZ2VTb3VyY2VTdGF0ZTtcclxuKGZ1bmN0aW9uIChFbnVtSW1hZ2VTb3VyY2VTdGF0ZSkge1xyXG4gICAgRW51bUltYWdlU291cmNlU3RhdGVbRW51bUltYWdlU291cmNlU3RhdGVbXCJJU1NfQlVGRkVSX0VNUFRZXCJdID0gMF0gPSBcIklTU19CVUZGRVJfRU1QVFlcIjtcclxuICAgIEVudW1JbWFnZVNvdXJjZVN0YXRlW0VudW1JbWFnZVNvdXJjZVN0YXRlW1wiSVNTX0VYSEFVU1RFRFwiXSA9IDFdID0gXCJJU1NfRVhIQVVTVEVEXCI7XHJcbn0pKEVudW1JbWFnZVNvdXJjZVN0YXRlIHx8IChFbnVtSW1hZ2VTb3VyY2VTdGF0ZSA9IHt9KSk7XG5cbih7XHJcbiAgICAvKiogTm8gaW50ZXJtZWRpYXRlIHJlc3VsdC4gKi9cclxuICAgIElSVVRfTlVMTDogQmlnSW50KDApLFxyXG4gICAgLyoqIEEgZnVsbC1jb2xvciBpbWFnZS4gKi9cclxuICAgIElSVVRfQ09MT1VSX0lNQUdFOiBCaWdJbnQoMSksXHJcbiAgICAvKiogQSBjb2xvciBpbWFnZSB0aGF0IGhhcyBiZWVuIHNjYWxlZCBkb3duIGZvciBlZmZpY2llbmN5LiAqL1xyXG4gICAgSVJVVF9TQ0FMRURfRE9XTl9DT0xPVVJfSU1BR0U6IEJpZ0ludCgxIDw8IDEpLFxyXG4gICAgLyoqIEEgZ3JheXNjYWxlIGltYWdlIGRlcml2ZWQgZnJvbSB0aGUgb3JpZ2luYWwgaW5wdXQuICovXHJcbiAgICBJUlVUX0dSQVlTQ0FMRV9JTUFHRTogQmlnSW50KDEgPDwgMiksXHJcbiAgICAvKiogQSBncmF5c2NhbGUgaW1hZ2UgdGhhdCBoYXMgdW5kZXJnb25lIHRyYW5zZm9ybWF0aW9uLiAqL1xyXG4gICAgSVJVVF9UUkFOU09GT1JNRURfR1JBWVNDQUxFX0lNQUdFOiBCaWdJbnQoMSA8PCAzKSxcclxuICAgIC8qKiBBIGdyYXlzY2FsZSBpbWFnZSBlbmhhbmNlZCBmb3IgZnVydGhlciBwcm9jZXNzaW5nLiAqL1xyXG4gICAgSVJVVF9FTkhBTkNFRF9HUkFZU0NBTEVfSU1BR0U6IEJpZ0ludCgxIDw8IDQpLFxyXG4gICAgLyoqIFJlZ2lvbnMgcHJlLWRldGVjdGVkIGFzIHBvdGVudGlhbGx5IHJlbGV2YW50IGZvciBmdXJ0aGVyIGFuYWx5c2lzLiAqL1xyXG4gICAgSVJVVF9QUkVERVRFQ1RFRF9SRUdJT05TOiBCaWdJbnQoMSA8PCA1KSxcclxuICAgIC8qKiBBIGJpbmFyeSAoYmxhY2sgYW5kIHdoaXRlKSBpbWFnZS4gKi9cclxuICAgIElSVVRfQklOQVJZX0lNQUdFOiBCaWdJbnQoMSA8PCA2KSxcclxuICAgIC8qKiBSZXN1bHRzIGZyb20gZGV0ZWN0aW5nIHRleHR1cmVzIHdpdGhpbiB0aGUgaW1hZ2UuICovXHJcbiAgICBJUlVUX1RFWFRVUkVfREVURUNUSU9OX1JFU1VMVDogQmlnSW50KDEgPDwgNyksXHJcbiAgICAvKiogQSBncmF5c2NhbGUgaW1hZ2Ugd2l0aCB0ZXh0dXJlcyByZW1vdmVkIHRvIGVuaGFuY2Ugc3ViamVjdCBkZXRhaWxzIGxpa2UgdGV4dCBvciBiYXJjb2Rlcy4gKi9cclxuICAgIElSVVRfVEVYVFVSRV9SRU1PVkVEX0dSQVlTQ0FMRV9JTUFHRTogQmlnSW50KDEgPDwgOCksXHJcbiAgICAvKiogQSBiaW5hcnkgaW1hZ2Ugd2l0aCB0ZXh0dXJlcyByZW1vdmVkKSwgdXNlZnVsIGZvciBjbGVhciBkZXRlY3Rpb24gb2Ygc3ViamVjdHMgd2l0aG91dCBiYWNrZ3JvdW5kIG5vaXNlLiAqL1xyXG4gICAgSVJVVF9URVhUVVJFX1JFTU9WRURfQklOQVJZX0lNQUdFOiBCaWdJbnQoMSA8PCA5KSxcclxuICAgIC8qKiBEZXRlY3RlZCBjb250b3VycyB3aXRoaW4gdGhlIGltYWdlKSwgd2hpY2ggY2FuIGhlbHAgaW4gaWRlbnRpZnlpbmcgc2hhcGVzIGFuZCBvYmplY3RzLiAqL1xyXG4gICAgSVJVVF9DT05UT1VSUzogQmlnSW50KDEgPDwgMTApLFxyXG4gICAgLyoqIERldGVjdGVkIGxpbmUgc2VnbWVudHMpLCB1c2VmdWwgaW4gc3RydWN0dXJhbCBhbmFseXNpcyBvZiB0aGUgaW1hZ2UgY29udGVudC4gKi9cclxuICAgIElSVVRfTElORV9TRUdNRU5UUzogQmlnSW50KDEgPDwgMTEpLFxyXG4gICAgLyoqIElkZW50aWZpZWQgdGV4dCB6b25lcyksIGluZGljYXRpbmcgYXJlYXMgd2l0aCBwb3RlbnRpYWwgdGV4dHVhbCBjb250ZW50LiAqL1xyXG4gICAgSVJVVF9URVhUX1pPTkVTOiBCaWdJbnQoMSA8PCAxMiksXHJcbiAgICAvKiogQSBiaW5hcnkgaW1hZ2Ugd2l0aCB0ZXh0IHJlZ2lvbnMgcmVtb3ZlZC4gKi9cclxuICAgIElSVVRfVEVYVF9SRU1PVkVEX0JJTkFSWV9JTUFHRTogQmlnSW50KDEgPDwgMTMpLFxyXG4gICAgLyoqIFpvbmVzIGlkZW50aWZpZWQgYXMgcG90ZW50aWFsIGJhcmNvZGUgYXJlYXMpLCBhaWRpbmcgaW4gZm9jdXNlZCBiYXJjb2RlIGRldGVjdGlvbi4gKi9cclxuICAgIElSVVRfQ0FORElEQVRFX0JBUkNPREVfWk9ORVM6IEJpZ0ludCgxIDw8IDE0KSxcclxuICAgIC8qKiBCYXJjb2RlcyB0aGF0IGhhdmUgYmVlbiBsb2NhbGl6ZWQgYnV0IG5vdCB5ZXQgZGVjb2RlZC4gKi9cclxuICAgIElSVVRfTE9DQUxJWkVEX0JBUkNPREVTOiBCaWdJbnQoMSA8PCAxNSksXHJcbiAgICAvKiogQmFyY29kZSBpbWFnZXMgc2NhbGVkIHVwIGZvciBpbXByb3ZlZCByZWFkYWJpbGl0eSBvciBkZWNvZGluZyBhY2N1cmFjeS4gKi9cclxuICAgIElSVVRfU0NBTEVEX1VQX0JBUkNPREVfSU1BR0U6IEJpZ0ludCgxIDw8IDE2KSxcclxuICAgIC8qKiBJbWFnZXMgb2YgYmFyY29kZXMgcHJvY2Vzc2VkIHRvIHJlc2lzdCBkZWZvcm1hdGlvbiBhbmQgaW1wcm92ZSBkZWNvZGluZyBzdWNjZXNzLiAqL1xyXG4gICAgSVJVVF9ERUZPUk1BVElPTl9SRVNJU1RFRF9CQVJDT0RFX0lNQUdFOiBCaWdJbnQoMSA8PCAxNyksXHJcbiAgICAvKiogQmFyY29kZSBpbWFnZXMgdGhhdCBoYXZlIGJlZW4gY29tcGxlbWVudGVkLiAqL1xyXG4gICAgSVJVVF9DT01QTEVNRU5URURfQkFSQ09ERV9JTUFHRTogQmlnSW50KDEgPDwgMTgpLFxyXG4gICAgLyoqIFN1Y2Nlc3NmdWxseSBkZWNvZGVkIGJhcmNvZGVzLiAqL1xyXG4gICAgSVJVVF9ERUNPREVEX0JBUkNPREVTOiBCaWdJbnQoMSA8PCAxOSksXHJcbiAgICAvKiogRGV0ZWN0ZWQgbG9uZyBsaW5lcy4gKi9cclxuICAgIElSVVRfTE9OR19MSU5FUzogQmlnSW50KDEgPDwgMjApLFxyXG4gICAgLyoqIERldGVjdGVkIGNvcm5lcnMgd2l0aGluIHRoZSBpbWFnZS4gKi9cclxuICAgIElSVVRfQ09STkVSUzogQmlnSW50KDEgPDwgMjEpLFxyXG4gICAgLyoqIENhbmRpZGF0ZSBlZGdlcyBpZGVudGlmaWVkIGFzIHBvdGVudGlhbCBjb21wb25lbnRzIG9mIHF1YWRyaWxhdGVyYWxzLiAqL1xyXG4gICAgSVJVVF9DQU5ESURBVEVfUVVBRF9FREdFUzogQmlnSW50KDEgPDwgMjIpLFxyXG4gICAgLyoqIFN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBxdWFkcmlsYXRlcmFscy4gKi9cclxuICAgIElSVVRfREVURUNURURfUVVBRFM6IEJpZ0ludCgxIDw8IDIzKSxcclxuICAgIC8qKiBUZXh0IGxpbmVzIHRoYXQgaGF2ZSBiZWVuIGxvY2FsaXplZCBpbiBwcmVwYXJhdGlvbiBmb3IgcmVjb2duaXRpb24uICovXHJcbiAgICBJUlVUX0xPQ0FMSVpFRF9URVhUX0xJTkVTOiBCaWdJbnQoMSA8PCAyNCksXHJcbiAgICAvKiogU3VjY2Vzc2Z1bGx5IHJlY29nbml6ZWQgdGV4dCBsaW5lcy4gKi9cclxuICAgIElSVVRfUkVDT0dOSVpFRF9URVhUX0xJTkVTOiBCaWdJbnQoMSA8PCAyNSksXHJcbiAgICAvKiogU3VjY2Vzc2Z1bGx5IG5vcm1hbGl6ZWQgaW1hZ2VzLiAqL1xyXG4gICAgSVJVVF9OT1JNQUxJWkVEX0lNQUdFUzogQmlnSW50KDEgPDwgMjYpLFxyXG4gICAgLyoqIFN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzaG9ydCBsaW5lcy4gKi9cclxuICAgIElSVVRfU0hPUlRfTElORVM6IEJpZ0ludCgxIDw8IDI3KSxcclxuICAgIElSVVRfUkFXX1RFWFRfTElORVM6IEJpZ0ludCgxIDw8IDI4KSxcclxuICAgIC8qKiBBIG1hc2sgdG8gc2VsZWN0IGFsbCB0eXBlcyBvZiBpbnRlcm1lZGlhdGUgcmVzdWx0cy4gKi9cclxuICAgIElSVVRfQUxMOiBCaWdJbnQoXCIweEZGRkZGRkZGRkZGRkZGRkZcIilcclxufSk7XHJcbmZ1bmN0aW9uIGhhbmRsZVJlc3VsdEZvckRyYXcocmVzdWx0cykge1xyXG4gICAgY29uc3QgcmVzdWx0c0ZvckRyYXcgPSB7XHJcbiAgICAgICAgYmFyY29kZVJlc3VsdEl0ZW1zOiBbXSxcclxuICAgICAgICB0ZXh0TGluZVJlc3VsdEl0ZW1zOiBbXSxcclxuICAgICAgICBkZXRlY3RlZFF1YWRSZXN1bHRJdGVtczogW10sXHJcbiAgICAgICAgbm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXM6IFtdLFxyXG4gICAgICAgIHBhcnNlZFJlc3VsdEl0ZW1zOiBbXVxyXG4gICAgfTtcclxuICAgIHJlc3VsdHMuaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09IEVudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfQkFSQ09ERSkge1xyXG4gICAgICAgICAgICByZXN1bHRzRm9yRHJhdy5iYXJjb2RlUmVzdWx0SXRlbXMucHVzaChpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaXRlbS50eXBlID09PSBFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX1RFWFRfTElORSkge1xyXG4gICAgICAgICAgICByZXN1bHRzRm9yRHJhdy50ZXh0TGluZVJlc3VsdEl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUuQ1JJVF9ERVRFQ1RFRF9RVUFEKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHNGb3JEcmF3LmRldGVjdGVkUXVhZFJlc3VsdEl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUuQ1JJVF9OT1JNQUxJWkVEX0lNQUdFKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHNGb3JEcmF3Lm5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUuQ1JJVF9QQVJTRURfUkVTVUxUKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdHNGb3JEcmF3LnBhcnNlZFJlc3VsdEl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcmVzdWx0c0ZvckRyYXc7XHJcbn1cclxuZnVuY3Rpb24gY29udmVydENvb3JkaW5hdGVzKGl0ZW0sIGNvbXByZXNzUmF0ZSkge1xyXG4gICAgaWYgKGl0ZW0gJiYgaXRlbS5sb2NhdGlvbikge1xyXG4gICAgICAgIGNvbnN0IHBvaW50cyA9IGl0ZW0ubG9jYXRpb24ucG9pbnRzO1xyXG4gICAgICAgIGZvciAobGV0IHBvaW50IG9mIHBvaW50cykge1xyXG4gICAgICAgICAgICBwb2ludC54ID0gcG9pbnQueCAvIGNvbXByZXNzUmF0ZTtcclxuICAgICAgICAgICAgcG9pbnQueSA9IHBvaW50LnkgLyBjb21wcmVzc1JhdGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnZlcnRDb29yZGluYXRlcyhpdGVtLnJlZmVyZW5jZWRJdGVtLCBjb21wcmVzc1JhdGUpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNoZWNrSXNEaXNwb3NlZChjdnIpIHtcclxuICAgIGlmIChjdnIuZGlzcG9zZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFwiQ2FwdHVyZVZpc2lvblJvdXRlclwiIGluc3RhbmNlIGhhcyBiZWVuIGRpc3Bvc2VkYCk7XHJcbiAgICB9XHJcbn1cblxudmFyIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY2FudmFzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9wcm9taXNlU3RhcnRTY2FuLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pbnRlcm1lZGlhdGVSZXN1bHRNYW5hZ2VyLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9idWZmZXJkSXRlbXNNYW5hZ2VyLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRSZWNlaXZlclNldCwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhU3RhdGVMaXN0ZW5lclNldCwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0RmlsdGVyU2V0LCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9jb21wcmVzc1JhdGUsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzU2Nhbm5lciwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW5uZXJVc2VUYWcsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzRGVzdHJveWVkO1xyXG5jb25zdCBfaW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXJPZkZpbHRlciA9IHtcclxuICAgIG9uVGFza1Jlc3VsdHNSZWNlaXZlZDogKCkgPT4geyB9LFxyXG4gICAgaXNGaWx0ZXI6IHRydWVcclxufTtcclxuY2xhc3MgQ2FwdHVyZVZpc2lvblJvdXRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLm1heEN2c1NpZGVMZW5ndGggPSBbXCJpUGhvbmVcIiwgXCJBbmRyb2lkXCIsIFwiSGFybW9ueU9TXCJdLmluY2x1ZGVzKENvcmVNb2R1bGUuYnJvd3NlckluZm8uT1MpID8gMjA0OCA6IDQwOTY7XHJcbiAgICAgICAgdGhpcy5faW5zdGFuY2VJRCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLl9kc0ltYWdlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9pc1BhdXNlU2NhbiA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5faXNPdXRwdXRPcmlnaW5hbEltYWdlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faXNPcGVuRGV0ZWN0VmVyaWZ5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faXNPcGVuTm9ybWFsaXplVmVyaWZ5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faXNPcGVuQmFyY29kZVZlcmlmeSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2lzT3BlbkxhYmVsVmVyaWZ5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fbWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwgPSAwO1xyXG4gICAgICAgIHRoaXMuX2F2ZXJhZ2VQcm9jZXNzaW50VGltZUFycmF5ID0gW107XHJcbiAgICAgICAgdGhpcy5fYXZlcmFnZUZldGNoSW1hZ2VUaW1lQXJyYXkgPSBbXTtcclxuICAgICAgICB0aGlzLl9jdXJyZW50U2V0dGluZ3MgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2F2ZXJhZ2VUaW1lID0gOTk5O1xyXG4gICAgICAgIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYS5zZXQodGhpcywgbnVsbCk7XHJcbiAgICAgICAgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY2FudmFzLnNldCh0aGlzLCBudWxsKTtcclxuICAgICAgICBfQ2FwdHVyZVZpc2lvblJvdXRlcl9wcm9taXNlU3RhcnRTY2FuLnNldCh0aGlzLCBudWxsKTtcclxuICAgICAgICBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pbnRlcm1lZGlhdGVSZXN1bHRNYW5hZ2VyLnNldCh0aGlzLCBudWxsKTtcclxuICAgICAgICBfQ2FwdHVyZVZpc2lvblJvdXRlcl9idWZmZXJkSXRlbXNNYW5hZ2VyLnNldCh0aGlzLCBudWxsKTtcclxuICAgICAgICBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRSZWNlaXZlclNldC5zZXQodGhpcywgbmV3IFNldCgpKTtcclxuICAgICAgICBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2FTdGF0ZUxpc3RlbmVyU2V0LnNldCh0aGlzLCBuZXcgU2V0KCkpO1xyXG4gICAgICAgIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Jlc3VsdEZpbHRlclNldC5zZXQodGhpcywgbmV3IFNldCgpKTtcclxuICAgICAgICBfQ2FwdHVyZVZpc2lvblJvdXRlcl9jb21wcmVzc1JhdGUuc2V0KHRoaXMsIDApO1xyXG4gICAgICAgIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzU2Nhbm5lci5zZXQodGhpcywgZmFsc2UpO1xyXG4gICAgICAgIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lubmVyVXNlVGFnLnNldCh0aGlzLCBmYWxzZSk7XHJcbiAgICAgICAgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNEZXN0cm95ZWQuc2V0KHRoaXMsIGZhbHNlKTtcclxuICAgICAgICB0aGlzLl9zaW5nbGVGcmFtZU1vZGVDYWxsYmFja0JpbmQgPSB0aGlzLl9zaW5nbGVGcmFtZU1vZGVDYWxsYmFjay5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGBDYXB0dXJlVmlzaW9uUm91dGVyYCBpbnN0YW5jZSBoYXMgYmVlbiBkaXNwb3NlZCBvZi5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBCb29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgYENhcHR1cmVWaXNpb25Sb3V0ZXJgIGluc3RhbmNlIGhhcyBiZWVuIGRpc3Bvc2VkIG9mLlxyXG4gICAgICovXHJcbiAgICBnZXQgZGlzcG9zZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNEZXN0cm95ZWQsIFwiZlwiKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGBDYXB0dXJlVmlzaW9uUm91dGVyYCBjbGFzcy5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBpbml0aWFsaXplZCBgQ2FwdHVyZVZpc2lvblJvdXRlcmAgaW5zdGFuY2UuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBjcmVhdGVJbnN0YW5jZSgpIHtcclxuICAgICAgICBpZiAoIW1hcFBhY2thZ2VSZWdpc3Rlci5saWNlbnNlKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdNb2R1bGUgYGxpY2Vuc2VgIGlzIG5vdCBleGlzdGVkLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhd2FpdCBtYXBQYWNrYWdlUmVnaXN0ZXIubGljZW5zZS5keW5hbXNvZnQoKTtcclxuICAgICAgICBhd2FpdCBsb2FkV2FzbShbXCJjdnJcIl0pO1xyXG4gICAgICAgIGNvbnN0IGNhcHR1cmVWaXNpb25Sb3V0ZXIgPSBuZXcgQ2FwdHVyZVZpc2lvblJvdXRlcigpO1xyXG4gICAgICAgIGNvbnN0IHAgPSBuZXcgTXV0YWJsZVByb21pc2UoKTtcclxuICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gYXN5bmMgKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBjYXB0dXJlVmlzaW9uUm91dGVyLl9pbnN0YW5jZUlEID0gYm9keS5pbnN0YW5jZUlEO1xyXG4gICAgICAgICAgICAgICAgY2FwdHVyZVZpc2lvblJvdXRlci5fY3VycmVudFNldHRpbmdzID0gSlNPTi5wYXJzZShib2R5Lm91dHB1dFNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXJNb2R1bGUuX3ZlcnNpb24gPSBgJHtcIjIuNC4yMVwifShXb3JrZXI6ICR7KF9hID0gaW5uZXJWZXJzaW9ucy5jdnIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS53b3JrZXJ9LCBXYXNtOiAke2JvZHkudmVyc2lvbn0pYDtcclxuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQoY2FwdHVyZVZpc2lvblJvdXRlciwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW5uZXJVc2VUYWcsIHRydWUsIFwiZlwiKTtcclxuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQoY2FwdHVyZVZpc2lvblJvdXRlciwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgY2FwdHVyZVZpc2lvblJvdXRlci5nZXRJbnRlcm1lZGlhdGVSZXN1bHRNYW5hZ2VyKCksIFwiZlwiKTtcclxuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQoY2FwdHVyZVZpc2lvblJvdXRlciwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW5uZXJVc2VUYWcsIGZhbHNlLCBcImZcIik7XHJcbiAgICAgICAgICAgICAgICBwLnJlc29sdmUoY2FwdHVyZVZpc2lvblJvdXRlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnIgPSBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvZHkuc3RhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnIuc3RhY2sgPSBib2R5LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcC5yZWplY3QoZXJyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgdHlwZTogJ2N2cl9jcmVhdGVJbnN0YW5jZScsXHJcbiAgICAgICAgICAgIGlkOiB0YXNrSUQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHA7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICBhc3luYyBfc2luZ2xlRnJhbWVNb2RlQ2FsbGJhY2soZHNJbWFnZSkge1xyXG4gICAgICAgIGZvciAobGV0IHJlY2VpdmVyIG9mIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0UmVjZWl2ZXJTZXQsIFwiZlwiKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9pc091dHB1dE9yaWdpbmFsSW1hZ2UgJiYgcmVjZWl2ZXIub25PcmlnaW5hbEltYWdlUmVzdWx0UmVjZWl2ZWQgJiYgcmVjZWl2ZXIub25PcmlnaW5hbEltYWdlUmVzdWx0UmVjZWl2ZWQoeyBpbWFnZURhdGE6IGRzSW1hZ2UgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvcHlEc0ltYWdlRGF0YSA9IHtcclxuICAgICAgICAgICAgYnl0ZXM6IG5ldyBVaW50OEFycmF5KGRzSW1hZ2UuYnl0ZXMpLFxyXG4gICAgICAgICAgICB3aWR0aDogZHNJbWFnZS53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBkc0ltYWdlLmhlaWdodCxcclxuICAgICAgICAgICAgc3RyaWRlOiBkc0ltYWdlLnN0cmlkZSxcclxuICAgICAgICAgICAgZm9ybWF0OiBkc0ltYWdlLmZvcm1hdCxcclxuICAgICAgICAgICAgdGFnOiBkc0ltYWdlLnRhZ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKCF0aGlzLl90ZW1wbGF0ZU5hbWUpXHJcbiAgICAgICAgICAgIHRoaXMuX3RlbXBsYXRlTmFtZSA9IHRoaXMuX2N1cnJlbnRTZXR0aW5ncy5DYXB0dXJlVmlzaW9uVGVtcGxhdGVzWzBdLk5hbWU7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5jYXB0dXJlKGNvcHlEc0ltYWdlRGF0YSwgdGhpcy5fdGVtcGxhdGVOYW1lKTtcclxuICAgICAgICByZXN1bHQub3JpZ2luYWxJbWFnZVRhZyA9IGRzSW1hZ2UudGFnO1xyXG4gICAgICAgIGZvciAobGV0IHJlY2VpdmVyIG9mIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0UmVjZWl2ZXJTZXQsIFwiZlwiKSkge1xyXG4gICAgICAgICAgICBpZiAocmVjZWl2ZXIuaXNEY2UpIHtcclxuICAgICAgICAgICAgICAgIHJlY2VpdmVyLm9uQ2FwdHVyZWRSZXN1bHRSZWNlaXZlZChyZXN1bHQsIHtcclxuICAgICAgICAgICAgICAgICAgICBpc0RldGVjdFZlcmlmeU9wZW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGlzTm9ybWFsaXplVmVyaWZ5T3BlbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNCYXJjb2RlVmVyaWZ5T3BlbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNMYWJlbFZlcmlmeU9wZW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVzdWx0Q29tbW9uUGFydCA9IHtcclxuICAgICAgICAgICAgb3JpZ2luYWxJbWFnZUhhc2hJZDogcmVzdWx0Lm9yaWdpbmFsSW1hZ2VIYXNoSWQsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsSW1hZ2VUYWc6IHJlc3VsdC5vcmlnaW5hbEltYWdlVGFnLFxyXG4gICAgICAgICAgICBlcnJvckNvZGU6IHJlc3VsdC5lcnJvckNvZGUsXHJcbiAgICAgICAgICAgIGVycm9yU3RyaW5nOiByZXN1bHQuZXJyb3JTdHJpbmdcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAobGV0IHJlY2VpdmVyIG9mIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0UmVjZWl2ZXJTZXQsIFwiZlwiKSkge1xyXG4gICAgICAgICAgICByZWNlaXZlci5vbkRlY29kZWRCYXJjb2Rlc1JlY2VpdmVkICYmIHJlc3VsdC5iYXJjb2RlUmVzdWx0SXRlbXMgJiYgcmVjZWl2ZXIub25EZWNvZGVkQmFyY29kZXNSZWNlaXZlZChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3VsdENvbW1vblBhcnQpLCB7IGJhcmNvZGVSZXN1bHRJdGVtczogcmVzdWx0LmJhcmNvZGVSZXN1bHRJdGVtcyB9KSk7XHJcbiAgICAgICAgICAgIHJlY2VpdmVyLm9uUmVjb2duaXplZFRleHRMaW5lc1JlY2VpdmVkICYmIHJlc3VsdC50ZXh0TGluZVJlc3VsdEl0ZW1zICYmIHJlY2VpdmVyLm9uUmVjb2duaXplZFRleHRMaW5lc1JlY2VpdmVkKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzdWx0Q29tbW9uUGFydCksIHsgdGV4dExpbmVSZXN1bHRJdGVtczogcmVzdWx0LnRleHRMaW5lUmVzdWx0SXRlbXMgfSkpO1xyXG4gICAgICAgICAgICByZWNlaXZlci5vbkRldGVjdGVkUXVhZHNSZWNlaXZlZCAmJiByZXN1bHQuZGV0ZWN0ZWRRdWFkUmVzdWx0SXRlbXMgJiYgcmVjZWl2ZXIub25EZXRlY3RlZFF1YWRzUmVjZWl2ZWQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXN1bHRDb21tb25QYXJ0KSwgeyBkZXRlY3RlZFF1YWRSZXN1bHRJdGVtczogcmVzdWx0LmRldGVjdGVkUXVhZFJlc3VsdEl0ZW1zIH0pKTtcclxuICAgICAgICAgICAgcmVjZWl2ZXIub25Ob3JtYWxpemVkSW1hZ2VzUmVjZWl2ZWQgJiYgcmVzdWx0Lm5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zICYmIHJlY2VpdmVyLm9uTm9ybWFsaXplZEltYWdlc1JlY2VpdmVkKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzdWx0Q29tbW9uUGFydCksIHsgbm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXM6IHJlc3VsdC5ub3JtYWxpemVkSW1hZ2VSZXN1bHRJdGVtcyB9KSk7XHJcbiAgICAgICAgICAgIHJlY2VpdmVyLm9uUGFyc2VkUmVzdWx0c1JlY2VpdmVkICYmIHJlc3VsdC5wYXJzZWRSZXN1bHRJdGVtcyAmJiByZWNlaXZlci5vblBhcnNlZFJlc3VsdHNSZWNlaXZlZChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3VsdENvbW1vblBhcnQpLCB7IHBhcnNlZFJlc3VsdEl0ZW1zOiByZXN1bHQucGFyc2VkUmVzdWx0SXRlbXMgfSkpO1xyXG4gICAgICAgICAgICBpZiAocmVjZWl2ZXIub25DYXB0dXJlZFJlc3VsdFJlY2VpdmVkICYmICFyZWNlaXZlci5pc0RjZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzT3V0cHV0T3JpZ2luYWxJbWFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcmVzdWx0Lml0ZW1zLmZpbmRJbmRleCgoaXRlbSkgPT4geyByZXR1cm4gaXRlbS50eXBlID09PSAxOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pdGVtc1tpbmRleF0uaW1hZ2VEYXRhID0gZHNJbWFnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZWNlaXZlci5vbkNhcHR1cmVkUmVzdWx0UmVjZWl2ZWQocmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB1cCBhbiBpbWFnZSBzb3VyY2UgdG8gcHJvdmlkZSBpbWFnZXMgZm9yIGNvbnRpbnVvdXMgcHJvY2Vzc2luZy5cclxuICAgICAqIEBwYXJhbSBpbWFnZVNvdXJjZSBUaGUgaW1hZ2Ugc291cmNlIHdoaWNoIGlzIGNvbXBsaWFudCB3aXRoIHRoZSBgSW1hZ2VTb3VyY2VBZGFwdGVyYCBpbnRlcmZhY2UuXHJcbiAgICAgKi9cclxuICAgIHNldElucHV0KGltYWdlU291cmNlKSB7XHJcbiAgICAgICAgY2hlY2tJc0Rpc3Bvc2VkKHRoaXMpO1xyXG4gICAgICAgIGlmICghaW1hZ2VTb3VyY2UpIHtcclxuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIG51bGwsIFwiZlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgaW1hZ2VTb3VyY2UsIFwiZlwiKTtcclxuICAgICAgICBpZiAoaW1hZ2VTb3VyY2UuaXNDYW1lcmFFbmhhbmNlcikge1xyXG4gICAgICAgICAgICBpZiAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pbnRlcm1lZGlhdGVSZXN1bHRNYW5hZ2VyLCBcImZcIikpIHtcclxuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuX2ludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyLmlzRGNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgXCJmXCIpLmFkZFJlc3VsdFJlY2VpdmVyKF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuX2ludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBjYW1lcmFWaWV3ID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKS5nZXRDYW1lcmFWaWV3KCk7XHJcbiAgICAgICAgICAgIGlmIChjYW1lcmFWaWV3KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkY2VDcnIgPSBjYW1lcmFWaWV3Ll9jYXB0dXJlZFJlc3VsdFJlY2VpdmVyO1xyXG4gICAgICAgICAgICAgICAgZGNlQ3JyLmlzRGNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0UmVjZWl2ZXJTZXQsIFwiZlwiKS5hZGQoZGNlQ3JyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiB0aGluayBhYm91dCBvZmYuXHJcbiAgICAgICAgICAgIC8vKGltYWdlU291cmNlIGFzIGFueSkub24oXCJzaW5nbGVGcmFtZUFjcXVpcmVkXCIsIHRoaXMuX3NpbmdsZUZyYW1lTW9kZUNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGltYWdlIHNvdXJjZSBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIGdldElucHV0KCkge1xyXG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpO1xyXG4gICAgfVxyXG4gICAgO1xyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIG9yIHJlbW92ZXMgbGlzdGVuZXJzIGZvciBpbWFnZSBzb3VyY2Ugc3RhdGUgY2hhbmdlLlxyXG4gICAgICovXHJcbiAgICBhZGRJbWFnZVNvdXJjZVN0YXRlTGlzdGVuZXIobGlzdGVuZXIpIHtcclxuICAgICAgICBjaGVja0lzRGlzcG9zZWQodGhpcyk7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciAhPT0gXCJvYmplY3RcIilcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUud2FybihgSW52YWxpZCBJU0Egc3RhdGUgbGlzdGVuZXIuYCk7XHJcbiAgICAgICAgaWYgKCFsaXN0ZW5lciB8fCAhT2JqZWN0LmtleXMobGlzdGVuZXIpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2FTdGF0ZUxpc3RlbmVyU2V0LCBcImZcIikuYWRkKGxpc3RlbmVyKTtcclxuICAgIH1cclxuICAgIDtcclxuICAgIHJlbW92ZUltYWdlU291cmNlU3RhdGVMaXN0ZW5lcihsaXN0ZW5lcikge1xyXG4gICAgICAgIGNoZWNrSXNEaXNwb3NlZCh0aGlzKTtcclxuICAgICAgICByZXR1cm4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2FTdGF0ZUxpc3RlbmVyU2V0LCBcImZcIikuZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIGBDYXB0dXJlZFJlc3VsdFJlY2VpdmVyYCBvYmplY3QgYXMgdGhlIHJlY2VpdmVyIG9mIGNhcHR1cmVkIHJlc3VsdHMuXHJcbiAgICAgKiBAcGFyYW0gcmVjZWl2ZXIgVGhlIHJlY2VpdmVyIG9iamVjdCwgb2YgdHlwZSBgQ2FwdHVyZWRSZXN1bHRSZWNlaXZlcmAuXHJcbiAgICAgKi9cclxuICAgIGFkZFJlc3VsdFJlY2VpdmVyKHJlY2VpdmVyKSB7XHJcbiAgICAgICAgY2hlY2tJc0Rpc3Bvc2VkKHRoaXMpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgcmVjZWl2ZXIgIT09IFwib2JqZWN0XCIpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCByZWNlaXZlci5gKTtcclxuICAgICAgICBpZiAoIXJlY2VpdmVyIHx8ICFPYmplY3Qua2V5cyhyZWNlaXZlcikubGVuZ3RoKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRSZWNlaXZlclNldCwgXCJmXCIpLmFkZChyZWNlaXZlcik7XHJcbiAgICAgICAgdGhpcy5fc2V0Q3JyUmVnaXN0cnkoKTtcclxuICAgIH1cclxuICAgIDtcclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGBDYXB0dXJlZFJlc3VsdFJlY2VpdmVyYCBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0gcmVjZWl2ZXIgVGhlIHJlY2VpdmVyIG9iamVjdCwgb2YgdHlwZSBgQ2FwdHVyZWRSZXN1bHRSZWNlaXZlcmAuXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZVJlc3VsdFJlY2VpdmVyKHJlY2VpdmVyKSB7XHJcbiAgICAgICAgY2hlY2tJc0Rpc3Bvc2VkKHRoaXMpO1xyXG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0UmVjZWl2ZXJTZXQsIFwiZlwiKS5kZWxldGUocmVjZWl2ZXIpO1xyXG4gICAgICAgIHRoaXMuX3NldENyclJlZ2lzdHJ5KCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfc2V0Q3JyUmVnaXN0cnkoKSB7XHJcbiAgICAgICAgY29uc3QgcmVjZWl2ZXIgPSB7XHJcbiAgICAgICAgICAgIG9uQ2FwdHVyZWRSZXN1bHRSZWNlaXZlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIG9uRGVjb2RlZEJhcmNvZGVzUmVjZWl2ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBvblJlY29nbml6ZWRUZXh0TGluZXNSZWNlaXZlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIG9uRGV0ZWN0ZWRRdWFkc1JlY2VpdmVkOiBmYWxzZSxcclxuICAgICAgICAgICAgb25Ob3JtYWxpemVkSW1hZ2VzUmVjZWl2ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBvblBhcnNlZFJlc3VsdHNSZWNlaXZlZDogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZvciAobGV0IHIgb2YgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRSZWNlaXZlclNldCwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgIGlmIChyLmlzRGNlKVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIHJlY2VpdmVyLm9uQ2FwdHVyZWRSZXN1bHRSZWNlaXZlZCA9ICEhcltcIm9uQ2FwdHVyZWRSZXN1bHRSZWNlaXZlZFwiXTtcclxuICAgICAgICAgICAgcmVjZWl2ZXIub25EZWNvZGVkQmFyY29kZXNSZWNlaXZlZCA9ICEhcltcIm9uRGVjb2RlZEJhcmNvZGVzUmVjZWl2ZWRcIl07XHJcbiAgICAgICAgICAgIHJlY2VpdmVyLm9uUmVjb2duaXplZFRleHRMaW5lc1JlY2VpdmVkID0gISFyW1wib25SZWNvZ25pemVkVGV4dExpbmVzUmVjZWl2ZWRcIl07XHJcbiAgICAgICAgICAgIHJlY2VpdmVyLm9uRGV0ZWN0ZWRRdWFkc1JlY2VpdmVkID0gISFyW1wib25EZXRlY3RlZFF1YWRzUmVjZWl2ZWRcIl07XHJcbiAgICAgICAgICAgIHJlY2VpdmVyLm9uTm9ybWFsaXplZEltYWdlc1JlY2VpdmVkID0gISFyW1wib25Ob3JtYWxpemVkSW1hZ2VzUmVjZWl2ZWRcIl07XHJcbiAgICAgICAgICAgIHJlY2VpdmVyLm9uUGFyc2VkUmVzdWx0c1JlY2VpdmVkID0gISFyW1wib25QYXJzZWRSZXN1bHRzUmVjZWl2ZWRcIl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHAgPSBuZXcgTXV0YWJsZVByb21pc2UoKTtcclxuICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gYXN5bmMgKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgcC5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIGV4LnN0YWNrID0gYm9keS5zdGFjayArICdcXG4nICsgZXguc3RhY2s7XHJcbiAgICAgICAgICAgICAgICBwLnJlamVjdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICB0eXBlOiBcImN2cl9zZXRDcnJSZWdpc3RyeVwiLFxyXG4gICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICBpbnN0YW5jZUlEOiB0aGlzLl9pbnN0YW5jZUlELFxyXG4gICAgICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICAgICAgICByZWNlaXZlcjogSlNPTi5zdHJpbmdpZnkocmVjZWl2ZXIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBhIGBNdWx0aUZyYW1lUmVzdWx0Q3Jvc3NGaWx0ZXJgIG9iamVjdCB0byBmaWx0ZXIgbm9uLWVzc2VudGlhbCByZXN1bHRzLlxyXG4gICAgICogQHBhcmFtIGZpbHRlciBUaGUgZmlsdGVyIG9iamVjdCwgb2YgdHlwZSBgTXVsdGlGcmFtZVJlc3VsdENyb3NzRmlsdGVyYC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBvcGVyYXRpb24gaGFzIHN1Y2Nlc3NmdWxseSBjb21wbGV0ZWQuIEl0IGRvZXMgbm90IHByb3ZpZGUgYW55IHZhbHVlIHVwb24gcmVzb2x1dGlvbi5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgYWRkUmVzdWx0RmlsdGVyKGZpbHRlcikge1xyXG4gICAgICAgIGNoZWNrSXNEaXNwb3NlZCh0aGlzKTtcclxuICAgICAgICBpZiAoIWZpbHRlciB8fCB0eXBlb2YgZmlsdGVyICE9PSBcIm9iamVjdFwiIHx8ICFPYmplY3Qua2V5cyhmaWx0ZXIpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29uc29sZS53YXJuKGBJbnZhbGlkIGZpbHRlci5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRGaWx0ZXJTZXQsIFwiZlwiKS5hZGQoZmlsdGVyKTtcclxuICAgICAgICAvLyBXaGVuIGN2ci5hZGRSZXN1bHRGaWx0ZXIgaXMgY2FsbGVkLCB0aGlzIG1ldGhvZCB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgaW52b2tlZCB0byBiYXRjaCB1cGRhdGUgdGhlIGZpbHRlciBzdGF0dXNlcyB0aGF0IHdlcmUgc2V0IGJlZm9yZSBjYWxsaW5nIGFkZFJlc3VsdEZpbHRlci5cclxuICAgICAgICBmaWx0ZXIuX2R5bmFtc29mdCgpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX2hhbmRsZUZpbHRlclVwZGF0ZSgpO1xyXG4gICAgfVxyXG4gICAgO1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgYE11bHRpRnJhbWVSZXN1bHRDcm9zc0ZpbHRlcmAgb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIGZpbHRlciBUaGUgZmlsdGVyIG9iamVjdCwgb2YgdHlwZSBgTXVsdGlGcmFtZVJlc3VsdENyb3NzRmlsdGVyYC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBvcGVyYXRpb24gaGFzIHN1Y2Nlc3NmdWxseSBjb21wbGV0ZWQuIEl0IGRvZXMgbm90IHByb3ZpZGUgYW55IHZhbHVlIHVwb24gcmVzb2x1dGlvbi5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVtb3ZlUmVzdWx0RmlsdGVyKGZpbHRlcikge1xyXG4gICAgICAgIGNoZWNrSXNEaXNwb3NlZCh0aGlzKTtcclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Jlc3VsdEZpbHRlclNldCwgXCJmXCIpLmRlbGV0ZShmaWx0ZXIpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX2hhbmRsZUZpbHRlclVwZGF0ZSgpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2hhbmRsZUZpbHRlclVwZGF0ZSgpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFYWNoIHRpbWUgYSBcImZpbHRlclwiIGlzIGFkZGVkIG9yIHJlbW92ZWQsIHRoZSBcImZpbHRlciBzZXRcIiB3aWxsIGJlIHJlLXRyYXZlcnNlZCxcclxuICAgICAgICAgKiBhbmQgX2ludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyT2ZGaWx0ZXIgd2lsbCBiZSBhZGRlZCB3aGVuIG5lY2Vzc2FyeS5cclxuICAgICAgICAgKiBUaGlzIGVuc3VyZXMgdGhhdCBfaW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXJPZkZpbHRlciBpcyBub3QgbGVmdCBpbiB0aGUgXCJmaWx0ZXIgc2V0XCIgd2hlbiB0aGUgXCJmaWx0ZXIgc2V0XCIgaXMgZW1wdHkgb3Igd2hlbiBubyBmaWx0ZXIgaW4gdGhlIFwiZmlsdGVyIHNldFwiIGhhcyBpc0xhdGVzdE92ZXJsYXBwaW5nRW5hYmxlZCBzZXQgdG8gdHJ1ZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2ludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXIsIFwiZlwiKS5yZW1vdmVSZXN1bHRSZWNlaXZlcihfaW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXJPZkZpbHRlcik7XHJcbiAgICAgICAgaWYgKF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0RmlsdGVyU2V0LCBcImZcIikuc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLl9pc09wZW5CYXJjb2RlVmVyaWZ5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3BlbkxhYmVsVmVyaWZ5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3BlbkRldGVjdFZlcmlmeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLl9pc09wZW5Ob3JtYWxpemVWZXJpZnkgPSBmYWxzZTtcclxuICAgICAgICAgICAgY29uc3QgX3ZlcmlmaWNhdGlvbkVuYWJsZWQgPSB7XHJcbiAgICAgICAgICAgICAgICBbRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUuQ1JJVF9CQVJDT0RFXTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBbRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUuQ1JJVF9URVhUX0xJTkVdOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFtFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX0RFVEVDVEVEX1FVQURdOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFtFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX05PUk1BTElaRURfSU1BR0VdOiBmYWxzZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBfZHVwbGljYXRlRmlsdGVyRW5hYmxlZCA9IHtcclxuICAgICAgICAgICAgICAgIFtFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX0JBUkNPREVdOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIFtFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX1RFWFRfTElORV06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgW0VudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfREVURUNURURfUVVBRF06IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgW0VudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfTk9STUFMSVpFRF9JTUFHRV06IGZhbHNlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGF3YWl0IF9lbmFibGVSZXN1bHRDcm9zc1ZlcmlmaWNhdGlvbih0aGlzLCBfdmVyaWZpY2F0aW9uRW5hYmxlZCk7XHJcbiAgICAgICAgICAgIGF3YWl0IF9lbmFibGVSZXN1bHREZWR1cGxpY2F0aW9uKHRoaXMsIF9kdXBsaWNhdGVGaWx0ZXJFbmFibGVkKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBmaWx0ZXIgb2YgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRGaWx0ZXJTZXQsIFwiZlwiKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9pc09wZW5CYXJjb2RlVmVyaWZ5ID0gZmlsdGVyLmlzUmVzdWx0Q3Jvc3NWZXJpZmljYXRpb25FbmFibGVkKEVudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfQkFSQ09ERSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3BlbkxhYmVsVmVyaWZ5ID0gZmlsdGVyLmlzUmVzdWx0Q3Jvc3NWZXJpZmljYXRpb25FbmFibGVkKEVudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfVEVYVF9MSU5FKTtcclxuICAgICAgICAgICAgdGhpcy5faXNPcGVuRGV0ZWN0VmVyaWZ5ID0gZmlsdGVyLmlzUmVzdWx0Q3Jvc3NWZXJpZmljYXRpb25FbmFibGVkKEVudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfREVURUNURURfUVVBRCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzT3Blbk5vcm1hbGl6ZVZlcmlmeSA9IGZpbHRlci5pc1Jlc3VsdENyb3NzVmVyaWZpY2F0aW9uRW5hYmxlZChFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX05PUk1BTElaRURfSU1BR0UpO1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVyLmlzTGF0ZXN0T3ZlcmxhcHBpbmdFbmFibGVkKEVudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfQkFSQ09ERSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9pc0V4aXN0ID0gWy4uLl9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgXCJmXCIpLl9pbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlclNldC52YWx1ZXMoKV0uZmluZCgocmVjZWl2ZXIpID0+IHsgcmV0dXJuIHJlY2VpdmVyLmlzRmlsdGVyOyB9KTtcclxuICAgICAgICAgICAgICAgIGlmICghX2lzRXhpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2ludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXIsIFwiZlwiKS5hZGRSZXN1bHRSZWNlaXZlcihfaW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXJPZkZpbHRlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgX2VuYWJsZVJlc3VsdENyb3NzVmVyaWZpY2F0aW9uKHRoaXMsIGZpbHRlci52ZXJpZmljYXRpb25FbmFibGVkKTtcclxuICAgICAgICAgICAgYXdhaXQgX2VuYWJsZVJlc3VsdERlZHVwbGljYXRpb24odGhpcywgZmlsdGVyLmR1cGxpY2F0ZUZpbHRlckVuYWJsZWQpO1xyXG4gICAgICAgICAgICBhd2FpdCBfc2V0RHVwbGljYXRlRm9yZ2V0VGltZSh0aGlzLCBmaWx0ZXIuZHVwbGljYXRlRm9yZ2V0VGltZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWF0ZXMgYSBjYXB0dXJpbmcgcHJvY2VzcyBiYXNlZCBvbiBhIHNwZWNpZmllZCB0ZW1wbGF0ZS4gVGhpcyBwcm9jZXNzIGlzIHJlcGVhdGVkIGZvciBlYWNoIGltYWdlIGZldGNoZWQgZnJvbSB0aGUgc291cmNlLlxyXG4gICAgICogQHBhcmFtIHRlbXBsYXRlTmFtZSBbT3B0aW9uYWxdIFNwZWNpZmllcyBhIFwiQ2FwdHVyZVZpc2lvblRlbXBsYXRlXCIgdG8gdXNlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNhcHR1cmluZyBwcm9jZXNzIGhhcyBzdWNjZXNzZnVsbHkgc3RhcnRlZC4gSXQgZG9lcyBub3QgcHJvdmlkZSBhbnkgdmFsdWUgdXBvbiByZXNvbHV0aW9uLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBzdGFydENhcHR1cmluZyh0ZW1wbGF0ZU5hbWUpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIGNoZWNrSXNEaXNwb3NlZCh0aGlzKTtcclxuICAgICAgICBpZiAoIXRoaXMuX2lzUGF1c2VTY2FuKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKCFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCdJbWFnZVNvdXJjZUFkYXB0ZXInIGlzIG5vdCBzZXQuIGNhbGwgJ3NldElucHV0JyBiZWZvcmUgJ3N0YXJ0Q2FwdHVyaW5nJ2ApO1xyXG4gICAgICAgIGlmICghdGVtcGxhdGVOYW1lKVxyXG4gICAgICAgICAgICB0ZW1wbGF0ZU5hbWUgPSB0aGlzLl9jdXJyZW50U2V0dGluZ3MuQ2FwdHVyZVZpc2lvblRlbXBsYXRlc1swXS5OYW1lO1xyXG4gICAgICAgIGNvbnN0IHRhc2tzID0gYXdhaXQgdGhpcy5jb250YWluc1Rhc2sodGVtcGxhdGVOYW1lKTtcclxuICAgICAgICBhd2FpdCBsb2FkV2FzbSh0YXNrcyk7XHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBXaHkgZG8gd2UgbmVlZCB0byByZS1hZGQgYW4gZXhpc3RpbmcgXCJmaWx0ZXJcIiB3aGVuIGNhbGxpbmcgXCJzdGFydENhcHR1cmluZ1wiP1xyXG4gICAgICAgICAqIEJlY2F1c2UgdGhlcmUgbWF5IGJlIGEgc2l0dWF0aW9uIHdoZXJlIHRoZSBjb3JyZXNwb25kaW5nIHdhc20gbW9kdWxlIGhhcyBub3QgYmVlbiBsb2FkZWQgd2hlbiBhZGRpbmcgXCJmaWx0ZXJcIixcclxuICAgICAgICAgKiBzbyBhZnRlciBjaGVja2luZyB0aGUgcmVxdWlyZWQgd2FzbSBtb2R1bGUgaW4gXCJzdGFydENhcHR1cmluZ1wiLCB3ZSB3aWxsIGFkZCBcImZpbHRlclwiIGFnYWluIHRvIGVuc3VyZSB0aGF0IFwiZmlsdGVyXCIgdGFrZXMgZWZmZWN0IGluIHdhc20uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBXaHkgbm90IGNoZWNrIGZvciB0aGUgcmVxdWlyZWQgd2FzbSB3aGVuIGFkZGluZyB0aGUgXCJmaWx0ZXJcIj9cclxuICAgICAgICAgKiBCZWNhdXNlIGVhY2ggcmVzdWx0IHR5cGUgaGFzIGEgZGVmYXVsdCB2YWx1ZSwgd2UgY2Fubm90IGtub3cgd2hpY2ggd2FzbSBtb2R1bGVzIGFyZSBhY3R1YWxseSBuZWVkZWQgdGhyb3VnaCB0aGUgcGFzc2VkIFwiZmlsdGVyXCJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoaXMgcGFydCBvZiB0aGUgbG9naWMgaGFzIHJvb20gZm9yIG9wdGltaXphdGlvbi4gd2lsbCBkby5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZm9yIChsZXQgZmlsdGVyIG9mIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0RmlsdGVyU2V0LCBcImZcIikpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRSZXN1bHRGaWx0ZXIoZmlsdGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRhc2tzLmluY2x1ZGVzKFwiZGxyXCIpICYmICEoKF9hID0gbWFwUGFja2FnZVJlZ2lzdGVyLmRscikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmJMb2FkQ29uZnVzYWJsZUNoYXJzRGF0YSkpIHtcclxuICAgICAgICAgICAgY29uc3QgX2VuZ2luZVJlc291cmNlUGF0aHMgPSBoYW5kbGVFbmdpbmVSZXNvdXJjZVBhdGhzKENvcmVNb2R1bGUuZW5naW5lUmVzb3VyY2VQYXRocywgYXV0b0Rpc2NvdmVyeVBhdGhzKTtcclxuICAgICAgICAgICAgYXdhaXQgKChfYiA9IG1hcFBhY2thZ2VSZWdpc3Rlci5kbHIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5sb2FkUmVjb2duaXRpb25EYXRhKFwiQ29uZnVzYWJsZUNoYXJzXCIsIF9lbmdpbmVSZXNvdXJjZVBhdGhzLmRscikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKS5pc0NhbWVyYUVuaGFuY2VyKSB7XHJcbiAgICAgICAgICAgIGlmICh0YXNrcy5pbmNsdWRlcyhcImRkblwiKSkge1xyXG4gICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKS5zZXRQaXhlbEZvcm1hdChFbnVtSW1hZ2VQaXhlbEZvcm1hdC5JUEZfQUJHUl84ODg4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuc2V0UGl4ZWxGb3JtYXQoRW51bUltYWdlUGl4ZWxGb3JtYXQuSVBGX0dSQVlTQ0FMRUQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLnNpbmdsZUZyYW1lTW9kZSAhPT0gdW5kZWZpbmVkICYmIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuc2luZ2xlRnJhbWVNb2RlICE9PSBcImRpc2FibGVkXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5fdGVtcGxhdGVOYW1lID0gdGVtcGxhdGVOYW1lO1xyXG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLm9uKFwic2luZ2xlRnJhbWVBY3F1aXJlZFwiLCB0aGlzLl9zaW5nbGVGcmFtZU1vZGVDYWxsYmFja0JpbmQpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNvbG91ckNoYW5uZWxVc2FnZVR5cGUgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLmdldENvbG91ckNoYW5uZWxVc2FnZVR5cGUoKTtcclxuICAgICAgICBpZiAoY29sb3VyQ2hhbm5lbFVzYWdlVHlwZSA9PT0gRW51bUNvbG91ckNoYW5uZWxVc2FnZVR5cGUuQ0NVVF9BVVRPKSB7XHJcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuc2V0Q29sb3VyQ2hhbm5lbFVzYWdlVHlwZSh0YXNrcy5pbmNsdWRlcyhcImRkblwiKSA/XHJcbiAgICAgICAgICAgICAgICBFbnVtQ29sb3VyQ2hhbm5lbFVzYWdlVHlwZS5DQ1VUX0ZVTExfQ0hBTk5FTFxyXG4gICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgIEVudW1Db2xvdXJDaGFubmVsVXNhZ2VUeXBlLkNDVVRfWV9DSEFOTkVMX09OTFkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9wcm9taXNlU3RhcnRTY2FuLCBcImZcIikgJiYgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9wcm9taXNlU3RhcnRTY2FuLCBcImZcIikuaXNQZW5kaW5nKVxyXG4gICAgICAgICAgICByZXR1cm4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9wcm9taXNlU3RhcnRTY2FuLCBcImZcIik7XHJcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9wcm9taXNlU3RhcnRTY2FuLCBuZXcgTXV0YWJsZVByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kaXNwb3NlZClcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgbGV0IHRhc2tJRCA9IGdldE5leHRUYXNrSUQoKTtcclxuICAgICAgICAgICAgbWFwVGFza0NhbGxCYWNrW3Rhc2tJRF0gPSBhc3luYyAoYm9keSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Byb21pc2VTdGFydFNjYW4sIFwiZlwiKSB8fCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Byb21pc2VTdGFydFNjYW4sIFwiZlwiKS5pc0Z1bGZpbGxlZClcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNQYXVzZVNjYW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc091dHB1dE9yaWdpbmFsSW1hZ2UgPSBib2R5LmlzT3V0cHV0T3JpZ2luYWxJbWFnZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkICYmIGNsZWFyVGltZW91dCh0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9taW5JbWFnZUNhcHR1cmVJbnRlcnZhbCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuc3RhcnRGZXRjaGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xvb3BSZWFkVmlkZW8odGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBhd2FpdCB0aGlzLl9sb29wUmVhZFZpZGVvKHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0gY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgcmooZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImN2cl9zdGFydENhcHR1cmluZ1wiLFxyXG4gICAgICAgICAgICAgICAgaWQ6IHRhc2tJRCxcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSUQ6IHRoaXMuX2luc3RhbmNlSUQsXHJcbiAgICAgICAgICAgICAgICBib2R5OiB7IHRlbXBsYXRlTmFtZSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pLCBcImZcIik7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcHJvbWlzZVN0YXJ0U2NhbiwgXCJmXCIpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wcyB0aGUgY2FwdHVyaW5nIHByb2Nlc3MuXHJcbiAgICAgKi9cclxuICAgIHN0b3BDYXB0dXJpbmcoKSB7XHJcbiAgICAgICAgY2hlY2tJc0Rpc3Bvc2VkKHRoaXMpO1xyXG4gICAgICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLmlzQ2FtZXJhRW5oYW5jZXIpIHtcclxuICAgICAgICAgICAgaWYgKF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuc2luZ2xlRnJhbWVNb2RlICE9PSB1bmRlZmluZWQgJiYgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKS5zaW5nbGVGcmFtZU1vZGUgIT09IFwiZGlzYWJsZWRcIikge1xyXG4gICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKS5vZmYoXCJzaW5nbGVGcmFtZUFjcXVpcmVkXCIsIHRoaXMuX3NpbmdsZUZyYW1lTW9kZUNhbGxiYWNrQmluZCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgX2NsZWFyVmVyaWZ5TGlzdCh0aGlzKTtcclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLnN0b3BGZXRjaGluZygpO1xyXG4gICAgICAgIHRoaXMuX2F2ZXJhZ2VQcm9jZXNzaW50VGltZUFycmF5ID0gW107XHJcbiAgICAgICAgdGhpcy5fYXZlcmFnZVRpbWUgPSA5OTk7XHJcbiAgICAgICAgdGhpcy5faXNQYXVzZVNjYW4gPSB0cnVlO1xyXG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcHJvbWlzZVN0YXJ0U2NhbiwgbnVsbCwgXCJmXCIpO1xyXG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuc2V0Q29sb3VyQ2hhbm5lbFVzYWdlVHlwZShFbnVtQ29sb3VyQ2hhbm5lbFVzYWdlVHlwZS5DQ1VUX0FVVE8pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgY29udGFpbnNUYXNrKHRlbXBsYXRlTmFtZSkge1xyXG4gICAgICAgIGNoZWNrSXNEaXNwb3NlZCh0aGlzKTtcclxuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgICAgICBtYXBUYXNrQ2FsbEJhY2tbdGFza0lEXSA9IGFzeW5jIChib2R5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzKEpTT04ucGFyc2UoYm9keS50YXNrcykpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV4ID0gbmV3IEVycm9yKGJvZHkubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXguc3RhY2sgPSBib2R5LnN0YWNrICsgJ1xcbicgKyBleC5zdGFjaztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmooZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJjdnJfY29udGFpbnNUYXNrXCIsXHJcbiAgICAgICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJRDogdGhpcy5faW5zdGFuY2VJRCxcclxuICAgICAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFZpZGVvIHN0cmVhbSBjYXB0dXJlLCByZWN1cnNpdmUgY2FsbCwgbG9vcCBmcmFtZSBjYXB0dXJlXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIF9sb29wUmVhZFZpZGVvKHRlbXBsYXRlTmFtZSkge1xyXG4gICAgICAgIGlmICgodGhpcy5kaXNwb3NlZCB8fCB0aGlzLl9pc1BhdXNlU2NhbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzU2Nhbm5lciwgdHJ1ZSwgXCJmXCIpO1xyXG4gICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLmlzQnVmZmVyRW1wdHkoKSkge1xyXG4gICAgICAgICAgICBpZiAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKS5oYXNOZXh0SW1hZ2VUb0ZldGNoKCkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGxpc3RlbmVyIG9mIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhU3RhdGVMaXN0ZW5lclNldCwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIub25JbWFnZVNvdXJjZVN0YXRlUmVjZWl2ZWQgJiYgbGlzdGVuZXIub25JbWFnZVNvdXJjZVN0YXRlUmVjZWl2ZWQoRW51bUltYWdlU291cmNlU3RhdGUuSVNTX0JVRkZFUl9FTVBUWSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoIShfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLmhhc05leHRJbWFnZVRvRmV0Y2goKSkpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGxpc3RlbmVyIG9mIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhU3RhdGVMaXN0ZW5lclNldCwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdGVuZXIub25JbWFnZVNvdXJjZVN0YXRlUmVjZWl2ZWQgJiYgbGlzdGVuZXIub25JbWFnZVNvdXJjZVN0YXRlUmVjZWl2ZWQoRW51bUltYWdlU291cmNlU3RhdGUuSVNTX0VYSEFVU1RFRCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX21pbkltYWdlQ2FwdHVyZUludGVydmFsID09PSAtMSB8fCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLmlzQnVmZmVyRW1wdHkoKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuaXNCdWZmZXJFbXB0eSgpICYmIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKVxyXG4gICAgICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBidWZmZXIgaXMgZW1wdHkgc28gZmV0Y2ggaW1hZ2VgKTtcclxuICAgICAgICAgICAgICAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykge1xyXG4gICAgICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBEQ0U6IHN0YXJ0IGZldGNoaW5nIGEgZnJhbWU6ICR7RGF0ZS5ub3coKX1gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX2RzSW1hZ2UgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLmZldGNoSW1hZ2UoKTtcclxuICAgICAgICAgICAgICAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykge1xyXG4gICAgICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBEQ0U6IGZpbmlzaCBmZXRjaGluZyBhIGZyYW1lOiAke0RhdGUubm93KCl9YCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLnNldEltYWdlRmV0Y2hJbnRlcnZhbCh0aGlzLl9hdmVyYWdlVGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlUnVuQ3Vycm5ldEZ1bmModGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKS5zZXRJbWFnZUZldGNoSW50ZXJ2YWwodGhpcy5fYXZlcmFnZVRpbWUgLSAodGhpcy5fZHNJbWFnZSAmJiB0aGlzLl9kc0ltYWdlLnRhZyA/IHRoaXMuX2RzSW1hZ2UudGFnLnRpbWVTcGVudCA6IDApKTtcclxuICAgICAgICAgICAgdGhpcy5fZHNJbWFnZSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuZ2V0SW1hZ2UoKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RzSW1hZ2UudGFnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHRoaXMuX2RzSW1hZ2UudGFnLnRpbWVTdGFtcCA+IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlUnVuQ3Vycm5ldEZ1bmModGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLl9kc0ltYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlUnVuQ3Vycm5ldEZ1bmModGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCByZWNlaXZlciBvZiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Jlc3VsdFJlY2VpdmVyU2V0LCBcImZcIikpIHtcclxuICAgICAgICAgICAgdGhpcy5faXNPdXRwdXRPcmlnaW5hbEltYWdlICYmIHJlY2VpdmVyLm9uT3JpZ2luYWxJbWFnZVJlc3VsdFJlY2VpdmVkICYmIHJlY2VpdmVyLm9uT3JpZ2luYWxJbWFnZVJlc3VsdFJlY2VpdmVkKHsgaW1hZ2VEYXRhOiB0aGlzLl9kc0ltYWdlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjYXB0dXJlXHJcbiAgICAgICAgLy8gdHJ5IHtcclxuICAgICAgICAvLyAgIGNvbnN0IGNhcHR1cmVTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIC8vICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5fY2FwdHVyZURzaW1hZ2UodGhpcy5fZHNJbWFnZSwgdGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAvLyAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYG5vIGpzIGhhbmRsZSB0aW1lOiAke0RhdGUubm93KCkgLSBjYXB0dXJlU3RhcnRUaW1lfWApO1xyXG4gICAgICAgIC8vICAgaWYgKHRoaXMuX2lzUGF1c2VTY2FuKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuX3JlUnVuQ3Vycm5ldEZ1bmModGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAvLyAgICAgcmV0dXJuO1xyXG4gICAgICAgIC8vICAgfVxyXG4gICAgICAgIC8vICAgKHJlc3VsdCBhcyBhbnkpLm9yaWdpbmFsSW1hZ2VUYWcgPSB0aGlzLl9kc0ltYWdlLnRhZyA/IHRoaXMuX2RzSW1hZ2UudGFnIDogbnVsbDtcclxuICAgICAgICAvLyAgIGNvbnN0IHJlc3VsdENvbW1vblBhcnQgPSB7XHJcbiAgICAgICAgLy8gICAgIG9yaWdpbmFsSW1hZ2VIYXNoSWQ6IHJlc3VsdC5vcmlnaW5hbEltYWdlSGFzaElkLFxyXG4gICAgICAgIC8vICAgICBvcmlnaW5hbEltYWdlVGFnOiByZXN1bHQub3JpZ2luYWxJbWFnZVRhZyxcclxuICAgICAgICAvLyAgICAgZXJyb3JDb2RlOiByZXN1bHQuZXJyb3JDb2RlLFxyXG4gICAgICAgIC8vICAgICBlcnJvclN0cmluZzogcmVzdWx0LmVycm9yU3RyaW5nXHJcbiAgICAgICAgLy8gICB9XHJcbiAgICAgICAgLy8gICBmb3IgKGxldCByZWNlaXZlciBvZiB0aGlzLiNyZXN1bHRSZWNlaXZlclNldCkge1xyXG4gICAgICAgIC8vICAgICBpZiAoKHJlY2VpdmVyIGFzIGFueSkuaXNEY2UpIHtcclxuICAgICAgICAvLyAgICAgICBjb25zdCBkcmF3VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgLy8gICAgICAgKHJlY2VpdmVyIGFzIGFueSkub25DYXB0dXJlZFJlc3VsdFJlY2VpdmVkKHJlc3VsdCwge1xyXG4gICAgICAgIC8vICAgICAgICAgaXNEZXRlY3RWZXJpZnlPcGVuOiB0aGlzLl9pc09wZW5EZXRlY3RWZXJpZnksXHJcbiAgICAgICAgLy8gICAgICAgICBpc05vcm1hbGl6ZVZlcmlmeU9wZW46IHRoaXMuX2lzT3Blbk5vcm1hbGl6ZVZlcmlmeSxcclxuICAgICAgICAvLyAgICAgICAgIGlzQmFyY29kZVZlcmlmeU9wZW46IHRoaXMuX2lzT3BlbkJhcmNvZGVWZXJpZnksXHJcbiAgICAgICAgLy8gICAgICAgICBpc0xhYmVsVmVyaWZ5T3BlbjogdGhpcy5faXNPcGVuTGFiZWxWZXJpZnksXHJcbiAgICAgICAgLy8gICAgICAgfSk7XHJcbiAgICAgICAgLy8gICAgICAgaWYgKENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBjb25zdCB0aW1lID0gRGF0ZS5ub3coKSAtIGRyYXdUaW1lO1xyXG4gICAgICAgIC8vICAgICAgICAgaWYgKHRpbWUgPiAxMCkgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYGRyYXcgcmVzdWx0IHRpbWU6ICR7dGltZX1gKVxyXG4gICAgICAgIC8vICAgICAgIH07XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgcmVjZWl2ZXIub25EZWNvZGVkQmFyY29kZXNSZWNlaXZlZCAmJiByZXN1bHQuYmFyY29kZVJlc3VsdEl0ZW1zICYmIHJlY2VpdmVyLm9uRGVjb2RlZEJhcmNvZGVzUmVjZWl2ZWQoe1xyXG4gICAgICAgIC8vICAgICAgIC4uLnJlc3VsdENvbW1vblBhcnQsXHJcbiAgICAgICAgLy8gICAgICAgYmFyY29kZVJlc3VsdEl0ZW1zOiByZXN1bHQuYmFyY29kZVJlc3VsdEl0ZW1zLmZpbHRlcigoaXRlbTogYW55KSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlciB9KVxyXG4gICAgICAgIC8vICAgICB9IGFzIERlY29kZWRCYXJjb2Rlc1Jlc3VsdCk7XHJcbiAgICAgICAgLy8gICAgIHJlY2VpdmVyLm9uUmVjb2duaXplZFRleHRMaW5lc1JlY2VpdmVkICYmIHJlc3VsdC50ZXh0TGluZVJlc3VsdEl0ZW1zICYmIHJlY2VpdmVyLm9uUmVjb2duaXplZFRleHRMaW5lc1JlY2VpdmVkKHtcclxuICAgICAgICAvLyAgICAgICAuLi5yZXN1bHRDb21tb25QYXJ0LFxyXG4gICAgICAgIC8vICAgICAgIHRleHRMaW5lUmVzdWx0SXRlbXM6IHJlc3VsdC50ZXh0TGluZVJlc3VsdEl0ZW1zLmZpbHRlcigoaXRlbTogYW55KSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlciB9KVxyXG4gICAgICAgIC8vICAgICB9IGFzIFJlY29nbml6ZWRUZXh0TGluZXNSZXN1bHQpO1xyXG4gICAgICAgIC8vICAgICByZWNlaXZlci5vbkRldGVjdGVkUXVhZHNSZWNlaXZlZCAmJiByZXN1bHQuZGV0ZWN0ZWRRdWFkUmVzdWx0SXRlbXMgJiYgcmVjZWl2ZXIub25EZXRlY3RlZFF1YWRzUmVjZWl2ZWQoe1xyXG4gICAgICAgIC8vICAgICAgIC4uLnJlc3VsdENvbW1vblBhcnQsXHJcbiAgICAgICAgLy8gICAgICAgZGV0ZWN0ZWRRdWFkUmVzdWx0SXRlbXM6IHJlc3VsdC5kZXRlY3RlZFF1YWRSZXN1bHRJdGVtcy5maWx0ZXIoKGl0ZW06IGFueSkgPT4geyByZXR1cm4gIWl0ZW0uaXNGaWx0ZXIgfSlcclxuICAgICAgICAvLyAgICAgfSBhcyBEZXRlY3RlZFF1YWRzUmVzdWx0KTtcclxuICAgICAgICAvLyAgICAgcmVjZWl2ZXIub25Ob3JtYWxpemVkSW1hZ2VzUmVjZWl2ZWQgJiYgcmVzdWx0Lm5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zICYmIHJlY2VpdmVyLm9uTm9ybWFsaXplZEltYWdlc1JlY2VpdmVkKHtcclxuICAgICAgICAvLyAgICAgICAuLi5yZXN1bHRDb21tb25QYXJ0LFxyXG4gICAgICAgIC8vICAgICAgIG5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zOiByZXN1bHQubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMuZmlsdGVyKChpdGVtOiBhbnkpID0+IHsgcmV0dXJuICFpdGVtLmlzRmlsdGVyIH0pXHJcbiAgICAgICAgLy8gICAgIH0gYXMgTm9ybWFsaXplZEltYWdlc1Jlc3VsdCk7XHJcbiAgICAgICAgLy8gICAgIHJlY2VpdmVyLm9uUGFyc2VkUmVzdWx0c1JlY2VpdmVkICYmIHJlc3VsdC5wYXJzZWRSZXN1bHRJdGVtcyAmJiByZWNlaXZlci5vblBhcnNlZFJlc3VsdHNSZWNlaXZlZCh7XHJcbiAgICAgICAgLy8gICAgICAgLi4ucmVzdWx0Q29tbW9uUGFydCxcclxuICAgICAgICAvLyAgICAgICBwYXJzZWRSZXN1bHRJdGVtczogcmVzdWx0LnBhcnNlZFJlc3VsdEl0ZW1zLmZpbHRlcigoaXRlbTogYW55KSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlciB9KVxyXG4gICAgICAgIC8vICAgICB9IGFzIFBhcnNlZFJlc3VsdCk7XHJcbiAgICAgICAgLy8gICAgIGlmIChyZWNlaXZlci5vbkNhcHR1cmVkUmVzdWx0UmVjZWl2ZWQgJiYgIShyZWNlaXZlciBhcyBhbnkpLmlzRGNlKSB7XHJcbiAgICAgICAgLy8gICAgICAgKHJlc3VsdCBhcyBhbnkpLml0ZW1zID0gcmVzdWx0Lml0ZW1zLmZpbHRlcigoaXRlbTogYW55KSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlciB9KTtcclxuICAgICAgICAvLyAgICAgICBpZiAoKHJlc3VsdCBhcyBhbnkpLmJhcmNvZGVSZXN1bHRJdGVtcykgKHJlc3VsdCBhcyBhbnkpLmJhcmNvZGVSZXN1bHRJdGVtcyA9IHJlc3VsdC5iYXJjb2RlUmVzdWx0SXRlbXMuZmlsdGVyKChpdGVtOiBhbnkpID0+IHsgcmV0dXJuICFpdGVtLmlzRmlsdGVyIH0pO1xyXG4gICAgICAgIC8vICAgICAgIGlmICgocmVzdWx0IGFzIGFueSkudGV4dExpbmVSZXN1bHRJdGVtcykgKHJlc3VsdCBhcyBhbnkpLnRleHRMaW5lUmVzdWx0SXRlbXMgPSByZXN1bHQudGV4dExpbmVSZXN1bHRJdGVtcy5maWx0ZXIoKGl0ZW06IGFueSkgPT4geyByZXR1cm4gIWl0ZW0uaXNGaWx0ZXIgfSk7XHJcbiAgICAgICAgLy8gICAgICAgaWYgKChyZXN1bHQgYXMgYW55KS5kZXRlY3RlZFF1YWRSZXN1bHRJdGVtcykgKHJlc3VsdCBhcyBhbnkpLmRldGVjdGVkUXVhZFJlc3VsdEl0ZW1zID0gcmVzdWx0LmRldGVjdGVkUXVhZFJlc3VsdEl0ZW1zLmZpbHRlcigoaXRlbTogYW55KSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlciB9KTtcclxuICAgICAgICAvLyAgICAgICBpZiAoKHJlc3VsdCBhcyBhbnkpLm5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zKSAocmVzdWx0IGFzIGFueSkubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMgPSByZXN1bHQubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMuZmlsdGVyKChpdGVtOiBhbnkpID0+IHsgcmV0dXJuICFpdGVtLmlzRmlsdGVyIH0pO1xyXG4gICAgICAgIC8vICAgICAgIGlmICgocmVzdWx0IGFzIGFueSkucGFyc2VkUmVzdWx0SXRlbXMpIChyZXN1bHQgYXMgYW55KS5wYXJzZWRSZXN1bHRJdGVtcyA9IHJlc3VsdC5wYXJzZWRSZXN1bHRJdGVtcy5maWx0ZXIoKGl0ZW06IGFueSkgPT4geyByZXR1cm4gIWl0ZW0uaXNGaWx0ZXIgfSk7XHJcbiAgICAgICAgLy8gICAgICAgcmVjZWl2ZXIub25DYXB0dXJlZFJlc3VsdFJlY2VpdmVkKHJlc3VsdCk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgIH1cclxuICAgICAgICAvLyAgIGNvbnN0IGZldGNoSW1hZ2VDYWxjdWxhdGVTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIC8vICAgaWYgKHRoaXMuX21pbkltYWdlQ2FwdHVyZUludGVydmFsID4gLTEpIHtcclxuICAgICAgICAvLyAgICAgaWYgKHRoaXMuX2F2ZXJhZ2VQcm9jZXNzaW50VGltZUFycmF5Lmxlbmd0aCA9PT0gNSkgdGhpcy5fYXZlcmFnZVByb2Nlc3NpbnRUaW1lQXJyYXkuc2hpZnQoKTtcclxuICAgICAgICAvLyAgICAgaWYgKHRoaXMuX2F2ZXJhZ2VGZXRjaEltYWdlVGltZUFycmF5Lmxlbmd0aCA9PT0gNSkgdGhpcy5fYXZlcmFnZUZldGNoSW1hZ2VUaW1lQXJyYXkuc2hpZnQoKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5fYXZlcmFnZVByb2Nlc3NpbnRUaW1lQXJyYXkucHVzaChEYXRlLm5vdygpIC0gY2FwdHVyZVN0YXJ0VGltZSk7XHJcbiAgICAgICAgLy8gICAgIC8vdGhpcy5fYXZlcmFnZVRpbWUgPSB0aGlzLl9hdmVyYWdlUHJvY2Vzc2ludFRpbWVBcnJheS5yZWR1Y2UoKHRpbWUsIHZhbHVlKSA9PiB0aW1lICsgdmFsdWUsIDApIC8gdGhpcy5fYXZlcmFnZVByb2Nlc3NpbnRUaW1lQXJyYXkubGVuZ3RoO1xyXG4gICAgICAgIC8vICAgICB0aGlzLl9hdmVyYWdlRmV0Y2hJbWFnZVRpbWVBcnJheS5wdXNoKCh0aGlzLl9kc0ltYWdlICYmIHRoaXMuX2RzSW1hZ2UudGFnID8gKHRoaXMuX2RzSW1hZ2UudGFnIGFzIGFueSkudGltZVNwZW50IDogMCkpO1xyXG4gICAgICAgIC8vICAgICB0aGlzLl9hdmVyYWdlVGltZSA9IE1hdGgubWluKC4uLnRoaXMuX2F2ZXJhZ2VQcm9jZXNzaW50VGltZUFycmF5KSAtIE1hdGgubWF4KC4uLnRoaXMuX2F2ZXJhZ2VGZXRjaEltYWdlVGltZUFycmF5KTtcclxuICAgICAgICAvLyAgICAgdGhpcy5fYXZlcmFnZVRpbWUgPSB0aGlzLl9hdmVyYWdlVGltZSA+IDAgPyB0aGlzLl9hdmVyYWdlVGltZSA6IDA7XHJcbiAgICAgICAgLy8gICAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykge1xyXG4gICAgICAgIC8vICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBtaW5JbWFnZUNhcHR1cmVJbnRlcnZhbDogJHt0aGlzLl9taW5JbWFnZUNhcHR1cmVJbnRlcnZhbH1gKTtcclxuICAgICAgICAvLyAgICAgICBDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZyhgYXZlcmFnZVByb2Nlc3NpbnRUaW1lQXJyYXk6ICR7dGhpcy5fYXZlcmFnZVByb2Nlc3NpbnRUaW1lQXJyYXl9YCk7XHJcbiAgICAgICAgLy8gICAgICAgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYGF2ZXJhZ2VGZXRjaEltYWdlVGltZUFycmF5OiAke3RoaXMuX2F2ZXJhZ2VGZXRjaEltYWdlVGltZUFycmF5fWApO1xyXG4gICAgICAgIC8vICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBhdmVyYWdlVGltZTogJHt0aGlzLl9hdmVyYWdlVGltZX1gKTtcclxuICAgICAgICAvLyAgICAgfTtcclxuICAgICAgICAvLyAgIH1cclxuICAgICAgICAvLyAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykge1xyXG4gICAgICAgIC8vICAgICBjb25zdCB0aW1lID0gRGF0ZS5ub3coKSAtIGZldGNoSW1hZ2VDYWxjdWxhdGVTdGFydFRpbWU7XHJcbiAgICAgICAgLy8gICAgIGlmICh0aW1lID4gMTApIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBmZXRjaCBpbWFnZSBjYWxjdWxhdGUgdGltZTogJHt0aW1lfWApXHJcbiAgICAgICAgLy8gICB9O1xyXG4gICAgICAgIC8vICAgaWYgKENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKSBDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZyhgdGltZSBmaW5pc2ggZGVjb2RlOiAke0RhdGUubm93KCl9YClcclxuICAgICAgICAvLyAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYG1haW4gdGltZTogJHtEYXRlLm5vdygpIC0gY2FwdHVyZVN0YXJ0VGltZX1gKTtcclxuICAgICAgICAvLyAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XCIpO1xyXG4gICAgICAgIC8vICAgdGhpcy5fbG9vcFJlYWRWaWRlb1RpbWVvdXRJZCAmJiBjbGVhclRpbWVvdXQodGhpcy5fbG9vcFJlYWRWaWRlb1RpbWVvdXRJZCk7XHJcbiAgICAgICAgLy8gICBpZiAodGhpcy5fbWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwgPiAwICYmIHRoaXMuX21pbkltYWdlQ2FwdHVyZUludGVydmFsID49IHRoaXMuX2F2ZXJhZ2VUaW1lKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuX2xvb3BSZWFkVmlkZW9UaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAvLyAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvKHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgLy8gICAgIH0sIHRoaXMuX21pbkltYWdlQ2FwdHVyZUludGVydmFsIC0gdGhpcy5fYXZlcmFnZVRpbWUpO1xyXG4gICAgICAgIC8vICAgfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5fbG9vcFJlYWRWaWRlb1RpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIC8vICAgICAgIHRoaXMuX2xvb3BSZWFkVmlkZW8odGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAvLyAgICAgfSwgTWF0aC5tYXgodGhpcy5fbWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwsIDApKTtcclxuICAgICAgICAvLyAgIH1cclxuICAgICAgICAvLyB9IGNhdGNoIChleCkge1xyXG4gICAgICAgIC8vICAgdGhpcy4jaXNhLnN0b3BGZXRjaGluZygpO1xyXG4gICAgICAgIC8vICAgdGhpcy5fbG9vcFJlYWRWaWRlb1RpbWVvdXRJZCAmJiBjbGVhclRpbWVvdXQodGhpcy5fbG9vcFJlYWRWaWRlb1RpbWVvdXRJZCk7XHJcbiAgICAgICAgLy8gICB0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuI2lzYS5zdGFydEZldGNoaW5nKCk7XHJcbiAgICAgICAgLy8gICAgIHRoaXMuX2xvb3BSZWFkVmlkZW8odGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAvLyAgIH0sIE1hdGgubWF4KHRoaXMuX21pbkltYWdlQ2FwdHVyZUludGVydmFsLCAxMDAwKSk7XHJcbiAgICAgICAgLy8gICBpZiAoIShleC5tZXNzYWdlID09PSAncGxhdGZvcm0gZXJyb3InKSkge1xyXG4gICAgICAgIC8vICAgICB0aHJvdyBleDtcclxuICAgICAgICAvLyAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgY29uc3QgY2FwdHVyZVN0YXJ0VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgdGhpcy5fY2FwdHVyZURzaW1hZ2UodGhpcy5fZHNJbWFnZSwgdGVtcGxhdGVOYW1lKS50aGVuKGFzeW5jIChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgaWYgKENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKVxyXG4gICAgICAgICAgICAgICAgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYG5vIGpzIGhhbmRsZSB0aW1lOiAke0RhdGUubm93KCkgLSBjYXB0dXJlU3RhcnRUaW1lfWApO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5faXNQYXVzZVNjYW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlUnVuQ3Vycm5ldEZ1bmModGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXN1bHQub3JpZ2luYWxJbWFnZVRhZyA9IHRoaXMuX2RzSW1hZ2UudGFnID8gdGhpcy5fZHNJbWFnZS50YWcgOiBudWxsO1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHRDb21tb25QYXJ0ID0ge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxJbWFnZUhhc2hJZDogcmVzdWx0Lm9yaWdpbmFsSW1hZ2VIYXNoSWQsXHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEltYWdlVGFnOiByZXN1bHQub3JpZ2luYWxJbWFnZVRhZyxcclxuICAgICAgICAgICAgICAgIGVycm9yQ29kZTogcmVzdWx0LmVycm9yQ29kZSxcclxuICAgICAgICAgICAgICAgIGVycm9yU3RyaW5nOiByZXN1bHQuZXJyb3JTdHJpbmdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZm9yIChsZXQgcmVjZWl2ZXIgb2YgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRSZWNlaXZlclNldCwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVjZWl2ZXIuaXNEY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkcmF3VGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXIub25DYXB0dXJlZFJlc3VsdFJlY2VpdmVkKHJlc3VsdCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0RldGVjdFZlcmlmeU9wZW46IHRoaXMuX2lzT3BlbkRldGVjdFZlcmlmeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNOb3JtYWxpemVWZXJpZnlPcGVuOiB0aGlzLl9pc09wZW5Ob3JtYWxpemVWZXJpZnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzQmFyY29kZVZlcmlmeU9wZW46IHRoaXMuX2lzT3BlbkJhcmNvZGVWZXJpZnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTGFiZWxWZXJpZnlPcGVuOiB0aGlzLl9pc09wZW5MYWJlbFZlcmlmeSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGUubm93KCkgLSBkcmF3VGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWUgPiAxMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBkcmF3IHJlc3VsdCB0aW1lOiAke3RpbWV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIub25EZWNvZGVkQmFyY29kZXNSZWNlaXZlZCAmJiByZXN1bHQuYmFyY29kZVJlc3VsdEl0ZW1zICYmIHJlY2VpdmVyLm9uRGVjb2RlZEJhcmNvZGVzUmVjZWl2ZWQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXN1bHRDb21tb25QYXJ0KSwgeyBiYXJjb2RlUmVzdWx0SXRlbXM6IHJlc3VsdC5iYXJjb2RlUmVzdWx0SXRlbXMuZmlsdGVyKChpdGVtKSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlcjsgfSkgfSkpO1xyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIub25SZWNvZ25pemVkVGV4dExpbmVzUmVjZWl2ZWQgJiYgcmVzdWx0LnRleHRMaW5lUmVzdWx0SXRlbXMgJiYgcmVjZWl2ZXIub25SZWNvZ25pemVkVGV4dExpbmVzUmVjZWl2ZWQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXN1bHRDb21tb25QYXJ0KSwgeyB0ZXh0TGluZVJlc3VsdEl0ZW1zOiByZXN1bHQudGV4dExpbmVSZXN1bHRJdGVtcy5maWx0ZXIoKGl0ZW0pID0+IHsgcmV0dXJuICFpdGVtLmlzRmlsdGVyOyB9KSB9KSk7XHJcbiAgICAgICAgICAgICAgICByZWNlaXZlci5vbkRldGVjdGVkUXVhZHNSZWNlaXZlZCAmJiByZXN1bHQuZGV0ZWN0ZWRRdWFkUmVzdWx0SXRlbXMgJiYgcmVjZWl2ZXIub25EZXRlY3RlZFF1YWRzUmVjZWl2ZWQoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXN1bHRDb21tb25QYXJ0KSwgeyBkZXRlY3RlZFF1YWRSZXN1bHRJdGVtczogcmVzdWx0LmRldGVjdGVkUXVhZFJlc3VsdEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4geyByZXR1cm4gIWl0ZW0uaXNGaWx0ZXI7IH0pIH0pKTtcclxuICAgICAgICAgICAgICAgIHJlY2VpdmVyLm9uTm9ybWFsaXplZEltYWdlc1JlY2VpdmVkICYmIHJlc3VsdC5ub3JtYWxpemVkSW1hZ2VSZXN1bHRJdGVtcyAmJiByZWNlaXZlci5vbk5vcm1hbGl6ZWRJbWFnZXNSZWNlaXZlZChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlc3VsdENvbW1vblBhcnQpLCB7IG5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zOiByZXN1bHQubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMuZmlsdGVyKChpdGVtKSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlcjsgfSkgfSkpO1xyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZXIub25QYXJzZWRSZXN1bHRzUmVjZWl2ZWQgJiYgcmVzdWx0LnBhcnNlZFJlc3VsdEl0ZW1zICYmIHJlY2VpdmVyLm9uUGFyc2VkUmVzdWx0c1JlY2VpdmVkKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVzdWx0Q29tbW9uUGFydCksIHsgcGFyc2VkUmVzdWx0SXRlbXM6IHJlc3VsdC5wYXJzZWRSZXN1bHRJdGVtcy5maWx0ZXIoKGl0ZW0pID0+IHsgcmV0dXJuICFpdGVtLmlzRmlsdGVyOyB9KSB9KSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVjZWl2ZXIub25DYXB0dXJlZFJlc3VsdFJlY2VpdmVkICYmICFyZWNlaXZlci5pc0RjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5pdGVtcyA9IHJlc3VsdC5pdGVtcy5maWx0ZXIoKGl0ZW0pID0+IHsgcmV0dXJuICFpdGVtLmlzRmlsdGVyOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmJhcmNvZGVSZXN1bHRJdGVtcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmJhcmNvZGVSZXN1bHRJdGVtcyA9IHJlc3VsdC5iYXJjb2RlUmVzdWx0SXRlbXMuZmlsdGVyKChpdGVtKSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlcjsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC50ZXh0TGluZVJlc3VsdEl0ZW1zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQudGV4dExpbmVSZXN1bHRJdGVtcyA9IHJlc3VsdC50ZXh0TGluZVJlc3VsdEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4geyByZXR1cm4gIWl0ZW0uaXNGaWx0ZXI7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZGV0ZWN0ZWRRdWFkUmVzdWx0SXRlbXMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5kZXRlY3RlZFF1YWRSZXN1bHRJdGVtcyA9IHJlc3VsdC5kZXRlY3RlZFF1YWRSZXN1bHRJdGVtcy5maWx0ZXIoKGl0ZW0pID0+IHsgcmV0dXJuICFpdGVtLmlzRmlsdGVyOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lm5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMgPSByZXN1bHQubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMuZmlsdGVyKChpdGVtKSA9PiB7IHJldHVybiAhaXRlbS5pc0ZpbHRlcjsgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5wYXJzZWRSZXN1bHRJdGVtcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnBhcnNlZFJlc3VsdEl0ZW1zID0gcmVzdWx0LnBhcnNlZFJlc3VsdEl0ZW1zLmZpbHRlcigoaXRlbSkgPT4geyByZXR1cm4gIWl0ZW0uaXNGaWx0ZXI7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyLm9uQ2FwdHVyZWRSZXN1bHRSZWNlaXZlZChyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGZldGNoSW1hZ2VDYWxjdWxhdGVTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2F2ZXJhZ2VQcm9jZXNzaW50VGltZUFycmF5Lmxlbmd0aCA9PT0gNSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdmVyYWdlUHJvY2Vzc2ludFRpbWVBcnJheS5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2F2ZXJhZ2VGZXRjaEltYWdlVGltZUFycmF5Lmxlbmd0aCA9PT0gNSlcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hdmVyYWdlRmV0Y2hJbWFnZVRpbWVBcnJheS5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYXZlcmFnZVByb2Nlc3NpbnRUaW1lQXJyYXkucHVzaChEYXRlLm5vdygpIC0gY2FwdHVyZVN0YXJ0VGltZSk7XHJcbiAgICAgICAgICAgICAgICAvL3RoaXMuX2F2ZXJhZ2VUaW1lID0gdGhpcy5fYXZlcmFnZVByb2Nlc3NpbnRUaW1lQXJyYXkucmVkdWNlKCh0aW1lLCB2YWx1ZSkgPT4gdGltZSArIHZhbHVlLCAwKSAvIHRoaXMuX2F2ZXJhZ2VQcm9jZXNzaW50VGltZUFycmF5Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2F2ZXJhZ2VGZXRjaEltYWdlVGltZUFycmF5LnB1c2goKHRoaXMuX2RzSW1hZ2UgJiYgdGhpcy5fZHNJbWFnZS50YWcgPyB0aGlzLl9kc0ltYWdlLnRhZy50aW1lU3BlbnQgOiAwKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hdmVyYWdlVGltZSA9IE1hdGgubWluKC4uLnRoaXMuX2F2ZXJhZ2VQcm9jZXNzaW50VGltZUFycmF5KSAtIE1hdGgubWF4KC4uLnRoaXMuX2F2ZXJhZ2VGZXRjaEltYWdlVGltZUFycmF5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2F2ZXJhZ2VUaW1lID0gdGhpcy5fYXZlcmFnZVRpbWUgPiAwID8gdGhpcy5fYXZlcmFnZVRpbWUgOiAwO1xyXG4gICAgICAgICAgICAgICAgaWYgKENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYG1pbkltYWdlQ2FwdHVyZUludGVydmFsOiAke3RoaXMuX21pbkltYWdlQ2FwdHVyZUludGVydmFsfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBhdmVyYWdlUHJvY2Vzc2ludFRpbWVBcnJheTogJHt0aGlzLl9hdmVyYWdlUHJvY2Vzc2ludFRpbWVBcnJheX1gKTtcclxuICAgICAgICAgICAgICAgICAgICBDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZyhgYXZlcmFnZUZldGNoSW1hZ2VUaW1lQXJyYXk6ICR7dGhpcy5fYXZlcmFnZUZldGNoSW1hZ2VUaW1lQXJyYXl9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYGF2ZXJhZ2VUaW1lOiAke3RoaXMuX2F2ZXJhZ2VUaW1lfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGltZSA9IERhdGUubm93KCkgLSBmZXRjaEltYWdlQ2FsY3VsYXRlU3RhcnRUaW1lO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpbWUgPiAxMClcclxuICAgICAgICAgICAgICAgICAgICBDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZyhgZmV0Y2ggaW1hZ2UgY2FsY3VsYXRlIHRpbWU6ICR7dGltZX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2cpXHJcbiAgICAgICAgICAgICAgICBDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZyhgdGltZSBmaW5pc2ggZGVjb2RlOiAke0RhdGUubm93KCl9YCk7XHJcbiAgICAgICAgICAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZylcclxuICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBtYWluIHRpbWU6ICR7RGF0ZS5ub3coKSAtIGNhcHR1cmVTdGFydFRpbWV9YCk7XHJcbiAgICAgICAgICAgIGlmIChDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZylcclxuICAgICAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKFwiPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVwiKTtcclxuICAgICAgICAgICAgdGhpcy5fbG9vcFJlYWRWaWRlb1RpbWVvdXRJZCAmJiBjbGVhclRpbWVvdXQodGhpcy5fbG9vcFJlYWRWaWRlb1RpbWVvdXRJZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9taW5JbWFnZUNhcHR1cmVJbnRlcnZhbCA+IDAgJiYgdGhpcy5fbWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwgPj0gdGhpcy5fYXZlcmFnZVRpbWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xvb3BSZWFkVmlkZW9UaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvKHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9LCB0aGlzLl9taW5JbWFnZUNhcHR1cmVJbnRlcnZhbCAtIHRoaXMuX2F2ZXJhZ2VUaW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xvb3BSZWFkVmlkZW9UaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvKHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9LCBNYXRoLm1heCh0aGlzLl9taW5JbWFnZUNhcHR1cmVJbnRlcnZhbCwgMCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuY2F0Y2goKGV4KSA9PiB7XHJcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhLCBcImZcIikuc3RvcEZldGNoaW5nKCk7XHJcbiAgICAgICAgICAgIGlmIChleC5lcnJvckNvZGUgJiYgZXguZXJyb3JDb2RlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkICYmIGNsZWFyVGltZW91dCh0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xvb3BSZWFkVmlkZW9UaW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYSwgXCJmXCIpLnN0YXJ0RmV0Y2hpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvKHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9LCBNYXRoLm1heCh0aGlzLl9taW5JbWFnZUNhcHR1cmVJbnRlcnZhbCwgMTAwMCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghKGV4Lm1lc3NhZ2UgPT09ICdwbGF0Zm9ybSBlcnJvcicpKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhyb3cgZXg7IH0sIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfcmVSdW5DdXJybmV0RnVuYyh0ZW1wbGF0ZU5hbWUpIHtcclxuICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkICYmIGNsZWFyVGltZW91dCh0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkKTtcclxuICAgICAgICB0aGlzLl9sb29wUmVhZFZpZGVvVGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2xvb3BSZWFkVmlkZW8odGVtcGxhdGVOYW1lKTtcclxuICAgICAgICB9LCAwKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUHJvY2Vzc2VzIGEgc2luZ2xlIGltYWdlIG9yIGEgZmlsZSBjb250YWluaW5nIGEgc2luZ2xlIGltYWdlIHRvIGRlcml2ZSBpbXBvcnRhbnQgaW5mb3JtYXRpb24uXHJcbiAgICAgKiBAcGFyYW0gaW1hZ2VPckZpbGUgU3BlY2lmaWVzIHRoZSBpbWFnZSBvciBmaWxlIHRvIGJlIHByb2Nlc3NlZC4gVGhlIGZvbGxvd2luZyBkYXRhIHR5cGVzIGFyZSBhY2NlcHRlZDogYEJsb2JgLCBgSFRNTEltYWdlRWxlbWVudGAsIGBIVE1MQ2FudmFzRWxlbWVudGAsIGBIVE1MVmlkZW9FbGVtZW50YCwgYERTSW1hZ2VEYXRhYCwgYHN0cmluZ2AuXHJcbiAgICAgKiBAcGFyYW0gdGVtcGxhdGVOYW1lIFtPcHRpb25hbF0gU3BlY2lmaWVzIGEgXCJDYXB0dXJlVmlzaW9uVGVtcGxhdGVcIiB0byB1c2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhIGBDYXB0dXJlZFJlc3VsdGAgb2JqZWN0IHdoaWNoIGNvbnRhaW5zIHRoZSBkZXJpdmVkIGluZm9ybWF0aW9uIGZyb20gdGhlIGltYWdlIHByb2Nlc3NlZC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgY2FwdHVyZShpbWFnZU9yRmlsZSwgdGVtcGxhdGVOYW1lKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICBjaGVja0lzRGlzcG9zZWQodGhpcyk7XHJcbiAgICAgICAgaWYgKCF0ZW1wbGF0ZU5hbWUpXHJcbiAgICAgICAgICAgIHRlbXBsYXRlTmFtZSA9IHRoaXMuX2N1cnJlbnRTZXR0aW5ncy5DYXB0dXJlVmlzaW9uVGVtcGxhdGVzWzBdLk5hbWU7XHJcbiAgICAgICAgY29uc3QgdGFza3MgPSBhd2FpdCB0aGlzLmNvbnRhaW5zVGFzayh0ZW1wbGF0ZU5hbWUpO1xyXG4gICAgICAgIGF3YWl0IGxvYWRXYXNtKHRhc2tzKTtcclxuICAgICAgICBpZiAodGFza3MuaW5jbHVkZXMoXCJkbHJcIikgJiYgISgoX2EgPSBtYXBQYWNrYWdlUmVnaXN0ZXIuZGxyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYkxvYWRDb25mdXNhYmxlQ2hhcnNEYXRhKSkge1xyXG4gICAgICAgICAgICBjb25zdCBfZW5naW5lUmVzb3VyY2VQYXRocyA9IGhhbmRsZUVuZ2luZVJlc291cmNlUGF0aHMoQ29yZU1vZHVsZS5lbmdpbmVSZXNvdXJjZVBhdGhzLCBhdXRvRGlzY292ZXJ5UGF0aHMpO1xyXG4gICAgICAgICAgICBhd2FpdCAoKF9iID0gbWFwUGFja2FnZVJlZ2lzdGVyLmRscikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmxvYWRSZWNvZ25pdGlvbkRhdGEoXCJDb25mdXNhYmxlQ2hhcnNcIiwgX2VuZ2luZVJlc291cmNlUGF0aHMuZGxyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCByZXN1bHQ7XHJcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc1NjYW5uZXIsIGZhbHNlLCBcImZcIik7XHJcbiAgICAgICAgaWYgKF9pc0RTSW1hZ2VEYXRhKGltYWdlT3JGaWxlKSkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLl9jYXB0dXJlRHNpbWFnZShpbWFnZU9yRmlsZSwgdGVtcGxhdGVOYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGltYWdlT3JGaWxlID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIGlmIChpbWFnZU9yRmlsZS5zdWJzdHJpbmcoMCwgMTEpID09IFwiZGF0YTppbWFnZS9cIikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5fY2FwdHVyZUJhc2U2NChpbWFnZU9yRmlsZSwgdGVtcGxhdGVOYW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX2NhcHR1cmVVcmwoaW1hZ2VPckZpbGUsIHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaW1hZ2VPckZpbGUgaW5zdGFuY2VvZiBCbG9iKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX2NhcHR1cmVCbG9iKGltYWdlT3JGaWxlLCB0ZW1wbGF0ZU5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpbWFnZU9yRmlsZSBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5fY2FwdHVyZUltYWdlKGltYWdlT3JGaWxlLCB0ZW1wbGF0ZU5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpbWFnZU9yRmlsZSBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX2NhcHR1cmVDYW52YXMoaW1hZ2VPckZpbGUsIHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGltYWdlT3JGaWxlIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCkge1xyXG4gICAgICAgICAgICByZXN1bHQgPSBhd2FpdCB0aGlzLl9jYXB0dXJlVmlkZW8oaW1hZ2VPckZpbGUsIHRlbXBsYXRlTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiJ2NhcHR1cmUoaW1hZ2VPckZpbGUsIHRlbXBsYXRlTmFtZSknOiBUeXBlIG9mICdpbWFnZU9yRmlsZScgc2hvdWxkIGJlICdEU0ltYWdlRGF0YScsICdVcmwnLCAnQmFzZTY0JywgJ0Jsb2InLCAnSFRNTEltYWdlRWxlbWVudCcsICdIVE1MQ2FudmFzRWxlbWVudCcsICdIVE1MVmlkZW9FbGVtZW50Jy5cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICBhc3luYyBfY2FwdHVyZURzaW1hZ2UoaW1hZ2VPckZpbGUsIHRlbXBsYXRlTmFtZSkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9jYXB0dXJlSW5Xb3JrZXIoaW1hZ2VPckZpbGUsIHRlbXBsYXRlTmFtZSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfY2FwdHVyZVVybChpbWFnZU9yRmlsZSwgdGVtcGxhdGVOYW1lKSB7XHJcbiAgICAgICAgbGV0IGJsb2IgPSBhd2FpdCByZXF1ZXN0UmVzb3VyY2UoaW1hZ2VPckZpbGUsIFwiYmxvYlwiKTtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fY2FwdHVyZUJsb2IoYmxvYiwgdGVtcGxhdGVOYW1lKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9jYXB0dXJlQmFzZTY0KGJhc2U2NFN0ciwgdGVtcGxhdGVOYW1lKSB7XHJcbiAgICAgICAgYmFzZTY0U3RyID0gYmFzZTY0U3RyLnN1YnN0cmluZyhiYXNlNjRTdHIuaW5kZXhPZignLCcpICsgMSk7XHJcbiAgICAgICAgbGV0IGJpbmFyeVN0ciA9IGF0b2IoYmFzZTY0U3RyKTtcclxuICAgICAgICBsZXQgbiA9IGJpbmFyeVN0ci5sZW5ndGg7XHJcbiAgICAgICAgbGV0IHU4YXJyID0gbmV3IFVpbnQ4QXJyYXkobik7XHJcbiAgICAgICAgd2hpbGUgKG4tLSkge1xyXG4gICAgICAgICAgICB1OGFycltuXSA9IGJpbmFyeVN0ci5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fY2FwdHVyZUJsb2IobmV3IEJsb2IoW3U4YXJyXSksIHRlbXBsYXRlTmFtZSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfY2FwdHVyZUJsb2IoaW1hZ2VPckZpbGUsIHRlbXBsYXRlTmFtZSkge1xyXG4gICAgICAgIGNvbnN0IHVzZU9ianVybFRvRHJhd0Jsb2JUb0ltZyA9IGFzeW5jIGZ1bmN0aW9uIChibG9iKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocnMsIHJqKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgb2JqVXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuICAgICAgICAgICAgICAgIGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2Uuc3JjID0gb2JqVXJsO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2Uub25sb2FkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoaW1hZ2UuZGJyT2JqVXJsKTsgLy8gcmVsZXNlIG1lbW9yeVxyXG4gICAgICAgICAgICAgICAgICAgIHJzKGltYWdlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpbWFnZS5vbmVycm9yID0gZXYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJqKG5ldyBFcnJvcihcIkNhbid0IGNvbnZlcnQgYmxvYiB0byBpbWFnZSA6IFwiICsgKGV2IGluc3RhbmNlb2YgRXZlbnQgPyBldi50eXBlIDogZXYpKSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGxldCBpbWFnZUJpdG1hcCA9IG51bGw7XHJcbiAgICAgICAgbGV0IGltZyA9IG51bGw7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBjcmVhdGVJbWFnZUJpdG1hcCAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VCaXRtYXAgPSBhd2FpdCBjcmVhdGVJbWFnZUJpdG1hcChpbWFnZU9yRmlsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGVJbWFnZUJpdG1hcCBtYXliZSBmYWlsIGluIGEgbG90IG9mIHNlbnNlXHJcbiAgICAgICAgICAgICAgICAvLyBhbHRob3VnaCBvYmp1cmwgY2FuIHBhc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWltYWdlQml0bWFwKSB7XHJcbiAgICAgICAgICAgIGltZyA9IGF3YWl0IHVzZU9ianVybFRvRHJhd0Jsb2JUb0ltZyhpbWFnZU9yRmlsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCByZXN1bHRzID0gYXdhaXQgdGhpcy5fY2FwdHVyZUltYWdlKGltYWdlQml0bWFwIHx8IGltZywgdGVtcGxhdGVOYW1lKTtcclxuICAgICAgICBpZiAoaW1hZ2VCaXRtYXApIHtcclxuICAgICAgICAgICAgaW1hZ2VCaXRtYXAuY2xvc2UoKTtcclxuICAgICAgICB9IC8vIHJlbGVhc2UgbWVtb3J5XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfY2FwdHVyZUltYWdlKGltYWdlLCB0ZW1wbGF0ZU5hbWUpIHtcclxuICAgICAgICBsZXQgaW1nVyA9IGltYWdlIGluc3RhbmNlb2YgSFRNTEltYWdlRWxlbWVudCA/IGltYWdlLm5hdHVyYWxXaWR0aCA6IGltYWdlLndpZHRoO1xyXG4gICAgICAgIGxldCBpbWdIID0gaW1hZ2UgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50ID8gaW1hZ2UubmF0dXJhbEhlaWdodCA6IGltYWdlLmhlaWdodDtcclxuICAgICAgICBsZXQgbWF4TmF0dXJhbFdIID0gTWF0aC5tYXgoaW1nVywgaW1nSCk7XHJcbiAgICAgICAgbGV0IGFjY2VwdFcsIGFjY2VwdEg7XHJcbiAgICAgICAgaWYgKG1heE5hdHVyYWxXSCA+IHRoaXMubWF4Q3ZzU2lkZUxlbmd0aCkge1xyXG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2NvbXByZXNzUmF0ZSwgdGhpcy5tYXhDdnNTaWRlTGVuZ3RoIC8gbWF4TmF0dXJhbFdILCBcImZcIik7XHJcbiAgICAgICAgICAgIGFjY2VwdFcgPSBNYXRoLnJvdW5kKGltZ1cgKiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2NvbXByZXNzUmF0ZSwgXCJmXCIpKTtcclxuICAgICAgICAgICAgYWNjZXB0SCA9IE1hdGgucm91bmQoaW1nSCAqIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY29tcHJlc3NSYXRlLCBcImZcIikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYWNjZXB0VyA9IGltZ1c7XHJcbiAgICAgICAgICAgIGFjY2VwdEggPSBpbWdIO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIV9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY2FudmFzLCBcImZcIikpIHtcclxuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9jYW52YXMsIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLCBcImZcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGN2cyA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY2FudmFzLCBcImZcIik7XHJcbiAgICAgICAgaWYgKGN2cy53aWR0aCAhPT0gYWNjZXB0VyB8fCBjdnMuaGVpZ2h0ICE9PSBhY2NlcHRIKSB7XHJcbiAgICAgICAgICAgIGN2cy53aWR0aCA9IGFjY2VwdFc7XHJcbiAgICAgICAgICAgIGN2cy5oZWlnaHQgPSBhY2NlcHRIO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWN2cy5jdHgyZCkge1xyXG4gICAgICAgICAgICBjdnMuY3R4MmQgPSBjdnMuZ2V0Q29udGV4dCgnMmQnLCB7IHdpbGxSZWFkRnJlcXVlbnRseTogdHJ1ZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY3R4ID0gY3ZzLmN0eDJkO1xyXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDAsIGltZ1csIGltZ0gsIDAsIDAsIGFjY2VwdFcsIGFjY2VwdEgpO1xyXG4gICAgICAgIGlmIChpbWFnZS5kYnJPYmpVcmwpIHtcclxuICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTChpbWFnZS5kYnJPYmpVcmwpOyAvLyByZWxlc2UgbWVtb3J5XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9jYXB0dXJlQ2FudmFzKGN2cywgdGVtcGxhdGVOYW1lKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9jYXB0dXJlQ2FudmFzKGNhbnZhcywgdGVtcGxhdGVOYW1lKSB7XHJcbiAgICAgICAgaWYgKGNhbnZhcy5jcm9zc09yaWdpbiAmJiBcImFub255bW91c1wiICE9IGNhbnZhcy5jcm9zc09yaWdpbikgeyAvLyBjYW52YXMgaGFzIGNyb3NzT3JpZ2luIHRvIGRldGVjdCBpZiBjb3JzLCBpcyBuYXRpdmUgYXBpXHJcbiAgICAgICAgICAgIHRocm93IFwiY29yc1wiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoW2NhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodF0uaW5jbHVkZXMoMCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFRoZSB3aWR0aCBvciBoZWlnaHQgb2YgdGhlICdjYW52YXMnIGlzIDAuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5jdHgyZCB8fCBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIsIHsgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlIH0pO1xyXG4gICAgICAgIGNvbnN0IGltZ0RhdGEgPSBVaW50OEFycmF5LmZyb20oY3R4LmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpLmRhdGEpO1xyXG4gICAgICAgIGNvbnN0IERzSW1hZ2VEYXRhID0ge1xyXG4gICAgICAgICAgICBieXRlczogaW1nRGF0YSxcclxuICAgICAgICAgICAgd2lkdGg6IGNhbnZhcy53aWR0aCxcclxuICAgICAgICAgICAgaGVpZ2h0OiBjYW52YXMuaGVpZ2h0LFxyXG4gICAgICAgICAgICBzdHJpZGU6IGNhbnZhcy53aWR0aCAqIDQsXHJcbiAgICAgICAgICAgIGZvcm1hdDogMTAsXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fY2FwdHVyZUluV29ya2VyKERzSW1hZ2VEYXRhLCB0ZW1wbGF0ZU5hbWUpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2NhcHR1cmVWaWRlbyh2aWRlbywgdGVtcGxhdGVOYW1lKSB7XHJcbiAgICAgICAgaWYgKHZpZGVvLmNyb3NzT3JpZ2luICYmIFwiYW5vbnltb3VzXCIgIT0gdmlkZW8uY3Jvc3NPcmlnaW4pIHtcclxuICAgICAgICAgICAgdGhyb3cgXCJjb3JzXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbWdXID0gdmlkZW8udmlkZW9XaWR0aDtcclxuICAgICAgICBsZXQgaW1nSCA9IHZpZGVvLnZpZGVvSGVpZ2h0O1xyXG4gICAgICAgIGxldCBtYXhOYXR1cmFsV0ggPSBNYXRoLm1heChpbWdXLCBpbWdIKTtcclxuICAgICAgICBsZXQgYWNjZXB0VywgYWNjZXB0SDtcclxuICAgICAgICBpZiAobWF4TmF0dXJhbFdIID4gdGhpcy5tYXhDdnNTaWRlTGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY29tcHJlc3NSYXRlLCB0aGlzLm1heEN2c1NpZGVMZW5ndGggLyBtYXhOYXR1cmFsV0gsIFwiZlwiKTtcclxuICAgICAgICAgICAgYWNjZXB0VyA9IE1hdGgucm91bmQoaW1nVyAqIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY29tcHJlc3NSYXRlLCBcImZcIikpO1xyXG4gICAgICAgICAgICBhY2NlcHRIID0gTWF0aC5yb3VuZChpbWdIICogX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9jb21wcmVzc1JhdGUsIFwiZlwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhY2NlcHRXID0gaW1nVztcclxuICAgICAgICAgICAgYWNjZXB0SCA9IGltZ0g7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9jYW52YXMsIFwiZlwiKSkge1xyXG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2NhbnZhcywgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyksIFwiZlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY3ZzID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9jYW52YXMsIFwiZlwiKTtcclxuICAgICAgICBpZiAoY3ZzLndpZHRoICE9PSBhY2NlcHRXIHx8IGN2cy5oZWlnaHQgIT09IGFjY2VwdEgpIHtcclxuICAgICAgICAgICAgY3ZzLndpZHRoID0gYWNjZXB0VztcclxuICAgICAgICAgICAgY3ZzLmhlaWdodCA9IGFjY2VwdEg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghY3ZzLmN0eDJkKSB7XHJcbiAgICAgICAgICAgIGN2cy5jdHgyZCA9IGN2cy5nZXRDb250ZXh0KCcyZCcsIHsgd2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjdHggPSBjdnMuY3R4MmQ7XHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZSh2aWRlbywgMCwgMCwgaW1nVywgaW1nSCwgMCwgMCwgYWNjZXB0VywgYWNjZXB0SCk7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2NhcHR1cmVDYW52YXMoY3ZzLCB0ZW1wbGF0ZU5hbWUpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2NhcHR1cmVJbldvcmtlcihEc0ltYWdlRGF0YSwgdGVtcGxhdGVOYW1lKSB7XHJcbiAgICAgICAgY29uc3QgeyBieXRlcywgd2lkdGgsIGhlaWdodCwgc3RyaWRlLCBmb3JtYXQgfSA9IERzSW1hZ2VEYXRhO1xyXG4gICAgICAgIGxldCB0YXNrSUQgPSBnZXROZXh0VGFza0lEKCk7XHJcbiAgICAgICAgY29uc3QgcCA9IG5ldyBNdXRhYmxlUHJvbWlzZSgpO1xyXG4gICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gYXN5bmMgKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2V0UmVzdWx0RnJvbVdvcmtlclRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2FwdHVyZVZpc2lvblJvdXRlci5fb25Mb2coYGdldCByZXN1bHQgdGltZSBmcm9tIHdvcmtlcjogJHtnZXRSZXN1bHRGcm9tV29ya2VyVGltZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICBDYXB0dXJlVmlzaW9uUm91dGVyLl9vbkxvZyhgd29ya2VyIHRvIG1haW4gdGltZSBjb25zdW1lOiAke2dldFJlc3VsdEZyb21Xb3JrZXJUaW1lIC0gYm9keS53b3JrZXJSZXR1cm5Nc2dUaW1lfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXB0dXJlUmVzdWx0ID0gYm9keS5jYXB0dXJlUmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYXB0dXJlUmVzdWx0LmVycm9yQ29kZSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSBuZXcgRXJyb3IoY2FwdHVyZVJlc3VsdC5lcnJvclN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLmVycm9yQ29kZSA9IGNhcHR1cmVSZXN1bHQuZXJyb3JDb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcC5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBEc0ltYWdlRGF0YS5ieXRlcyA9IGJvZHkuYnl0ZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiBjYXB0dXJlUmVzdWx0Lml0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2NvbXByZXNzUmF0ZSwgXCJmXCIpICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252ZXJ0Q29vcmRpbmF0ZXMoaXRlbSwgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9jb21wcmVzc1JhdGUsIFwiZlwiKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gRW51bUNhcHR1cmVkUmVzdWx0SXRlbVR5cGUuQ1JJVF9PUklHSU5BTF9JTUFHRSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5pbWFnZURhdGEgPSBEc0ltYWdlRGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpdGVtLnR5cGUgPT09IEVudW1DYXB0dXJlZFJlc3VsdEl0ZW1UeXBlLkNSSVRfTk9STUFMSVpFRF9JTUFHRSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKF9hID0gbWFwUGFja2FnZVJlZ2lzdGVyLmRkbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmhhbmRsZU5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW0oaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXRlbS50eXBlID09PSBFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZS5DUklUX1BBUlNFRF9SRVNVTFQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfYiA9IG1hcFBhY2thZ2VSZWdpc3Rlci5kY3ApID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5oYW5kbGVQYXJzZWRSZXN1bHRJdGVtKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzU2Nhbm5lciwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGZpbHRlciBvZiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Jlc3VsdEZpbHRlclNldCwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXIub25EZWNvZGVkQmFyY29kZXNSZWNlaXZlZChjYXB0dXJlUmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlci5vblJlY29nbml6ZWRUZXh0TGluZXNSZWNlaXZlZChjYXB0dXJlUmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlci5vbkRldGVjdGVkUXVhZHNSZWNlaXZlZChjYXB0dXJlUmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlci5vbk5vcm1hbGl6ZWRJbWFnZXNSZWNlaXZlZChjYXB0dXJlUmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHRzRm9yRHJhdyA9IGhhbmRsZVJlc3VsdEZvckRyYXcoY2FwdHVyZVJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c0ZvckRyYXcuYmFyY29kZVJlc3VsdEl0ZW1zLmxlbmd0aCAmJiAoY2FwdHVyZVJlc3VsdC5iYXJjb2RlUmVzdWx0SXRlbXMgPSByZXN1bHRzRm9yRHJhdy5iYXJjb2RlUmVzdWx0SXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNGb3JEcmF3LnRleHRMaW5lUmVzdWx0SXRlbXMubGVuZ3RoICYmIChjYXB0dXJlUmVzdWx0LnRleHRMaW5lUmVzdWx0SXRlbXMgPSByZXN1bHRzRm9yRHJhdy50ZXh0TGluZVJlc3VsdEl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzRm9yRHJhdy5kZXRlY3RlZFF1YWRSZXN1bHRJdGVtcy5sZW5ndGggJiYgKGNhcHR1cmVSZXN1bHQuZGV0ZWN0ZWRRdWFkUmVzdWx0SXRlbXMgPSByZXN1bHRzRm9yRHJhdy5kZXRlY3RlZFF1YWRSZXN1bHRJdGVtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c0ZvckRyYXcubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMubGVuZ3RoICYmIChjYXB0dXJlUmVzdWx0Lm5vcm1hbGl6ZWRJbWFnZVJlc3VsdEl0ZW1zID0gcmVzdWx0c0ZvckRyYXcubm9ybWFsaXplZEltYWdlUmVzdWx0SXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNGb3JEcmF3LnBhcnNlZFJlc3VsdEl0ZW1zLmxlbmd0aCAmJiAoY2FwdHVyZVJlc3VsdC5wYXJzZWRSZXN1bHRJdGVtcyA9IHJlc3VsdHNGb3JEcmF3LnBhcnNlZFJlc3VsdEl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzUGF1c2VTY2FuIHx8ICFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzU2Nhbm5lciwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlycyA9IGNhcHR1cmVSZXN1bHQuaW50ZXJtZWRpYXRlUmVzdWx0OyAvLyBpcnMgPT4gaW50ZXJtZWRpYXRlUmVzdWx0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXJyU2V0Q291bnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaXJyIG9mIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgXCJmXCIpLl9pbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlclNldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlyclNldENvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY2Igb2YgaXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYi5pbmZvLmNhbGxiYWNrTmFtZSA9PT0gXCJvblRhc2tSZXN1bHRzUmVjZWl2ZWRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdW5pdCBvZiBjYi5pbnRlcm1lZGlhdGVSZXN1bHRVbml0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXQub3JpZ2luYWxJbWFnZVRhZyA9IERzSW1hZ2VEYXRhLnRhZyA/IERzSW1hZ2VEYXRhLnRhZyA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXJyW2NiLmluZm8uY2FsbGJhY2tOYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlycltjYi5pbmZvLmNhbGxiYWNrTmFtZV0oeyBpbnRlcm1lZGlhdGVSZXN1bHRVbml0czogY2IuaW50ZXJtZWRpYXRlUmVzdWx0VW5pdHMgfSwgY2IuaW5mbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXJyW2NiLmluZm8uY2FsbGJhY2tOYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlycltjYi5pbmZvLmNhbGxiYWNrTmFtZV0oY2IucmVzdWx0LCBjYi5pbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXJyU2V0Q291bnQgPT09IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgXCJmXCIpLl9pbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlclNldC5zaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY2IuaW5mby5jYWxsYmFja05hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FwdHVyZVJlc3VsdCAmJiBjYXB0dXJlUmVzdWx0Lmhhc093blByb3BlcnR5KFwiaW50ZXJtZWRpYXRlUmVzdWx0XCIpICYmIGRlbGV0ZSBjYXB0dXJlUmVzdWx0LmludGVybWVkaWF0ZVJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2NvbXByZXNzUmF0ZSwgMCwgXCJmXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwLnJlc29sdmUoY2FwdHVyZVJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcC5yZWplY3QoZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGV4ID0gbmV3IEVycm9yKGJvZHkubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHAucmVqZWN0KGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKSB7XHJcbiAgICAgICAgICAgIENhcHR1cmVWaXNpb25Sb3V0ZXIuX29uTG9nKGBzZW5kIGJ1ZmZlciB0byB3b3JrZXI6ICR7RGF0ZS5ub3coKX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgdHlwZTogXCJjdnJfY2FwdHVyZVwiLFxyXG4gICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICBpbnN0YW5jZUlEOiB0aGlzLl9pbnN0YW5jZUlELFxyXG4gICAgICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICAgICAgICBieXRlcyxcclxuICAgICAgICAgICAgICAgIHdpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgc3RyaWRlLFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0LFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVOYW1lOiB0ZW1wbGF0ZU5hbWUgPyB0ZW1wbGF0ZU5hbWUgOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgaXNTY2FubmVyOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzU2Nhbm5lciwgXCJmXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBbYnl0ZXMuYnVmZmVyXSk7XHJcbiAgICAgICAgcmV0dXJuIHA7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICAvKipcclxuICAgICAqIENvbmZpZ3VyZXMgcnVudGltZSBzZXR0aW5ncyB1c2luZyBhIHByb3ZpZGVkIEpTT04gc3RyaW5nLCBhbiBvYmplY3QsIG9yIGEgVVJMIHBvaW50aW5nIHRvIGFuIG9iamVjdCwgd2hpY2ggY29udGFpbnMgc2V0dGluZ3MgZm9yIG9uZSBvciBtb3JlIGBDYXB0dXJlVmlzaW9uVGVtcGxhdGVzYC5cclxuICAgICAqIEBwYXJhbSBzZXR0aW5ncyBBIEpTT04gc3RyaW5nLCBhbiBvYmplY3QsIG9yIGEgVVJMIHBvaW50aW5nIHRvIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHNldHRpbmdzIGZvciBvbmUgb3IgbW9yZSBgQ2FwdHVyZVZpc2lvblRlbXBsYXRlc2AuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgb3BlcmF0aW9uIGhhcyBjb21wbGV0ZWQuIEl0IHByb3ZpZGVzIGFuIG9iamVjdCB0aGF0IGRlc2NyaWJlcyB0aGUgcmVzdWx0LlxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0U2V0dGluZ3Moc2V0dGluZ3MpIHtcclxuICAgICAgICBjaGVja0lzRGlzcG9zZWQodGhpcyk7XHJcbiAgICAgICAgaWYgKCFzZXR0aW5ncyB8fCAhW1wic3RyaW5nXCIsIFwib2JqZWN0XCJdLmluY2x1ZGVzKHR5cGVvZiBzZXR0aW5ncykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJJbnZhbGlkIHRlbXBsYXRlLlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZXR0aW5ncyA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICBpZiAoIXNldHRpbmdzLnN0YXJ0c1dpdGgoXCJ7XCIpKSB7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncyA9IGF3YWl0IHJlcXVlc3RSZXNvdXJjZShzZXR0aW5ncywgXCJ0ZXh0XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRTZXR0aW5ncyA9IEpTT04ucGFyc2Uoc2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygc2V0dGluZ3MgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFNldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICAgICAgICAgIHNldHRpbmdzID0gSlNPTi5zdHJpbmdpZnkoc2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgICAgICBtYXBUYXNrQ2FsbEJhY2tbdGFza0lEXSA9IGFzeW5jIChib2R5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBKU09OLnBhcnNlKGJvZHkucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5leGNlcHRpb24gIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yID0gbmV3IEVycm9yKHJlc3BvbnNlLmRlc2NyaXB0aW9uID8gcmVzcG9uc2UuZGVzY3JpcHRpb24gOiBcIkluaXQgU2V0dGluZ3MgRmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IuZXJyb3JDb2RlID0gcmVzcG9uc2UuZXhjZXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmooZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgbW9kdWxlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wbGF0ZU5hbWVzID0gSlNPTi5wYXJzZShzZXR0aW5ncykuQ2FwdHVyZVZpc2lvblRlbXBsYXRlcztcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlbXBsYXRlTmFtZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRhc2tzID0gYXdhaXQgdGhpcy5jb250YWluc1Rhc2sodGVtcGxhdGVOYW1lc1tpXS5OYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlcyA9IG1vZHVsZXMuY29uY2F0KHRhc2tzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbG9hZFdhc20oWy4uLm5ldyBTZXQobW9kdWxlcyldKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc091dHB1dE9yaWdpbmFsSW1hZ2UgPSAodGhpcy5fY3VycmVudFNldHRpbmdzLkNhcHR1cmVWaXNpb25UZW1wbGF0ZXNbMF0uT3V0cHV0T3JpZ2luYWxJbWFnZSA9PT0gMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4LnN0YWNrID0gYm9keS5zdGFjayArICdcXG4nICsgZXguc3RhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJqKGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiY3ZyX2luaXRTZXR0aW5nc1wiLFxyXG4gICAgICAgICAgICAgICAgaWQ6IHRhc2tJRCxcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSUQ6IHRoaXMuX2luc3RhbmNlSUQsXHJcbiAgICAgICAgICAgICAgICBib2R5OiB7IHNldHRpbmdzIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgO1xyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHNldHRpbmdzIGZvciB0aGUgc3BlY2lmaWVkIGBDYXB0dXJlVmlzaW9uVGVtcGxhdGVgLlxyXG4gICAgICogQHBhcmFtIHRlbXBsYXRlTmFtZSBTcGVjaWZpZXMgYSBgQ2FwdHVyZVZpc2lvblRlbXBsYXRlYCBieSBpdHMgbmFtZS4gSWYgcGFzc2VkIFwiKlwiLCB0aGUgcmV0dXJuZWQgb2JqZWN0IHdpbGwgY29udGFpbiBhbGwgdGVtcGxhdGVzLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIG9iamVjdCB0aGF0IGNvbnRhaW5zIHNldHRpbmdzIGZvciB0aGUgc3BlY2lmaWVkIHRlbXBsYXRlIG9yIGFsbCB0ZW1wbGF0ZXMuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIG91dHB1dFNldHRpbmdzKHRlbXBsYXRlTmFtZSkge1xyXG4gICAgICAgIGNoZWNrSXNEaXNwb3NlZCh0aGlzKTtcclxuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgICAgICBtYXBUYXNrQ2FsbEJhY2tbdGFza0lEXSA9IGFzeW5jIChib2R5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBKU09OLnBhcnNlKGJvZHkuc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5lcnJvckNvZGUgIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGVycm9yID0gbmV3IEVycm9yKHNldHRpbmdzLmVycm9yU3RyaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3IuZXJyb3JDb2RlID0gc2V0dGluZ3MuZXJyb3JDb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmooZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgc2V0dGluZ3MuZXJyb3JDb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzZXR0aW5ncy5lcnJvclN0cmluZztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnMoc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGV4ID0gbmV3IEVycm9yKGJvZHkubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXguc3RhY2sgPSBib2R5LnN0YWNrICsgJ1xcbicgKyBleC5zdGFjaztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmooZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJjdnJfb3V0cHV0U2V0dGluZ3NcIixcclxuICAgICAgICAgICAgICAgIGlkOiB0YXNrSUQsXHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlEOiB0aGlzLl9pbnN0YW5jZUlELFxyXG4gICAgICAgICAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlTmFtZTogdGVtcGxhdGVOYW1lID8gdGVtcGxhdGVOYW1lIDogXCIqXCJcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhIEJsb2Igb2JqZWN0IG9yIGluaXRpYXRlcyBhIEpTT04gZmlsZSBkb3dubG9hZCBjb250YWluaW5nIHRoZSBzZXR0aW5ncyBmb3IgdGhlIHNwZWNpZmllZCBgQ2FwdHVyZVZpc2lvblRlbXBsYXRlYC5cclxuICAgICAqIEBwYXJhbSB0ZW1wbGF0ZU5hbWUgU3BlY2lmaWVzIGEgYENhcHR1cmVWaXNpb25UZW1wbGF0ZWAgYnkgaXRzIG5hbWUuIElmIHBhc3NlZCBcIipcIiwgdGhlIHJldHVybmVkIG9iamVjdCB3aWxsIGNvbnRhaW4gYWxsIHRlbXBsYXRlcy5cclxuICAgICAqIEBwYXJhbSBmaWxlTmFtZSBTcGVjaWZpZXMgdGhlIG5hbWUgb2YgdGhlIGZpbGUuXHJcbiAgICAgKiBAcGFyYW0gZG93bmxvYWQgQm9vbGVhbiB0aGF0IHNwZWNpZmllcyB3aGV0aGVyIHRvIGluaXRpYXRlcyBhIGZpbGUgZG93bmxvYWQuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgQmxvYiBvYmplY3QgdGhhdCBjb250YWlucyBzZXR0aW5ncyBmb3IgdGhlIHNwZWNpZmllZCB0ZW1wbGF0ZSBvciBhbGwgdGVtcGxhdGVzLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBvdXRwdXRTZXR0aW5nc1RvRmlsZSh0ZW1wbGF0ZU5hbWUsIGZpbGVOYW1lLCBkb3dubG9hZCkge1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gYXdhaXQgdGhpcy5vdXRwdXRTZXR0aW5ncyh0ZW1wbGF0ZU5hbWUpO1xyXG4gICAgICAgIGNvbnN0IGpzb25CbG9iID0gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KHNldHRpbmdzLCBudWxsLCAyLCBmdW5jdGlvbiAoXywgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMildLCB7IHR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiIH0pO1xyXG4gICAgICAgIGlmIChkb3dubG9hZCkge1xyXG4gICAgICAgICAgICBjb25zdCBkb3dubG9hZExpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKTtcclxuICAgICAgICAgICAgZG93bmxvYWRMaW5rLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGpzb25CbG9iKTtcclxuICAgICAgICAgICAgaWYgKGZpbGVOYW1lLmVuZHNXaXRoKFwiLmpzb25cIikpIHtcclxuICAgICAgICAgICAgICAgIGZpbGVOYW1lID0gZmlsZU5hbWUucmVwbGFjZShcIi5qc29uXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRvd25sb2FkTGluay5kb3dubG9hZCA9IGAke2ZpbGVOYW1lfS5qc29uYDtcclxuICAgICAgICAgICAgZG93bmxvYWRMaW5rLm9uY2xpY2sgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGRvd25sb2FkTGluay5ocmVmKTtcclxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGRvd25sb2FkTGluay5jbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ganNvbkJsb2I7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlcyBhIEpTT04gb2JqZWN0IHRoYXQgY29udGFpbnMgc2ltcGxpZmllZCBzZXR0aW5ncyBmb3IgdGhlIHNwZWNpZmllZCBgQ2FwdHVyZVZpc2lvblRlbXBsYXRlYC5cclxuICAgICAqIEBwYXJhbSB0ZW1wbGF0ZU5hbWUgU3BlY2lmaWVzIGEgYENhcHR1cmVWaXNpb25UZW1wbGF0ZWAgYnkgaXRzIG5hbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhIEpTT04gb2JqZWN0LCBvZiB0eXBlIGBTaW1wbGlmaWVkQ2FwdHVyZVZpc2lvblNldHRpbmdzYCwgd2hpY2ggcmVwcmVzZW50cyB0aGUgc2ltcGxpZmllZCBzZXR0aW5ncyBmb3IgdGhlIHNwZWNpZmllZCB0ZW1wbGF0ZS5cclxuICAgICAqIEByZW1hcmtzIElmIHRoZSBzZXR0aW5ncyBvZiB0aGUgc3BlY2lmaWVkIHRlbXBsYXRlIGFyZSB0b28gY29tcGxleCwgd2UgY2Fubm90IGNyZWF0ZSBhIFNpbXBsaWZpZWRDYXB0dXJlVmlzaW9uU2V0dGluZ3MsIGFuZCBhcyBhIHJlc3VsdCwgaXQgd2lsbCByZXR1cm4gYW4gZXJyb3IuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldFNpbXBsaWZpZWRTZXR0aW5ncyh0ZW1wbGF0ZU5hbWUpIHtcclxuICAgICAgICBjaGVja0lzRGlzcG9zZWQodGhpcyk7XHJcbiAgICAgICAgaWYgKCF0ZW1wbGF0ZU5hbWUpXHJcbiAgICAgICAgICAgIHRlbXBsYXRlTmFtZSA9IHRoaXMuX2N1cnJlbnRTZXR0aW5ncy5DYXB0dXJlVmlzaW9uVGVtcGxhdGVzWzBdLk5hbWU7XHJcbiAgICAgICAgY29uc3QgdGFza3MgPSBhd2FpdCB0aGlzLmNvbnRhaW5zVGFzayh0ZW1wbGF0ZU5hbWUpO1xyXG4gICAgICAgIGF3YWl0IGxvYWRXYXNtKHRhc2tzKTtcclxuICAgICAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgICAgICBtYXBUYXNrQ2FsbEJhY2tbdGFza0lEXSA9IGFzeW5jIChib2R5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShib2R5LnNldHRpbmdzLCAoaywgdikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoayA9PT0gXCJiYXJjb2RlRm9ybWF0SWRzXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBCaWdJbnQodik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHY7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lm1pbkltYWdlQ2FwdHVyZUludGVydmFsID0gdGhpcy5fbWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWw7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9IG5ldyBFcnJvcihyZXN1bHQuY29kZVN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLmVycm9yQ29kZSA9IHJlc3VsdC5lcnJvckNvZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByaihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSByZXN1bHQuY29kZTtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcmVzdWx0LmNvZGVTdHJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImN2cl9nZXRTaW1wbGlmaWVkU2V0dGluZ3NcIixcclxuICAgICAgICAgICAgICAgIGlkOiB0YXNrSUQsXHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlEOiB0aGlzLl9pbnN0YW5jZUlELFxyXG4gICAgICAgICAgICAgICAgYm9keTogeyB0ZW1wbGF0ZU5hbWUgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIDtcclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyB0aGUgc3BlY2lmaWVkIGBDYXB0dXJlVmlzaW9uVGVtcGxhdGVgIHdpdGggYW4gdXBkYXRlZCBgU2ltcGxpZmllZENhcHR1cmVWaXNpb25TZXR0aW5nc2Agb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIHRlbXBsYXRlTmFtZSBTcGVjaWZpZXMgYSBgQ2FwdHVyZVZpc2lvblRlbXBsYXRlYCBieSBpdHMgbmFtZS5cclxuICAgICAqIEBwYXJhbSBzZXR0aW5ncyBUaGUgYFNpbXBsaWZpZWRDYXB0dXJlVmlzaW9uU2V0dGluZ3NgIG9iamVjdCB0aGF0IGNvbnRhaW5zIHVwZGF0ZWQgc2V0dGluZ3MuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgb3BlcmF0aW9uIGhhcyBjb21wbGV0ZWQuIEl0IHByb3ZpZGVzIGFuIG9iamVjdCB0aGF0IGRlc2NyaWJlcyB0aGUgcmVzdWx0LlxyXG4gICAgICovXHJcbiAgICBhc3luYyB1cGRhdGVTZXR0aW5ncyh0ZW1wbGF0ZU5hbWUsIHNldHRpbmdzKSB7XHJcbiAgICAgICAgY2hlY2tJc0Rpc3Bvc2VkKHRoaXMpO1xyXG4gICAgICAgIGNvbnN0IHRhc2tzID0gYXdhaXQgdGhpcy5jb250YWluc1Rhc2sodGVtcGxhdGVOYW1lKTtcclxuICAgICAgICBhd2FpdCBsb2FkV2FzbSh0YXNrcyk7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChycywgcmopID0+IHtcclxuICAgICAgICAgICAgbGV0IHRhc2tJRCA9IGdldE5leHRUYXNrSUQoKTtcclxuICAgICAgICAgICAgbWFwVGFza0NhbGxCYWNrW3Rhc2tJRF0gPSBhc3luYyAoYm9keSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gSlNPTi5wYXJzZShib2R5LnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MubWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwgJiYgc2V0dGluZ3MubWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwgPj0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWluSW1hZ2VDYXB0dXJlSW50ZXJ2YWwgPSBzZXR0aW5ncy5taW5JbWFnZUNhcHR1cmVJbnRlcnZhbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNPdXRwdXRPcmlnaW5hbEltYWdlID0gYm9keS5pc091dHB1dE9yaWdpbmFsSW1hZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmV4Y2VwdGlvbiAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZXJyb3IgPSBuZXcgRXJyb3IocmVzcG9uc2UuZGVzY3JpcHRpb24gPyByZXNwb25zZS5kZXNjcmlwdGlvbiA6IFwiVXBkYXRlIFNldHRpbmdzIEZhaWxlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLmVycm9yQ29kZSA9IHJlc3BvbnNlLmV4Y2VwdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJqKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY3VycmVudFNldHRpbmdzID0gYXdhaXQgdGhpcy5vdXRwdXRTZXR0aW5ncyhcIipcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4LnN0YWNrID0gYm9keS5zdGFjayArICdcXG4nICsgZXguc3RhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJqKGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiY3ZyX3VwZGF0ZVNldHRpbmdzXCIsXHJcbiAgICAgICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJRDogdGhpcy5faW5zdGFuY2VJRCxcclxuICAgICAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlc3RvcmVzIGFsbCBydW50aW1lIHNldHRpbmdzIHRvIHRoZWlyIG9yaWdpbmFsIGRlZmF1bHQgdmFsdWVzLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIG9wZXJhdGlvbiBoYXMgY29tcGxldGVkLiBJdCBwcm92aWRlcyBhbiBvYmplY3QgdGhhdCBkZXNjcmliZXMgdGhlIHJlc3VsdC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVzZXRTZXR0aW5ncygpIHtcclxuICAgICAgICBjaGVja0lzRGlzcG9zZWQodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChycywgcmopID0+IHtcclxuICAgICAgICAgICAgbGV0IHRhc2tJRCA9IGdldE5leHRUYXNrSUQoKTtcclxuICAgICAgICAgICAgbWFwVGFza0NhbGxCYWNrW3Rhc2tJRF0gPSBhc3luYyAoYm9keSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gSlNPTi5wYXJzZShib2R5LnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZXhjZXB0aW9uICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9IG5ldyBFcnJvcihyZXNwb25zZS5kZXNjcmlwdGlvbiA/IHJlc3BvbnNlLmRlc2NyaXB0aW9uIDogXCJSZXNldCBTZXR0aW5ncyBGYWlsZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvci5lcnJvckNvZGUgPSByZXNwb25zZS5leGNlcHRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByaihlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRTZXR0aW5ncyA9IGF3YWl0IHRoaXMub3V0cHV0U2V0dGluZ3MoXCIqXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBycyhyZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImN2cl9yZXNldFNldHRpbmdzXCIsXHJcbiAgICAgICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJRDogdGhpcy5faW5zdGFuY2VJRFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIDtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiBvYmplY3QsIG9mIHR5cGUgYEJ1ZmZlcmVkSXRlbXNNYW5hZ2VyYCwgdGhhdCBtYW5hZ2VzIGJ1ZmZlcmVkIGl0ZW1zLlxyXG4gICAgICogQHJldHVybnMgVGhlIGBCdWZmZXJlZEl0ZW1zTWFuYWdlcmAgb2JqZWN0LlxyXG4gICAgICovXHJcbiAgICBnZXRCdWZmZXJlZEl0ZW1zTWFuYWdlcigpIHtcclxuICAgICAgICBpZiAoIV9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfYnVmZmVyZEl0ZW1zTWFuYWdlciwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfYnVmZmVyZEl0ZW1zTWFuYWdlciwgbmV3IEJ1ZmZlcmVkSXRlbXNNYW5hZ2VyKHRoaXMpLCBcImZcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2J1ZmZlcmRJdGVtc01hbmFnZXIsIFwiZlwiKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiBvYmplY3QsIG9mIHR5cGUgYEludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXJgLCB0aGF0IG1hbmFnZXMgaW50ZXJtZWRpYXRlIHJlc3VsdHMuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgVGhlIGBJbnRlcm1lZGlhdGVSZXN1bHRNYW5hZ2VyYCBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIGdldEludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXIoKSB7XHJcbiAgICAgICAgY2hlY2tJc0Rpc3Bvc2VkKHRoaXMpO1xyXG4gICAgICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pbm5lclVzZVRhZywgXCJmXCIpICYmIENvcmVNb2R1bGUuYlN1cHBvcnRJUlRNb2R1bGUgIT09IDApIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGN1cnJlbnQgbGljZW5zZSBkb2VzIG5vdCBzdXBwb3J0IHRoZSB1c2Ugb2YgaW50ZXJtZWRpYXRlIHJlc3VsdHMuXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIV9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgXCJmXCIpKSB7XHJcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgbmV3IEludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXIodGhpcyksIFwiZlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgXCJmXCIpO1xyXG4gICAgfVxyXG4gICAgO1xyXG4gICAgYXN5bmMgcGFyc2VSZXF1aXJlZFJlc291cmNlcyh0ZW1wbGF0ZU5hbWUpIHtcclxuICAgICAgICBjaGVja0lzRGlzcG9zZWQodGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChycywgcmopID0+IHtcclxuICAgICAgICAgICAgbGV0IHRhc2tJRCA9IGdldE5leHRUYXNrSUQoKTtcclxuICAgICAgICAgICAgbWFwVGFza0NhbGxCYWNrW3Rhc2tJRF0gPSBhc3luYyAoYm9keSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBycyhKU09OLnBhcnNlKGJvZHkucmVzb3VyY2VzKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcImN2cl9wYXJzZVJlcXVpcmVkUmVzb3VyY2VzXCIsXHJcbiAgICAgICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VJRDogdGhpcy5faW5zdGFuY2VJRCxcclxuICAgICAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZU5hbWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlbGVhc2VzIGFsbCByZXNvdXJjZXMgdXNlZCBieSB0aGUgYENhcHR1cmVWaXNpb25Sb3V0ZXJgIGluc3RhbmNlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIHJlc291cmNlcyBoYXZlIGJlZW4gc3VjY2Vzc2Z1bGx5IHJlbGVhc2VkLiBJdCBkb2VzIG5vdCBwcm92aWRlIGFueSB2YWx1ZSB1cG9uIHJlc29sdXRpb24uXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgY2hlY2tJc0Rpc3Bvc2VkKHRoaXMpO1xyXG4gICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Byb21pc2VTdGFydFNjYW4sIFwiZlwiKSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BDYXB0dXJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIG51bGwsIFwiZlwiKTtcclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX3Jlc3VsdFJlY2VpdmVyU2V0LCBcImZcIikuY2xlYXIoKTtcclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzYVN0YXRlTGlzdGVuZXJTZXQsIFwiZlwiKS5jbGVhcigpO1xyXG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0RmlsdGVyU2V0LCBcImZcIikuY2xlYXIoKTtcclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2ludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXIsIFwiZlwiKS5faW50ZXJtZWRpYXRlUmVzdWx0UmVjZWl2ZXJTZXQuY2xlYXIoKTtcclxuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2lzRGVzdHJveWVkLCB0cnVlLCBcImZcIik7XHJcbiAgICAgICAgLy8gdGhpcy5fY2FwdHVyZVN0YXRlTGlzdGVuZXJTZXQuY2xlYXIoKTtcclxuICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2VzcykgO1xyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgZXguc3RhY2sgPSBib2R5LnN0YWNrICsgJ1xcbicgKyBleC5zdGFjaztcclxuICAgICAgICAgICAgICAgIHRocm93IGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICB0eXBlOiAnY3ZyX2Rpc3Bvc2UnLFxyXG4gICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICBpbnN0YW5jZUlEOiB0aGlzLl9pbnN0YW5jZUlEXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICAvKipcclxuICAgICAqIEZvciBEZWJ1Z1xyXG4gICAgICovXHJcbiAgICBfZ2V0SW50ZXJuYWxEYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlzYTogX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2EsIFwiZlwiKSxcclxuICAgICAgICAgICAgcHJvbWlzZVN0YXJ0U2NhbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9wcm9taXNlU3RhcnRTY2FuLCBcImZcIiksXHJcbiAgICAgICAgICAgIGludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXI6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW50ZXJtZWRpYXRlUmVzdWx0TWFuYWdlciwgXCJmXCIpLFxyXG4gICAgICAgICAgICBidWZmZXJkSXRlbXNNYW5hZ2VyOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2J1ZmZlcmRJdGVtc01hbmFnZXIsIFwiZlwiKSxcclxuICAgICAgICAgICAgcmVzdWx0UmVjZWl2ZXJTZXQ6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0UmVjZWl2ZXJTZXQsIFwiZlwiKSxcclxuICAgICAgICAgICAgaXNhU3RhdGVMaXN0ZW5lclNldDogX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2FTdGF0ZUxpc3RlbmVyU2V0LCBcImZcIiksXHJcbiAgICAgICAgICAgIHJlc3VsdEZpbHRlclNldDogX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9yZXN1bHRGaWx0ZXJTZXQsIFwiZlwiKSxcclxuICAgICAgICAgICAgY29tcHJlc3NSYXRlOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9DYXB0dXJlVmlzaW9uUm91dGVyX2NvbXByZXNzUmF0ZSwgXCJmXCIpLFxyXG4gICAgICAgICAgICBjYW52YXM6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY2FudmFzLCBcImZcIiksXHJcbiAgICAgICAgICAgIGlzU2Nhbm5lcjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc1NjYW5uZXIsIFwiZlwiKSxcclxuICAgICAgICAgICAgaW5uZXJVc2VUYWc6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW5uZXJVc2VUYWcsIFwiZlwiKSxcclxuICAgICAgICAgICAgaXNEZXN0cm95ZWQ6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNEZXN0cm95ZWQsIFwiZlwiKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0V2FzbUZpbHRlclN0YXRlKCkge1xyXG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocnMsIHJqKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0YXNrSUQgPSBnZXROZXh0VGFza0lEKCk7XHJcbiAgICAgICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gYXN5bmMgKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChib2R5LnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IEpTT04ucGFyc2UoYm9keS5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJzKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGV4LnN0YWNrID0gYm9keS5zdGFjayArICdcXG4nICsgZXguc3RhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJqKGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiY3ZyX2dldFdhc21GaWx0ZXJTdGF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgaWQ6IHRhc2tJRCxcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSUQ6IHRoaXMuX2luc3RhbmNlSURcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNhID0gbmV3IFdlYWtNYXAoKSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY2FudmFzID0gbmV3IFdlYWtNYXAoKSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcHJvbWlzZVN0YXJ0U2NhbiA9IG5ldyBXZWFrTWFwKCksIF9DYXB0dXJlVmlzaW9uUm91dGVyX2ludGVybWVkaWF0ZVJlc3VsdE1hbmFnZXIgPSBuZXcgV2Vha01hcCgpLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9idWZmZXJkSXRlbXNNYW5hZ2VyID0gbmV3IFdlYWtNYXAoKSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0UmVjZWl2ZXJTZXQgPSBuZXcgV2Vha01hcCgpLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc2FTdGF0ZUxpc3RlbmVyU2V0ID0gbmV3IFdlYWtNYXAoKSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfcmVzdWx0RmlsdGVyU2V0ID0gbmV3IFdlYWtNYXAoKSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfY29tcHJlc3NSYXRlID0gbmV3IFdlYWtNYXAoKSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaXNTY2FubmVyID0gbmV3IFdlYWtNYXAoKSwgX0NhcHR1cmVWaXNpb25Sb3V0ZXJfaW5uZXJVc2VUYWcgPSBuZXcgV2Vha01hcCgpLCBfQ2FwdHVyZVZpc2lvblJvdXRlcl9pc0Rlc3Ryb3llZCA9IG5ldyBXZWFrTWFwKCk7XHJcbmFzeW5jIGZ1bmN0aW9uIF9lbmFibGVSZXN1bHRDcm9zc1ZlcmlmaWNhdGlvbihjdnIsIHZlcmlmaWNhdGlvbkVuYWJsZWQpIHtcclxuICAgIGNoZWNrSXNEaXNwb3NlZChjdnIpO1xyXG4gICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChycywgcmopID0+IHtcclxuICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gYXN5bmMgKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJzKGJvZHkucmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgZXguc3RhY2sgPSBib2R5LnN0YWNrICsgJ1xcbicgKyBleC5zdGFjaztcclxuICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiY3ZyX2VuYWJsZVJlc3VsdENyb3NzVmVyaWZpY2F0aW9uXCIsXHJcbiAgICAgICAgICAgIGlkOiB0YXNrSUQsXHJcbiAgICAgICAgICAgIGluc3RhbmNlSUQ6IGN2ci5faW5zdGFuY2VJRCxcclxuICAgICAgICAgICAgYm9keToge1xyXG4gICAgICAgICAgICAgICAgdmVyaWZpY2F0aW9uRW5hYmxlZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfZW5hYmxlUmVzdWx0RGVkdXBsaWNhdGlvbihjdnIsIGR1cGxpY2F0ZUZpbHRlckVuYWJsZWQpIHtcclxuICAgIGNoZWNrSXNEaXNwb3NlZChjdnIpO1xyXG4gICAgcmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKChycywgcmopID0+IHtcclxuICAgICAgICBsZXQgdGFza0lEID0gZ2V0TmV4dFRhc2tJRCgpO1xyXG4gICAgICAgIG1hcFRhc2tDYWxsQmFja1t0YXNrSURdID0gYXN5bmMgKGJvZHkpID0+IHtcclxuICAgICAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJzKGJvZHkucmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBleCA9IG5ldyBFcnJvcihib2R5Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgZXguc3RhY2sgPSBib2R5LnN0YWNrICsgJ1xcbicgKyBleC5zdGFjaztcclxuICAgICAgICAgICAgICAgIHJldHVybiByaihleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiY3ZyX2VuYWJsZVJlc3VsdERlZHVwbGljYXRpb25cIixcclxuICAgICAgICAgICAgaWQ6IHRhc2tJRCxcclxuICAgICAgICAgICAgaW5zdGFuY2VJRDogY3ZyLl9pbnN0YW5jZUlELFxyXG4gICAgICAgICAgICBib2R5OiB7XHJcbiAgICAgICAgICAgICAgICBkdXBsaWNhdGVGaWx0ZXJFbmFibGVkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9zZXREdXBsaWNhdGVGb3JnZXRUaW1lKGN2ciwgZHVwbGljYXRlRm9yZ2V0VGltZSkge1xyXG4gICAgY2hlY2tJc0Rpc3Bvc2VkKGN2cik7XHJcbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJzLCByaikgPT4ge1xyXG4gICAgICAgIGxldCB0YXNrSUQgPSBnZXROZXh0VGFza0lEKCk7XHJcbiAgICAgICAgbWFwVGFza0NhbGxCYWNrW3Rhc2tJRF0gPSBhc3luYyAoYm9keSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYm9keS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcnMoYm9keS5yZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGV4ID0gbmV3IEVycm9yKGJvZHkubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBleC5zdGFjayA9IGJvZHkuc3RhY2sgKyAnXFxuJyArIGV4LnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJqKGV4KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgdHlwZTogXCJjdnJfc2V0RHVwbGljYXRlRm9yZ2V0VGltZVwiLFxyXG4gICAgICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgICAgICBpbnN0YW5jZUlEOiBjdnIuX2luc3RhbmNlSUQsXHJcbiAgICAgICAgICAgIGJvZHk6IHtcclxuICAgICAgICAgICAgICAgIGR1cGxpY2F0ZUZvcmdldFRpbWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2NsZWFyVmVyaWZ5TGlzdChjdnIpIHtcclxuICAgIGxldCB0YXNrSUQgPSBnZXROZXh0VGFza0lEKCk7XHJcbiAgICBjb25zdCBwID0gbmV3IE11dGFibGVQcm9taXNlKCk7XHJcbiAgICBtYXBUYXNrQ2FsbEJhY2tbdGFza0lEXSA9IGFzeW5jIChib2R5KSA9PiB7XHJcbiAgICAgICAgaWYgKGJvZHkuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICByZXR1cm4gcC5yZXNvbHZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgZXggPSBuZXcgRXJyb3IoYm9keS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgZXguc3RhY2sgPSBib2R5LnN0YWNrICsgJ1xcbicgKyBleC5zdGFjaztcclxuICAgICAgICAgICAgcmV0dXJuIHAucmVqZWN0KGV4KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICB0eXBlOiBcImN2cl9jbGVhclZlcmlmeUxpc3RcIixcclxuICAgICAgICBpZDogdGFza0lELFxyXG4gICAgICAgIGluc3RhbmNlSUQ6IGN2ci5faW5zdGFuY2VJRFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gcDtcclxufVxuXG4vLyBUT0RPXHJcbmNsYXNzIENhcHR1cmVkUmVzdWx0UmVjZWl2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRXZlbnQgdHJpZ2dlcmVkIHdoZW4gYSBnZW5lcmljIGNhcHR1cmVkIHJlc3VsdCBpcyBhdmFpbGFibGUsIG9jY3VycmluZyBlYWNoIHRpbWUgYW4gaW1hZ2UgZmluaXNoZXMgaXRzIHByb2Nlc3NpbmcuXHJcbiAgICAgICAgICogVGhpcyBldmVudCBjYW4gYmUgdXNlZCBmb3IgYW55IHJlc3VsdCB0aGF0IGRvZXMgbm90IGZpdCBpbnRvIHRoZSBzcGVjaWZpYyBjYXRlZ29yaWVzIG9mIHRoZSBvdGhlciBjYWxsYmFjayBldmVudHMuXHJcbiAgICAgICAgICogQHBhcmFtIHJlc3VsdCBUaGUgY2FwdHVyZWQgcmVzdWx0LCBhbiBpbnN0YW5jZSBvZiBgQ2FwdHVyZWRSZXN1bHRgLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMub25DYXB0dXJlZFJlc3VsdFJlY2VpdmVkID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFdmVudCB0cmlnZ2VyZWQgd2hlbiB0aGUgb3JpZ2luYWwgaW1hZ2UgcmVzdWx0IGlzIGF2YWlsYWJsZS5cclxuICAgICAgICAgKiBUaGlzIGV2ZW50IGlzIHVzZWQgdG8gaGFuZGxlIHRoZSBvcmlnaW5hbCBpbWFnZSBjYXB0dXJlZCBieSBhbiBpbWFnZSBzb3VyY2Ugc3VjaCBhcyBEeW5hbXNvZnQgQ2FtZXJhIEVuaGFuY2VyLlxyXG4gICAgICAgICAqIEBwYXJhbSByZXN1bHQgVGhlIG9yaWdpbmFsIGltYWdlIHJlc3VsdCwgYW4gaW5zdGFuY2Ugb2YgYE9yaWdpbmFsSW1hZ2VSZXN1bHRJdGVtYC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLm9uT3JpZ2luYWxJbWFnZVJlc3VsdFJlY2VpdmVkID0gbnVsbDtcclxuICAgIH1cclxufVxuXG5jbGFzcyBJbnRlcm1lZGlhdGVSZXN1bHRSZWNlaXZlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLl9vYnNlcnZlZFJlc3VsdFVuaXRUeXBlcyA9IEVudW1JbnRlcm1lZGlhdGVSZXN1bHRVbml0VHlwZS5JUlVUX0FMTDtcclxuICAgICAgICB0aGlzLl9vYnNlcnZlZFRhc2tNYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5fcGFyYW1ldGVycyA9IHtcclxuICAgICAgICAgICAgc2V0T2JzZXJ2ZWRSZXN1bHRVbml0VHlwZXM6ICh0eXBlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb2JzZXJ2ZWRSZXN1bHRVbml0VHlwZXMgPSB0eXBlcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0T2JzZXJ2ZWRSZXN1bHRVbml0VHlwZXM6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vYnNlcnZlZFJlc3VsdFVuaXRUeXBlcztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNSZXN1bHRVbml0VHlwZU9ic2VydmVkOiAodHlwZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhKHR5cGUgJiB0aGlzLl9vYnNlcnZlZFJlc3VsdFVuaXRUeXBlcyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGFkZE9ic2VydmVkVGFzazogKHRhc2tOYW1lKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vYnNlcnZlZFRhc2tNYXAuc2V0KHRhc2tOYW1lLCB0cnVlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgcmVtb3ZlT2JzZXJ2ZWRUYXNrOiAodGFza05hbWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29ic2VydmVkVGFza01hcC5zZXQodGFza05hbWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaXNUYXNrT2JzZXJ2ZWQ6ICh0YXNrTmFtZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX29ic2VydmVkVGFza01hcC5zaXplID09PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhKHRoaXMuX29ic2VydmVkVGFza01hcC5nZXQodGFza05hbWUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vblRhc2tSZXN1bHRzUmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIC8vIHNlY3Rpb25cclxuICAgICAgICB0aGlzLm9uUHJlZGV0ZWN0ZWRSZWdpb25zUmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIC8vIFRoZSByZW1haW5pbmcgY2FsbGJhY2sgZGVmaW5pdGlvbnMgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGluamVjdGVkIHdoZW4gaW1wb3J0ZWQgaW50byBvdGhlciBtb2R1bGVzXHJcbiAgICAgICAgLy8gc3RhZ2VcclxuICAgICAgICB0aGlzLm9uQ29sb3VySW1hZ2VVbml0UmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25TY2FsZWREb3duQ29sb3VySW1hZ2VVbml0UmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25HcmF5c2NhbGVJbWFnZVVuaXRSZWNlaXZlZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vblRyYW5zZm9ybWVkR3JheXNjYWxlSW1hZ2VVbml0UmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25FbmhhbmNlZEdyYXlzY2FsZUltYWdlVW5pdFJlY2VpdmVkID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9uQmluYXJ5SW1hZ2VVbml0UmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25UZXh0dXJlRGV0ZWN0aW9uUmVzdWx0VW5pdFJlY2VpdmVkID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9uVGV4dHVyZVJlbW92ZWRHcmF5c2NhbGVJbWFnZVVuaXRSZWNlaXZlZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vblRleHR1cmVSZW1vdmVkQmluYXJ5SW1hZ2VVbml0UmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25Db250b3Vyc1VuaXRSZWNlaXZlZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vbkxpbmVTZWdtZW50c1VuaXRSZWNlaXZlZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vblRleHRab25lc1VuaXRSZWNlaXZlZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vblRleHRSZW1vdmVkQmluYXJ5SW1hZ2VVbml0UmVjZWl2ZWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub25TaG9ydExpbmVzVW5pdFJlY2VpdmVkID0gbnVsbDtcclxuICAgICAgICAvLyBUaGUgcmVtYWluaW5nIGNhbGxiYWNrIGRlZmluaXRpb25zIHdpbGwgYmUgYXV0b21hdGljYWxseSBpbmplY3RlZCB3aGVuIGltcG9ydGVkIGludG8gb3RoZXIgbW9kdWxlc1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSBvYnNlcnZlZCBwYXJhbWV0ZXJzIG9mIHRoZSBpbnRlcm1lZGlhdGUgcmVzdWx0IHJlY2VpdmVyLiBBbGxvd2luZyBmb3IgY29uZmlndXJhdGlvbiBvZiBpbnRlcm1lZGlhdGUgcmVzdWx0IG9ic2VydmF0aW9uLlxyXG4gICAgICogQHJldHVybiBUaGUgb2JzZXJ2ZWQgcGFyYW1ldGVycywgb2YgdHlwZSBPYnNlcnZhdGlvblBhcmFtZXRlcnMuIFRoZSBkZWZhdWx0IHBhcmFtZXRlcnMgYXJlIHRvIG9ic2VydmUgYWxsIGludGVybWVkaWF0ZSByZXN1bHQgdW5pdCB0eXBlcyBhbmQgYWxsIHRhc2tzLlxyXG4gICAgICovXHJcbiAgICBnZXRPYnNlcnZhdGlvblBhcmFtZXRlcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmFtZXRlcnM7XHJcbiAgICB9XHJcbn1cblxudmFyIEVudW1QcmVzZXRUZW1wbGF0ZTtcclxuKGZ1bmN0aW9uIChFbnVtUHJlc2V0VGVtcGxhdGUpIHtcclxuICAgIC8qKlxyXG4gICAgICogQGJyaWVmIFZlcnNhdGlsZSBmdW5jdGlvbiBmb3IgYmFyY29kZSByZWFkaW5nLCBkb2N1bWVudCBkZXRlY3Rpb24sIG9yIHRleHQgcmVjb2duaXRpb24uXHJcbiAgICAgKi9cclxuICAgIEVudW1QcmVzZXRUZW1wbGF0ZVtcIlBUX0RFRkFVTFRcIl0gPSBcIkRlZmF1bHRcIjtcclxuICAgIC8qKlxyXG4gICAgICogQGJyaWVmIFNjYW5zIGEgc2luZ2xlIGJhcmNvZGUuXHJcbiAgICAgKi9cclxuICAgIEVudW1QcmVzZXRUZW1wbGF0ZVtcIlBUX1JFQURfQkFSQ09ERVNcIl0gPSBcIlJlYWRCYXJjb2Rlc19EZWZhdWx0XCI7XHJcbiAgICAvKipcclxuICAgICAqIEBicmllZiBJZGVudGlmaWVzIGFuZCByZWFkcyBhbnkgdGV4dCBwcmVzZW50LlxyXG4gICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9SRUNPR05JWkVfVEVYVF9MSU5FU1wiXSA9IFwiUmVjb2duaXplVGV4dExpbmVzX0RlZmF1bHRcIjtcclxuICAgIC8qKlxyXG4gICAgICogQGJyaWVmIFJJZGVudGlmaWVzIHRoZSBlZGdlcyBvZiBhIGRvY3VtZW50LlxyXG4gICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9ERVRFQ1RfRE9DVU1FTlRfQk9VTkRBUklFU1wiXSA9IFwiRGV0ZWN0RG9jdW1lbnRCb3VuZGFyaWVzX0RlZmF1bHRcIjtcclxuICAgIC8qKlxyXG4gICAgICogQGJyaWVmIERldGVjdHMgZG9jdW1lbnQgZWRnZXMgYW5kIHN0YW5kYXJkaXplcyBpdHMgZm9ybWF0LlxyXG4gICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9ERVRFQ1RfQU5EX05PUk1BTElaRV9ET0NVTUVOVFwiXSA9IFwiRGV0ZWN0QW5kTm9ybWFsaXplRG9jdW1lbnRfRGVmYXVsdFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAYnJpZWYgQWRqdXN0cyBhIGRvY3VtZW50IHRvIGEgc3RhbmRhcmQgZm9ybWF0IHVzaW5nIGRldGVjdGVkIGJvcmRlcnMuXHJcbiAgICAgKi9cclxuICAgIEVudW1QcmVzZXRUZW1wbGF0ZVtcIlBUX05PUk1BTElaRV9ET0NVTUVOVFwiXSA9IFwiTm9ybWFsaXplRG9jdW1lbnRfRGVmYXVsdFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAYnJpZWYgUmVwcmVzZW50cyBhIGJhcmNvZGUgcmVhZGluZyBtb2RlIHdoZXJlIHNwZWVkIGlzIHByaW9yaXRpemVkLlxyXG4gICAgICpcclxuICAgICAqIEluIHRoaXMgbW9kZSwgdGhlIGJhcmNvZGUgcmVhZGVyIHdpbGwgb3B0aW1pemUgZm9yIGZhc3RlciBiYXJjb2RlIGRldGVjdGlvblxyXG4gICAgICogYW5kIGRlY29kaW5nLCBzYWNyaWZpY2luZyBzb21lIGxldmVsIG9mIGFjY3VyYWN5IGFuZCByZWFkIHJhdGUuIEl0IGlzIHN1aXRhYmxlXHJcbiAgICAgKiBmb3Igc2l0dWF0aW9ucyB3aGVyZSBhIHF1aWNrIHJlc3BvbnNlIHRpbWUgaXMgbW9yZSBpbXBvcnRhbnQgdGhhbiBwZXJmZWN0XHJcbiAgICAgKiBiYXJjb2RlIHJlY29nbml0aW9uLlxyXG4gICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9SRUFEX0JBUkNPREVTX1NQRUVEX0ZJUlNUXCJdID0gXCJSZWFkQmFyY29kZXNfU3BlZWRGaXJzdFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAYnJpZWYgUmVwcmVzZW50cyBhIGJhcmNvZGUgcmVhZGluZyBtb2RlIHdoZXJlIGJhcmNvZGUgcmVhZCByYXRlIGlzIHByaW9yaXRpemVkLlxyXG4gICAgICpcclxuICAgICAqIEluIHRoaXMgbW9kZSwgdGhlIGJhcmNvZGUgcmVhZGVyIHdpbGwgb3B0aW1pemUgZm9yIGhpZ2hlciBiYXJjb2RlIHJlYWQgcmF0ZXMsXHJcbiAgICAgKiBldmVuIGlmIGl0IG1heSBzb21ldGltZXMgcmVzdWx0IGluIHJlZHVjZWQgYWNjdXJhY3kgYW5kIHNwZWVkLiBJdCBpcyBzdWl0YWJsZSBmb3JcclxuICAgICAqIHNjZW5hcmlvcyB3aGVyZSBtYXhpbWl6aW5nIHRoZSBudW1iZXIgb2Ygc3VjY2Vzc2Z1bGx5IHJlYWQgYmFyY29kZXMgaXMgY3JpdGljYWwuXHJcbiAgICAgKi9cclxuICAgIEVudW1QcmVzZXRUZW1wbGF0ZVtcIlBUX1JFQURfQkFSQ09ERVNfUkVBRF9SQVRFX0ZJUlNUXCJdID0gXCJSZWFkQmFyY29kZXNfUmVhZFJhdGVGaXJzdFwiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAYnJpZWYgUmVwcmVzZW50cyBhIGJhbGFuY2VkIGJhcmNvZGUgcmVhZGluZyBtb2RlLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgbW9kZSBhaW1zIGZvciBhIHJlYXNvbmFibGUgYmFsYW5jZSBiZXR3ZWVuIHNwZWVkIGFuZCByZWFkIHJhdGUgaW4gYmFyY29kZVxyXG4gICAgICogcmVjb2duaXRpb24uIEl0IGlzIHN1aXRhYmxlIGZvciBtb3N0IGNvbW1vbiB1c2UgY2FzZXMgd2hlcmUgYSBjb21wcm9taXNlIGJldHdlZW5cclxuICAgICAqIHNwZWVkIGFuZCByZWFkIHJhdGUgaXMgYWNjZXB0YWJsZS5cclxuICAgICAqL1xyXG4gICAgRW51bVByZXNldFRlbXBsYXRlW1wiUFRfUkVBRF9CQVJDT0RFU19CQUxBTkNFXCJdID0gXCJSZWFkQmFyY29kZXNfQmFsYW5jZVwiO1xyXG4gICAgLyoqXHJcbiAgICAqIEBicmllZiBSZXByZXNlbnRzIGEgYmFyY29kZSByZWFkaW5nIG1vZGUgZm9yIHNpbmdsZSBiYXJjb2RlIGNvZGUgZGV0ZWN0aW9uLlxyXG4gICAgKlxyXG4gICAgKiBJbiB0aGlzIG1vZGUsIHRoZSBiYXJjb2RlIHJlYWRlciB3aWxsIGZvY3VzIG9uIGRldGVjdGluZyBhbmQgZGVjb2RpbmcgYSBzaW5nbGVcclxuICAgICogYmFyY29kZSBjb2RlLCBpZ25vcmluZyBhbnkgYWRkaXRpb25hbCBjb2RlcyBpbiB0aGUgc2FtZSBpbWFnZS4gSXQgaXMgZWZmaWNpZW50XHJcbiAgICAqIHdoZW4gdGhlIHRhcmdldCBpbWFnZSBoYXMgb25seSBvbmUgYmFyY29kZS5cclxuICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9SRUFEX1NJTkdMRV9CQVJDT0RFXCJdID0gXCJSZWFkQmFyY29kZXNfQmFsYW5jZWRcIjtcclxuICAgIC8qKlxyXG4gICAgICogQGJyaWVmIFJlcHJlc2VudHMgYSBiYXJjb2RlIHJlYWRpbmcgbW9kZSBvcHRpbWl6ZWQgZm9yIGRlbnNlIGJhcmNvZGUgY29kZXMuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBtb2RlIGlzIGRlc2lnbmVkIHRvIGhhbmRsZSBkZW5zZSBvciBjbG9zZWx5IHBhY2tlZCBiYXJjb2RlIGNvZGVzIHdoZXJlXHJcbiAgICAgKiBhY2N1cmFjeSBpcyBwYXJhbW91bnQuIEl0IG1heSBvcGVyYXRlIHNsb3dlciB0aGFuIG90aGVyIG1vZGVzIGJ1dCBpcyBzdWl0YWJsZVxyXG4gICAgICogZm9yIGNoYWxsZW5naW5nIHNjZW5hcmlvcyB3aGVyZSBjb2RlIGRlbnNpdHkgaXMgaGlnaC5cclxuICAgICAqL1xyXG4gICAgRW51bVByZXNldFRlbXBsYXRlW1wiUFRfUkVBRF9ERU5TRV9CQVJDT0RFU1wiXSA9IFwiUmVhZERlbnNlQmFyY29kZXNcIjtcclxuICAgIC8qKlxyXG4gICAgICogQGJyaWVmIFJlcHJlc2VudHMgYSBiYXJjb2RlIHJlYWRpbmcgbW9kZSBvcHRpbWl6ZWQgZm9yIGRpc3RhbnQgYmFyY29kZSBjb2Rlcy5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIG1vZGUgaXMgZGVzaWduZWQgdG8gc2Nhbm5pbmcgYSBiYXJjb2RlIHRoYXQgaXMgcGxhY2VkIGZhciBmcm9tIHRoZSBkZXZpY2UuXHJcbiAgICAgKi9cclxuICAgIEVudW1QcmVzZXRUZW1wbGF0ZVtcIlBUX1JFQURfRElTVEFOVF9CQVJDT0RFU1wiXSA9IFwiUmVhZERpc3RhbnRCYXJjb2Rlc1wiO1xyXG4gICAgLyoqXHJcbiAgICAqIEBicmllZiBSZXByZXNlbnRzIGEgdGV4dCByZWNvZ25pdGlvbiBtb2RlIGZvY3VzZWQgb24gcmVjb2duaXppbmcgbnVtYmVycy5cclxuICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9SRUNPR05JWkVfTlVNQkVSU1wiXSA9IFwiUmVjb2duaXplTnVtYmVyc1wiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAYnJpZWYgUmVwcmVzZW50cyBhIHRleHQgcmVjb2duaXRpb24gbW9kZSBmb2N1c2VkIG9uIHJlY29nbml6aW5nIGFscGhhYmV0aWMgY2hhcmFjdGVycyAobGV0dGVycykuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9SRUNPR05JWkVfTEVUVEVSU1wiXSA9IFwiUmVjb2duaXplTGV0dGVyc1wiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAYnJpZWYgUmVwcmVzZW50cyBhIHRleHQgcmVjb2duaXRpb24gbW9kZSB0aGF0IGNvbWJpbmVzIG51bWJlcnMgYW5kIGFscGhhYmV0aWMgY2hhcmFjdGVycyAobGV0dGVycykgcmVjb2duaXRpb24uXHJcbiAgICAgKi9cclxuICAgIEVudW1QcmVzZXRUZW1wbGF0ZVtcIlBUX1JFQ09HTklaRV9OVU1CRVJTX0FORF9MRVRURVJTXCJdID0gXCJSZWNvZ25pemVOdW1iZXJzQW5kTGV0dGVyc1wiO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAYnJpZWYgUmVwcmVzZW50cyBhIHRleHQgcmVjb2duaXRpb24gbW9kZSB0aGF0IGNvbWJpbmVzIG51bWJlcnMgYW5kIHVwcGVyY2FzZSBsZXR0ZXJzIHJlY29nbml0aW9uLlxyXG4gICAgICovXHJcbiAgICBFbnVtUHJlc2V0VGVtcGxhdGVbXCJQVF9SRUNPR05JWkVfTlVNQkVSU19BTkRfVVBQRVJDQVNFX0xFVFRFUlNcIl0gPSBcIlJlY29nbml6ZU51bWJlcnNBbmRVcHBlcmNhc2VMZXR0ZXJzXCI7XHJcbiAgICAvKipcclxuICAgICAqIEBicmllZiBSZXByZXNlbnRzIGEgdGV4dCByZWNvZ25pdGlvbiBtb2RlIGZvY3VzZWQgb24gcmVjb2duaXppbmcgdXBwZXJjYXNlIGxldHRlcnMuXHJcbiAgICAgKi9cclxuICAgIEVudW1QcmVzZXRUZW1wbGF0ZVtcIlBUX1JFQ09HTklaRV9VUFBFUkNBU0VfTEVUVEVSU1wiXSA9IFwiUmVjb2duaXplVXBwZXJjYXNlTGV0dGVyc1wiO1xyXG59KShFbnVtUHJlc2V0VGVtcGxhdGUgfHwgKEVudW1QcmVzZXRUZW1wbGF0ZSA9IHt9KSk7XG5cbmV4cG9ydCB7IENhcHR1cmVWaXNpb25Sb3V0ZXIsIENhcHR1cmVWaXNpb25Sb3V0ZXJNb2R1bGUsIENhcHR1cmVkUmVzdWx0UmVjZWl2ZXIsIEVudW1JbWFnZVNvdXJjZVN0YXRlLCBFbnVtUHJlc2V0VGVtcGxhdGUsIEludGVybWVkaWF0ZVJlc3VsdFJlY2VpdmVyIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/dynamsoft-capture-vision-router/dist/cvr.esm.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js":
/*!******************************************************!*\
  !*** ./node_modules/dynamsoft-core/dist/core.esm.js ***!
  \******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreModule: function() { return /* binding */ L_; },\n/* harmony export */   EnumBufferOverflowProtectionMode: function() { return /* binding */ e; },\n/* harmony export */   EnumCapturedResultItemType: function() { return /* binding */ D_; },\n/* harmony export */   EnumColourChannelUsageType: function() { return /* binding */ t; },\n/* harmony export */   EnumCornerType: function() { return /* binding */ O_; },\n/* harmony export */   EnumErrorCode: function() { return /* binding */ c_; },\n/* harmony export */   EnumGrayscaleEnhancementMode: function() { return /* binding */ S_; },\n/* harmony export */   EnumGrayscaleTransformationMode: function() { return /* binding */ l_; },\n/* harmony export */   EnumImagePixelFormat: function() { return /* binding */ I; },\n/* harmony export */   EnumImageTagType: function() { return /* binding */ f_; },\n/* harmony export */   EnumIntermediateResultUnitType: function() { return /* binding */ P_; },\n/* harmony export */   EnumPDFReadingMode: function() { return /* binding */ h_; },\n/* harmony export */   EnumRasterDataSource: function() { return /* binding */ d_; },\n/* harmony export */   EnumRegionObjectElementType: function() { return /* binding */ g_; },\n/* harmony export */   EnumSectionType: function() { return /* binding */ M_; },\n/* harmony export */   ImageSourceAdapter: function() { return /* binding */ H; },\n/* harmony export */   _getNorImageData: function() { return /* binding */ B; },\n/* harmony export */   _isArc: function() { return /* binding */ a; },\n/* harmony export */   _isContour: function() { return /* binding */ T; },\n/* harmony export */   _isDSImageData: function() { return /* binding */ R; },\n/* harmony export */   _isDSRect: function() { return /* binding */ L; },\n/* harmony export */   _isImageTag: function() { return /* binding */ D; },\n/* harmony export */   _isLineSegment: function() { return /* binding */ O; },\n/* harmony export */   _isPoint: function() { return /* binding */ c; },\n/* harmony export */   _isPolygon: function() { return /* binding */ S; },\n/* harmony export */   _isQuad: function() { return /* binding */ l; },\n/* harmony export */   _isRect: function() { return /* binding */ f; },\n/* harmony export */   _saveToFile: function() { return /* binding */ u; },\n/* harmony export */   _toBlob: function() { return /* binding */ U; },\n/* harmony export */   _toCanvas: function() { return /* binding */ F; },\n/* harmony export */   _toImage: function() { return /* binding */ G; },\n/* harmony export */   autoDiscoveryPaths: function() { return /* binding */ N_; },\n/* harmony export */   bDebug: function() { return /* binding */ C_; },\n/* harmony export */   checkIsLink: function() { return /* binding */ d; },\n/* harmony export */   compareVersion: function() { return /* binding */ P; },\n/* harmony export */   doOrWaitAsyncDependency: function() { return /* binding */ E_; },\n/* harmony export */   getNextTaskID: function() { return /* binding */ I_; },\n/* harmony export */   handleEngineResourcePaths: function() { return /* binding */ g; },\n/* harmony export */   innerVersions: function() { return /* binding */ o_; },\n/* harmony export */   isArc: function() { return /* binding */ a; },\n/* harmony export */   isContour: function() { return /* binding */ T; },\n/* harmony export */   isDSImageData: function() { return /* binding */ R; },\n/* harmony export */   isDSRect: function() { return /* binding */ L; },\n/* harmony export */   isImageTag: function() { return /* binding */ D; },\n/* harmony export */   isLineSegment: function() { return /* binding */ O; },\n/* harmony export */   isObject: function() { return /* binding */ N; },\n/* harmony export */   isPoint: function() { return /* binding */ c; },\n/* harmony export */   isPolygon: function() { return /* binding */ S; },\n/* harmony export */   isQuad: function() { return /* binding */ l; },\n/* harmony export */   isRect: function() { return /* binding */ f; },\n/* harmony export */   loadWasm: function() { return /* binding */ R_; },\n/* harmony export */   mapAsyncDependency: function() { return /* binding */ q; },\n/* harmony export */   mapPackageRegister: function() { return /* binding */ A_; },\n/* harmony export */   mapTaskCallBack: function() { return /* binding */ r_; },\n/* harmony export */   onLog: function() { return /* binding */ s_; },\n/* harmony export */   requestResource: function() { return /* binding */ h; },\n/* harmony export */   setBDebug: function() { return /* binding */ i_; },\n/* harmony export */   setOnLog: function() { return /* binding */ n_; },\n/* harmony export */   waitAsyncDependency: function() { return /* binding */ __; },\n/* harmony export */   worker: function() { return /* binding */ e_; },\n/* harmony export */   workerAutoResources: function() { return /* binding */ a_; }\n/* harmony export */ });\n/*!\n * Dynamsoft JavaScript Library\n * @product Dynamsoft Core JS Edition\n * @website https://www.dynamsoft.com\n * @copyright Copyright 2024, Dynamsoft Corporation\n * @author Dynamsoft\n * @version 3.4.20\n * @fileoverview Dynamsoft JavaScript Library for Core\n * More info on Dynamsoft Core JS: https://www.dynamsoft.com/capture-vision/docs/web/programming/javascript/api-reference/core/core-module.html\n */\nfunction _(_,E,e,t){if(\"a\"===e&&!t)throw new TypeError(\"Private accessor was defined without a getter\");if(\"function\"==typeof E?_!==E||!t:!E.has(_))throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");return\"m\"===e?t:\"a\"===e?t.call(_):t?t.value:E.get(_)}function E(_,E,e,t,I){if(\"m\"===t)throw new TypeError(\"Private method is not writable\");if(\"a\"===t&&!I)throw new TypeError(\"Private accessor was defined without a setter\");if(\"function\"==typeof E?_!==E||!I:!E.has(_))throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");return\"a\"===t?I.call(_,e):I?I.value=e:E.set(_,e),e}var e,t,I;\"function\"==typeof SuppressedError&&SuppressedError,function(_){_[_.BOPM_BLOCK=0]=\"BOPM_BLOCK\",_[_.BOPM_UPDATE=1]=\"BOPM_UPDATE\"}(e||(e={})),function(_){_[_.CCUT_AUTO=0]=\"CCUT_AUTO\",_[_.CCUT_FULL_CHANNEL=1]=\"CCUT_FULL_CHANNEL\",_[_.CCUT_Y_CHANNEL_ONLY=2]=\"CCUT_Y_CHANNEL_ONLY\",_[_.CCUT_RGB_R_CHANNEL_ONLY=3]=\"CCUT_RGB_R_CHANNEL_ONLY\",_[_.CCUT_RGB_G_CHANNEL_ONLY=4]=\"CCUT_RGB_G_CHANNEL_ONLY\",_[_.CCUT_RGB_B_CHANNEL_ONLY=5]=\"CCUT_RGB_B_CHANNEL_ONLY\"}(t||(t={})),function(_){_[_.IPF_BINARY=0]=\"IPF_BINARY\",_[_.IPF_BINARYINVERTED=1]=\"IPF_BINARYINVERTED\",_[_.IPF_GRAYSCALED=2]=\"IPF_GRAYSCALED\",_[_.IPF_NV21=3]=\"IPF_NV21\",_[_.IPF_RGB_565=4]=\"IPF_RGB_565\",_[_.IPF_RGB_555=5]=\"IPF_RGB_555\",_[_.IPF_RGB_888=6]=\"IPF_RGB_888\",_[_.IPF_ARGB_8888=7]=\"IPF_ARGB_8888\",_[_.IPF_RGB_161616=8]=\"IPF_RGB_161616\",_[_.IPF_ARGB_16161616=9]=\"IPF_ARGB_16161616\",_[_.IPF_ABGR_8888=10]=\"IPF_ABGR_8888\",_[_.IPF_ABGR_16161616=11]=\"IPF_ABGR_16161616\",_[_.IPF_BGR_888=12]=\"IPF_BGR_888\",_[_.IPF_BINARY_8=13]=\"IPF_BINARY_8\",_[_.IPF_NV12=14]=\"IPF_NV12\",_[_.IPF_BINARY_8_INVERTED=15]=\"IPF_BINARY_8_INVERTED\"}(I||(I={}));const r=\"undefined\"==typeof self,s=(()=>{if(!r&&document.currentScript){let _=document.currentScript.src,E=_.indexOf(\"?\");if(-1!=E)_=_.substring(0,E);else{let E=_.indexOf(\"#\");-1!=E&&(_=_.substring(0,E))}return _.substring(0,_.lastIndexOf(\"/\")+1)}return\"./\"})(),n=_=>{if(null==_&&(_=\"./\"),r);else{let E=document.createElement(\"a\");E.href=_,_=E.href}return _.endsWith(\"/\")||(_+=\"/\"),_},C=_=>Object.prototype.toString.call(_),i=_=>Array.isArray?Array.isArray(_):\"[object Array]\"===C(_),o=_=>\"[object Boolean]\"===C(_),A=_=>\"number\"==typeof _&&!Number.isNaN(_),N=_=>null!==_&&\"object\"==typeof _&&!Array.isArray(_),a=_=>!!N(_)&&(!!A(_.x)&&(!!A(_.y)&&(!!A(_.radius)&&(!(_.radius<0)&&(!!A(_.startAngle)&&!!A(_.endAngle)))))),T=_=>!!N(_)&&(!!i(_.points)&&(0!=_.points.length&&!_.points.some((_=>!c(_))))),R=_=>!!N(_)&&(_.bytes instanceof Uint8Array&&(!!A(_.width)&&(!(_.width<=0)&&(!!A(_.height)&&(!(_.height<=0)&&(!!A(_.stride)&&(!(_.stride<=0)&&(\"format\"in _&&!(\"tag\"in _&&!D(_.tag)))))))))),L=_=>!!N(_)&&(!!A(_.left)&&(!(_.left<0)&&(!!A(_.top)&&(!(_.top<0)&&(!!A(_.right)&&(!(_.right<0)&&(!!A(_.bottom)&&(!(_.bottom<0)&&(!(_.left>=_.right)&&(!(_.top>=_.bottom)&&!!o(_.isMeasuredInPercentage))))))))))),D=_=>!!N(_)&&(!!A(_.imageId)&&\"type\"in _),O=_=>!!N(_)&&(!!c(_.startPoint)&&(!!c(_.endPoint)&&(_.startPoint.x!=_.endPoint.x||_.startPoint.y!=_.endPoint.y))),c=_=>!!N(_)&&(!!A(_.x)&&!!A(_.y)),S=_=>!!N(_)&&(!!i(_.points)&&(0!=_.points.length&&!_.points.some((_=>!c(_))))),l=_=>!!N(_)&&(!!i(_.points)&&(0!=_.points.length&&4==_.points.length&&!_.points.some((_=>!c(_))))),f=_=>!!N(_)&&(!!A(_.x)&&(!!A(_.y)&&(!!A(_.width)&&(!(_.width<0)&&(!!A(_.height)&&(!(_.height<0)&&!(\"isMeasuredInPercentage\"in _&&!o(_.isMeasuredInPercentage))))))));async function h(_,E){return await new Promise(((e,t)=>{let I=new XMLHttpRequest;I.open(\"GET\",_,!0),I.responseType=E,I.send(),I.onloadend=async()=>{I.status<200||I.status>=300?t(_+\" \"+I.status):e(I.response)},I.onerror=()=>{t(new Error(\"Network Error: \"+I.statusText))}}))}function d(_){return/^(https:\\/\\/www\\.|http:\\/\\/www\\.|https:\\/\\/|http:\\/\\/)|^[a-zA-Z0-9]{2,}(\\.[a-zA-Z0-9]{2,})(\\.[a-zA-Z0-9]{2,})?/.test(_)}const P=(_,E)=>{let e=_.split(\".\"),t=E.split(\".\");for(let _=0;_<e.length&&_<t.length;++_){let E=e[_],I=t[_];if(E===I)continue;let r=parseInt(e[_]),s=parseInt(t[_]);return r===s||Number.isNaN(r)&&Number.isNaN(s)?E<I?-1:1:r<s||Number.isNaN(r)&&Number.isInteger(s)?-1:1}return e.length===t.length?0:e.length<t.length?-1:1},g=(_,E)=>{const e={};for(let t in E){const I=t;let r=_[I];r&&\"string\"!=typeof r&&r.path&&(r=r.path),_.rootDirectory&&!_.rootDirectory.endsWith(\"/\")&&(_.rootDirectory=_.rootDirectory+\"/\"),void 0===r?_.rootDirectory?r=`${_.rootDirectory}${M[I]}@${E[I].version}/dist/`:(r=E[I].path,r||(r=E[I])):r.startsWith(\"@engineRootDirectory/\")&&(r=r.replace(\"@engineRootDirectory/\",_.rootDirectory)),e[I]=n(r)}return e},M={std:\"dynamsoft-capture-vision-std\",dip:\"dynamsoft-image-processing\",core:\"dynamsoft-core\",dnn:\"dynamsoft-capture-vision-dnn\",license:\"dynamsoft-license\",utility:\"dynamsoft-utility\",cvr:\"dynamsoft-capture-vision-router\",dbr:\"dynamsoft-barcode-reader\",dlr:\"dynamsoft-label-recognizer\",ddn:\"dynamsoft-document-normalizer\",dcp:\"dynamsoft-code-parser\",dcpd:\"dynamsoft-code-parser\",dlrData:\"dynamsoft-label-recognizer-data\",dce:\"dynamsoft-camera-enhancer\"},u=async(_,E,e)=>await new Promise((async(t,I)=>{try{const I=E.split(\".\");let r=I[I.length-1];const s=await U(`image/${r}`,_);I.length<=1&&(r=\"png\");const n=new File([s],E,{type:`image/${r}`});if(e){const _=URL.createObjectURL(n),e=document.createElement(\"a\");e.href=_,e.download=E,e.click()}return t(n)}catch(_){return I()}})),F=_=>{R(_)&&(_=B(_));const E=document.createElement(\"canvas\");E.width=_.width,E.height=_.height;return E.getContext(\"2d\",{willReadFrequently:!0}).putImageData(_,0,0),E},G=(_,E)=>{R(E)&&(E=B(E));const e=F(E);let t=new Image,I=e.toDataURL(_);return t.src=I,t},U=async(_,E)=>{R(E)&&(E=B(E));const e=F(E);return new Promise(((E,t)=>{e.toBlob((_=>E(_)),_)}))},B=_=>{let E,e=_.bytes;if(!(e&&e instanceof Uint8Array))throw Error(\"Parameter type error\");if(Number(_.format)===I.IPF_BGR_888){const _=e.length/3;E=new Uint8ClampedArray(4*_);for(let t=0;t<_;++t)E[4*t]=e[3*t],E[4*t+1]=e[3*t+1],E[4*t+2]=e[3*t+2],E[4*t+3]=255}else if(Number(_.format)===I.IPF_RGB_888){const _=e.length/3;E=new Uint8ClampedArray(4*_);for(let t=0;t<_;++t)E[4*t]=e[3*t+2],E[4*t+1]=e[3*t+1],E[4*t+2]=e[3*t],E[4*t+3]=255}else if(Number(_.format)===I.IPF_GRAYSCALED){const _=e.length;E=new Uint8ClampedArray(4*_);for(let t=0;t<_;t++)E[4*t]=E[4*t+1]=E[4*t+2]=e[t],E[4*t+3]=255}else if(Number(_.format)===I.IPF_BINARY_8){const t=e.length,I=_.width,r=_.height,s=_.stride;E=new Uint8ClampedArray(I*r*4);for(let _=0;_<t;_++){let t=e[_],r=_%s,n=Math.floor(_/s);for(let _=0;_<8;_++){let e=r+_,s=4*(n*I+e);if(e>=I)break;E[s]=E[s+1]=E[s+2]=(128&t)/128*255,E[s+3]=255,t<<=1}}}else if(Number(_.format)===I.IPF_ABGR_8888){const _=e.length/4;E=new Uint8ClampedArray(e.length);for(let t=0;t<_;++t)E[4*t]=e[4*t],E[4*t+1]=e[4*t+1],E[4*t+2]=e[4*t+2],E[4*t+3]=e[4*t+3]}else if(Number(_.format)===I.IPF_ARGB_8888){const _=e.length/4;E=new Uint8ClampedArray(e.length);for(let t=0;t<_;++t)E[4*t]=e[4*t+2],E[4*t+1]=e[4*t+1],E[4*t+2]=e[4*t],E[4*t+3]=e[4*t+3]}return new ImageData(E,_.width,_.height)};var p,m,y,w,V,b,v,Y;class H{get _isFetchingStarted(){return _(this,V,\"f\")}constructor(){p.add(this),m.set(this,[]),y.set(this,1),w.set(this,e.BOPM_BLOCK),V.set(this,!1),b.set(this,void 0),v.set(this,t.CCUT_AUTO)}setErrorListener(_){}addImageToBuffer(E){var t;if(!R(E))throw new TypeError(\"Invalid 'image'.\");if((null===(t=E.tag)||void 0===t?void 0:t.hasOwnProperty(\"imageId\"))&&\"number\"==typeof E.tag.imageId&&this.hasImage(E.tag.imageId))throw new Error(\"Existed imageId.\");if(_(this,m,\"f\").length>=_(this,y,\"f\"))switch(_(this,w,\"f\")){case e.BOPM_BLOCK:break;case e.BOPM_UPDATE:if(_(this,m,\"f\").push(E),N(_(this,b,\"f\"))&&A(_(this,b,\"f\").imageId)&&1==_(this,b,\"f\").keepInBuffer)for(;_(this,m,\"f\").length>_(this,y,\"f\");){const E=_(this,m,\"f\").findIndex((E=>{var e;return(null===(e=E.tag)||void 0===e?void 0:e.imageId)!==_(this,b,\"f\").imageId}));_(this,m,\"f\").splice(E,1)}else _(this,m,\"f\").splice(0,_(this,m,\"f\").length-_(this,y,\"f\"))}else _(this,m,\"f\").push(E)}getImage(){if(0===_(this,m,\"f\").length)return null;let E;if(_(this,b,\"f\")&&A(_(this,b,\"f\").imageId)){const e=_(this,p,\"m\",Y).call(this,_(this,b,\"f\").imageId);if(e<0)throw new Error(`Image with id ${_(this,b,\"f\").imageId} doesn't exist.`);E=_(this,m,\"f\").slice(e,e+1)[0]}else E=_(this,m,\"f\").pop();if([I.IPF_RGB_565,I.IPF_RGB_555,I.IPF_RGB_888,I.IPF_ARGB_8888,I.IPF_RGB_161616,I.IPF_ARGB_16161616,I.IPF_ABGR_8888,I.IPF_ABGR_16161616,I.IPF_BGR_888].includes(E.format)){if(_(this,v,\"f\")===t.CCUT_RGB_R_CHANNEL_ONLY){H._onLog&&H._onLog(\"only get R channel data.\");const _=new Uint8Array(E.width*E.height);for(let e=0;e<_.length;e++)switch(E.format){case I.IPF_RGB_565:case I.IPF_RGB_555:case I.IPF_RGB_888:case I.IPF_RGB_161616:_[e]=E.bytes[3*e+2];break;case I.IPF_ARGB_8888:case I.IPF_ARGB_16161616:_[e]=E.bytes[4*e+2];break;case I.IPF_BGR_888:_[e]=E.bytes[3*e];break;case I.IPF_ABGR_8888:case I.IPF_ABGR_16161616:_[e]=E.bytes[4*e]}E.bytes=_,E.stride=E.width,E.format=I.IPF_GRAYSCALED}else if(_(this,v,\"f\")===t.CCUT_RGB_G_CHANNEL_ONLY){H._onLog&&H._onLog(\"only get G channel data.\");const _=new Uint8Array(E.width*E.height);for(let e=0;e<_.length;e++)switch(E.format){case I.IPF_RGB_565:case I.IPF_RGB_555:case I.IPF_RGB_888:case I.IPF_RGB_161616:case I.IPF_BGR_888:_[e]=E.bytes[3*e+1];break;case I.IPF_ARGB_8888:case I.IPF_ARGB_16161616:case I.IPF_ABGR_8888:case I.IPF_ABGR_16161616:_[e]=E.bytes[4*e+1]}E.bytes=_,E.stride=E.width,E.format=I.IPF_GRAYSCALED}else if(_(this,v,\"f\")===t.CCUT_RGB_B_CHANNEL_ONLY){H._onLog&&H._onLog(\"only get B channel data.\");const _=new Uint8Array(E.width*E.height);for(let e=0;e<_.length;e++)switch(E.format){case I.IPF_RGB_565:case I.IPF_RGB_555:case I.IPF_RGB_888:case I.IPF_RGB_161616:_[e]=E.bytes[3*e];break;case I.IPF_ARGB_8888:case I.IPF_ARGB_16161616:_[e]=E.bytes[4*e];break;case I.IPF_BGR_888:_[e]=E.bytes[3*e+2];break;case I.IPF_ABGR_8888:case I.IPF_ABGR_16161616:_[e]=E.bytes[4*e+2]}E.bytes=_,E.stride=E.width,E.format=I.IPF_GRAYSCALED}}else[I.IPF_NV21,I.IPF_NV12].includes(E.format)&&H._onLog&&H._onLog(\"NV21 or NV12 is not supported.\");return E}setNextImageToReturn(_,e){if(!((..._)=>0!==_.length&&_.every((_=>A(_))))(_))throw new TypeError(\"Invalid 'imageId'.\");if(void 0!==e&&!o(e))throw new TypeError(\"Invalid 'keepInBuffer'.\");E(this,b,{imageId:_,keepInBuffer:e},\"f\")}_resetNextReturnedImage(){E(this,b,null,\"f\")}hasImage(E){return _(this,p,\"m\",Y).call(this,E)>=0}startFetching(){E(this,V,!0,\"f\")}stopFetching(){E(this,V,!1,\"f\")}setMaxImageCount(e){if(\"number\"!=typeof e)throw new TypeError(\"Invalid 'count'.\");if(e<1||Math.round(e)!==e)throw new Error(\"Invalid 'count'.\");for(E(this,y,e,\"f\");_(this,m,\"f\")&&_(this,m,\"f\").length>e;)_(this,m,\"f\").shift()}getMaxImageCount(){return _(this,y,\"f\")}getImageCount(){return _(this,m,\"f\").length}clearBuffer(){_(this,m,\"f\").length=0}isBufferEmpty(){return 0===_(this,m,\"f\").length}setBufferOverflowProtectionMode(_){E(this,w,_,\"f\")}getBufferOverflowProtectionMode(){return _(this,w,\"f\")}setColourChannelUsageType(_){E(this,v,_,\"f\")}getColourChannelUsageType(){return _(this,v,\"f\")}}m=new WeakMap,y=new WeakMap,w=new WeakMap,V=new WeakMap,b=new WeakMap,v=new WeakMap,p=new WeakSet,Y=function(E){if(\"number\"!=typeof E)throw new TypeError(\"Invalid 'imageId'.\");return _(this,m,\"f\").findIndex((_=>{var e;return(null===(e=_.tag)||void 0===e?void 0:e.imageId)===E}))};const k=_=>_&&\"object\"==typeof _&&\"function\"==typeof _.then;class X extends Promise{get status(){return this._s}get isPending(){return\"pending\"===this._s}get isFulfilled(){return\"fulfilled\"===this._s}get isRejected(){return\"rejected\"===this._s}get task(){return this._task}set task(_){let E;this._task=_,k(_)?E=_:\"function\"==typeof _&&(E=new Promise(_)),E&&(async()=>{try{const e=await E;_===this._task&&this.resolve(e)}catch(E){_===this._task&&this.reject(E)}})()}get isEmpty(){return null==this._task}constructor(_){let E,e;super(((_,t)=>{E=_,e=t})),this._s=\"pending\",this.resolve=_=>{this.isPending&&(k(_)?this.task=_:(this._s=\"fulfilled\",E(_)))},this.reject=_=>{this.isPending&&(this._s=\"rejected\",e(_))},this.task=_}}let Z,W,x,K,j;\"undefined\"!=typeof navigator&&(Z=navigator,W=Z.userAgent,x=Z.platform,K=Z.mediaDevices),function(){if(!r){const _={Edge:{search:\"Edg\",verSearch:\"Edg\"},OPR:null,Chrome:null,Safari:{str:Z.vendor,search:\"Apple\",verSearch:[\"Version\",\"iPhone OS\",\"CPU OS\"]},Firefox:null,Explorer:{search:\"MSIE\",verSearch:\"MSIE\"}},E={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:x,search:\"Win\"},Mac:{str:x},Linux:{str:x}};let e=\"unknownBrowser\",t=0,I=\"unknownOS\";for(let E in _){const I=_[E]||{};let r=I.str||W,s=I.search||E,n=I.verStr||W,C=I.verSearch||E;if(C instanceof Array||(C=[C]),-1!=r.indexOf(s)){e=E;for(let _ of C){let E=n.indexOf(_);if(-1!=E){t=parseFloat(n.substring(E+_.length+1));break}}break}}for(let _ in E){const e=E[_]||{};let t=e.str||W,r=e.search||_;if(-1!=t.indexOf(r)){I=_;break}}\"Linux\"==I&&-1!=W.indexOf(\"Windows NT\")&&(I=\"HarmonyOS\"),j={browser:e,version:t,OS:I}}r&&(j={browser:\"ssr\",version:0,OS:\"ssr\"})}();const J=\"undefined\"!=typeof WebAssembly&&W&&!(/Safari/.test(W)&&!/Chrome/.test(W)&&/\\(.+\\s11_2_([2-6]).*\\)/.test(W)),Q=!(\"undefined\"==typeof Worker),$=!(!K||!K.getUserMedia),z=async()=>{let _=!1;if($)try{(await K.getUserMedia({video:!0})).getTracks().forEach((_=>{_.stop()})),_=!0}catch(_){}return _};\"Chrome\"===j.browser&&j.version>66||\"Safari\"===j.browser&&j.version>13||\"OPR\"===j.browser&&j.version>43||\"Edge\"===j.browser&&j.version;const q={},__=async _=>{let E=\"string\"==typeof _?[_]:_,e=[];for(let _ of E)e.push(q[_]=q[_]||new X);await Promise.all(e)},E_=async(_,E)=>{let e,t=\"string\"==typeof _?[_]:_,I=[];for(let _ of t){let t;I.push(t=q[_]=q[_]||new X(e=e||E())),t.isEmpty&&(t.task=e=e||E())}await Promise.all(I)};let e_,t_=0;const I_=()=>t_++,r_={};let s_;const n_=_=>{s_=_,e_&&e_.postMessage({type:\"setBLog\",body:{value:!!_}})};let C_=!1;const i_=_=>{C_=_,e_&&e_.postMessage({type:\"setBDebug\",body:{value:!!_}})},o_={},A_={},N_={std:{version:\"1.4.10\",path:n(s+\"../../dynamsoft-capture-vision-std@1.4.10/dist/\")},core:{version:\"3.4.20\",path:s}},a_={dip:{wasm:!0}},T_={},R_=async _=>{let E;_ instanceof Array||(_=_?[_]:[]);let e=q.core;E=!e||e.isEmpty;let t=new Map;const I=_=>{if(\"std\"==(_=_.toLowerCase())||\"core\"==_)return;if(!a_[_])throw Error(\"The '\"+_+\"' module cannot be found.\");let E=a_[_].deps;if(null==E?void 0:E.length)for(let _ of E)I(_);let e=q[_];t.has(_)||t.set(_,!e||e.isEmpty)};for(let E of _)I(E);let r=[];E&&r.push(\"core\"),r.push(...t.keys());const s=[...t.entries()].filter((_=>!_[1])).map((_=>_[0]));await E_(r,(async()=>{const _=[...t.entries()].filter((_=>_[1])).map((_=>_[0]));await __(s);const e=g(T_,N_),I={};for(let E of _)I[E]=a_[E];const r={engineResourcePaths:e,autoResources:I,names:_};let n=new X;if(E){r.needLoadCore=!0;let _=e.core+L_._workerName;_.startsWith(location.origin)||(_=await fetch(_).then((_=>_.blob())).then((_=>URL.createObjectURL(_)))),e_=new Worker(_),e_.onerror=_=>{let E=new Error(_.message);n.reject(E)},e_.addEventListener(\"message\",(_=>{let E=_.data?_.data:_,e=E.type,t=E.id,I=E.body;switch(e){case\"log\":s_&&s_(E.message);break;case\"task\":try{r_[t](I),delete r_[t]}catch(_){throw delete r_[t],_}break;case\"event\":try{r_[t](I)}catch(_){throw _}break;default:console.log(_)}})),r.bLog=!!s_,r.bd=C_,r.dm=location.origin.startsWith(\"http\")?location.origin:\"https://localhost\"}else await __(\"core\");let C=t_++;r_[C]=_=>{if(_.success)Object.assign(o_,_.versions),\"{}\"!==JSON.stringify(_.versions)&&(L_._versions=_.versions),n.resolve(void 0);else{const E=Error(_.message);_.stack&&(E.stack=_.stack),n.reject(E)}},e_.postMessage({type:\"loadWasm\",body:r,id:C}),await n}))};class L_{static get engineResourcePaths(){return T_}static set engineResourcePaths(_){Object.assign(T_,_)}static get bSupportDce4Module(){return this._bSupportDce4Module}static get bSupportIRTModule(){return this._bSupportIRTModule}static get versions(){return this._versions}static get _onLog(){return s_}static set _onLog(_){n_(_)}static get _bDebug(){return C_}static set _bDebug(_){i_(_)}static isModuleLoaded(_){return _=(_=_||\"core\").toLowerCase(),!!q[_]&&q[_].isFulfilled}static async loadWasm(_){return await R_(_)}static async detectEnvironment(){return await(async()=>({wasm:J,worker:Q,getUserMedia:$,camera:await z(),browser:j.browser,version:j.version,OS:j.OS}))()}static async getModuleVersion(){return await new Promise(((_,E)=>{let e=I_();r_[e]=async e=>{if(e.success)return _(e.versions);{let _=new Error(e.message);return _.stack=e.stack+\"\\n\"+_.stack,E(_)}},e_.postMessage({type:\"getModuleVersion\",id:e})}))}static getVersion(){const _=o_.core&&o_.core.worker,E=o_.core&&o_.core.wasm;return`3.4.20(Worker: ${_||\"Not Loaded\"}, Wasm: ${E||\"Not Loaded\"})`}static enableLogging(){H._onLog=console.log,L_._onLog=console.log}static disableLogging(){H._onLog=null,L_._onLog=null}static async cfd(_){return await new Promise(((E,e)=>{let t=I_();r_[t]=async _=>{if(_.success)return E();{let E=new Error(_.message);return E.stack=_.stack+\"\\n\"+E.stack,e(E)}},e_.postMessage({type:\"cfd\",id:t,body:{count:_}})}))}}var D_,O_,c_,S_,l_,f_,h_,d_;L_._bSupportDce4Module=-1,L_._bSupportIRTModule=-1,L_._versions=null,L_._workerName=\"core.worker.js\",L_.browserInfo=j,function(_){_[_.CRIT_ORIGINAL_IMAGE=1]=\"CRIT_ORIGINAL_IMAGE\",_[_.CRIT_BARCODE=2]=\"CRIT_BARCODE\",_[_.CRIT_TEXT_LINE=4]=\"CRIT_TEXT_LINE\",_[_.CRIT_DETECTED_QUAD=8]=\"CRIT_DETECTED_QUAD\",_[_.CRIT_NORMALIZED_IMAGE=16]=\"CRIT_NORMALIZED_IMAGE\",_[_.CRIT_PARSED_RESULT=32]=\"CRIT_PARSED_RESULT\"}(D_||(D_={})),function(_){_[_.CT_NORMAL_INTERSECTED=0]=\"CT_NORMAL_INTERSECTED\",_[_.CT_T_INTERSECTED=1]=\"CT_T_INTERSECTED\",_[_.CT_CROSS_INTERSECTED=2]=\"CT_CROSS_INTERSECTED\",_[_.CT_NOT_INTERSECTED=3]=\"CT_NOT_INTERSECTED\"}(O_||(O_={})),function(_){_[_.EC_OK=0]=\"EC_OK\",_[_.EC_UNKNOWN=-1e4]=\"EC_UNKNOWN\",_[_.EC_NO_MEMORY=-10001]=\"EC_NO_MEMORY\",_[_.EC_NULL_POINTER=-10002]=\"EC_NULL_POINTER\",_[_.EC_LICENSE_INVALID=-10003]=\"EC_LICENSE_INVALID\",_[_.EC_LICENSE_EXPIRED=-10004]=\"EC_LICENSE_EXPIRED\",_[_.EC_FILE_NOT_FOUND=-10005]=\"EC_FILE_NOT_FOUND\",_[_.EC_FILE_TYPE_NOT_SUPPORTED=-10006]=\"EC_FILE_TYPE_NOT_SUPPORTED\",_[_.EC_BPP_NOT_SUPPORTED=-10007]=\"EC_BPP_NOT_SUPPORTED\",_[_.EC_INDEX_INVALID=-10008]=\"EC_INDEX_INVALID\",_[_.EC_CUSTOM_REGION_INVALID=-10010]=\"EC_CUSTOM_REGION_INVALID\",_[_.EC_IMAGE_READ_FAILED=-10012]=\"EC_IMAGE_READ_FAILED\",_[_.EC_TIFF_READ_FAILED=-10013]=\"EC_TIFF_READ_FAILED\",_[_.EC_DIB_BUFFER_INVALID=-10018]=\"EC_DIB_BUFFER_INVALID\",_[_.EC_PDF_READ_FAILED=-10021]=\"EC_PDF_READ_FAILED\",_[_.EC_PDF_DLL_MISSING=-10022]=\"EC_PDF_DLL_MISSING\",_[_.EC_PAGE_NUMBER_INVALID=-10023]=\"EC_PAGE_NUMBER_INVALID\",_[_.EC_CUSTOM_SIZE_INVALID=-10024]=\"EC_CUSTOM_SIZE_INVALID\",_[_.EC_TIMEOUT=-10026]=\"EC_TIMEOUT\",_[_.EC_JSON_PARSE_FAILED=-10030]=\"EC_JSON_PARSE_FAILED\",_[_.EC_JSON_TYPE_INVALID=-10031]=\"EC_JSON_TYPE_INVALID\",_[_.EC_JSON_KEY_INVALID=-10032]=\"EC_JSON_KEY_INVALID\",_[_.EC_JSON_VALUE_INVALID=-10033]=\"EC_JSON_VALUE_INVALID\",_[_.EC_JSON_NAME_KEY_MISSING=-10034]=\"EC_JSON_NAME_KEY_MISSING\",_[_.EC_JSON_NAME_VALUE_DUPLICATED=-10035]=\"EC_JSON_NAME_VALUE_DUPLICATED\",_[_.EC_TEMPLATE_NAME_INVALID=-10036]=\"EC_TEMPLATE_NAME_INVALID\",_[_.EC_JSON_NAME_REFERENCE_INVALID=-10037]=\"EC_JSON_NAME_REFERENCE_INVALID\",_[_.EC_PARAMETER_VALUE_INVALID=-10038]=\"EC_PARAMETER_VALUE_INVALID\",_[_.EC_DOMAIN_NOT_MATCH=-10039]=\"EC_DOMAIN_NOT_MATCH\",_[_.EC_RESERVED_INFO_NOT_MATCH=-10040]=\"EC_RESERVED_INFO_NOT_MATCH\",_[_.EC_LICENSE_KEY_NOT_MATCH=-10043]=\"EC_LICENSE_KEY_NOT_MATCH\",_[_.EC_REQUEST_FAILED=-10044]=\"EC_REQUEST_FAILED\",_[_.EC_LICENSE_INIT_FAILED=-10045]=\"EC_LICENSE_INIT_FAILED\",_[_.EC_SET_MODE_ARGUMENT_ERROR=-10051]=\"EC_SET_MODE_ARGUMENT_ERROR\",_[_.EC_LICENSE_CONTENT_INVALID=-10052]=\"EC_LICENSE_CONTENT_INVALID\",_[_.EC_LICENSE_KEY_INVALID=-10053]=\"EC_LICENSE_KEY_INVALID\",_[_.EC_LICENSE_DEVICE_RUNS_OUT=-10054]=\"EC_LICENSE_DEVICE_RUNS_OUT\",_[_.EC_GET_MODE_ARGUMENT_ERROR=-10055]=\"EC_GET_MODE_ARGUMENT_ERROR\",_[_.EC_IRT_LICENSE_INVALID=-10056]=\"EC_IRT_LICENSE_INVALID\",_[_.EC_FILE_SAVE_FAILED=-10058]=\"EC_FILE_SAVE_FAILED\",_[_.EC_STAGE_TYPE_INVALID=-10059]=\"EC_STAGE_TYPE_INVALID\",_[_.EC_IMAGE_ORIENTATION_INVALID=-10060]=\"EC_IMAGE_ORIENTATION_INVALID\",_[_.EC_CONVERT_COMPLEX_TEMPLATE_ERROR=-10061]=\"EC_CONVERT_COMPLEX_TEMPLATE_ERROR\",_[_.EC_CALL_REJECTED_WHEN_CAPTURING=-10062]=\"EC_CALL_REJECTED_WHEN_CAPTURING\",_[_.EC_NO_IMAGE_SOURCE=-10063]=\"EC_NO_IMAGE_SOURCE\",_[_.EC_READ_DIRECTORY_FAILED=-10064]=\"EC_READ_DIRECTORY_FAILED\",_[_.EC_MODULE_NOT_FOUND=-10065]=\"EC_MODULE_NOT_FOUND\",_[_.EC_MULTI_PAGES_NOT_SUPPORTED=-10066]=\"EC_MULTI_PAGES_NOT_SUPPORTED\",_[_.EC_FILE_ALREADY_EXISTS=-10067]=\"EC_FILE_ALREADY_EXISTS\",_[_.EC_CREATE_FILE_FAILED=-10068]=\"EC_CREATE_FILE_FAILED\",_[_.EC_IMGAE_DATA_INVALID=-10069]=\"EC_IMGAE_DATA_INVALID\",_[_.EC_IMAGE_SIZE_NOT_MATCH=-10070]=\"EC_IMAGE_SIZE_NOT_MATCH\",_[_.EC_IMAGE_PIXEL_FORMAT_NOT_MATCH=-10071]=\"EC_IMAGE_PIXEL_FORMAT_NOT_MATCH\",_[_.EC_SECTION_LEVEL_RESULT_IRREPLACEABLE=-10072]=\"EC_SECTION_LEVEL_RESULT_IRREPLACEABLE\",_[_.EC_AXIS_DEFINITION_INCORRECT=-10073]=\"EC_AXIS_DEFINITION_INCORRECT\",_[_.EC_RESULT_TYPE_MISMATCH_IRREPLACEABLE=-10074]=\"EC_RESULT_TYPE_MISMATCH_IRREPLACEABLE\",_[_.EC_PDF_LIBRARY_LOAD_FAILED=-10075]=\"EC_PDF_LIBRARY_LOAD_FAILED\",_[_.EC_NO_LICENSE=-2e4]=\"EC_NO_LICENSE\",_[_.EC_HANDSHAKE_CODE_INVALID=-20001]=\"EC_HANDSHAKE_CODE_INVALID\",_[_.EC_LICENSE_BUFFER_FAILED=-20002]=\"EC_LICENSE_BUFFER_FAILED\",_[_.EC_LICENSE_SYNC_FAILED=-20003]=\"EC_LICENSE_SYNC_FAILED\",_[_.EC_DEVICE_NOT_MATCH=-20004]=\"EC_DEVICE_NOT_MATCH\",_[_.EC_BIND_DEVICE_FAILED=-20005]=\"EC_BIND_DEVICE_FAILED\",_[_.EC_INSTANCE_COUNT_OVER_LIMIT=-20008]=\"EC_INSTANCE_COUNT_OVER_LIMIT\",_[_.EC_LICENSE_INIT_SEQUENCE_FAILED=-20009]=\"EC_LICENSE_INIT_SEQUENCE_FAILED\",_[_.EC_TRIAL_LICENSE=-20010]=\"EC_TRIAL_LICENSE\",_[_.EC_FAILED_TO_REACH_DLS=-20200]=\"EC_FAILED_TO_REACH_DLS\",_[_.EC_LICENSE_CACHE_USED=-20012]=\"EC_LICENSE_CACHE_USED\",_[_.EC_BARCODE_FORMAT_INVALID=-30009]=\"EC_BARCODE_FORMAT_INVALID\",_[_.EC_QR_LICENSE_INVALID=-30016]=\"EC_QR_LICENSE_INVALID\",_[_.EC_1D_LICENSE_INVALID=-30017]=\"EC_1D_LICENSE_INVALID\",_[_.EC_PDF417_LICENSE_INVALID=-30019]=\"EC_PDF417_LICENSE_INVALID\",_[_.EC_DATAMATRIX_LICENSE_INVALID=-30020]=\"EC_DATAMATRIX_LICENSE_INVALID\",_[_.EC_CUSTOM_MODULESIZE_INVALID=-30025]=\"EC_CUSTOM_MODULESIZE_INVALID\",_[_.EC_AZTEC_LICENSE_INVALID=-30041]=\"EC_AZTEC_LICENSE_INVALID\",_[_.EC_PATCHCODE_LICENSE_INVALID=-30046]=\"EC_PATCHCODE_LICENSE_INVALID\",_[_.EC_POSTALCODE_LICENSE_INVALID=-30047]=\"EC_POSTALCODE_LICENSE_INVALID\",_[_.EC_DPM_LICENSE_INVALID=-30048]=\"EC_DPM_LICENSE_INVALID\",_[_.EC_FRAME_DECODING_THREAD_EXISTS=-30049]=\"EC_FRAME_DECODING_THREAD_EXISTS\",_[_.EC_STOP_DECODING_THREAD_FAILED=-30050]=\"EC_STOP_DECODING_THREAD_FAILED\",_[_.EC_MAXICODE_LICENSE_INVALID=-30057]=\"EC_MAXICODE_LICENSE_INVALID\",_[_.EC_GS1_DATABAR_LICENSE_INVALID=-30058]=\"EC_GS1_DATABAR_LICENSE_INVALID\",_[_.EC_GS1_COMPOSITE_LICENSE_INVALID=-30059]=\"EC_GS1_COMPOSITE_LICENSE_INVALID\",_[_.EC_DOTCODE_LICENSE_INVALID=-30061]=\"EC_DOTCODE_LICENSE_INVALID\",_[_.EC_PHARMACODE_LICENSE_INVALID=-30062]=\"EC_PHARMACODE_LICENSE_INVALID\",_[_.EC_CHARACTER_MODEL_FILE_NOT_FOUND=-40100]=\"EC_CHARACTER_MODEL_FILE_NOT_FOUND\",_[_.EC_TEXT_LINE_GROUP_LAYOUT_CONFLICT=-40101]=\"EC_TEXT_LINE_GROUP_LAYOUT_CONFLICT\",_[_.EC_TEXT_LINE_GROUP_REGEX_CONFLICT=-40102]=\"EC_TEXT_LINE_GROUP_REGEX_CONFLICT\",_[_.EC_QUADRILATERAL_INVALID=-50057]=\"EC_QUADRILATERAL_INVALID\",_[_.EC_PANORAMA_LICENSE_INVALID=-70060]=\"EC_PANORAMA_LICENSE_INVALID\",_[_.EC_RESOURCE_PATH_NOT_EXIST=-90001]=\"EC_RESOURCE_PATH_NOT_EXIST\",_[_.EC_RESOURCE_LOAD_FAILED=-90002]=\"EC_RESOURCE_LOAD_FAILED\",_[_.EC_CODE_SPECIFICATION_NOT_FOUND=-90003]=\"EC_CODE_SPECIFICATION_NOT_FOUND\",_[_.EC_FULL_CODE_EMPTY=-90004]=\"EC_FULL_CODE_EMPTY\",_[_.EC_FULL_CODE_PREPROCESS_FAILED=-90005]=\"EC_FULL_CODE_PREPROCESS_FAILED\",_[_.EC_ZA_DL_LICENSE_INVALID=-90006]=\"EC_ZA_DL_LICENSE_INVALID\",_[_.EC_AAMVA_DL_ID_LICENSE_INVALID=-90007]=\"EC_AAMVA_DL_ID_LICENSE_INVALID\",_[_.EC_AADHAAR_LICENSE_INVALID=-90008]=\"EC_AADHAAR_LICENSE_INVALID\",_[_.EC_MRTD_LICENSE_INVALID=-90009]=\"EC_MRTD_LICENSE_INVALID\",_[_.EC_VIN_LICENSE_INVALID=-90010]=\"EC_VIN_LICENSE_INVALID\",_[_.EC_CUSTOMIZED_CODE_TYPE_LICENSE_INVALID=-90011]=\"EC_CUSTOMIZED_CODE_TYPE_LICENSE_INVALID\",_[_.EC_LICENSE_WARNING=-10076]=\"EC_LICENSE_WARNING\",_[_.EC_BARCODE_READER_LICENSE_NOT_FOUND=-30063]=\"EC_BARCODE_READER_LICENSE_NOT_FOUND\",_[_.EC_LABEL_RECOGNIZER_LICENSE_NOT_FOUND=-40103]=\"EC_LABEL_RECOGNIZER_LICENSE_NOT_FOUND\",_[_.EC_DOCUMENT_NORMALIZER_LICENSE_NOT_FOUND=-50058]=\"EC_DOCUMENT_NORMALIZER_LICENSE_NOT_FOUND\",_[_.EC_CODE_PARSER_LICENSE_NOT_FOUND=-90012]=\"EC_CODE_PARSER_LICENSE_NOT_FOUND\"}(c_||(c_={})),function(_){_[_.GEM_SKIP=0]=\"GEM_SKIP\",_[_.GEM_AUTO=1]=\"GEM_AUTO\",_[_.GEM_GENERAL=2]=\"GEM_GENERAL\",_[_.GEM_GRAY_EQUALIZE=4]=\"GEM_GRAY_EQUALIZE\",_[_.GEM_GRAY_SMOOTH=8]=\"GEM_GRAY_SMOOTH\",_[_.GEM_SHARPEN_SMOOTH=16]=\"GEM_SHARPEN_SMOOTH\",_[_.GEM_REV=-2147483648]=\"GEM_REV\"}(S_||(S_={})),function(_){_[_.GTM_SKIP=0]=\"GTM_SKIP\",_[_.GTM_INVERTED=1]=\"GTM_INVERTED\",_[_.GTM_ORIGINAL=2]=\"GTM_ORIGINAL\",_[_.GTM_AUTO=4]=\"GTM_AUTO\",_[_.GTM_REV=-2147483648]=\"GTM_REV\"}(l_||(l_={})),function(_){_[_.ITT_FILE_IMAGE=0]=\"ITT_FILE_IMAGE\",_[_.ITT_VIDEO_FRAME=1]=\"ITT_VIDEO_FRAME\"}(f_||(f_={})),function(_){_[_.PDFRM_VECTOR=1]=\"PDFRM_VECTOR\",_[_.PDFRM_RASTER=2]=\"PDFRM_RASTER\",_[_.PDFRM_REV=-2147483648]=\"PDFRM_REV\"}(h_||(h_={})),function(_){_[_.RDS_RASTERIZED_PAGES=0]=\"RDS_RASTERIZED_PAGES\",_[_.RDS_EXTRACTED_IMAGES=1]=\"RDS_EXTRACTED_IMAGES\"}(d_||(d_={}));const P_={IRUT_NULL:BigInt(0),IRUT_COLOUR_IMAGE:BigInt(1),IRUT_SCALED_DOWN_COLOUR_IMAGE:BigInt(2),IRUT_GRAYSCALE_IMAGE:BigInt(4),IRUT_TRANSOFORMED_GRAYSCALE_IMAGE:BigInt(8),IRUT_ENHANCED_GRAYSCALE_IMAGE:BigInt(16),IRUT_PREDETECTED_REGIONS:BigInt(32),IRUT_BINARY_IMAGE:BigInt(64),IRUT_TEXTURE_DETECTION_RESULT:BigInt(128),IRUT_TEXTURE_REMOVED_GRAYSCALE_IMAGE:BigInt(256),IRUT_TEXTURE_REMOVED_BINARY_IMAGE:BigInt(512),IRUT_CONTOURS:BigInt(1024),IRUT_LINE_SEGMENTS:BigInt(2048),IRUT_TEXT_ZONES:BigInt(4096),IRUT_TEXT_REMOVED_BINARY_IMAGE:BigInt(8192),IRUT_CANDIDATE_BARCODE_ZONES:BigInt(16384),IRUT_LOCALIZED_BARCODES:BigInt(32768),IRUT_SCALED_UP_BARCODE_IMAGE:BigInt(65536),IRUT_DEFORMATION_RESISTED_BARCODE_IMAGE:BigInt(1<<17),IRUT_COMPLEMENTED_BARCODE_IMAGE:BigInt(1<<18),IRUT_DECODED_BARCODES:BigInt(1<<19),IRUT_LONG_LINES:BigInt(1<<20),IRUT_CORNERS:BigInt(1<<21),IRUT_CANDIDATE_QUAD_EDGES:BigInt(1<<22),IRUT_DETECTED_QUADS:BigInt(1<<23),IRUT_LOCALIZED_TEXT_LINES:BigInt(1<<24),IRUT_RECOGNIZED_TEXT_LINES:BigInt(1<<25),IRUT_NORMALIZED_IMAGES:BigInt(1<<26),IRUT_SHORT_LINES:BigInt(1<<27),IRUT_RAW_TEXT_LINES:BigInt(1<<28),IRUT_ALL:BigInt(\"0xFFFFFFFFFFFFFFFF\")};var g_,M_;!function(_){_[_.ROET_PREDETECTED_REGION=0]=\"ROET_PREDETECTED_REGION\",_[_.ROET_LOCALIZED_BARCODE=1]=\"ROET_LOCALIZED_BARCODE\",_[_.ROET_DECODED_BARCODE=2]=\"ROET_DECODED_BARCODE\",_[_.ROET_LOCALIZED_TEXT_LINE=3]=\"ROET_LOCALIZED_TEXT_LINE\",_[_.ROET_RECOGNIZED_TEXT_LINE=4]=\"ROET_RECOGNIZED_TEXT_LINE\",_[_.ROET_DETECTED_QUAD=5]=\"ROET_DETECTED_QUAD\",_[_.ROET_NORMALIZED_IMAGE=6]=\"ROET_NORMALIZED_IMAGE\",_[_.ROET_SOURCE_IMAGE=7]=\"ROET_SOURCE_IMAGE\",_[_.ROET_TARGET_ROI=8]=\"ROET_TARGET_ROI\"}(g_||(g_={})),function(_){_[_.ST_NULL=0]=\"ST_NULL\",_[_.ST_REGION_PREDETECTION=1]=\"ST_REGION_PREDETECTION\",_[_.ST_BARCODE_LOCALIZATION=2]=\"ST_BARCODE_LOCALIZATION\",_[_.ST_BARCODE_DECODING=3]=\"ST_BARCODE_DECODING\",_[_.ST_TEXT_LINE_LOCALIZATION=4]=\"ST_TEXT_LINE_LOCALIZATION\",_[_.ST_TEXT_LINE_RECOGNITION=5]=\"ST_TEXT_LINE_RECOGNITION\",_[_.ST_DOCUMENT_DETECTION=6]=\"ST_DOCUMENT_DETECTION\",_[_.ST_DOCUMENT_NORMALIZATION=7]=\"ST_DOCUMENT_NORMALIZATION\"}(M_||(M_={}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9keW5hbXNvZnQtY29yZS9kaXN0L2NvcmUuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixvRkFBb0YsNElBQTRJLHFEQUFxRCxzQkFBc0IsaUVBQWlFLG9GQUFvRiwySUFBMkksbURBQW1ELFVBQVUsZ0VBQWdFLGdFQUFnRSxTQUFTLGVBQWUsc1NBQXNTLFNBQVMsZUFBZSx3bEJBQXdsQixTQUFTLEdBQUcseUNBQXlDLCtCQUErQixrREFBa0QsNEJBQTRCLEtBQUsscUJBQXFCLDRCQUE0QiwyQ0FBMkMsV0FBVyxVQUFVLHdCQUF3QixLQUFLLGtDQUFrQyxrQkFBa0IsbUNBQW1DLGswQ0FBazBDLHNCQUFzQixrQ0FBa0MseUJBQXlCLG1FQUFtRSw0REFBNEQsZ0JBQWdCLDhDQUE4QyxHQUFHLGNBQWMsMkVBQTJFLEdBQUcsZUFBZSxHQUFHLGdCQUFnQixHQUFHLFlBQVksZ0JBQWdCLGtDQUFrQyxZQUFZLHVCQUF1QixLQUFLLGtCQUFrQixrQkFBa0Isc0NBQXNDLHVHQUF1RyxvREFBb0QsV0FBVyxXQUFXLGdCQUFnQixVQUFVLFdBQVcsaUtBQWlLLGdCQUFnQixFQUFFLEtBQUssR0FBRyxhQUFhLDBJQUEwSSxTQUFTLElBQUksa2NBQWtjLGlEQUFpRCxJQUFJLHFCQUFxQixvQkFBb0IseUJBQXlCLEVBQUUsS0FBSyx1QkFBdUIsd0JBQXdCLGNBQWMsRUFBRSxFQUFFLEVBQUUsTUFBTSw2REFBNkQsZ0NBQWdDLFlBQVksU0FBUyxZQUFZLFNBQVMsZUFBZSx5Q0FBeUMsa0NBQWtDLDBCQUEwQixzQkFBc0Isd0JBQXdCLFdBQVcsZUFBZSxhQUFhLGlDQUFpQyxpQkFBaUIsZ0JBQWdCLGVBQWUs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LEdBQUcsVUFBVSwrbkNBQStuQyxVQUFVLGFBQWEscWRBQXFkLFdBQVcsZUFBZSxvYUFBb2EsV0FBVyxHQUFtdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2R5bmFtc29mdC1jb3JlL2Rpc3QvY29yZS5lc20uanM/YjRjYyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIER5bmFtc29mdCBKYXZhU2NyaXB0IExpYnJhcnlcbiAqIEBwcm9kdWN0IER5bmFtc29mdCBDb3JlIEpTIEVkaXRpb25cbiAqIEB3ZWJzaXRlIGh0dHBzOi8vd3d3LmR5bmFtc29mdC5jb21cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IDIwMjQsIER5bmFtc29mdCBDb3Jwb3JhdGlvblxuICogQGF1dGhvciBEeW5hbXNvZnRcbiAqIEB2ZXJzaW9uIDMuNC4yMFxuICogQGZpbGVvdmVydmlldyBEeW5hbXNvZnQgSmF2YVNjcmlwdCBMaWJyYXJ5IGZvciBDb3JlXG4gKiBNb3JlIGluZm8gb24gRHluYW1zb2Z0IENvcmUgSlM6IGh0dHBzOi8vd3d3LmR5bmFtc29mdC5jb20vY2FwdHVyZS12aXNpb24vZG9jcy93ZWIvcHJvZ3JhbW1pbmcvamF2YXNjcmlwdC9hcGktcmVmZXJlbmNlL2NvcmUvY29yZS1tb2R1bGUuaHRtbFxuICovXG5mdW5jdGlvbiBfKF8sRSxlLHQpe2lmKFwiYVwiPT09ZSYmIXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBFP18hPT1FfHwhdDohRS5oYXMoXykpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtyZXR1cm5cIm1cIj09PWU/dDpcImFcIj09PWU/dC5jYWxsKF8pOnQ/dC52YWx1ZTpFLmdldChfKX1mdW5jdGlvbiBFKF8sRSxlLHQsSSl7aWYoXCJtXCI9PT10KXRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7aWYoXCJhXCI9PT10JiYhSSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIEU/XyE9PUV8fCFJOiFFLmhhcyhfKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7cmV0dXJuXCJhXCI9PT10P0kuY2FsbChfLGUpOkk/SS52YWx1ZT1lOkUuc2V0KF8sZSksZX12YXIgZSx0LEk7XCJmdW5jdGlvblwiPT10eXBlb2YgU3VwcHJlc3NlZEVycm9yJiZTdXBwcmVzc2VkRXJyb3IsZnVuY3Rpb24oXyl7X1tfLkJPUE1fQkxPQ0s9MF09XCJCT1BNX0JMT0NLXCIsX1tfLkJPUE1fVVBEQVRFPTFdPVwiQk9QTV9VUERBVEVcIn0oZXx8KGU9e30pKSxmdW5jdGlvbihfKXtfW18uQ0NVVF9BVVRPPTBdPVwiQ0NVVF9BVVRPXCIsX1tfLkNDVVRfRlVMTF9DSEFOTkVMPTFdPVwiQ0NVVF9GVUxMX0NIQU5ORUxcIixfW18uQ0NVVF9ZX0NIQU5ORUxfT05MWT0yXT1cIkNDVVRfWV9DSEFOTkVMX09OTFlcIixfW18uQ0NVVF9SR0JfUl9DSEFOTkVMX09OTFk9M109XCJDQ1VUX1JHQl9SX0NIQU5ORUxfT05MWVwiLF9bXy5DQ1VUX1JHQl9HX0NIQU5ORUxfT05MWT00XT1cIkNDVVRfUkdCX0dfQ0hBTk5FTF9PTkxZXCIsX1tfLkNDVVRfUkdCX0JfQ0hBTk5FTF9PTkxZPTVdPVwiQ0NVVF9SR0JfQl9DSEFOTkVMX09OTFlcIn0odHx8KHQ9e30pKSxmdW5jdGlvbihfKXtfW18uSVBGX0JJTkFSWT0wXT1cIklQRl9CSU5BUllcIixfW18uSVBGX0JJTkFSWUlOVkVSVEVEPTFdPVwiSVBGX0JJTkFSWUlOVkVSVEVEXCIsX1tfLklQRl9HUkFZU0NBTEVEPTJdPVwiSVBGX0dSQVlTQ0FMRURcIixfW18uSVBGX05WMjE9M109XCJJUEZfTlYyMVwiLF9bXy5JUEZfUkdCXzU2NT00XT1cIklQRl9SR0JfNTY1XCIsX1tfLklQRl9SR0JfNTU1PTVdPVwiSVBGX1JHQl81NTVcIixfW18uSVBGX1JHQl84ODg9Nl09XCJJUEZfUkdCXzg4OFwiLF9bXy5JUEZfQVJHQl84ODg4PTddPVwiSVBGX0FSR0JfODg4OFwiLF9bXy5JUEZfUkdCXzE2MTYxNj04XT1cIklQRl9SR0JfMTYxNjE2XCIsX1tfLklQRl9BUkdCXzE2MTYxNjE2PTldPVwiSVBGX0FSR0JfMTYxNjE2MTZcIixfW18uSVBGX0FCR1JfODg4OD0xMF09XCJJUEZfQUJHUl84ODg4XCIsX1tfLklQRl9BQkdSXzE2MTYxNjE2PTExXT1cIklQRl9BQkdSXzE2MTYxNjE2XCIsX1tfLklQRl9CR1JfODg4PTEyXT1cIklQRl9CR1JfODg4XCIsX1tfLklQRl9CSU5BUllfOD0xM109XCJJUEZfQklOQVJZXzhcIixfW18uSVBGX05WMTI9MTRdPVwiSVBGX05WMTJcIixfW18uSVBGX0JJTkFSWV84X0lOVkVSVEVEPTE1XT1cIklQRl9CSU5BUllfOF9JTlZFUlRFRFwifShJfHwoST17fSkpO2NvbnN0IHI9XCJ1bmRlZmluZWRcIj09dHlwZW9mIHNlbGYscz0oKCk9PntpZighciYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCl7bGV0IF89ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMsRT1fLmluZGV4T2YoXCI/XCIpO2lmKC0xIT1FKV89Xy5zdWJzdHJpbmcoMCxFKTtlbHNle2xldCBFPV8uaW5kZXhPZihcIiNcIik7LTEhPUUmJihfPV8uc3Vic3RyaW5nKDAsRSkpfXJldHVybiBfLnN1YnN0cmluZygwLF8ubGFzdEluZGV4T2YoXCIvXCIpKzEpfXJldHVyblwiLi9cIn0pKCksbj1fPT57aWYobnVsbD09XyYmKF89XCIuL1wiKSxyKTtlbHNle2xldCBFPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO0UuaHJlZj1fLF89RS5ocmVmfXJldHVybiBfLmVuZHNXaXRoKFwiL1wiKXx8KF8rPVwiL1wiKSxffSxDPV89Pk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChfKSxpPV89PkFycmF5LmlzQXJyYXk/QXJyYXkuaXNBcnJheShfKTpcIltvYmplY3QgQXJyYXldXCI9PT1DKF8pLG89Xz0+XCJbb2JqZWN0IEJvb2xlYW5dXCI9PT1DKF8pLEE9Xz0+XCJudW1iZXJcIj09dHlwZW9mIF8mJiFOdW1iZXIuaXNOYU4oXyksTj1fPT5udWxsIT09XyYmXCJvYmplY3RcIj09dHlwZW9mIF8mJiFBcnJheS5pc0FycmF5KF8pLGE9Xz0+ISFOKF8pJiYoISFBKF8ueCkmJighIUEoXy55KSYmKCEhQShfLnJhZGl1cykmJighKF8ucmFkaXVzPDApJiYoISFBKF8uc3RhcnRBbmdsZSkmJiEhQShfLmVuZEFuZ2xlKSkpKSkpLFQ9Xz0+ISFOKF8pJiYoISFpKF8ucG9pbnRzKSYmKDAhPV8ucG9pbnRzLmxlbmd0aCYmIV8ucG9pbnRzLnNvbWUoKF89PiFjKF8pKSkpKSxSPV89PiEhTihfKSYmKF8uYnl0ZXMgaW5zdGFuY2VvZiBVaW50OEFycmF5JiYoISFBKF8ud2lkdGgpJiYoIShfLndpZHRoPD0wKSYmKCEhQShfLmhlaWdodCkmJighKF8uaGVpZ2h0PD0wKSYmKCEhQShfLnN0cmlkZSkmJighKF8uc3RyaWRlPD0wKSYmKFwiZm9ybWF0XCJpbiBfJiYhKFwidGFnXCJpbiBfJiYhRChfLnRhZykpKSkpKSkpKSksTD1fPT4hIU4oXykmJighIUEoXy5sZWZ0KSYmKCEoXy5sZWZ0PDApJiYoISFBKF8udG9wKSYmKCEoXy50b3A8MCkmJighIUEoXy5yaWdodCkmJighKF8ucmlnaHQ8MCkmJighIUEoXy5ib3R0b20pJiYoIShfLmJvdHRvbTwwKSYmKCEoXy5sZWZ0Pj1fLnJpZ2h0KSYmKCEoXy50b3A+PV8uYm90dG9tKSYmISFvKF8uaXNNZWFzdXJlZEluUGVyY2VudGFnZSkpKSkpKSkpKSkpLEQ9Xz0+ISFOKF8pJiYoISFBKF8uaW1hZ2VJZCkmJlwidHlwZVwiaW4gXyksTz1fPT4hIU4oXykmJighIWMoXy5zdGFydFBvaW50KSYmKCEhYyhfLmVuZFBvaW50KSYmKF8uc3RhcnRQb2ludC54IT1fLmVuZFBvaW50Lnh8fF8uc3RhcnRQb2ludC55IT1fLmVuZFBvaW50LnkpKSksYz1fPT4hIU4oXykmJighIUEoXy54KSYmISFBKF8ueSkpLFM9Xz0+ISFOKF8pJiYoISFpKF8ucG9pbnRzKSYmKDAhPV8ucG9pbnRzLmxlbmd0aCYmIV8ucG9pbnRzLnNvbWUoKF89PiFjKF8pKSkpKSxsPV89PiEhTihfKSYmKCEhaShfLnBvaW50cykmJigwIT1fLnBvaW50cy5sZW5ndGgmJjQ9PV8ucG9pbnRzLmxlbmd0aCYmIV8ucG9pbnRzLnNvbWUoKF89PiFjKF8pKSkpKSxmPV89PiEhTihfKSYmKCEhQShfLngpJiYoISFBKF8ueSkmJighIUEoXy53aWR0aCkmJighKF8ud2lkdGg8MCkmJighIUEoXy5oZWlnaHQpJiYoIShfLmhlaWdodDwwKSYmIShcImlzTWVhc3VyZWRJblBlcmNlbnRhZ2VcImluIF8mJiFvKF8uaXNNZWFzdXJlZEluUGVyY2VudGFnZSkpKSkpKSkpO2FzeW5jIGZ1bmN0aW9uIGgoXyxFKXtyZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKChlLHQpPT57bGV0IEk9bmV3IFhNTEh0dHBSZXF1ZXN0O0kub3BlbihcIkdFVFwiLF8sITApLEkucmVzcG9uc2VUeXBlPUUsSS5zZW5kKCksSS5vbmxvYWRlbmQ9YXN5bmMoKT0+e0kuc3RhdHVzPDIwMHx8SS5zdGF0dXM+PTMwMD90KF8rXCIgXCIrSS5zdGF0dXMpOmUoSS5yZXNwb25zZSl9LEkub25lcnJvcj0oKT0+e3QobmV3IEVycm9yKFwiTmV0d29yayBFcnJvcjogXCIrSS5zdGF0dXNUZXh0KSl9fSkpfWZ1bmN0aW9uIGQoXyl7cmV0dXJuL14oaHR0cHM6XFwvXFwvd3d3XFwufGh0dHA6XFwvXFwvd3d3XFwufGh0dHBzOlxcL1xcL3xodHRwOlxcL1xcLyl8XlthLXpBLVowLTldezIsfShcXC5bYS16QS1aMC05XXsyLH0pKFxcLlthLXpBLVowLTldezIsfSk/Ly50ZXN0KF8pfWNvbnN0IFA9KF8sRSk9PntsZXQgZT1fLnNwbGl0KFwiLlwiKSx0PUUuc3BsaXQoXCIuXCIpO2ZvcihsZXQgXz0wO188ZS5sZW5ndGgmJl88dC5sZW5ndGg7KytfKXtsZXQgRT1lW19dLEk9dFtfXTtpZihFPT09SSljb250aW51ZTtsZXQgcj1wYXJzZUludChlW19dKSxzPXBhcnNlSW50KHRbX10pO3JldHVybiByPT09c3x8TnVtYmVyLmlzTmFOKHIpJiZOdW1iZXIuaXNOYU4ocyk/RTxJPy0xOjE6cjxzfHxOdW1iZXIuaXNOYU4ocikmJk51bWJlci5pc0ludGVnZXIocyk/LTE6MX1yZXR1cm4gZS5sZW5ndGg9PT10Lmxlbmd0aD8wOmUubGVuZ3RoPHQubGVuZ3RoPy0xOjF9LGc9KF8sRSk9Pntjb25zdCBlPXt9O2ZvcihsZXQgdCBpbiBFKXtjb25zdCBJPXQ7bGV0IHI9X1tJXTtyJiZcInN0cmluZ1wiIT10eXBlb2YgciYmci5wYXRoJiYocj1yLnBhdGgpLF8ucm9vdERpcmVjdG9yeSYmIV8ucm9vdERpcmVjdG9yeS5lbmRzV2l0aChcIi9cIikmJihfLnJvb3REaXJlY3Rvcnk9Xy5yb290RGlyZWN0b3J5K1wiL1wiKSx2b2lkIDA9PT1yP18ucm9vdERpcmVjdG9yeT9yPWAke18ucm9vdERpcmVjdG9yeX0ke01bSV19QCR7RVtJXS52ZXJzaW9ufS9kaXN0L2A6KHI9RVtJXS5wYXRoLHJ8fChyPUVbSV0pKTpyLnN0YXJ0c1dpdGgoXCJAZW5naW5lUm9vdERpcmVjdG9yeS9cIikmJihyPXIucmVwbGFjZShcIkBlbmdpbmVSb290RGlyZWN0b3J5L1wiLF8ucm9vdERpcmVjdG9yeSkpLGVbSV09bihyKX1yZXR1cm4gZX0sTT17c3RkOlwiZHluYW1zb2Z0LWNhcHR1cmUtdmlzaW9uLXN0ZFwiLGRpcDpcImR5bmFtc29mdC1pbWFnZS1wcm9jZXNzaW5nXCIsY29yZTpcImR5bmFtc29mdC1jb3JlXCIsZG5uOlwiZHluYW1zb2Z0LWNhcHR1cmUtdmlzaW9uLWRublwiLGxpY2Vuc2U6XCJkeW5hbXNvZnQtbGljZW5zZVwiLHV0aWxpdHk6XCJkeW5hbXNvZnQtdXRpbGl0eVwiLGN2cjpcImR5bmFtc29mdC1jYXB0dXJlLXZpc2lvbi1yb3V0ZXJcIixkYnI6XCJkeW5hbXNvZnQtYmFyY29kZS1yZWFkZXJcIixkbHI6XCJkeW5hbXNvZnQtbGFiZWwtcmVjb2duaXplclwiLGRkbjpcImR5bmFtc29mdC1kb2N1bWVudC1ub3JtYWxpemVyXCIsZGNwOlwiZHluYW1zb2Z0LWNvZGUtcGFyc2VyXCIsZGNwZDpcImR5bmFtc29mdC1jb2RlLXBhcnNlclwiLGRsckRhdGE6XCJkeW5hbXNvZnQtbGFiZWwtcmVjb2duaXplci1kYXRhXCIsZGNlOlwiZHluYW1zb2Z0LWNhbWVyYS1lbmhhbmNlclwifSx1PWFzeW5jKF8sRSxlKT0+YXdhaXQgbmV3IFByb21pc2UoKGFzeW5jKHQsSSk9Pnt0cnl7Y29uc3QgST1FLnNwbGl0KFwiLlwiKTtsZXQgcj1JW0kubGVuZ3RoLTFdO2NvbnN0IHM9YXdhaXQgVShgaW1hZ2UvJHtyfWAsXyk7SS5sZW5ndGg8PTEmJihyPVwicG5nXCIpO2NvbnN0IG49bmV3IEZpbGUoW3NdLEUse3R5cGU6YGltYWdlLyR7cn1gfSk7aWYoZSl7Y29uc3QgXz1VUkwuY3JlYXRlT2JqZWN0VVJMKG4pLGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7ZS5ocmVmPV8sZS5kb3dubG9hZD1FLGUuY2xpY2soKX1yZXR1cm4gdChuKX1jYXRjaChfKXtyZXR1cm4gSSgpfX0pKSxGPV89PntSKF8pJiYoXz1CKF8pKTtjb25zdCBFPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7RS53aWR0aD1fLndpZHRoLEUuaGVpZ2h0PV8uaGVpZ2h0O3JldHVybiBFLmdldENvbnRleHQoXCIyZFwiLHt3aWxsUmVhZEZyZXF1ZW50bHk6ITB9KS5wdXRJbWFnZURhdGEoXywwLDApLEV9LEc9KF8sRSk9PntSKEUpJiYoRT1CKEUpKTtjb25zdCBlPUYoRSk7bGV0IHQ9bmV3IEltYWdlLEk9ZS50b0RhdGFVUkwoXyk7cmV0dXJuIHQuc3JjPUksdH0sVT1hc3luYyhfLEUpPT57UihFKSYmKEU9QihFKSk7Y29uc3QgZT1GKEUpO3JldHVybiBuZXcgUHJvbWlzZSgoKEUsdCk9PntlLnRvQmxvYigoXz0+RShfKSksXyl9KSl9LEI9Xz0+e2xldCBFLGU9Xy5ieXRlcztpZighKGUmJmUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSl0aHJvdyBFcnJvcihcIlBhcmFtZXRlciB0eXBlIGVycm9yXCIpO2lmKE51bWJlcihfLmZvcm1hdCk9PT1JLklQRl9CR1JfODg4KXtjb25zdCBfPWUubGVuZ3RoLzM7RT1uZXcgVWludDhDbGFtcGVkQXJyYXkoNCpfKTtmb3IobGV0IHQ9MDt0PF87Kyt0KUVbNCp0XT1lWzMqdF0sRVs0KnQrMV09ZVszKnQrMV0sRVs0KnQrMl09ZVszKnQrMl0sRVs0KnQrM109MjU1fWVsc2UgaWYoTnVtYmVyKF8uZm9ybWF0KT09PUkuSVBGX1JHQl84ODgpe2NvbnN0IF89ZS5sZW5ndGgvMztFPW5ldyBVaW50OENsYW1wZWRBcnJheSg0Kl8pO2ZvcihsZXQgdD0wO3Q8XzsrK3QpRVs0KnRdPWVbMyp0KzJdLEVbNCp0KzFdPWVbMyp0KzFdLEVbNCp0KzJdPWVbMyp0XSxFWzQqdCszXT0yNTV9ZWxzZSBpZihOdW1iZXIoXy5mb3JtYXQpPT09SS5JUEZfR1JBWVNDQUxFRCl7Y29uc3QgXz1lLmxlbmd0aDtFPW5ldyBVaW50OENsYW1wZWRBcnJheSg0Kl8pO2ZvcihsZXQgdD0wO3Q8Xzt0KyspRVs0KnRdPUVbNCp0KzFdPUVbNCp0KzJdPWVbdF0sRVs0KnQrM109MjU1fWVsc2UgaWYoTnVtYmVyKF8uZm9ybWF0KT09PUkuSVBGX0JJTkFSWV84KXtjb25zdCB0PWUubGVuZ3RoLEk9Xy53aWR0aCxyPV8uaGVpZ2h0LHM9Xy5zdHJpZGU7RT1uZXcgVWludDhDbGFtcGVkQXJyYXkoSSpyKjQpO2ZvcihsZXQgXz0wO188dDtfKyspe2xldCB0PWVbX10scj1fJXMsbj1NYXRoLmZsb29yKF8vcyk7Zm9yKGxldCBfPTA7Xzw4O18rKyl7bGV0IGU9citfLHM9NCoobipJK2UpO2lmKGU+PUkpYnJlYWs7RVtzXT1FW3MrMV09RVtzKzJdPSgxMjgmdCkvMTI4KjI1NSxFW3MrM109MjU1LHQ8PD0xfX19ZWxzZSBpZihOdW1iZXIoXy5mb3JtYXQpPT09SS5JUEZfQUJHUl84ODg4KXtjb25zdCBfPWUubGVuZ3RoLzQ7RT1uZXcgVWludDhDbGFtcGVkQXJyYXkoZS5sZW5ndGgpO2ZvcihsZXQgdD0wO3Q8XzsrK3QpRVs0KnRdPWVbNCp0XSxFWzQqdCsxXT1lWzQqdCsxXSxFWzQqdCsyXT1lWzQqdCsyXSxFWzQqdCszXT1lWzQqdCszXX1lbHNlIGlmKE51bWJlcihfLmZvcm1hdCk9PT1JLklQRl9BUkdCXzg4ODgpe2NvbnN0IF89ZS5sZW5ndGgvNDtFPW5ldyBVaW50OENsYW1wZWRBcnJheShlLmxlbmd0aCk7Zm9yKGxldCB0PTA7dDxfOysrdClFWzQqdF09ZVs0KnQrMl0sRVs0KnQrMV09ZVs0KnQrMV0sRVs0KnQrMl09ZVs0KnRdLEVbNCp0KzNdPWVbNCp0KzNdfXJldHVybiBuZXcgSW1hZ2VEYXRhKEUsXy53aWR0aCxfLmhlaWdodCl9O3ZhciBwLG0seSx3LFYsYix2LFk7Y2xhc3MgSHtnZXQgX2lzRmV0Y2hpbmdTdGFydGVkKCl7cmV0dXJuIF8odGhpcyxWLFwiZlwiKX1jb25zdHJ1Y3Rvcigpe3AuYWRkKHRoaXMpLG0uc2V0KHRoaXMsW10pLHkuc2V0KHRoaXMsMSksdy5zZXQodGhpcyxlLkJPUE1fQkxPQ0spLFYuc2V0KHRoaXMsITEpLGIuc2V0KHRoaXMsdm9pZCAwKSx2LnNldCh0aGlzLHQuQ0NVVF9BVVRPKX1zZXRFcnJvckxpc3RlbmVyKF8pe31hZGRJbWFnZVRvQnVmZmVyKEUpe3ZhciB0O2lmKCFSKEUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdpbWFnZScuXCIpO2lmKChudWxsPT09KHQ9RS50YWcpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lmhhc093blByb3BlcnR5KFwiaW1hZ2VJZFwiKSkmJlwibnVtYmVyXCI9PXR5cGVvZiBFLnRhZy5pbWFnZUlkJiZ0aGlzLmhhc0ltYWdlKEUudGFnLmltYWdlSWQpKXRocm93IG5ldyBFcnJvcihcIkV4aXN0ZWQgaW1hZ2VJZC5cIik7aWYoXyh0aGlzLG0sXCJmXCIpLmxlbmd0aD49Xyh0aGlzLHksXCJmXCIpKXN3aXRjaChfKHRoaXMsdyxcImZcIikpe2Nhc2UgZS5CT1BNX0JMT0NLOmJyZWFrO2Nhc2UgZS5CT1BNX1VQREFURTppZihfKHRoaXMsbSxcImZcIikucHVzaChFKSxOKF8odGhpcyxiLFwiZlwiKSkmJkEoXyh0aGlzLGIsXCJmXCIpLmltYWdlSWQpJiYxPT1fKHRoaXMsYixcImZcIikua2VlcEluQnVmZmVyKWZvcig7Xyh0aGlzLG0sXCJmXCIpLmxlbmd0aD5fKHRoaXMseSxcImZcIik7KXtjb25zdCBFPV8odGhpcyxtLFwiZlwiKS5maW5kSW5kZXgoKEU9Pnt2YXIgZTtyZXR1cm4obnVsbD09PShlPUUudGFnKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5pbWFnZUlkKSE9PV8odGhpcyxiLFwiZlwiKS5pbWFnZUlkfSkpO18odGhpcyxtLFwiZlwiKS5zcGxpY2UoRSwxKX1lbHNlIF8odGhpcyxtLFwiZlwiKS5zcGxpY2UoMCxfKHRoaXMsbSxcImZcIikubGVuZ3RoLV8odGhpcyx5LFwiZlwiKSl9ZWxzZSBfKHRoaXMsbSxcImZcIikucHVzaChFKX1nZXRJbWFnZSgpe2lmKDA9PT1fKHRoaXMsbSxcImZcIikubGVuZ3RoKXJldHVybiBudWxsO2xldCBFO2lmKF8odGhpcyxiLFwiZlwiKSYmQShfKHRoaXMsYixcImZcIikuaW1hZ2VJZCkpe2NvbnN0IGU9Xyh0aGlzLHAsXCJtXCIsWSkuY2FsbCh0aGlzLF8odGhpcyxiLFwiZlwiKS5pbWFnZUlkKTtpZihlPDApdGhyb3cgbmV3IEVycm9yKGBJbWFnZSB3aXRoIGlkICR7Xyh0aGlzLGIsXCJmXCIpLmltYWdlSWR9IGRvZXNuJ3QgZXhpc3QuYCk7RT1fKHRoaXMsbSxcImZcIikuc2xpY2UoZSxlKzEpWzBdfWVsc2UgRT1fKHRoaXMsbSxcImZcIikucG9wKCk7aWYoW0kuSVBGX1JHQl81NjUsSS5JUEZfUkdCXzU1NSxJLklQRl9SR0JfODg4LEkuSVBGX0FSR0JfODg4OCxJLklQRl9SR0JfMTYxNjE2LEkuSVBGX0FSR0JfMTYxNjE2MTYsSS5JUEZfQUJHUl84ODg4LEkuSVBGX0FCR1JfMTYxNjE2MTYsSS5JUEZfQkdSXzg4OF0uaW5jbHVkZXMoRS5mb3JtYXQpKXtpZihfKHRoaXMsdixcImZcIik9PT10LkNDVVRfUkdCX1JfQ0hBTk5FTF9PTkxZKXtILl9vbkxvZyYmSC5fb25Mb2coXCJvbmx5IGdldCBSIGNoYW5uZWwgZGF0YS5cIik7Y29uc3QgXz1uZXcgVWludDhBcnJheShFLndpZHRoKkUuaGVpZ2h0KTtmb3IobGV0IGU9MDtlPF8ubGVuZ3RoO2UrKylzd2l0Y2goRS5mb3JtYXQpe2Nhc2UgSS5JUEZfUkdCXzU2NTpjYXNlIEkuSVBGX1JHQl81NTU6Y2FzZSBJLklQRl9SR0JfODg4OmNhc2UgSS5JUEZfUkdCXzE2MTYxNjpfW2VdPUUuYnl0ZXNbMyplKzJdO2JyZWFrO2Nhc2UgSS5JUEZfQVJHQl84ODg4OmNhc2UgSS5JUEZfQVJHQl8xNjE2MTYxNjpfW2VdPUUuYnl0ZXNbNCplKzJdO2JyZWFrO2Nhc2UgSS5JUEZfQkdSXzg4ODpfW2VdPUUuYnl0ZXNbMyplXTticmVhaztjYXNlIEkuSVBGX0FCR1JfODg4ODpjYXNlIEkuSVBGX0FCR1JfMTYxNjE2MTY6X1tlXT1FLmJ5dGVzWzQqZV19RS5ieXRlcz1fLEUuc3RyaWRlPUUud2lkdGgsRS5mb3JtYXQ9SS5JUEZfR1JBWVNDQUxFRH1lbHNlIGlmKF8odGhpcyx2LFwiZlwiKT09PXQuQ0NVVF9SR0JfR19DSEFOTkVMX09OTFkpe0guX29uTG9nJiZILl9vbkxvZyhcIm9ubHkgZ2V0IEcgY2hhbm5lbCBkYXRhLlwiKTtjb25zdCBfPW5ldyBVaW50OEFycmF5KEUud2lkdGgqRS5oZWlnaHQpO2ZvcihsZXQgZT0wO2U8Xy5sZW5ndGg7ZSsrKXN3aXRjaChFLmZvcm1hdCl7Y2FzZSBJLklQRl9SR0JfNTY1OmNhc2UgSS5JUEZfUkdCXzU1NTpjYXNlIEkuSVBGX1JHQl84ODg6Y2FzZSBJLklQRl9SR0JfMTYxNjE2OmNhc2UgSS5JUEZfQkdSXzg4ODpfW2VdPUUuYnl0ZXNbMyplKzFdO2JyZWFrO2Nhc2UgSS5JUEZfQVJHQl84ODg4OmNhc2UgSS5JUEZfQVJHQl8xNjE2MTYxNjpjYXNlIEkuSVBGX0FCR1JfODg4ODpjYXNlIEkuSVBGX0FCR1JfMTYxNjE2MTY6X1tlXT1FLmJ5dGVzWzQqZSsxXX1FLmJ5dGVzPV8sRS5zdHJpZGU9RS53aWR0aCxFLmZvcm1hdD1JLklQRl9HUkFZU0NBTEVEfWVsc2UgaWYoXyh0aGlzLHYsXCJmXCIpPT09dC5DQ1VUX1JHQl9CX0NIQU5ORUxfT05MWSl7SC5fb25Mb2cmJkguX29uTG9nKFwib25seSBnZXQgQiBjaGFubmVsIGRhdGEuXCIpO2NvbnN0IF89bmV3IFVpbnQ4QXJyYXkoRS53aWR0aCpFLmhlaWdodCk7Zm9yKGxldCBlPTA7ZTxfLmxlbmd0aDtlKyspc3dpdGNoKEUuZm9ybWF0KXtjYXNlIEkuSVBGX1JHQl81NjU6Y2FzZSBJLklQRl9SR0JfNTU1OmNhc2UgSS5JUEZfUkdCXzg4ODpjYXNlIEkuSVBGX1JHQl8xNjE2MTY6X1tlXT1FLmJ5dGVzWzMqZV07YnJlYWs7Y2FzZSBJLklQRl9BUkdCXzg4ODg6Y2FzZSBJLklQRl9BUkdCXzE2MTYxNjE2Ol9bZV09RS5ieXRlc1s0KmVdO2JyZWFrO2Nhc2UgSS5JUEZfQkdSXzg4ODpfW2VdPUUuYnl0ZXNbMyplKzJdO2JyZWFrO2Nhc2UgSS5JUEZfQUJHUl84ODg4OmNhc2UgSS5JUEZfQUJHUl8xNjE2MTYxNjpfW2VdPUUuYnl0ZXNbNCplKzJdfUUuYnl0ZXM9XyxFLnN0cmlkZT1FLndpZHRoLEUuZm9ybWF0PUkuSVBGX0dSQVlTQ0FMRUR9fWVsc2VbSS5JUEZfTlYyMSxJLklQRl9OVjEyXS5pbmNsdWRlcyhFLmZvcm1hdCkmJkguX29uTG9nJiZILl9vbkxvZyhcIk5WMjEgb3IgTlYxMiBpcyBub3Qgc3VwcG9ydGVkLlwiKTtyZXR1cm4gRX1zZXROZXh0SW1hZ2VUb1JldHVybihfLGUpe2lmKCEoKC4uLl8pPT4wIT09Xy5sZW5ndGgmJl8uZXZlcnkoKF89PkEoXykpKSkoXykpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgJ2ltYWdlSWQnLlwiKTtpZih2b2lkIDAhPT1lJiYhbyhlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCAna2VlcEluQnVmZmVyJy5cIik7RSh0aGlzLGIse2ltYWdlSWQ6XyxrZWVwSW5CdWZmZXI6ZX0sXCJmXCIpfV9yZXNldE5leHRSZXR1cm5lZEltYWdlKCl7RSh0aGlzLGIsbnVsbCxcImZcIil9aGFzSW1hZ2UoRSl7cmV0dXJuIF8odGhpcyxwLFwibVwiLFkpLmNhbGwodGhpcyxFKT49MH1zdGFydEZldGNoaW5nKCl7RSh0aGlzLFYsITAsXCJmXCIpfXN0b3BGZXRjaGluZygpe0UodGhpcyxWLCExLFwiZlwiKX1zZXRNYXhJbWFnZUNvdW50KGUpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBlKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdjb3VudCcuXCIpO2lmKGU8MXx8TWF0aC5yb3VuZChlKSE9PWUpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCAnY291bnQnLlwiKTtmb3IoRSh0aGlzLHksZSxcImZcIik7Xyh0aGlzLG0sXCJmXCIpJiZfKHRoaXMsbSxcImZcIikubGVuZ3RoPmU7KV8odGhpcyxtLFwiZlwiKS5zaGlmdCgpfWdldE1heEltYWdlQ291bnQoKXtyZXR1cm4gXyh0aGlzLHksXCJmXCIpfWdldEltYWdlQ291bnQoKXtyZXR1cm4gXyh0aGlzLG0sXCJmXCIpLmxlbmd0aH1jbGVhckJ1ZmZlcigpe18odGhpcyxtLFwiZlwiKS5sZW5ndGg9MH1pc0J1ZmZlckVtcHR5KCl7cmV0dXJuIDA9PT1fKHRoaXMsbSxcImZcIikubGVuZ3RofXNldEJ1ZmZlck92ZXJmbG93UHJvdGVjdGlvbk1vZGUoXyl7RSh0aGlzLHcsXyxcImZcIil9Z2V0QnVmZmVyT3ZlcmZsb3dQcm90ZWN0aW9uTW9kZSgpe3JldHVybiBfKHRoaXMsdyxcImZcIil9c2V0Q29sb3VyQ2hhbm5lbFVzYWdlVHlwZShfKXtFKHRoaXMsdixfLFwiZlwiKX1nZXRDb2xvdXJDaGFubmVsVXNhZ2VUeXBlKCl7cmV0dXJuIF8odGhpcyx2LFwiZlwiKX19bT1uZXcgV2Vha01hcCx5PW5ldyBXZWFrTWFwLHc9bmV3IFdlYWtNYXAsVj1uZXcgV2Vha01hcCxiPW5ldyBXZWFrTWFwLHY9bmV3IFdlYWtNYXAscD1uZXcgV2Vha1NldCxZPWZ1bmN0aW9uKEUpe2lmKFwibnVtYmVyXCIhPXR5cGVvZiBFKXRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkICdpbWFnZUlkJy5cIik7cmV0dXJuIF8odGhpcyxtLFwiZlwiKS5maW5kSW5kZXgoKF89Pnt2YXIgZTtyZXR1cm4obnVsbD09PShlPV8udGFnKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5pbWFnZUlkKT09PUV9KSl9O2NvbnN0IGs9Xz0+XyYmXCJvYmplY3RcIj09dHlwZW9mIF8mJlwiZnVuY3Rpb25cIj09dHlwZW9mIF8udGhlbjtjbGFzcyBYIGV4dGVuZHMgUHJvbWlzZXtnZXQgc3RhdHVzKCl7cmV0dXJuIHRoaXMuX3N9Z2V0IGlzUGVuZGluZygpe3JldHVyblwicGVuZGluZ1wiPT09dGhpcy5fc31nZXQgaXNGdWxmaWxsZWQoKXtyZXR1cm5cImZ1bGZpbGxlZFwiPT09dGhpcy5fc31nZXQgaXNSZWplY3RlZCgpe3JldHVyblwicmVqZWN0ZWRcIj09PXRoaXMuX3N9Z2V0IHRhc2soKXtyZXR1cm4gdGhpcy5fdGFza31zZXQgdGFzayhfKXtsZXQgRTt0aGlzLl90YXNrPV8sayhfKT9FPV86XCJmdW5jdGlvblwiPT10eXBlb2YgXyYmKEU9bmV3IFByb21pc2UoXykpLEUmJihhc3luYygpPT57dHJ5e2NvbnN0IGU9YXdhaXQgRTtfPT09dGhpcy5fdGFzayYmdGhpcy5yZXNvbHZlKGUpfWNhdGNoKEUpe189PT10aGlzLl90YXNrJiZ0aGlzLnJlamVjdChFKX19KSgpfWdldCBpc0VtcHR5KCl7cmV0dXJuIG51bGw9PXRoaXMuX3Rhc2t9Y29uc3RydWN0b3IoXyl7bGV0IEUsZTtzdXBlcigoKF8sdCk9PntFPV8sZT10fSkpLHRoaXMuX3M9XCJwZW5kaW5nXCIsdGhpcy5yZXNvbHZlPV89Pnt0aGlzLmlzUGVuZGluZyYmKGsoXyk/dGhpcy50YXNrPV86KHRoaXMuX3M9XCJmdWxmaWxsZWRcIixFKF8pKSl9LHRoaXMucmVqZWN0PV89Pnt0aGlzLmlzUGVuZGluZyYmKHRoaXMuX3M9XCJyZWplY3RlZFwiLGUoXykpfSx0aGlzLnRhc2s9X319bGV0IFosVyx4LEssajtcInVuZGVmaW5lZFwiIT10eXBlb2YgbmF2aWdhdG9yJiYoWj1uYXZpZ2F0b3IsVz1aLnVzZXJBZ2VudCx4PVoucGxhdGZvcm0sSz1aLm1lZGlhRGV2aWNlcyksZnVuY3Rpb24oKXtpZighcil7Y29uc3QgXz17RWRnZTp7c2VhcmNoOlwiRWRnXCIsdmVyU2VhcmNoOlwiRWRnXCJ9LE9QUjpudWxsLENocm9tZTpudWxsLFNhZmFyaTp7c3RyOloudmVuZG9yLHNlYXJjaDpcIkFwcGxlXCIsdmVyU2VhcmNoOltcIlZlcnNpb25cIixcImlQaG9uZSBPU1wiLFwiQ1BVIE9TXCJdfSxGaXJlZm94Om51bGwsRXhwbG9yZXI6e3NlYXJjaDpcIk1TSUVcIix2ZXJTZWFyY2g6XCJNU0lFXCJ9fSxFPXtIYXJtb255T1M6bnVsbCxBbmRyb2lkOm51bGwsaVBob25lOm51bGwsaVBhZDpudWxsLFdpbmRvd3M6e3N0cjp4LHNlYXJjaDpcIldpblwifSxNYWM6e3N0cjp4fSxMaW51eDp7c3RyOnh9fTtsZXQgZT1cInVua25vd25Ccm93c2VyXCIsdD0wLEk9XCJ1bmtub3duT1NcIjtmb3IobGV0IEUgaW4gXyl7Y29uc3QgST1fW0VdfHx7fTtsZXQgcj1JLnN0cnx8VyxzPUkuc2VhcmNofHxFLG49SS52ZXJTdHJ8fFcsQz1JLnZlclNlYXJjaHx8RTtpZihDIGluc3RhbmNlb2YgQXJyYXl8fChDPVtDXSksLTEhPXIuaW5kZXhPZihzKSl7ZT1FO2ZvcihsZXQgXyBvZiBDKXtsZXQgRT1uLmluZGV4T2YoXyk7aWYoLTEhPUUpe3Q9cGFyc2VGbG9hdChuLnN1YnN0cmluZyhFK18ubGVuZ3RoKzEpKTticmVha319YnJlYWt9fWZvcihsZXQgXyBpbiBFKXtjb25zdCBlPUVbX118fHt9O2xldCB0PWUuc3RyfHxXLHI9ZS5zZWFyY2h8fF87aWYoLTEhPXQuaW5kZXhPZihyKSl7ST1fO2JyZWFrfX1cIkxpbnV4XCI9PUkmJi0xIT1XLmluZGV4T2YoXCJXaW5kb3dzIE5UXCIpJiYoST1cIkhhcm1vbnlPU1wiKSxqPXticm93c2VyOmUsdmVyc2lvbjp0LE9TOkl9fXImJihqPXticm93c2VyOlwic3NyXCIsdmVyc2lvbjowLE9TOlwic3NyXCJ9KX0oKTtjb25zdCBKPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBXZWJBc3NlbWJseSYmVyYmISgvU2FmYXJpLy50ZXN0KFcpJiYhL0Nocm9tZS8udGVzdChXKSYmL1xcKC4rXFxzMTFfMl8oWzItNl0pLipcXCkvLnRlc3QoVykpLFE9IShcInVuZGVmaW5lZFwiPT10eXBlb2YgV29ya2VyKSwkPSEoIUt8fCFLLmdldFVzZXJNZWRpYSksej1hc3luYygpPT57bGV0IF89ITE7aWYoJCl0cnl7KGF3YWl0IEsuZ2V0VXNlck1lZGlhKHt2aWRlbzohMH0pKS5nZXRUcmFja3MoKS5mb3JFYWNoKChfPT57Xy5zdG9wKCl9KSksXz0hMH1jYXRjaChfKXt9cmV0dXJuIF99O1wiQ2hyb21lXCI9PT1qLmJyb3dzZXImJmoudmVyc2lvbj42Nnx8XCJTYWZhcmlcIj09PWouYnJvd3NlciYmai52ZXJzaW9uPjEzfHxcIk9QUlwiPT09ai5icm93c2VyJiZqLnZlcnNpb24+NDN8fFwiRWRnZVwiPT09ai5icm93c2VyJiZqLnZlcnNpb247Y29uc3QgcT17fSxfXz1hc3luYyBfPT57bGV0IEU9XCJzdHJpbmdcIj09dHlwZW9mIF8/W19dOl8sZT1bXTtmb3IobGV0IF8gb2YgRSllLnB1c2gocVtfXT1xW19dfHxuZXcgWCk7YXdhaXQgUHJvbWlzZS5hbGwoZSl9LEVfPWFzeW5jKF8sRSk9PntsZXQgZSx0PVwic3RyaW5nXCI9PXR5cGVvZiBfP1tfXTpfLEk9W107Zm9yKGxldCBfIG9mIHQpe2xldCB0O0kucHVzaCh0PXFbX109cVtfXXx8bmV3IFgoZT1lfHxFKCkpKSx0LmlzRW1wdHkmJih0LnRhc2s9ZT1lfHxFKCkpfWF3YWl0IFByb21pc2UuYWxsKEkpfTtsZXQgZV8sdF89MDtjb25zdCBJXz0oKT0+dF8rKyxyXz17fTtsZXQgc187Y29uc3Qgbl89Xz0+e3NfPV8sZV8mJmVfLnBvc3RNZXNzYWdlKHt0eXBlOlwic2V0QkxvZ1wiLGJvZHk6e3ZhbHVlOiEhX319KX07bGV0IENfPSExO2NvbnN0IGlfPV89PntDXz1fLGVfJiZlXy5wb3N0TWVzc2FnZSh7dHlwZTpcInNldEJEZWJ1Z1wiLGJvZHk6e3ZhbHVlOiEhX319KX0sb189e30sQV89e30sTl89e3N0ZDp7dmVyc2lvbjpcIjEuNC4xMFwiLHBhdGg6bihzK1wiLi4vLi4vZHluYW1zb2Z0LWNhcHR1cmUtdmlzaW9uLXN0ZEAxLjQuMTAvZGlzdC9cIil9LGNvcmU6e3ZlcnNpb246XCIzLjQuMjBcIixwYXRoOnN9fSxhXz17ZGlwOnt3YXNtOiEwfX0sVF89e30sUl89YXN5bmMgXz0+e2xldCBFO18gaW5zdGFuY2VvZiBBcnJheXx8KF89Xz9bX106W10pO2xldCBlPXEuY29yZTtFPSFlfHxlLmlzRW1wdHk7bGV0IHQ9bmV3IE1hcDtjb25zdCBJPV89PntpZihcInN0ZFwiPT0oXz1fLnRvTG93ZXJDYXNlKCkpfHxcImNvcmVcIj09XylyZXR1cm47aWYoIWFfW19dKXRocm93IEVycm9yKFwiVGhlICdcIitfK1wiJyBtb2R1bGUgY2Fubm90IGJlIGZvdW5kLlwiKTtsZXQgRT1hX1tfXS5kZXBzO2lmKG51bGw9PUU/dm9pZCAwOkUubGVuZ3RoKWZvcihsZXQgXyBvZiBFKUkoXyk7bGV0IGU9cVtfXTt0LmhhcyhfKXx8dC5zZXQoXywhZXx8ZS5pc0VtcHR5KX07Zm9yKGxldCBFIG9mIF8pSShFKTtsZXQgcj1bXTtFJiZyLnB1c2goXCJjb3JlXCIpLHIucHVzaCguLi50LmtleXMoKSk7Y29uc3Qgcz1bLi4udC5lbnRyaWVzKCldLmZpbHRlcigoXz0+IV9bMV0pKS5tYXAoKF89Pl9bMF0pKTthd2FpdCBFXyhyLChhc3luYygpPT57Y29uc3QgXz1bLi4udC5lbnRyaWVzKCldLmZpbHRlcigoXz0+X1sxXSkpLm1hcCgoXz0+X1swXSkpO2F3YWl0IF9fKHMpO2NvbnN0IGU9ZyhUXyxOXyksST17fTtmb3IobGV0IEUgb2YgXylJW0VdPWFfW0VdO2NvbnN0IHI9e2VuZ2luZVJlc291cmNlUGF0aHM6ZSxhdXRvUmVzb3VyY2VzOkksbmFtZXM6X307bGV0IG49bmV3IFg7aWYoRSl7ci5uZWVkTG9hZENvcmU9ITA7bGV0IF89ZS5jb3JlK0xfLl93b3JrZXJOYW1lO18uc3RhcnRzV2l0aChsb2NhdGlvbi5vcmlnaW4pfHwoXz1hd2FpdCBmZXRjaChfKS50aGVuKChfPT5fLmJsb2IoKSkpLnRoZW4oKF89PlVSTC5jcmVhdGVPYmplY3RVUkwoXykpKSksZV89bmV3IFdvcmtlcihfKSxlXy5vbmVycm9yPV89PntsZXQgRT1uZXcgRXJyb3IoXy5tZXNzYWdlKTtuLnJlamVjdChFKX0sZV8uYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwoXz0+e2xldCBFPV8uZGF0YT9fLmRhdGE6XyxlPUUudHlwZSx0PUUuaWQsST1FLmJvZHk7c3dpdGNoKGUpe2Nhc2VcImxvZ1wiOnNfJiZzXyhFLm1lc3NhZ2UpO2JyZWFrO2Nhc2VcInRhc2tcIjp0cnl7cl9bdF0oSSksZGVsZXRlIHJfW3RdfWNhdGNoKF8pe3Rocm93IGRlbGV0ZSByX1t0XSxffWJyZWFrO2Nhc2VcImV2ZW50XCI6dHJ5e3JfW3RdKEkpfWNhdGNoKF8pe3Rocm93IF99YnJlYWs7ZGVmYXVsdDpjb25zb2xlLmxvZyhfKX19KSksci5iTG9nPSEhc18sci5iZD1DXyxyLmRtPWxvY2F0aW9uLm9yaWdpbi5zdGFydHNXaXRoKFwiaHR0cFwiKT9sb2NhdGlvbi5vcmlnaW46XCJodHRwczovL2xvY2FsaG9zdFwifWVsc2UgYXdhaXQgX18oXCJjb3JlXCIpO2xldCBDPXRfKys7cl9bQ109Xz0+e2lmKF8uc3VjY2VzcylPYmplY3QuYXNzaWduKG9fLF8udmVyc2lvbnMpLFwie31cIiE9PUpTT04uc3RyaW5naWZ5KF8udmVyc2lvbnMpJiYoTF8uX3ZlcnNpb25zPV8udmVyc2lvbnMpLG4ucmVzb2x2ZSh2b2lkIDApO2Vsc2V7Y29uc3QgRT1FcnJvcihfLm1lc3NhZ2UpO18uc3RhY2smJihFLnN0YWNrPV8uc3RhY2spLG4ucmVqZWN0KEUpfX0sZV8ucG9zdE1lc3NhZ2Uoe3R5cGU6XCJsb2FkV2FzbVwiLGJvZHk6cixpZDpDfSksYXdhaXQgbn0pKX07Y2xhc3MgTF97c3RhdGljIGdldCBlbmdpbmVSZXNvdXJjZVBhdGhzKCl7cmV0dXJuIFRffXN0YXRpYyBzZXQgZW5naW5lUmVzb3VyY2VQYXRocyhfKXtPYmplY3QuYXNzaWduKFRfLF8pfXN0YXRpYyBnZXQgYlN1cHBvcnREY2U0TW9kdWxlKCl7cmV0dXJuIHRoaXMuX2JTdXBwb3J0RGNlNE1vZHVsZX1zdGF0aWMgZ2V0IGJTdXBwb3J0SVJUTW9kdWxlKCl7cmV0dXJuIHRoaXMuX2JTdXBwb3J0SVJUTW9kdWxlfXN0YXRpYyBnZXQgdmVyc2lvbnMoKXtyZXR1cm4gdGhpcy5fdmVyc2lvbnN9c3RhdGljIGdldCBfb25Mb2coKXtyZXR1cm4gc199c3RhdGljIHNldCBfb25Mb2coXyl7bl8oXyl9c3RhdGljIGdldCBfYkRlYnVnKCl7cmV0dXJuIENffXN0YXRpYyBzZXQgX2JEZWJ1ZyhfKXtpXyhfKX1zdGF0aWMgaXNNb2R1bGVMb2FkZWQoXyl7cmV0dXJuIF89KF89X3x8XCJjb3JlXCIpLnRvTG93ZXJDYXNlKCksISFxW19dJiZxW19dLmlzRnVsZmlsbGVkfXN0YXRpYyBhc3luYyBsb2FkV2FzbShfKXtyZXR1cm4gYXdhaXQgUl8oXyl9c3RhdGljIGFzeW5jIGRldGVjdEVudmlyb25tZW50KCl7cmV0dXJuIGF3YWl0KGFzeW5jKCk9Pih7d2FzbTpKLHdvcmtlcjpRLGdldFVzZXJNZWRpYTokLGNhbWVyYTphd2FpdCB6KCksYnJvd3NlcjpqLmJyb3dzZXIsdmVyc2lvbjpqLnZlcnNpb24sT1M6ai5PU30pKSgpfXN0YXRpYyBhc3luYyBnZXRNb2R1bGVWZXJzaW9uKCl7cmV0dXJuIGF3YWl0IG5ldyBQcm9taXNlKCgoXyxFKT0+e2xldCBlPUlfKCk7cl9bZV09YXN5bmMgZT0+e2lmKGUuc3VjY2VzcylyZXR1cm4gXyhlLnZlcnNpb25zKTt7bGV0IF89bmV3IEVycm9yKGUubWVzc2FnZSk7cmV0dXJuIF8uc3RhY2s9ZS5zdGFjaytcIlxcblwiK18uc3RhY2ssRShfKX19LGVfLnBvc3RNZXNzYWdlKHt0eXBlOlwiZ2V0TW9kdWxlVmVyc2lvblwiLGlkOmV9KX0pKX1zdGF0aWMgZ2V0VmVyc2lvbigpe2NvbnN0IF89b18uY29yZSYmb18uY29yZS53b3JrZXIsRT1vXy5jb3JlJiZvXy5jb3JlLndhc207cmV0dXJuYDMuNC4yMChXb3JrZXI6ICR7X3x8XCJOb3QgTG9hZGVkXCJ9LCBXYXNtOiAke0V8fFwiTm90IExvYWRlZFwifSlgfXN0YXRpYyBlbmFibGVMb2dnaW5nKCl7SC5fb25Mb2c9Y29uc29sZS5sb2csTF8uX29uTG9nPWNvbnNvbGUubG9nfXN0YXRpYyBkaXNhYmxlTG9nZ2luZygpe0guX29uTG9nPW51bGwsTF8uX29uTG9nPW51bGx9c3RhdGljIGFzeW5jIGNmZChfKXtyZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKChFLGUpPT57bGV0IHQ9SV8oKTtyX1t0XT1hc3luYyBfPT57aWYoXy5zdWNjZXNzKXJldHVybiBFKCk7e2xldCBFPW5ldyBFcnJvcihfLm1lc3NhZ2UpO3JldHVybiBFLnN0YWNrPV8uc3RhY2srXCJcXG5cIitFLnN0YWNrLGUoRSl9fSxlXy5wb3N0TWVzc2FnZSh7dHlwZTpcImNmZFwiLGlkOnQsYm9keTp7Y291bnQ6X319KX0pKX19dmFyIERfLE9fLGNfLFNfLGxfLGZfLGhfLGRfO0xfLl9iU3VwcG9ydERjZTRNb2R1bGU9LTEsTF8uX2JTdXBwb3J0SVJUTW9kdWxlPS0xLExfLl92ZXJzaW9ucz1udWxsLExfLl93b3JrZXJOYW1lPVwiY29yZS53b3JrZXIuanNcIixMXy5icm93c2VySW5mbz1qLGZ1bmN0aW9uKF8pe19bXy5DUklUX09SSUdJTkFMX0lNQUdFPTFdPVwiQ1JJVF9PUklHSU5BTF9JTUFHRVwiLF9bXy5DUklUX0JBUkNPREU9Ml09XCJDUklUX0JBUkNPREVcIixfW18uQ1JJVF9URVhUX0xJTkU9NF09XCJDUklUX1RFWFRfTElORVwiLF9bXy5DUklUX0RFVEVDVEVEX1FVQUQ9OF09XCJDUklUX0RFVEVDVEVEX1FVQURcIixfW18uQ1JJVF9OT1JNQUxJWkVEX0lNQUdFPTE2XT1cIkNSSVRfTk9STUFMSVpFRF9JTUFHRVwiLF9bXy5DUklUX1BBUlNFRF9SRVNVTFQ9MzJdPVwiQ1JJVF9QQVJTRURfUkVTVUxUXCJ9KERffHwoRF89e30pKSxmdW5jdGlvbihfKXtfW18uQ1RfTk9STUFMX0lOVEVSU0VDVEVEPTBdPVwiQ1RfTk9STUFMX0lOVEVSU0VDVEVEXCIsX1tfLkNUX1RfSU5URVJTRUNURUQ9MV09XCJDVF9UX0lOVEVSU0VDVEVEXCIsX1tfLkNUX0NST1NTX0lOVEVSU0VDVEVEPTJdPVwiQ1RfQ1JPU1NfSU5URVJTRUNURURcIixfW18uQ1RfTk9UX0lOVEVSU0VDVEVEPTNdPVwiQ1RfTk9UX0lOVEVSU0VDVEVEXCJ9KE9ffHwoT189e30pKSxmdW5jdGlvbihfKXtfW18uRUNfT0s9MF09XCJFQ19PS1wiLF9bXy5FQ19VTktOT1dOPS0xZTRdPVwiRUNfVU5LTk9XTlwiLF9bXy5FQ19OT19NRU1PUlk9LTEwMDAxXT1cIkVDX05PX01FTU9SWVwiLF9bXy5FQ19OVUxMX1BPSU5URVI9LTEwMDAyXT1cIkVDX05VTExfUE9JTlRFUlwiLF9bXy5FQ19MSUNFTlNFX0lOVkFMSUQ9LTEwMDAzXT1cIkVDX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19MSUNFTlNFX0VYUElSRUQ9LTEwMDA0XT1cIkVDX0xJQ0VOU0VfRVhQSVJFRFwiLF9bXy5FQ19GSUxFX05PVF9GT1VORD0tMTAwMDVdPVwiRUNfRklMRV9OT1RfRk9VTkRcIixfW18uRUNfRklMRV9UWVBFX05PVF9TVVBQT1JURUQ9LTEwMDA2XT1cIkVDX0ZJTEVfVFlQRV9OT1RfU1VQUE9SVEVEXCIsX1tfLkVDX0JQUF9OT1RfU1VQUE9SVEVEPS0xMDAwN109XCJFQ19CUFBfTk9UX1NVUFBPUlRFRFwiLF9bXy5FQ19JTkRFWF9JTlZBTElEPS0xMDAwOF09XCJFQ19JTkRFWF9JTlZBTElEXCIsX1tfLkVDX0NVU1RPTV9SRUdJT05fSU5WQUxJRD0tMTAwMTBdPVwiRUNfQ1VTVE9NX1JFR0lPTl9JTlZBTElEXCIsX1tfLkVDX0lNQUdFX1JFQURfRkFJTEVEPS0xMDAxMl09XCJFQ19JTUFHRV9SRUFEX0ZBSUxFRFwiLF9bXy5FQ19USUZGX1JFQURfRkFJTEVEPS0xMDAxM109XCJFQ19USUZGX1JFQURfRkFJTEVEXCIsX1tfLkVDX0RJQl9CVUZGRVJfSU5WQUxJRD0tMTAwMThdPVwiRUNfRElCX0JVRkZFUl9JTlZBTElEXCIsX1tfLkVDX1BERl9SRUFEX0ZBSUxFRD0tMTAwMjFdPVwiRUNfUERGX1JFQURfRkFJTEVEXCIsX1tfLkVDX1BERl9ETExfTUlTU0lORz0tMTAwMjJdPVwiRUNfUERGX0RMTF9NSVNTSU5HXCIsX1tfLkVDX1BBR0VfTlVNQkVSX0lOVkFMSUQ9LTEwMDIzXT1cIkVDX1BBR0VfTlVNQkVSX0lOVkFMSURcIixfW18uRUNfQ1VTVE9NX1NJWkVfSU5WQUxJRD0tMTAwMjRdPVwiRUNfQ1VTVE9NX1NJWkVfSU5WQUxJRFwiLF9bXy5FQ19USU1FT1VUPS0xMDAyNl09XCJFQ19USU1FT1VUXCIsX1tfLkVDX0pTT05fUEFSU0VfRkFJTEVEPS0xMDAzMF09XCJFQ19KU09OX1BBUlNFX0ZBSUxFRFwiLF9bXy5FQ19KU09OX1RZUEVfSU5WQUxJRD0tMTAwMzFdPVwiRUNfSlNPTl9UWVBFX0lOVkFMSURcIixfW18uRUNfSlNPTl9LRVlfSU5WQUxJRD0tMTAwMzJdPVwiRUNfSlNPTl9LRVlfSU5WQUxJRFwiLF9bXy5FQ19KU09OX1ZBTFVFX0lOVkFMSUQ9LTEwMDMzXT1cIkVDX0pTT05fVkFMVUVfSU5WQUxJRFwiLF9bXy5FQ19KU09OX05BTUVfS0VZX01JU1NJTkc9LTEwMDM0XT1cIkVDX0pTT05fTkFNRV9LRVlfTUlTU0lOR1wiLF9bXy5FQ19KU09OX05BTUVfVkFMVUVfRFVQTElDQVRFRD0tMTAwMzVdPVwiRUNfSlNPTl9OQU1FX1ZBTFVFX0RVUExJQ0FURURcIixfW18uRUNfVEVNUExBVEVfTkFNRV9JTlZBTElEPS0xMDAzNl09XCJFQ19URU1QTEFURV9OQU1FX0lOVkFMSURcIixfW18uRUNfSlNPTl9OQU1FX1JFRkVSRU5DRV9JTlZBTElEPS0xMDAzN109XCJFQ19KU09OX05BTUVfUkVGRVJFTkNFX0lOVkFMSURcIixfW18uRUNfUEFSQU1FVEVSX1ZBTFVFX0lOVkFMSUQ9LTEwMDM4XT1cIkVDX1BBUkFNRVRFUl9WQUxVRV9JTlZBTElEXCIsX1tfLkVDX0RPTUFJTl9OT1RfTUFUQ0g9LTEwMDM5XT1cIkVDX0RPTUFJTl9OT1RfTUFUQ0hcIixfW18uRUNfUkVTRVJWRURfSU5GT19OT1RfTUFUQ0g9LTEwMDQwXT1cIkVDX1JFU0VSVkVEX0lORk9fTk9UX01BVENIXCIsX1tfLkVDX0xJQ0VOU0VfS0VZX05PVF9NQVRDSD0tMTAwNDNdPVwiRUNfTElDRU5TRV9LRVlfTk9UX01BVENIXCIsX1tfLkVDX1JFUVVFU1RfRkFJTEVEPS0xMDA0NF09XCJFQ19SRVFVRVNUX0ZBSUxFRFwiLF9bXy5FQ19MSUNFTlNFX0lOSVRfRkFJTEVEPS0xMDA0NV09XCJFQ19MSUNFTlNFX0lOSVRfRkFJTEVEXCIsX1tfLkVDX1NFVF9NT0RFX0FSR1VNRU5UX0VSUk9SPS0xMDA1MV09XCJFQ19TRVRfTU9ERV9BUkdVTUVOVF9FUlJPUlwiLF9bXy5FQ19MSUNFTlNFX0NPTlRFTlRfSU5WQUxJRD0tMTAwNTJdPVwiRUNfTElDRU5TRV9DT05URU5UX0lOVkFMSURcIixfW18uRUNfTElDRU5TRV9LRVlfSU5WQUxJRD0tMTAwNTNdPVwiRUNfTElDRU5TRV9LRVlfSU5WQUxJRFwiLF9bXy5FQ19MSUNFTlNFX0RFVklDRV9SVU5TX09VVD0tMTAwNTRdPVwiRUNfTElDRU5TRV9ERVZJQ0VfUlVOU19PVVRcIixfW18uRUNfR0VUX01PREVfQVJHVU1FTlRfRVJST1I9LTEwMDU1XT1cIkVDX0dFVF9NT0RFX0FSR1VNRU5UX0VSUk9SXCIsX1tfLkVDX0lSVF9MSUNFTlNFX0lOVkFMSUQ9LTEwMDU2XT1cIkVDX0lSVF9MSUNFTlNFX0lOVkFMSURcIixfW18uRUNfRklMRV9TQVZFX0ZBSUxFRD0tMTAwNThdPVwiRUNfRklMRV9TQVZFX0ZBSUxFRFwiLF9bXy5FQ19TVEFHRV9UWVBFX0lOVkFMSUQ9LTEwMDU5XT1cIkVDX1NUQUdFX1RZUEVfSU5WQUxJRFwiLF9bXy5FQ19JTUFHRV9PUklFTlRBVElPTl9JTlZBTElEPS0xMDA2MF09XCJFQ19JTUFHRV9PUklFTlRBVElPTl9JTlZBTElEXCIsX1tfLkVDX0NPTlZFUlRfQ09NUExFWF9URU1QTEFURV9FUlJPUj0tMTAwNjFdPVwiRUNfQ09OVkVSVF9DT01QTEVYX1RFTVBMQVRFX0VSUk9SXCIsX1tfLkVDX0NBTExfUkVKRUNURURfV0hFTl9DQVBUVVJJTkc9LTEwMDYyXT1cIkVDX0NBTExfUkVKRUNURURfV0hFTl9DQVBUVVJJTkdcIixfW18uRUNfTk9fSU1BR0VfU09VUkNFPS0xMDA2M109XCJFQ19OT19JTUFHRV9TT1VSQ0VcIixfW18uRUNfUkVBRF9ESVJFQ1RPUllfRkFJTEVEPS0xMDA2NF09XCJFQ19SRUFEX0RJUkVDVE9SWV9GQUlMRURcIixfW18uRUNfTU9EVUxFX05PVF9GT1VORD0tMTAwNjVdPVwiRUNfTU9EVUxFX05PVF9GT1VORFwiLF9bXy5FQ19NVUxUSV9QQUdFU19OT1RfU1VQUE9SVEVEPS0xMDA2Nl09XCJFQ19NVUxUSV9QQUdFU19OT1RfU1VQUE9SVEVEXCIsX1tfLkVDX0ZJTEVfQUxSRUFEWV9FWElTVFM9LTEwMDY3XT1cIkVDX0ZJTEVfQUxSRUFEWV9FWElTVFNcIixfW18uRUNfQ1JFQVRFX0ZJTEVfRkFJTEVEPS0xMDA2OF09XCJFQ19DUkVBVEVfRklMRV9GQUlMRURcIixfW18uRUNfSU1HQUVfREFUQV9JTlZBTElEPS0xMDA2OV09XCJFQ19JTUdBRV9EQVRBX0lOVkFMSURcIixfW18uRUNfSU1BR0VfU0laRV9OT1RfTUFUQ0g9LTEwMDcwXT1cIkVDX0lNQUdFX1NJWkVfTk9UX01BVENIXCIsX1tfLkVDX0lNQUdFX1BJWEVMX0ZPUk1BVF9OT1RfTUFUQ0g9LTEwMDcxXT1cIkVDX0lNQUdFX1BJWEVMX0ZPUk1BVF9OT1RfTUFUQ0hcIixfW18uRUNfU0VDVElPTl9MRVZFTF9SRVNVTFRfSVJSRVBMQUNFQUJMRT0tMTAwNzJdPVwiRUNfU0VDVElPTl9MRVZFTF9SRVNVTFRfSVJSRVBMQUNFQUJMRVwiLF9bXy5FQ19BWElTX0RFRklOSVRJT05fSU5DT1JSRUNUPS0xMDA3M109XCJFQ19BWElTX0RFRklOSVRJT05fSU5DT1JSRUNUXCIsX1tfLkVDX1JFU1VMVF9UWVBFX01JU01BVENIX0lSUkVQTEFDRUFCTEU9LTEwMDc0XT1cIkVDX1JFU1VMVF9UWVBFX01JU01BVENIX0lSUkVQTEFDRUFCTEVcIixfW18uRUNfUERGX0xJQlJBUllfTE9BRF9GQUlMRUQ9LTEwMDc1XT1cIkVDX1BERl9MSUJSQVJZX0xPQURfRkFJTEVEXCIsX1tfLkVDX05PX0xJQ0VOU0U9LTJlNF09XCJFQ19OT19MSUNFTlNFXCIsX1tfLkVDX0hBTkRTSEFLRV9DT0RFX0lOVkFMSUQ9LTIwMDAxXT1cIkVDX0hBTkRTSEFLRV9DT0RFX0lOVkFMSURcIixfW18uRUNfTElDRU5TRV9CVUZGRVJfRkFJTEVEPS0yMDAwMl09XCJFQ19MSUNFTlNFX0JVRkZFUl9GQUlMRURcIixfW18uRUNfTElDRU5TRV9TWU5DX0ZBSUxFRD0tMjAwMDNdPVwiRUNfTElDRU5TRV9TWU5DX0ZBSUxFRFwiLF9bXy5FQ19ERVZJQ0VfTk9UX01BVENIPS0yMDAwNF09XCJFQ19ERVZJQ0VfTk9UX01BVENIXCIsX1tfLkVDX0JJTkRfREVWSUNFX0ZBSUxFRD0tMjAwMDVdPVwiRUNfQklORF9ERVZJQ0VfRkFJTEVEXCIsX1tfLkVDX0lOU1RBTkNFX0NPVU5UX09WRVJfTElNSVQ9LTIwMDA4XT1cIkVDX0lOU1RBTkNFX0NPVU5UX09WRVJfTElNSVRcIixfW18uRUNfTElDRU5TRV9JTklUX1NFUVVFTkNFX0ZBSUxFRD0tMjAwMDldPVwiRUNfTElDRU5TRV9JTklUX1NFUVVFTkNFX0ZBSUxFRFwiLF9bXy5FQ19UUklBTF9MSUNFTlNFPS0yMDAxMF09XCJFQ19UUklBTF9MSUNFTlNFXCIsX1tfLkVDX0ZBSUxFRF9UT19SRUFDSF9ETFM9LTIwMjAwXT1cIkVDX0ZBSUxFRF9UT19SRUFDSF9ETFNcIixfW18uRUNfTElDRU5TRV9DQUNIRV9VU0VEPS0yMDAxMl09XCJFQ19MSUNFTlNFX0NBQ0hFX1VTRURcIixfW18uRUNfQkFSQ09ERV9GT1JNQVRfSU5WQUxJRD0tMzAwMDldPVwiRUNfQkFSQ09ERV9GT1JNQVRfSU5WQUxJRFwiLF9bXy5FQ19RUl9MSUNFTlNFX0lOVkFMSUQ9LTMwMDE2XT1cIkVDX1FSX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ18xRF9MSUNFTlNFX0lOVkFMSUQ9LTMwMDE3XT1cIkVDXzFEX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19QREY0MTdfTElDRU5TRV9JTlZBTElEPS0zMDAxOV09XCJFQ19QREY0MTdfTElDRU5TRV9JTlZBTElEXCIsX1tfLkVDX0RBVEFNQVRSSVhfTElDRU5TRV9JTlZBTElEPS0zMDAyMF09XCJFQ19EQVRBTUFUUklYX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19DVVNUT01fTU9EVUxFU0laRV9JTlZBTElEPS0zMDAyNV09XCJFQ19DVVNUT01fTU9EVUxFU0laRV9JTlZBTElEXCIsX1tfLkVDX0FaVEVDX0xJQ0VOU0VfSU5WQUxJRD0tMzAwNDFdPVwiRUNfQVpURUNfTElDRU5TRV9JTlZBTElEXCIsX1tfLkVDX1BBVENIQ09ERV9MSUNFTlNFX0lOVkFMSUQ9LTMwMDQ2XT1cIkVDX1BBVENIQ09ERV9MSUNFTlNFX0lOVkFMSURcIixfW18uRUNfUE9TVEFMQ09ERV9MSUNFTlNFX0lOVkFMSUQ9LTMwMDQ3XT1cIkVDX1BPU1RBTENPREVfTElDRU5TRV9JTlZBTElEXCIsX1tfLkVDX0RQTV9MSUNFTlNFX0lOVkFMSUQ9LTMwMDQ4XT1cIkVDX0RQTV9MSUNFTlNFX0lOVkFMSURcIixfW18uRUNfRlJBTUVfREVDT0RJTkdfVEhSRUFEX0VYSVNUUz0tMzAwNDldPVwiRUNfRlJBTUVfREVDT0RJTkdfVEhSRUFEX0VYSVNUU1wiLF9bXy5FQ19TVE9QX0RFQ09ESU5HX1RIUkVBRF9GQUlMRUQ9LTMwMDUwXT1cIkVDX1NUT1BfREVDT0RJTkdfVEhSRUFEX0ZBSUxFRFwiLF9bXy5FQ19NQVhJQ09ERV9MSUNFTlNFX0lOVkFMSUQ9LTMwMDU3XT1cIkVDX01BWElDT0RFX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19HUzFfREFUQUJBUl9MSUNFTlNFX0lOVkFMSUQ9LTMwMDU4XT1cIkVDX0dTMV9EQVRBQkFSX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19HUzFfQ09NUE9TSVRFX0xJQ0VOU0VfSU5WQUxJRD0tMzAwNTldPVwiRUNfR1MxX0NPTVBPU0lURV9MSUNFTlNFX0lOVkFMSURcIixfW18uRUNfRE9UQ09ERV9MSUNFTlNFX0lOVkFMSUQ9LTMwMDYxXT1cIkVDX0RPVENPREVfTElDRU5TRV9JTlZBTElEXCIsX1tfLkVDX1BIQVJNQUNPREVfTElDRU5TRV9JTlZBTElEPS0zMDA2Ml09XCJFQ19QSEFSTUFDT0RFX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19DSEFSQUNURVJfTU9ERUxfRklMRV9OT1RfRk9VTkQ9LTQwMTAwXT1cIkVDX0NIQVJBQ1RFUl9NT0RFTF9GSUxFX05PVF9GT1VORFwiLF9bXy5FQ19URVhUX0xJTkVfR1JPVVBfTEFZT1VUX0NPTkZMSUNUPS00MDEwMV09XCJFQ19URVhUX0xJTkVfR1JPVVBfTEFZT1VUX0NPTkZMSUNUXCIsX1tfLkVDX1RFWFRfTElORV9HUk9VUF9SRUdFWF9DT05GTElDVD0tNDAxMDJdPVwiRUNfVEVYVF9MSU5FX0dST1VQX1JFR0VYX0NPTkZMSUNUXCIsX1tfLkVDX1FVQURSSUxBVEVSQUxfSU5WQUxJRD0tNTAwNTddPVwiRUNfUVVBRFJJTEFURVJBTF9JTlZBTElEXCIsX1tfLkVDX1BBTk9SQU1BX0xJQ0VOU0VfSU5WQUxJRD0tNzAwNjBdPVwiRUNfUEFOT1JBTUFfTElDRU5TRV9JTlZBTElEXCIsX1tfLkVDX1JFU09VUkNFX1BBVEhfTk9UX0VYSVNUPS05MDAwMV09XCJFQ19SRVNPVVJDRV9QQVRIX05PVF9FWElTVFwiLF9bXy5FQ19SRVNPVVJDRV9MT0FEX0ZBSUxFRD0tOTAwMDJdPVwiRUNfUkVTT1VSQ0VfTE9BRF9GQUlMRURcIixfW18uRUNfQ09ERV9TUEVDSUZJQ0FUSU9OX05PVF9GT1VORD0tOTAwMDNdPVwiRUNfQ09ERV9TUEVDSUZJQ0FUSU9OX05PVF9GT1VORFwiLF9bXy5FQ19GVUxMX0NPREVfRU1QVFk9LTkwMDA0XT1cIkVDX0ZVTExfQ09ERV9FTVBUWVwiLF9bXy5FQ19GVUxMX0NPREVfUFJFUFJPQ0VTU19GQUlMRUQ9LTkwMDA1XT1cIkVDX0ZVTExfQ09ERV9QUkVQUk9DRVNTX0ZBSUxFRFwiLF9bXy5FQ19aQV9ETF9MSUNFTlNFX0lOVkFMSUQ9LTkwMDA2XT1cIkVDX1pBX0RMX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19BQU1WQV9ETF9JRF9MSUNFTlNFX0lOVkFMSUQ9LTkwMDA3XT1cIkVDX0FBTVZBX0RMX0lEX0xJQ0VOU0VfSU5WQUxJRFwiLF9bXy5FQ19BQURIQUFSX0xJQ0VOU0VfSU5WQUxJRD0tOTAwMDhdPVwiRUNfQUFESEFBUl9MSUNFTlNFX0lOVkFMSURcIixfW18uRUNfTVJURF9MSUNFTlNFX0lOVkFMSUQ9LTkwMDA5XT1cIkVDX01SVERfTElDRU5TRV9JTlZBTElEXCIsX1tfLkVDX1ZJTl9MSUNFTlNFX0lOVkFMSUQ9LTkwMDEwXT1cIkVDX1ZJTl9MSUNFTlNFX0lOVkFMSURcIixfW18uRUNfQ1VTVE9NSVpFRF9DT0RFX1RZUEVfTElDRU5TRV9JTlZBTElEPS05MDAxMV09XCJFQ19DVVNUT01JWkVEX0NPREVfVFlQRV9MSUNFTlNFX0lOVkFMSURcIixfW18uRUNfTElDRU5TRV9XQVJOSU5HPS0xMDA3Nl09XCJFQ19MSUNFTlNFX1dBUk5JTkdcIixfW18uRUNfQkFSQ09ERV9SRUFERVJfTElDRU5TRV9OT1RfRk9VTkQ9LTMwMDYzXT1cIkVDX0JBUkNPREVfUkVBREVSX0xJQ0VOU0VfTk9UX0ZPVU5EXCIsX1tfLkVDX0xBQkVMX1JFQ09HTklaRVJfTElDRU5TRV9OT1RfRk9VTkQ9LTQwMTAzXT1cIkVDX0xBQkVMX1JFQ09HTklaRVJfTElDRU5TRV9OT1RfRk9VTkRcIixfW18uRUNfRE9DVU1FTlRfTk9STUFMSVpFUl9MSUNFTlNFX05PVF9GT1VORD0tNTAwNThdPVwiRUNfRE9DVU1FTlRfTk9STUFMSVpFUl9MSUNFTlNFX05PVF9GT1VORFwiLF9bXy5FQ19DT0RFX1BBUlNFUl9MSUNFTlNFX05PVF9GT1VORD0tOTAwMTJdPVwiRUNfQ09ERV9QQVJTRVJfTElDRU5TRV9OT1RfRk9VTkRcIn0oY198fChjXz17fSkpLGZ1bmN0aW9uKF8pe19bXy5HRU1fU0tJUD0wXT1cIkdFTV9TS0lQXCIsX1tfLkdFTV9BVVRPPTFdPVwiR0VNX0FVVE9cIixfW18uR0VNX0dFTkVSQUw9Ml09XCJHRU1fR0VORVJBTFwiLF9bXy5HRU1fR1JBWV9FUVVBTElaRT00XT1cIkdFTV9HUkFZX0VRVUFMSVpFXCIsX1tfLkdFTV9HUkFZX1NNT09USD04XT1cIkdFTV9HUkFZX1NNT09USFwiLF9bXy5HRU1fU0hBUlBFTl9TTU9PVEg9MTZdPVwiR0VNX1NIQVJQRU5fU01PT1RIXCIsX1tfLkdFTV9SRVY9LTIxNDc0ODM2NDhdPVwiR0VNX1JFVlwifShTX3x8KFNfPXt9KSksZnVuY3Rpb24oXyl7X1tfLkdUTV9TS0lQPTBdPVwiR1RNX1NLSVBcIixfW18uR1RNX0lOVkVSVEVEPTFdPVwiR1RNX0lOVkVSVEVEXCIsX1tfLkdUTV9PUklHSU5BTD0yXT1cIkdUTV9PUklHSU5BTFwiLF9bXy5HVE1fQVVUTz00XT1cIkdUTV9BVVRPXCIsX1tfLkdUTV9SRVY9LTIxNDc0ODM2NDhdPVwiR1RNX1JFVlwifShsX3x8KGxfPXt9KSksZnVuY3Rpb24oXyl7X1tfLklUVF9GSUxFX0lNQUdFPTBdPVwiSVRUX0ZJTEVfSU1BR0VcIixfW18uSVRUX1ZJREVPX0ZSQU1FPTFdPVwiSVRUX1ZJREVPX0ZSQU1FXCJ9KGZffHwoZl89e30pKSxmdW5jdGlvbihfKXtfW18uUERGUk1fVkVDVE9SPTFdPVwiUERGUk1fVkVDVE9SXCIsX1tfLlBERlJNX1JBU1RFUj0yXT1cIlBERlJNX1JBU1RFUlwiLF9bXy5QREZSTV9SRVY9LTIxNDc0ODM2NDhdPVwiUERGUk1fUkVWXCJ9KGhffHwoaF89e30pKSxmdW5jdGlvbihfKXtfW18uUkRTX1JBU1RFUklaRURfUEFHRVM9MF09XCJSRFNfUkFTVEVSSVpFRF9QQUdFU1wiLF9bXy5SRFNfRVhUUkFDVEVEX0lNQUdFUz0xXT1cIlJEU19FWFRSQUNURURfSU1BR0VTXCJ9KGRffHwoZF89e30pKTtjb25zdCBQXz17SVJVVF9OVUxMOkJpZ0ludCgwKSxJUlVUX0NPTE9VUl9JTUFHRTpCaWdJbnQoMSksSVJVVF9TQ0FMRURfRE9XTl9DT0xPVVJfSU1BR0U6QmlnSW50KDIpLElSVVRfR1JBWVNDQUxFX0lNQUdFOkJpZ0ludCg0KSxJUlVUX1RSQU5TT0ZPUk1FRF9HUkFZU0NBTEVfSU1BR0U6QmlnSW50KDgpLElSVVRfRU5IQU5DRURfR1JBWVNDQUxFX0lNQUdFOkJpZ0ludCgxNiksSVJVVF9QUkVERVRFQ1RFRF9SRUdJT05TOkJpZ0ludCgzMiksSVJVVF9CSU5BUllfSU1BR0U6QmlnSW50KDY0KSxJUlVUX1RFWFRVUkVfREVURUNUSU9OX1JFU1VMVDpCaWdJbnQoMTI4KSxJUlVUX1RFWFRVUkVfUkVNT1ZFRF9HUkFZU0NBTEVfSU1BR0U6QmlnSW50KDI1NiksSVJVVF9URVhUVVJFX1JFTU9WRURfQklOQVJZX0lNQUdFOkJpZ0ludCg1MTIpLElSVVRfQ09OVE9VUlM6QmlnSW50KDEwMjQpLElSVVRfTElORV9TRUdNRU5UUzpCaWdJbnQoMjA0OCksSVJVVF9URVhUX1pPTkVTOkJpZ0ludCg0MDk2KSxJUlVUX1RFWFRfUkVNT1ZFRF9CSU5BUllfSU1BR0U6QmlnSW50KDgxOTIpLElSVVRfQ0FORElEQVRFX0JBUkNPREVfWk9ORVM6QmlnSW50KDE2Mzg0KSxJUlVUX0xPQ0FMSVpFRF9CQVJDT0RFUzpCaWdJbnQoMzI3NjgpLElSVVRfU0NBTEVEX1VQX0JBUkNPREVfSU1BR0U6QmlnSW50KDY1NTM2KSxJUlVUX0RFRk9STUFUSU9OX1JFU0lTVEVEX0JBUkNPREVfSU1BR0U6QmlnSW50KDE8PDE3KSxJUlVUX0NPTVBMRU1FTlRFRF9CQVJDT0RFX0lNQUdFOkJpZ0ludCgxPDwxOCksSVJVVF9ERUNPREVEX0JBUkNPREVTOkJpZ0ludCgxPDwxOSksSVJVVF9MT05HX0xJTkVTOkJpZ0ludCgxPDwyMCksSVJVVF9DT1JORVJTOkJpZ0ludCgxPDwyMSksSVJVVF9DQU5ESURBVEVfUVVBRF9FREdFUzpCaWdJbnQoMTw8MjIpLElSVVRfREVURUNURURfUVVBRFM6QmlnSW50KDE8PDIzKSxJUlVUX0xPQ0FMSVpFRF9URVhUX0xJTkVTOkJpZ0ludCgxPDwyNCksSVJVVF9SRUNPR05JWkVEX1RFWFRfTElORVM6QmlnSW50KDE8PDI1KSxJUlVUX05PUk1BTElaRURfSU1BR0VTOkJpZ0ludCgxPDwyNiksSVJVVF9TSE9SVF9MSU5FUzpCaWdJbnQoMTw8MjcpLElSVVRfUkFXX1RFWFRfTElORVM6QmlnSW50KDE8PDI4KSxJUlVUX0FMTDpCaWdJbnQoXCIweEZGRkZGRkZGRkZGRkZGRkZcIil9O3ZhciBnXyxNXzshZnVuY3Rpb24oXyl7X1tfLlJPRVRfUFJFREVURUNURURfUkVHSU9OPTBdPVwiUk9FVF9QUkVERVRFQ1RFRF9SRUdJT05cIixfW18uUk9FVF9MT0NBTElaRURfQkFSQ09ERT0xXT1cIlJPRVRfTE9DQUxJWkVEX0JBUkNPREVcIixfW18uUk9FVF9ERUNPREVEX0JBUkNPREU9Ml09XCJST0VUX0RFQ09ERURfQkFSQ09ERVwiLF9bXy5ST0VUX0xPQ0FMSVpFRF9URVhUX0xJTkU9M109XCJST0VUX0xPQ0FMSVpFRF9URVhUX0xJTkVcIixfW18uUk9FVF9SRUNPR05JWkVEX1RFWFRfTElORT00XT1cIlJPRVRfUkVDT0dOSVpFRF9URVhUX0xJTkVcIixfW18uUk9FVF9ERVRFQ1RFRF9RVUFEPTVdPVwiUk9FVF9ERVRFQ1RFRF9RVUFEXCIsX1tfLlJPRVRfTk9STUFMSVpFRF9JTUFHRT02XT1cIlJPRVRfTk9STUFMSVpFRF9JTUFHRVwiLF9bXy5ST0VUX1NPVVJDRV9JTUFHRT03XT1cIlJPRVRfU09VUkNFX0lNQUdFXCIsX1tfLlJPRVRfVEFSR0VUX1JPST04XT1cIlJPRVRfVEFSR0VUX1JPSVwifShnX3x8KGdfPXt9KSksZnVuY3Rpb24oXyl7X1tfLlNUX05VTEw9MF09XCJTVF9OVUxMXCIsX1tfLlNUX1JFR0lPTl9QUkVERVRFQ1RJT049MV09XCJTVF9SRUdJT05fUFJFREVURUNUSU9OXCIsX1tfLlNUX0JBUkNPREVfTE9DQUxJWkFUSU9OPTJdPVwiU1RfQkFSQ09ERV9MT0NBTElaQVRJT05cIixfW18uU1RfQkFSQ09ERV9ERUNPRElORz0zXT1cIlNUX0JBUkNPREVfREVDT0RJTkdcIixfW18uU1RfVEVYVF9MSU5FX0xPQ0FMSVpBVElPTj00XT1cIlNUX1RFWFRfTElORV9MT0NBTElaQVRJT05cIixfW18uU1RfVEVYVF9MSU5FX1JFQ09HTklUSU9OPTVdPVwiU1RfVEVYVF9MSU5FX1JFQ09HTklUSU9OXCIsX1tfLlNUX0RPQ1VNRU5UX0RFVEVDVElPTj02XT1cIlNUX0RPQ1VNRU5UX0RFVEVDVElPTlwiLF9bXy5TVF9ET0NVTUVOVF9OT1JNQUxJWkFUSU9OPTddPVwiU1RfRE9DVU1FTlRfTk9STUFMSVpBVElPTlwifShNX3x8KE1fPXt9KSk7ZXhwb3J0e0xfIGFzIENvcmVNb2R1bGUsZSBhcyBFbnVtQnVmZmVyT3ZlcmZsb3dQcm90ZWN0aW9uTW9kZSxEXyBhcyBFbnVtQ2FwdHVyZWRSZXN1bHRJdGVtVHlwZSx0IGFzIEVudW1Db2xvdXJDaGFubmVsVXNhZ2VUeXBlLE9fIGFzIEVudW1Db3JuZXJUeXBlLGNfIGFzIEVudW1FcnJvckNvZGUsU18gYXMgRW51bUdyYXlzY2FsZUVuaGFuY2VtZW50TW9kZSxsXyBhcyBFbnVtR3JheXNjYWxlVHJhbnNmb3JtYXRpb25Nb2RlLEkgYXMgRW51bUltYWdlUGl4ZWxGb3JtYXQsZl8gYXMgRW51bUltYWdlVGFnVHlwZSxQXyBhcyBFbnVtSW50ZXJtZWRpYXRlUmVzdWx0VW5pdFR5cGUsaF8gYXMgRW51bVBERlJlYWRpbmdNb2RlLGRfIGFzIEVudW1SYXN0ZXJEYXRhU291cmNlLGdfIGFzIEVudW1SZWdpb25PYmplY3RFbGVtZW50VHlwZSxNXyBhcyBFbnVtU2VjdGlvblR5cGUsSCBhcyBJbWFnZVNvdXJjZUFkYXB0ZXIsQiBhcyBfZ2V0Tm9ySW1hZ2VEYXRhLGEgYXMgX2lzQXJjLFQgYXMgX2lzQ29udG91cixSIGFzIF9pc0RTSW1hZ2VEYXRhLEwgYXMgX2lzRFNSZWN0LEQgYXMgX2lzSW1hZ2VUYWcsTyBhcyBfaXNMaW5lU2VnbWVudCxjIGFzIF9pc1BvaW50LFMgYXMgX2lzUG9seWdvbixsIGFzIF9pc1F1YWQsZiBhcyBfaXNSZWN0LHUgYXMgX3NhdmVUb0ZpbGUsVSBhcyBfdG9CbG9iLEYgYXMgX3RvQ2FudmFzLEcgYXMgX3RvSW1hZ2UsTl8gYXMgYXV0b0Rpc2NvdmVyeVBhdGhzLENfIGFzIGJEZWJ1ZyxkIGFzIGNoZWNrSXNMaW5rLFAgYXMgY29tcGFyZVZlcnNpb24sRV8gYXMgZG9PcldhaXRBc3luY0RlcGVuZGVuY3ksSV8gYXMgZ2V0TmV4dFRhc2tJRCxnIGFzIGhhbmRsZUVuZ2luZVJlc291cmNlUGF0aHMsb18gYXMgaW5uZXJWZXJzaW9ucyxhIGFzIGlzQXJjLFQgYXMgaXNDb250b3VyLFIgYXMgaXNEU0ltYWdlRGF0YSxMIGFzIGlzRFNSZWN0LEQgYXMgaXNJbWFnZVRhZyxPIGFzIGlzTGluZVNlZ21lbnQsTiBhcyBpc09iamVjdCxjIGFzIGlzUG9pbnQsUyBhcyBpc1BvbHlnb24sbCBhcyBpc1F1YWQsZiBhcyBpc1JlY3QsUl8gYXMgbG9hZFdhc20scSBhcyBtYXBBc3luY0RlcGVuZGVuY3ksQV8gYXMgbWFwUGFja2FnZVJlZ2lzdGVyLHJfIGFzIG1hcFRhc2tDYWxsQmFjayxzXyBhcyBvbkxvZyxoIGFzIHJlcXVlc3RSZXNvdXJjZSxpXyBhcyBzZXRCRGVidWcsbl8gYXMgc2V0T25Mb2csX18gYXMgd2FpdEFzeW5jRGVwZW5kZW5jeSxlXyBhcyB3b3JrZXIsYV8gYXMgd29ya2VyQXV0b1Jlc291cmNlc307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/dynamsoft-document-normalizer/dist/ddn.esm.js":
/*!********************************************************************!*\
  !*** ./node_modules/dynamsoft-document-normalizer/dist/ddn.esm.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DocumentNormalizerModule: function() { return /* binding */ C; },\n/* harmony export */   EnumImageColourMode: function() { return /* binding */ v; }\n/* harmony export */ });\n/* harmony import */ var dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dynamsoft-core */ \"(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js\");\n/*!\n* Dynamsoft JavaScript Library\n* @product Dynamsoft Document Normalizer JS Edition\n* @website http://www.dynamsoft.com\n* @copyright Copyright 2024, Dynamsoft Corporation\n* @author Dynamsoft\n* @version 2.4.20\n* @fileoverview Dynamsoft JavaScript Library for Document Normalizer\n* More info on ddn JS: https://www.dynamsoft.com/document-normalizer/docs/web/programming/javascript/\n*/\nconst p=\"undefined\"==typeof self,g=(()=>{if(!p&&document.currentScript){let e=document.currentScript.src,t=e.indexOf(\"?\");if(-1!=t)e=e.substring(0,t);else{let t=e.indexOf(\"#\");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf(\"/\")+1)}return\"./\"})(),h=e=>{if(null==e&&(e=\"./\"),p);else{let t=document.createElement(\"a\");t.href=e,e=t.href}return e.endsWith(\"/\")||(e+=\"/\"),e};dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.ddn={version:\"2.4.20\",path:g},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.workerAutoResources.ddn={js:!0,wasm:!0,deps:[\"license\",\"dip\"]},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.ddn={handleNormalizedImageResultItem:function(i){let d=i,o=(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._getNorImageData)(d.imageData);d.toCanvas=()=>(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._toCanvas)(o),d.toImage=e=>(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._toImage)(e,o),d.toBlob=e=>(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._toBlob)(e,o),d.saveToFile=async(e,t)=>{if(!e)return null;if(\"string\"!=typeof e)throw new TypeError(\"FileName must be of type string.\");return (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__._saveToFile)(o,e,t)}}};const y=\"1.4.10\";\"string\"!=typeof dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std&&(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.compareVersion)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std.version,y)<0&&(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std={version:y,path:h(g+`../../dynamsoft-capture-vision-std@${y}/dist/`)});const I=\"2.4.20\";(!dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip||\"string\"!=typeof dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip&&(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.compareVersion)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip.version,I)<0)&&(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.dip={version:I,path:h(g+`../../dynamsoft-image-processing@${I}/dist/`)});class C{static getVersion(){const e=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.ddn&&dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.ddn.wasm,t=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.ddn&&dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.ddn.worker;return`2.4.20(Worker: ${t||\"Not Loaded\"}, Wasm: ${e||\"Not Loaded\"})`}async setThresholdValue(e,t,s,n){return await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)(\"ddn\"),await new Promise(((r,i)=>{let d=(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[d]=async e=>{if(e.success)return r();{let t=new Error(e.message);return t.stack=e.stack+\"\\n\"+t.stack,i(t)}},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({type:\"ddn_setThresholdValue\",id:d,instanceID:e._instanceID,body:{threshold:t,leftLimit:s,rightLimit:n}})}))}}var v;!function(e){e[e.ICM_COLOUR=0]=\"ICM_COLOUR\",e[e.ICM_GRAYSCALE=1]=\"ICM_GRAYSCALE\",e[e.ICM_BINARY=2]=\"ICM_BINARY\"}(v||(v={}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9keW5hbXNvZnQtZG9jdW1lbnQtbm9ybWFsaXplci9kaXN0L2Rkbi5lc20uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDK1IseUNBQXlDLCtCQUErQixrREFBa0QsNEJBQTRCLEtBQUsscUJBQXFCLDRCQUE0QiwyQ0FBMkMsV0FBVyxVQUFVLHdCQUF3QixLQUFLLGtDQUFrQyxrQkFBa0Isb0NBQW9DLDhEQUFDLE1BQU0sd0JBQXdCLENBQUMsK0RBQUMsTUFBTSxxQ0FBcUMsQ0FBQyw4REFBQyxNQUFNLDRDQUE0QyxVQUFVLGdFQUFDLGNBQWMsZUFBZSx5REFBQyxpQkFBaUIsd0RBQUMsa0JBQWtCLHVEQUFDLGdDQUFnQyxrQkFBa0IsOEVBQThFLE9BQU8sMkRBQUMsV0FBVyxpQkFBaUIsaUJBQWlCLDhEQUFDLE1BQU0sOERBQUMsQ0FBQyw4REFBQyxvQkFBb0IsOERBQUMsTUFBTSx5REFBeUQsRUFBRSxTQUFTLEVBQUUsaUJBQWlCLEVBQUUsOERBQUMsdUJBQXVCLDhEQUFDLE1BQU0sOERBQUMsQ0FBQyw4REFBQyxxQkFBcUIsOERBQUMsTUFBTSx1REFBdUQsRUFBRSxTQUFTLEVBQUUsUUFBUSxvQkFBb0IsUUFBUSx5REFBQyxNQUFNLHlEQUFDLFlBQVkseURBQUMsTUFBTSx5REFBQyxZQUFZLHdCQUF3QixnQkFBZ0IsVUFBVSxnQkFBZ0IsR0FBRyxpQ0FBaUMsYUFBYSx3REFBQyxtQ0FBbUMsTUFBTSw2REFBQyxHQUFHLDJEQUFDLGNBQWMseUJBQXlCLDJCQUEyQiwwQ0FBMEMsQ0FBQyxrREFBQyxjQUFjLGlFQUFpRSxzQ0FBc0MsRUFBRSxJQUFJLE1BQU0sYUFBYSxtR0FBbUcsU0FBUyxHQUFrRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvZHluYW1zb2Z0LWRvY3VtZW50LW5vcm1hbGl6ZXIvZGlzdC9kZG4uZXNtLmpzPzBlZWQiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4qIER5bmFtc29mdCBKYXZhU2NyaXB0IExpYnJhcnlcbiogQHByb2R1Y3QgRHluYW1zb2Z0IERvY3VtZW50IE5vcm1hbGl6ZXIgSlMgRWRpdGlvblxuKiBAd2Vic2l0ZSBodHRwOi8vd3d3LmR5bmFtc29mdC5jb21cbiogQGNvcHlyaWdodCBDb3B5cmlnaHQgMjAyNCwgRHluYW1zb2Z0IENvcnBvcmF0aW9uXG4qIEBhdXRob3IgRHluYW1zb2Z0XG4qIEB2ZXJzaW9uIDIuNC4yMFxuKiBAZmlsZW92ZXJ2aWV3IER5bmFtc29mdCBKYXZhU2NyaXB0IExpYnJhcnkgZm9yIERvY3VtZW50IE5vcm1hbGl6ZXJcbiogTW9yZSBpbmZvIG9uIGRkbiBKUzogaHR0cHM6Ly93d3cuZHluYW1zb2Z0LmNvbS9kb2N1bWVudC1ub3JtYWxpemVyL2RvY3Mvd2ViL3Byb2dyYW1taW5nL2phdmFzY3JpcHQvXG4qL1xuaW1wb3J0e19nZXROb3JJbWFnZURhdGEgYXMgZSxfdG9DYW52YXMgYXMgdCxfdG9JbWFnZSBhcyBzLF90b0Jsb2IgYXMgbixfc2F2ZVRvRmlsZSBhcyByLGF1dG9EaXNjb3ZlcnlQYXRocyBhcyBpLHdvcmtlckF1dG9SZXNvdXJjZXMgYXMgZCxtYXBQYWNrYWdlUmVnaXN0ZXIgYXMgbyxjb21wYXJlVmVyc2lvbiBhcyBhLGlubmVyVmVyc2lvbnMgYXMgYyxsb2FkV2FzbSBhcyBsLGdldE5leHRUYXNrSUQgYXMgdSxtYXBUYXNrQ2FsbEJhY2sgYXMgZix3b3JrZXIgYXMgbX1mcm9tXCJkeW5hbXNvZnQtY29yZVwiO2NvbnN0IHA9XCJ1bmRlZmluZWRcIj09dHlwZW9mIHNlbGYsZz0oKCk9PntpZighcCYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCl7bGV0IGU9ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMsdD1lLmluZGV4T2YoXCI/XCIpO2lmKC0xIT10KWU9ZS5zdWJzdHJpbmcoMCx0KTtlbHNle2xldCB0PWUuaW5kZXhPZihcIiNcIik7LTEhPXQmJihlPWUuc3Vic3RyaW5nKDAsdCkpfXJldHVybiBlLnN1YnN0cmluZygwLGUubGFzdEluZGV4T2YoXCIvXCIpKzEpfXJldHVyblwiLi9cIn0pKCksaD1lPT57aWYobnVsbD09ZSYmKGU9XCIuL1wiKSxwKTtlbHNle2xldCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3QuaHJlZj1lLGU9dC5ocmVmfXJldHVybiBlLmVuZHNXaXRoKFwiL1wiKXx8KGUrPVwiL1wiKSxlfTtpLmRkbj17dmVyc2lvbjpcIjIuNC4yMFwiLHBhdGg6Z30sZC5kZG49e2pzOiEwLHdhc206ITAsZGVwczpbXCJsaWNlbnNlXCIsXCJkaXBcIl19LG8uZGRuPXtoYW5kbGVOb3JtYWxpemVkSW1hZ2VSZXN1bHRJdGVtOmZ1bmN0aW9uKGkpe2xldCBkPWksbz1lKGQuaW1hZ2VEYXRhKTtkLnRvQ2FudmFzPSgpPT50KG8pLGQudG9JbWFnZT1lPT5zKGUsbyksZC50b0Jsb2I9ZT0+bihlLG8pLGQuc2F2ZVRvRmlsZT1hc3luYyhlLHQpPT57aWYoIWUpcmV0dXJuIG51bGw7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZpbGVOYW1lIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcuXCIpO3JldHVybiByKG8sZSx0KX19fTtjb25zdCB5PVwiMS40LjEwXCI7XCJzdHJpbmdcIiE9dHlwZW9mIGkuc3RkJiZhKGkuc3RkLnZlcnNpb24seSk8MCYmKGkuc3RkPXt2ZXJzaW9uOnkscGF0aDpoKGcrYC4uLy4uL2R5bmFtc29mdC1jYXB0dXJlLXZpc2lvbi1zdGRAJHt5fS9kaXN0L2ApfSk7Y29uc3QgST1cIjIuNC4yMFwiOyghaS5kaXB8fFwic3RyaW5nXCIhPXR5cGVvZiBpLmRpcCYmYShpLmRpcC52ZXJzaW9uLEkpPDApJiYoaS5kaXA9e3ZlcnNpb246SSxwYXRoOmgoZytgLi4vLi4vZHluYW1zb2Z0LWltYWdlLXByb2Nlc3NpbmdAJHtJfS9kaXN0L2ApfSk7Y2xhc3MgQ3tzdGF0aWMgZ2V0VmVyc2lvbigpe2NvbnN0IGU9Yy5kZG4mJmMuZGRuLndhc20sdD1jLmRkbiYmYy5kZG4ud29ya2VyO3JldHVybmAyLjQuMjAoV29ya2VyOiAke3R8fFwiTm90IExvYWRlZFwifSwgV2FzbTogJHtlfHxcIk5vdCBMb2FkZWRcIn0pYH1hc3luYyBzZXRUaHJlc2hvbGRWYWx1ZShlLHQscyxuKXtyZXR1cm4gYXdhaXQgbChcImRkblwiKSxhd2FpdCBuZXcgUHJvbWlzZSgoKHIsaSk9PntsZXQgZD11KCk7ZltkXT1hc3luYyBlPT57aWYoZS5zdWNjZXNzKXJldHVybiByKCk7e2xldCB0PW5ldyBFcnJvcihlLm1lc3NhZ2UpO3JldHVybiB0LnN0YWNrPWUuc3RhY2srXCJcXG5cIit0LnN0YWNrLGkodCl9fSxtLnBvc3RNZXNzYWdlKHt0eXBlOlwiZGRuX3NldFRocmVzaG9sZFZhbHVlXCIsaWQ6ZCxpbnN0YW5jZUlEOmUuX2luc3RhbmNlSUQsYm9keTp7dGhyZXNob2xkOnQsbGVmdExpbWl0OnMscmlnaHRMaW1pdDpufX0pfSkpfX12YXIgdjshZnVuY3Rpb24oZSl7ZVtlLklDTV9DT0xPVVI9MF09XCJJQ01fQ09MT1VSXCIsZVtlLklDTV9HUkFZU0NBTEU9MV09XCJJQ01fR1JBWVNDQUxFXCIsZVtlLklDTV9CSU5BUlk9Ml09XCJJQ01fQklOQVJZXCJ9KHZ8fCh2PXt9KSk7ZXhwb3J0e0MgYXMgRG9jdW1lbnROb3JtYWxpemVyTW9kdWxlLHYgYXMgRW51bUltYWdlQ29sb3VyTW9kZX07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/dynamsoft-document-normalizer/dist/ddn.esm.js\n"));

/***/ }),

/***/ "(app-pages-browser)/./node_modules/dynamsoft-license/dist/license.esm.js":
/*!************************************************************!*\
  !*** ./node_modules/dynamsoft-license/dist/license.esm.js ***!
  \************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LicenseManager: function() { return /* binding */ D; },\n/* harmony export */   LicenseModule: function() { return /* binding */ R; }\n/* harmony export */ });\n/* harmony import */ var dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dynamsoft-core */ \"(app-pages-browser)/./node_modules/dynamsoft-core/dist/core.esm.js\");\n/*!\n * Dynamsoft JavaScript Library\n * @product Dynamsoft License JS Edition\n * @website https://www.dynamsoft.com\n * @copyright Copyright 2024, Dynamsoft Corporation\n * @author Dynamsoft\n * @version 3.4.21\n * @fileoverview Dynamsoft JavaScript Library for Core\n * More info DL JS: https://www.dynamsoft.com/capture-vision/docs/web/programming/javascript/api-reference/license/license-module.html\n */\nconst m=\"undefined\"==typeof self,p=m?{}:self,v=(()=>{if(!m&&document.currentScript){let e=document.currentScript.src,t=e.indexOf(\"?\");if(-1!=t)e=e.substring(0,t);else{let t=e.indexOf(\"#\");-1!=t&&(e=e.substring(0,t))}return e.substring(0,e.lastIndexOf(\"/\")+1)}return\"./\"})(),y=e=>{if(null==e&&(e=\"./\"),m);else{let t=document.createElement(\"a\");t.href=e,e=t.href}return e.endsWith(\"/\")||(e+=\"/\"),e},w=e=>e&&\"object\"==typeof e&&\"function\"==typeof e.then;class b extends Promise{get status(){return this._s}get isPending(){return\"pending\"===this._s}get isFulfilled(){return\"fulfilled\"===this._s}get isRejected(){return\"rejected\"===this._s}get task(){return this._task}set task(e){let t;this._task=e,w(e)?t=e:\"function\"==typeof e&&(t=new Promise(e)),t&&(async()=>{try{const s=await t;e===this._task&&this.resolve(s)}catch(t){e===this._task&&this.reject(t)}})()}get isEmpty(){return null==this._task}constructor(e){let t,s;super(((e,r)=>{t=e,s=r})),this._s=\"pending\",this.resolve=e=>{this.isPending&&(w(e)?this.task=e:(this._s=\"fulfilled\",t(e)))},this.reject=e=>{this.isPending&&(this._s=\"rejected\",s(e))},this.task=e}}const S=\" is not allowed to change after `createInstance` or `loadWasm` is called.\",_=!m&&document.currentScript&&(document.currentScript.getAttribute(\"data-license\")||document.currentScript.getAttribute(\"data-productKeys\")||document.currentScript.getAttribute(\"data-licenseKey\")||document.currentScript.getAttribute(\"data-handshakeCode\")||document.currentScript.getAttribute(\"data-organizationID\"))||\"\",k=(e,t)=>{const s=e;if(s._license!==t){if(!s._pLoad.isEmpty)throw new Error(\"`license`\"+S);s._license=t}};!m&&document.currentScript&&document.currentScript.getAttribute(\"data-sessionPassword\");const E=e=>{if(null==e)e=[];else{e=e instanceof Array?[...e]:[e];for(let t=0;t<e.length;++t){if(!m){let s=document.createElement(\"a\");s.href=e[t],e[t]=s.href}e[t].endsWith(\"/\")||(e[t]+=\"/\")}}return e},L=(e,t)=>{t=E(t);const s=e;if(s._licenseServer!==t){if(!s._pLoad.isEmpty)throw new Error(\"`licenseServer`\"+S);s._licenseServer=t}},O=(e,t)=>{t=t||\"\";const s=e;if(s._deviceFriendlyName!==t){if(!s._pLoad.isEmpty)throw new Error(\"`deviceFriendlyName`\"+S);s._deviceFriendlyName=t}};let C,x,N,P,W;\"undefined\"!=typeof navigator&&(C=navigator,x=C.userAgent,N=C.platform,P=C.mediaDevices),function(){if(!m){const e={Edge:{search:\"Edg\",verSearch:\"Edg\"},OPR:null,Chrome:null,Safari:{str:C.vendor,search:\"Apple\",verSearch:[\"Version\",\"iPhone OS\",\"CPU OS\"]},Firefox:null,Explorer:{search:\"MSIE\",verSearch:\"MSIE\"}},t={HarmonyOS:null,Android:null,iPhone:null,iPad:null,Windows:{str:N,search:\"Win\"},Mac:{str:N},Linux:{str:N}};let s=\"unknownBrowser\",r=0,i=\"unknownOS\";for(let t in e){const i=e[t]||{};let n=i.str||x,o=i.search||t,a=i.verStr||x,l=i.verSearch||t;if(l instanceof Array||(l=[l]),-1!=n.indexOf(o)){s=t;for(let e of l){let t=a.indexOf(e);if(-1!=t){r=parseFloat(a.substring(t+e.length+1));break}}break}}for(let e in t){const s=t[e]||{};let r=s.str||x,n=s.search||e;if(-1!=r.indexOf(n)){i=e;break}}\"Linux\"==i&&-1!=x.indexOf(\"Windows NT\")&&(i=\"HarmonyOS\"),W={browser:s,version:r,OS:i}}m&&(W={browser:\"ssr\",version:0,OS:\"ssr\"})}(),P&&P.getUserMedia,\"Chrome\"===W.browser&&W.version>66||\"Safari\"===W.browser&&W.version>13||\"OPR\"===W.browser&&W.version>43||\"Edge\"===W.browser&&W.version;const A=()=>((0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)(\"license\"),(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.doOrWaitAsyncDependency)(\"dynamsoft_inited\",(async()=>{let{lt:e,l:t,ls:s,sp:u,rmk:f,cv:h}=((e,t=!1)=>{const s=e;if(s._pLoad.isEmpty){let e,r,i,n=s._license||\"\",o=JSON.parse(JSON.stringify(s._licenseServer)),a=s._sessionPassword,l=0;if(n.startsWith(\"t\")||n.startsWith(\"f\"))l=0;else if(0===n.length||n.startsWith(\"P\")||n.startsWith(\"L\")||n.startsWith(\"Y\")||n.startsWith(\"A\"))l=1;else{l=2;const t=n.indexOf(\":\");-1!=t&&(n=n.substring(t+1));const s=n.indexOf(\"?\");if(-1!=s&&(r=n.substring(s+1),n=n.substring(0,s)),n.startsWith(\"DLC2\"))l=0;else{if(n.startsWith(\"DLS2\")){let t;try{let e=n.substring(4);e=atob(e),t=JSON.parse(e)}catch(e){throw new Error(\"Format Error: The license string you specified is invalid, please check to make sure it is correct.\")}if(n=t.handshakeCode?t.handshakeCode:t.organizationID?t.organizationID:\"\",\"number\"==typeof n&&(n=JSON.stringify(n)),0===o.length){let e=[];t.mainServerURL&&(e[0]=t.mainServerURL),t.standbyServerURL&&(e[1]=t.standbyServerURL),o=E(e)}!a&&t.sessionPassword&&(a=t.sessionPassword),e=t.remark}n&&\"200001\"!==n&&!n.startsWith(\"200001-\")||(l=1)}}if(l&&(t||(p.crypto||(i=\"Please upgrade your browser to support online key.\"),p.crypto.subtle||(i=\"Require https to use online key in this browser.\"))),i){if(1!==l)throw new Error(i);l=0,console.warn(i),s._lastErrorCode=-1,s._lastErrorString=i}return 1===l&&(n=\"\",console.warn(\"Applying for a public trial license ...\")),{lt:l,l:n,ls:o,sp:a,rmk:e,cv:r}}throw new Error(\"Can't preprocess license again\"+S)})(D),g=new b;D._pLoad.task=g,(async()=>{try{await D._pLoad}catch(e){}})();let m=(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[m]=t=>{if(t.message&&D._onAuthMessage){let e=D._onAuthMessage(t.message);null!=e&&(t.message=e)}let s,r=!1;if(1===e&&(r=!0),t.success?(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.onLog&&(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.onLog)(\"init license success\"),t.message&&console.warn(t.message),dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule._bSupportIRTModule=t.bSupportIRTModule,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule._bSupportDce4Module=t.bSupportDce4Module,D.bPassValidation=!0,[0,-10076].includes(t.initLicenseInfo.errorCode)?[-10076].includes(t.initLicenseInfo.errorCode)&&console.warn(t.initLicenseInfo.errorString):g.reject(new Error(t.initLicenseInfo.errorString))):(s=Error(t.message),t.stack&&(s.stack=t.stack),t.ltsErrorCode&&(s.ltsErrorCode=t.ltsErrorCode),r||111==t.ltsErrorCode&&-1!=t.message.toLowerCase().indexOf(\"trial license\")&&(r=!0)),r){const e=(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.handleEngineResourcePaths)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.CoreModule.engineResourcePaths,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths);(async(e,t,s)=>{if(!e._bNeverShowDialog)try{let r=await fetch(e.engineResourcePath+\"dls.license.dialog.html\");if(!r.ok)throw Error(\"Get license dialog fail. Network Error: \"+r.statusText);let i=await r.text();if(!i.trim().startsWith(\"<\"))throw Error(\"Get license dialog fail. Can't get valid HTMLElement.\");let n=document.createElement(\"div\");n.innerHTML=i;let o=[];for(let e=0;e<n.childElementCount;++e){let t=n.children[e];t instanceof HTMLStyleElement&&(o.push(t),document.head.append(t))}let a=1==n.childElementCount?n.children[0]:n;a.remove();let l,c,d,u,f,h=[a],g=a.children;for(let e of g)h.push(e);for(let e=0;e<h.length;++e)for(let t of h[e].children)h.push(t);for(let e of h)if(!l&&e.classList.contains(\"dls-license-mask\"))l=e,e.addEventListener(\"click\",(t=>{if(e==t.target){a.remove();for(let e of o)e.remove()}}));else if(!c&&e.classList.contains(\"dls-license-icon-close\"))c=e,e.addEventListener(\"click\",(()=>{a.remove();for(let e of o)e.remove()}));else if(!d&&e.classList.contains(\"dls-license-icon-error\"))d=e,\"error\"!=t&&e.remove();else if(!u&&e.classList.contains(\"dls-license-icon-warn\"))u=e,\"warn\"!=t&&e.remove();else if(!f&&e.classList.contains(\"dls-license-msg-content\")){f=e;let t=s;for(;t;){let s=t.indexOf(\"[\"),r=t.indexOf(\"]\",s),i=t.indexOf(\"(\",r),n=t.indexOf(\")\",i);if(-1==s||-1==r||-1==i||-1==n){e.appendChild(new Text(t));break}s>0&&e.appendChild(new Text(t.substring(0,s)));let o=document.createElement(\"a\"),a=t.substring(s+1,r);o.innerText=a;let l=t.substring(i+1,n);o.setAttribute(\"href\",l),o.setAttribute(\"target\",\"_blank\"),e.appendChild(o),t=t.substring(n+1)}}document.body.appendChild(a)}catch(t){e._onLog&&e._onLog(t.message||t)}})({_bNeverShowDialog:D._bNeverShowDialog,engineResourcePath:e.license,_onLog:dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.onLog},t.success?\"warn\":\"error\",t.message)}t.success?g.resolve(void 0):g.reject(s)},await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.waitAsyncDependency)(\"core\"),dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({type:\"license_dynamsoft\",body:{v:\"3.4.21\",brtk:!!e,bptk:1===e,l:t,os:W,fn:D.deviceFriendlyName,ls:s,sp:u,rmk:f,cv:h},id:m}),D.bCallInitLicense=!0,await g})));let I;dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license={},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license.dynamsoft=A,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license.getAR=async()=>{{let e=dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapAsyncDependency.dynamsoft_inited;e&&e.isRejected&&await e}return dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker?new Promise(((e,t)=>{let s=(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[s]=async s=>{if(s.success){delete s.success;{let e=D.license;e&&(e.startsWith(\"t\")||e.startsWith(\"f\"))&&(s.pk=e)}if(Object.keys(s).length){if(s.lem){let e=Error(s.lem);e.ltsErrorCode=s.lec,delete s.lem,delete s.lec,s.ae=e}e(s)}else e(null)}else{let e=Error(s.message);s.stack&&(e.stack=s.stack),t(e)}},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({type:\"license_getAR\",id:s})})):null};class D{static setLicenseServer(e){L(D,e)}static get license(){return this._license}static set license(e){k(D,e)}static get licenseServer(){return this._licenseServer}static set licenseServer(e){L(D,e)}static get deviceFriendlyName(){return this._deviceFriendlyName}static set deviceFriendlyName(e){O(D,e)}static initLicense(e,t){if(k(D,e),D.bCallInitLicense=!0,\"boolean\"==typeof t&&t||\"object\"==typeof t&&t.executeNow)return A()}static setDeviceFriendlyName(e){O(D,e)}static getDeviceFriendlyName(){return D._deviceFriendlyName}static getDeviceUUID(){return(async()=>(await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.doOrWaitAsyncDependency)(\"dynamsoft_uuid\",(async()=>{await (0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.loadWasm)();let e=new b,s=(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.getNextTaskID)();dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapTaskCallBack[s]=t=>{if(t.success)e.resolve(t.uuid);else{const s=Error(t.message);t.stack&&(s.stack=t.stack),e.reject(s)}},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.worker.postMessage({type:\"license_getDeviceUUID\",id:s}),I=await e})),I))()}}D._pLoad=new b,D.bPassValidation=!1,D.bCallInitLicense=!1,D._license=_,D._licenseServer=[],D._deviceFriendlyName=\"\",dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.license={version:\"3.4.21\",path:v},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.workerAutoResources.license={wasm:!0,js:!0},dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.mapPackageRegister.license.LicenseManager=D;const M=\"1.4.10\";\"string\"!=typeof dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std&&(0,dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.compareVersion)(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std.version,M)<0&&(dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.autoDiscoveryPaths.std={version:M,path:y(v+`../../dynamsoft-capture-vision-std@${M}/dist/`)});class R{static getVersion(){return`3.4.21(Worker: ${dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.license&&dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.license.worker||\"Not Loaded\"}, Wasm: ${dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.license&&dynamsoft_core__WEBPACK_IMPORTED_MODULE_0__.innerVersions.license.wasm||\"Not Loaded\"})`}}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL25vZGVfbW9kdWxlcy9keW5hbXNvZnQtbGljZW5zZS9kaXN0L2xpY2Vuc2UuZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ3NWLHVDQUF1QyxjQUFjLCtCQUErQixrREFBa0QsNEJBQTRCLEtBQUsscUJBQXFCLDRCQUE0QiwyQ0FBMkMsV0FBVyxVQUFVLHdCQUF3QixLQUFLLGtDQUFrQyxrQkFBa0IsbUNBQW1DLHVEQUF1RCx3QkFBd0IsYUFBYSxlQUFlLGdCQUFnQiwwQkFBMEIsa0JBQWtCLDRCQUE0QixpQkFBaUIsMkJBQTJCLFdBQVcsa0JBQWtCLFlBQVksTUFBTSw2RUFBNkUsSUFBSSxnQkFBZ0IsZ0NBQWdDLFNBQVMsZ0NBQWdDLElBQUksY0FBYyx3QkFBd0IsZUFBZSxRQUFRLGVBQWUsUUFBUSxzQ0FBc0MsOERBQThELGlCQUFpQiwwQ0FBMEMsY0FBYyw4WkFBOFosVUFBVSxtQkFBbUIsb0RBQW9ELGVBQWUsd0ZBQXdGLFlBQVksZ0JBQWdCLEtBQUssZ0NBQWdDLFlBQVksV0FBVyxLQUFLLE9BQU8sa0NBQWtDLHdCQUF3QixpQ0FBaUMsU0FBUyxXQUFXLE9BQU8sVUFBVSx5QkFBeUIsMERBQTBELG9CQUFvQixXQUFXLFFBQVEsVUFBVSw4QkFBOEIsK0RBQStELDBCQUEwQixjQUFjLG9HQUFvRyxPQUFPLFNBQVMsTUFBTSw2QkFBNkIsOEJBQThCLHVFQUF1RSx3QkFBd0IsZ0NBQWdDLElBQUksMkRBQTJELG1CQUFtQixNQUFNLE1BQU0sUUFBUSxRQUFRLHlDQUF5QyxnQkFBZ0IsaUJBQWlCLDREQUE0RCxpREFBaUQsSUFBSSxnQkFBZ0IsbUJBQW1CLFVBQVUsd0NBQXdDLE9BQU8sT0FBTyxnQkFBZ0IsaUJBQWlCLDZCQUE2QixxQkFBcUIsSUFBSSxPQUFPLDREQUE0RCwwQkFBMEIsT0FBTyxpQ0FBaUMsRUFBRSw0SkFBNEosYUFBYSx3REFBQyxZQUFZLHVFQUFDLCtCQUErQixJQUFJLDhCQUE4QixhQUFhLFVBQVUscUJBQXFCLG1HQUFtRyw0Q0FBNEMscUdBQXFHLEtBQUssSUFBSSx1QkFBdUIsNEJBQTRCLHVCQUF1QiwyRUFBMkUsS0FBSyx5QkFBeUIsTUFBTSxJQUFJLHFCQUFxQiwwQkFBMEIsU0FBUyx1SEFBdUgsa0lBQWtJLFNBQVMsNkZBQTZGLHdEQUF3RCxrREFBa0QsMkpBQTJKLDRCQUE0Qiw2REFBNkQsOEVBQThFLCtCQUErQixvREFBb0QsYUFBYSwyQkFBMkIsSUFBSSxlQUFlLFdBQVcsSUFBSSxNQUFNLDZEQUFDLEdBQUcsMkRBQUMsUUFBUSxnQ0FBZ0Msa0NBQWtDLHVCQUF1QixXQUFXLDRCQUE0QixpREFBQyxFQUFFLHFEQUFDLDREQUE0RCxzREFBQyx3Q0FBd0Msc0RBQUMsd2JBQXdiLFFBQVEseUVBQUMsQ0FBQyxzREFBQyxxQkFBcUIsOERBQUMsRUFBRSxnQkFBZ0IsNEJBQTRCLGtFQUFrRSw4RUFBOEUscUJBQXFCLGtHQUFrRyxvQ0FBb0MsY0FBYyxTQUFTLFlBQVksc0JBQXNCLEtBQUssb0JBQW9CLG1FQUFtRSw2Q0FBNkMsV0FBVyxpQ0FBaUMseUJBQXlCLFlBQVksV0FBVyx5Q0FBeUMsbUdBQW1HLGdCQUFnQixXQUFXLDJCQUEyQixHQUFHLGdHQUFnRyxXQUFXLDBCQUEwQixHQUFHLHNGQUFzRixvRkFBb0YsNkRBQTZELElBQUksUUFBUSxLQUFLLEVBQUUsRUFBRSw4RUFBOEUsK0JBQStCLDJCQUEyQixNQUFNLCtDQUErQyx1REFBdUQsY0FBYyx5QkFBeUIsZ0dBQWdHLDZCQUE2QixTQUFTLGtDQUFrQyxHQUFHLDBFQUEwRSxpREFBQyxDQUFDLHFDQUFxQyx3Q0FBd0MsT0FBTyxtRUFBQyxTQUFTLGtEQUFDLGNBQWMsK0JBQStCLHFGQUFxRixNQUFNLGdDQUFnQyxJQUFJLE1BQU0sOERBQUMsV0FBVyxDQUFDLDhEQUFDLHFCQUFxQiw4REFBQywwQkFBMEIsTUFBTSw4REFBQyxrQkFBa0IseUJBQXlCLE9BQU8sa0RBQUMsc0JBQXNCLE1BQU0sNkRBQUMsR0FBRywyREFBQyxjQUFjLGNBQWMsa0JBQWtCLGdCQUFnQixvREFBb0QsMEJBQTBCLFVBQVUsbUJBQW1CLHNEQUFzRCxLQUFLLGFBQWEsS0FBSyx1QkFBdUIsaUNBQWlDLENBQUMsa0RBQUMsY0FBYywwQkFBMEIsRUFBRSxTQUFTLFFBQVEsMkJBQTJCLE9BQU8scUJBQXFCLHFCQUFxQixzQkFBc0IsT0FBTywyQkFBMkIsMkJBQTJCLDRCQUE0QixPQUFPLGdDQUFnQyxnQ0FBZ0MsaUNBQWlDLE9BQU8sd0JBQXdCLG9HQUFvRyxnQ0FBZ0MsT0FBTywrQkFBK0IsNkJBQTZCLHVCQUF1Qix1QkFBdUIsdUVBQUMsNkJBQTZCLE1BQU0sd0RBQUMsR0FBRyxjQUFjLDZEQUFDLEdBQUcsMkRBQUMsUUFBUSwrQkFBK0IsS0FBSyx5QkFBeUIsd0NBQXdDLENBQUMsa0RBQUMsY0FBYyxrQ0FBa0MsWUFBWSxVQUFVLG9IQUFvSCw4REFBQyxVQUFVLHdCQUF3QixDQUFDLCtEQUFDLFVBQVUsY0FBYyxDQUFDLDhEQUFDLDBCQUEwQixpQkFBaUIsaUJBQWlCLDhEQUFDLE1BQU0sOERBQUMsQ0FBQyw4REFBQyxvQkFBb0IsOERBQUMsTUFBTSx5REFBeUQsRUFBRSxTQUFTLEVBQUUsUUFBUSxvQkFBb0Isd0JBQXdCLHlEQUFDLFVBQVUseURBQUMsOEJBQThCLFVBQVUseURBQUMsVUFBVSx5REFBQyw0QkFBNEIsSUFBbUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbm9kZV9tb2R1bGVzL2R5bmFtc29mdC1saWNlbnNlL2Rpc3QvbGljZW5zZS5lc20uanM/M2M0ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIER5bmFtc29mdCBKYXZhU2NyaXB0IExpYnJhcnlcbiAqIEBwcm9kdWN0IER5bmFtc29mdCBMaWNlbnNlIEpTIEVkaXRpb25cbiAqIEB3ZWJzaXRlIGh0dHBzOi8vd3d3LmR5bmFtc29mdC5jb21cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IDIwMjQsIER5bmFtc29mdCBDb3Jwb3JhdGlvblxuICogQGF1dGhvciBEeW5hbXNvZnRcbiAqIEB2ZXJzaW9uIDMuNC4yMVxuICogQGZpbGVvdmVydmlldyBEeW5hbXNvZnQgSmF2YVNjcmlwdCBMaWJyYXJ5IGZvciBDb3JlXG4gKiBNb3JlIGluZm8gREwgSlM6IGh0dHBzOi8vd3d3LmR5bmFtc29mdC5jb20vY2FwdHVyZS12aXNpb24vZG9jcy93ZWIvcHJvZ3JhbW1pbmcvamF2YXNjcmlwdC9hcGktcmVmZXJlbmNlL2xpY2Vuc2UvbGljZW5zZS1tb2R1bGUuaHRtbFxuICovXG5pbXBvcnR7bWFwUGFja2FnZVJlZ2lzdGVyIGFzIGUsbG9hZFdhc20gYXMgdCxkb09yV2FpdEFzeW5jRGVwZW5kZW5jeSBhcyBzLGdldE5leHRUYXNrSUQgYXMgcixtYXBUYXNrQ2FsbEJhY2sgYXMgaSxvbkxvZyBhcyBuLENvcmVNb2R1bGUgYXMgbyxoYW5kbGVFbmdpbmVSZXNvdXJjZVBhdGhzIGFzIGEsYXV0b0Rpc2NvdmVyeVBhdGhzIGFzIGwsd2FpdEFzeW5jRGVwZW5kZW5jeSBhcyBjLHdvcmtlciBhcyBkLG1hcEFzeW5jRGVwZW5kZW5jeSBhcyB1LHdvcmtlckF1dG9SZXNvdXJjZXMgYXMgZixjb21wYXJlVmVyc2lvbiBhcyBoLGlubmVyVmVyc2lvbnMgYXMgZ31mcm9tXCJkeW5hbXNvZnQtY29yZVwiO2NvbnN0IG09XCJ1bmRlZmluZWRcIj09dHlwZW9mIHNlbGYscD1tP3t9OnNlbGYsdj0oKCk9PntpZighbSYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCl7bGV0IGU9ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmMsdD1lLmluZGV4T2YoXCI/XCIpO2lmKC0xIT10KWU9ZS5zdWJzdHJpbmcoMCx0KTtlbHNle2xldCB0PWUuaW5kZXhPZihcIiNcIik7LTEhPXQmJihlPWUuc3Vic3RyaW5nKDAsdCkpfXJldHVybiBlLnN1YnN0cmluZygwLGUubGFzdEluZGV4T2YoXCIvXCIpKzEpfXJldHVyblwiLi9cIn0pKCkseT1lPT57aWYobnVsbD09ZSYmKGU9XCIuL1wiKSxtKTtlbHNle2xldCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3QuaHJlZj1lLGU9dC5ocmVmfXJldHVybiBlLmVuZHNXaXRoKFwiL1wiKXx8KGUrPVwiL1wiKSxlfSx3PWU9PmUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLnRoZW47Y2xhc3MgYiBleHRlbmRzIFByb21pc2V7Z2V0IHN0YXR1cygpe3JldHVybiB0aGlzLl9zfWdldCBpc1BlbmRpbmcoKXtyZXR1cm5cInBlbmRpbmdcIj09PXRoaXMuX3N9Z2V0IGlzRnVsZmlsbGVkKCl7cmV0dXJuXCJmdWxmaWxsZWRcIj09PXRoaXMuX3N9Z2V0IGlzUmVqZWN0ZWQoKXtyZXR1cm5cInJlamVjdGVkXCI9PT10aGlzLl9zfWdldCB0YXNrKCl7cmV0dXJuIHRoaXMuX3Rhc2t9c2V0IHRhc2soZSl7bGV0IHQ7dGhpcy5fdGFzaz1lLHcoZSk/dD1lOlwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJih0PW5ldyBQcm9taXNlKGUpKSx0JiYoYXN5bmMoKT0+e3RyeXtjb25zdCBzPWF3YWl0IHQ7ZT09PXRoaXMuX3Rhc2smJnRoaXMucmVzb2x2ZShzKX1jYXRjaCh0KXtlPT09dGhpcy5fdGFzayYmdGhpcy5yZWplY3QodCl9fSkoKX1nZXQgaXNFbXB0eSgpe3JldHVybiBudWxsPT10aGlzLl90YXNrfWNvbnN0cnVjdG9yKGUpe2xldCB0LHM7c3VwZXIoKChlLHIpPT57dD1lLHM9cn0pKSx0aGlzLl9zPVwicGVuZGluZ1wiLHRoaXMucmVzb2x2ZT1lPT57dGhpcy5pc1BlbmRpbmcmJih3KGUpP3RoaXMudGFzaz1lOih0aGlzLl9zPVwiZnVsZmlsbGVkXCIsdChlKSkpfSx0aGlzLnJlamVjdD1lPT57dGhpcy5pc1BlbmRpbmcmJih0aGlzLl9zPVwicmVqZWN0ZWRcIixzKGUpKX0sdGhpcy50YXNrPWV9fWNvbnN0IFM9XCIgaXMgbm90IGFsbG93ZWQgdG8gY2hhbmdlIGFmdGVyIGBjcmVhdGVJbnN0YW5jZWAgb3IgYGxvYWRXYXNtYCBpcyBjYWxsZWQuXCIsXz0hbSYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCYmKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuZ2V0QXR0cmlidXRlKFwiZGF0YS1saWNlbnNlXCIpfHxkb2N1bWVudC5jdXJyZW50U2NyaXB0LmdldEF0dHJpYnV0ZShcImRhdGEtcHJvZHVjdEtleXNcIil8fGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuZ2V0QXR0cmlidXRlKFwiZGF0YS1saWNlbnNlS2V5XCIpfHxkb2N1bWVudC5jdXJyZW50U2NyaXB0LmdldEF0dHJpYnV0ZShcImRhdGEtaGFuZHNoYWtlQ29kZVwiKXx8ZG9jdW1lbnQuY3VycmVudFNjcmlwdC5nZXRBdHRyaWJ1dGUoXCJkYXRhLW9yZ2FuaXphdGlvbklEXCIpKXx8XCJcIixrPShlLHQpPT57Y29uc3Qgcz1lO2lmKHMuX2xpY2Vuc2UhPT10KXtpZighcy5fcExvYWQuaXNFbXB0eSl0aHJvdyBuZXcgRXJyb3IoXCJgbGljZW5zZWBcIitTKTtzLl9saWNlbnNlPXR9fTshbSYmZG9jdW1lbnQuY3VycmVudFNjcmlwdCYmZG9jdW1lbnQuY3VycmVudFNjcmlwdC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNlc3Npb25QYXNzd29yZFwiKTtjb25zdCBFPWU9PntpZihudWxsPT1lKWU9W107ZWxzZXtlPWUgaW5zdGFuY2VvZiBBcnJheT9bLi4uZV06W2VdO2ZvcihsZXQgdD0wO3Q8ZS5sZW5ndGg7Kyt0KXtpZighbSl7bGV0IHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIik7cy5ocmVmPWVbdF0sZVt0XT1zLmhyZWZ9ZVt0XS5lbmRzV2l0aChcIi9cIil8fChlW3RdKz1cIi9cIil9fXJldHVybiBlfSxMPShlLHQpPT57dD1FKHQpO2NvbnN0IHM9ZTtpZihzLl9saWNlbnNlU2VydmVyIT09dCl7aWYoIXMuX3BMb2FkLmlzRW1wdHkpdGhyb3cgbmV3IEVycm9yKFwiYGxpY2Vuc2VTZXJ2ZXJgXCIrUyk7cy5fbGljZW5zZVNlcnZlcj10fX0sTz0oZSx0KT0+e3Q9dHx8XCJcIjtjb25zdCBzPWU7aWYocy5fZGV2aWNlRnJpZW5kbHlOYW1lIT09dCl7aWYoIXMuX3BMb2FkLmlzRW1wdHkpdGhyb3cgbmV3IEVycm9yKFwiYGRldmljZUZyaWVuZGx5TmFtZWBcIitTKTtzLl9kZXZpY2VGcmllbmRseU5hbWU9dH19O2xldCBDLHgsTixQLFc7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG5hdmlnYXRvciYmKEM9bmF2aWdhdG9yLHg9Qy51c2VyQWdlbnQsTj1DLnBsYXRmb3JtLFA9Qy5tZWRpYURldmljZXMpLGZ1bmN0aW9uKCl7aWYoIW0pe2NvbnN0IGU9e0VkZ2U6e3NlYXJjaDpcIkVkZ1wiLHZlclNlYXJjaDpcIkVkZ1wifSxPUFI6bnVsbCxDaHJvbWU6bnVsbCxTYWZhcmk6e3N0cjpDLnZlbmRvcixzZWFyY2g6XCJBcHBsZVwiLHZlclNlYXJjaDpbXCJWZXJzaW9uXCIsXCJpUGhvbmUgT1NcIixcIkNQVSBPU1wiXX0sRmlyZWZveDpudWxsLEV4cGxvcmVyOntzZWFyY2g6XCJNU0lFXCIsdmVyU2VhcmNoOlwiTVNJRVwifX0sdD17SGFybW9ueU9TOm51bGwsQW5kcm9pZDpudWxsLGlQaG9uZTpudWxsLGlQYWQ6bnVsbCxXaW5kb3dzOntzdHI6TixzZWFyY2g6XCJXaW5cIn0sTWFjOntzdHI6Tn0sTGludXg6e3N0cjpOfX07bGV0IHM9XCJ1bmtub3duQnJvd3NlclwiLHI9MCxpPVwidW5rbm93bk9TXCI7Zm9yKGxldCB0IGluIGUpe2NvbnN0IGk9ZVt0XXx8e307bGV0IG49aS5zdHJ8fHgsbz1pLnNlYXJjaHx8dCxhPWkudmVyU3RyfHx4LGw9aS52ZXJTZWFyY2h8fHQ7aWYobCBpbnN0YW5jZW9mIEFycmF5fHwobD1bbF0pLC0xIT1uLmluZGV4T2Yobykpe3M9dDtmb3IobGV0IGUgb2YgbCl7bGV0IHQ9YS5pbmRleE9mKGUpO2lmKC0xIT10KXtyPXBhcnNlRmxvYXQoYS5zdWJzdHJpbmcodCtlLmxlbmd0aCsxKSk7YnJlYWt9fWJyZWFrfX1mb3IobGV0IGUgaW4gdCl7Y29uc3Qgcz10W2VdfHx7fTtsZXQgcj1zLnN0cnx8eCxuPXMuc2VhcmNofHxlO2lmKC0xIT1yLmluZGV4T2Yobikpe2k9ZTticmVha319XCJMaW51eFwiPT1pJiYtMSE9eC5pbmRleE9mKFwiV2luZG93cyBOVFwiKSYmKGk9XCJIYXJtb255T1NcIiksVz17YnJvd3NlcjpzLHZlcnNpb246cixPUzppfX1tJiYoVz17YnJvd3NlcjpcInNzclwiLHZlcnNpb246MCxPUzpcInNzclwifSl9KCksUCYmUC5nZXRVc2VyTWVkaWEsXCJDaHJvbWVcIj09PVcuYnJvd3NlciYmVy52ZXJzaW9uPjY2fHxcIlNhZmFyaVwiPT09Vy5icm93c2VyJiZXLnZlcnNpb24+MTN8fFwiT1BSXCI9PT1XLmJyb3dzZXImJlcudmVyc2lvbj40M3x8XCJFZGdlXCI9PT1XLmJyb3dzZXImJlcudmVyc2lvbjtjb25zdCBBPSgpPT4odChcImxpY2Vuc2VcIikscyhcImR5bmFtc29mdF9pbml0ZWRcIiwoYXN5bmMoKT0+e2xldHtsdDplLGw6dCxsczpzLHNwOnUscm1rOmYsY3Y6aH09KChlLHQ9ITEpPT57Y29uc3Qgcz1lO2lmKHMuX3BMb2FkLmlzRW1wdHkpe2xldCBlLHIsaSxuPXMuX2xpY2Vuc2V8fFwiXCIsbz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHMuX2xpY2Vuc2VTZXJ2ZXIpKSxhPXMuX3Nlc3Npb25QYXNzd29yZCxsPTA7aWYobi5zdGFydHNXaXRoKFwidFwiKXx8bi5zdGFydHNXaXRoKFwiZlwiKSlsPTA7ZWxzZSBpZigwPT09bi5sZW5ndGh8fG4uc3RhcnRzV2l0aChcIlBcIil8fG4uc3RhcnRzV2l0aChcIkxcIil8fG4uc3RhcnRzV2l0aChcIllcIil8fG4uc3RhcnRzV2l0aChcIkFcIikpbD0xO2Vsc2V7bD0yO2NvbnN0IHQ9bi5pbmRleE9mKFwiOlwiKTstMSE9dCYmKG49bi5zdWJzdHJpbmcodCsxKSk7Y29uc3Qgcz1uLmluZGV4T2YoXCI/XCIpO2lmKC0xIT1zJiYocj1uLnN1YnN0cmluZyhzKzEpLG49bi5zdWJzdHJpbmcoMCxzKSksbi5zdGFydHNXaXRoKFwiRExDMlwiKSlsPTA7ZWxzZXtpZihuLnN0YXJ0c1dpdGgoXCJETFMyXCIpKXtsZXQgdDt0cnl7bGV0IGU9bi5zdWJzdHJpbmcoNCk7ZT1hdG9iKGUpLHQ9SlNPTi5wYXJzZShlKX1jYXRjaChlKXt0aHJvdyBuZXcgRXJyb3IoXCJGb3JtYXQgRXJyb3I6IFRoZSBsaWNlbnNlIHN0cmluZyB5b3Ugc3BlY2lmaWVkIGlzIGludmFsaWQsIHBsZWFzZSBjaGVjayB0byBtYWtlIHN1cmUgaXQgaXMgY29ycmVjdC5cIil9aWYobj10LmhhbmRzaGFrZUNvZGU/dC5oYW5kc2hha2VDb2RlOnQub3JnYW5pemF0aW9uSUQ/dC5vcmdhbml6YXRpb25JRDpcIlwiLFwibnVtYmVyXCI9PXR5cGVvZiBuJiYobj1KU09OLnN0cmluZ2lmeShuKSksMD09PW8ubGVuZ3RoKXtsZXQgZT1bXTt0Lm1haW5TZXJ2ZXJVUkwmJihlWzBdPXQubWFpblNlcnZlclVSTCksdC5zdGFuZGJ5U2VydmVyVVJMJiYoZVsxXT10LnN0YW5kYnlTZXJ2ZXJVUkwpLG89RShlKX0hYSYmdC5zZXNzaW9uUGFzc3dvcmQmJihhPXQuc2Vzc2lvblBhc3N3b3JkKSxlPXQucmVtYXJrfW4mJlwiMjAwMDAxXCIhPT1uJiYhbi5zdGFydHNXaXRoKFwiMjAwMDAxLVwiKXx8KGw9MSl9fWlmKGwmJih0fHwocC5jcnlwdG98fChpPVwiUGxlYXNlIHVwZ3JhZGUgeW91ciBicm93c2VyIHRvIHN1cHBvcnQgb25saW5lIGtleS5cIikscC5jcnlwdG8uc3VidGxlfHwoaT1cIlJlcXVpcmUgaHR0cHMgdG8gdXNlIG9ubGluZSBrZXkgaW4gdGhpcyBicm93c2VyLlwiKSkpLGkpe2lmKDEhPT1sKXRocm93IG5ldyBFcnJvcihpKTtsPTAsY29uc29sZS53YXJuKGkpLHMuX2xhc3RFcnJvckNvZGU9LTEscy5fbGFzdEVycm9yU3RyaW5nPWl9cmV0dXJuIDE9PT1sJiYobj1cIlwiLGNvbnNvbGUud2FybihcIkFwcGx5aW5nIGZvciBhIHB1YmxpYyB0cmlhbCBsaWNlbnNlIC4uLlwiKSkse2x0OmwsbDpuLGxzOm8sc3A6YSxybWs6ZSxjdjpyfX10aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBwcmVwcm9jZXNzIGxpY2Vuc2UgYWdhaW5cIitTKX0pKEQpLGc9bmV3IGI7RC5fcExvYWQudGFzaz1nLChhc3luYygpPT57dHJ5e2F3YWl0IEQuX3BMb2FkfWNhdGNoKGUpe319KSgpO2xldCBtPXIoKTtpW21dPXQ9PntpZih0Lm1lc3NhZ2UmJkQuX29uQXV0aE1lc3NhZ2Upe2xldCBlPUQuX29uQXV0aE1lc3NhZ2UodC5tZXNzYWdlKTtudWxsIT1lJiYodC5tZXNzYWdlPWUpfWxldCBzLHI9ITE7aWYoMT09PWUmJihyPSEwKSx0LnN1Y2Nlc3M/KG4mJm4oXCJpbml0IGxpY2Vuc2Ugc3VjY2Vzc1wiKSx0Lm1lc3NhZ2UmJmNvbnNvbGUud2Fybih0Lm1lc3NhZ2UpLG8uX2JTdXBwb3J0SVJUTW9kdWxlPXQuYlN1cHBvcnRJUlRNb2R1bGUsby5fYlN1cHBvcnREY2U0TW9kdWxlPXQuYlN1cHBvcnREY2U0TW9kdWxlLEQuYlBhc3NWYWxpZGF0aW9uPSEwLFswLC0xMDA3Nl0uaW5jbHVkZXModC5pbml0TGljZW5zZUluZm8uZXJyb3JDb2RlKT9bLTEwMDc2XS5pbmNsdWRlcyh0LmluaXRMaWNlbnNlSW5mby5lcnJvckNvZGUpJiZjb25zb2xlLndhcm4odC5pbml0TGljZW5zZUluZm8uZXJyb3JTdHJpbmcpOmcucmVqZWN0KG5ldyBFcnJvcih0LmluaXRMaWNlbnNlSW5mby5lcnJvclN0cmluZykpKToocz1FcnJvcih0Lm1lc3NhZ2UpLHQuc3RhY2smJihzLnN0YWNrPXQuc3RhY2spLHQubHRzRXJyb3JDb2RlJiYocy5sdHNFcnJvckNvZGU9dC5sdHNFcnJvckNvZGUpLHJ8fDExMT09dC5sdHNFcnJvckNvZGUmJi0xIT10Lm1lc3NhZ2UudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwidHJpYWwgbGljZW5zZVwiKSYmKHI9ITApKSxyKXtjb25zdCBlPWEoby5lbmdpbmVSZXNvdXJjZVBhdGhzLGwpOyhhc3luYyhlLHQscyk9PntpZighZS5fYk5ldmVyU2hvd0RpYWxvZyl0cnl7bGV0IHI9YXdhaXQgZmV0Y2goZS5lbmdpbmVSZXNvdXJjZVBhdGgrXCJkbHMubGljZW5zZS5kaWFsb2cuaHRtbFwiKTtpZighci5vayl0aHJvdyBFcnJvcihcIkdldCBsaWNlbnNlIGRpYWxvZyBmYWlsLiBOZXR3b3JrIEVycm9yOiBcIityLnN0YXR1c1RleHQpO2xldCBpPWF3YWl0IHIudGV4dCgpO2lmKCFpLnRyaW0oKS5zdGFydHNXaXRoKFwiPFwiKSl0aHJvdyBFcnJvcihcIkdldCBsaWNlbnNlIGRpYWxvZyBmYWlsLiBDYW4ndCBnZXQgdmFsaWQgSFRNTEVsZW1lbnQuXCIpO2xldCBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5pbm5lckhUTUw9aTtsZXQgbz1bXTtmb3IobGV0IGU9MDtlPG4uY2hpbGRFbGVtZW50Q291bnQ7KytlKXtsZXQgdD1uLmNoaWxkcmVuW2VdO3QgaW5zdGFuY2VvZiBIVE1MU3R5bGVFbGVtZW50JiYoby5wdXNoKHQpLGRvY3VtZW50LmhlYWQuYXBwZW5kKHQpKX1sZXQgYT0xPT1uLmNoaWxkRWxlbWVudENvdW50P24uY2hpbGRyZW5bMF06bjthLnJlbW92ZSgpO2xldCBsLGMsZCx1LGYsaD1bYV0sZz1hLmNoaWxkcmVuO2ZvcihsZXQgZSBvZiBnKWgucHVzaChlKTtmb3IobGV0IGU9MDtlPGgubGVuZ3RoOysrZSlmb3IobGV0IHQgb2YgaFtlXS5jaGlsZHJlbiloLnB1c2godCk7Zm9yKGxldCBlIG9mIGgpaWYoIWwmJmUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGxzLWxpY2Vuc2UtbWFza1wiKSlsPWUsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwodD0+e2lmKGU9PXQudGFyZ2V0KXthLnJlbW92ZSgpO2ZvcihsZXQgZSBvZiBvKWUucmVtb3ZlKCl9fSkpO2Vsc2UgaWYoIWMmJmUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGxzLWxpY2Vuc2UtaWNvbi1jbG9zZVwiKSljPWUsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwoKCk9PnthLnJlbW92ZSgpO2ZvcihsZXQgZSBvZiBvKWUucmVtb3ZlKCl9KSk7ZWxzZSBpZighZCYmZS5jbGFzc0xpc3QuY29udGFpbnMoXCJkbHMtbGljZW5zZS1pY29uLWVycm9yXCIpKWQ9ZSxcImVycm9yXCIhPXQmJmUucmVtb3ZlKCk7ZWxzZSBpZighdSYmZS5jbGFzc0xpc3QuY29udGFpbnMoXCJkbHMtbGljZW5zZS1pY29uLXdhcm5cIikpdT1lLFwid2FyblwiIT10JiZlLnJlbW92ZSgpO2Vsc2UgaWYoIWYmJmUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGxzLWxpY2Vuc2UtbXNnLWNvbnRlbnRcIikpe2Y9ZTtsZXQgdD1zO2Zvcig7dDspe2xldCBzPXQuaW5kZXhPZihcIltcIikscj10LmluZGV4T2YoXCJdXCIscyksaT10LmluZGV4T2YoXCIoXCIsciksbj10LmluZGV4T2YoXCIpXCIsaSk7aWYoLTE9PXN8fC0xPT1yfHwtMT09aXx8LTE9PW4pe2UuYXBwZW5kQ2hpbGQobmV3IFRleHQodCkpO2JyZWFrfXM+MCYmZS5hcHBlbmRDaGlsZChuZXcgVGV4dCh0LnN1YnN0cmluZygwLHMpKSk7bGV0IG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIiksYT10LnN1YnN0cmluZyhzKzEscik7by5pbm5lclRleHQ9YTtsZXQgbD10LnN1YnN0cmluZyhpKzEsbik7by5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsbCksby5zZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIixcIl9ibGFua1wiKSxlLmFwcGVuZENoaWxkKG8pLHQ9dC5zdWJzdHJpbmcobisxKX19ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChhKX1jYXRjaCh0KXtlLl9vbkxvZyYmZS5fb25Mb2codC5tZXNzYWdlfHx0KX19KSh7X2JOZXZlclNob3dEaWFsb2c6RC5fYk5ldmVyU2hvd0RpYWxvZyxlbmdpbmVSZXNvdXJjZVBhdGg6ZS5saWNlbnNlLF9vbkxvZzpufSx0LnN1Y2Nlc3M/XCJ3YXJuXCI6XCJlcnJvclwiLHQubWVzc2FnZSl9dC5zdWNjZXNzP2cucmVzb2x2ZSh2b2lkIDApOmcucmVqZWN0KHMpfSxhd2FpdCBjKFwiY29yZVwiKSxkLnBvc3RNZXNzYWdlKHt0eXBlOlwibGljZW5zZV9keW5hbXNvZnRcIixib2R5Ont2OlwiMy40LjIxXCIsYnJ0azohIWUsYnB0azoxPT09ZSxsOnQsb3M6VyxmbjpELmRldmljZUZyaWVuZGx5TmFtZSxsczpzLHNwOnUscm1rOmYsY3Y6aH0saWQ6bX0pLEQuYkNhbGxJbml0TGljZW5zZT0hMCxhd2FpdCBnfSkpKTtsZXQgSTtlLmxpY2Vuc2U9e30sZS5saWNlbnNlLmR5bmFtc29mdD1BLGUubGljZW5zZS5nZXRBUj1hc3luYygpPT57e2xldCBlPXUuZHluYW1zb2Z0X2luaXRlZDtlJiZlLmlzUmVqZWN0ZWQmJmF3YWl0IGV9cmV0dXJuIGQ/bmV3IFByb21pc2UoKChlLHQpPT57bGV0IHM9cigpO2lbc109YXN5bmMgcz0+e2lmKHMuc3VjY2Vzcyl7ZGVsZXRlIHMuc3VjY2Vzczt7bGV0IGU9RC5saWNlbnNlO2UmJihlLnN0YXJ0c1dpdGgoXCJ0XCIpfHxlLnN0YXJ0c1dpdGgoXCJmXCIpKSYmKHMucGs9ZSl9aWYoT2JqZWN0LmtleXMocykubGVuZ3RoKXtpZihzLmxlbSl7bGV0IGU9RXJyb3Iocy5sZW0pO2UubHRzRXJyb3JDb2RlPXMubGVjLGRlbGV0ZSBzLmxlbSxkZWxldGUgcy5sZWMscy5hZT1lfWUocyl9ZWxzZSBlKG51bGwpfWVsc2V7bGV0IGU9RXJyb3Iocy5tZXNzYWdlKTtzLnN0YWNrJiYoZS5zdGFjaz1zLnN0YWNrKSx0KGUpfX0sZC5wb3N0TWVzc2FnZSh7dHlwZTpcImxpY2Vuc2VfZ2V0QVJcIixpZDpzfSl9KSk6bnVsbH07Y2xhc3MgRHtzdGF0aWMgc2V0TGljZW5zZVNlcnZlcihlKXtMKEQsZSl9c3RhdGljIGdldCBsaWNlbnNlKCl7cmV0dXJuIHRoaXMuX2xpY2Vuc2V9c3RhdGljIHNldCBsaWNlbnNlKGUpe2soRCxlKX1zdGF0aWMgZ2V0IGxpY2Vuc2VTZXJ2ZXIoKXtyZXR1cm4gdGhpcy5fbGljZW5zZVNlcnZlcn1zdGF0aWMgc2V0IGxpY2Vuc2VTZXJ2ZXIoZSl7TChELGUpfXN0YXRpYyBnZXQgZGV2aWNlRnJpZW5kbHlOYW1lKCl7cmV0dXJuIHRoaXMuX2RldmljZUZyaWVuZGx5TmFtZX1zdGF0aWMgc2V0IGRldmljZUZyaWVuZGx5TmFtZShlKXtPKEQsZSl9c3RhdGljIGluaXRMaWNlbnNlKGUsdCl7aWYoayhELGUpLEQuYkNhbGxJbml0TGljZW5zZT0hMCxcImJvb2xlYW5cIj09dHlwZW9mIHQmJnR8fFwib2JqZWN0XCI9PXR5cGVvZiB0JiZ0LmV4ZWN1dGVOb3cpcmV0dXJuIEEoKX1zdGF0aWMgc2V0RGV2aWNlRnJpZW5kbHlOYW1lKGUpe08oRCxlKX1zdGF0aWMgZ2V0RGV2aWNlRnJpZW5kbHlOYW1lKCl7cmV0dXJuIEQuX2RldmljZUZyaWVuZGx5TmFtZX1zdGF0aWMgZ2V0RGV2aWNlVVVJRCgpe3JldHVybihhc3luYygpPT4oYXdhaXQgcyhcImR5bmFtc29mdF91dWlkXCIsKGFzeW5jKCk9Pnthd2FpdCB0KCk7bGV0IGU9bmV3IGIscz1yKCk7aVtzXT10PT57aWYodC5zdWNjZXNzKWUucmVzb2x2ZSh0LnV1aWQpO2Vsc2V7Y29uc3Qgcz1FcnJvcih0Lm1lc3NhZ2UpO3Quc3RhY2smJihzLnN0YWNrPXQuc3RhY2spLGUucmVqZWN0KHMpfX0sZC5wb3N0TWVzc2FnZSh7dHlwZTpcImxpY2Vuc2VfZ2V0RGV2aWNlVVVJRFwiLGlkOnN9KSxJPWF3YWl0IGV9KSksSSkpKCl9fUQuX3BMb2FkPW5ldyBiLEQuYlBhc3NWYWxpZGF0aW9uPSExLEQuYkNhbGxJbml0TGljZW5zZT0hMSxELl9saWNlbnNlPV8sRC5fbGljZW5zZVNlcnZlcj1bXSxELl9kZXZpY2VGcmllbmRseU5hbWU9XCJcIixsLmxpY2Vuc2U9e3ZlcnNpb246XCIzLjQuMjFcIixwYXRoOnZ9LGYubGljZW5zZT17d2FzbTohMCxqczohMH0sZS5saWNlbnNlLkxpY2Vuc2VNYW5hZ2VyPUQ7Y29uc3QgTT1cIjEuNC4xMFwiO1wic3RyaW5nXCIhPXR5cGVvZiBsLnN0ZCYmaChsLnN0ZC52ZXJzaW9uLE0pPDAmJihsLnN0ZD17dmVyc2lvbjpNLHBhdGg6eSh2K2AuLi8uLi9keW5hbXNvZnQtY2FwdHVyZS12aXNpb24tc3RkQCR7TX0vZGlzdC9gKX0pO2NsYXNzIFJ7c3RhdGljIGdldFZlcnNpb24oKXtyZXR1cm5gMy40LjIxKFdvcmtlcjogJHtnLmxpY2Vuc2UmJmcubGljZW5zZS53b3JrZXJ8fFwiTm90IExvYWRlZFwifSwgV2FzbTogJHtnLmxpY2Vuc2UmJmcubGljZW5zZS53YXNtfHxcIk5vdCBMb2FkZWRcIn0pYH19ZXhwb3J0e0QgYXMgTGljZW5zZU1hbmFnZXIsUiBhcyBMaWNlbnNlTW9kdWxlfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./node_modules/dynamsoft-license/dist/license.esm.js\n"));

/***/ })

}]);